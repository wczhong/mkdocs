{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"kafka 3.5.x \u4e2d\u6587\u6587\u6863 Apache Kafka \u662f\u4e00\u4e2a\u5f00\u6e90\u5206\u5e03\u5f0f\u4e8b\u4ef6\u6d41\u5e73\u53f0\uff0c\u5df2\u88ab\u6570\u5343\u5bb6\u516c\u53f8\u7528\u4e8e\u9ad8\u6027\u80fd\u6570\u636e\u7ba1\u9053\u3001\u6d41\u5206\u6790\u3001\u6570\u636e\u96c6\u6210\u548c\u5173\u952e\u4efb\u52a1\u5e94\u7528\u7a0b\u5e8f\u3002 Kafka \u6587\u6863 \u5148\u524d\u7248\u672c\uff1a 0.7.x \u3001 0.8.0 \u3001 0.8.1.X \u3001 0.8.2.X \u3001 0.9.0.X \u3001 0.10.0.X \u3001 0.10.1.X \u3001 0.10.2.X \u3001 0.11.0.X \u3001 1.0.X \u3001 1.1.X \u3001 2.0.X \u3001 2.1.X \u3001 2.2.X \u3001 2.3.X \u3001 2.4.X \u3001 2.5.X \u3001 2.6.X \u3001 2.7.X \u3001 2.8.X \u3001 3.0.X \u3001 3.1.X \u3001 3.2.X \u3001 3.3.X \u3001 3.4.X \u3002 \u7f51\u7ad9\u5730\u5740 \u539f\u6587\uff1a Apache kafka Documentation \u534f\u8bae\uff1a CC BY-NC-SA 4.0 \u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u4ec5\u5b58\u5728\u4e24\u4ef6\u96be\u4e8b\uff1a\u7f13\u5b58\u5931\u6548\u548c\u547d\u540d\u3002\u2014\u2014\u83f2\u5c14\u00b7\u5361\u5c14\u987f \u5728\u7ebf\u9605\u8bfb(\u4e2d\u6587) | \u82f1\u6587\u5730\u5740 ApacheCN \u4e2d\u6587\u7ffb\u8bd1\u7ec4 713436582 ApacheCN \u7ec4\u7ec7\u8d44\u6e90 \u6ce8: \u5e7f\u544a\u4f4d\u5408\u4f5c(\u7269\u7f8e\u4ef7\u5ec9)\uff0c\u8bf7\u8054\u7cfb apachecn@163.com \u3010QQ/\u5fae\u4fe1: 529815144\u3011 \u8d21\u732e\u8005 Kafka 3.5.x \u4e2d\u6587\u6587\u6863\u8d21\u732e\u8005 @\u7247\u523b\u5c0f\u54e5\u54e5 Kafka 1.0.0 \u4e2d\u6587\u6587\u6863\u8d21\u732e\u8005 @\u90a3\u4f0a\u62b9\u5fae\u7b11 @mikechengwei @lc3030 @Elena7 @Raymoonkie @gongchu @Islotus @coboe @Qanora @sirwangshuai @hyper-xx @aspoman @chenliusuo @mantianstar \u8d5e\u52a9\u6211\u4eec","title":"kafke \u4e2d\u6587\u6587\u6863"},{"location":"#kafka-35x","text":"Apache Kafka \u662f\u4e00\u4e2a\u5f00\u6e90\u5206\u5e03\u5f0f\u4e8b\u4ef6\u6d41\u5e73\u53f0\uff0c\u5df2\u88ab\u6570\u5343\u5bb6\u516c\u53f8\u7528\u4e8e\u9ad8\u6027\u80fd\u6570\u636e\u7ba1\u9053\u3001\u6d41\u5206\u6790\u3001\u6570\u636e\u96c6\u6210\u548c\u5173\u952e\u4efb\u52a1\u5e94\u7528\u7a0b\u5e8f\u3002","title":"kafka 3.5.x \u4e2d\u6587\u6587\u6863"},{"location":"#kafka","text":"\u5148\u524d\u7248\u672c\uff1a 0.7.x \u3001 0.8.0 \u3001 0.8.1.X \u3001 0.8.2.X \u3001 0.9.0.X \u3001 0.10.0.X \u3001 0.10.1.X \u3001 0.10.2.X \u3001 0.11.0.X \u3001 1.0.X \u3001 1.1.X \u3001 2.0.X \u3001 2.1.X \u3001 2.2.X \u3001 2.3.X \u3001 2.4.X \u3001 2.5.X \u3001 2.6.X \u3001 2.7.X \u3001 2.8.X \u3001 3.0.X \u3001 3.1.X \u3001 3.2.X \u3001 3.3.X \u3001 3.4.X \u3002","title":"Kafka \u6587\u6863"},{"location":"#_1","text":"\u539f\u6587\uff1a Apache kafka Documentation \u534f\u8bae\uff1a CC BY-NC-SA 4.0 \u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u4ec5\u5b58\u5728\u4e24\u4ef6\u96be\u4e8b\uff1a\u7f13\u5b58\u5931\u6548\u548c\u547d\u540d\u3002\u2014\u2014\u83f2\u5c14\u00b7\u5361\u5c14\u987f \u5728\u7ebf\u9605\u8bfb(\u4e2d\u6587) | \u82f1\u6587\u5730\u5740 ApacheCN \u4e2d\u6587\u7ffb\u8bd1\u7ec4 713436582 ApacheCN \u7ec4\u7ec7\u8d44\u6e90 \u6ce8: \u5e7f\u544a\u4f4d\u5408\u4f5c(\u7269\u7f8e\u4ef7\u5ec9)\uff0c\u8bf7\u8054\u7cfb apachecn@163.com \u3010QQ/\u5fae\u4fe1: 529815144\u3011","title":"\u7f51\u7ad9\u5730\u5740"},{"location":"#_2","text":"","title":"\u8d21\u732e\u8005"},{"location":"#kafka-35x_1","text":"@\u7247\u523b\u5c0f\u54e5\u54e5","title":"Kafka 3.5.x \u4e2d\u6587\u6587\u6863\u8d21\u732e\u8005"},{"location":"#kafka-100","text":"@\u90a3\u4f0a\u62b9\u5fae\u7b11 @mikechengwei @lc3030 @Elena7 @Raymoonkie @gongchu @Islotus @coboe @Qanora @sirwangshuai @hyper-xx @aspoman @chenliusuo @mantianstar","title":"Kafka 1.0.0 \u4e2d\u6587\u6587\u6863\u8d21\u732e\u8005"},{"location":"#_3","text":"","title":"\u8d5e\u52a9\u6211\u4eec"},{"location":"1/","text":"1. \u5165\u95e8 1.1 \u7b80\u4ecb \u4ec0\u4e48\u662f\u4e8b\u4ef6\u6d41\uff1f \u4e8b\u4ef6\u6d41\u76f8\u5f53\u4e8e\u4eba\u4f53\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u7684\u6570\u5b57\u5316\u3002\u5b83\u662f\u201c\u6c38\u8fdc\u5728\u7ebf\u201d\u4e16\u754c\u7684\u6280\u672f\u57fa\u7840\uff0c\u5728\u8fd9\u4e2a\u4e16\u754c\u4e2d\uff0c\u4f01\u4e1a\u8d8a\u6765\u8d8a\u591a\u5730\u7531\u8f6f\u4ef6\u5b9a\u4e49\u548c\u81ea\u52a8\u5316\uff0c\u8f6f\u4ef6\u7684\u7528\u6237\u66f4\u591a\u5730\u662f\u8f6f\u4ef6\u3002 \u4ece\u6280\u672f\u4e0a\u8bb2\uff0c\u4e8b\u4ef6\u6d41\u662f\u4ee5\u4e8b\u4ef6\u6d41\u7684\u5f62\u5f0f\u4ece\u6570\u636e\u5e93\u3001\u4f20\u611f\u5668\u3001\u79fb\u52a8\u8bbe\u5907\u3001\u4e91\u670d\u52a1\u548c\u8f6f\u4ef6\u5e94\u7528\u7a0b\u5e8f\u7b49\u4e8b\u4ef6\u6e90\u5b9e\u65f6\u6355\u83b7\u6570\u636e\u7684\u5b9e\u8df5\uff1b\u6301\u4e45\u5b58\u50a8\u8fd9\u4e9b\u4e8b\u4ef6\u6d41\u4ee5\u4f9b\u4ee5\u540e\u68c0\u7d22\uff1b\u5b9e\u65f6\u548c\u56de\u987e\u6027\u5730\u64cd\u4f5c\u3001\u5904\u7406\u4e8b\u4ef6\u6d41\u5e76\u5bf9\u5176\u505a\u51fa\u53cd\u5e94\uff1b\u5e76\u6839\u636e\u9700\u8981\u5c06\u4e8b\u4ef6\u6d41\u8def\u7531\u5230\u4e0d\u540c\u7684\u76ee\u6807\u6280\u672f\u3002\u56e0\u6b64\uff0c\u4e8b\u4ef6\u6d41\u53ef\u786e\u4fdd\u6570\u636e\u7684\u8fde\u7eed\u6d41\u52a8\u548c\u89e3\u91ca\uff0c\u4ee5\u4fbf\u6b63\u786e\u7684\u4fe1\u606f\u5728\u6b63\u786e\u7684\u65f6\u95f4\u51fa\u73b0\u5728\u6b63\u786e\u7684\u5730\u70b9\u3002 \u6211\u53ef\u4ee5\u4f7f\u7528\u4e8b\u4ef6\u6d41\u505a\u4ec0\u4e48\uff1f \u4e8b\u4ef6\u6d41\u9002\u7528\u4e8e \u4f17\u591a\u884c\u4e1a\u548c\u7ec4\u7ec7\u7684 \u5404\u79cd\u7528\u4f8b \u3002\u5b83\u7684\u8bb8\u591a\u4f8b\u5b50\u5305\u62ec\uff1a \u5b9e\u65f6\u5904\u7406\u652f\u4ed8\u548c\u91d1\u878d\u4ea4\u6613\uff0c\u4f8b\u5982\u5728\u8bc1\u5238\u4ea4\u6613\u6240\u3001\u94f6\u884c\u548c\u4fdd\u9669\u4e2d\u3002 \u5b9e\u65f6\u8ddf\u8e2a\u548c\u76d1\u63a7\u6c7d\u8f66\u3001\u5361\u8f66\u3001\u8f66\u961f\u548c\u8d27\u8fd0\uff0c\u4f8b\u5982\u7269\u6d41\u548c\u6c7d\u8f66\u884c\u4e1a\u3002 \u6301\u7eed\u6355\u83b7\u548c\u5206\u6790\u6765\u81ea\u7269\u8054\u7f51\u8bbe\u5907\u6216\u5176\u4ed6\u8bbe\u5907\uff08\u4f8b\u5982\u5de5\u5382\u548c\u98ce\u7535\u573a\uff09\u7684\u4f20\u611f\u5668\u6570\u636e\u3002 \u6536\u96c6\u5ba2\u6237\u4e92\u52a8\u548c\u8ba2\u5355\u5e76\u7acb\u5373\u505a\u51fa\u53cd\u5e94\uff0c\u4f8b\u5982\u96f6\u552e\u3001\u9152\u5e97\u548c\u65c5\u6e38\u4e1a\u4ee5\u53ca\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002 \u76d1\u6d4b\u533b\u9662\u62a4\u7406\u4e2d\u7684\u60a3\u8005\u5e76\u9884\u6d4b\u75c5\u60c5\u53d8\u5316\uff0c\u4ee5\u786e\u4fdd\u5728\u7d27\u6025\u60c5\u51b5\u4e0b\u53ca\u65f6\u5f97\u5230\u6cbb\u7597\u3002 \u8fde\u63a5\u3001\u5b58\u50a8\u5e76\u63d0\u4f9b\u516c\u53f8\u4e0d\u540c\u90e8\u95e8\u751f\u6210\u7684\u6570\u636e\u3002 \u4f5c\u4e3a\u6570\u636e\u5e73\u53f0\u3001\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u548c\u5fae\u670d\u52a1\u7684\u57fa\u7840\u3002 Apache Kafka\u00ae \u662f\u4e00\u4e2a\u4e8b\u4ef6\u6d41\u5e73\u53f0\u3002\u8fd9\u610f\u5473\u7740\u4ec0\u4e48\uff1f Kafka \u7ed3\u5408\u4e86\u4e09\u4e2a\u5173\u952e\u529f\u80fd\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u4f7f\u7528 \u4e00\u4e2a\u7ecf\u8fc7\u5b9e\u6218\u68c0\u9a8c\u7684\u89e3\u51b3\u65b9\u6848\u6765\u5b9e\u73b0\u7aef\u5230\u7aef\u4e8b\u4ef6\u6d41\u7684 \u7528\u4f8b\uff1a \u53d1\u5e03 \uff08\u5199\u5165\uff09\u548c \u8ba2\u9605 \uff08\u8bfb\u53d6\uff09\u4e8b\u4ef6\u6d41\uff0c\u5305\u62ec\u4ece\u5176\u4ed6\u7cfb\u7edf\u6301\u7eed\u5bfc\u5165/\u5bfc\u51fa\u6570\u636e\u3002 \u6839\u636e\u9700\u8981\u6301\u4e45\u53ef\u9760\u5730 \u5b58\u50a8 \u4e8b\u4ef6\u6d41\u3002 \u5728\u4e8b\u4ef6\u53d1\u751f\u65f6\u6216\u56de\u987e\u6027\u5730 \u5904\u7406 \u4e8b\u4ef6\u6d41\u3002 \u6240\u6709\u8fd9\u4e9b\u529f\u80fd\u90fd\u662f\u4ee5\u5206\u5e03\u5f0f\u3001\u9ad8\u5ea6\u53ef\u6269\u5c55\u3001\u5f39\u6027\u3001\u5bb9\u9519\u548c\u5b89\u5168\u7684\u65b9\u5f0f\u63d0\u4f9b\u7684\u3002Kafka \u53ef\u4ee5\u90e8\u7f72\u5728\u88f8\u673a\u786c\u4ef6\u3001\u865a\u62df\u673a\u548c\u5bb9\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u90e8\u7f72\u5728\u672c\u5730\u548c\u4e91\u7aef\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u81ea\u884c\u7ba1\u7406 Kafka \u73af\u5883\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u5404\u79cd\u4f9b\u5e94\u5546\u63d0\u4f9b\u7684\u5b8c\u5168\u6258\u7ba1\u670d\u52a1\u3002 \u7b80\u800c\u8a00\u4e4b\uff0cKafka \u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff1f Kafka\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u7531\u901a\u8fc7\u9ad8\u6027\u80fd TCP\u7f51\u7edc\u534f\u8bae\u8fdb\u884c\u901a\u4fe1\u7684 \u670d\u52a1\u5668 \u548c \u5ba2\u6237\u7aef \u7ec4\u6210\u3002\u5b83\u53ef\u4ee5\u90e8\u7f72\u5728\u672c\u5730\u548c\u4e91\u73af\u5883\u4e2d\u7684\u88f8\u673a\u786c\u4ef6\u3001\u865a\u62df\u673a\u548c\u5bb9\u5668\u4e0a\u3002 \u670d\u52a1\u5668 \uff1aKafka \u4f5c\u4e3a\u4e00\u53f0\u6216\u591a\u53f0\u670d\u52a1\u5668\u7684\u96c6\u7fa4\u8fd0\u884c\uff0c\u53ef\u4ee5\u8de8\u8d8a\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3\u6216\u4e91\u533a\u57df\u3002\u5176\u4e2d\u4e00\u4e9b\u670d\u52a1\u5668\u5f62\u6210\u5b58\u50a8\u5c42\uff0c\u79f0\u4e3a\u4ee3\u7406\u3002\u5176\u4ed6\u670d\u52a1\u5668\u8fd0\u884c Kafka Connect \u4ee5\u6301\u7eed\u5bfc\u5165\u548c\u5bfc\u51fa\u6570\u636e\u4f5c\u4e3a\u4e8b\u4ef6\u6d41\uff0c\u4ee5\u5c06 Kafka \u4e0e\u60a8\u73b0\u6709\u7684\u7cfb\u7edf\uff08\u4f8b\u5982\u5173\u7cfb\u6570\u636e\u5e93\u4ee5\u53ca\u5176\u4ed6 Kafka \u96c6\u7fa4\uff09\u96c6\u6210\u3002\u4e3a\u4e86\u8ba9\u60a8\u5b9e\u73b0\u5173\u952e\u4efb\u52a1\u7528\u4f8b\uff0cKafka \u96c6\u7fa4\u5177\u6709\u9ad8\u5ea6\u53ef\u6269\u5c55\u6027\u548c\u5bb9\u9519\u6027\uff1a\u5982\u679c\u5176\u4e2d\u4efb\u4f55\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\uff0c\u5176\u4ed6\u670d\u52a1\u5668\u5c06\u63a5\u7ba1\u5176\u5de5\u4f5c\uff0c\u4ee5\u786e\u4fdd\u8fde\u7eed\u8fd0\u884c\u800c\u4e0d\u4f1a\u4e22\u5931\u4efb\u4f55\u6570\u636e\u3002 \u5ba2\u6237\u7aef \uff1a\u5b83\u4eec\u5141\u8bb8\u60a8\u7f16\u5199\u5206\u5e03\u5f0f\u5e94\u7528\u7a0b\u5e8f\u548c\u5fae\u670d\u52a1\uff0c\u5373\u4f7f\u5728\u7f51\u7edc\u95ee\u9898\u6216\u673a\u5668\u6545\u969c\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u53ef\u4ee5\u4ee5\u5bb9\u9519\u7684\u65b9\u5f0f\u5e76\u884c\u3001\u5927\u89c4\u6a21\u5730\u8bfb\u53d6\u3001\u5199\u5165\u548c\u5904\u7406\u4e8b\u4ef6\u6d41\u3002Kafka \u9644\u5e26\u4e86\u4e00\u4e9b\u6b64\u7c7b\u5ba2\u6237\u7aef\uff0c\u5e76\u7531 Kafka \u793e\u533a\u63d0\u4f9b\u7684 \u6570\u5341\u4e2a\u5ba2\u6237\u7aef \u8fdb\u884c\u4e86\u6269\u5145\uff1a\u5ba2\u6237\u7aef\u53ef\u7528\u4e8e Java \u548c Scala\uff0c\u5305\u62ec\u66f4\u9ad8\u7ea7\u522b\u7684 Kafka Streams \u5e93\uff0c\u9002\u7528\u4e8e Go\u3001Python\u3001C/C++ \u548c\u8bb8\u591a\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4ee5\u53ca REST API\u3002 \u4e3b\u8981\u6982\u5ff5\u548c\u672f\u8bed \u4e8b\u4ef6\u8bb0\u5f55\u4e86\u4e16\u754c\u4e0a\u6216\u60a8\u7684\u4f01\u4e1a\u4e2d\u201c\u53d1\u751f\u4e86\u4e00\u4e9b \u4e8b\u60c5 \u201d\u7684\u4e8b\u5b9e\u3002\u5728\u6587\u6863\u4e2d\u4e5f\u79f0\u4e3a\u8bb0\u5f55\u6216\u6d88\u606f\u3002\u5f53\u60a8\u5411 Kafka \u8bfb\u53d6\u6216\u5199\u5165\u6570\u636e\u65f6\uff0c\u60a8\u4ee5\u4e8b\u4ef6\u7684\u5f62\u5f0f\u6267\u884c\u6b64\u64cd\u4f5c\u3002\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u4e8b\u4ef6\u5177\u6709\u952e\u3001\u503c\u3001\u65f6\u95f4\u6233\u548c\u53ef\u9009\u7684\u5143\u6570\u636e\u6807\u5934\u3002\u8fd9\u662f\u4e00\u4e2a\u793a\u4f8b\u4e8b\u4ef6\uff1a Event key: \"Alice\" Event value: \"Made a payment of $200 to Bob\" Event timestamp: \"Jun. 25, 2020 at 2:06 p.m.\" \u751f\u4ea7\u8005 \u662f\u5c06\u4e8b\u4ef6\u53d1\u5e03\uff08\u5199\u5165\uff09\u5230 Kafka \u7684\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\uff0c\u800c \u6d88\u8d39\u8005 \u662f\u8ba2\u9605\uff08\u8bfb\u53d6\u548c\u5904\u7406\uff09\u8fd9\u4e9b\u4e8b\u4ef6\u7684\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u3002\u5728 Kafka \u4e2d\uff0c\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u5f7c\u6b64\u5b8c\u5168\u89e3\u8026\u4e14\u4e92\u4e0d\u53ef\u77e5\uff0c\u8fd9\u662f\u5b9e\u73b0 Kafka \u95fb\u540d\u7684\u9ad8\u53ef\u6269\u5c55\u6027\u7684\u5173\u952e\u8bbe\u8ba1\u5143\u7d20\u3002\u4f8b\u5982\uff0c\u751f\u4ea7\u8005\u6c38\u8fdc\u4e0d\u9700\u8981\u7b49\u5f85\u6d88\u8d39\u8005\u3002Kafka \u63d0\u4f9b\u4e86\u5404\u79cd \u4fdd\u8bc1 \uff0c\u4f8b\u5982\u4e00\u6b21\u6027\u5904\u7406\u4e8b\u4ef6\u7684\u80fd\u529b\u3002 \u4e8b\u4ef6\u88ab\u7ec4\u7ec7\u5e76\u6301\u4e45\u5b58\u50a8\u5728 \u4e3b\u9898 \u4e2d\u3002\u975e\u5e38\u7b80\u5355\uff0c\u4e3b\u9898\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u5939\uff0c\u4e8b\u4ef6\u662f\u8be5\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u3002\u793a\u4f8b\u4e3b\u9898\u540d\u79f0\u53ef\u4ee5\u662f\u201c\u4ed8\u6b3e\u201d\u3002Kafka \u4e2d\u7684\u4e3b\u9898\u59cb\u7ec8\u662f\u591a\u751f\u4ea7\u8005\u548c\u591a\u8ba2\u9605\u8005\uff1a\u4e00\u4e2a\u4e3b\u9898\u53ef\u4ee5\u6709\u96f6\u4e2a\u3001\u4e00\u4e2a\u6216\u591a\u4e2a\u5411\u5176\u5199\u5165\u4e8b\u4ef6\u7684\u751f\u4ea7\u8005\uff0c\u4ee5\u53ca\u96f6\u4e2a\u3001\u4e00\u4e2a\u6216\u591a\u4e2a\u8ba2\u9605\u8fd9\u4e9b\u4e8b\u4ef6\u7684\u6d88\u8d39\u8005\u3002\u4e3b\u9898\u4e2d\u7684\u4e8b\u4ef6\u53ef\u4ee5\u6839\u636e\u9700\u8981\u968f\u65f6\u8bfb\u53d6\u2014\u2014\u4e0e\u4f20\u7edf\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e0d\u540c\uff0c\u4e8b\u4ef6\u5728\u4f7f\u7528\u540e\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u76f8\u53cd\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u6bcf\u4e2a\u4e3b\u9898\u7684\u914d\u7f6e\u8bbe\u7f6e\u6765\u5b9a\u4e49 Kafka \u5e94\u4fdd\u7559\u4e8b\u4ef6\u7684\u65f6\u95f4\uff0c\u4e4b\u540e\u65e7\u4e8b\u4ef6\u5c06\u88ab\u4e22\u5f03\u3002Kafka \u7684\u6027\u80fd\u5728\u6570\u636e\u5927\u5c0f\u65b9\u9762\u5b9e\u9645\u4e0a\u662f\u6052\u5b9a\u7684\uff0c\u56e0\u6b64\u957f\u65f6\u95f4\u5b58\u50a8\u6570\u636e\u662f\u5b8c\u5168\u53ef\u4ee5\u7684\u3002 \u4e3b\u9898\u662f \u5206\u533a\u7684 \uff0c\u8fd9\u610f\u5473\u7740\u4e00\u4e2a\u4e3b\u9898\u5206\u5e03\u5728\u4f4d\u4e8e\u4e0d\u540c Kafka \u4ee3\u7406\u4e0a\u7684\u591a\u4e2a\u201c\u6876\u201d\u4e2d\u3002\u8fd9\u79cd\u6570\u636e\u7684\u5206\u5e03\u5f0f\u653e\u7f6e\u5bf9\u4e8e\u53ef\u6269\u5c55\u6027\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u540c\u65f6\u4ece\u591a\u4e2a\u4ee3\u7406\u8bfb\u53d6\u6570\u636e\u6216\u5411\u591a\u4e2a\u4ee3\u7406\u5199\u5165\u6570\u636e\u3002\u5f53\u65b0\u4e8b\u4ef6\u53d1\u5e03\u5230\u4e3b\u9898\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u4f1a\u9644\u52a0\u5230\u4e3b\u9898\u7684\u5206\u533a\u4e4b\u4e00\u3002\u5177\u6709\u76f8\u540c\u4e8b\u4ef6\u952e\uff08\u4f8b\u5982\uff0c\u5ba2\u6237\u6216\u8f66\u8f86 ID\uff09\u7684\u4e8b\u4ef6\u88ab\u5199\u5165\u540c\u4e00\u5206\u533a\uff0c\u5e76\u4e14 Kafka \u4fdd\u8bc1 \u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u4efb\u4f55\u6d88\u8d39\u8005\u5c06\u59cb\u7ec8\u6309\u7167\u4e0e\u5199\u5165\u7684\u987a\u5e8f\u5b8c\u5168\u76f8\u540c\u7684\u987a\u5e8f\u8bfb\u53d6\u8be5\u5206\u533a\u7684\u4e8b\u4ef6\u3002 \u56fe\uff1a\u6b64\u793a\u4f8b\u4e3b\u9898\u6709\u56db\u4e2a\u5206\u533a P1\u2013P4\u3002\u4e24\u4e2a\u4e0d\u540c\u7684\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u901a\u8fc7\u7f51\u7edc\u5c06\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898\u7684\u5206\u533a\uff0c\u76f8\u4e92\u72ec\u7acb\u5730\u5411\u4e3b\u9898\u53d1\u5e03\u65b0\u4e8b\u4ef6\u3002\u5177\u6709\u76f8\u540c\u952e\uff08\u5728\u56fe\u4e2d\u7528\u989c\u8272\u8868\u793a\uff09\u7684\u4e8b\u4ef6\u5c06\u5199\u5165\u540c\u4e00\u5206\u533a\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u5408\u9002\uff0c\u4e24\u4e2a\u751f\u4ea7\u8005\u90fd\u53ef\u4ee5\u5199\u5165\u540c\u4e00\u5206\u533a\u3002 \u4e3a\u4e86\u4f7f\u60a8\u7684\u6570\u636e\u5177\u6709\u5bb9\u9519\u6027\u548c\u9ad8\u53ef\u7528\u6027\uff0c\u6bcf\u4e2a\u4e3b\u9898\u90fd\u53ef\u4ee5 \u590d\u5236 \uff0c\u751a\u81f3\u53ef\u4ee5\u8de8\u5730\u7406\u533a\u57df\u6216\u6570\u636e\u4e2d\u5fc3\u8fdb\u884c\u590d\u5236\uff0c\u56e0\u6b64\u59cb\u7ec8\u6709\u591a\u4e2a\u4ee3\u7406\u62e5\u6709\u6570\u636e\u526f\u672c\uff0c\u4ee5\u9632\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u60a8\u5e0c\u671b\u5bf9broker\u8fdb\u884c\u7ef4\u62a4\u7b49\u7b49\u3002\u5e38\u89c1\u7684\u751f\u4ea7\u8bbe\u7f6e\u662f\u590d\u5236\u56e0\u5b50\u4e3a 3\uff0c\u5373\u59cb\u7ec8\u5b58\u5728\u6570\u636e\u7684\u4e09\u4e2a\u526f\u672c\u3002\u6b64\u590d\u5236\u662f\u5728\u4e3b\u9898\u5206\u533a\u7ea7\u522b\u6267\u884c\u7684\u3002 \u8fd9\u672c\u5165\u95e8\u8bfb\u7269\u5bf9\u4e8e\u4ecb\u7ecd\u6765\u8bf4\u5e94\u8be5\u8db3\u591f\u4e86\u3002 \u5982\u679c\u60a8\u6709\u5174\u8da3\uff0c\u6587\u6863\u7684\u8bbe\u8ba1 \u90e8\u5206\u8be6\u7ec6\u89e3\u91ca\u4e86 Kafka \u7684\u5404\u79cd\u6982\u5ff5\u3002 Kafka API \u9664\u4e86\u7528\u4e8e\u7ba1\u7406\u548c\u7ba1\u7406\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u5de5\u5177\u4e4b\u5916\uff0cKafka \u8fd8\u6709\u4e94\u4e2a\u9002\u7528\u4e8e Java \u548c Scala \u7684\u6838\u5fc3 API\uff1a \u7528\u4e8e\u7ba1\u7406\u548c\u68c0\u67e5\u4e3b\u9898\u3001\u4ee3\u7406\u548c\u5176\u4ed6 Kafka \u5bf9\u8c61\u7684 \u7ba1\u7406 API \u3002 Producer API\uff0c \u7528\u4e8e\u5c06\u4e8b\u4ef6\u6d41\u53d1\u5e03\uff08\u5199\u5165\uff09\u5230\u4e00\u4e2a\u6216\u591a\u4e2a Kafka \u4e3b\u9898\u3002 Consumer API \u7528\u4e8e\u8ba2\u9605\uff08\u8bfb\u53d6\uff09\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\u5e76\u5904\u7406\u4e3a\u5176\u751f\u6210\u7684\u4e8b\u4ef6\u6d41\u3002 Kafka Streams API \u7528\u4e8e\u5b9e\u73b0\u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u548c\u5fae\u670d\u52a1\u3002\u5b83\u63d0\u4f9b\u4e86\u66f4\u9ad8\u7ea7\u522b\u7684\u51fd\u6570\u6765\u5904\u7406\u4e8b\u4ef6\u6d41\uff0c\u5305\u62ec\u8f6c\u6362\u3001\u6709\u72b6\u6001\u64cd\u4f5c\uff08\u4f8b\u5982\u805a\u5408\u548c\u8fde\u63a5\uff09\u3001\u7a97\u53e3\u3001\u57fa\u4e8e\u4e8b\u4ef6\u65f6\u95f4\u7684\u5904\u7406\u7b49\u7b49\u3002\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\u8bfb\u53d6\u8f93\u5165\uff0c\u4ee5\u4fbf\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\u7684\u8f93\u51fa\uff0c\u4ece\u800c\u6709\u6548\u5730\u5c06\u8f93\u5165\u6d41\u8f6c\u6362\u4e3a\u8f93\u51fa\u6d41\u3002 Kafka Connect API \u7528\u4e8e\u6784\u5efa\u548c\u8fd0\u884c\u53ef\u91cd\u7528\u7684\u6570\u636e\u5bfc\u5165/\u5bfc\u51fa\u8fde\u63a5\u5668\uff0c\u8fd9\u4e9b\u8fde\u63a5\u5668\u6d88\u8017\uff08\u8bfb\u53d6\uff09\u6216\u751f\u6210\uff08\u5199\u5165\uff09\u6765\u81ea\u5916\u90e8\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u7684\u4e8b\u4ef6\u6d41\uff0c\u4ee5\u4fbf\u5b83\u4eec\u53ef\u4ee5\u4e0e Kafka \u96c6\u6210\u3002\u4f8b\u5982\uff0c\u5173\u7cfb\u6570\u636e\u5e93\uff08\u5982 PostgreSQL\uff09\u7684\u8fde\u63a5\u5668\u53ef\u80fd\u4f1a\u6355\u83b7\u5bf9\u4e00\u7ec4\u8868\u7684\u6bcf\u4e2a\u66f4\u6539\u3002\u7136\u800c\uff0c\u5728\u5b9e\u8df5\u4e2d\uff0c\u60a8\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u81ea\u5df1\u7684\u8fde\u63a5\u5668\uff0c\u56e0\u4e3a Kafka \u793e\u533a\u5df2\u7ecf\u63d0\u4f9b\u4e86\u6570\u767e\u4e2a\u73b0\u6210\u7684\u8fde\u63a5\u5668\u3002 \u4ece\u8fd9\u5f80\u54ea\u513f\u8d70 \u8981\u83b7\u5f97 Kafka \u7684\u5b9e\u8df5\u7ecf\u9a8c\uff0c\u8bf7\u6309\u7167 \u5feb\u901f\u5165\u95e8 \u8fdb\u884c\u64cd\u4f5c\u3002 \u8981\u66f4\u8be6\u7ec6\u5730\u4e86\u89e3 Kafka\uff0c\u8bf7\u9605\u8bfb \u6587\u6863 \u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9 Kafka\u4e66\u7c4d\u548c\u5b66\u672f\u8bba\u6587 \u3002 \u6d4f\u89c8 \u7528\u4f8b\uff0c \u4e86\u89e3\u6211\u4eec\u5168\u7403\u793e\u533a\u4e2d\u7684\u5176\u4ed6\u7528\u6237\u5982\u4f55\u4ece Kafka \u4e2d\u83b7\u53d6\u4ef7\u503c\u3002 \u52a0\u5165 \u5f53\u5730\u7684 Kafka \u805a\u4f1a\u5c0f\u7ec4 \uff0c \u89c2\u770bKafka \u793e\u533a\u4e3b\u8981\u4f1a\u8bae Kafka Summit \u7684\u6f14\u8bb2\u3002 1.2 \u4f7f\u7528\u6848\u4f8b \u4ee5\u4e0b\u662f Apache Kafka\u00ae \u7684\u4e00\u4e9b\u6d41\u884c\u7528\u4f8b\u7684\u63cf\u8ff0\u3002\u6709\u5173\u5176\u4e2d\u4e00\u4e9b\u6b63\u5728\u5b9e\u65bd\u7684\u9886\u57df\u7684\u6982\u8ff0\uff0c\u8bf7\u53c2\u9605 \u6b64\u535a\u5ba2\u6587\u7ae0 \u3002 \u6d88\u606f\u4f20\u9012 Kafka \u53ef\u4ee5\u5f88\u597d\u5730\u66ff\u4ee3\u66f4\u4f20\u7edf\u7684\u6d88\u606f\u4ee3\u7406\u3002\u4f7f\u7528\u6d88\u606f\u4ee3\u7406\u7684\u539f\u56e0\u6709\u591a\u79cd\uff08\u5c06\u5904\u7406\u4e0e\u6570\u636e\u751f\u4ea7\u8005\u5206\u79bb\u3001\u7f13\u51b2\u672a\u5904\u7406\u7684\u6d88\u606f\u7b49\uff09\u3002\u4e0e\u5927\u591a\u6570\u6d88\u606f\u7cfb\u7edf\u76f8\u6bd4\uff0cKafka \u5177\u6709\u66f4\u597d\u7684\u541e\u5410\u91cf\u3001\u5185\u7f6e\u5206\u533a\u3001\u590d\u5236\u548c\u5bb9\u9519\u80fd\u529b\uff0c\u8fd9\u4f7f\u5176\u6210\u4e3a\u5927\u89c4\u6a21\u6d88\u606f\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u826f\u597d\u89e3\u51b3\u65b9\u6848\u3002 \u6839\u636e\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u6d88\u606f\u4f20\u9012\u7684\u4f7f\u7528\u901a\u5e38\u541e\u5410\u91cf\u76f8\u5bf9\u8f83\u4f4e\uff0c\u4f46\u53ef\u80fd\u9700\u8981\u8f83\u4f4e\u7684\u7aef\u5230\u7aef\u5ef6\u8fdf\uff0c\u5e76\u4e14\u901a\u5e38\u4f9d\u8d56\u4e8e Kafka \u63d0\u4f9b\u7684\u5f3a\u5927\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u3002 \u5728\u8fd9\u4e2a\u9886\u57df\uff0cKafka \u53ef\u4ee5\u4e0e ActiveMQ \u6216 RabbitMQ \u7b49\u4f20\u7edf\u6d88\u606f\u7cfb\u7edf\u76f8\u5ab2\u7f8e\u3002 \u7f51\u7ad9\u6d3b\u52a8\u8ddf\u8e2a Kafka \u7684\u6700\u521d\u7528\u4f8b\u662f\u80fd\u591f\u5c06\u7528\u6237\u6d3b\u52a8\u8ddf\u8e2a\u7ba1\u9053\u91cd\u5efa\u4e3a\u4e00\u7ec4\u5b9e\u65f6\u53d1\u5e03-\u8ba2\u9605\u6e90\u3002\u8fd9\u610f\u5473\u7740\u7ad9\u70b9\u6d3b\u52a8\uff08\u9875\u9762\u6d4f\u89c8\u3001\u641c\u7d22\u6216\u7528\u6237\u53ef\u80fd\u6267\u884c\u7684\u5176\u4ed6\u64cd\u4f5c\uff09\u5c06\u53d1\u5e03\u5230\u4e2d\u5fc3\u4e3b\u9898\uff0c\u6bcf\u79cd\u6d3b\u52a8\u7c7b\u578b\u4e00\u4e2a\u4e3b\u9898\u3002\u8fd9\u4e9b\u6e90\u53ef\u7528\u4e8e\u4e00\u7cfb\u5217\u7528\u4f8b\u7684\u8ba2\u9605\uff0c\u5305\u62ec\u5b9e\u65f6\u5904\u7406\u3001\u5b9e\u65f6\u76d1\u63a7\u4ee5\u53ca\u52a0\u8f7d\u5230 Hadoop \u6216\u79bb\u7ebf\u6570\u636e\u4ed3\u5e93\u7cfb\u7edf\u4e2d\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5904\u7406\u548c\u62a5\u544a\u3002 \u6d3b\u52a8\u8ddf\u8e2a\u7684\u91cf\u901a\u5e38\u975e\u5e38\u5927\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u7528\u6237\u9875\u9762\u89c6\u56fe\u90fd\u4f1a\u751f\u6210\u8bb8\u591a\u6d3b\u52a8\u6d88\u606f\u3002 \u6307\u6807 Kafka\u5e38\u7528\u4e8e\u8fd0\u884c\u76d1\u63a7\u6570\u636e\u3002\u8fd9\u6d89\u53ca\u805a\u5408\u6765\u81ea\u5206\u5e03\u5f0f\u5e94\u7528\u7a0b\u5e8f\u7684\u7edf\u8ba1\u6570\u636e\u4ee5\u751f\u6210\u96c6\u4e2d\u7684\u64cd\u4f5c\u6570\u636e\u6e90\u3002 \u65e5\u5fd7\u805a\u5408 \u8bb8\u591a\u4eba\u4f7f\u7528 Kafka \u4f5c\u4e3a\u65e5\u5fd7\u805a\u5408\u89e3\u51b3\u65b9\u6848\u7684\u66ff\u4ee3\u54c1\u3002\u65e5\u5fd7\u805a\u5408\u901a\u5e38\u4ece\u670d\u52a1\u5668\u6536\u96c6\u7269\u7406\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u5c06\u5b83\u4eec\u653e\u5728\u4e00\u4e2a\u4e2d\u5fc3\u4f4d\u7f6e\uff08\u53ef\u80fd\u662f\u6587\u4ef6\u670d\u52a1\u5668\u6216 HDFS\uff09\u8fdb\u884c\u5904\u7406\u3002Kafka \u62bd\u8c61\u4e86\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5e76\u5c06\u65e5\u5fd7\u6216\u4e8b\u4ef6\u6570\u636e\u4f5c\u4e3a\u6d88\u606f\u6d41\u63d0\u4f9b\u4e86\u66f4\u6e05\u6670\u7684\u62bd\u8c61\u3002\u8fd9\u53ef\u4ee5\u5b9e\u73b0\u66f4\u4f4e\u5ef6\u8fdf\u7684\u5904\u7406\uff0c\u5e76\u66f4\u8f7b\u677e\u5730\u652f\u6301\u591a\u4e2a\u6570\u636e\u6e90\u548c\u5206\u5e03\u5f0f\u6570\u636e\u6d88\u8d39\u3002\u4e0e Scribe \u6216 Flume \u7b49\u4ee5\u65e5\u5fd7\u4e3a\u4e2d\u5fc3\u7684\u7cfb\u7edf\u76f8\u6bd4\uff0cKafka \u63d0\u4f9b\u540c\u6837\u826f\u597d\u7684\u6027\u80fd\u3001\u7531\u4e8e\u590d\u5236\u800c\u63d0\u4f9b\u66f4\u5f3a\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u4ee5\u53ca\u66f4\u4f4e\u7684\u7aef\u5230\u7aef\u5ef6\u8fdf\u3002 \u6d41\u5904\u7406 Kafka \u7684\u8bb8\u591a\u7528\u6237\u5728\u7531\u591a\u4e2a\u9636\u6bb5\u7ec4\u6210\u7684\u5904\u7406\u7ba1\u9053\u4e2d\u5904\u7406\u6570\u636e\uff0c\u5176\u4e2d\u539f\u59cb\u8f93\u5165\u6570\u636e\u4ece Kafka \u4e3b\u9898\u4e2d\u6d88\u8d39\uff0c\u7136\u540e\u805a\u5408\u3001\u4e30\u5bcc\u6216\u4ee5\u5176\u4ed6\u65b9\u5f0f\u8f6c\u6362\u4e3a\u65b0\u4e3b\u9898\u4ee5\u4f9b\u8fdb\u4e00\u6b65\u6d88\u8d39\u6216\u540e\u7eed\u5904\u7406\u3002\u4f8b\u5982\uff0c\u7528\u4e8e\u63a8\u8350\u65b0\u95fb\u6587\u7ae0\u7684\u5904\u7406\u7ba1\u9053\u53ef\u80fd\u4f1a\u4ece RSS \u6e90\u4e2d\u6293\u53d6\u6587\u7ae0\u5185\u5bb9\u5e76\u5c06\u5176\u53d1\u5e03\u5230\u201c\u6587\u7ae0\u201d\u4e3b\u9898\uff1b\u8fdb\u4e00\u6b65\u5904\u7406\u53ef\u80fd\u4f1a\u89c4\u8303\u5316\u6216\u5220\u9664\u91cd\u590d\u5185\u5bb9\uff0c\u5e76\u5c06\u6e05\u7406\u540e\u7684\u6587\u7ae0\u5185\u5bb9\u53d1\u5e03\u5230\u65b0\u4e3b\u9898\uff1b\u6700\u540e\u7684\u5904\u7406\u9636\u6bb5\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u5411\u7528\u6237\u63a8\u8350\u8be5\u5185\u5bb9\u3002\u6b64\u7c7b\u5904\u7406\u7ba1\u9053\u6839\u636e\u5404\u4e2a\u4e3b\u9898\u521b\u5efa\u5b9e\u65f6\u6570\u636e\u6d41\u56fe\u3002\u4ece0.10.0.0\u5f00\u59cb\uff0c\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u4f46\u529f\u80fd\u5f3a\u5927\u7684\u6d41\u5904\u7406\u5e93\uff0c\u79f0\u4e3a Kafka Streams Apache Kafka \u4e2d\u53ef\u4ee5\u6267\u884c\u4e0a\u8ff0\u6570\u636e\u5904\u7406\u3002\u9664\u4e86 Kafka Streams \u4e4b\u5916\uff0c\u66ff\u4ee3\u7684\u5f00\u6e90\u6d41\u5904\u7406\u5de5\u5177\u8fd8\u5305\u62ec Apache Storm \u548c Apache Samza \u3002 \u4e8b\u4ef6\u6eaf\u6e90 \u4e8b\u4ef6\u6eaf\u6e90 \u662f\u4e00\u79cd\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u98ce\u683c\uff0c\u5176\u4e2d\u72b6\u6001\u66f4\u6539\u88ab\u8bb0\u5f55\u4e3a\u6309\u65f6\u95f4\u6392\u5e8f\u7684\u8bb0\u5f55\u5e8f\u5217\u3002Kafka \u5bf9\u975e\u5e38\u5927\u7684\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u7684\u652f\u6301\u4f7f\u5176\u6210\u4e3a\u4ee5\u6b64\u98ce\u683c\u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u51fa\u8272\u540e\u7aef\u3002 \u63d0\u4ea4\u65e5\u5fd7 Kafka \u53ef\u4ee5\u5145\u5f53\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u4e00\u79cd\u5916\u90e8\u63d0\u4ea4\u65e5\u5fd7\u3002\u65e5\u5fd7\u6709\u52a9\u4e8e\u5728\u8282\u70b9\u4e4b\u95f4\u590d\u5236\u6570\u636e\uff0c\u5e76\u5145\u5f53\u6545\u969c\u8282\u70b9\u6062\u590d\u6570\u636e\u7684\u91cd\u65b0\u540c\u6b65\u673a\u5236\u3002 Kafka \u4e2d\u7684\u65e5\u5fd7\u538b\u7f29 \u529f\u80fd\u6709\u52a9\u4e8e\u652f\u6301\u8fd9\u79cd\u7528\u6cd5\u3002\u5728\u8fd9\u79cd\u7528\u6cd5\u4e2d\uff0cKafka \u7c7b\u4f3c\u4e8e Apache BookKeeper \u9879\u76ee\u3002 1.3 \u5feb\u901f\u5165\u95e8 \u7b2c 1 \u6b65\uff1a\u83b7\u53d6Kafka \u4e0b\u8f7d \u6700\u65b0\u7684 Kafka \u7248\u672c\u5e76\u89e3\u538b\uff1a $ tar -xzf kafka_2.13-3.5.0.tgz $ cd kafka_2.13-3.5.0 \u7b2c 2 \u6b65\uff1a\u542f\u52a8KAFKA\u73af\u5883 \u6ce8\u610f\uff1a\u60a8\u7684\u672c\u5730\u73af\u5883\u5fc5\u987b\u5b89\u88c5 Java 8+\u3002 Apache Kafka \u53ef\u4ee5\u4f7f\u7528 ZooKeeper \u6216 KRaft \u542f\u52a8\u3002\u8981\u5f00\u59cb\u4f7f\u7528\u4efb\u4e00\u914d\u7f6e\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u90e8\u5206\u4e4b\u4e00\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f46\u4e0d\u80fd\u540c\u65f6\u8fdb\u884c\u8fd9\u4e24\u4e2a\u90e8\u5206\u7684\u64cd\u4f5c\u3002 Kafka\u4e0e\u52a8\u7269\u56ed\u7ba1\u7406\u5458 \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u4fbf\u4ee5\u6b63\u786e\u7684\u987a\u5e8f\u542f\u52a8\u6240\u6709\u670d\u52a1\uff1a # Start the ZooKeeper service $ bin/zookeeper-server-start.sh config/zookeeper.properties \u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u8fd0\u884c\uff1a # Start the Kafka broker service $ bin/kafka-server-start.sh config/server.properties \u6240\u6709\u670d\u52a1\u6210\u529f\u542f\u52a8\u540e\uff0c\u60a8\u5c06\u62e5\u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u5e76\u53ef\u4f9b\u4f7f\u7528\u7684\u57fa\u672c Kafka \u73af\u5883\u3002 Kafka\u4e0e Kraft \u751f\u6210\u96c6\u7fa4 UUID $ KAFKA_CLUSTER_ID=\"$(bin/kafka-storage.sh random-uuid)\" \u8bbe\u7f6e\u65e5\u5fd7\u76ee\u5f55\u683c\u5f0f $ bin/kafka-storage.sh format -t $KAFKA_CLUSTER_ID -c config/kraft/server.properties \u542f\u52a8Kafka\u670d\u52a1\u5668 $ bin/kafka-server-start.sh config/kraft/server.properties \u4e00\u65e6 Kafka \u670d\u52a1\u5668\u6210\u529f\u542f\u52a8\uff0c\u60a8\u5c06\u62e5\u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u5e76\u53ef\u4f9b\u4f7f\u7528\u7684\u57fa\u672c Kafka \u73af\u5883\u3002 \u7b2c 3 \u6b65\uff1a\u521b\u5efa\u4e00\u4e2a\u4e3b\u9898\u6765\u5b58\u50a8\u60a8\u7684\u4e8b\u4ef6 Kafka \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f \u4e8b\u4ef6\u6d41\u5e73\u53f0 \uff0c\u53ef\u8ba9\u60a8\u8de8\u591a\u53f0\u673a\u5668\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5b58\u50a8\u548c\u5904\u7406 \u4e8b\u4ef6 \uff08\u5728\u6587\u6863\u4e2d \u4e5f\u79f0\u4e3a \u8bb0\u5f55 \u6216 \u6d88\u606f\uff09\u3002 \u793a\u4f8b\u4e8b\u4ef6\u5305\u62ec\u652f\u4ed8\u4ea4\u6613\u3001\u624b\u673a\u7684\u5730\u7406\u4f4d\u7f6e\u66f4\u65b0\u3001\u8fd0\u8f93\u8ba2\u5355\u3001\u7269\u8054\u7f51\u8bbe\u5907\u6216\u533b\u7597\u8bbe\u5907\u7684\u4f20\u611f\u5668\u6d4b\u91cf\u7b49\u7b49\u3002\u8fd9\u4e9b\u4e8b\u4ef6\u88ab\u7ec4\u7ec7\u5e76\u5b58\u50a8\u5728 \u4e3b\u9898 \u4e2d\u3002\u975e\u5e38\u7b80\u5355\uff0c\u4e3b\u9898\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u5939\uff0c\u4e8b\u4ef6\u662f\u8be5\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u3002 \u56e0\u6b64\uff0c\u5728\u7f16\u5199\u7b2c\u4e00\u4e2a\u4e8b\u4ef6\u4e4b\u524d\uff0c\u60a8\u5fc5\u987b\u521b\u5efa\u4e00\u4e2a\u4e3b\u9898\u3002\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u8fd0\u884c\uff1a $ bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092 \u6240\u6709 Kafka \u7684\u547d\u4ee4\u884c\u5de5\u5177\u90fd\u6709\u9644\u52a0\u9009\u9879\uff1a\u8fd0\u884c kafka-topics.sh \u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\u7684\u547d\u4ee4\u6765\u663e\u793a\u4f7f\u7528\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5411\u60a8\u663e\u793a \u65b0\u4e3b\u9898\u7684 \u5206\u533a\u8ba1\u6570\u7b49\u8be6\u7ec6\u4fe1\u606f\uff1a $ bin/kafka-topics.sh --describe --topic quickstart-events --bootstrap-server localhost:9092 Topic: quickstart-events TopicId: NPmZHyhbR9y00wMglMH2sg PartitionCount: 1 ReplicationFactor: 1 Configs: Topic: quickstart-events Partition: 0 Leader: 0 Replicas: 0 Isr: 0 \u7b2c 4 \u6b65\uff1a\u5c06\u4e00\u4e9b\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898 Kafka \u5ba2\u6237\u7aef\u901a\u8fc7\u7f51\u7edc\u4e0e Kafka \u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u4ee5\u5199\u5165\uff08\u6216\u8bfb\u53d6\uff09\u4e8b\u4ef6\u3002\u4e00\u65e6\u6536\u5230\uff0c\u4ee3\u7406\u5c06\u4ee5\u6301\u4e45\u4e14\u5bb9\u9519\u7684\u65b9\u5f0f\u5b58\u50a8\u4e8b\u4ef6\uff0c\u53ea\u8981\u60a8\u9700\u8981\uff0c\u751a\u81f3\u6c38\u8fdc\u5b58\u50a8\u3002 \u8fd0\u884c\u63a7\u5236\u53f0\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u4ee5\u5c06\u4e00\u4e9b\u4e8b\u4ef6\u5199\u5165\u60a8\u7684\u4e3b\u9898\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u60a8\u8f93\u5165\u7684\u6bcf\u4e00\u884c\u90fd\u4f1a\u5bfc\u81f4\u5c06\u4e00\u4e2a\u5355\u72ec\u7684\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898\u3002 $ bin/kafka-console-producer.sh --topic quickstart-events --bootstrap-server localhost:9092 This is my first event This is my second event Ctrl-C \u60a8\u53ef\u4ee5\u968f\u65f6 \u505c\u6b62\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u3002 \u7b2c 5 \u6b65\uff1a\u9605\u8bfb\u4e8b\u4ef6 \u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u8fd0\u884c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u6765\u8bfb\u53d6\u60a8\u521a\u521a\u521b\u5efa\u7684\u4e8b\u4ef6\uff1a $ bin/kafka-console-consumer.sh --topic quickstart-events --from-beginning --bootstrap-server localhost:9092 This is my first event This is my second event Ctrl-C \u60a8\u53ef\u4ee5\u968f\u65f6\u505c\u6b62\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u3002 \u8bf7\u968f\u610f\u5c1d\u8bd5\uff1a\u4f8b\u5982\uff0c\u5207\u6362\u56de\u751f\u4ea7\u8005\u7ec8\u7aef\uff08\u4e0a\u4e00\u6b65\uff09\u4ee5\u7f16\u5199\u5176\u4ed6\u4e8b\u4ef6\uff0c\u5e76\u67e5\u770b\u4e8b\u4ef6\u5982\u4f55\u7acb\u5373\u663e\u793a\u5728\u6d88\u8d39\u8005\u7ec8\u7aef\u4e2d\u3002 \u7531\u4e8e\u4e8b\u4ef6\u6301\u4e45\u5b58\u50a8\u5728 Kafka \u4e2d\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u4ee5\u88ab\u4efb\u610f\u6570\u91cf\u7684\u6d88\u8d39\u8005\u8bfb\u53d6\u4efb\u610f\u591a\u6b21\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u518d\u6b21\u91cd\u65b0\u8fd0\u884c\u4e4b\u524d\u7684\u547d\u4ee4\u6765\u8f7b\u677e\u9a8c\u8bc1\u8fd9\u4e00\u70b9\u3002 \u7b2c 6 \u6b65\uff1a\u4f7f\u7528 KAFKA CONNECT \u5c06\u6570\u636e\u4f5c\u4e3a\u4e8b\u4ef6\u6d41\u5bfc\u5165/\u5bfc\u51fa \u60a8\u53ef\u80fd\u5728\u5173\u7cfb\u6570\u636e\u5e93\u6216\u4f20\u7edf\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u7b49\u73b0\u6709\u7cfb\u7edf\u4e2d\u62e5\u6709\u5927\u91cf\u6570\u636e\uff0c\u4ee5\u53ca\u5df2\u7ecf\u4f7f\u7528\u8fd9\u4e9b\u7cfb\u7edf\u7684\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u3002 Kafka Connect \u5141\u8bb8\u60a8\u4e0d\u65ad\u5730\u5c06\u6570\u636e\u4ece\u5916\u90e8\u7cfb\u7edf\u6444\u53d6\u5230 Kafka \u4e2d\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 \u5b83\u662f\u4e00\u4e2a\u8fd0\u884c\u8fde\u63a5\u5668 \u7684\u53ef\u6269\u5c55\u5de5\u5177 \uff0c\u5b83\u5b9e\u73b0\u4e0e\u5916\u90e8\u7cfb\u7edf\u4ea4\u4e92\u7684\u81ea\u5b9a\u4e49\u200b\u200b\u903b\u8f91\u3002\u56e0\u6b64\uff0c\u5c06\u73b0\u6709\u7cfb\u7edf\u4e0e Kafka \u96c6\u6210\u975e\u5e38\u5bb9\u6613\u3002\u4e3a\u4e86\u4f7f\u8fd9\u4e2a\u8fc7\u7a0b\u66f4\u52a0\u5bb9\u6613\uff0c\u6709\u6570\u767e\u4e2a\u8fd9\u6837\u7684\u8fde\u63a5\u5668\u53ef\u4f9b\u4f7f\u7528\u3002 \u5728\u672c\u5feb\u901f\u5165\u95e8\u4e2d\uff0c\u6211\u4eec\u5c06\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u7b80\u5355\u7684\u8fde\u63a5\u5668\u8fd0\u884c Kafka Connect\uff0c\u5c06\u6570\u636e\u4ece\u6587\u4ef6\u5bfc\u5165\u5230 Kafka \u4e3b\u9898\uff0c\u5e76\u5c06\u6570\u636e\u4ece Kafka \u4e3b\u9898\u5bfc\u51fa\u5230\u6587\u4ef6\u3002 \u9996\u5148\uff0c\u786e\u4fdd\u6dfb\u52a0 connect-file-3.5.0.jar \u5230 plugin.path Connect \u5de5\u4f5c\u7ebf\u7a0b\u914d\u7f6e\u4e2d\u7684\u5c5e\u6027\u3002\u51fa\u4e8e\u672c\u5feb\u901f\u5165\u95e8\u7684\u76ee\u7684\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u5e76\u5c06\u8fde\u63a5\u5668\u7684\u5305\u89c6\u4e3a uber jar\uff0c\u5b83\u5728\u4ece\u5b89\u88c5\u76ee\u5f55\u8fd0\u884c\u5feb\u901f\u5165\u95e8\u547d\u4ee4\u65f6\u8d77\u4f5c\u7528\u3002\u4f46\u662f\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u4e8e\u751f\u4ea7\u90e8\u7f72\uff0c\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u59cb\u7ec8\u662f\u66f4\u597d\u7684\u9009\u62e9\u3002\u6709\u5173\u5982\u4f55\u8bbe\u7f6e\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c \u8bf7\u53c2\u9605 plugin.path \u3002 \u7f16\u8f91 config/connect-standalone.properties \u6587\u4ef6\uff0c\u6dfb\u52a0\u6216\u66f4\u6539\u4e0e plugin.path \u4ee5\u4e0b\u5185\u5bb9\u5339\u914d\u7684\u914d\u7f6e\u5c5e\u6027\uff0c\u7136\u540e\u4fdd\u5b58\u6587\u4ef6\uff1a > echo \"plugin.path=libs/connect-file-3.5.0.jar\" \u7136\u540e\uff0c\u9996\u5148\u521b\u5efa\u4e00\u4e9b\u79cd\u5b50\u6570\u636e\u8fdb\u884c\u6d4b\u8bd5\uff1a > echo -e \"foo\\nbar\" > test.txt \u6216\u8005\u5728 Windows \u4e0a\uff1a > echo foo> test.txt > echo bar>> test.txt \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u542f\u52a8\u4e24\u4e2a\u4ee5 \u72ec\u7acb \u6a21\u5f0f\u8fd0\u884c\u7684\u8fde\u63a5\u5668\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5728\u5355\u4e2a\u672c\u5730\u4e13\u7528\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u3002\u6211\u4eec\u63d0\u4f9b\u4e09\u4e2a\u914d\u7f6e\u6587\u4ef6\u4f5c\u4e3a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u59cb\u7ec8\u662f Kafka Connect \u8fdb\u7a0b\u7684\u914d\u7f6e\uff0c\u5305\u542b\u5e38\u89c1\u914d\u7f6e\uff0c\u4f8b\u5982\u8981\u8fde\u63a5\u7684 Kafka \u4ee3\u7406\u548c\u6570\u636e\u7684\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5176\u4f59\u914d\u7f6e\u6587\u4ef6\u5404\u81ea\u6307\u5b9a\u8981\u521b\u5efa\u7684\u8fde\u63a5\u5668\u3002\u8fd9\u4e9b\u6587\u4ef6\u5305\u62ec\u552f\u4e00\u7684\u8fde\u63a5\u5668\u540d\u79f0\u3001\u8981\u5b9e\u4f8b\u5316\u7684\u8fde\u63a5\u5668\u7c7b\u4ee5\u53ca\u8fde\u63a5\u5668\u6240\u9700\u7684\u4efb\u4f55\u5176\u4ed6\u914d\u7f6e\u3002 > bin/connect-standalone.sh config/connect-standalone.properties config/connect-file-source.properties config/connect-file-sink.properties \u8fd9\u4e9b\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u5305\u542b\u5728 Kafka \u4e2d\uff0c\u4f7f\u7528\u60a8\u4e4b\u524d\u542f\u52a8\u7684\u9ed8\u8ba4\u672c\u5730\u96c6\u7fa4\u914d\u7f6e\u5e76\u521b\u5efa\u4e24\u4e2a\u8fde\u63a5\u5668\uff1a\u7b2c\u4e00\u4e2a\u662f\u6e90\u8fde\u63a5\u5668\uff0c\u7528\u4e8e\u4ece\u8f93\u5165\u6587\u4ef6\u8bfb\u53d6\u884c\u5e76\u5c06\u6bcf\u884c\u751f\u6210\u5230 Kafka \u4e3b\u9898\uff0c\u7b2c\u4e8c\u4e2a\u662f\u63a5\u6536\u5668\u8fde\u63a5\u5668\u4ece Kafka \u4e3b\u9898\u8bfb\u53d6\u6d88\u606f\u5e76\u5c06\u6bcf\u6761\u6d88\u606f\u751f\u6210\u4e3a\u8f93\u51fa\u6587\u4ef6\u4e2d\u7684\u4e00\u884c\u3002 \u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u60a8\u5c06\u770b\u5230\u8bb8\u591a\u65e5\u5fd7\u6d88\u606f\uff0c\u5176\u4e2d\u5305\u62ec\u4e00\u4e9b\u6307\u793a\u8fde\u63a5\u5668\u6b63\u5728\u5b9e\u4f8b\u5316\u7684\u65e5\u5fd7\u6d88\u606f\u3002\u4e00\u65e6 Kafka Connect \u8fdb\u7a0b\u542f\u52a8\uff0c\u6e90\u8fde\u63a5\u5668\u5e94\u5f00\u59cb\u4ece test.txt \u4e3b\u9898\u8bfb\u53d6\u884c\u5e76\u5c06\u5176\u751f\u6210\u5230\u4e3b\u9898 connect-test \uff0c\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5e94\u5f00\u59cb\u4ece\u4e3b\u9898\u8bfb\u53d6\u6d88\u606f connect-test \u5e76\u5c06\u5176\u5199\u5165\u6587\u4ef6 test.sink.txt \u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u8f93\u51fa\u6587\u4ef6\u7684\u5185\u5bb9\u6765\u9a8c\u8bc1\u6570\u636e\u662f\u5426\u5df2\u901a\u8fc7\u6574\u4e2a\u7ba1\u9053\u4f20\u9012\uff1a > more test.sink.txt foo bar \u8bf7\u6ce8\u610f\uff0c\u6570\u636e\u5b58\u50a8\u5728 Kafka topic \u4e2d connect-test \uff0c\u56e0\u6b64\u6211\u4eec\u8fd8\u53ef\u4ee5\u8fd0\u884c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u6765\u67e5\u770b\u4e3b\u9898\u4e2d\u7684\u6570\u636e\uff08\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u8d39\u8005\u4ee3\u7801\u6765\u5904\u7406\u5b83\uff09\uff1a > bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic connect-test --from-beginning {\"schema\":{\"type\":\"string\",\"optional\":false},\"payload\":\"foo\"} {\"schema\":{\"type\":\"string\",\"optional\":false},\"payload\":\"bar\"} ... \u8fde\u63a5\u5668\u7ee7\u7eed\u5904\u7406\u6570\u636e\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06\u6570\u636e\u6dfb\u52a0\u5230\u6587\u4ef6\u5e76\u67e5\u770b\u5b83\u5728\u7ba1\u9053\u4e2d\u79fb\u52a8\uff1a > echo Another line>> test.txt \u60a8\u5e94\u8be5\u770b\u5230\u8be5\u884c\u51fa\u73b0\u5728\u63a7\u5236\u53f0\u4f7f\u7528\u8005\u8f93\u51fa\u548c\u63a5\u6536\u5668\u6587\u4ef6\u4e2d\u3002 \u7b2c 7 \u6b65\uff1a\u4f7f\u7528 KAFKA STREAMS \u5904\u7406\u60a8\u7684\u4e8b\u4ef6 \u5c06\u6570\u636e\u4f5c\u4e3a\u4e8b\u4ef6\u5b58\u50a8\u5728 Kafka \u4e2d\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u9002\u7528\u4e8e Java/Scala \u7684Kafka Streams \u5ba2\u6237\u7aef\u5e93 \u5904\u7406\u6570\u636e \u3002\u5b83\u5141\u8bb8\u60a8\u5b9e\u73b0\u5173\u952e\u4efb\u52a1\u5b9e\u65f6\u5e94\u7528\u7a0b\u5e8f\u548c\u5fae\u670d\u52a1\uff0c\u5176\u4e2d\u8f93\u5165\u548c/\u6216\u8f93\u51fa\u6570\u636e\u5b58\u50a8\u5728 Kafka \u4e3b\u9898\u4e2d\u3002Kafka Streams \u5c06\u5ba2\u6237\u7aef\u7f16\u5199\u548c\u90e8\u7f72\u6807\u51c6 Java \u548c Scala \u5e94\u7528\u7a0b\u5e8f\u7684\u7b80\u5355\u6027\u4e0e Kafka \u670d\u52a1\u5668\u7aef\u96c6\u7fa4\u6280\u672f\u7684\u4f18\u70b9\u76f8\u7ed3\u5408\uff0c\u4f7f\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u9ad8\u5ea6\u53ef\u6269\u5c55\u6027\u3001\u5f39\u6027\u3001\u5bb9\u9519\u6027\u548c\u5206\u5e03\u5f0f\u6027\u3002\u8be5\u5e93\u652f\u6301\u4e00\u6b21\u6027\u5904\u7406\u3001\u6709\u72b6\u6001\u64cd\u4f5c\u548c\u805a\u5408\u3001\u7a97\u53e3\u3001\u8fde\u63a5\u3001\u57fa\u4e8e\u4e8b\u4ef6\u65f6\u95f4\u7684\u5904\u7406\u7b49\u7b49\u3002 \u4e3a\u4e86\u8ba9\u60a8\u521d\u6b65\u4f53\u9a8c\u4e00\u4e0b\uff0c\u4ee5\u4e0b\u662f\u5982\u4f55\u5b9e\u73b0\u6d41\u884c\u7684 WordCount \u7b97\u6cd5\uff1a KStream<String, String> textLines = builder.stream(\"quickstart-events\"); KTable<String, Long> wordCounts = textLines .flatMapValues(line -> Arrays.asList(line.toLowerCase().split(\" \"))) .groupBy((keyIgnored, word) -> word) .count(); wordCounts.toStream().to(\"output-topic\", Produced.with(Serdes.String(), Serdes.Long())); Kafka Streams \u6f14\u793a \u548c \u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u6559\u7a0b \u6f14\u793a\u4e86\u5982\u4f55\u4ece\u5934\u5230\u5c3e\u7f16\u7801\u548c\u8fd0\u884c\u6b64\u7c7b\u6d41\u5e94\u7528\u7a0b\u5e8f\u3002 \u6b65\u9aa48\uff1a\u7ec8\u6b62KAFKA\u73af\u5883 \u73b0\u5728\u60a8\u5df2\u7ecf\u5b8c\u6210\u4e86\u5feb\u901f\u5165\u95e8\uff0c\u53ef\u4ee5\u968f\u610f\u62c6\u9664 Kafka \u73af\u5883\uff0c\u6216\u8005\u7ee7\u7eed\u5c1d\u8bd5\u3002 Ctrl-C \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u8fd9\u6837\u505a\uff0c \u8bf7\u4f7f\u7528 \u505c\u6b62\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u3002 \u4f7f\u7528 \u505c\u6b62 Kafka \u4ee3\u7406 Ctrl-C \u3002 \u6700\u540e\uff0c\u5982\u679c\u9075\u5faa Kafka with ZooKeeper \u90e8\u5206\uff0c\u8bf7\u4f7f\u7528 \u505c\u6b62 ZooKeeper \u670d\u52a1\u5668 Ctrl-C \u3002 \u5982\u679c\u60a8\u8fd8\u60f3\u5220\u9664\u672c\u5730 Kafka \u73af\u5883\u7684\u4efb\u4f55\u6570\u636e\uff0c\u5305\u62ec\u60a8\u5728\u6b64\u8fc7\u7a0b\u4e2d\u521b\u5efa\u7684\u4efb\u4f55\u4e8b\u4ef6\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a $ rm -rf /tmp/kafka-logs /tmp/zookeeper /tmp/kraft-combined-logs \u606d\u559c\uff01 \u60a8\u5df2\u6210\u529f\u5b8c\u6210 Apache Kafka \u5feb\u901f\u5165\u95e8\u3002 \u8981\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u6211\u4eec\u5efa\u8bae\u6267\u884c\u4ee5\u4e0b\u540e\u7eed\u6b65\u9aa4\uff1a \u9605\u8bfb\u7b80\u77ed\u7684 \u7b80\u4ecb \uff0c\u4e86\u89e3 Kafka \u5728\u9ad8\u5c42\u6b21\u4e0a\u7684\u5de5\u4f5c\u539f\u7406\u3001\u4e3b\u8981\u6982\u5ff5\u4ee5\u53ca\u4e0e\u5176\u4ed6\u6280\u672f\u7684\u6bd4\u8f83\u3002\u8981\u66f4\u8be6\u7ec6\u5730\u4e86\u89e3 Kafka\uff0c\u8bf7\u8bbf\u95ee \u6587\u6863 \u3002 \u6d4f\u89c8 \u7528\u4f8b\uff0c \u4e86\u89e3\u6211\u4eec\u5168\u7403\u793e\u533a\u4e2d\u7684\u5176\u4ed6\u7528\u6237\u5982\u4f55\u4ece Kafka \u4e2d\u83b7\u53d6\u4ef7\u503c\u3002 \u52a0\u5165 \u5f53\u5730\u7684 Kafka \u805a\u4f1a\u5c0f\u7ec4 \uff0c \u89c2\u770bKafka \u793e\u533a\u4e3b\u8981\u4f1a\u8bae Kafka Summit \u7684\u6f14\u8bb2\u3002 1.4 \u751f\u6001\u7cfb\u7edf \u5728\u4e3b\u53d1\u884c\u7248\u4e4b\u5916\uff0c\u6709\u5927\u91cf\u4e0e Kafka \u96c6\u6210\u7684\u5de5\u5177\u3002\u751f\u6001 \u7cfb\u7edf\u9875\u9762 \u5217\u51fa\u4e86\u5176\u4e2d\u7684\u8bb8\u591a\u5185\u5bb9\uff0c\u5305\u62ec\u6d41\u5904\u7406\u7cfb\u7edf\u3001Hadoop \u96c6\u6210\u3001\u76d1\u63a7\u548c\u90e8\u7f72\u5de5\u5177\u3002 1.5 \u65e7\u7248\u672c\u5347\u7ea7 \u4ece 0.8.x \u5230 3.4.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.5.1 \u6240\u6709\u5347\u7ea7\u6b65\u9aa4\u4e0e\u5347\u7ea7\u5230 3.5.0 \u76f8\u540c 3.5.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u5c06\u4f9d\u8d56\u9879 snappy-java \u5347\u7ea7\u5230\u4e0d\u6613\u53d7 CVE-2023-34455 \u5f71\u54cd\u7684\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u5728 Kafka CVE \u5217\u8868\u4e2d\u627e\u5230\u6709\u5173 CVE \u7684\u66f4\u591a\u4fe1\u606f \u3002 \u4fee\u590d\u4e86 3.3.0 \u4e2d\u5f15\u5165\u7684\u56de\u5f52\uff0c\u8be5\u56de\u5f52\u5bfc\u81f4 security.protocol \u914d\u7f6e\u503c\u4ec5\u9650\u4e8e\u5927\u5199\u3002\u4fee\u590d\u540e\uff0c security.protocol \u503c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-15053 \u3002 \u4ece 0.8.x \u5230 3.4.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.5.0 3.5.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 Kafka Streams \u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u72b6\u6001\u5b58\u50a8\u7c7b\u578b\uff0c\u5373\u7248\u672c\u5316\u952e\u503c\u5b58\u50a8\uff0c\u7528\u4e8e\u6bcf\u4e2a\u952e\u5b58\u50a8\u591a\u4e2a\u8bb0\u5f55\u7248\u672c\uff0c\u4ece\u800c\u4f7f\u5e26\u65f6\u95f4\u6233\u7684\u68c0\u7d22\u64cd\u4f5c\u80fd\u591f\u8fd4\u56de\u6307\u5b9a\u65f6\u95f4\u6233\u7684\u6700\u65b0\u8bb0\u5f55\uff08\u6bcf\u4e2a\u952e\uff09\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-889 \u548c KIP-914 \u3002 \u5982\u679c\u5728 DSL \u4e2d\u4f7f\u7528\u65b0\u7684\u5b58\u50a8\u7c7b\u578b\uff0c\u5219\u5c06\u5e94\u7528\u6539\u8fdb\u7684\u5904\u7406\u8bed\u4e49\uff0c\u5982 KIP-914 \u4e2d\u6240\u8ff0\u3002 KTable \u805a\u5408\u8bed\u4e49\u901a\u8fc7KIP-904 \u5f97\u5230\u4e86\u8fdb\u4e00\u6b65\u6539\u8fdb \uff0c\u73b0\u5728\u907f\u514d\u4e86\u865a\u5047\u7684\u4e2d\u95f4\u7ed3\u679c\u3002 Kafka Streams ProductionExceptionHandler \u901a\u8fc7 KIP-399 \u8fdb\u884c\u4e86\u6539\u8fdb\uff0c\u73b0\u5728\u8fd8\u6db5\u76d6\u4e86\u5e8f\u5217\u5316\u9519\u8bef\u3002 MirrorMaker \u73b0\u5728\u9ed8\u8ba4\u4f7f\u7528\u589e\u91cfAlterConfigs API \u6765\u540c\u6b65\u4e3b\u9898\u914d\u7f6e\uff0c\u800c\u4e0d\u662f\u5df2\u5f03\u7528\u7684 alterConfigs API\u3002\u5f15\u5165\u4e86\u4e00\u4e2a\u540d\u4e3a \u7684\u65b0\u8bbe\u7f6e\uff0c use.incremental.alter.configs \u5141\u8bb8\u7528\u6237\u63a7\u5236\u8981\u4f7f\u7528\u7684 API\u3002\u5f53\u59cb\u7ec8\u4f7f\u7528\u589e\u91cfAlterConfigs API \u65f6\uff0c\u6b64\u65b0\u8bbe\u7f6e\u5df2\u6807\u8bb0\u4e3a\u5df2\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\u4e2d\u5220\u9664\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-894 \u3002 JmxTool\u3001EndToEndLatency\u3001StreamsResetter\u3001ConsumerPerformance \u548c ClusterTool \u5df2\u8fc1\u79fb\u5230\u5de5\u5177\u6a21\u5757\u3002\u201ckafka.tools\u201d\u5305\u5df2\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\u4e2d\u66f4\u6539\u4e3a\u201corg.apache.kafka.tools\u201d\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KAFKA-14525 \u3002 \u5347\u7ea7\u57fa\u4e8eZooKeeper\u7684\u96c6\u7fa4 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6b65\u9aa4 5 \u4e2d\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.4 \u3001 3.3 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.4 \u3001 3.3 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.5 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.5 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 \u5347\u7ea7\u57fa\u4e8eKRaft\u7684\u96c6\u7fa4 \u5982\u679c\u60a8\u662f\u4ece 3.3.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6b65\u9aa4 3 \u4e2d\u7684\u6ce8\u91ca\u3002\u5c06metadata.version\u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u52303.3-IV0\u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002 \u4e00\u65e6\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u5f97\u5230\u9a8c\u8bc1\uff0c\u901a\u8fc7\u8fd0\u884c\u6765\u63d0\u5347metadata.version ./bin/kafka-features.sh upgrade --metadata 3.5 \u8bf7\u6ce8\u610f\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u7248\u672c\u5347\u7ea7\u540e\u65e0\u6cd5\u964d\u7ea7\u5230\u9884\u751f\u4ea7 3.0.x\u30013.1.x \u6216 3.2.x \u7248\u672c\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u964d\u7ea7\u5230\u751f\u4ea7\u7248\u672c\uff0c\u4f8b\u5982 3.3-IV0\u30013.3-IV1 \u7b49\u3002 \u4ece 0.8.x \u5230 3.3.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.4.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.3 \u3001 3.2 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.3 \u3001 3.2 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.4 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.4 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 \u5c06\u57fa\u4e8e KRaft \u7684\u96c6\u7fa4\u4ece 3.0.x \u5230 3.3.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.4.0 \u5982\u679c\u60a8\u662f\u4ece 3.3.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u6ce8\u91ca\u3002\u5c06metadata.version\u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u52303.3-IV0\u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002 \u4e00\u65e6\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u5f97\u5230\u9a8c\u8bc1\uff0c\u901a\u8fc7\u8fd0\u884c\u6765\u63d0\u5347metadata.version ./bin/kafka-features.sh upgrade --metadata 3.4 \u8bf7\u6ce8\u610f\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u7248\u672c\u5347\u7ea7\u540e\u65e0\u6cd5\u964d\u7ea7\u5230\u9884\u751f\u4ea7 3.0.x\u30013.1.x \u6216 3.2.x \u7248\u672c\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u964d\u7ea7\u5230\u751f\u4ea7\u7248\u672c\uff0c\u4f8b\u5982 3.3-IV0\u30013.3-IV1 \u7b49\u3002 3.4.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u81ea Apache Kafka 3.4.0 \u8d77\uff0c\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e2a\u7cfb\u7edf\u5c5e\u6027\uff08\u201corg.apache.kafka.disallowed.login.modules\u201d\uff09\u6765\u7981\u7528 SASL JAAS \u914d\u7f6e\u4e2d\u6709\u95ee\u9898\u7684\u767b\u5f55\u6a21\u5757\u4f7f\u7528\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u201ccom.sun.security.auth.module.JndiLoginModule\u201d\u5728 Apache Kafka 3.4.0 \u4e2d\u88ab\u7981\u7528\u3002 \u4ece 0.8.x \u5230 3.2.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.3.1 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.2 \u3001 3.1 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.2 \u3001 3.1 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.3 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.3 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 \u5c06\u57fa\u4e8e KRaft \u7684\u96c6\u7fa4\u4ece 3.0.x \u5230 3.2.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.3.1 \u5982\u679c\u60a8\u8981\u4ece 3.3.1 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u6ce8\u91ca\u3002\u5c06metadata.version\u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u52303.3-IV0\u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002 \u4e00\u65e6\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u5f97\u5230\u9a8c\u8bc1\uff0c\u901a\u8fc7\u8fd0\u884c\u6765\u63d0\u5347metadata.version ./bin/kafka-features.sh upgrade --metadata 3.3 \u8bf7\u6ce8\u610f\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u7248\u672c\u5347\u7ea7\u540e\u65e0\u6cd5\u964d\u7ea7\u5230\u9884\u751f\u4ea7 3.0.x\u30013.1.x \u6216 3.2.x \u7248\u672c\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u964d\u7ea7\u5230\u751f\u4ea7\u7248\u672c\uff0c\u4f8b\u5982 3.3-IV0\u30013.3-IV1 \u7b49\u3002 3.3.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 KRaft \u6a21\u5f0f\u5df2\u4e3a\u65b0\u96c6\u7fa4\u505a\u597d\u751f\u4ea7\u51c6\u5907\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff08\u5305\u62ec\u9650\u5236\uff09\uff0c \u8bf7\u53c2\u9605 KIP-833 \u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7528\u4e8e\u6ca1\u6709\u952e\u7684\u8bb0\u5f55\u7684\u5206\u533a\u5668\u5df2\u5f97\u5230\u6539\u8fdb\uff0c\u4ee5\u907f\u514d\u5f53\u4e00\u4e2a\u6216\u591a\u4e2a\u4ee3\u7406\u901f\u5ea6\u7f13\u6162\u65f6\u51fa\u73b0\u75c5\u6001\u884c\u4e3a\u3002\u65b0\u903b\u8f91\u53ef\u80fd\u4f1a\u5f71\u54cd\u6279\u5904\u7406\u884c\u4e3a\uff0c\u53ef\u4ee5\u4f7f\u7528 batch.size \u548c/\u6216 linger.ms \u914d\u7f6e\u8bbe\u7f6e\u6765\u8c03\u6574\u6279\u5904\u7406\u884c\u4e3a\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u6062\u590d\u4ee5\u524d\u7684\u884c\u4e3a partitioner.class=org.apache.kafka.clients.producer.internals.DefaultPartitioner \u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-794 \u3002 \u5982\u4e0a\u6240\u8ff0\uff0c\u73b0\u5728 KRaft \u96c6\u7fa4\u7684\u5347\u7ea7\u8fc7\u7a0b\u4e0e\u57fa\u4e8e ZK \u7684\u96c6\u7fa4\u7565\u6709\u4e0d\u540c\u3002 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684 API\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c addMetricIfAbsent \u5b83\u5c06 Metrics \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6307\u6807\uff1b\u5982\u679c\u5df2\u7ecf\u6ce8\u518c\uff0c\u5219\u8fd4\u56de\u76f8\u540c\u7684\u6307\u6807\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u884c\u4e3a\u4e0e API \u4e0d\u540c\uff0c\u540e\u8005\u5728\u5c1d\u8bd5\u521b\u5efa\u5df2\u5b58\u5728\u7684\u6307\u6807\u65f6 addMetric \u629b\u51fa\u3002 IllegalArgumentException \uff08 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-843 \uff09\u3002 \u4ece 0.8.x \u5230 3.1.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.2.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.1 \u3001 3.0 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.1 \u3001 3.0 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.2 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.2 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 3.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u542f\u7528\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u6027\u3002\u5f53\u5411 2.8.0 \u4e4b\u524d\u7684\u7ecf\u7eaa\u5546\u751f\u4ea7\u65f6\uff0c IDEMPOTENT_WRITE \u9700\u8981\u8bb8\u53ef\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5KIP-679 \u7684\u517c\u5bb9\u6027\u90e8\u5206 \u3002\u5728 3.0.0 \u548c 3.1.0 \u4e2d\uff0c\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u4e86\u5e94\u7528\u6b64\u9ed8\u8ba4\u503c\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5e42\u7b49\u6027\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\uff08\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \uff09\u3002\u6b64\u95ee\u9898\u5df2\u4fee\u590d\uff0c\u9ed8\u8ba4\u503c\u5df2\u5728 3.0.1\u30013.1.1 \u548c 3.2.0 \u4e2d\u6b63\u786e\u5e94\u7528\u3002 \u4e00\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u662f Connect\uff0c\u5b83\u9ed8\u8ba4\u7981\u7528\u6240\u6709\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u884c\u4e3a\uff0c\u4ee5\u4fbf\u7edf\u4e00\u652f\u6301\u4f7f\u7528\u5404\u79cd Kafka \u4ee3\u7406\u7248\u672c\u3002\u7528\u6237\u53ef\u4ee5\u66f4\u6539\u6b64\u884c\u4e3a\uff0c\u4ee5\u901a\u8fc7 Connect Worker \u548c/\u6216\u8fde\u63a5\u5668\u914d\u7f6e\u4e3a\u90e8\u5206\u6216\u6240\u6709\u751f\u4ea7\u8005\u542f\u7528\u5e42\u7b49\u6027\u3002Connect \u53ef\u80fd\u4f1a\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u9ed8\u8ba4\u542f\u7528\u5e42\u7b49\u751f\u4ea7\u8005\u3002 \u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0cKafka \u7528 reload4j \u53d6\u4ee3\u4e86 log4j\u3002\u8fd9\u4ec5\u5f71\u54cd\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u7684\u6a21\u5757\uff08 connect-runtime \u548c kafka-tools \u662f\u4e24\u4e2a\u8fd9\u6837\u7684\u793a\u4f8b\uff09\u3002\u8bb8\u591a\u6a21\u5757\uff08\u5305\u62ec \uff09 kafka-clients \u5c06\u5176\u7559\u7ed9\u5e94\u7528\u7a0b\u5e8f\u6765\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u3002 \u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728reload4j \u627e\u5230\u3002\u4f9d\u8d56\u4e8e Kafka \u9879\u76ee\u4e2d\u53d7\u5f71\u54cd\u6a21\u5757\u7684\u9879\u76ee\u5e94\u4f7f\u7528 slf4j-log4j12 \u7248\u672c 1.7.35 \u6216\u66f4\u9ad8\u7248\u672c \u6216 slf4j-reload4j \u4ee5\u907f\u514d \u6e90\u81ea\u65e5\u5fd7\u8bb0\u5f55\u6846\u67b6\u7684\u53ef\u80fd\u7684\u517c\u5bb9\u6027\u95ee\u9898 \u3002 \u793a\u4f8b\u8fde\u63a5\u5668 FileStreamSourceConnector \u548c FileStreamSinkConnector \u5df2\u4ece\u9ed8\u8ba4\u7c7b\u8def\u5f84\u4e2d\u5220\u9664\u3002\u8981\u5728 Kafka Connect \u72ec\u7acb\u6216\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\u4f7f\u7528\u5b83\u4eec\uff0c\u9700\u8981\u663e\u5f0f\u6dfb\u52a0\u5b83\u4eec\uff0c\u4f8b\u5982 CLASSPATH=./lib/connect-file-3.2.0.jar ./bin/connect-distributed.sh . \u4ece 0.8.x \u5230 3.0.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.1.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.0 \u3001 2.8 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.0 \u3001 2.8 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.1 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.1 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 3.1.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u542f\u7528\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u6027\u3002\u5f53\u5411 2.8.0 \u4e4b\u524d\u7684\u7ecf\u7eaa\u5546\u751f\u4ea7\u65f6\uff0c IDEMPOTENT_WRITE \u9700\u8981\u8bb8\u53ef\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5KIP-679 \u7684\u517c\u5bb9\u6027\u90e8\u5206 \u3002\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u4e86\u751f\u4ea7\u8005\u5e42\u7b49\u6027\u9ed8\u8ba4\u503c\u7684\u5e94\u7528\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5b83\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \u3002 \u6b64\u95ee\u9898\u5df2\u4fee\u590d\u5e76\u4e14\u9ed8\u8ba4\u503c\u5df2\u6b63\u786e\u5e94\u7528\u3002 \u4e00\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u662f Connect\uff0c\u5b83\u9ed8\u8ba4\u7981\u7528\u6240\u6709\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u884c\u4e3a\uff0c\u4ee5\u4fbf\u7edf\u4e00\u652f\u6301\u4f7f\u7528\u5404\u79cd Kafka \u4ee3\u7406\u7248\u672c\u3002\u7528\u6237\u53ef\u4ee5\u66f4\u6539\u6b64\u884c\u4e3a\uff0c\u4ee5\u901a\u8fc7 Connect Worker \u548c/\u6216\u8fde\u63a5\u5668\u914d\u7f6e\u4e3a\u90e8\u5206\u6216\u6240\u6709\u751f\u4ea7\u8005\u542f\u7528\u5e42\u7b49\u6027\u3002Connect \u53ef\u80fd\u4f1a\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u9ed8\u8ba4\u542f\u7528\u5e42\u7b49\u751f\u4ea7\u8005\u3002 \u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0cKafka \u7528 reload4j \u53d6\u4ee3\u4e86 log4j\u3002\u8fd9\u4ec5\u5f71\u54cd\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u7684\u6a21\u5757\uff08 connect-runtime \u548c kafka-tools \u662f\u4e24\u4e2a\u8fd9\u6837\u7684\u793a\u4f8b\uff09\u3002\u8bb8\u591a\u6a21\u5757\uff08\u5305\u62ec \uff09 kafka-clients \u5c06\u5176\u7559\u7ed9\u5e94\u7528\u7a0b\u5e8f\u6765\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u3002 \u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728reload4j \u627e\u5230\u3002\u4f9d\u8d56\u4e8e Kafka \u9879\u76ee\u4e2d\u53d7\u5f71\u54cd\u6a21\u5757\u7684\u9879\u76ee\u5e94\u4f7f\u7528 slf4j-log4j12 \u7248\u672c 1.7.35 \u6216\u66f4\u9ad8\u7248\u672c \u6216 slf4j-reload4j \u4ee5\u907f\u514d \u6e90\u81ea\u65e5\u5fd7\u8bb0\u5f55\u6846\u67b6\u7684\u53ef\u80fd\u7684\u517c\u5bb9\u6027\u95ee\u9898 \u3002 3.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 Apache Kafka \u652f\u6301 Java 17\u3002 \u4ee5\u4e0b\u6307\u6807\u5df2\u88ab\u5f03\u7528\uff1a bufferpool-wait-time-total \u3001 io-waittime-total \u548c iotime-total \u3002\u8bf7\u4f7f\u7528 bufferpool-wait-time-ns-total \u3001 io-wait-time-ns-total \u3001 \u548c io-time-ns-total \u4ee3\u66ff\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-773 \u3002 IBP 3.1 \u5c06\u4e3b\u9898 ID \u4f5c\u4e3aKIP-516 \u7684\u4e00\u90e8\u5206\u5f15\u5165 FetchRequest \u3002 \u4ece 0.8.x \u5230 2.8.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.0.1 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.8 \u3001 2.7 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.8 \u3001 2.7 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.0 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 3.0.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u542f\u7528\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u6027\u3002\u5f53\u5411 2.8.0 \u4e4b\u524d\u7684\u7ecf\u7eaa\u5546\u751f\u4ea7\u65f6\uff0c IDEMPOTENT_WRITE \u9700\u8981\u8bb8\u53ef\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5KIP-679 \u7684\u517c\u5bb9\u6027\u90e8\u5206 \u3002\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u4e86\u751f\u4ea7\u8005\u5e42\u7b49\u6027\u9ed8\u8ba4\u503c\u7684\u5e94\u7528\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5b83\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \u3002 \u6b64\u95ee\u9898\u5df2\u4fee\u590d\u5e76\u4e14\u9ed8\u8ba4\u503c\u5df2\u6b63\u786e\u5e94\u7528\u3002 3.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u751f\u4ea7\u8005\u5177\u6709\u66f4\u5f3a\u7684\u4ea4\u4ed8\u4fdd\u8bc1\uff1a idempotence \u5df2\u542f\u7528\u5e76 acks \u8bbe\u7f6e all \u4e3a\u800c\u4e0d\u662f 1 \u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-679 \u3002\u5728 3.0.0 \u548c 3.1.0 \u4e2d\uff0c\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u5e94\u7528\u5e42\u7b49\u9ed8\u8ba4\u503c\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5b83\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u8be5\u9519\u8bef\u5e76\u4e0d\u5f71\u54cd acks=all \u66f4\u6539\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \u3002 \u6b64\u95ee\u9898\u5df2\u4fee\u590d\uff0c\u9ed8\u8ba4\u503c\u5df2\u5728 3.0.1\u30013.1.1 \u548c 3.2.0 \u4e2d\u6b63\u786e\u5e94\u7528\u3002 \u81ea Apache Kafka 3.0 \u8d77\uff0cJava 8 \u548c Scala 2.12 \u652f\u6301\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728 Apache Kafka 4.0 \u4e2d\u5220\u9664\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-750 \u548c KIP-751 \u3002 ZooKeeper\u5df2\u5347\u7ea7\u81f33.6.3\u7248\u672c\u3002 KRaft \u6a21\u5f0f\u7684\u9884\u89c8\u7248\u53ef\u7528\uff0c\u4f46\u65e0\u6cd5\u4ece 2.8 \u65e9\u671f\u8bbf\u95ee\u7248\u672c\u5347\u7ea7\u5230\u8be5\u6a21\u5f0f\u3002 config/kraft/README.md \u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605\u6587\u4ef6\u3002 \u53d1\u5e03 tarball \u4e0d\u518d\u5305\u542b\u6d4b\u8bd5\u3001\u6e90\u3001javadoc \u548c\u6d4b\u8bd5\u6e90 jar\u3002\u8fd9\u4e9b\u4ecd\u7136\u53d1\u5e03\u5230 Maven \u4e2d\u592e\u5b58\u50a8\u5e93\u3002 \u73b0\u5728\uff0c\u8fd0\u884c\u65f6\u7c7b\u8def\u5f84\uff08\u800c\u4e0d\u662f\u7f16\u8bd1\u548c\u8fd0\u884c\u65f6\u7c7b\u8def\u5f84\uff09\u4e2d\u63d0\u4f9b\u4e86 \u8bb8\u591a\u5b9e\u73b0\u4f9d\u8d56\u9879 jar \u3002\u5347\u7ea7\u540e\u7684\u7f16\u8bd1\u9519\u8bef\u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u6dfb\u52a0\u7f3a\u5c11\u7684\u4f9d\u8d56\u9879 jar \u6216\u66f4\u65b0\u5e94\u7528\u7a0b\u5e8f\u4ee5\u4e0d\u4f7f\u7528\u5185\u90e8\u7c7b\u6765\u4fee\u590d\u3002 \u6d88\u8d39\u8005\u914d\u7f6e\u7684\u9ed8\u8ba4\u503c session.timeout.ms \u4ece 10 \u79d2\u589e\u52a0\u5230 45 \u79d2\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-735 \u3002 \u4ee3\u7406\u914d\u7f6e log.message.format.version \u548c\u4e3b\u9898\u914d\u7f6e message.format.version \u5df2\u88ab\u5f03\u7528\u3002\u4e24\u79cd\u914d\u7f6e\u7684\u503c\u59cb\u7ec8\u5047\u5b9a\u4e3a 3.0 if\u6216 inter.broker.protocol.version \u66f4\u9ad8 3.0 \u3002\u5982\u679c\u8bbe\u7f6e\u4e86 log.message.format.version \u6216 message.format.version \uff0c\u6211\u4eec\u5efa\u8bae\u5728\u5347\u7ea7\u5230 3.0 \u7684\u540c\u65f6\u6e05\u9664\u5b83\u4eec inter.broker.protocol.version \u3002\u8fd9\u5c06\u907f\u514d\u964d\u7ea7\u65f6\u6f5c\u5728\u7684\u517c\u5bb9\u6027\u95ee\u9898 inter.broker.protocol.version \u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-724 \u3002 Streams API \u5220\u9664\u4e86\u5728 2.5.0 \u6216\u66f4\u65e9\u7248\u672c\u4e2d\u5df2\u5f03\u7528\u7684\u6240\u6709\u5df2\u5f03\u7528\u7684 API\u3002\u6709\u5173\u5df2\u5220\u9664 API \u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u6bd4\u8f83\u8be6\u7ec6\u7684 Kafka Streams \u5347\u7ea7\u8bf4\u660e\u3002 Kafka Streams \u4e0d\u518d\u5bf9\u201cconnect:json\u201d\u6a21\u5757\u6709\u7f16\u8bd1\u65f6\u4f9d\u8d56\u6027 ( KAFKA-5146 )\u3002\u4f9d\u8d56\u8fd9\u79cd\u4f20\u9012\u4f9d\u8d56\u7684\u9879\u76ee\u5fc5\u987b\u663e\u5f0f\u58f0\u660e\u5b83\u3002 \u901a\u8fc7\u6307\u5b9a\u7684\u81ea\u5b9a\u4e49\u4e3b\u4f53\u6784\u5efa\u5668\u5b9e\u73b0 principal.builder.class \u73b0\u5728\u5fc5\u987b\u5b9e\u73b0\u8be5 KafkaPrincipalSerde \u63a5\u53e3\u4ee5\u5141\u8bb8\u5728\u4ee3\u7406\u4e4b\u95f4\u8f6c\u53d1\u3002\u6709\u5173 KafkaPrincipalSerde \u4f7f\u7528\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-590 \u3002 \u8bb8\u591a\u5df2\u5f03\u7528\u7684\u7c7b\u3001\u65b9\u6cd5\u548c\u5de5\u5177\u5df2\u4ece\u3001 \u548c clients \u6a21\u5757 connect \u4e2d\u5220\u9664\uff1a core``tools Scala Authorizer \u548c SimpleAclAuthorizer \u76f8\u5173\u7c7b\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u4f7f\u7528Java Authorizer \u548c AclAuthorizer \u4ee3\u66ff\u3002 \u8be5 Metric#value() \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\uff08 KAFKA-12573 \uff09\u3002 \u548c Sum \u7c7b Total \u5df2\u88ab\u5220\u9664\uff08 KAFKA-12584 \uff09\u3002\u8bf7\u4f7f\u7528 WindowedSum and CumulativeSum \u4ee3\u66ff\u3002 \u548c Count \u7c7b SampledTotal \u88ab\u5220\u9664\u3002\u8bf7\u5206\u522b\u4f7f\u7528 WindowedCount \u548c WindowedSum \u6765\u4ee3\u66ff\u3002 \u3001 PrincipalBuilder \u548c DefaultPrincipalBuilder \u7c7b ResourceFilter \u5df2\u88ab\u5220\u9664\u3002 SslConfigs \u3001 SaslConfigs \u548c AclBinding \u4e2d \u5220\u9664\u4e86\u5404\u79cd\u5e38\u91cf\u548c\u6784\u9020\u51fd\u6570 AclBindingFilter \u3002 \u8fd9\u4e9b Admin.electedPreferredLeaders() \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 Admin.electLeaders \u3002 \u547d\u4ee4\u884c\u5de5\u5177 kafka-preferred-replica-election \u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 kafka-leader-election \u3002 \u8be5 --zookeeper \u9009\u9879\u5df2\u4ece kafka-topics \u548c kafka-reassign-partitions \u547d\u4ee4\u884c\u5de5\u5177\u4e2d\u5220\u9664\u3002\u8bf7\u6539\u7528 --bootstrap-server \u3002 \u5728 kafka-configs \u547d\u4ee4\u884c\u5de5\u5177\u4e2d\uff0c\u8be5 --zookeeper \u9009\u9879\u4ec5\u652f\u6301\u66f4\u65b0 SCRAM \u51ed\u8bc1\u914d\u7f6e \u4ee5\u53ca \u5728\u4ee3\u7406\u672a\u8fd0\u884c\u65f6\u63cf\u8ff0/\u66f4\u65b0\u52a8\u6001\u4ee3\u7406\u914d\u7f6e \u3002\u8bf7\u7528\u4e8e --bootstrap-server \u5176\u4ed6\u914d\u7f6e\u64cd\u4f5c\u3002 \u6784\u9020\u51fd\u6570 ConfigEntry \u88ab\u5220\u9664\uff08 KAFKA-12577 \uff09\u3002\u8bf7\u6539\u7528\u5269\u4f59\u7684\u516c\u5171\u6784\u9020\u51fd\u6570\u3002 default \u5ba2\u6237\u7aef\u914d\u7f6e\u7684\u914d\u7f6e\u503c client.dns.lookup \u5df2\u88ab\u5220\u9664\u3002\u4e07\u4e00\u60a8\u663e\u5f0f\u8bbe\u7f6e\u6b64\u914d\u7f6e\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4fdd\u7559\u8be5\u914d\u7f6e\u672a\u8bbe\u7f6e\uff08 use_all_dns_ips \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\u3002 \u548c ExtendedDeserializer \u7c7b ExtendedSerializer \u5df2\u88ab\u5220\u9664\u3002\u8bf7\u4f7f\u7528 Deserializer and Serializer \u4ee3\u66ff\u3002 \u8be5 close(long, TimeUnit) \u65b9\u6cd5\u5df2\u4ece\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u7ba1\u7406\u5ba2\u6237\u7aef\u4e2d\u5220\u9664\u3002\u8bf7\u4f7f\u7528 close(Duration) . \u548c ConsumerConfig.addDeserializerToConfig \u65b9\u6cd5 ProducerConfig.addSerializerToConfig \u5df2\u88ab\u5220\u9664\u3002\u8fd9\u4e9b\u65b9\u6cd5\u65e0\u610f\u6210\u4e3a\u516c\u5171 API\uff0c\u5e76\u4e14\u6ca1\u6709\u66ff\u4ee3\u65b9\u6cd5\u3002 \u8be5 NoOffsetForPartitionException.partition() \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 partitions() \u3002 \u9ed8\u8ba4\u503c partition.assignment.strategy \u66f4\u6539\u4e3a\u201c[RangeAssignor, CooperativeStickyAssignor]\u201d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u4f7f\u7528 RangeAssignor\uff0c\u4f46\u5141\u8bb8\u5347\u7ea7\u5230 CooperativeStickyAssignor\uff0c\u53ea\u9700\u4e00\u6b21\u6eda\u52a8\u5f39\u8df3\u5373\u53ef\u4ece\u5217\u8868\u4e2d\u5220\u9664 RangeAssignor\u3002 \u8bf7\u5728\u6b64\u5904 \u67e5\u770b\u5ba2\u6237\u7aef\u5347\u7ea7\u8def\u5f84\u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002 Scala kafka.common.MessageFormatter \u88ab\u5220\u9664\u4e86\u3002\u8bf7\u4f7f\u7528Java org.apache.kafka.common.MessageFormatter . \u8be5 MessageFormatter.init(Properties) \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 configure(Map) \u3002 \u8be5 checksum() \u65b9\u6cd5\u5df2\u4ece ConsumerRecord \u548c\u4e2d\u5220\u9664 RecordMetadata \u3002\u6d88\u606f\u683c\u5f0f v2\uff08\u4ece 0.11 \u5f00\u59cb\u4e00\u76f4\u662f\u9ed8\u8ba4\u683c\u5f0f\uff09\u5c06\u6821\u9a8c\u548c\u4ece\u8bb0\u5f55\u79fb\u81f3\u8bb0\u5f55\u6279\u6b21\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u6ca1\u6709\u610f\u4e49\uff0c\u4e5f\u4e0d\u5b58\u5728\u66ff\u4ee3\u65b9\u6cd5\u3002 \u8be5\u7c7b ChecksumMessageFormatter \u5df2\u88ab\u5220\u9664\u3002\u5b83\u4e0d\u662f\u516c\u5171 API \u7684\u4e00\u90e8\u5206\uff0c\u4f46\u53ef\u80fd\u5df2\u4e0e kafka-console-consumer.sh . \u5b83\u62a5\u544a\u4e86\u6bcf\u6761\u8bb0\u5f55\u7684\u6821\u9a8c\u548c\uff0c\u81ea\u6d88\u606f\u683c\u5f0f v2 \u4ee5\u6765\u4e0d\u518d\u652f\u6301\u8be5\u6821\u9a8c\u548c\u3002 \u8be5\u7c7b org.apache.kafka.clients.consumer.internals.PartitionAssignor \u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 org.apache.kafka.clients.consumer.ConsumerPartitionAssignor \u3002 \u548c\u914d\u7f6e\u5df2\u88ab\u5220\u9664 ( quota.producer.default KAFKA -12591 )\u3002\u5fc5\u987b\u6539\u7528\u52a8\u6001\u914d\u989d\u9ed8\u8ba4\u503c\u3002 quota.consumer.default \u548c\u914d\u7f6e\u5df2\u88ab port \u5220\u9664 host.name \u3002\u8bf7\u6539\u7528 listeners \u3002 \u548c\u914d\u7f6e\u5df2\u88ab advertised.port \u5220\u9664 advertised.host.name \u3002\u8bf7\u6539\u7528 advertised.listeners \u3002 \u5df2\u5f03\u7528\u7684\u5de5\u4f5c\u7a0b\u5e8f\u914d\u7f6e rest.host.name \u5df2\u4eceKafka Connect \u5de5\u4f5c\u7a0b\u5e8f\u914d\u7f6e\u4e2d rest.port \u5220\u9664 ( KAFKA-12482 )\u3002 \u8bf7\u6539\u7528 listeners \u3002 \u8be5 Producer#sendOffsetsToTransaction(Map offsets, String consumerGroupId) \u65b9\u6cd5\u5df2\u88ab\u5f03\u7528\u3002\u8bf7 Producer#sendOffsetsToTransaction(Map offsets, ConsumerGroupMetadata metadata) \u6539\u7528\uff0c\u5176\u4e2d ConsumerGroupMetadata \u53ef\u4ee5\u901a\u8fc7 \u68c0\u7d22 KafkaConsumer#groupMetadata() \u4ee5\u83b7\u5f97\u66f4\u5f3a\u7684\u8bed\u4e49\u3002\u8bf7\u6ce8\u610f\uff0c\u5b8c\u6574\u7684\u6d88\u8d39\u8005\u7ec4\u5143\u6570\u636e\u96c6\u53ea\u6709\u4ee3\u7406\u6216 2.5 \u6216\u66f4\u9ad8\u7248\u672c\u624d\u80fd\u7406\u89e3\uff0c\u56e0\u6b64\u60a8\u5fc5\u987b\u5347\u7ea7\u60a8\u7684 kafka \u96c6\u7fa4\u4ee5\u83b7\u5f97\u66f4\u5f3a\u5927\u7684\u8bed\u4e49\u3002\u5426\u5219\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5 new ConsumerGroupMetadata(consumerGroupId) \u4e0e\u8001broker\u5408\u4f5c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-732 \u3002 \u8fde\u63a5 internal.key.converter \u548c internal.value.converter \u5c5e\u6027\u5df2\u88ab\u5b8c\u5168 \u5220\u9664 \u3002\u81ea\u7248\u672c 2.0.0 \u4ee5\u6765\uff0c\u5df2\u5f03\u7528\u8fd9\u4e9b Connect \u5de5\u4f5c\u7ebf\u7a0b\u5c5e\u6027\u7684\u4f7f\u7528\u3002\u73b0\u5728\uff0c\u5de5\u4f5c\u4eba\u5458\u88ab\u786c\u7f16\u7801\u4e3a\u4f7f\u7528 JSON \u8f6c\u6362\u5668\u5e76 schemas.enable \u8bbe\u7f6e\u4e3a false \u3002 \u5982\u679c\u60a8\u7684\u96c6\u7fa4\u4e00\u76f4\u5728\u4f7f\u7528\u4e0d\u540c\u7684\u5185\u90e8\u952e\u6216\u503c\u8f6c\u6362\u5668\uff0c\u60a8\u53ef\u4ee5\u6309\u7167KIP-738 \u4e2d\u6982\u8ff0\u7684\u8fc1\u79fb\u6b65\u9aa4 \u5c06 Connect \u96c6\u7fa4\u5b89\u5168\u5347\u7ea7\u5230 3.0\u3002 \u57fa\u4e8e Connect \u7684 MirrorMaker (MM2) \u5305\u62ec\u5bf9\u652f\u6301\u7684\u66f4\u6539 IdentityReplicationPolicy \uff0c\u65e0\u9700\u91cd\u547d\u540d\u4e3b\u9898\u5373\u53ef\u5b9e\u73b0\u590d\u5236\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ecd\u4f7f\u7528\u73b0\u6709\u7684 DefaultReplicationPolicy \uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7 replication.policy \u914d\u7f6e\u5c5e\u6027\u542f\u7528\u8eab\u4efd\u590d\u5236\u3002\u8fd9\u5bf9\u4e8e\u4ece\u8f83\u65e7\u7684 MirrorMaker (MM1) \u8fc1\u79fb\u7684\u7528\u6237\uff0c\u6216\u8005\u5bf9\u4e8e\u5177\u6709\u7b80\u5355\u5355\u5411\u590d\u5236\u62d3\u6251\u4e14\u4e0d\u5e0c\u671b\u4e3b\u9898\u91cd\u547d\u540d\u7684\u7528\u4f8b\u7279\u522b\u6709\u7528\u3002\u8bf7\u6ce8\u610f IdentityReplicationPolicy \uff0c\u4e0e \u4e0d\u540c DefaultReplicationPolicy \uff0c \u65e0\u6cd5\u963b\u6b62\u57fa\u4e8e\u4e3b\u9898\u540d\u79f0\u7684\u590d\u5236\u5faa\u73af\uff0c\u56e0\u6b64\u5728\u6784\u5efa\u590d\u5236\u62d3\u6251\u65f6\u8bf7\u6ce8\u610f\u907f\u514d\u5faa\u73af\u3002 \u6700\u521d\u7684 MirrorMaker (MM1) \u548c\u76f8\u5173\u7c7b\u5df2\u88ab\u5f03\u7528\u3002\u8bf7\u4f7f\u7528\u57fa\u4e8e Connect \u7684 MirrorMaker (MM2)\uff0c\u5982 \u5f02\u5730\u590d\u5236\u90e8\u5206 \u4e2d\u6240\u8ff0\u3002 \u4ece 0.8.x \u5230 2.7.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.8.1 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.7 \u3001 2.6 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.7 \u3001 2.6 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.8 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.8 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 2.8.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 2.8.0 \u7248\u672c\u5411KIP-679 \u4e2d\u5f15\u5165\u7684\u6388\u6743\u8005\u63a5\u53e3\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u65b9\u6cd5 \u3002\u5176\u52a8\u673a\u662f\u89e3\u9501\u6211\u4eec\u672a\u6765\u7684\u8ba1\u5212\uff0c\u4ee5\u9ed8\u8ba4\u542f\u7528\u6700\u5f3a\u7684\u6d88\u606f\u4f20\u9012\u4fdd\u8bc1\u3002\u81ea\u5b9a\u4e49\u6388\u6743\u8005\u5e94\u8003\u8651\u63d0\u4f9b\u66f4\u6709\u6548\u7684\u5b9e\u73b0\uff0c\u652f\u6301\u5ba1\u6838\u65e5\u5fd7\u8bb0\u5f55\u548c\u4efb\u4f55\u81ea\u5b9a\u4e49\u914d\u7f6e\u6216\u8bbf\u95ee\u89c4\u5219\u3002 IBP 2.8 \u5c06\u4e3b\u9898 ID \u4f5c\u4e3aKIP-516 \u7684\u4e00\u90e8\u5206\u5f15\u5165\u4e3b\u9898 \u3002\u4f7f\u7528 ZooKeeper \u65f6\uff0c\u6b64\u4fe1\u606f\u5b58\u50a8\u5728 TopicZNode \u4e2d\u3002\u5982\u679c\u96c6\u7fa4\u964d\u7ea7\u5230\u4ee5\u524d\u7684 IBP \u6216\u7248\u672c\uff0c\u672a\u6765\u7684\u4e3b\u9898\u5c06\u4e0d\u4f1a\u83b7\u5f97\u4e3b\u9898 ID\uff0c\u5e76\u4e14\u4e0d\u4fdd\u8bc1\u4e3b\u9898\u5c06\u5728 ZooKeeper \u4e2d\u4fdd\u7559\u5176\u4e3b\u9898 ID\u3002\u8fd9\u610f\u5473\u7740\u518d\u6b21\u5347\u7ea7\u65f6\uff0c\u67d0\u4e9b\u4e3b\u9898\u6216\u6240\u6709\u4e3b\u9898\u5c06\u88ab\u5206\u914d\u65b0\u7684 ID\u3002 Kafka Streams \u5f15\u5165\u4e86\u7c7b\u578b\u5b89\u5168 split() \u8fd0\u7b97\u7b26\u4f5c\u4e3a\u5df2\u5f03\u7528\u65b9\u6cd5\u7684\u66ff\u4ee3 KStream#branch() \uff08\u53c2\u89c1 KIP-418 \uff09\u3002 \u4ece 0.8.x \u5230 2.6.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.7.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.6 \u3001 2.5 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.6 \u3001 2.5 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.7 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.7 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 2.7.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 2.7.0 \u7248\u672c\u5305\u542b KIP-595 \u4e2d\u6307\u5b9a\u7684\u6838\u5fc3 Raft \u5b9e\u73b0\u3002\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u201craft\u201d\u6a21\u5757\u5305\u542b\u5927\u90e8\u5206\u903b\u8f91\u3002\u5728\u4e0e\u63a7\u5236\u5668\u7684\u96c6\u6210\u5b8c\u6210\u4e4b\u524d\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u72ec\u7acb\u7684\u670d\u52a1\u5668\u6765\u6d4b\u8bd5 Raft \u5b9e\u73b0\u7684\u6027\u80fd\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 raft \u6a21\u5757\u4e2d\u7684 README.md KIP-651\u6dfb\u52a0\u4e86 \u5bf9\u4f7f\u7528 PEM \u6587\u4ef6\u8fdb\u884c\u5bc6\u94a5\u548c\u4fe1\u4efb\u5b58\u50a8\u7684 \u652f\u6301\u3002 KIP-612\u6dfb\u52a0\u4e86 \u5bf9\u5f3a\u5236\u4ee3\u7406\u8303\u56f4\u548c\u6bcf\u4e2a\u4fa6\u542c\u5668\u8fde\u63a5\u521b\u5efa\u901f\u7387\u7684 \u652f\u6301\u3002 2.7.0 \u7248\u672c\u5305\u542b KIP-612 \u7684\u7b2c\u4e00\u90e8\u5206\uff0c\u52a8\u6001\u914d\u7f6e\u5c06\u5728 2.8.0 \u7248\u672c\u4e2d\u51fa\u73b0\u3002 \u80fd\u591f\u9650\u5236\u4e3b\u9898\u548c\u5206\u533a\u521b\u5efa\u6216\u4e3b\u9898\u5220\u9664\uff0c\u4ee5\u9632\u6b62\u96c6\u7fa4\u56e0 KIP-599\u53d7\u5230\u635f\u5bb3 \u5f53 Kafka \u63a8\u51fa\u65b0\u529f\u80fd\u65f6\uff0c\u5b58\u5728\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\uff1a Kafka \u5ba2\u6237\u7aef\u5982\u4f55\u4e86\u89e3\u4ee3\u7406\u529f\u80fd\uff1f \u7ecf\u7eaa\u5546\u5982\u4f55\u51b3\u5b9a\u542f\u7528\u54ea\u4e9b\u529f\u80fd\uff1f KIP-584 \u63d0\u4f9b\u4e86\u7075\u6d3b\u4e14\u6613\u4e8e\u64cd\u4f5c\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ea\u9700\u4e00\u6b21\u91cd\u542f\u5373\u53ef\u5b9e\u73b0\u5ba2\u6237\u7aef\u53d1\u73b0\u3001\u529f\u80fd\u95e8\u63a7\u548c\u6eda\u52a8\u5347\u7ea7\u3002 * ConsoleConsumer \u73b0\u5728\u53ef\u4ee5\u901a\u8fc7 KIP-431 \u6253\u5370\u8bb0\u5f55\u504f\u79fb\u91cf\u548c\u6807\u9898 * KIP-554 \u7684\u6dfb\u52a0 \u7ee7\u7eed\u671d\u7740\u4ece Kafka \u4e2d\u5220\u9664 Zookeeper \u7684\u76ee\u6807\u8fc8\u8fdb\u3002\u6dfb\u52a0 KIP-554 \u610f\u5473\u7740\u60a8\u4e0d\u5fc5\u518d\u76f4\u63a5\u8fde\u63a5\u5230 ZooKeeper \u6765\u7ba1\u7406 SCRAM \u51ed\u8bc1\u3002 * \u66f4\u6539\u73b0\u6709\u4fa6\u542c\u5668\u7684\u4e0d\u53ef\u91cd\u65b0\u914d\u7f6e\u7684\u914d\u7f6e\u4f1a\u5bfc\u81f4 InvalidRequestException . \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u4e4b\u524d\u7684\uff08\u610f\u5916\u7684\uff09\u884c\u4e3a\u4f1a\u5bfc\u81f4\u66f4\u65b0\u7684\u914d\u7f6e\u88ab\u4fdd\u7559\uff0c\u4f46\u76f4\u5230\u4ee3\u7406\u91cd\u65b0\u542f\u52a8\u540e\u624d\u4f1a\u751f\u6548\u3002\u6709\u5173\u66f4\u591a\u8ba8\u8bba\uff0c\u8bf7\u53c2\u9605 KAFKA-10479 \u3002 \u8bf7\u53c2\u9605 DynamicBrokerConfig.DynamicSecurityConfigs \u548c SocketServer.ListenerReconfigurableConfigs \u4e86\u89e3\u73b0\u6709\u4fa6\u542c\u5668\u652f\u6301\u7684\u53ef\u91cd\u65b0\u914d\u7f6e\u914d\u7f6e\u3002 * Kafka Streams \u5728 KStreams DSL \u4e2d \u6dfb\u52a0\u4e86\u5bf9 \u6ed1\u52a8 Windows \u805a\u5408\u7684\u652f\u6301\u3002 * \u72b6\u6001\u5b58\u50a8\u4e0a\u7684\u53cd\u5411\u8fed\u4ee3\u53ef\u4f7f\u7528KIP-617 \u5b9e\u73b0\u66f4\u9ad8\u6548\u7684\u6700\u65b0\u66f4\u65b0\u641c\u7d22 * Kafka Steams \u4e2d\u7684\u7aef\u5230\u7aef\u5ef6\u8fdf\u6307\u6807\u8bf7\u53c2\u9605 KIP-613 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f * Kafka Streams \u6dfb\u52a0\u4e86\u4f7f\u7528KIP-607 \u62a5\u544a\u9ed8\u8ba4 RocksDB \u5c5e\u6027\u7684\u6307\u6807 * KIP-616 \u63d0\u4f9b\u66f4\u597d\u7684 Scala \u9690\u5f0f Serdes \u652f\u6301 \u4ece 0.8.x \u5230 2.5.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.6.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.5 \u3001 2.4 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.5 \u3001 2.4 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.6 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.6 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 2.6.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 Kafka Streams \u6dfb\u52a0\u4e86\u4e00\u79cd\u65b0\u7684\u5904\u7406\u6a21\u5f0f\uff08\u9700\u8981\u4ee3\u7406 2.5 \u6216\u66f4\u9ad8\u7248\u672c\uff09\uff0c\u8be5\u6a21\u5f0f\u4f7f\u7528\u4e00\u6b21\u6027\u4fdd\u8bc1\u63d0\u9ad8\u5e94\u7528\u7a0b\u5e8f\u53ef\u6269\u5c55\u6027\uff08\u53c2\u89c1 KIP-447 \uff09 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u9ed8\u8ba4\u542f\u7528 TLSv1.3\u3002\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u5c06\u534f\u5546 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-573 \u3002 \u914d\u7f6e\u7684\u9ed8\u8ba4\u503c client.dns.lookup \u5df2\u4ece \u66f4\u6539 default \u4e3a use_all_dns_ips \u3002\u5982\u679c\u4e3b\u673a\u540d\u89e3\u6790\u4e3a\u591a\u4e2a IP \u5730\u5740\uff0c\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u73b0\u5728\u5c06\u5c1d\u8bd5\u6309\u987a\u5e8f\u8fde\u63a5\u5230\u6bcf\u4e2a IP\uff0c\u76f4\u5230\u6210\u529f\u5efa\u7acb\u8fde\u63a5\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-602 \u3002 NotLeaderForPartitionException \u5df2\u88ab\u5f03\u7528\u5e76\u66ff\u6362\u4e3a NotLeaderOrFollowerException . \u5982\u679c\u4ee3\u7406\u4e0d\u662f\u526f\u672c\uff0c\u5219\u4ec5\u9488\u5bf9\u9886\u5bfc\u8005\u6216\u8ffd\u968f\u8005\u7684\u83b7\u53d6\u8bf7\u6c42\u548c\u5176\u4ed6\u8bf7\u6c42\u5c06\u8fd4\u56de NOT_LEADER_OR_FOLLOWER(6) \u800c\u4e0d\u662f REPLICA_NOT_AVAILABLE(9)\uff0c\u786e\u4fdd\u6240\u6709\u5ba2\u6237\u7aef\u5c06\u91cd\u65b0\u5206\u914d\u671f\u95f4\u7684\u77ed\u6682\u9519\u8bef\u4f5c\u4e3a\u53ef\u91cd\u8bd5\u5f02\u5e38\u8fdb\u884c\u5904\u7406\u3002 \u4ece 0.8.x \u5230 2.4.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.5.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.4 \u3001 2.3 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.4 \u3001 2.3 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.5 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.5 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 6. KIP-455 kafka-reassign-partitions.sh \u5b8c\u6210\u540e\uff0c \u91cd\u65b0\u5206\u914d\u5de5\u5177\u53d1\u751f\u4e86\u4e00\u4e9b\u663e\u7740\u7684\u53d8\u5316\u3002\u8be5\u5de5\u5177\u73b0\u5728\u8981\u6c42\u5728\u66f4\u6539\u4e3b\u52a8\u91cd\u65b0\u5206\u914d\u7684\u9650\u5236\u65f6\u63d0\u4f9b\u6807\u5fd7\u3002\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u8be5 \u547d\u4ee4\u53d6\u6d88\u91cd\u65b0\u5206\u914d\u3002\u6700\u540e\uff0c\u91cd\u65b0\u5206\u914d \u5df2\u88ab\u5f03\u7528\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP\u3002 --additional``--cancel``--zookeeper``--bootstrap-server 2.5.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u5f53 RebalanceProtocol#COOPERATIVE \u4f7f\u7528\u65f6\uff0c Consumer#poll \u5f53\u5b83\u5904\u4e8e\u6d88\u8d39\u8005\u4ecd\u7136\u62e5\u6709\u7684\u90a3\u4e9b\u5206\u533a\u7684\u91cd\u65b0\u5e73\u8861\u8fc7\u7a0b\u4e2d\u65f6\uff0c\u4ecd\u7136\u53ef\u4ee5\u8fd4\u56de\u6570\u636e\uff1b\u6b64\u5916 Consumer#commitSync \uff0c\u73b0\u5728\u53ef\u80fd\u4f1a\u629b\u51fa\u4e00\u4e2a\u975e\u81f4\u547d RebalanceInProgressException \u4e8b\u4ef6\u6765\u901a\u77e5\u7528\u6237\u6b64\u7c7b\u4e8b\u4ef6\uff0c\u4ee5\u4fbf\u4e0e\u81f4\u547d\u4e8b\u4ef6\u533a\u5206\u5f00\u6765 CommitFailedException \u5e76\u5141\u8bb8\u7528\u6237\u5b8c\u6210\u6b63\u5728\u8fdb\u884c\u7684\u91cd\u65b0\u5e73\u8861\uff0c\u7136\u540e\u91cd\u65b0\u5c1d\u8bd5\u4e3a\u90a3\u4e9b\u4ecd\u7136\u62e5\u6709\u7684\u5206\u533a\u63d0\u4ea4\u504f\u79fb\u91cf\u3002 \u4e3a\u4e86\u63d0\u9ad8\u5178\u578b\u7f51\u7edc\u73af\u5883\u4e2d\u7684\u5f39\u6027\uff0c\u9ed8\u8ba4\u503c zookeeper.session.timeout.ms \u5df2\u4ece 6 \u79d2\u589e\u52a0\u5230 18 \u79d2\uff0c replica.lag.time.max.ms \u4ece 10 \u79d2\u589e\u52a0\u5230 30 \u79d2\u3002 cogroup() \u6dfb\u52a0\u4e86\u65b0\u7684 DSL \u8fd0\u7b97\u7b26\uff0c\u7528\u4e8e\u4e00\u6b21\u5c06\u591a\u4e2a\u6d41\u805a\u5408\u5728\u4e00\u8d77\u3002 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684 KStream.toTable() API\uff0c\u7528\u4e8e\u5c06\u8f93\u5165\u4e8b\u4ef6\u6d41\u8f6c\u6362\u4e3a KTable\u3002 \u6dfb\u52a0\u4e86\u65b0\u7684 Serde \u7c7b\u578b Void \u6765\u8868\u793a\u8f93\u5165\u4e3b\u9898\u4e2d\u7684\u7a7a\u952e\u6216\u7a7a\u503c\u3002 \u5df2\u5f03\u7528 UsePreviousTimeOnInvalidTimestamp \u5e76\u66ff\u6362\u4e3a UsePartitionTimeOnInvalidTimeStamp . \u901a\u8fc7\u6dfb\u52a0\u6302\u8d77\u7684\u504f\u79fb\u9632\u62a4\u673a\u5236\u548c\u66f4\u5f3a\u7684\u4e8b\u52a1\u63d0\u4ea4\u4e00\u81f4\u6027\u68c0\u67e5\u6765\u6539\u8fdb\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\uff0c\u8fd9\u6781\u5927\u5730\u7b80\u5316\u4e86\u53ef\u6269\u5c55\u7684\u7cbe\u786e\u4e00\u6b21\u5e94\u7528\u7a0b\u5e8f\u7684\u5b9e\u73b0\u3002 \u6211\u4eec\u8fd8\u5728\u793a\u4f8b \u6587\u4ef6\u5939\u4e0b\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u4e00\u6b21\u6027\u8bed\u4e49\u4ee3\u7801\u793a\u4f8b \u3002\u67e5\u770b KIP-447 \u4e86\u89e3\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f\u3002 \u6dfb\u52a0\u4e86\u65b0\u7684\u516c\u5171 api KafkaStreams.queryMetadataForKey(String, K, Serializer) to get detailed information on the key being queried. It provides information about the partition number where the key resides in addition to hosts containing the active and standby partitions for the key. \u901a\u8fc7\u5f03\u7528\u5e76\u5c06 KafkaStreams.store(String, QueryableStoreType) \u5176\u66ff\u6362\u4e3a KafkaStreams.store(StoreQueryParameters) . \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u516c\u5171 api\uff0c\u7528\u4e8e\u8bbf\u95ee\u5b9e\u4f8b\u672c\u5730\u5b58\u50a8\u7684\u6ede\u540e\u4fe1\u606f KafkaStreams.allLocalStorePartitionLags() \u3002 \u4e0d\u518d\u652f\u6301 Scala 2.11\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605 KIP-531 \u3002 \u5305\u4e2d\u7684\u6240\u6709 Scala \u7c7b kafka.security.auth \u5747\u5df2\u5f03\u7528\u3002 \u6709\u5173 2.4.0 \u4e2d\u6dfb\u52a0\u7684\u65b0 Java \u6388\u6743\u8005 API \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-504 \u3002 \u8bf7\u6ce8\u610f\uff0c kafka.security.auth.Authorizer \u548c kafka.security.auth.SimpleAclAuthorizer \u5728 2.4.0 \u4e2d\u5df2\u5f03\u7528\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cTLSv1 \u548c TLSv1.1 \u5df2\u88ab\u7981\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u5b58\u5728\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\u3002\u73b0\u5728\u9ed8\u8ba4\u4ec5\u542f\u7528 TLSv1.2\u3002 ssl.protocol \u60a8\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u9009\u9879\u548c \u4e2d\u663e\u5f0f\u542f\u7528 TLSv1 \u548c TLSv1.1 \u6765\u7ee7\u7eed\u4f7f\u7528\u5b83\u4eec ssl.enabled.protocols \u3002 ZooKeeper \u5df2\u5347\u7ea7\u5230 3.5.7\uff0c\u5982\u679c 3.4 \u6570\u636e\u76ee\u5f55\u4e2d\u6ca1\u6709\u5feb\u7167\u6587\u4ef6\uff0cZooKeeper \u4ece 3.4.X \u5347\u7ea7\u5230 3.5.7 \u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u8fd9\u901a\u5e38\u53d1\u751f\u5728\u6d4b\u8bd5\u5347\u7ea7\u4e2d\uff0c\u5176\u4e2d ZooKeeper 3.5.7 \u5c1d\u8bd5\u52a0\u8f7d\u5c1a\u672a\u521b\u5efa\u5feb\u7167\u6587\u4ef6\u7684\u73b0\u6709 3.4 \u6570\u636e\u76ee\u5f55\u3002\u6709\u5173\u8be5\u95ee\u9898\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZOOKEEPER-3056 \u3002 ZOOKEEPER-3056 \u4e2d\u7ed9\u51fa\u4e86\u4fee\u590d\uff0c\u5373\u5728\u5347\u7ea7\u4e4b\u524d \u8bbe\u7f6e snapshot.trust.empty=true \u914d\u7f6e\u3002 zookeeper.properties ZooKeeper \u7248\u672c 3.5.7 \u652f\u6301\u4f7f\u7528\u6216\u4e0d\u4f7f\u7528\u5ba2\u6237\u7aef\u8bc1\u4e66\u4e0e ZooKeeper \u8fdb\u884c TLS \u52a0\u5bc6\u8fde\u63a5\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6 Kafka \u914d\u7f6e\u6765\u5229\u7528\u6b64\u529f\u80fd\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605 KIP-515 \u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\uff0c\u6216\u80052.2.x \u6216 2.3.x \u81f3 2.4.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.10.0\u30010.11.0\u30011.0\u30012.0\u30012.2\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\u30012.1\u30012.2\u30012.3\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.4 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.4 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a ZooKeeper\u5df2\u5347\u7ea7\u81f33.5.6\u3002\u5982\u679c 3.4 \u6570\u636e\u76ee\u5f55\u4e2d\u6ca1\u6709\u5feb\u7167\u6587\u4ef6\uff0cZooKeeper \u4ece 3.4.X \u5347\u7ea7\u5230 3.5.6 \u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u8fd9\u901a\u5e38\u53d1\u751f\u5728\u6d4b\u8bd5\u5347\u7ea7\u4e2d\uff0c\u5176\u4e2d ZooKeeper 3.5.6 \u5c1d\u8bd5\u52a0\u8f7d\u5c1a\u672a\u521b\u5efa\u5feb\u7167\u6587\u4ef6\u7684\u73b0\u6709 3.4 \u6570\u636e\u76ee\u5f55\u3002\u6709\u5173\u8be5\u95ee\u9898\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZOOKEEPER-3056 \u3002 ZOOKEEPER-3056 \u4e2d\u7ed9\u51fa\u4e86\u4fee\u590d\uff0c\u5373\u5728\u5347\u7ea7\u4e4b\u524d\u8bbe\u7f6e snapshot.trust.empty=true \u914d\u7f6e\u3002 zookeeper.properties \u4f46\u6211\u4eec\u89c2\u5bdf\u5230\u4f7f\u7528 snapshot.trust.empty=true config.js \u8fdb\u884c\u72ec\u7acb\u96c6\u7fa4\u5347\u7ea7\u65f6\u4f1a\u51fa\u73b0\u6570\u636e\u4e22\u5931\u7684\u60c5\u51b5\u3002\u6709\u5173\u8be5\u95ee\u9898\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZOOKEEPER-3644 \u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u590d\u5236\u7a7a\u5feb\u7167 \u7684\u5b89\u5168\u89e3\u51b3\u65b9\u6cd5 \u5982\u679c3.4\u6570\u636e\u76ee\u5f55\u4e2d\u6ca1\u6709\u5feb\u7167\u6587\u4ef6\uff0c\u5219\u5c06\u6587\u4ef6\u590d\u5236\u52303.4\u6570\u636e\u76ee\u5f55\u4e2d\u3002\u6709\u5173\u89e3\u51b3\u65b9\u6cd5\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZooKeeper \u5347\u7ea7\u5e38\u89c1\u95ee\u9898\u89e3\u7b54 \u3002 ZooKeeper 3.5 \u4e2d\u6dfb\u52a0\u4e86 \u57fa\u4e8e\u5d4c\u5165\u5f0f Jetty \u7684 AdminServer \u3002 zookeeper.properties AdminServer \u5728 ZooKeeper \u4e2d\u9ed8\u8ba4\u542f\u7528\uff0c\u5e76\u5728\u7aef\u53e3 8080 \u4e0a\u542f\u52a8\u3002AdminServer \u5728Apache Kafka \u53d1\u884c\u7248\u63d0\u4f9b\u7684ZooKeeper \u914d\u7f6e ( ) \u4e2d\u9ed8\u8ba4\u7981\u7528\u3002\u5982\u679c\u60a8\u60f3\u7981\u7528\u7ba1\u7406\u670d\u52a1\u5668\uff0c\u8bf7\u786e\u4fdd\u66f4\u65b0\u60a8\u7684\u672c\u5730 zookeeper.properties \u6587\u4ef6\u3002 admin.enableServer=false \u8bf7\u53c2\u8003 AdminServer \u914d\u7f6e \u6765\u914d\u7f6e AdminServer\u3002 2.4.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6dfb\u52a0\u4e86\u65b0\u7684\u7ba1\u7406 API\uff0c\u7528\u4e8e\u5206\u533a\u91cd\u65b0\u5206\u914d\u3002\u7531\u4e8e\u6539\u53d8\u4e86 Kafka \u4f20\u64ad\u91cd\u65b0\u5206\u914d\u4fe1\u606f\u7684\u65b9\u5f0f\uff0c\u56e0\u6b64\u5728\u5347\u7ea7\u5230\u65b0\u7248\u672c\u65f6\uff0c\u5728\u6545\u969c\u8fb9\u7f18\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u4e22\u5931\u91cd\u65b0\u5206\u914d\u72b6\u6001\u3002\u4e0d\u5efa\u8bae\u5728\u5347\u7ea7\u65f6\u5f00\u59cb\u91cd\u65b0\u5206\u914d\u3002 ZooKeeper\u5df2\u4ece3.4.14\u5347\u7ea7\u52303.5.6\u3002\u65b0\u7248\u672c\u652f\u6301TLS\u548c\u52a8\u6001\u91cd\u65b0\u914d\u7f6e\u3002 \u547d\u4ee4 bin/kafka-preferred-replica-election.sh \u884c\u5de5\u5177\u5df2\u88ab\u5f03\u7528\u3002\u5b83\u5df2\u88ab\u66ff\u6362\u4e3a bin/kafka-leader-election.sh . electPreferredLeaders Java \u7c7b\u4e2d\u7684\u65b9\u6cd5 AdminClient \u5df2\u88ab\u5f03\u7528\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u65b9\u6cd5 electLeaders \u3002 \u5229\u7528\u5e26\u6709\u6587\u5b57\u503c\u7684\u6784\u9020\u51fd\u6570\u7684 Scala \u4ee3\u7801 NewTopic(String, int, short) \u9700\u8981\u663e\u5f0f\u8c03\u7528 toShort \u7b2c\u4e8c\u4e2a\u6587\u5b57\u3002 \u6784\u9020\u51fd\u6570\u4e2d\u7684\u53c2\u6570 GroupAuthorizationException(String) \u73b0\u5728\u7528\u4e8e\u6307\u5b9a\u5f02\u5e38\u6d88\u606f\u3002\u4ee5\u524d\u5b83\u6307\u7684\u662f\u6388\u6743\u5931\u8d25\u7684\u7ec4\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u4e0e\u5176\u4ed6\u5f02\u5e38\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u5e76\u907f\u514d\u6f5c\u5728\u7684\u8bef\u7528\u3002 TopicAuthorizationException(String) \u4e4b\u524d\u7528\u4e8e\u5355\u4e2a\u672a\u6388\u6743\u4e3b\u9898\u7684 \u6784\u9020\u51fd\u6570\u4e5f\u8fdb\u884c\u4e86\u7c7b\u4f3c\u7684\u66f4\u6539\u3002 \u5185\u90e8 PartitionAssignor \u63a5\u53e3\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u66ff\u6362\u4e3a\u65b0\u7684 ConsumerPartitionAssignor \u516c\u5171 API\u3002\u4e24\u4e2a\u63a5\u53e3\u4e4b\u95f4\u7684\u67d0\u4e9b\u65b9\u6cd5/\u7b7e\u540d\u7565\u6709\u4e0d\u540c\u3002\u5b9e\u73b0\u81ea\u5b9a\u4e49 PartitionAssignor \u7684\u7528\u6237\u5e94\u5c3d\u5feb\u8fc1\u79fb\u5230\u65b0\u754c\u9762\u3002 \u73b0\u5728 DefaultPartitioner \u4f7f\u7528\u7c98\u6027\u5206\u533a\u7b56\u7565\u3002\u8fd9\u610f\u5473\u7740\u5177\u6709\u7a7a\u952e\u4e14\u672a\u5206\u914d\u5206\u533a\u7684\u7279\u5b9a\u4e3b\u9898\u7684\u8bb0\u5f55\u5c06\u88ab\u53d1\u9001\u5230\u540c\u4e00\u5206\u533a\uff0c\u76f4\u5230\u51c6\u5907\u597d\u53d1\u9001\u6279\u6b21\u4e3a\u6b62\u3002\u521b\u5efa\u65b0\u6279\u6b21\u65f6\uff0c\u4f1a\u9009\u62e9\u4e00\u4e2a\u65b0\u5206\u533a\u3002\u8fd9\u51cf\u5c11\u4e86\u751f\u6210\u5ef6\u8fdf\uff0c\u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8fb9\u7f18\u60c5\u51b5\u4e0b\u8bb0\u5f55\u5728\u5206\u533a\u4e4b\u95f4\u5206\u5e03\u4e0d\u5747\u5300\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u7528\u6237\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\uff0c\u4f46\u5728\u6d4b\u8bd5\u548c\u5176\u4ed6\u5728\u5f88\u77ed\u7684\u65f6\u95f4\u5185\u751f\u6210\u8bb0\u5f55\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u79cd\u5dee\u5f02\u53ef\u80fd\u4f1a\u5f88\u660e\u663e\u3002 \u963b\u585e KafkaConsumer#committed \u65b9\u6cd5\u5df2\u6269\u5c55\u4e3a\u5141\u8bb8\u5206\u533a\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5206\u533a\u3002\u5b83\u53ef\u4ee5\u51cf\u5c11\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u4e4b\u95f4\u4e3a\u6d88\u8d39\u8005\u7ec4\u83b7\u53d6\u5df2\u63d0\u4ea4\u504f\u79fb\u91cf\u7684\u8bf7\u6c42/\u54cd\u5e94\u8fed\u4ee3\u3002\u65e7\u7684\u91cd\u8f7d\u51fd\u6570\u5df2\u88ab\u5f03\u7528\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u66f4\u6539\u4ee3\u7801\u4ee5\u5229\u7528\u65b0\u65b9\u6cd5\uff08\u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728 KIP-520 \u4e2d\u627e\u5230\uff09\u3002 \u6211\u4eec INVALID_RECORD \u5728\u751f\u6210\u54cd\u5e94\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u9519\u8bef\u4ee5\u4e0e\u8be5 CORRUPT_MESSAGE \u9519\u8bef\u533a\u5206\u5f00\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u4ee5\u524d\u5f53\u4e00\u6279\u8bb0\u5f55\u4f5c\u4e3a\u5355\u4e2a\u8bf7\u6c42\u7684\u4e00\u90e8\u5206\u53d1\u9001\u5230\u4ee3\u7406\u65f6\uff0c\u7531\u4e8e\u5404\u79cd\u539f\u56e0\uff08\u9b54\u672f\u5b57\u8282\u4e0d\u5339\u914d\u3001crc \u6821\u9a8c\u548c\u9519\u8bef\u3001\u538b\u7f29\u65e5\u5fd7\u7684\u7a7a\u952e\uff09\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\u8bb0\u5f55\u672a\u80fd\u901a\u8fc7\u9a8c\u8bc1\u4e3b\u9898\u7b49\uff09\uff0c\u6574\u4e2a\u6279\u6b21\u5c06\u88ab\u62d2\u7edd\uff0c\u5e76\u4e14\u5177\u6709\u76f8\u540c\u548c\u8bef\u5bfc\u6027 CORRUPT_MESSAGE \uff0c\u5e76\u4e14\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u7684\u8c03\u7528\u8005\u5c06\u4ece RecordMetadata \u8c03\u7528\u8fd4\u56de\u7684\u672a\u6765\u5bf9\u8c61 send \u4ee5\u53ca\u5728 Callback#onCompletion(RecordMetadata metadata, Exception exception) \u73b0\u5728\uff0c\u6709\u4e86\u65b0\u7684\u9519\u8bef\u4ee3\u7801\u548c\u6539\u8fdb\u7684\u5f02\u5e38\u9519\u8bef\u6d88\u606f\uff0c\u751f\u4ea7\u8005\u8c03\u7528\u8005\u53ef\u4ee5\u66f4\u597d\u5730\u4e86\u89e3\u5176\u53d1\u9001\u8bb0\u5f55\u5931\u8d25\u7684\u6839\u672c\u539f\u56e0\u3002 \u6211\u4eec\u6b63\u5728\u5411\u5ba2\u6237\u7aef\u7ec4\u534f\u8bae\u5f15\u5165\u589e\u91cf\u5408\u4f5c\u91cd\u65b0\u5e73\u8861\uff0c\u8be5\u534f\u8bae\u5141\u8bb8\u6d88\u8d39\u8005\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u4fdd\u7559\u6240\u6709\u5206\u914d\u7684\u5206\u533a\uff0c\u5e76\u5728\u6700\u540e\u4ec5\u64a4\u9500\u90a3\u4e9b\u5fc5\u987b\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u6d88\u8d39\u8005\u4ee5\u5b9e\u73b0\u6574\u4f53\u96c6\u7fa4\u5e73\u8861\u7684\u5206\u533a\u3002\u4ed6\u4eec\u5c06\u9009\u62e9 \u6240\u6709\u6d88\u8d39\u8005\u652f\u6301\u7684\u5206\u914d\u8005\u666e\u904d\u652f\u6301\u7684 ConsumerCoordinator \u6700\u65b0\u7248\u672c\u3002 RebalanceProtocol \u60a8\u53ef\u4ee5\u4f7f\u7528\u65b0\u7684\u5185\u7f6e CooperativeStickyAssignor \u6216\u63d2\u5165\u60a8\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u534f\u4f5c\u5206\u914d\u5668\u3002\u4e3a\u6b64\uff0c\u60a8\u5fc5\u987b\u5b9e\u73b0\u8be5 ConsumerPartitionAssignor \u63a5\u53e3\u5e76\u5305\u542b RebalanceProtocol.COOPERATIVE \u5728 . \u8fd4\u56de\u7684\u5217\u8868\u4e2d ConsumerPartitionAssignor#supportedProtocols \u3002\u7136\u540e\uff0c\u60a8\u7684\u81ea\u5b9a\u4e49\u5206\u914d\u8005\u53ef\u4ee5\u5229\u7528 ownedPartitions \u6bcf\u4e2a\u6d88\u8d39\u8005\u7684\u5b57\u6bb5 Subscription \u5c3d\u53ef\u80fd\u5c06\u5206\u533a\u5f52\u8fd8\u7ed9\u4ee5\u524d\u7684\u6240\u6709\u8005\u3002\u8bf7\u6ce8\u610f\uff0c\u5f53\u8981\u5c06\u5206\u533a\u91cd\u65b0\u5206\u914d\u7ed9\u53e6\u4e00\u4e2a\u4f7f\u7528\u8005\u65f6\uff0c \u5fc5\u987b \u5c06\u5176\u4ece\u65b0\u5206\u914d\u4e2d\u5220\u9664\uff0c\u76f4\u5230\u5b83\u4ece\u5176\u539f\u59cb\u6240\u6709\u8005\u624b\u4e2d\u64a4\u9500\u3002\u4efb\u4f55\u5fc5\u987b\u64a4\u9500\u5206\u533a\u7684\u6d88\u8d39\u8005\u90fd\u5c06\u89e6\u53d1\u540e\u7eed\u91cd\u65b0\u5e73\u8861\uff0c\u4ee5\u5141\u8bb8\u64a4\u9500\u7684\u5206\u533a\u5b89\u5168\u5730\u5206\u914d\u7ed9\u5176\u65b0\u6240\u6709\u8005\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 ConsumerPartitionAssignor RebalanceProtocol javadocs \u3002 \u8981\u4ece\u65e7\u7684\uff08\u6025\u5207\u7684\uff09\u534f\u8bae\uff08\u5728\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u603b\u662f\u64a4\u9500\u6240\u6709\u5206\u533a\uff09\u5347\u7ea7\u5230\u534f\u4f5c\u91cd\u65b0\u5e73\u8861\uff0c\u60a8\u5fc5\u987b\u9075\u5faa\u7279\u5b9a\u7684\u5347\u7ea7\u8def\u5f84\u4ee5\u4f7f\u6240\u6709\u5ba2\u6237\u7aef\u90fd\u5904\u4e8e\u540c\u4e00\u72b6\u6001 ConsumerPartitionAssignor \u652f\u6301\u5408\u4f5c\u534f\u8bae\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4e24\u6b21\u6eda\u52a8\u5f39\u8df3\u6765\u5b8c\u6210\uff0c\u4f8b\u5982 CooperativeStickyAssignor \uff1a\u5728\u7b2c\u4e00\u6b21\u5f39\u8df3\u671f\u95f4\uff0c\u5c06\u201c\u5408\u4f5c\u7c98\u6027\u201d\u6dfb\u52a0\u5230\u6bcf\u4e2a\u6210\u5458\u652f\u6301\u7684\u5206\u914d\u5668\u5217\u8868\u4e2d\uff08\u4e0d\u5220\u9664\u5148\u524d\u7684\u5206\u914d\u5668 - \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u4e4b\u524d\u4f7f\u7528\u9ed8\u8ba4\u5206\u914d\u5668\uff09 \uff0c\u60a8\u4e5f\u5fc5\u987b\u660e\u786e\u5305\u542b\u8be5\u5185\u5bb9\uff09\u3002\u7136\u540e\u60a8\u53ef\u4ee5\u9000\u56de\u548c/\u6216\u5347\u7ea7\u5b83\u3002\u4e00\u65e6\u6574\u4e2a\u7ec4\u5904\u4e8e 2.4+ \u5e76\u4e14\u6240\u6709\u6210\u5458\u5728\u5176\u652f\u6301\u7684\u5206\u914d\u8005\u4e4b\u95f4\u90fd\u5177\u6709\u201c\u5408\u4f5c\u7c98\u6027\u201d\uff0c\u8bf7\u5220\u9664\u5176\u4ed6\u5206\u914d\u8005\u5e76\u6267\u884c\u7b2c\u4e8c\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u4ee5\u4fbf\u6700\u7ec8\u6240\u6709\u6210\u5458\u4ec5\u652f\u6301\u5408\u4f5c\u534f\u8bae\u3002\u6709\u5173\u534f\u4f5c\u518d\u5e73\u8861\u534f\u8bae\u548c\u5347\u7ea7\u8def\u5f84\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-429 \u3002 ConsumerRebalanceListener \u4ee5\u53ca\u65b0\u7684 API\u8fdb\u884c\u4e86\u4e00\u4e9b\u884c\u4e3a\u66f4\u6539\u3002\u5728\u4fa6\u542c\u5668\u7684\u4e09\u4e2a\u56de\u8c03\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u671f\u95f4\u629b\u51fa\u7684\u5f02\u5e38\u5c06\u4e0d\u518d\u88ab\u541e\u6389\uff0c\u800c\u662f\u4f1a\u4e00\u76f4\u91cd\u65b0\u629b\u51fa\u76f4\u5230\u8c03\u7528\u4e3a\u6b62 Consumer.poll() \u3002 onPartitionsLost \u6dfb\u52a0\u8be5\u65b9\u6cd5\u662f\u4e3a\u4e86\u5141\u8bb8\u7528\u6237\u5bf9\u6d88\u8d39\u8005\u53ef\u80fd\u5931\u53bb\u5176\u5206\u533a\u6240\u6709\u6743\uff08\u4f8b\u5982\u9519\u8fc7\u91cd\u65b0\u5e73\u8861\uff09\u5e76\u4e14\u65e0\u6cd5\u63d0\u4ea4\u504f\u79fb\u91cf\u7684\u5f02\u5e38\u60c5\u51b5\u505a\u51fa\u53cd\u5e94\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5c06\u7b80\u5355\u5730\u8c03\u7528\u73b0\u6709 onPartitionsRevoked API \u6765\u4e0e\u4e4b\u524d\u7684\u884c\u4e3a\u4fdd\u6301\u4e00\u81f4\u3002\u4f46\u8bf7\u6ce8\u610f\uff0c onPartitionsLost \u5f53\u4e22\u5931\u7684\u5206\u533a\u96c6\u4e3a\u7a7a\u65f6\uff0c\u4e0d\u4f1a\u8c03\u7528\u8be5\u65b9\u6cd5\u3002\u8fd9\u610f\u5473\u7740\u5728\u65b0\u6d88\u8d39\u8005\u52a0\u5165\u7ec4\u7684\u7b2c\u4e00\u6b21\u91cd\u65b0\u5e73\u8861\u5f00\u59cb\u65f6\u4e0d\u4f1a\u8c03\u7528\u56de\u8c03\u3002 \u7684\u8bed\u4e49 ConsumerRebalanceListener's \u5f53\u9075\u5faa\u4e0a\u8ff0\u5408\u4f5c\u518d\u5e73\u8861\u534f\u8bae\u65f6\uff0c\u56de\u8c03\u4f1a\u8fdb\u4e00\u6b65\u6539\u53d8\u3002\u6b64\u5916 onPartitionsLost \uff0c onPartitionsRevoked \u5f53\u64a4\u9500\u5206\u533a\u96c6\u4e3a\u7a7a\u65f6\uff0c\u4e5f\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u8c03\u7528\u3002\u8be5\u56de\u8c03\u901a\u5e38\u4ec5\u5728\u91cd\u65b0\u5e73\u8861\u7ed3\u675f\u65f6\u8c03\u7528\uff0c\u5e76\u4e14\u4ec5\u5728\u6b63\u5728\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u4f7f\u7528\u8005\u7684\u5206\u533a\u96c6\u4e0a\u8c03\u7528\u3002\u7136\u800c\uff0c\u5373\u4f7f\u5206\u533a\u96c6\u4e3a\u7a7a\uff0c\u56de\u8c03 onPartitionsAssigned \u4e5f\u5c06\u59cb\u7ec8\u88ab\u8c03\u7528\uff0c\u4f5c\u4e3a\u901a\u77e5\u7528\u6237\u91cd\u65b0\u5e73\u8861\u4e8b\u4ef6\u7684\u4e00\u79cd\u65b9\u5f0f\uff08\u5bf9\u4e8e\u5408\u4f5c\u578b\u548c\u6e34\u671b\u578b\u90fd\u662f\u5982\u6b64\uff09\u3002\u6709\u5173\u65b0\u56de\u8c03\u8bed\u4e49\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ConsumerRebalanceListener javadocs \u3002 Scala \u7279\u5f81 kafka.security.auth.Authorizer \u5df2\u88ab\u5f03\u7528\u5e76\u88ab\u65b0\u7684 Java API \u53d6\u4ee3 org.apache.kafka.server.authorizer.Authorizer \u3002\u6388\u6743\u8005\u5b9e\u73b0\u7c7b kafka.security.auth.SimpleAclAuthorizer \u4e5f\u5df2\u88ab\u5f03\u7528\u5e76\u88ab\u65b0\u7684\u5b9e\u73b0\u6240\u53d6\u4ee3 kafka.security.authorizer.AclAuthorizer \u3002 AclAuthorizer \u4f7f\u7528\u65b0 API \u652f\u6301\u7684\u529f\u80fd\u6765\u6539\u8fdb\u6388\u6743\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5e76\u4e0e SimpleAclAuthorizer . \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-504 \u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\uff0c\u6216\u80052.2.x \u81f3 2.3.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\uff0c\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\u30012.1\u30012.2\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.3 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.3 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 2.3.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6211\u4eec\u6b63\u5728\u4e3a Kafka Connect \u5f15\u5165\u4e00\u79cd\u57fa\u4e8e \u589e\u91cf\u5408\u4f5c\u518d\u5e73\u8861 \u7684\u65b0\u518d\u5e73\u8861\u534f\u8bae\u3002\u65b0\u534f\u8bae\u4e0d\u9700\u8981\u5728 Connect \u5de5\u4f5c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u91cd\u65b0\u5e73\u8861\u9636\u6bb5\u505c\u6b62\u6240\u6709\u4efb\u52a1\u3002\u76f8\u53cd\uff0c\u53ea\u6709\u9700\u8981\u5728\u5de5\u4f5c\u4eba\u5458\u4e4b\u95f4\u4ea4\u6362\u7684\u4efb\u52a1\u624d\u4f1a\u505c\u6b62\uff0c\u5e76\u5728\u540e\u7eed\u91cd\u65b0\u5e73\u8861\u4e2d\u542f\u52a8\u5b83\u4eec\u3002\u4ece 2.3.0 \u5f00\u59cb\uff0c\u65b0\u7684 Connect \u534f\u8bae\u9ed8\u8ba4\u542f\u7528\u3002\u6709\u5173\u5176\u5de5\u4f5c\u539f\u7406\u4ee5\u53ca\u5982\u4f55\u542f\u7528\u6025\u5207\u518d\u5e73\u8861\u7684\u65e7\u884c\u4e3a\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u589e\u91cf\u534f\u4f5c\u518d\u5e73\u8861\u8bbe\u8ba1 \u3002 \u6211\u4eec\u6b63\u5728\u5411\u6d88\u8d39\u8005\u7528\u6237\u5f15\u5165\u9759\u6001\u4f1a\u5458\u8d44\u683c\u3002\u6b64\u529f\u80fd\u51cf\u5c11\u4e86\u6b63\u5e38\u5e94\u7528\u7a0b\u5e8f\u5347\u7ea7\u6216\u6eda\u52a8\u5f39\u8df3\u671f\u95f4\u4e0d\u5fc5\u8981\u7684\u91cd\u65b0\u5e73\u8861\u3002\u6709\u5173\u5982\u4f55\u4f7f\u7528\u5b83\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u9759\u6001\u6210\u5458\u8d44\u683c\u8bbe\u8ba1 \u3002 Kafka Streams DSL \u5207\u6362\u5176\u4f7f\u7528\u7684\u5b58\u50a8\u7c7b\u578b\u3002\u867d\u7136\u6b64\u66f4\u6539\u4e3b\u8981\u5bf9\u7528\u6237\u662f\u900f\u660e\u7684\uff0c\u4f46\u5728\u67d0\u4e9b\u6781\u7aef\u60c5\u51b5\u4e0b\u53ef\u80fd\u9700\u8981\u66f4\u6539\u4ee3\u7801\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u90e8\u5206 \u3002 Kafka Streams 2.3.0 \u9700\u8981 0.11 \u6d88\u606f\u683c\u5f0f\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5e76\u4e14\u4e0d\u9002\u7528\u4e8e\u8f83\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\u52302.2.0 \u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x\u30011.1.x \u6216 2.0.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.2 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.2 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 2.2.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 Kafka Streams 2.2.1 \u9700\u8981 0.11 \u6d88\u606f\u683c\u5f0f\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5e76\u4e14\u4e0d\u9002\u7528\u4e8e\u8f83\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u3002 2.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u9ed8\u8ba4\u6d88\u8d39\u8005\u7ec4 ID \u5df2\u4ece\u7a7a\u5b57\u7b26\u4e32 ( \"\" ) \u66f4\u6539\u4e3a null \u3002\u4f7f\u7528\u65b0\u7684\u9ed8\u8ba4\u7ec4 ID \u7684\u6d88\u8d39\u8005\u5c06\u65e0\u6cd5\u8ba2\u9605\u4e3b\u9898\u3001\u83b7\u53d6\u6216\u63d0\u4ea4\u504f\u79fb\u91cf\u3002\u4e0d\u63a8\u8350\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u6d88\u8d39\u8005\u7ec4 ID\uff0c\u4f46\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e4b\u524d\u5c06\u53d7\u652f\u6301\u3002\u4f9d\u8d56\u7a7a\u5b57\u7b26\u4e32\u7ec4 ID \u7684\u65e7\u5ba2\u6237\u7aef\u73b0\u5728\u5fc5\u987b\u663e\u5f0f\u63d0\u4f9b\u5b83\u4f5c\u4e3a\u5176\u6d88\u8d39\u8005\u914d\u7f6e\u7684\u4e00\u90e8\u5206\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-289 \u3002 \u547d\u4ee4 bin/kafka-topics.sh \u884c\u5de5\u5177\u73b0\u5728\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5\u5230\u4ee3\u7406\u800c --bootstrap-server \u4e0d\u662fzookeeper\u3002\u65e7 --zookeeper \u9009\u9879\u76ee\u524d\u4ecd\u7136\u53ef\u7528\u3002\u8bf7\u9605\u8bfb KIP-377 \u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002 Kafka Streams \u4f9d\u8d56\u4e8e\u8f83\u65b0\u7248\u672c\u7684 RocksDB\uff0c\u9700\u8981 MacOS 10.13 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x \u6216 2.0.0 \u5347\u7ea7\u5230 2.1.0](https://kafka.apache.org/documentation/#upgrade_2_1_0) \u8bf7\u6ce8\u610f\uff0c2.1.x \u5305\u542b\u5bf9\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u5185\u90e8\u67b6\u6784\u7684\u66f4\u6539\u3002\u5347\u7ea7\u5b8c\u6210\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230\u4e4b\u524d\u7684\u7248\u672c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u6eda\u52a8\u5347\u7ea7\u8bf4\u660e\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x\u30011.1.x \u6216 2.0.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.1 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.1 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5728\u6b64\u7248\u672c\u4e2d\uff0c\u504f\u79fb\u8fc7\u671f\u8bed\u4e49\u7565\u6709\u53d8\u5316\u3002\u6839\u636e\u65b0\u7684\u8bed\u4e49\uff0c\u5f53\u7ec4\u8ba2\u9605\u4e86\u76f8\u5e94\u7684\u4e3b\u9898\u5e76\u4e14\u4ecd\u7136\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff08\u6709\u6d3b\u8dc3\u7684\u6d88\u8d39\u8005\uff09\u65f6\uff0c\u7ec4\u4e2d\u5206\u533a\u7684\u504f\u79fb\u91cf\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u5982\u679c\u7ec4\u53d8\u7a7a\uff0c\u5219\u5728\u9ed8\u8ba4\u504f\u79fb\u4fdd\u7559\u671f\uff08\u6216\u4ee3\u7406\u8bbe\u7f6e\u7684\u4fdd\u7559\u671f\uff09\u8fc7\u53bb\u540e\uff0c\u5176\u6240\u6709\u504f\u79fb\u5c06\u88ab\u5220\u9664\uff08\u9664\u975e\u8be5\u7ec4\u518d\u6b21\u53d8\u4e3a\u6d3b\u52a8\u72b6\u6001\uff09\u3002\u4e0e\u4e0d\u4f7f\u7528 Kafka \u7ec4\u7ba1\u7406\u7684\u72ec\u7acb\uff08\u7b80\u5355\uff09\u6d88\u8d39\u8005\u76f8\u5173\u7684\u504f\u79fb\u91cf\uff0c\u5c06\u5728\u81ea\u4e0a\u6b21\u63d0\u4ea4\u4ee5\u6765\u9ed8\u8ba4\u504f\u79fb\u91cf\u4fdd\u7559\u671f\uff08\u6216\u7531\u4ee3\u7406\u8bbe\u7f6e\u7684\u4fdd\u7559\u671f\uff09\u8fc7\u53bb\u540e\u88ab\u5220\u9664\u3002 enable.auto.commit \u672a\u63d0\u4f9b\u65f6\u63a7\u5236\u53f0\u4f7f\u7528\u8005\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c group.id \u73b0\u5728\u8bbe\u7f6e\u4e3a false \u3002\u8fd9\u662f\u4e3a\u4e86\u907f\u514d\u6c61\u67d3\u6d88\u8d39\u8005\u534f\u8c03\u5668\u7f13\u5b58\uff0c\u56e0\u4e3a\u81ea\u52a8\u751f\u6210\u7684\u7ec4\u4e0d\u592a\u53ef\u80fd\u88ab\u5176\u4ed6\u6d88\u8d39\u8005\u4f7f\u7528\u3002 \u6b63\u5982\u6211\u4eec \u5728 KIP-91 \u4e2d\u4ecb\u7ecd\u7684\u90a3\u6837\uff0c\u751f\u4ea7\u8005 retries \u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\u5df2\u66f4\u6539\u4e3a\uff0c\u5b83\u8bbe\u7f6e\u4e86\u53d1\u9001\u8bb0\u5f55\u548c\u4ece\u4ee3\u7406\u63a5\u6536\u786e\u8ba4\u4e4b\u95f4\u7684\u603b\u65f6\u95f4\u4e0a\u9650\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f20\u9001\u8d85\u65f6\u8bbe\u7f6e\u4e3a 2 \u5206\u949f\u3002 Integer.MAX_VALUE``delivery.timeout.ms \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMirrorMaker \u73b0\u5728\u4f1a\u5728\u914d\u7f6e\u751f\u4ea7\u8005\u65f6 delivery.timeout.ms \u8986\u76d6\u3002\u5982\u679c\u60a8\u4e3a\u4e86\u66f4\u5feb\u5730\u5931\u8d25 Integer.MAX_VALUE \u800c\u8986\u76d6\u4e86 \u7684\u503c\uff0c\u5219\u60a8\u5c06\u9700\u8981\u8986\u76d6\u3002 retries``delivery.timeout.ms ListGroup \u4f5c\u4e3a\u63a8\u8350\u7684\u66ff\u4ee3\u65b9\u6848\uff0cAPI \u73b0\u5728\u671f\u671b\u8bbf\u95ee Describe Group \u7528\u6237\u5e94\u8be5\u80fd\u591f\u5217\u51fa\u7684\u7ec4\u3002\u5c3d\u7ba1 Describe Cluster \u4ecd\u652f\u6301\u65e7\u7684\u8bbf\u95ee\u4ee5\u5b9e\u73b0\u5411\u540e\u517c\u5bb9\u6027\uff0c\u4f46\u4e0d\u5efa\u8bae\u5c06\u5176\u7528\u4e8e\u6b64 API\u3002 KIP-336 \u5f03\u7528\u4e86 ExtendedSerializer \u548c ExtendedDeserializer \u63a5\u53e3\uff0c\u5e76\u63a8\u5e7f\u4e86 Serializer \u548c Deserializer \u7684\u4f7f\u7528\u3002 ExtendedSerializer \u548c ExtendedDeserializer \u662f\u968fKIP-82 \u5f15\u5165\u7684\uff0c \u4ee5 Java 7 \u517c\u5bb9\u7684\u65b9\u5f0f\u4e3a\u5e8f\u5217\u5316\u5668\u548c\u53cd\u5e8f\u5217\u5316\u5668\u63d0\u4f9b\u8bb0\u5f55\u6807\u5934\u3002\u73b0\u5728\u6211\u4eec\u6574\u5408\u4e86\u8fd9\u4e9b\u63a5\u53e3\uff0c\u56e0\u4e3a Java 7 \u652f\u6301\u5df2\u88ab\u5220\u9664\u3002 2.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 Jetty \u5df2\u5347\u7ea7\u5230 9.4.12\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u5305\u62ec TLS_RSA_* \u5bc6\u7801\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u652f\u6301\u524d\u5411\u4fdd\u5bc6\uff0c\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 https://github.com/eclipse/jetty.project/issues/2807\u3002 unclean.leader.election.enable \u5f53\u4f7f\u7528\u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u8986\u76d6\u52a8\u6001\u66f4\u65b0\u914d\u7f6e\u65f6\uff0c\u63a7\u5236\u5668\u4f1a\u81ea\u52a8\u542f\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e\u3002 \u6dfb\u52a0 AdminClient \u4e86\u4e00\u4e2a\u65b9\u6cd5 AdminClient#metrics() \u3002\u73b0\u5728\uff0c\u4efb\u4f55\u4f7f\u7528 \u7684\u5e94\u7528\u7a0b\u5e8f\u90fd AdminClient \u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u4ece \u6355\u83b7\u7684\u6307\u6807\u6765\u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u548c\u89c1\u89e3 AdminClient \u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-324 Kafka \u73b0\u5728\u652f\u6301 KIP-110 \u7684 Zstandard \u538b\u7f29\u3002\u60a8\u5fc5\u987b\u5347\u7ea7\u7ecf\u7eaa\u5546\u548c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528\u5b83\u30022.1.0 \u4e4b\u524d\u7684\u6d88\u8d39\u8005\u5c06\u65e0\u6cd5\u8bfb\u53d6\u4f7f\u7528 Zstandard \u538b\u7f29\u7684\u4e3b\u9898\uff0c\u56e0\u6b64\u5728\u6240\u6709\u4e0b\u6e38\u6d88\u8d39\u8005\u5347\u7ea7\u4e4b\u524d\uff0c\u4e0d\u5e94\u4e3a\u4e3b\u9898\u542f\u7528\u5b83\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP\u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x \u6216 1.1.x \u5347\u7ea7\u5230 2.0.0](https://kafka.apache.org/documentation/#upgrade_2_0_0) Kafka 2.0.0 \u5f15\u5165\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 2.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x \u6216 1.1.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u683c\u5f0f\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 3. \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u8f83\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u65b0\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002 \u5982\u679c\u60a8\u5728 Kafka Streams \u4ee3\u7801\u4e2d\u4f7f\u7528 Java8 \u65b9\u6cd5\u5f15\u7528\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u4ee3\u7801\u4ee5\u89e3\u51b3\u65b9\u6cd5\u6b67\u4e49\u3002\u4ec5\u70ed\u4ea4\u6362 jar \u6587\u4ef6\u53ef\u80fd\u4e0d\u8d77\u4f5c\u7528\u3002 \u5728\u66f4\u65b0\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u4e4b\u524d\uff0c \u4e0d\u5e94\u5c06 ACL \u6dfb\u52a0\u5230\u524d\u7f00\u8d44\u6e90\uff08\u5728 KIP-290\u4e2d\u6dfb\u52a0\uff09\u3002 \u6ce8\u610f\uff1a\u5982\u679c \u96c6\u7fa4\u518d\u6b21\u964d\u7ea7\uff0c\u5373\u4f7f\u5728\u96c6\u7fa4\u5b8c\u5168\u5347\u7ea7\u4e4b\u540e\uff0c\u6dfb\u52a0\u5230\u96c6\u7fa4\u7684\u4efb\u4f55\u524d\u7f00 ACL \u4e5f\u5c06\u88ab\u5ffd\u7565\u3002 2.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 KIP-186 \u5c06\u9ed8\u8ba4\u504f\u79fb\u91cf\u4fdd\u7559\u65f6\u95f4\u4ece 1 \u5929\u589e\u52a0\u5230 7 \u5929\u3002\u8fd9\u4f7f\u5f97\u5728\u4e0d\u9891\u7e41\u63d0\u4ea4\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u201c\u4e22\u5931\u201d\u504f\u79fb\u91cf\u7684\u53ef\u80fd\u6027\u8f83\u5c0f\u3002\u5b83\u8fd8\u4f1a\u589e\u52a0\u6d3b\u52a8\u7684\u504f\u79fb\u96c6\uff0c\u56e0\u6b64\u4f1a\u589e\u52a0\u4ee3\u7406\u4e0a\u7684\u5185\u5b58\u4f7f\u7528\u91cf\u3002\u8bf7\u6ce8\u610f\uff0c\u63a7\u5236\u53f0\u4f7f\u7528\u8005\u5f53\u524d\u9ed8\u8ba4\u542f\u7528\u504f\u79fb\u91cf\u63d0\u4ea4\uff0c\u5e76\u4e14\u53ef\u80fd\u662f\u5927\u91cf\u504f\u79fb\u91cf\u7684\u6765\u6e90\uff0c\u6b64\u66f4\u6539\u73b0\u5728\u5c06\u4fdd\u7559 7 \u5929\u800c\u4e0d\u662f 1 \u5929\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e\u4e3a 1440 \u6765\u4fdd\u7559\u73b0\u6709\u884c\u4e3a offsets.retention.minutes \u3002 \u5bf9 Java 7 \u7684\u652f\u6301\u5df2\u53d6\u6d88\uff0cJava 8 \u73b0\u5728\u662f\u6240\u9700\u7684\u6700\u4f4e\u7248\u672c\u3002 \u7684\u9ed8\u8ba4\u503c ssl.endpoint.identification.algorithm \u5df2\u66f4\u6539\u4e3a https \uff0c\u5b83\u6267\u884c\u4e3b\u673a\u540d\u9a8c\u8bc1\uff08\u5426\u5219\u53ef\u80fd\u4f1a\u53d1\u751f\u4e2d\u95f4\u4eba\u653b\u51fb\uff09\u3002\u8bbe\u7f6e ssl.endpoint.identification.algorithm \u4e3a\u7a7a\u5b57\u7b26\u4e32\u4ee5\u6062\u590d\u4e4b\u524d\u7684\u884c\u4e3a\u3002 KAFKA-5674 \u5c06\u6700\u5c0f\u503c\u7684\u4e0b\u9650\u95f4\u9694\u6269\u5c55 max.connections.per.ip \u5230\u96f6\uff0c\u56e0\u6b64\u5141\u8bb8\u5bf9\u5165\u7ad9\u8fde\u63a5\u8fdb\u884c\u57fa\u4e8e IP \u7684\u8fc7\u6ee4\u3002 KIP-272 \u5728\u6307\u6807\u4e2d\u6dfb\u52a0\u4e86 API \u7248\u672c\u6807\u7b7e kafka.network:type=RequestMetrics,name=RequestsPerSec,request={Produce|FetchConsumer|FetchFollower|...} \u3002\u8fd9\u4e2a\u6307\u6807\u73b0\u5728\u53d8\u6210\u4e86 kafka.network:type=RequestMetrics,name=RequestsPerSec,request={Produce|FetchConsumer|FetchFollower|...},version={0|1|2|3|...} \u3002\u8fd9\u5c06\u5f71\u54cd\u4e0d\u81ea\u52a8\u805a\u5408\u7684 JMX \u76d1\u63a7\u5de5\u5177\u3002\u8981\u83b7\u53d6\u7279\u5b9a\u8bf7\u6c42\u7c7b\u578b\u7684\u603b\u8ba1\u6570\uff0c\u9700\u8981\u66f4\u65b0\u8be5\u5de5\u5177\u4ee5\u8de8\u4e0d\u540c\u7248\u672c\u8fdb\u884c\u805a\u5408\u3002 KIP-225 \u66f4\u6539\u4e86\u6307\u6807\u201crecords.lag\u201d\u4ee5\u4f7f\u7528\u4e3b\u9898\u548c\u5206\u533a\u7684\u6807\u7b7e\u3002\u540d\u79f0\u683c\u5f0f\u4e3a\u201c{topic}-{partition}.records-lag\u201d\u7684\u539f\u59cb\u7248\u672c\u5df2\u88ab\u5220\u9664\u3002 \u81ea 0.11.0.0 \u8d77\u5df2\u5f03\u7528\u7684 Scala \u6d88\u8d39\u8005\u5df2\u88ab\u5220\u9664\u3002\u81ea 0.10.0.0 \u4ee5\u6765\uff0cJava \u6d88\u8d39\u8005\u4e00\u76f4\u662f\u63a8\u8350\u7684\u9009\u9879\u3002\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u4ee3\u7406\u5347\u7ea7\u5230 2.0.0\uff0c1.1.0\uff08\u53ca\u66f4\u65e9\u7248\u672c\uff09\u4e2d\u7684 Scala \u6d88\u8d39\u8005\u4e5f\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002 \u81ea 0.10.0.0 \u8d77\u5df2\u5f03\u7528\u7684 Scala \u751f\u4ea7\u8005\u5df2\u88ab\u5220\u9664\u3002\u4ece 0.9.0.0 \u5f00\u59cb\uff0cJava \u751f\u4ea7\u8005\u4e00\u76f4\u662f\u63a8\u8350\u9009\u9879\u3002\u8bf7\u6ce8\u610f\uff0cJava \u751f\u4ea7\u8005\u4e2d\u9ed8\u8ba4\u5206\u533a\u5668\u7684\u884c\u4e3a\u4e0e Scala \u751f\u4ea7\u8005\u4e2d\u9ed8\u8ba4\u5206\u533a\u5668\u7684\u884c\u4e3a\u4e0d\u540c\u3002\u8fc1\u79fb\u7684\u7528\u6237\u5e94\u8003\u8651\u914d\u7f6e\u4fdd\u7559\u4ee5\u524d\u884c\u4e3a\u7684\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\u3002\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u4ee3\u7406\u5347\u7ea7\u5230 2.0.0\uff0c1.1.0\uff08\u53ca\u66f4\u65e9\u7248\u672c\uff09\u4e2d\u7684 Scala \u751f\u4ea7\u8005\u4e5f\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002 MirrorMaker \u548c ConsoleConsumer \u4e0d\u518d\u652f\u6301 Scala \u6d88\u8d39\u8005\uff0c\u5b83\u4eec\u59cb\u7ec8\u4f7f\u7528 Java \u6d88\u8d39\u8005\u3002 ConsoleProducer \u4e0d\u518d\u652f\u6301 Scala \u751f\u4ea7\u8005\uff0c\u5b83\u59cb\u7ec8\u4f7f\u7528 Java \u751f\u4ea7\u8005\u3002 \u8bb8\u591a\u4f9d\u8d56 Scala \u5ba2\u6237\u7aef\u7684\u5df2\u5f03\u7528\u5de5\u5177\u5df2\u88ab\u5220\u9664\uff1aReplayLogProducer\u3001SimpleConsumerPerformance\u3001SimpleConsumerShell\u3001ExportZkOffsets\u3001ImportZkOffsets\u3001UpdateOffsetsInZK\u3001VerifyConsumerRebalance\u3002 \u5df2\u5f03\u7528\u7684 kafka.tools.ProducerPerformance \u5df2\u88ab\u5220\u9664\uff0c\u8bf7\u4f7f\u7528 org.apache.kafka.tools.ProducerPerformance\u3002 \u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u65e7\u7248\u672c\u6eda\u52a8\u53cd\u5f39\u5347\u7ea7\u3002 KIP-284 \u901a\u8fc7\u5c06\u9ed8\u8ba4\u503c\u8bbe\u7f6e\u4e3a \u6765\u66f4\u6539 Kafka Streams \u91cd\u65b0\u5206\u533a\u4e3b\u9898\u7684\u4fdd\u7559\u65f6\u95f4 Long.MAX_VALUE \u3002 \u66f4\u65b0\u4e86 ProcessorStateManager Kafka Streams \u4e2d\u7684 API\uff0c\u7528\u4e8e\u5c06\u72b6\u6001\u5b58\u50a8\u6ce8\u518c\u5230\u5904\u7406\u5668\u62d3\u6251\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb Streams \u5347\u7ea7\u6307\u5357 \u3002 \u5728\u65e9\u671f\u7248\u672c\u4e2d\uff0cConnect \u7684\u5de5\u4f5c\u7ebf\u7a0b\u914d\u7f6e\u9700\u8981 internal.key.converter \u548c internal.value.converter \u5c5e\u6027\u3002 \u5728 2.0 \u4e2d\uff0c\u4e0d\u518d\u9700\u8981 \u8fd9\u4e9b\uff0c\u5e76\u4e14\u9ed8\u8ba4\u4e3a JSON \u8f6c\u6362\u5668\u3002\u60a8\u53ef\u4ee5\u5b89\u5168\u5730\u4ece Connect \u72ec\u7acb\u548c\u5206\u5e03\u5f0f\u5de5\u4f5c\u7ebf\u7a0b\u914d\u7f6e\u4e2d\u5220\u9664\u8fd9\u4e9b\u5c5e\u6027\uff1a internal.key.converter=org.apache.kafka.connect.json.JsonConverter internal.key.converter.schemas.enable=false internal.value.converter=org.apache.kafka.connect.json.JsonConverter internal.value.converter.schemas.enable=false KIP-266 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u6d88\u8d39\u8005\u914d\u7f6e default.api.timeout.ms \uff0c\u4ee5\u6307\u5b9a\u7528\u4e8e\u53ef\u80fd\u963b\u585e\u7684 API \u7684\u9ed8\u8ba4\u8d85\u65f6 KafkaConsumer \u3002KIP \u8fd8\u4e3a\u6b64\u7c7b\u963b\u585e API \u6dfb\u52a0\u4e86\u91cd\u8f7d\uff0c\u4ee5\u652f\u6301\u4e3a\u6bcf\u4e2a API \u6307\u5b9a\u7279\u5b9a\u7684\u8d85\u65f6\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 default.api.timeout.ms . \u7279\u522b\u662f\uff0c poll(Duration) \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684 API\uff0c\u8be5 API \u4e0d\u4f1a\u963b\u6b62\u52a8\u6001\u5206\u533a\u5206\u914d\u3002\u65e7\u7684 poll(long) API \u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u672a\u6765\u7248\u672c\u4e2d\u5220\u9664\u3002 KafkaConsumer \u8fd8\u4e3a\u5176\u4ed6\u65b9\u6cd5\u6dfb\u52a0\u4e86\u91cd\u8f7d\uff0c\u4f8b\u5982 partitionsFor , listTopics , offsetsForTimes , beginningOffsets , endOffsets \u4ee5\u53ca close \u63a5\u53d7 Duration . \u53e6\u5916\uff0c\u4f5c\u4e3a KIP-266 \u7684\u4e00\u90e8\u5206\uff0c\u9ed8\u8ba4\u503c request.timeout.ms \u5df2\u66f4\u6539\u4e3a 30 \u79d2\u3002\u8003\u8651\u5230\u91cd\u65b0\u5e73\u8861\u6240\u9700\u7684\u6700\u957f\u65f6\u95f4\uff0c\u4e4b\u524d\u7684\u503c\u7565\u9ad8\u4e8e 5 \u5206\u949f\u3002 max.poll.interval.ms \u73b0\u5728\uff0c\u6211\u4eec\u5c06\u91cd\u65b0\u5e73\u8861\u4e2d\u7684 JoinGroup \u8bf7\u6c42\u89c6\u4e3a\u7279\u6b8a\u60c5\u51b5\uff0c\u5e76\u4f7f\u7528\u4ece\u8bf7\u6c42\u8d85\u65f6\u6d3e\u751f\u7684\u503c \u3002\u6240\u6709\u5176\u4ed6\u8bf7\u6c42\u7c7b\u578b\u4f7f\u7528\u4ee5\u4e0b\u5b9a\u4e49\u7684\u8d85\u65f6 request.timeout.ms \u5185\u90e8\u65b9\u6cd5 kafka.admin.AdminClient.deleteRecordsBefore \u5df2\u88ab\u5220\u9664\u3002\u9f13\u52b1\u7528\u6237\u8fc1\u79fb\u5230 org.apache.kafka.clients.admin.AdminClient.deleteRecords . AclCommand \u5de5\u5177 --producer \u4fbf\u5229\u9009\u9879\u5728\u7ed9\u5b9a\u4e3b\u9898\u4e0a\u4f7f\u7528 KIP-277\u66f4\u7ec6\u7c92\u5ea6\u7684 ACL\u3002 KIP-176 \u5220\u9664\u4e86 --new-consumer \u6240\u6709\u57fa\u4e8e\u6d88\u8d39\u8005\u7684\u5de5\u5177\u7684\u9009\u9879\u3002\u6b64\u9009\u9879\u662f\u591a\u4f59\u7684\uff0c\u56e0\u4e3a\u5982\u679c\u5b9a\u4e49\u4e86 --bootstrap-server\uff0c\u5219\u4f1a\u81ea\u52a8\u4f7f\u7528\u65b0\u7684\u4f7f\u7528\u8005\u3002 KIP-290 \u6dfb\u52a0\u4e86\u5728\u524d\u7f00\u8d44\u6e90\u4e0a\u5b9a\u4e49 ACL \u7684\u80fd\u529b\uff0c\u4f8b\u5982\u4ee5\u201cfoo\u201d\u5f00\u5934\u7684\u4efb\u4f55\u4e3b\u9898\u3002 KIP-283 \u6539\u8fdb\u4e86 Kafka \u4ee3\u7406\u4e0a\u7684\u6d88\u606f\u4e0b\u8f6c\u6362\u5904\u7406\uff0c\u8fd9\u901a\u5e38\u662f\u4e00\u9879\u5185\u5b58\u5bc6\u96c6\u578b\u64cd\u4f5c\u3002KIP \u6dfb\u52a0\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u901a\u8fc7\u4e00\u6b21\u5411\u4e0b\u8f6c\u6362\u5206\u533a\u6570\u636e\u5757\uff0c\u64cd\u4f5c\u4f1a\u51cf\u5c11\u5185\u5b58\u5bc6\u96c6\u5ea6\uff0c\u8fd9\u6709\u52a9\u4e8e\u8bbe\u5b9a\u5185\u5b58\u6d88\u8017\u7684\u4e0a\u9650\u3002\u901a\u8fc7\u8fd9\u4e00\u6539\u8fdb\uff0c\u534f\u8bae\u884c\u4e3a\u53d1\u751f\u4e86\u53d8\u5316 FetchResponse \uff0c\u4ee3\u7406\u53ef\u4ee5\u5728\u54cd\u5e94\u7ed3\u675f\u65f6\u53d1\u9001\u5e26\u6709\u65e0\u6548\u504f\u79fb\u91cf\u7684\u8d85\u5927\u6d88\u606f\u6279\u6b21\u3002\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u5fc5\u987b\u5ffd\u7565\u6b64\u7c7b\u8fc7\u5927\u7684\u6d88\u606f\uff0c\u5c31\u50cf KafkaConsumer . KIP-283\u8fd8\u6dfb\u52a0\u4e86\u65b0\u7684\u4e3b\u9898\u548c\u4ee3\u7406\u914d\u7f6e message.downconversion.enable \uff0c log.message.downconversion.enable \u5206\u522b\u63a7\u5236\u662f\u5426\u542f\u7528\u4e0b\u8f6c\u6362\u3002\u7981\u7528\u540e\uff0c\u4ee3\u7406\u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u4e0b\u8f6c\u6362\uff0c\u800c\u662f UNSUPPORTED_VERSION \u5411\u5ba2\u6237\u7aef\u53d1\u9001\u9519\u8bef\u3002 \u5728\u542f\u52a8\u4ee3\u7406\u4e4b\u524d\uff0c\u53ef\u4ee5\u4f7f\u7528 kafka-configs.sh \u5c06\u52a8\u6001\u4ee3\u7406\u914d\u7f6e\u9009\u9879\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u3002\u6b64\u9009\u9879\u53ef\u7528\u4e8e\u907f\u514d\u5728 server.properties \u4e2d\u5b58\u50a8\u660e\u6587\u5bc6\u7801\uff0c\u56e0\u4e3a\u6240\u6709\u5bc6\u7801\u914d\u7f6e\u90fd\u53ef\u80fd\u4ee5\u52a0\u5bc6\u65b9\u5f0f\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u3002 \u5982\u679c\u8fde\u63a5\u5c1d\u8bd5\u5931\u8d25\uff0cZooKeeper \u4e3b\u673a\u73b0\u5728\u4f1a\u91cd\u65b0\u89e3\u6790\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u7684 ZooKeeper \u4e3b\u673a\u540d\u89e3\u6790\u4e3a\u591a\u4e2a\u5730\u5740\uff0c\u5e76\u4e14\u5176\u4e2d\u4e00\u4e9b\u5730\u5740\u65e0\u6cd5\u8bbf\u95ee\uff0c\u90a3\u4e48\u60a8\u53ef\u80fd\u9700\u8981\u589e\u52a0\u8fde\u63a5\u8d85\u65f6 zookeeper.connection.timeout.ms \u3002 \u65b0\u534f\u8bae\u7248\u672c KIP-279 \uff1aOffsetsForLeaderEpochResponse v1 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 leader_epoch \u5b57\u6bb5\u3002 KIP-219 \uff1a\u63d0\u9ad8\u56e0\u914d\u989d\u8fdd\u89c4\u800c\u53d7\u5230\u9650\u5236\u7684\u975e\u96c6\u7fa4\u64cd\u4f5c\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u534f\u8bae\u7248\u672c\u3002 KIP-290 \uff1a\u63d0\u9ad8 ACL \u521b\u5efa\u3001\u63cf\u8ff0\u548c\u5220\u9664\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u534f\u8bae\u7248\u672c\u3002 \u5347\u7ea7 1.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 1.1 \u5347\u7ea7\u5230 2.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 2.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 2.0\u30011.1\u30011.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u8bf7\u6ce8\u610f\uff0c\u5728 2.0 \u4e2d\uff0c\u6211\u4eec\u5220\u9664\u4e86 1.0 \u4e4b\u524d\u5df2\u5f03\u7528\u7684\u516c\u5171 API\uff1b\u5229\u7528\u8fd9\u4e9b\u5df2\u5f03\u7528\u7684 API \u7684\u7528\u6237\u9700\u8981\u76f8\u5e94\u5730\u66f4\u6539\u4ee3\u7801\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 2.0.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x \u6216 1.0.x \u5347\u7ea7\u5230 1.1.x Kafka 1.1.0 \u5f15\u5165\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 1.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x \u6216 1.0.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u683c\u5f0f\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0 \u6216 1.0\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 3. \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 1.1 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 1.1 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u8f83\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u65b0\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002 \u5982\u679c\u60a8\u5728 Kafka Streams \u4ee3\u7801\u4e2d\u4f7f\u7528 Java8 \u65b9\u6cd5\u5f15\u7528\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u4ee3\u7801\u4ee5\u89e3\u51b3\u65b9\u6cd5\u6b67\u4e49\u3002\u4ec5\u70ed\u4ea4\u6362 jar \u6587\u4ef6\u53ef\u80fd\u4e0d\u8d77\u4f5c\u7528\u3002 1.1.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 \u6709\u5173\u6b64\u65b0\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u6307\u5357\u3002 1.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 Maven \u4e2d\u7684 kafka \u5de5\u4ef6\u4e0d\u518d\u4f9d\u8d56 log4j \u6216 slf4j-log4j12\u3002\u4e0e kafka-clients \u5de5\u4ef6\u7c7b\u4f3c\uff0c\u7528\u6237\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u5305\u542b\u9002\u5f53\u7684 slf4j \u6a21\u5757\uff08slf4j-log4j12\u3001logback \u7b49\uff09\u6765\u9009\u62e9\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u3002\u53d1\u5e03 tarball \u4ecd\u7136\u5305\u542b log4j \u548c slf4j-log4j12\u3002 KIP-225 \u66f4\u6539\u4e86\u6307\u6807\u201crecords.lag\u201d\u4ee5\u4f7f\u7528\u4e3b\u9898\u548c\u5206\u533a\u7684\u6807\u7b7e\u3002\u540d\u79f0\u683c\u5f0f\u4e3a\u201c{topic}-{partition}.records-lag\u201d\u7684\u539f\u59cb\u7248\u672c\u5df2\u5f03\u7528\uff0c\u5e76\u5c06\u5728 2.0.0 \u4e2d\u5220\u9664\u3002 Kafka Streams \u5bf9\u4e8e\u4ee3\u7406\u901a\u4fe1\u9519\u8bef\u66f4\u52a0\u7a33\u5065\u3002Kafka Streams \u4e0d\u4f1a\u56e0\u81f4\u547d\u5f02\u5e38\u800c\u505c\u6b62 Kafka Streams \u5ba2\u6237\u7aef\uff0c\u800c\u662f\u5c1d\u8bd5\u81ea\u6211\u4fee\u590d\u5e76\u91cd\u65b0\u8fde\u63a5\u5230\u96c6\u7fa4\u3002\u4f7f\u7528\u65b0\u7248\u672c\uff0c AdminClient \u60a8\u53ef\u4ee5\u66f4\u597d\u5730\u63a7\u5236 Kafka Streams \u91cd\u8bd5\u7684\u9891\u7387\uff0c\u5e76\u53ef\u4ee5 \u914d\u7f6e \u7ec6\u7c92\u5ea6\u7684\u8d85\u65f6\uff08\u800c\u4e0d\u662f\u50cf\u65e7\u7248\u672c\u4e2d\u90a3\u6837\u786c\u7f16\u7801\u91cd\u8bd5\uff09\u3002 Kafka Streams \u91cd\u65b0\u5e73\u8861\u65f6\u95f4\u8fdb\u4e00\u6b65\u51cf\u5c11\uff0c\u4f7f Kafka Streams \u7684\u54cd\u5e94\u901f\u5ea6\u66f4\u5feb\u3002 Kafka Connect \u73b0\u5728\u652f\u6301\u63a5\u6536\u5668\u548c\u6e90\u8fde\u63a5\u5668\u4e2d\u7684\u6d88\u606f\u6807\u5934\uff0c\u5e76\u901a\u8fc7\u7b80\u5355\u7684\u6d88\u606f\u8f6c\u6362\u6765\u64cd\u4f5c\u5b83\u4eec\u3002\u5fc5\u987b\u66f4\u6539\u8fde\u63a5\u5668\u624d\u80fd\u663e\u5f0f\u4f7f\u7528\u5b83\u4eec\u3002\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u529f\u80fd HeaderConverter \u6765\u63a7\u5236\u6807\u5934\u7684\u5e8f\u5217\u5316\uff08\u53cd\u5e8f\u5217\u5316\uff09\u65b9\u5f0f\uff0c\u5e76\u4e14\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528\u65b0\u7684\u201cSimpleHeaderConverter\u201d\u6765\u4f7f\u7528\u503c\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002 \u5982\u679c\u7531\u4e8e\u89e3\u7801\u5668\u7b49\u4efb\u4f55\u5176\u4ed6\u9009\u9879\u800c\u663e\u5f0f\u6216\u9690\u5f0f\u542f\u7528\u6253\u5370\u6570\u636e\u65e5\u5fd7\uff0ckafka.tools.DumpLogSegments \u73b0\u5728\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u6df1\u5ea6\u8fed\u4ee3\u9009\u9879\u3002 \u65b0\u534f\u8bae\u7248\u672c KIP-226 \u5f15\u5165\u4e86DescribeConfigs \u8bf7\u6c42/\u54cd\u5e94 v1\u3002 KIP-227 \u5f15\u5165\u4e86 Fetch Request/Response v7\u3002 \u5347\u7ea7 1.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 1.0 \u5347\u7ea7\u5230 1.1 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.1 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 1.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 1.1.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x \u6216 0.11.0.x \u5347\u7ea7\u5230 1.0.0 Kafka 1.0.0 \u5f15\u5165\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 1.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x \u5347\u7ea7\u5e76\u4e14\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u5fc5\u987b\u5c06\u6d88\u606f\u683c\u5f0f\u7248\u672c\u548c\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u8bbe\u7f6e\u4e3a 0.11.0\u3002 * inter.broker.protocol.version=0.11.0 * log.message.format.version=0.11.0 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 3. \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 1.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 1.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u5982\u679c\u60a8\u4ece 0.11.0 \u5347\u7ea7\u5e76\u4e14 log.message.format.version \u8bbe\u7f6e\u4e3a 0.11.0\uff0c\u5219\u53ef\u4ee5\u66f4\u65b0\u914d\u7f6e\u5e76\u8df3\u8fc7\u6eda\u52a8\u91cd\u542f\u3002\u8bf7\u6ce8\u610f\uff0c\u8f83\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u65b0\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002 1.0.2 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 \u6709\u5173\u6b64\u65b0\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u6307\u5357\u3002 1.0.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6062\u590d\u4e86 AdminClient \u7684\u9009\u9879\u7c7b\uff08\u4f8b\u5982 CreateTopicsOptions\u3001DeleteTopicsOptions \u7b49\uff09\u4e0e 0.11.0.x \u7684\u4e8c\u8fdb\u5236\u517c\u5bb9\u6027\u3002\u4e8c\u8fdb\u5236\uff08\u4f46\u4e0d\u662f\u6e90\u4ee3\u7801\uff09\u517c\u5bb9\u6027\u5728 1.0.0 \u4e2d\u88ab\u65e0\u610f\u4e2d\u7834\u574f\u3002 1.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u73b0\u5728\u9ed8\u8ba4\u542f\u7528\u4e3b\u9898\u5220\u9664\uff0c\u56e0\u4e3a\u8be5\u529f\u80fd\u73b0\u5df2\u7a33\u5b9a\u3002\u5e0c\u671b\u4fdd\u7559\u4ee5\u524d\u884c\u4e3a\u7684\u7528\u6237\u5e94\u5c06\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e delete.topic.enable \u4e3a false \u3002\u8bf7\u8bb0\u4f4f\uff0c\u4e3b\u9898\u5220\u9664\u4f1a\u5220\u9664\u6570\u636e\uff0c\u5e76\u4e14\u8be5\u64cd\u4f5c\u662f\u4e0d\u53ef\u9006\u7684\uff08\u5373\u4e0d\u5b58\u5728\u201c\u53d6\u6d88\u5220\u9664\u201d\u64cd\u4f5c\uff09 \u5bf9\u4e8e\u652f\u6301\u65f6\u95f4\u6233\u641c\u7d22\u7684\u4e3b\u9898\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5206\u533a\u7684\u504f\u79fb\u91cf\uff0c\u5219\u8be5\u5206\u533a\u73b0\u5728\u5305\u542b\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\uff0c\u4e14\u504f\u79fb\u91cf\u503c\u4e3a\u7a7a\u3002\u4ee5\u524d\uff0c\u5206\u533a\u4e0d\u5305\u542b\u5728\u5730\u56fe\u4e2d\u3002\u8fdb\u884c\u6b64\u66f4\u6539\u662f\u4e3a\u4e86\u4f7f\u641c\u7d22\u884c\u4e3a\u4e0e\u4e0d\u652f\u6301\u65f6\u95f4\u6233\u641c\u7d22\u7684\u4e3b\u9898\u7684\u60c5\u51b5\u4e00\u81f4\u3002 \u5982\u679c inter.broker.protocol.version \u662f 1.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5373\u4f7f\u5b58\u5728\u8131\u673a\u65e5\u5fd7\u76ee\u5f55\uff0c\u4ee3\u7406\u73b0\u5728\u4e5f\u5c06\u4fdd\u6301\u5728\u7ebf\u72b6\u6001\u4ee5\u5728\u5b9e\u65f6\u65e5\u5fd7\u76ee\u5f55\u4e0a\u63d0\u4f9b\u526f\u672c\u3002\u7531\u4e8e\u786c\u4ef6\u6545\u969c\u5f15\u8d77\u7684IOException\uff0c\u65e5\u5fd7\u76ee\u5f55\u53ef\u80fd\u4f1a\u79bb\u7ebf\u3002\u7528\u6237\u9700\u8981\u76d1\u63a7\u6bcf\u4e2abroker\u7684\u6307\u6807 offlineLogDirectoryCount \u6765\u68c0\u67e5\u662f\u5426\u5b58\u5728\u79bb\u7ebf\u65e5\u5fd7\u76ee\u5f55\u3002 \u6dfb\u52a0\u4e86 KafkaStorageException\uff0c\u8fd9\u662f\u4e00\u4e2a\u53ef\u91cd\u8bd5\u7684\u5f02\u5e38\u3002\u5982\u679c\u5ba2\u6237\u7aef\u7684FetchRequest\u6216ProducerRequest\u7684\u7248\u672c\u4e0d\u652f\u6301KafkaStorageException\uff0c\u5219\u54cd\u5e94\u4e2d\u7684KafkaStorageException\u5c06\u8f6c\u6362\u4e3aNotLeaderForPartitionException\u3002 \u9ed8\u8ba4 JVM \u8bbe\u7f6e\u4e2d\u7684 -XX:+DisableExplicitGC \u5df2\u66ff\u6362\u4e3a -XX:+ExplicitGCInvokesConcurrent\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6709\u52a9\u4e8e\u907f\u514d\u5728\u901a\u8fc7\u76f4\u63a5\u7f13\u51b2\u533a\u5206\u914d\u672c\u673a\u5185\u5b58\u671f\u95f4\u51fa\u73b0\u5185\u5b58\u4e0d\u8db3\u5f02\u5e38\u3002 handleError \u5df2\u4ece\u5305\u4e2d\u4ee5\u4e0b\u5df2\u5f03\u7528\u7684\u7c7b\u4e2d\u5220\u9664\u4e86\u91cd\u5199\u7684\u65b9\u6cd5\u5b9e\u73b0 kafka.api \uff1a FetchRequest \u3001 GroupCoordinatorRequest \u3001 OffsetCommitRequest \u3001 OffsetFetchRequest \u3001 OffsetRequest \u3001 ProducerRequest \u548c TopicMetadataRequest \u3002\u8fd9\u4ec5\u9002\u7528\u4e8e\u4ee3\u7406\uff0c\u4f46\u5df2\u4e0d\u518d\u4f7f\u7528\u4e14\u5b9e\u73b0\u4e5f\u672a\u5f97\u5230\u7ef4\u62a4\u3002\u4e3a\u4e86\u4e8c\u8fdb\u5236\u517c\u5bb9\u6027\uff0c\u4fdd\u7559\u4e86\u5b58\u6839\u5b9e\u73b0\u3002 Java \u5ba2\u6237\u7aef\u548c\u5de5\u5177\u73b0\u5728\u63a5\u53d7\u4efb\u4f55\u5b57\u7b26\u4e32\u4f5c\u4e3a\u5ba2\u6237\u7aef ID\u3002 \u5df2\u5f03\u7528\u7684\u5de5\u5177 kafka-consumer-offset-checker.sh \u5df2\u88ab\u5220\u9664\u3002\u7528\u4e8e kafka-consumer-groups.sh \u83b7\u53d6\u6d88\u8d39\u8005\u7ec4\u8be6\u7ec6\u4fe1\u606f\u3002 SimpleAclAuthorizer \u73b0\u5728\u9ed8\u8ba4\u5c06\u8bbf\u95ee\u62d2\u7edd\u8bb0\u5f55\u5230\u6388\u6743\u8005\u65e5\u5fd7\u4e2d\u3002 \u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u73b0\u5728\u4f5c\u4e3a \u7684\u5b50\u7c7b\u4e4b\u4e00\u62a5\u544a\u7ed9\u5ba2\u6237\u7aef AuthenticationException \u3002\u5982\u679c\u5ba2\u6237\u7aef\u8fde\u63a5\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u5219\u4e0d\u4f1a\u6267\u884c\u91cd\u8bd5\u3002 \u81ea\u5b9a\u4e49 SaslServer \u5b9e\u73b0\u53ef\u80fd\u4f1a SaslAuthenticationException \u629b\u51fa\u9519\u8bef\u6d88\u606f\u4ee5\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u6307\u793a\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u7684\u539f\u56e0\u3002\u5b9e\u65bd\u8005\u5e94\u6ce8\u610f\u4e0d\u8981\u5728\u5f02\u5e38\u6d88\u606f\u4e2d\u5305\u542b\u4efb\u4f55\u5b89\u5168\u5173\u952e\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u4e0d\u5e94\u6cc4\u9732\u7ed9\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u7684\u5ba2\u6237\u7aef\u3002 \u5411 JMX \u6ce8\u518c\u4ee5\u63d0\u4f9b\u7248\u672c\u548c\u63d0\u4ea4 ID \u7684mbean app-info \u5c06\u88ab\u5f03\u7528\uff0c\u5e76\u66ff\u6362\u4e3a\u63d0\u4f9b\u8fd9\u4e9b\u5c5e\u6027\u7684\u6307\u6807\u3002 Kafka \u6307\u6807\u73b0\u5728\u53ef\u80fd\u5305\u542b\u975e\u6570\u5b57\u503c\u3002 org.apache.kafka.common.Metric#value() \u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06 0.0 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8fd4\u56de\uff0c\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u7834\u574f\u8bfb\u53d6\u6bcf\u4e2a\u5ba2\u6237\u7aef\u6307\u6807\u503c\u7684\u7528\u6237\u7684\u53ef\u80fd\u6027\uff08\u901a\u8fc7\u5b9e\u73b0 MetricsReporter \u6216\u8c03\u7528\u8be5 metrics() \u65b9\u6cd5\uff09\u3002 org.apache.kafka.common.Metric#metricValue() \u53ef\u7528\u4e8e\u68c0\u7d22\u6570\u5b57\u548c\u975e\u6570\u5b57\u5ea6\u91cf\u503c\u3002 \u73b0\u5728\uff0c\u6bcf\u4e2a Kafka \u901f\u7387\u6307\u6807\u90fd\u6709\u4e00\u4e2a\u76f8\u5e94\u7684\u7d2f\u79ef\u8ba1\u6570\u6307\u6807\uff0c\u5e76\u5e26\u6709\u540e\u7f00 -total \u4ee5\u7b80\u5316\u4e0b\u6e38\u5904\u7406\u3002\u4f8b\u5982\uff0c records-consumed-rate \u6709\u4e00\u4e2a\u540d\u4e3a \u7684\u76f8\u5e94\u6307\u6807 records-consumed-total \u3002 kafka_mx4jenable \u4ec5\u5f53\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u65f6\uff0c\u624d\u4f1a\u542f\u7528 Mx4j true \u3002\u7531\u4e8e\u903b\u8f91\u53cd\u8f6c\u9519\u8bef\uff0c\u5b83\u4ee5\u524d\u9ed8\u8ba4\u542f\u7528\uff0c\u5982\u679c kafka_mx4jenable \u8bbe\u7f6e\u4e3a\u5219\u7981\u7528 true \u3002 \u5ba2\u6237\u7aef jar \u4e2d\u7684\u5305 org.apache.kafka.common.security.auth \u5df2\u516c\u5f00\u5e76\u6dfb\u52a0\u5230 javadocs \u4e2d\u3002\u4ee5\u524d\u4f4d\u4e8e\u6b64\u5305\u4e2d\u7684\u5185\u90e8\u7c7b\u5df2\u79fb\u81f3\u5176\u4ed6\u5730\u65b9\u3002 \u5f53\u4f7f\u7528\u6388\u6743\u8005\u5e76\u4e14\u7528\u6237\u6ca1\u6709\u4e3b\u9898\u6240\u9700\u7684\u6743\u9650\u65f6\uff0c\u4ee3\u7406\u5c06\u5411\u8bf7\u6c42\u8fd4\u56de TOPIC_AUTHORIZATION_FAILED \u9519\u8bef\uff0c\u65e0\u8bba\u4ee3\u7406\u4e0a\u662f\u5426\u5b58\u5728\u4e3b\u9898\u3002\u5982\u679c\u7528\u6237\u5177\u6709\u6240\u9700\u7684\u6743\u9650\u5e76\u4e14\u4e3b\u9898\u4e0d\u5b58\u5728\uff0c\u5219\u5c06\u8fd4\u56de UNKNOWN_TOPIC_OR_PARTITION \u9519\u8bef\u4ee3\u7801\u3002 config/consumer.properties \u6587\u4ef6\u5df2\u66f4\u65b0\u4ee5\u4f7f\u7528\u65b0\u7684\u6d88\u8d39\u8005\u914d\u7f6e\u5c5e\u6027\u3002 \u65b0\u534f\u8bae\u7248\u672c KIP-112 \uff1aLeaderAndIsrRequest v1 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 is_new \u5b57\u6bb5\u3002 KIP-112 \uff1aUpdateMetadataRequest v4 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 offline_replicas \u5b57\u6bb5\u3002 KIP-112 \uff1aMetadataResponse v5 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 offline_replicas \u5b57\u6bb5\u3002 KIP-112 \uff1aProduceResponse v4 \u5f15\u5165\u4e86 KafkaStorageException \u7684\u9519\u8bef\u4ee3\u7801\u3002 KIP-112 \uff1aFetchResponse v6 \u5f15\u5165\u4e86 KafkaStorageException \u7684\u9519\u8bef\u4ee3\u7801\u3002 KIP-152 \uff1a\u6dfb\u52a0\u4e86 SaslAuthenticate \u8bf7\u6c42\u4ee5\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u62a5\u544a\u3002\u5982\u679c SaslHandshake \u8bf7\u6c42\u7248\u672c\u5927\u4e8e 0\uff0c\u5219\u5c06\u4f7f\u7528\u6b64\u8bf7\u6c42\u3002 \u5347\u7ea7 0.11.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.11.0 \u5347\u7ea7\u5230 1.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002\u4f46\u662f\uff0cKafka Streams 1.0 \u9700\u8981 0.10 \u6d88\u606f\u683c\u5f0f\u6216\u66f4\u65b0\u7248\u672c\uff0c\u5e76\u4e14\u4e0d\u9002\u7528\u4e8e\u8f83\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u3002 \u5982\u679c\u60a8\u6b63\u5728\u76d1\u89c6\u6d41\u6307\u6807\uff0c\u5219\u9700\u8981\u5bf9\u62a5\u544a\u548c\u76d1\u89c6\u4ee3\u7801\u4e2d\u7684\u6307\u6807\u540d\u79f0\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u56e0\u4e3a\u6307\u6807\u4f20\u611f\u5668\u5c42\u6b21\u7ed3\u6784\u5df2\u66f4\u6539\u3002 \u6709\u4e00\u4e9b\u516c\u5171 API\uff0c\u5305\u62ec ProcessorContext#schedule() \u3001 Processor#punctuate() \u548c KStreamBuilder \uff0c TopologyBuilder \u5df2\u88ab\u65b0 API \u5f03\u7528\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5347\u7ea7\u65f6\u8fdb\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u66f4\u6539\uff0c\u8fd9\u4e9b\u66f4\u6539\u5e94\u8be5\u975e\u5e38\u5c0f\uff0c\u56e0\u4e3a\u65b0\u7684 API \u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 1.0.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u5347\u7ea7 0.10.2 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.2 \u5347\u7ea7\u5230 1.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 1.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u5982\u679c\u60a8\u6b63\u5728\u76d1\u89c6\u6d41\u6307\u6807\uff0c\u5219\u9700\u8981\u5bf9\u62a5\u544a\u548c\u76d1\u89c6\u4ee3\u7801\u4e2d\u7684\u6307\u6807\u540d\u79f0\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u56e0\u4e3a\u6307\u6807\u4f20\u611f\u5668\u5c42\u6b21\u7ed3\u6784\u5df2\u66f4\u6539\u3002 \u6709\u4e00\u4e9b\u516c\u5171 API\uff0c\u5305\u62ec ProcessorContext#schedule() \u3001 Processor#punctuate() \u548c KStreamBuilder \uff0c TopologyBuilder \u5df2\u88ab\u65b0 API \u5f03\u7528\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5347\u7ea7\u65f6\u8fdb\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u66f4\u6539\uff0c\u8fd9\u4e9b\u66f4\u6539\u5e94\u8be5\u975e\u5e38\u5c0f\uff0c\u56e0\u4e3a\u65b0\u7684 API \u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u5347\u7ea7 0.10.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 1.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 1.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u60a8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u60a8\u7684\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u5982\u679c\u60a8\u6b63\u5728\u76d1\u89c6\u6d41\u6307\u6807\uff0c\u5219\u9700\u8981\u5bf9\u62a5\u544a\u548c\u76d1\u89c6\u4ee3\u7801\u4e2d\u7684\u6307\u6807\u540d\u79f0\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u56e0\u4e3a\u6307\u6807\u4f20\u611f\u5668\u5c42\u6b21\u7ed3\u6784\u5df2\u66f4\u6539\u3002 \u6709\u4e00\u4e9b\u516c\u5171 API\uff0c\u5305\u62ec ProcessorContext#schedule() \u3001 Processor#punctuate() \u548c KStreamBuilder \uff0c TopologyBuilder \u5df2\u88ab\u65b0 API \u5f03\u7528\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5347\u7ea7\u65f6\u8fdb\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u66f4\u6539\uff0c\u8fd9\u4e9b\u66f4\u6539\u5e94\u8be5\u975e\u5e38\u5c0f\uff0c\u56e0\u4e3a\u65b0\u7684 API \u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u5982\u679c\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\uff08\u5373\u7528\u6237\u5b9e\u73b0\u7684\uff09\u65f6\u95f4\u6233\u63d0\u53d6\u5668\uff0c\u60a8\u5c06\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a\u63a5\u53e3 TimestampExtractor \u5df2\u66f4\u6539\u3002 \u5982\u679c\u60a8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u6807\uff0c\u5219\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a StreamsMetric \u754c\u9762\u5df2\u66f4\u6539\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 1.0.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 1.0 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.1\u30010.11.0\u30010.10.2 \u6216 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 1.0.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.1 \u4e2d\u7684 Streams API \u66f4\u6539 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 1.0.2 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.11.0.3 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u4e3a\u65b0\u90e8\u7f72\u7684 1.0.2 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u505a\u597d\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u8df3\u51fa\u7684\u51c6\u5907\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52301.0.0\u62161.0.1\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff081.0.0 \u6216 1.0.1\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x \u6216 0.10.2.x \u5347\u7ea7\u5230 0.11.0.0 Kafka 0.11.0.0 \u5f15\u5165\u4e86\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4ee5\u53ca\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4f46\u662f\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 0.11.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u4ece\u7248\u672c 0.10.2 \u5f00\u59cb\uff0cJava \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u5df2\u7ecf\u83b7\u5f97\u4e86\u4e0e\u65e7\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u7684\u80fd\u529b\u3002\u7248\u672c 0.11.0 \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u7248\u672c 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u7684\u4ee3\u7406\u4f4e\u4e8e 0.10.0\uff0c\u5219\u5fc5\u987b\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u3002\u7248\u672c 0.11.0 \u4ee3\u7406\u652f\u6301 0.8.x \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u5ba2\u6237\u7aef\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u5f53\u524d\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u62160.10.2\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u5e76\u5c06 inter.broker.protocol.version \u5176\u8bbe\u7f6e\u4e3a 0.11.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\uff0c\u4f46\u6682\u65f6\u4e0d\u8981\u66f4\u6539 log.message.format.version \u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.11.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301\u65b0\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002 bin/kafka-topics.sh \u5728\u66f4\u65b0\u5168\u5c40\u8bbe\u7f6e\u4e4b\u524d\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e3b\u9898\u7ba1\u7406\u5de5\u5177 () \u5728\u5404\u4e2a\u4e3b\u9898\u4e0a\u542f\u7528 0.11.0 \u6d88\u606f\u683c\u5f0f log.message.format.version \u3002 \u5982\u679c\u60a8\u8981\u4ece 0.10.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u65e0\u9700\u5728\u5207\u6362\u5230 0.11.0 \u4e4b\u524d\u5148\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u65b0\u5230 0.10.0\u3002 \u5347\u7ea7 0.10.2 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.2 \u5347\u7ea7\u5230 0.11.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.11.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u5347\u7ea7 0.10.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 0.11.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.11.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u60a8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u60a8\u7684\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u5982\u679c\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\uff08\u5373\u7528\u6237\u5b9e\u73b0\u7684\uff09\u65f6\u95f4\u6233\u63d0\u53d6\u5668\uff0c\u60a8\u5c06\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a\u63a5\u53e3 TimestampExtractor \u5df2\u66f4\u6539\u3002 \u5982\u679c\u60a8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u6807\uff0c\u5219\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a StreamsMetric \u754c\u9762\u5df2\u66f4\u6539\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 0.11.0 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 0.11.0 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u6216 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.1 \u4e2d\u7684 Streams API \u66f4\u6539 \u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 0.11.0.3 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.11.0.3 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u51c6\u5907\u65b0\u90e8\u7f72\u7684 0.11.0.3 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u53cd\u5f39\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52300.11.0.0\u30010.11.0.1\u62160.11.0.2\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff080.11.0.0\u30010.11.0.1 \u6216 0.11.0.2\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b 0.11.0.3 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 \u6709\u5173\u6b64\u65b0\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u6307\u5357\u3002 0.11.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u73b0\u5728\u9ed8\u8ba4\u7981\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e\u3002\u65b0\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u66f4\u6ce8\u91cd\u6301\u4e45\u6027\u800c\u4e0d\u662f\u53ef\u7528\u6027\u3002\u5e0c\u671b\u4fdd\u7559\u4ee5\u524d\u884c\u4e3a\u7684\u7528\u6237\u5e94\u5c06\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e unclean.leader.election.enable \u4e3a true \u3002 \u751f\u4ea7\u8005\u914d\u7f6e block.on.buffer.full \u548c metadata.fetch.timeout.ms \u5df2 timeout.ms \u88ab\u5220\u9664\u3002\u5b83\u4eec\u6700\u521d\u5728 Kafka 0.9.0.0 \u4e2d\u88ab\u5f03\u7528\u3002 offsets.topic.replication.factor \u73b0\u5728\uff0c\u5728\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u65f6\u5f3a\u5236\u6267\u884c\u4ee3\u7406\u914d\u7f6e\u3002\u5185\u90e8\u81ea\u52a8\u4e3b\u9898\u521b\u5efa\u5c06\u5931\u8d25\u5e76\u51fa\u73b0 GROUP_COORDINATOR_NOT_AVAILABLE \u9519\u8bef\uff0c\u76f4\u5230\u96c6\u7fa4\u5927\u5c0f\u6ee1\u8db3\u6b64\u590d\u5236\u56e0\u5b50\u8981\u6c42\u3002 \u4f7f\u7528 snappy \u538b\u7f29\u6570\u636e\u65f6\uff0c\u751f\u4ea7\u8005\u548c\u4ee3\u7406\u5c06\u4f7f\u7528\u538b\u7f29\u65b9\u6848\u7684\u9ed8\u8ba4\u5757\u5927\u5c0f (2 x 32 KB) \u800c\u4e0d\u662f 1 KB\uff0c\u4ee5\u63d0\u9ad8\u538b\u7f29\u7387\u3002\u6709\u62a5\u544a\u79f0\uff0c\u4f7f\u7528\u8f83\u5c0f\u5757\u5927\u5c0f\u538b\u7f29\u7684\u6570\u636e\u6bd4\u4f7f\u7528\u8f83\u5927\u5757\u5927\u5c0f\u538b\u7f29\u65f6\u5927 50%\u3002\u5bf9\u4e8e\u5feb\u901f\u7684\u60c5\u51b5\uff0c\u5177\u6709 5000 \u4e2a\u5206\u533a\u7684\u751f\u4ea7\u8005\u5c06\u9700\u8981\u989d\u5916\u7684 315 MB JVM \u5806\u3002 \u540c\u6837\uff0c\u5f53\u4f7f\u7528 gzip \u538b\u7f29\u6570\u636e\u65f6\uff0c\u751f\u4ea7\u8005\u548c\u4ee3\u7406\u5c06\u4f7f\u7528 8 KB \u800c\u4e0d\u662f 1 KB \u4f5c\u4e3a\u7f13\u51b2\u533a\u5927\u5c0f\u3002gzip \u7684\u9ed8\u8ba4\u503c\u8fc7\u4f4e\uff08512 \u5b57\u8282\uff09\u3002 \u4ee3\u7406\u914d\u7f6e max.message.bytes \u73b0\u5728\u9002\u7528\u4e8e\u4e00\u6279\u6d88\u606f\u7684\u603b\u5927\u5c0f\u3002\u4ee5\u524d\uff0c\u8be5\u8bbe\u7f6e\u5e94\u7528\u4e8e\u6279\u91cf\u538b\u7f29\u6d88\u606f\uff0c\u6216\u5355\u72ec\u5e94\u7528\u4e8e\u975e\u538b\u7f29\u6d88\u606f\u3002\u6d88\u606f\u6279\u53ef\u80fd\u4ec5\u5305\u542b\u5355\u4e2a\u6d88\u606f\uff0c\u56e0\u6b64\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5bf9\u5355\u4e2a\u6d88\u606f\u7684\u5927\u5c0f\u7684\u9650\u5236\u4ec5\u901a\u8fc7\u6279\u5904\u7406\u683c\u5f0f\u7684\u5f00\u9500\u6765\u51cf\u5c11\u3002\u7136\u800c\uff0c\u6d88\u606f\u683c\u5f0f\u8f6c\u6362\u6709\u4e00\u4e9b\u5fae\u5999\u7684\u542b\u4e49\uff08\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 \u4e0b\u6587\uff09\u3002 \u53e6\u8bf7\u6ce8\u610f\uff0c\u867d\u7136\u4ee5\u524d\u4ee3\u7406\u5c06\u786e\u4fdd\u6bcf\u4e2a\u63d0\u53d6\u8bf7\u6c42\u4e2d\u81f3\u5c11\u8fd4\u56de\u4e00\u6761\u6d88\u606f\uff08\u65e0\u8bba\u603b\u63d0\u53d6\u5927\u5c0f\u548c\u5206\u533a\u7ea7\u522b\u63d0\u53d6\u5927\u5c0f\u5982\u4f55\uff09\uff0c\u4f46\u73b0\u5728\u76f8\u540c\u7684\u884c\u4e3a\u9002\u7528\u4e8e\u4e00\u6279\u6d88\u606f\u3002 \u9ed8\u8ba4\u542f\u7528 GC \u65e5\u5fd7\u8f6e\u6362\uff0c\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605 KAFKA-3754\u3002 RecordMetadata\u3001MetricName \u548c Cluster \u7c7b\u5df2\u5f03\u7528\u7684\u6784\u9020\u51fd\u6570\u5df2\u88ab\u5220\u9664\u3002 \u901a\u8fc7\u63d0\u4f9b\u7528\u6237\u6807\u5934\u8bfb\u5199\u8bbf\u95ee\u7684\u65b0\u6807\u5934\u63a5\u53e3\u6dfb\u52a0\u4e86\u7528\u6237\u6807\u5934\u652f\u6301\u3002 Headers headers() ProducerRecord \u548c ConsumerRecord \u901a\u8fc7\u65b9\u6cd5\u8c03\u7528\u516c\u5f00\u65b0\u7684 Headers API \u3002 \u5f15\u5165\u4e86 ExtendedSerializer \u548c ExtendedDeserializer \u63a5\u53e3\u6765\u652f\u6301\u6807\u5934\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002\u5982\u679c\u914d\u7f6e\u7684\u5e8f\u5217\u5316\u5668\u548c\u53cd\u5e8f\u5217\u5316\u5668\u4e0d\u662f\u4e0a\u8ff0\u7c7b\uff0c\u5219\u6807\u5934\u5c06\u88ab\u5ffd\u7565\u3002 group.initial.rebalance.delay.ms \u5f15\u5165\u4e86\u65b0\u914d\u7f6e\u3002 GroupCoordinator \u6b64\u914d\u7f6e\u6307\u5b9a\u5ef6\u8fdf\u521d\u59cb\u6d88\u8d39\u8005\u91cd\u65b0\u5e73\u8861\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 \u3002\u5f53\u65b0\u6210\u5458\u52a0\u5165\u8be5\u7ec4\u65f6\uff0c\u91cd\u65b0\u5e73\u8861\u5c06\u8fdb\u4e00\u6b65\u5ef6\u8fdf \u7684\u503c group.initial.rebalance.delay.ms \uff0c\u6700\u591a\u4e3a max.poll.interval.ms \u3002\u9ed8\u8ba4\u503c\u4e3a 3 \u79d2\u3002\u5728\u5f00\u53d1\u548c\u6d4b\u8bd5\u671f\u95f4\uff0c\u53ef\u80fd\u9700\u8981\u5c06\u5176\u8bbe\u7f6e\u4e3a 0\uff0c\u4ee5\u514d\u5ef6\u8fdf\u6d4b\u8bd5\u6267\u884c\u65f6\u95f4\u3002 org.apache.kafka.common.Cluster#partitionsForTopic \uff0c partitionsForNode \u5e76\u4e14 availablePartitionsForTopic \u65b9\u6cd5\u5c06\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5217\u8868 null \uff08\u8fd9\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u4e0d\u597d\u7684\u505a\u6cd5\uff09\uff0c\u4ee5\u9632\u6240\u9700\u4e3b\u9898\u7684\u5143\u6570\u636e\u4e0d\u5b58\u5728\u3002 Streams API \u914d\u7f6e\u53c2\u6570 timestamp.extractor \u3001 key.serde \u548c value.serde \u5df2\u5f03\u7528\u5e76\u5206\u522b\u66ff\u6362\u4e3a default.timestamp.extractor \u3001 default.key.serde \u548c default.value.serde \u3002 \u5bf9\u4e8e Java \u4f7f\u7528\u8005 API \u4e2d\u7684\u504f\u79fb\u63d0\u4ea4\u5931\u8d25\uff0c\u5f53 \u7684\u5b9e\u4f8b\u4f20\u9012\u7ed9\u63d0\u4ea4\u56de\u8c03 commitAsync \u65f6\uff0c\u6211\u4eec\u4e0d\u518d\u516c\u5f00\u6839\u672c\u539f\u56e0\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c RetriableCommitFailedException \u8bf7\u53c2\u9605 KAFKA-5052 \u3002 \u65b0\u534f\u8bae\u7248\u672c KIP-107 \uff1aFetchRequest v5 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 log_start_offset \u5b57\u6bb5\u3002 KIP-107 \uff1aFetchResponse v5 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 log_start_offset \u5b57\u6bb5\u3002 KIP-82 header \uff1aProduceRequest v3\u5728\u6d88\u606f\u534f\u8bae\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b key field\u548c value field\u3002 KIP-82 header \uff1aFetchResponse v5\u5728\u6d88\u606f\u534f\u8bae\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b key \u5b57\u6bb5\u548c value \u5b57\u6bb5\u3002 \u5173\u4e8e Exactly Once \u8bed\u4e49\u7684\u6ce8\u91ca Kafka 0.11.0 \u652f\u6301\u751f\u4ea7\u8005\u4e2d\u7684\u5e42\u7b49\u548c\u4e8b\u52a1\u529f\u80fd\u3002\u5e42\u7b49\u4f20\u9012\u53ef\u786e\u4fdd\u5728\u5355\u4e2a\u751f\u4ea7\u8005\u7684\u751f\u547d\u5468\u671f\u5185\u5c06\u6d88\u606f\u6070\u597d\u4f20\u9012\u5230\u7279\u5b9a\u4e3b\u9898\u5206\u533a\u4e00\u6b21\u3002\u4e8b\u52a1\u4f20\u9012\u5141\u8bb8\u751f\u4ea7\u8005\u5c06\u6570\u636e\u53d1\u9001\u5230\u591a\u4e2a\u5206\u533a\uff0c\u4ee5\u4fbf\u6240\u6709\u6d88\u606f\u90fd\u6210\u529f\u4f20\u9012\uff0c\u6216\u8005\u6ca1\u6709\u6d88\u606f\u6210\u529f\u4f20\u9012\u3002\u8fd9\u4e9b\u529f\u80fd\u5171\u540c\u5b9e\u73b0\u4e86 Kafka \u4e2d\u7684\u201c\u6070\u597d\u4e00\u6b21\u8bed\u4e49\u201d\u3002\u7528\u6237\u6307\u5357\u4e2d\u63d0\u4f9b\u4e86\u6709\u5173\u8fd9\u4e9b\u529f\u80fd\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f46\u4e0b\u9762\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e9b\u6709\u5173\u5728\u5347\u7ea7\u7684\u96c6\u7fa4\u4e2d\u542f\u7528\u8fd9\u4e9b\u529f\u80fd\u7684\u5177\u4f53\u8bf4\u660e\u3002\u8bf7\u6ce8\u610f\uff0c\u542f\u7528 EoS \u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u5e76\u4e14\u5982\u679c\u4e0d\u4f7f\u7528\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u4ee3\u7406\u7684\u884c\u4e3a\u3002 \u53ea\u6709\u65b0\u7684 Java \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u652f\u6301 Exactly Once \u8bed\u4e49\u3002 \u8fd9\u4e9b\u529f\u80fd\u4e3b\u8981\u53d6\u51b3\u4e8e 0.11.0 \u6d88\u606f\u683c\u5f0f \u3002\u5c1d\u8bd5\u5728\u65e7\u683c\u5f0f\u4e0a\u4f7f\u7528\u5b83\u4eec\u5c06\u5bfc\u81f4\u7248\u672c\u4e0d\u53d7\u652f\u6301\u7684\u9519\u8bef\u3002 \u4e8b\u52a1\u72b6\u6001\u5b58\u50a8\u5728\u65b0\u7684\u5185\u90e8\u4e3b\u9898\u4e2d __transaction_state \u3002\u76f4\u5230\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u4f7f\u7528\u4e8b\u52a1\u8bf7\u6c42 API \u65f6\u624d\u4f1a\u521b\u5efa\u6b64\u4e3b\u9898\u3002\u4e0e\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u4e3b\u9898\u7c7b\u4f3c\uff0c\u6709\u51e0\u4e2a\u8bbe\u7f6e\u53ef\u4ee5\u63a7\u5236\u4e3b\u9898\u7684\u914d\u7f6e\u3002\u4f8b\u5982\uff0c transaction.state.log.min.isr \u63a7\u5236\u8be5\u4e3b\u9898\u7684\u6700\u5c0f ISR\u3002\u6709\u5173\u9009\u9879\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u7528\u6237\u6307\u5357\u4e2d\u7684\u914d\u7f6e\u90e8\u5206\u3002 \u5bf9\u4e8e\u5b89\u5168\u96c6\u7fa4\uff0c\u4e8b\u52a1 API \u9700\u8981\u65b0\u7684 ACL\uff0c\u53ef\u4ee5\u4f7f\u7528 bin/kafka-acls.sh . \u5de5\u5177\u3002 Kafka \u4e2d\u7684 EoS \u5f15\u5165\u4e86\u65b0\u7684\u8bf7\u6c42 API \u5e76\u4fee\u6539\u4e86\u591a\u4e2a\u73b0\u6709 API\u3002 \u6709\u5173\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-98 \u5173\u4e8e 0.11.0 \u4e2d\u65b0\u6d88\u606f\u683c\u5f0f\u7684\u8bf4\u660e 0.11.0 \u6d88\u606f\u683c\u5f0f\u5305\u62ec\u51e0\u4e2a\u4e3b\u8981\u589e\u5f3a\u529f\u80fd\uff0c\u4ee5\u4fbf\u652f\u6301\u751f\u4ea7\u8005\u66f4\u597d\u7684\u4f20\u9012\u8bed\u4e49\uff08\u8bf7\u53c2\u9605 KIP-98 \uff09\u548c\u6539\u8fdb\u7684\u590d\u5236\u5bb9\u9519\u80fd\u529b\uff08\u8bf7\u53c2\u9605 KIP-101 \uff09\u3002\u5c3d\u7ba1\u65b0\u683c\u5f0f\u5305\u542b\u66f4\u591a\u4fe1\u606f\u4ee5\u4f7f\u8fd9\u4e9b\u6539\u8fdb\u6210\u4e3a\u53ef\u80fd\uff0c\u4f46\u6211\u4eec\u5df2\u7ecf\u4f7f\u6279\u5904\u7406\u683c\u5f0f\u66f4\u52a0\u9ad8\u6548\u3002\u53ea\u8981\u6bcf\u6279\u6b21\u7684\u6d88\u606f\u6570\u91cf\u8d85\u8fc7 2\uff0c\u60a8\u5c31\u53ef\u4ee5\u9884\u671f\u8f83\u4f4e\u7684\u603b\u4f53\u5f00\u9500\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u8f83\u5c0f\u7684\u6279\u6b21\uff0c\u53ef\u80fd\u4f1a\u5bf9\u6027\u80fd\u4ea7\u751f\u8f83\u5c0f\u7684\u5f71\u54cd\u3002\u8bf7\u53c2\u9605 \u6b64\u5904\uff0c \u4e86\u89e3\u6211\u4eec\u5bf9\u65b0\u6d88\u606f\u683c\u5f0f\u7684\u521d\u59cb\u6027\u80fd\u5206\u6790\u7684\u7ed3\u679c\u3002 \u60a8\u8fd8\u53ef\u4ee5\u5728KIP-98 \u63d0\u6848\u4e2d\u627e\u5230\u6709\u5173\u6d88\u606f\u683c\u5f0f\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f \u3002 \u65b0\u6d88\u606f\u683c\u5f0f\u7684\u663e\u7740\u5dee\u5f02\u4e4b\u4e00\u662f\uff0c\u5373\u4f7f\u672a\u538b\u7f29\u7684\u6d88\u606f\u4e5f\u4f1a\u4f5c\u4e3a\u5355\u4e2a\u6279\u6b21\u5b58\u50a8\u5728\u4e00\u8d77\u3002\u8fd9\u5bf9\u4ee3\u7406\u914d\u7f6e\u6709\u4e00\u4e9b\u5f71\u54cd max.message.bytes \uff0c\u5b83\u9650\u5236\u4e86\u5355\u4e2a\u6279\u6b21\u7684\u5927\u5c0f\u3002\u9996\u5148\uff0c\u5982\u679c\u8f83\u65e7\u7684\u5ba2\u6237\u7aef\u4f7f\u7528\u65e7\u683c\u5f0f\u5411\u4e3b\u9898\u5206\u533a\u751f\u6210\u6d88\u606f\uff0c\u5e76\u4e14\u8fd9\u4e9b\u6d88\u606f\u5404\u81ea\u5c0f\u4e8e max.message.bytes \uff0c\u5219\u5728\u4e0a\u8f6c\u6362\u8fc7\u7a0b\u4e2d\u5c06\u5b83\u4eec\u5408\u5e76\u4e3a\u5355\u4e2a\u6279\u6b21\u540e\uff0c\u4ee3\u7406\u53ef\u80fd\u4ecd\u4f1a\u62d2\u7edd\u5b83\u4eec\u3002\u901a\u5e38\uff0c\u5f53\u5355\u4e2a\u6d88\u606f\u7684\u603b\u5927\u5c0f\u5927\u4e8e \u65f6\uff0c\u5c31\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5 max.message.bytes \u3002\u5bf9\u4e8e\u65e7\u6d88\u8d39\u8005\u8bfb\u53d6\u4ece\u65b0\u683c\u5f0f\u5411\u4e0b\u8f6c\u6362\u7684\u6d88\u606f\uff0c\u4e5f\u4f1a\u4ea7\u751f\u7c7b\u4f3c\u7684\u6548\u679c\uff1a\u5982\u679c\u63d0\u53d6\u5927\u5c0f\u672a\u8bbe\u7f6e\u4e3a\u81f3\u5c11\u4e0e max.message.bytes \uff0c\u5373\u4f7f\u5355\u4e2a\u672a\u538b\u7f29\u6d88\u606f\u5c0f\u4e8e\u914d\u7f6e\u7684\u83b7\u53d6\u5927\u5c0f\uff0c\u6d88\u8d39\u8005\u4e5f\u53ef\u80fd\u65e0\u6cd5\u53d6\u5f97\u8fdb\u5c55\u3002\u6b64\u884c\u4e3a\u4e0d\u4f1a\u5f71\u54cd 0.10.1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u7684 Java \u5ba2\u6237\u7aef\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528\u66f4\u65b0\u7684\u83b7\u53d6\u534f\u8bae\uff0c\u8be5\u534f\u8bae\u786e\u4fdd\u5373\u4f7f\u8d85\u8fc7\u83b7\u53d6\u5927\u5c0f\u4e5f\u53ef\u4ee5\u8fd4\u56de\u81f3\u5c11\u4e00\u6761\u6d88\u606f\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u60a8\u5e94\u8be5\u786e\u4fdd 1) \u751f\u4ea7\u8005\u7684\u6279\u91cf\u5927\u5c0f\u8bbe\u7f6e\u4e0d\u5927\u4e8e max.message.bytes \uff0c2) \u6d88\u8d39\u8005\u7684\u83b7\u53d6\u5927\u5c0f\u8bbe\u7f6e\u81f3\u5c11\u4e0e \u4e00\u6837\u5927 max.message.bytes \u3002 \u5927\u591a\u6570\u5173\u4e8e\u5347\u7ea7\u5230 0.10.0 \u6d88\u606f\u683c\u5f0f \u5bf9\u6027\u80fd\u5f71\u54cd\u7684\u8ba8\u8bba \u4ecd\u7136\u4e0e 0.11.0 \u5347\u7ea7\u6709\u5173\u3002\u8fd9\u4e3b\u8981\u5f71\u54cd\u672a\u4f7f\u7528 TLS \u4fdd\u62a4\u7684\u96c6\u7fa4\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u201c\u96f6\u590d\u5236\u201d\u4f20\u8f93\u5df2\u7ecf\u4e0d\u53ef\u80fd\u3002\u4e3a\u4e86\u907f\u514d\u964d\u9891\u8f6c\u6362\u7684\u6210\u672c\uff0c\u60a8\u5e94\u8be5\u786e\u4fdd\u6d88\u8d39\u8005\u5e94\u7528\u7a0b\u5e8f\u5347\u7ea7\u5230\u6700\u65b0\u7684 0.11.0 \u5ba2\u6237\u7aef\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u65e7\u7684\u6d88\u8d39\u8005\u5728 0.11.0.0 \u4e2d\u5df2\u88ab\u5f03\u7528\uff0c\u56e0\u6b64\u5b83\u4e0d\u652f\u6301\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u3002\u60a8\u5fc5\u987b\u5347\u7ea7\u624d\u80fd\u4f7f\u7528\u65b0\u7684\u6d88\u8d39\u8005\u624d\u80fd\u4f7f\u7528\u65b0\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u800c\u65e0\u9700\u8fdb\u884c\u4e0b\u8f6c\u6362\u7684\u6210\u672c\u3002\u8bf7\u6ce8\u610f\uff0c0.11.0 \u6d88\u8d39\u8005\u652f\u6301\u5411\u540e\u517c\u5bb9 0.10.0 \u4ee3\u7406\u53ca\u5411\u4e0a\u7248\u672c\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728\u4ee3\u7406\u4e4b\u524d\u5148\u5347\u7ea7\u5ba2\u6237\u7aef\u3002 \u4ece 0.8.x\u30010.9.x\u30010.10.0.x \u6216 0.10.1.x \u5347\u7ea7\u5230 0.10.2.0 0.10.2.0 \u8fdb\u884c\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 0.10.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u4ece\u7248\u672c 0.10.2 \u5f00\u59cb\uff0cJava \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u5df2\u7ecf\u83b7\u5f97\u4e86\u4e0e\u65e7\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u7684\u80fd\u529b\u3002\u7248\u672c 0.10.2 \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u7248\u672c 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u7684\u4ee3\u7406\u4f4e\u4e8e 0.10.0\uff0c\u5219\u5fc5\u987b\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u3002\u7248\u672c 0.10.2 \u4ee3\u7406\u652f\u6301 0.8.x \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u5ba2\u6237\u7aef\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u62160.10.1\uff09\u3002 log.message.format.version=CURRENT_KAFKA_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.10.2 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 \u5982\u679c\u60a8\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u662f 0.10.0\uff0c\u8bf7\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.2\uff08\u8fd9\u662f\u65e0\u64cd\u4f5c\uff0c\u56e0\u4e3a 0.10.0\u30010.10.1 \u548c 0.10.2 \u7684\u6d88\u606f\u683c\u5f0f\u76f8\u540c\uff09\u3002\u5982\u679c\u60a8\u4e4b\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u4e0d\u8981\u66f4\u6539 log.message.format.version - \u53ea\u6709\u5728\u6240\u6709\u4f7f\u7528\u8005\u5347\u7ea7\u5230 0.10.0.0 \u6216\u66f4\u9ad8\u7248\u672c\u540e\uff0c\u6b64\u53c2\u6570\u624d\u5e94\u66f4\u6539\u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u5982\u679c\u6b64\u65f6 log.message.format.version \u4ecd\u7136\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u7b49\u5230\u6240\u6709\u6d88\u8d39\u8005\u90fd\u5347\u7ea7\u5230 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.2 \u5e76\u5c06\u5b83\u4eec\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002 \u5347\u7ea7 0.10.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 0.10.2 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.10.2 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u60a8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u60a8\u7684\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u5982\u679c\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\uff08\u5373\u7528\u6237\u5b9e\u73b0\u7684\uff09\u65f6\u95f4\u6233\u63d0\u53d6\u5668\uff0c\u60a8\u5c06\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a\u63a5\u53e3 TimestampExtractor \u5df2\u66f4\u6539\u3002 \u5982\u679c\u60a8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u6807\uff0c\u5219\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a StreamsMetric \u754c\u9762\u5df2\u66f4\u6539\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539\u3002 \u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 0.10.2 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 0.10.2 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.10.2 \u6216 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539 \u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 0.10.2.2 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.10.2.2 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u4e3a\u65b0\u90e8\u7f72\u7684 0.10.2.2 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u505a\u597d\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u53cd\u5f39\u7684\u51c6\u5907\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52300.10.2.0\u62160.10.2.1\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff080.10.2.0 \u6216 0.10.2.1\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b 0.10.2.2 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6dfb\u52a0\u4e86\u65b0\u7684\u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 0.10.2.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 StreamsConfig \u7c7b\u7684\u4e24\u4e2a\u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\u5df2\u66f4\u6539\uff0c\u4ee5\u63d0\u9ad8 Kafka Streams \u5e94\u7528\u7a0b\u5e8f\u7684\u5f39\u6027\u3002\u5185\u90e8 Kafka Streams \u751f\u4ea7\u8005 retries \u9ed8\u8ba4\u503c\u4ece 0 \u66f4\u6539\u4e3a 10\u3002\u5185\u90e8 Kafka Streams \u6d88\u8d39\u8005 max.poll.interval.ms \u9ed8\u8ba4\u503c\u4ece 300000 \u66f4\u6539\u4e3a Integer.MAX_VALUE \u3002 0.10.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 Java \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u5df2\u7ecf\u83b7\u5f97\u4e86\u4e0e\u65e7\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u7684\u80fd\u529b\u3002\u7248\u672c 0.10.2 \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u7248\u672c 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u3002\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u8f83\u65e7\u7684\u4ee3\u7406\u65f6\uff0c\u67d0\u4e9b\u529f\u80fd\u4e0d\u53ef\u7528\u6216\u53d7\u5230\u9650\u5236\u3002 InterruptException \u5982\u679c\u8c03\u7528\u7ebf\u7a0b\u88ab\u4e2d\u65ad\uff0cJava \u4f7f\u7528\u8005\u4e0a\u7684\u591a\u4e2a\u65b9\u6cd5\u73b0\u5728\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u8bf7\u53c2\u9605 KafkaConsumer Javadoc \u4ee5\u83b7\u53d6\u6709\u5173\u6b64\u66f4\u6539\u7684\u66f4\u6df1\u5165\u7684\u8bf4\u660e\u3002 Java \u6d88\u8d39\u8005\u73b0\u5728\u6b63\u5e38\u5173\u95ed\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u8005\u6700\u591a\u7b49\u5f85 30 \u79d2\u624d\u80fd\u5b8c\u6210\u5f85\u5904\u7406\u7684\u8bf7\u6c42\u3002\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5e26\u6709\u8d85\u65f6\u7684\u65b0\u5173\u95ed API KafkaConsumer \u4ee5\u63a7\u5236\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u3002 \u53ef\u4ee5\u901a\u8fc7 --whitelist \u9009\u9879\u5c06\u591a\u4e2a\u4ee5\u9017\u53f7\u5206\u9694\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u4f20\u9012\u7ed9\u65b0 Java \u4f7f\u7528\u8005\u7684 MirrorMaker\u3002\u8fd9\u4f7f\u5f97\u4f7f\u7528\u65e7\u7684 Scala \u6d88\u8d39\u8005\u65f6\u7684\u884c\u4e3a\u4e0e MirrorMaker \u4e00\u81f4\u3002 \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 0.10.2 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.10.2 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 Zookeeper \u4f9d\u8d56\u9879\u5df2\u4ece Streams API \u4e2d\u5220\u9664\u3002Streams API\u73b0\u5728\u4f7f\u7528Kafka\u534f\u8bae\u6765\u7ba1\u7406\u5185\u90e8\u4e3b\u9898\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4fee\u6539Zookeeper\u3002\u8fd9\u6d88\u9664\u4e86\u76f4\u63a5\u8bbf\u95ee Zookeeper \u7684\u6743\u9650\u7684\u9700\u8981\uff0c\u5e76\u4e14\u4e0d\u5e94\u518d\u5728 Streams \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bbe\u7f6e\u201cStreamsConfig.ZOOKEEPER_CONFIG\u201d\u3002\u5982\u679c Kafka \u96c6\u7fa4\u53d7\u5230\u4fdd\u62a4\uff0cStreams \u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u5177\u6709\u521b\u5efa\u65b0\u4e3b\u9898\u6240\u9700\u7684\u5b89\u5168\u6743\u9650\u3002 StreamsConfig \u7c7b\u4e2d\u6dfb\u52a0\u4e86\u51e0\u4e2a\u65b0\u5b57\u6bb5\uff0c\u5305\u62ec\u201csecurity.protocol\u201d\u3001\u201cconnections.max.idle.ms\u201d\u3001\u201cretry.backoff.ms\u201d\u3001\u201creconnect.backoff.ms\u201d\u548c\u201crequest.timeout.ms\u201d\u3002\u7528\u6237\u5e94\u6ce8\u610f\u9ed8\u8ba4\u503c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u8bbe\u7f6e\u3002\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u8003 3.5 Kafka Streams\u914d\u7f6e \u3002 \u65b0\u534f\u8bae\u7248\u672c KIP-88 topics \uff1a\u5982\u679c\u6570\u7ec4\u8bbe\u7f6e\u4e3a \uff0cOffsetFetchRequest v2 \u652f\u6301\u68c0\u7d22\u6240\u6709\u4e3b\u9898\u7684\u504f\u79fb\u91cf null \u3002 KIP-88 \uff1aOffsetFetchResponse v2 \u5f15\u5165\u4e86\u4e00\u4e2a\u9876\u7ea7 error_code \u5b57\u6bb5\u3002 KIP-103 \uff1aUpdateMetadataRequest v3 listener_name \u5411\u6570\u7ec4\u5143\u7d20\u5f15\u5165\u4e86\u4e00\u4e2a\u5b57\u6bb5 end_points \u3002 KIP-108 \uff1aCreateTopicsRequest v1 \u5f15\u5165\u4e86\u4e00\u4e2a validate_only \u5b57\u6bb5\u3002 KIP-108 \uff1aCreateTopicsResponse v1 error_message \u5411\u6570\u7ec4\u5143\u7d20\u5f15\u5165\u4e86\u4e00\u4e2a\u5b57\u6bb5 topic_errors \u3002 \u4ece 0.8.x\u30010.9.x \u6216 0.10.0.X \u5347\u7ea7\u5230 0.10.1.0 0.10.1.0 \u8fdb\u884c\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4f46\u662f\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u6ce8\u610f 0.10.1.0 \u4e2d\u7684\u6f5c\u5728\u91cd\u5927\u66f4\u6539 \u3002 \u6ce8\u610f\uff1a\u7531\u4e8e\u5f15\u5165\u4e86\u65b0\u534f\u8bae\uff0c\u56e0\u6b64\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u975e\u5e38\u91cd\u8981\uff08\u5373 0.10.1.x \u5ba2\u6237\u7aef\u4ec5\u652f\u6301 0.10.1.x \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\uff0c\u800c 0.10.1.x \u4ee3\u7406\u4e5f\u652f\u6301\u65e7\u5ba2\u6237\u7aef\uff09 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2.0\u30010.9.0.0\u62160.10.0.0\uff09\u3002 log.message.format.version=CURRENT_KAFKA_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.10.1.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 \u5982\u679c\u60a8\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u662f 0.10.0\uff0c\u8bf7\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.1\uff08\u8fd9\u662f\u65e0\u64cd\u4f5c\uff0c\u56e0\u4e3a 0.10.0 \u548c 0.10.1 \u7684\u6d88\u606f\u683c\u5f0f\u76f8\u540c\uff09\u3002\u5982\u679c\u60a8\u4e4b\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u4e0d\u8981\u66f4\u6539 log.message.format.version - \u53ea\u6709\u5728\u6240\u6709\u4f7f\u7528\u8005\u5347\u7ea7\u5230 0.10.0.0 \u6216\u66f4\u9ad8\u7248\u672c\u540e\uff0c\u6b64\u53c2\u6570\u624d\u5e94\u66f4\u6539\u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u5982\u679c\u6b64\u65f6 log.message.format.version \u4ecd\u7136\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u7b49\u5230\u6240\u6709\u6d88\u8d39\u8005\u90fd\u5347\u7ea7\u5230 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.1 \u5e76\u5c06\u5b83\u4eec\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002 0.10.1.2 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u6dfb\u52a0\u4e86\u65b0\u7684\u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 0.10.1.0 \u4e2d\u6f5c\u5728\u7684\u91cd\u5927\u53d8\u5316 \u65e5\u5fd7\u4fdd\u7559\u65f6\u95f4\u4e0d\u518d\u57fa\u4e8e\u65e5\u5fd7\u6bb5\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002\u76f8\u53cd\uff0c\u5b83\u5c06\u57fa\u4e8e\u65e5\u5fd7\u6bb5\u4e2d\u6d88\u606f\u7684\u6700\u5927\u65f6\u95f4\u6233\u3002 \u65e5\u5fd7\u6eda\u52a8\u65f6\u95f4\u4e0d\u518d\u53d6\u51b3\u4e8e\u65e5\u5fd7\u6bb5\u521b\u5efa\u65f6\u95f4\u3002\u76f8\u53cd\uff0c\u5b83\u73b0\u5728\u57fa\u4e8e\u6d88\u606f\u4e2d\u7684\u65f6\u95f4\u6233\u3002\u8fdb\u4e00\u6b65\u6765\u8bf4\u3002\u5982\u679c\u6bb5\u4e2d\u7b2c\u4e00\u6761\u6d88\u606f\u7684\u65f6\u95f4\u6233\u4e3aT\uff0c\u5219\u5f53\u65b0\u6d88\u606f\u7684\u65f6\u95f4\u6233\u5927\u4e8e\u6216\u7b49\u4e8eT + log.roll.ms\u65f6\uff0c\u65e5\u5fd7\u5c06\u88ab\u8f6c\u51fa \u7531\u4e8e\u6bcf\u4e2a\u6bb5\u589e\u52a0\u4e86\u65f6\u95f4\u7d22\u5f15\u6587\u4ef6\uff0c0.10.0 \u7684\u6253\u5f00\u6587\u4ef6\u5904\u7406\u7a0b\u5e8f\u5c06\u589e\u52a0\u7ea6 33%\u3002 \u65f6\u95f4\u7d22\u5f15\u548c\u504f\u79fb\u7d22\u5f15\u5171\u4eab\u76f8\u540c\u7684\u7d22\u5f15\u5927\u5c0f\u914d\u7f6e\u3002\u7531\u4e8e\u6bcf\u6b21\u7d22\u5f15\u6761\u76ee\u7684\u5927\u5c0f\u662f\u504f\u79fb\u7d22\u5f15\u6761\u76ee\u5927\u5c0f\u7684 1.5 \u500d\u3002\u7528\u6237\u53ef\u80fd\u9700\u8981\u589e\u52a0 log.index.size.max.bytes \u4ee5\u907f\u514d\u6f5c\u5728\u7684\u9891\u7e41\u65e5\u5fd7\u6eda\u52a8\u3002 \u7531\u4e8e\u7d22\u5f15\u6587\u4ef6\u6570\u91cf\u7684\u589e\u52a0\uff0c\u5728\u4e00\u4e9b\u65e5\u5fd7\u6bb5\u6570\u91cf\u8f83\u5927\uff08\u4f8b\u5982>15K\uff09\u7684broker\u4e0a\uff0cbroker\u542f\u52a8\u671f\u95f4\u7684\u65e5\u5fd7\u52a0\u8f7d\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u66f4\u957f\u3002\u6839\u636e\u6211\u4eec\u7684\u5b9e\u9a8c\uff0c\u5c06 num.recovery.threads.per.data.dir \u8bbe\u7f6e\u4e3a 1 \u53ef\u80fd\u4f1a\u51cf\u5c11\u65e5\u5fd7\u52a0\u8f7d\u65f6\u95f4\u3002 \u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 0.10.1 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 0.10.1 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 0.10.1 \u4e2d\u7684 Streams API \u66f4\u6539 \u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 0.10.1.2 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.10.1.2 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u51c6\u5907\u65b0\u90e8\u7f72\u7684 0.10.1.2 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u53cd\u5f39\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52300.10.1.0\u62160.10.1.1\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff080.10.1.0 \u6216 0.10.1.1\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b 0.10.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u65b0\u7684 Java \u6d88\u8d39\u8005\u4e0d\u518d\u5904\u4e8e\u6d4b\u8bd5\u9636\u6bb5\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u7528\u4e8e\u6240\u6709\u65b0\u5f00\u53d1\u3002\u65e7\u7684 Scala \u4f7f\u7528\u8005\u4ecd\u7136\u53d7\u652f\u6301\uff0c\u4f46\u5b83\u4eec\u5c06\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u4e2d\u5f03\u7528\uff0c\u5e76\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u5220\u9664\u3002 \u5728\u65b0\u6d88\u8d39\u8005\u4e2d\u4f7f\u7528 MirrorMaker \u548c Console Consumer \u7b49\u5de5\u5177\u65f6\u4e0d\u518d\u9700\u8981 --new-consumer /\u5f00\u5173\uff1b --new.consumer \u53ea\u9700\u8981\u901a\u8fc7 Kafka \u4ee3\u7406\u6765\u8fde\u63a5\u5373\u53ef\uff0c\u800c\u4e0d\u662f\u901a\u8fc7 ZooKeeper \u6574\u4f53\u8fdb\u884c\u8fde\u63a5\u3002\u6b64\u5916\uff0c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u4e0e\u65e7\u6d88\u8d39\u8005\u7684\u4f7f\u7528\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u5220\u9664\u3002 Kafka \u96c6\u7fa4\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u96c6\u7fa4 ID \u6765\u552f\u4e00\u6807\u8bc6\u3002\u5f53broker\u5347\u7ea7\u52300.10.1.0\u65f6\uff0c\u5b83\u5c06\u81ea\u52a8\u751f\u6210\u3002\u96c6\u7fa4 ID \u53ef\u901a\u8fc7 kafka.server:type=KafkaServer,name=ClusterId \u6307\u6807\u83b7\u5f97\uff0c\u5b83\u662f\u5143\u6570\u636e\u54cd\u5e94\u7684\u4e00\u90e8\u5206\u3002\u5e8f\u5217\u5316\u5668\u3001\u5ba2\u6237\u7aef\u62e6\u622a\u5668\u548c\u6307\u6807\u62a5\u544a\u5668\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0 ClusterResourceListener \u63a5\u53e3\u6765\u63a5\u6536\u96c6\u7fa4 ID\u3002 BrokerState\u201cRunningAsController\u201d\uff08\u503c 4\uff09\u5df2\u88ab\u5220\u9664\u3002\u7531\u4e8e\u5b58\u5728\u9519\u8bef\uff0c\u4ee3\u7406\u5728\u9000\u51fa\u8be5\u72b6\u6001\u4e4b\u524d\u53ea\u4f1a\u77ed\u6682\u5904\u4e8e\u6b64\u72b6\u6001\uff0c\u56e0\u6b64\u5220\u9664\u7684\u5f71\u54cd\u5e94\u8be5\u5f88\u5c0f\u3002\u68c0\u6d4b\u7ed9\u5b9a\u4ee3\u7406\u662f\u5426\u662f\u63a7\u5236\u5668\u7684\u63a8\u8350\u65b9\u6cd5\u662f\u901a\u8fc7 kafka.controller:type=KafkaController,name=ActiveControllerCount \u6307\u6807\u3002 \u65b0\u7684 Java Consumer \u73b0\u5728\u5141\u8bb8\u7528\u6237\u6309\u5206\u533a\u4e0a\u7684\u65f6\u95f4\u6233\u641c\u7d22\u504f\u79fb\u91cf\u3002 \u65b0\u7684 Java Consumer \u73b0\u5728\u652f\u6301\u540e\u53f0\u7ebf\u7a0b\u7684\u5fc3\u8df3\u3002\u6709\u4e00\u4e2a\u65b0\u914d\u7f6e max.poll.interval.ms \u53ef\u4ee5\u63a7\u5236\u6d88\u8d39\u8005\u4e3b\u52a8\u79bb\u5f00\u7ec4\u4e4b\u524d\u8f6e\u8be2\u8c03\u7528\u4e4b\u95f4\u7684\u6700\u957f\u65f6\u95f4\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a 5 \u5206\u949f\uff09\u3002\u914d\u7f6e\u503c request.timeout.ms \uff08\u9ed8\u8ba4\u4e3a 30 \u79d2\uff09\u5fc5\u987b\u59cb\u7ec8\u5c0f\u4e8e max.poll.interval.ms \uff08\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff09\uff0c\u56e0\u4e3a\u8fd9\u662f\u6d88\u8d39\u8005\u91cd\u65b0\u5e73\u8861\u65f6 JoinGroup \u8bf7\u6c42\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u4e0a\u963b\u585e\u7684\u6700\u957f\u65f6\u95f4\u3002\u6700\u540e\uff0c\u9ed8\u8ba4\u503c session.timeout.ms \u8c03\u6574\u4e3a10\u79d2\uff0c\u9ed8\u8ba4\u503c max.poll.records \u6539\u4e3a500\u3002 \u5f53\u4f7f\u7528\u6388\u6743\u8005\u5e76\u4e14\u7528\u6237\u6ca1\u6709\u4e3b\u9898\u7684\u63cf\u8ff0\u6388\u6743\u65f6\uff0c\u4ee3\u7406\u5c06\u4e0d\u518d\u5411\u8bf7\u6c42\u8fd4\u56de TOPIC_AUTHORIZATION_FAILED \u9519\u8bef\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u6cc4\u6f0f\u4e3b\u9898\u540d\u79f0 \u3002 \u76f8\u53cd\uff0c\u5c06\u8fd4\u56de UNKNOWN_TOPIC_OR_PARTITION \u9519\u8bef\u4ee3\u7801\u3002\u5728\u4f7f\u7528\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u65f6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u8d85\u65f6\u6216\u5ef6\u8fdf\uff0c\u56e0\u4e3a Kafka \u5ba2\u6237\u7aef\u901a\u5e38\u4f1a\u9488\u5bf9\u672a\u77e5\u4e3b\u9898\u9519\u8bef\u81ea\u52a8\u91cd\u8bd5\u3002\u5982\u679c\u60a8\u6000\u7591\u53ef\u80fd\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u60a8\u5e94\u8be5\u67e5\u9605\u5ba2\u6237\u7aef\u65e5\u5fd7\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u83b7\u53d6\u54cd\u5e94\u6709\u5927\u5c0f\u9650\u5236\uff08\u6d88\u8d39\u8005\u4e3a 50 MB\uff0c\u590d\u5236\u4e3a 10 MB\uff09\u3002\u73b0\u6709\u7684\u6bcf\u4e2a\u5206\u533a\u9650\u5236\u4e5f\u9002\u7528\uff08\u4f7f\u7528\u8005\u548c\u590d\u5236\u4e3a 1 MB\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u9650\u5236\u90fd\u4e0d\u662f\u7edd\u5bf9\u6700\u5927\u503c\uff0c\u5982\u4e0b\u4e00\u70b9\u6240\u8ff0\u3002 \u5982\u679c\u53d1\u73b0\u5927\u4e8e\u54cd\u5e94/\u5206\u533a\u5927\u5c0f\u9650\u5236\u7684\u6d88\u606f\uff0c\u4f7f\u7528\u8005\u548c\u526f\u672c\u53ef\u4ee5\u53d6\u5f97\u8fdb\u5c55\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u5982\u679c\u63d0\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u6761\u6d88\u606f\u5927\u4e8e\u5176\u4e2d\u4e00\u4e2a\u6216\u4e24\u4e2a\u9650\u5236\uff0c\u5219\u4ecd\u5c06\u8fd4\u56de\u8be5\u6d88\u606f\u3002 \u6dfb\u52a0\u4e86\u91cd\u8f7d\u7684\u6784\u9020\u51fd\u6570 kafka.api.FetchRequest \uff0c\u5e76 kafka.javaapi.FetchRequest \u5141\u8bb8\u8c03\u7528\u8005\u6307\u5b9a\u5206\u533a\u7684\u987a\u5e8f\uff08\u56e0\u4e3a\u987a\u5e8f\u5728 v3 \u4e2d\u5f88\u91cd\u8981\uff09\u3002\u4ee5\u524d\u5b58\u5728\u7684\u6784\u9020\u51fd\u6570\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u4e14\u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u4f1a\u5bf9\u5206\u533a\u8fdb\u884c\u6d17\u724c\u4ee5\u907f\u514d\u9965\u997f\u95ee\u9898\u3002 \u65b0\u534f\u8bae\u7248\u672c ListOffsetRequest v1\u652f\u6301\u57fa\u4e8e\u65f6\u95f4\u6233\u7684\u7cbe\u786e\u504f\u79fb\u641c\u7d22\u3002 MetadataResponse v2 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u5b57\u6bb5\uff1a\u201ccluster_id\u201d\u3002 FetchRequest v3 \u652f\u6301\u9650\u5236\u54cd\u5e94\u5927\u5c0f\uff08\u9664\u4e86\u73b0\u6709\u7684\u6bcf\u4e2a\u5206\u533a\u9650\u5236\uff09\uff0c\u5982\u679c\u9700\u8981\u53d6\u5f97\u8fdb\u5c55\uff0c\u5b83\u4f1a\u8fd4\u56de\u5927\u4e8e\u9650\u5236\u7684\u6d88\u606f\uff0c\u5e76\u4e14\u8bf7\u6c42\u4e2d\u7684\u5206\u533a\u987a\u5e8f\u73b0\u5728\u5f88\u91cd\u8981\u3002 JoinGroup v1 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u5b57\u6bb5\uff1a\u201crebalance_timeout\u201d\u3002 \u4ece 0.8.x \u6216 0.9.x \u5347\u7ea7\u5230 0.10.0.0 0.10.0.0 \u5177\u6709 \u6f5c\u5728\u7684\u91cd\u5927\u66f4\u6539 \uff08\u8bf7\u5728\u5347\u7ea7\u524d\u67e5\u770b\uff09\uff0c\u5e76\u4e14 \u5347\u7ea7\u540e\u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd \u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u548c\u5347\u7ea7\u540e\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u4e14\u4e0d\u4f1a\u5f71\u54cd\u6027\u80fd\u3002 \u6ce8\u610f\uff1a\u7531\u4e8e\u5f15\u5165\u4e86\u65b0\u534f\u8bae\uff0c\u56e0\u6b64\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u975e\u5e38\u91cd\u8981\u3002 \u7248\u672c 0.9.0.0 \u7684\u5ba2\u6237\u7aef\u6ce8\u610f\u4e8b\u9879\uff1a \u7531\u4e8e 0.9.0.0 \u4e2d\u5f15\u5165\u7684\u9519\u8bef\uff0c\u4f9d\u8d56 ZooKeeper\uff08\u65e7\u7684 Scala \u9ad8\u7ea7 Consumer \u548c MirrorMaker\uff0c\u5982\u679c\u4e0e\u65e7\u7684 Consumer \u4e00\u8d77\u4f7f\u7528\uff09\u7684\u5ba2\u6237\u7aef\u5c06\u65e0\u6cd5\u4e0e 0.10.0.x \u4ee3\u7406\u4e00\u8d77\u4f7f\u7528\u3002\u56e0\u6b64\uff0c\u5728\u4ee3\u7406\u5347\u7ea7\u52300.10.0.x \u4e4b\u524d\uff0c 0.9.0.0\u5ba2\u6237\u7aef\u5e94\u5347\u7ea7\u52300.9.0.1\u3002\u5bf9\u4e8e 0.8.X \u6216 0.9.0.1 \u5ba2\u6237\u7aef\uff0c\u65e0\u9700\u6267\u884c\u6b64\u6b65\u9aa4\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u62160.9.0.0\uff09\u3002 log.message.format.version=CURRENT_KAFKA_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5347\u7ea7broker\u3002\u53ea\u9700\u5c06\u4ee3\u7406\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.10.0.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002\u6ce8\u610f\uff1a\u60a8\u8fd8\u4e0d\u5e94\u8be5\u89e6\u6478 log.message.format.version - \u53ea\u6709\u5728\u6240\u6709\u4f7f\u7528\u8005\u90fd\u5347\u7ea7\u5230 0.10.0.0 \u540e\uff0c\u6b64\u53c2\u6570\u624d\u5e94\u66f4\u6539 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u6240\u6709\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.10.0 \u540e\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 0.10.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002 \u5347\u7ea7\u5230 0.10.0.0 \u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd 0.10.0 \u4e2d\u7684\u6d88\u606f\u683c\u5f0f\u5305\u62ec\u4e00\u4e2a\u65b0\u7684\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528\u538b\u7f29\u6d88\u606f\u7684\u76f8\u5bf9\u504f\u79fb\u91cf\u3002\u78c1\u76d8\u6d88\u606f\u683c\u5f0f\u53ef\u4ee5\u901a\u8fc7 server.properties \u6587\u4ef6\u4e2d\u7684 log.message.format.version \u914d\u7f6e\u3002\u9ed8\u8ba4\u78c1\u76d8\u6d88\u606f\u683c\u5f0f\u4e3a 0.10.0\u3002\u5982\u679c\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u662f 0.10.0.0 \u4e4b\u524d\u7684\u7248\u672c\uff0c\u5219\u5b83\u53ea\u80fd\u7406\u89e3 0.10.0 \u4e4b\u524d\u7684\u6d88\u606f\u683c\u5f0f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4ee3\u7406\u80fd\u591f\u5c06\u6d88\u606f\u4ece 0.10.0 \u683c\u5f0f\u8f6c\u6362\u4e3a\u8f83\u65e9\u7684\u683c\u5f0f\uff0c\u7136\u540e\u518d\u5c06\u54cd\u5e94\u53d1\u9001\u7ed9\u65e7\u7248\u672c\u7684\u4f7f\u7528\u8005\u3002\u4f46\u662f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7ecf\u7eaa\u5546\u4e0d\u80fd\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u3002Kafka \u793e\u533a\u5173\u4e8e\u6027\u80fd\u5f71\u54cd\u7684\u62a5\u544a\u663e\u793a\uff0c\u5347\u7ea7\u540e CPU \u5229\u7528\u7387\u4ece\u4e4b\u524d\u7684 20% \u4e0a\u5347\u5230 100%\uff0c\u8fd9\u8feb\u4f7f\u6240\u6709\u5ba2\u6237\u7aef\u7acb\u5373\u5347\u7ea7\u4ee5\u4f7f\u6027\u80fd\u6062\u590d\u6b63\u5e38\u3002\u4e3a\u4e86\u907f\u514d\u5728\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.10.0.0 \u4e4b\u524d\u53d1\u751f\u6b64\u7c7b\u6d88\u606f\u8f6c\u6362\uff0c\u53ef\u4ee5\u5728\u5c06\u4ee3\u7406\u5347\u7ea7\u5230 0.10.0.0 \u65f6\u5c06 log.message.format.version \u8bbe\u7f6e\u4e3a 0.8.2 \u6216 0.9.0\u3002\u8fd9\u6837\uff0cbroker\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u7684\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u5c06\u4ee3\u7406\u5347\u7ea7\u5230 0.10.0.0 \u65f6\uff0c\u5c06 message.format.version \u66f4\u6539\u4e3a 0.8.2 \u6216 0.9.0\u3002\u8fd9\u6837\uff0cbroker\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u7684\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u5c06\u4ee3\u7406\u5347\u7ea7\u5230 0.10.0.0 \u65f6\uff0c\u5c06 message.format.version \u66f4\u6539\u4e3a 0.8.2 \u6216 0.9.0\u3002\u8fd9\u6837\uff0cbroker\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u7684\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002Broker \u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002Broker \u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002 \u5bf9\u4e8e\u5347\u7ea7\u5230 0.10.0.0 \u7684\u5ba2\u6237\u7aef\uff0c\u4e0d\u4f1a\u4ea7\u751f\u6027\u80fd\u5f71\u54cd\u3002 \u6ce8\u610f\uff1a \u901a\u8fc7\u8bbe\u7f6e\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u53ef\u4ee5\u8bc1\u660e\u6240\u6709\u73b0\u6709\u6d88\u606f\u5747\u7b49\u4e8e\u6216\u4f4e\u4e8e\u8be5\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5426\u5219 0.10.0.0 \u4e4b\u524d\u7684\u6d88\u8d39\u8005\u53ef\u80fd\u4f1a\u5d29\u6e83\u3002\u7279\u522b\u662f\uff0c\u5728\u6d88\u606f\u683c\u5f0f\u8bbe\u7f6e\u4e3a 0.10.0 \u540e\uff0c\u4e0d\u5e94\u5c06\u5176\u66f4\u6539\u56de\u8f83\u65e9\u7684\u683c\u5f0f\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u7834\u574f 0.10.0.0 \u4e4b\u524d\u7248\u672c\u7684\u6d88\u8d39\u8005\u3002 \u6ce8\u610f\uff1a \u7531\u4e8e\u6bcf\u6761\u6d88\u606f\u4e2d\u5f15\u5165\u4e86\u989d\u5916\u7684\u65f6\u95f4\u6233\uff0c\u53d1\u9001\u5c0f\u6d88\u606f\u7684\u751f\u4ea7\u8005\u53ef\u80fd\u4f1a\u56e0\u4e3a\u5f00\u9500\u589e\u52a0\u800c\u770b\u5230\u6d88\u606f\u541e\u5410\u91cf\u4e0b\u964d\u3002\u540c\u6837\uff0c\u590d\u5236\u73b0\u5728\u6bcf\u6761\u6d88\u606f\u989d\u5916\u4f20\u8f93 8 \u4e2a\u5b57\u8282\u3002\u5982\u679c\u60a8\u7684\u8fd0\u884c\u63a5\u8fd1\u96c6\u7fa4\u7684\u7f51\u7edc\u5bb9\u91cf\uff0c\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7f51\u5361\u4e0d\u582a\u91cd\u8d1f\uff0c\u5e76\u56e0\u8fc7\u8f7d\u800c\u51fa\u73b0\u6545\u969c\u548c\u6027\u80fd\u95ee\u9898\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u5728\u751f\u4ea7\u8005\u4e0a\u542f\u7528\u4e86\u538b\u7f29\uff0c\u60a8\u53ef\u80fd\u4f1a\u6ce8\u610f\u5230\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u751f\u4ea7\u8005\u541e\u5410\u91cf\u964d\u4f4e\u548c/\u6216\u4ee3\u7406\u4e0a\u7684\u538b\u7f29\u7387\u964d\u4f4e\u3002\u63a5\u6536\u538b\u7f29\u6d88\u606f\u65f6\uff0c0.10.0 \u4ee3\u7406\u4f1a\u907f\u514d\u91cd\u65b0\u538b\u7f29\u6d88\u606f\uff0c\u8fd9\u901a\u5e38\u4f1a\u51cf\u5c11\u5ef6\u8fdf\u5e76\u63d0\u9ad8\u541e\u5410\u91cf\u3002\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u53ef\u80fd\u4f1a\u51cf\u5c11\u751f\u4ea7\u8005\u7684\u6279\u5904\u7406\u5927\u5c0f\uff0c\u4ece\u800c\u5bfc\u81f4\u541e\u5410\u91cf\u4e0b\u964d\u3002\u5982\u679c\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u7528\u6237\u53ef\u4ee5\u8c03\u6574\u751f\u4ea7\u8005\u7684linger.ms\u548cbatch.size\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u541e\u5410\u91cf\u3002\u6b64\u5916\uff0csnappy \u7528\u4e8e\u538b\u7f29\u6d88\u606f\u7684\u751f\u4ea7\u8005\u7f13\u51b2\u533a\u5c0f\u4e8e\u4ee3\u7406\u4f7f\u7528\u7684\u7f13\u51b2\u533a\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bf9\u78c1\u76d8\u4e0a\u200b\u200b\u6d88\u606f\u7684\u538b\u7f29\u7387\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002\u6211\u4eec\u6253\u7b97\u5728\u672a\u6765\u7684 Kafka \u7248\u672c\u4e2d\u5bf9\u6b64\u8fdb\u884c\u914d\u7f6e\u3002 0.10.0.0 \u4e2d\u6f5c\u5728\u7684\u91cd\u5927\u53d8\u5316 \u4eceKafka 0.10.0.0\u5f00\u59cb\uff0cKafka\u4e2d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4ee5Kafka\u7248\u672c\u8868\u793a\u3002\u4f8b\u5982\uff0c\u6d88\u606f\u683c\u5f0f0.9.0\u662f\u6307Kafka 0.9.0\u652f\u6301\u7684\u6700\u9ad8\u6d88\u606f\u7248\u672c\u3002 \u5df2\u5f15\u5165\u6d88\u606f\u683c\u5f0f 0.10.0\uff0c\u5e76\u4e14\u9ed8\u8ba4\u4f7f\u7528\u8be5\u683c\u5f0f\u3002\u5b83\u5728\u6d88\u606f\u4e2d\u5305\u542b\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u5e76\u4e14\u76f8\u5bf9\u504f\u79fb\u91cf\u7528\u4e8e\u538b\u7f29\u6d88\u606f\u3002 \u5f15\u5165ProduceRequest/Response v2\uff0c\u9ed8\u8ba4\u652f\u6301\u6d88\u606f\u683c\u5f0f0.10.0 \u5f15\u5165FetchRequest/Response v2\uff0c\u9ed8\u8ba4\u652f\u6301\u6d88\u606f\u683c\u5f0f0.10.0 MessageFormatter \u63a5\u53e3\u5df2\u66f4\u6539 def writeTo(key: Array[Byte], value: Array[Byte], output: PrintStream) \u4e3a def writeTo(consumerRecord: ConsumerRecord[Array[Byte], Array[Byte]], output: PrintStream) MessageReader \u63a5\u53e3\u5df2\u66f4\u6539 def readMessage(): KeyedMessage[Array[Byte], Array[Byte]] \u4e3a def readMessage(): ProducerRecord[Array[Byte], Array[Byte]] MessageFormatter \u7684\u5305\u5df2\u66f4\u6539 kafka.tools \u4e3a kafka.common MessageReader \u7684\u5305\u5df2\u66f4\u6539 kafka.tools \u4e3a kafka.common MirrorMakerMessageHandler \u4e0d\u518d\u516c\u5f00\u8be5 handle(record: MessageAndMetadata[Array[Byte], Array[Byte]]) \u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4ece\u672a\u88ab\u8c03\u7528\u3002 0.7 KafkaMigrationTool \u4e0d\u518d\u4e0e Kafka \u4e00\u8d77\u6253\u5305\u3002\u5982\u679c\u60a8\u9700\u8981\u4ece0.7\u8fc1\u79fb\u52300.10.0\uff0c\u8bf7\u5148\u8fc1\u79fb\u52300.8\uff0c\u7136\u540e\u6309\u7167\u8bb0\u5f55\u7684\u5347\u7ea7\u6d41\u7a0b\u4ece0.8\u5347\u7ea7\u52300.10.0\u3002 \u65b0\u7684\u6d88\u8d39\u8005\u5df2\u6807\u51c6\u5316\u5176 API\uff0c\u4ee5\u63a5\u53d7 java.util.Collection \u4f5c\u4e3a\u65b9\u6cd5\u53c2\u6570\u7684\u5e8f\u5217\u7c7b\u578b\u3002\u73b0\u6709\u4ee3\u7801\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u624d\u80fd\u4e0e 0.10.0 \u5ba2\u6237\u7aef\u5e93\u4e00\u8d77\u4f7f\u7528\u3002 LZ4 \u538b\u7f29\u6d88\u606f\u5904\u7406\u5df2\u66f4\u6539\u4e3a\u4f7f\u7528\u53ef\u4e92\u64cd\u4f5c\u7684\u5e27\u89c4\u8303 (LZ4f v1.5.1)\u3002\u4e3a\u4e86\u4fdd\u6301\u4e0e\u65e7\u5ba2\u6237\u7aef\u7684\u517c\u5bb9\u6027\uff0c\u6b64\u66f4\u6539\u4ec5\u9002\u7528\u4e8e\u6d88\u606f\u683c\u5f0f 0.10.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002\u4f7f\u7528 v0/v1\uff08\u6d88\u606f\u683c\u5f0f 0.9.0\uff09\u751f\u6210/\u83b7\u53d6 LZ4 \u538b\u7f29\u6d88\u606f\u7684\u5ba2\u6237\u7aef\u5e94\u7ee7\u7eed\u4f7f\u7528 0.9.0 \u5e27\u5b9e\u73b0\u3002\u4f7f\u7528 Produce/Fetch \u534f\u8bae v2 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u5ba2\u6237\u7aef\u5e94\u4f7f\u7528\u53ef\u4e92\u64cd\u4f5c\u7684 LZ4f \u5e27\u3002\u53ef\u4e92\u64cd\u4f5c\u7684 LZ4 \u5e93\u5217\u8868\u4f4d\u4e8e https://www.lz4.org/ 0.10.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u4ece Kafka 0.10.0.0 \u5f00\u59cb\uff0c\u4e00\u4e2a\u540d\u4e3aKafka Streams \u7684\u65b0\u5ba2\u6237\u7aef\u5e93\u53ef\u7528\u4e8e\u5bf9 Kafka \u4e3b\u9898\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u6d41\u5904\u7406\u3002\u7531\u4e8e\u4e0a\u8ff0\u6d88\u606f\u683c\u5f0f\u7684\u53d8\u5316\uff0c\u8fd9\u4e2a\u65b0\u7684\u5ba2\u6237\u7aef\u5e93\u4ec5\u9002\u7528\u4e8e 0.10.x \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb Streams \u6587\u6863 \u3002 receive.buffer.bytes \u5bf9\u4e8e\u65b0\u6d88\u8d39\u8005\u6765\u8bf4\uff0c\u914d\u7f6e\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u73b0\u5728\u662f 64K\u3002 \u65b0\u7684\u6d88\u8d39\u8005\u73b0\u5728\u516c\u5f00\u914d\u7f6e\u53c2\u6570 exclude.internal.topics \u4ee5\u9650\u5236\u5185\u90e8\u4e3b\u9898\uff08\u4f8b\u5982\u6d88\u8d39\u8005\u504f\u79fb\u4e3b\u9898\uff09\u610f\u5916\u5730\u5305\u542b\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u8ba2\u9605\u4e2d\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u542f\u7528\u7684\u3002 \u65e7\u7684 Scala \u751f\u6210\u5668\u5df2\u88ab\u5f03\u7528\u3002\u7528\u6237\u5e94\u5c3d\u5feb\u5c06\u5176\u4ee3\u7801\u8fc1\u79fb\u5230 kafka-clients JAR \u4e2d\u5305\u542b\u7684 Java \u751f\u4ea7\u8005\u3002 \u65b0\u7684\u6d88\u8d39\u8005 API \u5df2\u6807\u8bb0\u4e3a\u7a33\u5b9a\u3002 \u4ece 0.8.0\u30010.8.1.X \u6216 0.8.2.X \u5347\u7ea7\u5230 0.9.0.0 0.9.0.0 \u5177\u6709 \u6f5c\u5728\u7684\u91cd\u5927\u66f4\u6539 \uff08\u8bf7\u5728\u5347\u7ea7\u524d\u67e5\u770b\uff09\u4ee5\u53ca\u4e0e\u5148\u524d\u7248\u672c\u76f8\u6bd4\u7684\u7ecf\u7eaa\u5546\u95f4\u534f\u8bae\u66f4\u6539\u3002\u8fd9\u610f\u5473\u7740\u5347\u7ea7\u540e\u7684\u7ecf\u7eaa\u5546\u548c\u5ba2\u6237\u7aef\u53ef\u80fd\u4e0e\u65e7\u7248\u672c\u4e0d\u517c\u5bb9\u3002\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u975e\u5e38\u91cd\u8981\u3002\u5982\u679c\u60a8\u4f7f\u7528 MirrorMaker\uff0c\u4e0b\u6e38\u96c6\u7fa4\u4e5f\u5e94\u8be5\u9996\u5148\u5347\u7ea7\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=0.8.2.X \u5347\u7ea7broker\u3002\u53ea\u9700\u5c06\u4ee3\u7406\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.9.0.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u751f\u6548 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002 0.9.0.0 \u4e2d\u6f5c\u5728\u7684\u91cd\u5927\u53d8\u5316 \u4e0d\u518d\u652f\u6301 Java 1.6\u3002 \u4e0d\u518d\u652f\u6301 Scala 2.9\u3002 1000 \u4ee5\u4e0a\u7684\u7ecf\u7eaa\u5546 ID \u73b0\u5728\u9ed8\u8ba4\u4fdd\u7559\u4e3a\u81ea\u52a8\u5206\u914d\u7684\u7ecf\u7eaa\u5546 ID\u3002\u5982\u679c\u60a8\u7684\u96c6\u7fa4\u7684\u73b0\u6709\u4ee3\u7406 ID \u9ad8\u4e8e\u8be5\u9608\u503c\uff0c\u8bf7\u786e\u4fdd\u76f8\u5e94\u5730\u589e\u52a0served.broker.max.id \u4ee3\u7406\u914d\u7f6e\u5c5e\u6027\u3002 \u914d\u7f6e\u53c2\u6570replica.lag.max.messages\u5df2\u5220\u9664\u3002\u5206\u533a\u9886\u5bfc\u8005\u5728\u51b3\u5b9a\u54ea\u4e9b\u526f\u672c\u540c\u6b65\u65f6\u5c06\u4e0d\u518d\u8003\u8651\u6ede\u540e\u6d88\u606f\u7684\u6570\u91cf\u3002 \u914d\u7f6e\u53c2\u6570replica.lag.time.max.ms\u73b0\u5728\u4e0d\u4ec5\u6307\u81ea\u4e0a\u6b21\u4ece\u526f\u672c\u83b7\u53d6\u8bf7\u6c42\u4ee5\u6765\u7ecf\u8fc7\u7684\u65f6\u95f4\uff0c\u8fd8\u6307\u81ea\u526f\u672c\u4e0a\u6b21\u8d76\u4e0a\u4ee5\u6765\u7684\u65f6\u95f4\u3002\u4ecd\u5728\u4ece\u9886\u5bfc\u8005\u83b7\u53d6\u6d88\u606f\u4f46\u672a\u8d76\u4e0areplica.lag.time.max.ms \u4e2d\u6700\u65b0\u6d88\u606f\u7684\u526f\u672c\u5c06\u88ab\u89c6\u4e3a\u4e0d\u540c\u6b65\u3002 \u538b\u7f29\u4e3b\u9898\u4e0d\u518d\u63a5\u53d7\u6ca1\u6709\u5bc6\u94a5\u7684\u6d88\u606f\uff0c\u5982\u679c\u5c1d\u8bd5\u8fd9\u6837\u505a\uff0c\u751f\u4ea7\u8005\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u5728 0.8.x \u4e2d\uff0c\u6ca1\u6709 key \u7684\u6d88\u606f\u5c06\u5bfc\u81f4\u65e5\u5fd7\u538b\u7f29\u7ebf\u7a0b\u968f\u540e\u62b1\u6028\u5e76\u9000\u51fa\uff08\u5e76\u505c\u6b62\u538b\u7f29\u6240\u6709\u538b\u7f29\u4e3b\u9898\uff09\u3002 MirrorMaker \u4e0d\u518d\u652f\u6301\u591a\u4e2a\u76ee\u6807\u96c6\u7fa4\u3002\u56e0\u6b64\uff0c\u5b83\u53ea\u63a5\u53d7\u5355\u4e2a --consumer.config \u53c2\u6570\u3002\u8981\u955c\u50cf\u591a\u4e2a\u6e90\u96c6\u7fa4\uff0c\u6bcf\u4e2a\u6e90\u96c6\u7fa4\u81f3\u5c11\u9700\u8981\u4e00\u4e2a MirrorMaker \u5b9e\u4f8b\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u6709\u81ea\u5df1\u7684\u4f7f\u7528\u8005\u914d\u7f6e\u3002 \u6253\u5305\u5728org.apache.kafka.clients.tools.* \u4e0b\u7684\u5de5\u5177\u5df2\u79fb\u81f3 org.apache.kafka.tools.* \u3002\u6240\u6709\u5305\u542b\u7684\u811a\u672c\u4ecd\u5c06\u7167\u5e38\u8fd0\u884c\uff0c\u53ea\u6709\u76f4\u63a5\u5bfc\u5165\u8fd9\u4e9b\u7c7b\u7684\u81ea\u5b9a\u4e49\u4ee3\u7801\u624d\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 kafka-run-class.sh \u4e2d\u7684\u9ed8\u8ba4 Kafka JVM \u6027\u80fd\u9009\u9879 (KAFKA_JVM_PERFORMANCE_OPTS) \u5df2\u66f4\u6539\u3002 kafka-topics.sh \u811a\u672c (kafka.admin.TopicCommand) \u73b0\u5728\u5728\u5931\u8d25\u65f6\u4ee5\u975e\u96f6\u9000\u51fa\u4ee3\u7801\u9000\u51fa\u3002 \u5f53\u4e3b\u9898\u540d\u79f0\u56e0\u4f7f\u7528\u201c.\u201d\u800c\u5b58\u5728\u6307\u6807\u51b2\u7a81\u98ce\u9669\u65f6\uff0ckafka-topics.sh \u811a\u672c (kafka.admin.TopicCommand) \u73b0\u5728\u5c06\u6253\u5370\u8b66\u544a \u6216\u4e3b\u9898\u540d\u79f0\u4e2d\u7684\u201c_\u201d\uff0c\u5e76\u4e14\u5728\u5b9e\u9645\u51b2\u7a81\u7684\u60c5\u51b5\u4e0b\u51fa\u9519\u3002 kafka-console- Producer.sh\u811a\u672c\uff08kafka.tools.ConsoleProducer\uff09\u5c06\u9ed8\u8ba4\u4f7f\u7528Java\u751f\u4ea7\u8005\u800c\u4e0d\u662f\u65e7\u7684Scala\u751f\u4ea7\u8005\uff0c\u7528\u6237\u5fc5\u987b\u6307\u5b9a\u201cold- Producer\u201d\u624d\u80fd\u4f7f\u7528\u65e7\u751f\u4ea7\u8005\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u547d\u4ee4\u884c\u5de5\u5177\u90fd\u4f1a\u5c06\u6240\u6709\u65e5\u5fd7\u6d88\u606f\u6253\u5370\u5230 stderr \u800c\u4e0d\u662f stdout\u3002 0.9.0.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u53ef\u4ee5\u901a\u8fc7\u5c06broker.id. Generation.enable \u8bbe\u7f6e\u4e3a false \u6765\u7981\u7528\u65b0\u7684\u4ee3\u7406 ID \u751f\u6210\u529f\u80fd\u3002 \u914d\u7f6e\u53c2\u6570 log.cleaner.enable \u73b0\u5728\u9ed8\u8ba4\u4e3a true\u3002\u8fd9\u610f\u5473\u7740\u5177\u6709 cleanup.policy=compact \u7684\u4e3b\u9898\u73b0\u5728\u5c06\u9ed8\u8ba4\u8fdb\u884c\u538b\u7f29\uff0c\u5e76\u4e14 128 MB \u7684\u5806\u5c06\u901a\u8fc7 log.cleaner.dedupe.buffer.size \u5206\u914d\u7ed9\u6e05\u7406\u8fdb\u7a0b\u3002\u60a8\u53ef\u80fd\u9700\u8981\u6839\u636e\u538b\u7f29\u4e3b\u9898\u7684\u4f7f\u7528\u60c5\u51b5\u67e5\u770b log.cleaner.dedupe.buffer.size \u548c\u5176\u4ed6 log.cleaner \u914d\u7f6e\u503c\u3002 \u65b0\u6d88\u8d39\u8005\u7684\u914d\u7f6e\u53c2\u6570 fetch.min.bytes \u7684\u9ed8\u8ba4\u503c\u73b0\u5728\u9ed8\u8ba4\u4e3a 1\u3002 0.9.0.0 \u4e2d\u7684\u5f03\u7528 \u5df2\u5f03\u7528\u4ece kafka-topics.sh \u811a\u672c (kafka.admin.TopicCommand) \u66f4\u6539\u4e3b\u9898\u914d\u7f6e\u3002\u4eca\u540e\uff0c\u8bf7\u4f7f\u7528 kafka-configs.sh \u811a\u672c (kafka.admin.ConfigCommand) \u6765\u5b9e\u73b0\u6b64\u529f\u80fd\u3002 kafka-consumer-offset-checker.sh (kafka.tools.ConsumerOffsetChecker) \u5df2\u88ab\u5f03\u7528\u3002\u4eca\u540e\uff0c\u8bf7\u4f7f\u7528 kafka-consumer-groups.sh (kafka.admin.ConsumerGroupCommand) \u6765\u5b9e\u73b0\u6b64\u529f\u80fd\u3002 kafka.tools.ProducerPerformance \u7c7b\u5df2\u88ab\u5f03\u7528\u3002\u4eca\u540e\uff0c\u8bf7\u4f7f\u7528 org.apache.kafka.tools.ProducerPerformance \u6765\u5b9e\u73b0\u6b64\u529f\u80fd\uff08kafka- Producer-perf-test.sh \u4e5f\u5c06\u66f4\u6539\u4e3a\u4f7f\u7528\u65b0\u7c7b\uff09\u3002 \u751f\u4ea7\u8005\u914d\u7f6e block.on.buffer.full \u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u672a\u6765\u7248\u672c\u4e2d\u5220\u9664\u3002\u76ee\u524d\u5176\u9ed8\u8ba4\u503c\u5df2\u66f4\u6539\u4e3a false\u3002KafkaProducer\u5c06\u4e0d\u518d\u629b\u51faBufferExhaustedException\uff0c\u800c\u662f\u4f7f\u7528max.block.ms\u503c\u8fdb\u884c\u963b\u585e\uff0c\u4e4b\u540e\u5b83\u5c06\u629b\u51faTimeoutException\u3002\u5982\u679c block.on.buffer.full \u5c5e\u6027\u663e\u5f0f\u8bbe\u7f6e\u4e3a true\uff0c\u5219\u4f1a\u5c06 max.block.ms \u8bbe\u7f6e\u4e3a Long.MAX_VALUE\uff0c\u5e76\u4e14metadata.fetch.timeout.ms \u5c06\u4e0d\u4f1a\u88ab\u9075\u5b88 \u4ece0.8.1\u5347\u7ea7\u52300.8.2 0.8.2 \u4e0e 0.8.1 \u5b8c\u5168\u517c\u5bb9\u3002\u53ea\u9700\u5c06\u5176\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5bf9\u4e00\u4e2a\u4ee3\u7406\u8fdb\u884c\u5347\u7ea7\u3002 \u4ece0.8.0\u5347\u7ea7\u52300.8.1 0.8.1 \u4e0e 0.8 \u5b8c\u5168\u517c\u5bb9\u3002\u53ea\u9700\u5c06\u5176\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5bf9\u4e00\u4e2a\u4ee3\u7406\u8fdb\u884c\u5347\u7ea7\u3002 \u4ece0.7\u5347\u7ea7 \u7248\u672c 0.7 \u4e0e\u8f83\u65b0\u7684\u7248\u672c\u4e0d\u517c\u5bb9\u3002\u4e3a\u4e86\u6dfb\u52a0\u590d\u5236\uff080.7 \u4e2d\u7f3a\u5c11\uff09\uff0c\u5bf9 API\u3001ZooKeeper \u6570\u636e\u7ed3\u6784\u3001\u534f\u8bae\u548c\u914d\u7f6e\u8fdb\u884c\u4e86\u91cd\u5927\u66f4\u6539\u3002\u4ece0.7\u5347\u7ea7\u5230\u66f4\u9ad8\u7248\u672c\u9700\u8981 \u4e13\u95e8\u7684 \u8fc1\u79fb\u5de5\u5177\u3002\u6b64\u8fc1\u79fb\u65e0\u9700\u505c\u673a\u5373\u53ef\u5b8c\u6210\u3002","title":"1. \u5165\u95e8"},{"location":"1/#1","text":"","title":"1. \u5165\u95e8"},{"location":"1/#11","text":"","title":"1.1 \u7b80\u4ecb"},{"location":"1/#_1","text":"\u4e8b\u4ef6\u6d41\u76f8\u5f53\u4e8e\u4eba\u4f53\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u7684\u6570\u5b57\u5316\u3002\u5b83\u662f\u201c\u6c38\u8fdc\u5728\u7ebf\u201d\u4e16\u754c\u7684\u6280\u672f\u57fa\u7840\uff0c\u5728\u8fd9\u4e2a\u4e16\u754c\u4e2d\uff0c\u4f01\u4e1a\u8d8a\u6765\u8d8a\u591a\u5730\u7531\u8f6f\u4ef6\u5b9a\u4e49\u548c\u81ea\u52a8\u5316\uff0c\u8f6f\u4ef6\u7684\u7528\u6237\u66f4\u591a\u5730\u662f\u8f6f\u4ef6\u3002 \u4ece\u6280\u672f\u4e0a\u8bb2\uff0c\u4e8b\u4ef6\u6d41\u662f\u4ee5\u4e8b\u4ef6\u6d41\u7684\u5f62\u5f0f\u4ece\u6570\u636e\u5e93\u3001\u4f20\u611f\u5668\u3001\u79fb\u52a8\u8bbe\u5907\u3001\u4e91\u670d\u52a1\u548c\u8f6f\u4ef6\u5e94\u7528\u7a0b\u5e8f\u7b49\u4e8b\u4ef6\u6e90\u5b9e\u65f6\u6355\u83b7\u6570\u636e\u7684\u5b9e\u8df5\uff1b\u6301\u4e45\u5b58\u50a8\u8fd9\u4e9b\u4e8b\u4ef6\u6d41\u4ee5\u4f9b\u4ee5\u540e\u68c0\u7d22\uff1b\u5b9e\u65f6\u548c\u56de\u987e\u6027\u5730\u64cd\u4f5c\u3001\u5904\u7406\u4e8b\u4ef6\u6d41\u5e76\u5bf9\u5176\u505a\u51fa\u53cd\u5e94\uff1b\u5e76\u6839\u636e\u9700\u8981\u5c06\u4e8b\u4ef6\u6d41\u8def\u7531\u5230\u4e0d\u540c\u7684\u76ee\u6807\u6280\u672f\u3002\u56e0\u6b64\uff0c\u4e8b\u4ef6\u6d41\u53ef\u786e\u4fdd\u6570\u636e\u7684\u8fde\u7eed\u6d41\u52a8\u548c\u89e3\u91ca\uff0c\u4ee5\u4fbf\u6b63\u786e\u7684\u4fe1\u606f\u5728\u6b63\u786e\u7684\u65f6\u95f4\u51fa\u73b0\u5728\u6b63\u786e\u7684\u5730\u70b9\u3002","title":"\u4ec0\u4e48\u662f\u4e8b\u4ef6\u6d41\uff1f"},{"location":"1/#_2","text":"\u4e8b\u4ef6\u6d41\u9002\u7528\u4e8e \u4f17\u591a\u884c\u4e1a\u548c\u7ec4\u7ec7\u7684 \u5404\u79cd\u7528\u4f8b \u3002\u5b83\u7684\u8bb8\u591a\u4f8b\u5b50\u5305\u62ec\uff1a \u5b9e\u65f6\u5904\u7406\u652f\u4ed8\u548c\u91d1\u878d\u4ea4\u6613\uff0c\u4f8b\u5982\u5728\u8bc1\u5238\u4ea4\u6613\u6240\u3001\u94f6\u884c\u548c\u4fdd\u9669\u4e2d\u3002 \u5b9e\u65f6\u8ddf\u8e2a\u548c\u76d1\u63a7\u6c7d\u8f66\u3001\u5361\u8f66\u3001\u8f66\u961f\u548c\u8d27\u8fd0\uff0c\u4f8b\u5982\u7269\u6d41\u548c\u6c7d\u8f66\u884c\u4e1a\u3002 \u6301\u7eed\u6355\u83b7\u548c\u5206\u6790\u6765\u81ea\u7269\u8054\u7f51\u8bbe\u5907\u6216\u5176\u4ed6\u8bbe\u5907\uff08\u4f8b\u5982\u5de5\u5382\u548c\u98ce\u7535\u573a\uff09\u7684\u4f20\u611f\u5668\u6570\u636e\u3002 \u6536\u96c6\u5ba2\u6237\u4e92\u52a8\u548c\u8ba2\u5355\u5e76\u7acb\u5373\u505a\u51fa\u53cd\u5e94\uff0c\u4f8b\u5982\u96f6\u552e\u3001\u9152\u5e97\u548c\u65c5\u6e38\u4e1a\u4ee5\u53ca\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002 \u76d1\u6d4b\u533b\u9662\u62a4\u7406\u4e2d\u7684\u60a3\u8005\u5e76\u9884\u6d4b\u75c5\u60c5\u53d8\u5316\uff0c\u4ee5\u786e\u4fdd\u5728\u7d27\u6025\u60c5\u51b5\u4e0b\u53ca\u65f6\u5f97\u5230\u6cbb\u7597\u3002 \u8fde\u63a5\u3001\u5b58\u50a8\u5e76\u63d0\u4f9b\u516c\u53f8\u4e0d\u540c\u90e8\u95e8\u751f\u6210\u7684\u6570\u636e\u3002 \u4f5c\u4e3a\u6570\u636e\u5e73\u53f0\u3001\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u548c\u5fae\u670d\u52a1\u7684\u57fa\u7840\u3002","title":"\u6211\u53ef\u4ee5\u4f7f\u7528\u4e8b\u4ef6\u6d41\u505a\u4ec0\u4e48\uff1f"},{"location":"1/#apache-kafka","text":"Kafka \u7ed3\u5408\u4e86\u4e09\u4e2a\u5173\u952e\u529f\u80fd\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u4f7f\u7528 \u4e00\u4e2a\u7ecf\u8fc7\u5b9e\u6218\u68c0\u9a8c\u7684\u89e3\u51b3\u65b9\u6848\u6765\u5b9e\u73b0\u7aef\u5230\u7aef\u4e8b\u4ef6\u6d41\u7684 \u7528\u4f8b\uff1a \u53d1\u5e03 \uff08\u5199\u5165\uff09\u548c \u8ba2\u9605 \uff08\u8bfb\u53d6\uff09\u4e8b\u4ef6\u6d41\uff0c\u5305\u62ec\u4ece\u5176\u4ed6\u7cfb\u7edf\u6301\u7eed\u5bfc\u5165/\u5bfc\u51fa\u6570\u636e\u3002 \u6839\u636e\u9700\u8981\u6301\u4e45\u53ef\u9760\u5730 \u5b58\u50a8 \u4e8b\u4ef6\u6d41\u3002 \u5728\u4e8b\u4ef6\u53d1\u751f\u65f6\u6216\u56de\u987e\u6027\u5730 \u5904\u7406 \u4e8b\u4ef6\u6d41\u3002 \u6240\u6709\u8fd9\u4e9b\u529f\u80fd\u90fd\u662f\u4ee5\u5206\u5e03\u5f0f\u3001\u9ad8\u5ea6\u53ef\u6269\u5c55\u3001\u5f39\u6027\u3001\u5bb9\u9519\u548c\u5b89\u5168\u7684\u65b9\u5f0f\u63d0\u4f9b\u7684\u3002Kafka \u53ef\u4ee5\u90e8\u7f72\u5728\u88f8\u673a\u786c\u4ef6\u3001\u865a\u62df\u673a\u548c\u5bb9\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u90e8\u7f72\u5728\u672c\u5730\u548c\u4e91\u7aef\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u81ea\u884c\u7ba1\u7406 Kafka \u73af\u5883\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u5404\u79cd\u4f9b\u5e94\u5546\u63d0\u4f9b\u7684\u5b8c\u5168\u6258\u7ba1\u670d\u52a1\u3002","title":"Apache Kafka\u00ae \u662f\u4e00\u4e2a\u4e8b\u4ef6\u6d41\u5e73\u53f0\u3002\u8fd9\u610f\u5473\u7740\u4ec0\u4e48\uff1f"},{"location":"1/#kafka","text":"Kafka\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u7531\u901a\u8fc7\u9ad8\u6027\u80fd TCP\u7f51\u7edc\u534f\u8bae\u8fdb\u884c\u901a\u4fe1\u7684 \u670d\u52a1\u5668 \u548c \u5ba2\u6237\u7aef \u7ec4\u6210\u3002\u5b83\u53ef\u4ee5\u90e8\u7f72\u5728\u672c\u5730\u548c\u4e91\u73af\u5883\u4e2d\u7684\u88f8\u673a\u786c\u4ef6\u3001\u865a\u62df\u673a\u548c\u5bb9\u5668\u4e0a\u3002 \u670d\u52a1\u5668 \uff1aKafka \u4f5c\u4e3a\u4e00\u53f0\u6216\u591a\u53f0\u670d\u52a1\u5668\u7684\u96c6\u7fa4\u8fd0\u884c\uff0c\u53ef\u4ee5\u8de8\u8d8a\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3\u6216\u4e91\u533a\u57df\u3002\u5176\u4e2d\u4e00\u4e9b\u670d\u52a1\u5668\u5f62\u6210\u5b58\u50a8\u5c42\uff0c\u79f0\u4e3a\u4ee3\u7406\u3002\u5176\u4ed6\u670d\u52a1\u5668\u8fd0\u884c Kafka Connect \u4ee5\u6301\u7eed\u5bfc\u5165\u548c\u5bfc\u51fa\u6570\u636e\u4f5c\u4e3a\u4e8b\u4ef6\u6d41\uff0c\u4ee5\u5c06 Kafka \u4e0e\u60a8\u73b0\u6709\u7684\u7cfb\u7edf\uff08\u4f8b\u5982\u5173\u7cfb\u6570\u636e\u5e93\u4ee5\u53ca\u5176\u4ed6 Kafka \u96c6\u7fa4\uff09\u96c6\u6210\u3002\u4e3a\u4e86\u8ba9\u60a8\u5b9e\u73b0\u5173\u952e\u4efb\u52a1\u7528\u4f8b\uff0cKafka \u96c6\u7fa4\u5177\u6709\u9ad8\u5ea6\u53ef\u6269\u5c55\u6027\u548c\u5bb9\u9519\u6027\uff1a\u5982\u679c\u5176\u4e2d\u4efb\u4f55\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\uff0c\u5176\u4ed6\u670d\u52a1\u5668\u5c06\u63a5\u7ba1\u5176\u5de5\u4f5c\uff0c\u4ee5\u786e\u4fdd\u8fde\u7eed\u8fd0\u884c\u800c\u4e0d\u4f1a\u4e22\u5931\u4efb\u4f55\u6570\u636e\u3002 \u5ba2\u6237\u7aef \uff1a\u5b83\u4eec\u5141\u8bb8\u60a8\u7f16\u5199\u5206\u5e03\u5f0f\u5e94\u7528\u7a0b\u5e8f\u548c\u5fae\u670d\u52a1\uff0c\u5373\u4f7f\u5728\u7f51\u7edc\u95ee\u9898\u6216\u673a\u5668\u6545\u969c\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u53ef\u4ee5\u4ee5\u5bb9\u9519\u7684\u65b9\u5f0f\u5e76\u884c\u3001\u5927\u89c4\u6a21\u5730\u8bfb\u53d6\u3001\u5199\u5165\u548c\u5904\u7406\u4e8b\u4ef6\u6d41\u3002Kafka \u9644\u5e26\u4e86\u4e00\u4e9b\u6b64\u7c7b\u5ba2\u6237\u7aef\uff0c\u5e76\u7531 Kafka \u793e\u533a\u63d0\u4f9b\u7684 \u6570\u5341\u4e2a\u5ba2\u6237\u7aef \u8fdb\u884c\u4e86\u6269\u5145\uff1a\u5ba2\u6237\u7aef\u53ef\u7528\u4e8e Java \u548c Scala\uff0c\u5305\u62ec\u66f4\u9ad8\u7ea7\u522b\u7684 Kafka Streams \u5e93\uff0c\u9002\u7528\u4e8e Go\u3001Python\u3001C/C++ \u548c\u8bb8\u591a\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4ee5\u53ca REST API\u3002","title":"\u7b80\u800c\u8a00\u4e4b\uff0cKafka \u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff1f"},{"location":"1/#_3","text":"\u4e8b\u4ef6\u8bb0\u5f55\u4e86\u4e16\u754c\u4e0a\u6216\u60a8\u7684\u4f01\u4e1a\u4e2d\u201c\u53d1\u751f\u4e86\u4e00\u4e9b \u4e8b\u60c5 \u201d\u7684\u4e8b\u5b9e\u3002\u5728\u6587\u6863\u4e2d\u4e5f\u79f0\u4e3a\u8bb0\u5f55\u6216\u6d88\u606f\u3002\u5f53\u60a8\u5411 Kafka \u8bfb\u53d6\u6216\u5199\u5165\u6570\u636e\u65f6\uff0c\u60a8\u4ee5\u4e8b\u4ef6\u7684\u5f62\u5f0f\u6267\u884c\u6b64\u64cd\u4f5c\u3002\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u4e8b\u4ef6\u5177\u6709\u952e\u3001\u503c\u3001\u65f6\u95f4\u6233\u548c\u53ef\u9009\u7684\u5143\u6570\u636e\u6807\u5934\u3002\u8fd9\u662f\u4e00\u4e2a\u793a\u4f8b\u4e8b\u4ef6\uff1a Event key: \"Alice\" Event value: \"Made a payment of $200 to Bob\" Event timestamp: \"Jun. 25, 2020 at 2:06 p.m.\" \u751f\u4ea7\u8005 \u662f\u5c06\u4e8b\u4ef6\u53d1\u5e03\uff08\u5199\u5165\uff09\u5230 Kafka \u7684\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\uff0c\u800c \u6d88\u8d39\u8005 \u662f\u8ba2\u9605\uff08\u8bfb\u53d6\u548c\u5904\u7406\uff09\u8fd9\u4e9b\u4e8b\u4ef6\u7684\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u3002\u5728 Kafka \u4e2d\uff0c\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u5f7c\u6b64\u5b8c\u5168\u89e3\u8026\u4e14\u4e92\u4e0d\u53ef\u77e5\uff0c\u8fd9\u662f\u5b9e\u73b0 Kafka \u95fb\u540d\u7684\u9ad8\u53ef\u6269\u5c55\u6027\u7684\u5173\u952e\u8bbe\u8ba1\u5143\u7d20\u3002\u4f8b\u5982\uff0c\u751f\u4ea7\u8005\u6c38\u8fdc\u4e0d\u9700\u8981\u7b49\u5f85\u6d88\u8d39\u8005\u3002Kafka \u63d0\u4f9b\u4e86\u5404\u79cd \u4fdd\u8bc1 \uff0c\u4f8b\u5982\u4e00\u6b21\u6027\u5904\u7406\u4e8b\u4ef6\u7684\u80fd\u529b\u3002 \u4e8b\u4ef6\u88ab\u7ec4\u7ec7\u5e76\u6301\u4e45\u5b58\u50a8\u5728 \u4e3b\u9898 \u4e2d\u3002\u975e\u5e38\u7b80\u5355\uff0c\u4e3b\u9898\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u5939\uff0c\u4e8b\u4ef6\u662f\u8be5\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u3002\u793a\u4f8b\u4e3b\u9898\u540d\u79f0\u53ef\u4ee5\u662f\u201c\u4ed8\u6b3e\u201d\u3002Kafka \u4e2d\u7684\u4e3b\u9898\u59cb\u7ec8\u662f\u591a\u751f\u4ea7\u8005\u548c\u591a\u8ba2\u9605\u8005\uff1a\u4e00\u4e2a\u4e3b\u9898\u53ef\u4ee5\u6709\u96f6\u4e2a\u3001\u4e00\u4e2a\u6216\u591a\u4e2a\u5411\u5176\u5199\u5165\u4e8b\u4ef6\u7684\u751f\u4ea7\u8005\uff0c\u4ee5\u53ca\u96f6\u4e2a\u3001\u4e00\u4e2a\u6216\u591a\u4e2a\u8ba2\u9605\u8fd9\u4e9b\u4e8b\u4ef6\u7684\u6d88\u8d39\u8005\u3002\u4e3b\u9898\u4e2d\u7684\u4e8b\u4ef6\u53ef\u4ee5\u6839\u636e\u9700\u8981\u968f\u65f6\u8bfb\u53d6\u2014\u2014\u4e0e\u4f20\u7edf\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e0d\u540c\uff0c\u4e8b\u4ef6\u5728\u4f7f\u7528\u540e\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u76f8\u53cd\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u6bcf\u4e2a\u4e3b\u9898\u7684\u914d\u7f6e\u8bbe\u7f6e\u6765\u5b9a\u4e49 Kafka \u5e94\u4fdd\u7559\u4e8b\u4ef6\u7684\u65f6\u95f4\uff0c\u4e4b\u540e\u65e7\u4e8b\u4ef6\u5c06\u88ab\u4e22\u5f03\u3002Kafka \u7684\u6027\u80fd\u5728\u6570\u636e\u5927\u5c0f\u65b9\u9762\u5b9e\u9645\u4e0a\u662f\u6052\u5b9a\u7684\uff0c\u56e0\u6b64\u957f\u65f6\u95f4\u5b58\u50a8\u6570\u636e\u662f\u5b8c\u5168\u53ef\u4ee5\u7684\u3002 \u4e3b\u9898\u662f \u5206\u533a\u7684 \uff0c\u8fd9\u610f\u5473\u7740\u4e00\u4e2a\u4e3b\u9898\u5206\u5e03\u5728\u4f4d\u4e8e\u4e0d\u540c Kafka \u4ee3\u7406\u4e0a\u7684\u591a\u4e2a\u201c\u6876\u201d\u4e2d\u3002\u8fd9\u79cd\u6570\u636e\u7684\u5206\u5e03\u5f0f\u653e\u7f6e\u5bf9\u4e8e\u53ef\u6269\u5c55\u6027\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u540c\u65f6\u4ece\u591a\u4e2a\u4ee3\u7406\u8bfb\u53d6\u6570\u636e\u6216\u5411\u591a\u4e2a\u4ee3\u7406\u5199\u5165\u6570\u636e\u3002\u5f53\u65b0\u4e8b\u4ef6\u53d1\u5e03\u5230\u4e3b\u9898\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u4f1a\u9644\u52a0\u5230\u4e3b\u9898\u7684\u5206\u533a\u4e4b\u4e00\u3002\u5177\u6709\u76f8\u540c\u4e8b\u4ef6\u952e\uff08\u4f8b\u5982\uff0c\u5ba2\u6237\u6216\u8f66\u8f86 ID\uff09\u7684\u4e8b\u4ef6\u88ab\u5199\u5165\u540c\u4e00\u5206\u533a\uff0c\u5e76\u4e14 Kafka \u4fdd\u8bc1 \u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u4efb\u4f55\u6d88\u8d39\u8005\u5c06\u59cb\u7ec8\u6309\u7167\u4e0e\u5199\u5165\u7684\u987a\u5e8f\u5b8c\u5168\u76f8\u540c\u7684\u987a\u5e8f\u8bfb\u53d6\u8be5\u5206\u533a\u7684\u4e8b\u4ef6\u3002 \u56fe\uff1a\u6b64\u793a\u4f8b\u4e3b\u9898\u6709\u56db\u4e2a\u5206\u533a P1\u2013P4\u3002\u4e24\u4e2a\u4e0d\u540c\u7684\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u901a\u8fc7\u7f51\u7edc\u5c06\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898\u7684\u5206\u533a\uff0c\u76f8\u4e92\u72ec\u7acb\u5730\u5411\u4e3b\u9898\u53d1\u5e03\u65b0\u4e8b\u4ef6\u3002\u5177\u6709\u76f8\u540c\u952e\uff08\u5728\u56fe\u4e2d\u7528\u989c\u8272\u8868\u793a\uff09\u7684\u4e8b\u4ef6\u5c06\u5199\u5165\u540c\u4e00\u5206\u533a\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u5408\u9002\uff0c\u4e24\u4e2a\u751f\u4ea7\u8005\u90fd\u53ef\u4ee5\u5199\u5165\u540c\u4e00\u5206\u533a\u3002 \u4e3a\u4e86\u4f7f\u60a8\u7684\u6570\u636e\u5177\u6709\u5bb9\u9519\u6027\u548c\u9ad8\u53ef\u7528\u6027\uff0c\u6bcf\u4e2a\u4e3b\u9898\u90fd\u53ef\u4ee5 \u590d\u5236 \uff0c\u751a\u81f3\u53ef\u4ee5\u8de8\u5730\u7406\u533a\u57df\u6216\u6570\u636e\u4e2d\u5fc3\u8fdb\u884c\u590d\u5236\uff0c\u56e0\u6b64\u59cb\u7ec8\u6709\u591a\u4e2a\u4ee3\u7406\u62e5\u6709\u6570\u636e\u526f\u672c\uff0c\u4ee5\u9632\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u60a8\u5e0c\u671b\u5bf9broker\u8fdb\u884c\u7ef4\u62a4\u7b49\u7b49\u3002\u5e38\u89c1\u7684\u751f\u4ea7\u8bbe\u7f6e\u662f\u590d\u5236\u56e0\u5b50\u4e3a 3\uff0c\u5373\u59cb\u7ec8\u5b58\u5728\u6570\u636e\u7684\u4e09\u4e2a\u526f\u672c\u3002\u6b64\u590d\u5236\u662f\u5728\u4e3b\u9898\u5206\u533a\u7ea7\u522b\u6267\u884c\u7684\u3002 \u8fd9\u672c\u5165\u95e8\u8bfb\u7269\u5bf9\u4e8e\u4ecb\u7ecd\u6765\u8bf4\u5e94\u8be5\u8db3\u591f\u4e86\u3002 \u5982\u679c\u60a8\u6709\u5174\u8da3\uff0c\u6587\u6863\u7684\u8bbe\u8ba1 \u90e8\u5206\u8be6\u7ec6\u89e3\u91ca\u4e86 Kafka \u7684\u5404\u79cd\u6982\u5ff5\u3002","title":"\u4e3b\u8981\u6982\u5ff5\u548c\u672f\u8bed"},{"location":"1/#kafka-api","text":"\u9664\u4e86\u7528\u4e8e\u7ba1\u7406\u548c\u7ba1\u7406\u4efb\u52a1\u7684\u547d\u4ee4\u884c\u5de5\u5177\u4e4b\u5916\uff0cKafka \u8fd8\u6709\u4e94\u4e2a\u9002\u7528\u4e8e Java \u548c Scala \u7684\u6838\u5fc3 API\uff1a \u7528\u4e8e\u7ba1\u7406\u548c\u68c0\u67e5\u4e3b\u9898\u3001\u4ee3\u7406\u548c\u5176\u4ed6 Kafka \u5bf9\u8c61\u7684 \u7ba1\u7406 API \u3002 Producer API\uff0c \u7528\u4e8e\u5c06\u4e8b\u4ef6\u6d41\u53d1\u5e03\uff08\u5199\u5165\uff09\u5230\u4e00\u4e2a\u6216\u591a\u4e2a Kafka \u4e3b\u9898\u3002 Consumer API \u7528\u4e8e\u8ba2\u9605\uff08\u8bfb\u53d6\uff09\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\u5e76\u5904\u7406\u4e3a\u5176\u751f\u6210\u7684\u4e8b\u4ef6\u6d41\u3002 Kafka Streams API \u7528\u4e8e\u5b9e\u73b0\u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u548c\u5fae\u670d\u52a1\u3002\u5b83\u63d0\u4f9b\u4e86\u66f4\u9ad8\u7ea7\u522b\u7684\u51fd\u6570\u6765\u5904\u7406\u4e8b\u4ef6\u6d41\uff0c\u5305\u62ec\u8f6c\u6362\u3001\u6709\u72b6\u6001\u64cd\u4f5c\uff08\u4f8b\u5982\u805a\u5408\u548c\u8fde\u63a5\uff09\u3001\u7a97\u53e3\u3001\u57fa\u4e8e\u4e8b\u4ef6\u65f6\u95f4\u7684\u5904\u7406\u7b49\u7b49\u3002\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\u8bfb\u53d6\u8f93\u5165\uff0c\u4ee5\u4fbf\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\u7684\u8f93\u51fa\uff0c\u4ece\u800c\u6709\u6548\u5730\u5c06\u8f93\u5165\u6d41\u8f6c\u6362\u4e3a\u8f93\u51fa\u6d41\u3002 Kafka Connect API \u7528\u4e8e\u6784\u5efa\u548c\u8fd0\u884c\u53ef\u91cd\u7528\u7684\u6570\u636e\u5bfc\u5165/\u5bfc\u51fa\u8fde\u63a5\u5668\uff0c\u8fd9\u4e9b\u8fde\u63a5\u5668\u6d88\u8017\uff08\u8bfb\u53d6\uff09\u6216\u751f\u6210\uff08\u5199\u5165\uff09\u6765\u81ea\u5916\u90e8\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u7684\u4e8b\u4ef6\u6d41\uff0c\u4ee5\u4fbf\u5b83\u4eec\u53ef\u4ee5\u4e0e Kafka \u96c6\u6210\u3002\u4f8b\u5982\uff0c\u5173\u7cfb\u6570\u636e\u5e93\uff08\u5982 PostgreSQL\uff09\u7684\u8fde\u63a5\u5668\u53ef\u80fd\u4f1a\u6355\u83b7\u5bf9\u4e00\u7ec4\u8868\u7684\u6bcf\u4e2a\u66f4\u6539\u3002\u7136\u800c\uff0c\u5728\u5b9e\u8df5\u4e2d\uff0c\u60a8\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u81ea\u5df1\u7684\u8fde\u63a5\u5668\uff0c\u56e0\u4e3a Kafka \u793e\u533a\u5df2\u7ecf\u63d0\u4f9b\u4e86\u6570\u767e\u4e2a\u73b0\u6210\u7684\u8fde\u63a5\u5668\u3002","title":"Kafka API"},{"location":"1/#_4","text":"\u8981\u83b7\u5f97 Kafka \u7684\u5b9e\u8df5\u7ecf\u9a8c\uff0c\u8bf7\u6309\u7167 \u5feb\u901f\u5165\u95e8 \u8fdb\u884c\u64cd\u4f5c\u3002 \u8981\u66f4\u8be6\u7ec6\u5730\u4e86\u89e3 Kafka\uff0c\u8bf7\u9605\u8bfb \u6587\u6863 \u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9 Kafka\u4e66\u7c4d\u548c\u5b66\u672f\u8bba\u6587 \u3002 \u6d4f\u89c8 \u7528\u4f8b\uff0c \u4e86\u89e3\u6211\u4eec\u5168\u7403\u793e\u533a\u4e2d\u7684\u5176\u4ed6\u7528\u6237\u5982\u4f55\u4ece Kafka \u4e2d\u83b7\u53d6\u4ef7\u503c\u3002 \u52a0\u5165 \u5f53\u5730\u7684 Kafka \u805a\u4f1a\u5c0f\u7ec4 \uff0c \u89c2\u770bKafka \u793e\u533a\u4e3b\u8981\u4f1a\u8bae Kafka Summit \u7684\u6f14\u8bb2\u3002","title":"\u4ece\u8fd9\u5f80\u54ea\u513f\u8d70"},{"location":"1/#12","text":"\u4ee5\u4e0b\u662f Apache Kafka\u00ae \u7684\u4e00\u4e9b\u6d41\u884c\u7528\u4f8b\u7684\u63cf\u8ff0\u3002\u6709\u5173\u5176\u4e2d\u4e00\u4e9b\u6b63\u5728\u5b9e\u65bd\u7684\u9886\u57df\u7684\u6982\u8ff0\uff0c\u8bf7\u53c2\u9605 \u6b64\u535a\u5ba2\u6587\u7ae0 \u3002","title":"1.2 \u4f7f\u7528\u6848\u4f8b"},{"location":"1/#_5","text":"Kafka \u53ef\u4ee5\u5f88\u597d\u5730\u66ff\u4ee3\u66f4\u4f20\u7edf\u7684\u6d88\u606f\u4ee3\u7406\u3002\u4f7f\u7528\u6d88\u606f\u4ee3\u7406\u7684\u539f\u56e0\u6709\u591a\u79cd\uff08\u5c06\u5904\u7406\u4e0e\u6570\u636e\u751f\u4ea7\u8005\u5206\u79bb\u3001\u7f13\u51b2\u672a\u5904\u7406\u7684\u6d88\u606f\u7b49\uff09\u3002\u4e0e\u5927\u591a\u6570\u6d88\u606f\u7cfb\u7edf\u76f8\u6bd4\uff0cKafka \u5177\u6709\u66f4\u597d\u7684\u541e\u5410\u91cf\u3001\u5185\u7f6e\u5206\u533a\u3001\u590d\u5236\u548c\u5bb9\u9519\u80fd\u529b\uff0c\u8fd9\u4f7f\u5176\u6210\u4e3a\u5927\u89c4\u6a21\u6d88\u606f\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u826f\u597d\u89e3\u51b3\u65b9\u6848\u3002 \u6839\u636e\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u6d88\u606f\u4f20\u9012\u7684\u4f7f\u7528\u901a\u5e38\u541e\u5410\u91cf\u76f8\u5bf9\u8f83\u4f4e\uff0c\u4f46\u53ef\u80fd\u9700\u8981\u8f83\u4f4e\u7684\u7aef\u5230\u7aef\u5ef6\u8fdf\uff0c\u5e76\u4e14\u901a\u5e38\u4f9d\u8d56\u4e8e Kafka \u63d0\u4f9b\u7684\u5f3a\u5927\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u3002 \u5728\u8fd9\u4e2a\u9886\u57df\uff0cKafka \u53ef\u4ee5\u4e0e ActiveMQ \u6216 RabbitMQ \u7b49\u4f20\u7edf\u6d88\u606f\u7cfb\u7edf\u76f8\u5ab2\u7f8e\u3002","title":"\u6d88\u606f\u4f20\u9012"},{"location":"1/#_6","text":"Kafka \u7684\u6700\u521d\u7528\u4f8b\u662f\u80fd\u591f\u5c06\u7528\u6237\u6d3b\u52a8\u8ddf\u8e2a\u7ba1\u9053\u91cd\u5efa\u4e3a\u4e00\u7ec4\u5b9e\u65f6\u53d1\u5e03-\u8ba2\u9605\u6e90\u3002\u8fd9\u610f\u5473\u7740\u7ad9\u70b9\u6d3b\u52a8\uff08\u9875\u9762\u6d4f\u89c8\u3001\u641c\u7d22\u6216\u7528\u6237\u53ef\u80fd\u6267\u884c\u7684\u5176\u4ed6\u64cd\u4f5c\uff09\u5c06\u53d1\u5e03\u5230\u4e2d\u5fc3\u4e3b\u9898\uff0c\u6bcf\u79cd\u6d3b\u52a8\u7c7b\u578b\u4e00\u4e2a\u4e3b\u9898\u3002\u8fd9\u4e9b\u6e90\u53ef\u7528\u4e8e\u4e00\u7cfb\u5217\u7528\u4f8b\u7684\u8ba2\u9605\uff0c\u5305\u62ec\u5b9e\u65f6\u5904\u7406\u3001\u5b9e\u65f6\u76d1\u63a7\u4ee5\u53ca\u52a0\u8f7d\u5230 Hadoop \u6216\u79bb\u7ebf\u6570\u636e\u4ed3\u5e93\u7cfb\u7edf\u4e2d\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5904\u7406\u548c\u62a5\u544a\u3002 \u6d3b\u52a8\u8ddf\u8e2a\u7684\u91cf\u901a\u5e38\u975e\u5e38\u5927\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u7528\u6237\u9875\u9762\u89c6\u56fe\u90fd\u4f1a\u751f\u6210\u8bb8\u591a\u6d3b\u52a8\u6d88\u606f\u3002","title":"\u7f51\u7ad9\u6d3b\u52a8\u8ddf\u8e2a"},{"location":"1/#_7","text":"Kafka\u5e38\u7528\u4e8e\u8fd0\u884c\u76d1\u63a7\u6570\u636e\u3002\u8fd9\u6d89\u53ca\u805a\u5408\u6765\u81ea\u5206\u5e03\u5f0f\u5e94\u7528\u7a0b\u5e8f\u7684\u7edf\u8ba1\u6570\u636e\u4ee5\u751f\u6210\u96c6\u4e2d\u7684\u64cd\u4f5c\u6570\u636e\u6e90\u3002","title":"\u6307\u6807"},{"location":"1/#_8","text":"\u8bb8\u591a\u4eba\u4f7f\u7528 Kafka \u4f5c\u4e3a\u65e5\u5fd7\u805a\u5408\u89e3\u51b3\u65b9\u6848\u7684\u66ff\u4ee3\u54c1\u3002\u65e5\u5fd7\u805a\u5408\u901a\u5e38\u4ece\u670d\u52a1\u5668\u6536\u96c6\u7269\u7406\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u5c06\u5b83\u4eec\u653e\u5728\u4e00\u4e2a\u4e2d\u5fc3\u4f4d\u7f6e\uff08\u53ef\u80fd\u662f\u6587\u4ef6\u670d\u52a1\u5668\u6216 HDFS\uff09\u8fdb\u884c\u5904\u7406\u3002Kafka \u62bd\u8c61\u4e86\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5e76\u5c06\u65e5\u5fd7\u6216\u4e8b\u4ef6\u6570\u636e\u4f5c\u4e3a\u6d88\u606f\u6d41\u63d0\u4f9b\u4e86\u66f4\u6e05\u6670\u7684\u62bd\u8c61\u3002\u8fd9\u53ef\u4ee5\u5b9e\u73b0\u66f4\u4f4e\u5ef6\u8fdf\u7684\u5904\u7406\uff0c\u5e76\u66f4\u8f7b\u677e\u5730\u652f\u6301\u591a\u4e2a\u6570\u636e\u6e90\u548c\u5206\u5e03\u5f0f\u6570\u636e\u6d88\u8d39\u3002\u4e0e Scribe \u6216 Flume \u7b49\u4ee5\u65e5\u5fd7\u4e3a\u4e2d\u5fc3\u7684\u7cfb\u7edf\u76f8\u6bd4\uff0cKafka \u63d0\u4f9b\u540c\u6837\u826f\u597d\u7684\u6027\u80fd\u3001\u7531\u4e8e\u590d\u5236\u800c\u63d0\u4f9b\u66f4\u5f3a\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u4ee5\u53ca\u66f4\u4f4e\u7684\u7aef\u5230\u7aef\u5ef6\u8fdf\u3002","title":"\u65e5\u5fd7\u805a\u5408"},{"location":"1/#_9","text":"Kafka \u7684\u8bb8\u591a\u7528\u6237\u5728\u7531\u591a\u4e2a\u9636\u6bb5\u7ec4\u6210\u7684\u5904\u7406\u7ba1\u9053\u4e2d\u5904\u7406\u6570\u636e\uff0c\u5176\u4e2d\u539f\u59cb\u8f93\u5165\u6570\u636e\u4ece Kafka \u4e3b\u9898\u4e2d\u6d88\u8d39\uff0c\u7136\u540e\u805a\u5408\u3001\u4e30\u5bcc\u6216\u4ee5\u5176\u4ed6\u65b9\u5f0f\u8f6c\u6362\u4e3a\u65b0\u4e3b\u9898\u4ee5\u4f9b\u8fdb\u4e00\u6b65\u6d88\u8d39\u6216\u540e\u7eed\u5904\u7406\u3002\u4f8b\u5982\uff0c\u7528\u4e8e\u63a8\u8350\u65b0\u95fb\u6587\u7ae0\u7684\u5904\u7406\u7ba1\u9053\u53ef\u80fd\u4f1a\u4ece RSS \u6e90\u4e2d\u6293\u53d6\u6587\u7ae0\u5185\u5bb9\u5e76\u5c06\u5176\u53d1\u5e03\u5230\u201c\u6587\u7ae0\u201d\u4e3b\u9898\uff1b\u8fdb\u4e00\u6b65\u5904\u7406\u53ef\u80fd\u4f1a\u89c4\u8303\u5316\u6216\u5220\u9664\u91cd\u590d\u5185\u5bb9\uff0c\u5e76\u5c06\u6e05\u7406\u540e\u7684\u6587\u7ae0\u5185\u5bb9\u53d1\u5e03\u5230\u65b0\u4e3b\u9898\uff1b\u6700\u540e\u7684\u5904\u7406\u9636\u6bb5\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u5411\u7528\u6237\u63a8\u8350\u8be5\u5185\u5bb9\u3002\u6b64\u7c7b\u5904\u7406\u7ba1\u9053\u6839\u636e\u5404\u4e2a\u4e3b\u9898\u521b\u5efa\u5b9e\u65f6\u6570\u636e\u6d41\u56fe\u3002\u4ece0.10.0.0\u5f00\u59cb\uff0c\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u4f46\u529f\u80fd\u5f3a\u5927\u7684\u6d41\u5904\u7406\u5e93\uff0c\u79f0\u4e3a Kafka Streams Apache Kafka \u4e2d\u53ef\u4ee5\u6267\u884c\u4e0a\u8ff0\u6570\u636e\u5904\u7406\u3002\u9664\u4e86 Kafka Streams \u4e4b\u5916\uff0c\u66ff\u4ee3\u7684\u5f00\u6e90\u6d41\u5904\u7406\u5de5\u5177\u8fd8\u5305\u62ec Apache Storm \u548c Apache Samza \u3002","title":"\u6d41\u5904\u7406"},{"location":"1/#_10","text":"\u4e8b\u4ef6\u6eaf\u6e90 \u662f\u4e00\u79cd\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u98ce\u683c\uff0c\u5176\u4e2d\u72b6\u6001\u66f4\u6539\u88ab\u8bb0\u5f55\u4e3a\u6309\u65f6\u95f4\u6392\u5e8f\u7684\u8bb0\u5f55\u5e8f\u5217\u3002Kafka \u5bf9\u975e\u5e38\u5927\u7684\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u7684\u652f\u6301\u4f7f\u5176\u6210\u4e3a\u4ee5\u6b64\u98ce\u683c\u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u51fa\u8272\u540e\u7aef\u3002","title":"\u4e8b\u4ef6\u6eaf\u6e90"},{"location":"1/#_11","text":"Kafka \u53ef\u4ee5\u5145\u5f53\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u4e00\u79cd\u5916\u90e8\u63d0\u4ea4\u65e5\u5fd7\u3002\u65e5\u5fd7\u6709\u52a9\u4e8e\u5728\u8282\u70b9\u4e4b\u95f4\u590d\u5236\u6570\u636e\uff0c\u5e76\u5145\u5f53\u6545\u969c\u8282\u70b9\u6062\u590d\u6570\u636e\u7684\u91cd\u65b0\u540c\u6b65\u673a\u5236\u3002 Kafka \u4e2d\u7684\u65e5\u5fd7\u538b\u7f29 \u529f\u80fd\u6709\u52a9\u4e8e\u652f\u6301\u8fd9\u79cd\u7528\u6cd5\u3002\u5728\u8fd9\u79cd\u7528\u6cd5\u4e2d\uff0cKafka \u7c7b\u4f3c\u4e8e Apache BookKeeper \u9879\u76ee\u3002","title":"\u63d0\u4ea4\u65e5\u5fd7"},{"location":"1/#13","text":"","title":"1.3 \u5feb\u901f\u5165\u95e8"},{"location":"1/#1-kafka","text":"\u4e0b\u8f7d \u6700\u65b0\u7684 Kafka \u7248\u672c\u5e76\u89e3\u538b\uff1a $ tar -xzf kafka_2.13-3.5.0.tgz $ cd kafka_2.13-3.5.0","title":"\u7b2c 1 \u6b65\uff1a\u83b7\u53d6Kafka"},{"location":"1/#2-kafka","text":"\u6ce8\u610f\uff1a\u60a8\u7684\u672c\u5730\u73af\u5883\u5fc5\u987b\u5b89\u88c5 Java 8+\u3002 Apache Kafka \u53ef\u4ee5\u4f7f\u7528 ZooKeeper \u6216 KRaft \u542f\u52a8\u3002\u8981\u5f00\u59cb\u4f7f\u7528\u4efb\u4e00\u914d\u7f6e\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u90e8\u5206\u4e4b\u4e00\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f46\u4e0d\u80fd\u540c\u65f6\u8fdb\u884c\u8fd9\u4e24\u4e2a\u90e8\u5206\u7684\u64cd\u4f5c\u3002","title":"\u7b2c 2 \u6b65\uff1a\u542f\u52a8KAFKA\u73af\u5883"},{"location":"1/#kafka_1","text":"\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u4fbf\u4ee5\u6b63\u786e\u7684\u987a\u5e8f\u542f\u52a8\u6240\u6709\u670d\u52a1\uff1a # Start the ZooKeeper service $ bin/zookeeper-server-start.sh config/zookeeper.properties \u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u8fd0\u884c\uff1a # Start the Kafka broker service $ bin/kafka-server-start.sh config/server.properties \u6240\u6709\u670d\u52a1\u6210\u529f\u542f\u52a8\u540e\uff0c\u60a8\u5c06\u62e5\u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u5e76\u53ef\u4f9b\u4f7f\u7528\u7684\u57fa\u672c Kafka \u73af\u5883\u3002","title":"Kafka\u4e0e\u52a8\u7269\u56ed\u7ba1\u7406\u5458"},{"location":"1/#kafka-kraft","text":"\u751f\u6210\u96c6\u7fa4 UUID $ KAFKA_CLUSTER_ID=\"$(bin/kafka-storage.sh random-uuid)\" \u8bbe\u7f6e\u65e5\u5fd7\u76ee\u5f55\u683c\u5f0f $ bin/kafka-storage.sh format -t $KAFKA_CLUSTER_ID -c config/kraft/server.properties \u542f\u52a8Kafka\u670d\u52a1\u5668 $ bin/kafka-server-start.sh config/kraft/server.properties \u4e00\u65e6 Kafka \u670d\u52a1\u5668\u6210\u529f\u542f\u52a8\uff0c\u60a8\u5c06\u62e5\u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u5e76\u53ef\u4f9b\u4f7f\u7528\u7684\u57fa\u672c Kafka \u73af\u5883\u3002","title":"Kafka\u4e0e Kraft"},{"location":"1/#3","text":"Kafka \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f \u4e8b\u4ef6\u6d41\u5e73\u53f0 \uff0c\u53ef\u8ba9\u60a8\u8de8\u591a\u53f0\u673a\u5668\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5b58\u50a8\u548c\u5904\u7406 \u4e8b\u4ef6 \uff08\u5728\u6587\u6863\u4e2d \u4e5f\u79f0\u4e3a \u8bb0\u5f55 \u6216 \u6d88\u606f\uff09\u3002 \u793a\u4f8b\u4e8b\u4ef6\u5305\u62ec\u652f\u4ed8\u4ea4\u6613\u3001\u624b\u673a\u7684\u5730\u7406\u4f4d\u7f6e\u66f4\u65b0\u3001\u8fd0\u8f93\u8ba2\u5355\u3001\u7269\u8054\u7f51\u8bbe\u5907\u6216\u533b\u7597\u8bbe\u5907\u7684\u4f20\u611f\u5668\u6d4b\u91cf\u7b49\u7b49\u3002\u8fd9\u4e9b\u4e8b\u4ef6\u88ab\u7ec4\u7ec7\u5e76\u5b58\u50a8\u5728 \u4e3b\u9898 \u4e2d\u3002\u975e\u5e38\u7b80\u5355\uff0c\u4e3b\u9898\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u5939\uff0c\u4e8b\u4ef6\u662f\u8be5\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u3002 \u56e0\u6b64\uff0c\u5728\u7f16\u5199\u7b2c\u4e00\u4e2a\u4e8b\u4ef6\u4e4b\u524d\uff0c\u60a8\u5fc5\u987b\u521b\u5efa\u4e00\u4e2a\u4e3b\u9898\u3002\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u8fd0\u884c\uff1a $ bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092 \u6240\u6709 Kafka \u7684\u547d\u4ee4\u884c\u5de5\u5177\u90fd\u6709\u9644\u52a0\u9009\u9879\uff1a\u8fd0\u884c kafka-topics.sh \u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\u7684\u547d\u4ee4\u6765\u663e\u793a\u4f7f\u7528\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5411\u60a8\u663e\u793a \u65b0\u4e3b\u9898\u7684 \u5206\u533a\u8ba1\u6570\u7b49\u8be6\u7ec6\u4fe1\u606f\uff1a $ bin/kafka-topics.sh --describe --topic quickstart-events --bootstrap-server localhost:9092 Topic: quickstart-events TopicId: NPmZHyhbR9y00wMglMH2sg PartitionCount: 1 ReplicationFactor: 1 Configs: Topic: quickstart-events Partition: 0 Leader: 0 Replicas: 0 Isr: 0","title":"\u7b2c 3 \u6b65\uff1a\u521b\u5efa\u4e00\u4e2a\u4e3b\u9898\u6765\u5b58\u50a8\u60a8\u7684\u4e8b\u4ef6"},{"location":"1/#4","text":"Kafka \u5ba2\u6237\u7aef\u901a\u8fc7\u7f51\u7edc\u4e0e Kafka \u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u4ee5\u5199\u5165\uff08\u6216\u8bfb\u53d6\uff09\u4e8b\u4ef6\u3002\u4e00\u65e6\u6536\u5230\uff0c\u4ee3\u7406\u5c06\u4ee5\u6301\u4e45\u4e14\u5bb9\u9519\u7684\u65b9\u5f0f\u5b58\u50a8\u4e8b\u4ef6\uff0c\u53ea\u8981\u60a8\u9700\u8981\uff0c\u751a\u81f3\u6c38\u8fdc\u5b58\u50a8\u3002 \u8fd0\u884c\u63a7\u5236\u53f0\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u4ee5\u5c06\u4e00\u4e9b\u4e8b\u4ef6\u5199\u5165\u60a8\u7684\u4e3b\u9898\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u60a8\u8f93\u5165\u7684\u6bcf\u4e00\u884c\u90fd\u4f1a\u5bfc\u81f4\u5c06\u4e00\u4e2a\u5355\u72ec\u7684\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898\u3002 $ bin/kafka-console-producer.sh --topic quickstart-events --bootstrap-server localhost:9092 This is my first event This is my second event Ctrl-C \u60a8\u53ef\u4ee5\u968f\u65f6 \u505c\u6b62\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u3002","title":"\u7b2c 4 \u6b65\uff1a\u5c06\u4e00\u4e9b\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898"},{"location":"1/#5","text":"\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u8fd0\u884c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u6765\u8bfb\u53d6\u60a8\u521a\u521a\u521b\u5efa\u7684\u4e8b\u4ef6\uff1a $ bin/kafka-console-consumer.sh --topic quickstart-events --from-beginning --bootstrap-server localhost:9092 This is my first event This is my second event Ctrl-C \u60a8\u53ef\u4ee5\u968f\u65f6\u505c\u6b62\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u3002 \u8bf7\u968f\u610f\u5c1d\u8bd5\uff1a\u4f8b\u5982\uff0c\u5207\u6362\u56de\u751f\u4ea7\u8005\u7ec8\u7aef\uff08\u4e0a\u4e00\u6b65\uff09\u4ee5\u7f16\u5199\u5176\u4ed6\u4e8b\u4ef6\uff0c\u5e76\u67e5\u770b\u4e8b\u4ef6\u5982\u4f55\u7acb\u5373\u663e\u793a\u5728\u6d88\u8d39\u8005\u7ec8\u7aef\u4e2d\u3002 \u7531\u4e8e\u4e8b\u4ef6\u6301\u4e45\u5b58\u50a8\u5728 Kafka \u4e2d\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u4ee5\u88ab\u4efb\u610f\u6570\u91cf\u7684\u6d88\u8d39\u8005\u8bfb\u53d6\u4efb\u610f\u591a\u6b21\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u5e76\u518d\u6b21\u91cd\u65b0\u8fd0\u884c\u4e4b\u524d\u7684\u547d\u4ee4\u6765\u8f7b\u677e\u9a8c\u8bc1\u8fd9\u4e00\u70b9\u3002","title":"\u7b2c 5 \u6b65\uff1a\u9605\u8bfb\u4e8b\u4ef6"},{"location":"1/#6-kafka-connect","text":"\u60a8\u53ef\u80fd\u5728\u5173\u7cfb\u6570\u636e\u5e93\u6216\u4f20\u7edf\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u7b49\u73b0\u6709\u7cfb\u7edf\u4e2d\u62e5\u6709\u5927\u91cf\u6570\u636e\uff0c\u4ee5\u53ca\u5df2\u7ecf\u4f7f\u7528\u8fd9\u4e9b\u7cfb\u7edf\u7684\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u3002 Kafka Connect \u5141\u8bb8\u60a8\u4e0d\u65ad\u5730\u5c06\u6570\u636e\u4ece\u5916\u90e8\u7cfb\u7edf\u6444\u53d6\u5230 Kafka \u4e2d\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 \u5b83\u662f\u4e00\u4e2a\u8fd0\u884c\u8fde\u63a5\u5668 \u7684\u53ef\u6269\u5c55\u5de5\u5177 \uff0c\u5b83\u5b9e\u73b0\u4e0e\u5916\u90e8\u7cfb\u7edf\u4ea4\u4e92\u7684\u81ea\u5b9a\u4e49\u200b\u200b\u903b\u8f91\u3002\u56e0\u6b64\uff0c\u5c06\u73b0\u6709\u7cfb\u7edf\u4e0e Kafka \u96c6\u6210\u975e\u5e38\u5bb9\u6613\u3002\u4e3a\u4e86\u4f7f\u8fd9\u4e2a\u8fc7\u7a0b\u66f4\u52a0\u5bb9\u6613\uff0c\u6709\u6570\u767e\u4e2a\u8fd9\u6837\u7684\u8fde\u63a5\u5668\u53ef\u4f9b\u4f7f\u7528\u3002 \u5728\u672c\u5feb\u901f\u5165\u95e8\u4e2d\uff0c\u6211\u4eec\u5c06\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u7b80\u5355\u7684\u8fde\u63a5\u5668\u8fd0\u884c Kafka Connect\uff0c\u5c06\u6570\u636e\u4ece\u6587\u4ef6\u5bfc\u5165\u5230 Kafka \u4e3b\u9898\uff0c\u5e76\u5c06\u6570\u636e\u4ece Kafka \u4e3b\u9898\u5bfc\u51fa\u5230\u6587\u4ef6\u3002 \u9996\u5148\uff0c\u786e\u4fdd\u6dfb\u52a0 connect-file-3.5.0.jar \u5230 plugin.path Connect \u5de5\u4f5c\u7ebf\u7a0b\u914d\u7f6e\u4e2d\u7684\u5c5e\u6027\u3002\u51fa\u4e8e\u672c\u5feb\u901f\u5165\u95e8\u7684\u76ee\u7684\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u5e76\u5c06\u8fde\u63a5\u5668\u7684\u5305\u89c6\u4e3a uber jar\uff0c\u5b83\u5728\u4ece\u5b89\u88c5\u76ee\u5f55\u8fd0\u884c\u5feb\u901f\u5165\u95e8\u547d\u4ee4\u65f6\u8d77\u4f5c\u7528\u3002\u4f46\u662f\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u4e8e\u751f\u4ea7\u90e8\u7f72\uff0c\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u59cb\u7ec8\u662f\u66f4\u597d\u7684\u9009\u62e9\u3002\u6709\u5173\u5982\u4f55\u8bbe\u7f6e\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c \u8bf7\u53c2\u9605 plugin.path \u3002 \u7f16\u8f91 config/connect-standalone.properties \u6587\u4ef6\uff0c\u6dfb\u52a0\u6216\u66f4\u6539\u4e0e plugin.path \u4ee5\u4e0b\u5185\u5bb9\u5339\u914d\u7684\u914d\u7f6e\u5c5e\u6027\uff0c\u7136\u540e\u4fdd\u5b58\u6587\u4ef6\uff1a > echo \"plugin.path=libs/connect-file-3.5.0.jar\" \u7136\u540e\uff0c\u9996\u5148\u521b\u5efa\u4e00\u4e9b\u79cd\u5b50\u6570\u636e\u8fdb\u884c\u6d4b\u8bd5\uff1a > echo -e \"foo\\nbar\" > test.txt \u6216\u8005\u5728 Windows \u4e0a\uff1a > echo foo> test.txt > echo bar>> test.txt \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u542f\u52a8\u4e24\u4e2a\u4ee5 \u72ec\u7acb \u6a21\u5f0f\u8fd0\u884c\u7684\u8fde\u63a5\u5668\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5728\u5355\u4e2a\u672c\u5730\u4e13\u7528\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u3002\u6211\u4eec\u63d0\u4f9b\u4e09\u4e2a\u914d\u7f6e\u6587\u4ef6\u4f5c\u4e3a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u59cb\u7ec8\u662f Kafka Connect \u8fdb\u7a0b\u7684\u914d\u7f6e\uff0c\u5305\u542b\u5e38\u89c1\u914d\u7f6e\uff0c\u4f8b\u5982\u8981\u8fde\u63a5\u7684 Kafka \u4ee3\u7406\u548c\u6570\u636e\u7684\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5176\u4f59\u914d\u7f6e\u6587\u4ef6\u5404\u81ea\u6307\u5b9a\u8981\u521b\u5efa\u7684\u8fde\u63a5\u5668\u3002\u8fd9\u4e9b\u6587\u4ef6\u5305\u62ec\u552f\u4e00\u7684\u8fde\u63a5\u5668\u540d\u79f0\u3001\u8981\u5b9e\u4f8b\u5316\u7684\u8fde\u63a5\u5668\u7c7b\u4ee5\u53ca\u8fde\u63a5\u5668\u6240\u9700\u7684\u4efb\u4f55\u5176\u4ed6\u914d\u7f6e\u3002 > bin/connect-standalone.sh config/connect-standalone.properties config/connect-file-source.properties config/connect-file-sink.properties \u8fd9\u4e9b\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u5305\u542b\u5728 Kafka \u4e2d\uff0c\u4f7f\u7528\u60a8\u4e4b\u524d\u542f\u52a8\u7684\u9ed8\u8ba4\u672c\u5730\u96c6\u7fa4\u914d\u7f6e\u5e76\u521b\u5efa\u4e24\u4e2a\u8fde\u63a5\u5668\uff1a\u7b2c\u4e00\u4e2a\u662f\u6e90\u8fde\u63a5\u5668\uff0c\u7528\u4e8e\u4ece\u8f93\u5165\u6587\u4ef6\u8bfb\u53d6\u884c\u5e76\u5c06\u6bcf\u884c\u751f\u6210\u5230 Kafka \u4e3b\u9898\uff0c\u7b2c\u4e8c\u4e2a\u662f\u63a5\u6536\u5668\u8fde\u63a5\u5668\u4ece Kafka \u4e3b\u9898\u8bfb\u53d6\u6d88\u606f\u5e76\u5c06\u6bcf\u6761\u6d88\u606f\u751f\u6210\u4e3a\u8f93\u51fa\u6587\u4ef6\u4e2d\u7684\u4e00\u884c\u3002 \u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u60a8\u5c06\u770b\u5230\u8bb8\u591a\u65e5\u5fd7\u6d88\u606f\uff0c\u5176\u4e2d\u5305\u62ec\u4e00\u4e9b\u6307\u793a\u8fde\u63a5\u5668\u6b63\u5728\u5b9e\u4f8b\u5316\u7684\u65e5\u5fd7\u6d88\u606f\u3002\u4e00\u65e6 Kafka Connect \u8fdb\u7a0b\u542f\u52a8\uff0c\u6e90\u8fde\u63a5\u5668\u5e94\u5f00\u59cb\u4ece test.txt \u4e3b\u9898\u8bfb\u53d6\u884c\u5e76\u5c06\u5176\u751f\u6210\u5230\u4e3b\u9898 connect-test \uff0c\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5e94\u5f00\u59cb\u4ece\u4e3b\u9898\u8bfb\u53d6\u6d88\u606f connect-test \u5e76\u5c06\u5176\u5199\u5165\u6587\u4ef6 test.sink.txt \u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u8f93\u51fa\u6587\u4ef6\u7684\u5185\u5bb9\u6765\u9a8c\u8bc1\u6570\u636e\u662f\u5426\u5df2\u901a\u8fc7\u6574\u4e2a\u7ba1\u9053\u4f20\u9012\uff1a > more test.sink.txt foo bar \u8bf7\u6ce8\u610f\uff0c\u6570\u636e\u5b58\u50a8\u5728 Kafka topic \u4e2d connect-test \uff0c\u56e0\u6b64\u6211\u4eec\u8fd8\u53ef\u4ee5\u8fd0\u884c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u6765\u67e5\u770b\u4e3b\u9898\u4e2d\u7684\u6570\u636e\uff08\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u8d39\u8005\u4ee3\u7801\u6765\u5904\u7406\u5b83\uff09\uff1a > bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic connect-test --from-beginning {\"schema\":{\"type\":\"string\",\"optional\":false},\"payload\":\"foo\"} {\"schema\":{\"type\":\"string\",\"optional\":false},\"payload\":\"bar\"} ... \u8fde\u63a5\u5668\u7ee7\u7eed\u5904\u7406\u6570\u636e\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06\u6570\u636e\u6dfb\u52a0\u5230\u6587\u4ef6\u5e76\u67e5\u770b\u5b83\u5728\u7ba1\u9053\u4e2d\u79fb\u52a8\uff1a > echo Another line>> test.txt \u60a8\u5e94\u8be5\u770b\u5230\u8be5\u884c\u51fa\u73b0\u5728\u63a7\u5236\u53f0\u4f7f\u7528\u8005\u8f93\u51fa\u548c\u63a5\u6536\u5668\u6587\u4ef6\u4e2d\u3002","title":"\u7b2c 6 \u6b65\uff1a\u4f7f\u7528 KAFKA CONNECT \u5c06\u6570\u636e\u4f5c\u4e3a\u4e8b\u4ef6\u6d41\u5bfc\u5165/\u5bfc\u51fa"},{"location":"1/#7-kafka-streams","text":"\u5c06\u6570\u636e\u4f5c\u4e3a\u4e8b\u4ef6\u5b58\u50a8\u5728 Kafka \u4e2d\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u9002\u7528\u4e8e Java/Scala \u7684Kafka Streams \u5ba2\u6237\u7aef\u5e93 \u5904\u7406\u6570\u636e \u3002\u5b83\u5141\u8bb8\u60a8\u5b9e\u73b0\u5173\u952e\u4efb\u52a1\u5b9e\u65f6\u5e94\u7528\u7a0b\u5e8f\u548c\u5fae\u670d\u52a1\uff0c\u5176\u4e2d\u8f93\u5165\u548c/\u6216\u8f93\u51fa\u6570\u636e\u5b58\u50a8\u5728 Kafka \u4e3b\u9898\u4e2d\u3002Kafka Streams \u5c06\u5ba2\u6237\u7aef\u7f16\u5199\u548c\u90e8\u7f72\u6807\u51c6 Java \u548c Scala \u5e94\u7528\u7a0b\u5e8f\u7684\u7b80\u5355\u6027\u4e0e Kafka \u670d\u52a1\u5668\u7aef\u96c6\u7fa4\u6280\u672f\u7684\u4f18\u70b9\u76f8\u7ed3\u5408\uff0c\u4f7f\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u9ad8\u5ea6\u53ef\u6269\u5c55\u6027\u3001\u5f39\u6027\u3001\u5bb9\u9519\u6027\u548c\u5206\u5e03\u5f0f\u6027\u3002\u8be5\u5e93\u652f\u6301\u4e00\u6b21\u6027\u5904\u7406\u3001\u6709\u72b6\u6001\u64cd\u4f5c\u548c\u805a\u5408\u3001\u7a97\u53e3\u3001\u8fde\u63a5\u3001\u57fa\u4e8e\u4e8b\u4ef6\u65f6\u95f4\u7684\u5904\u7406\u7b49\u7b49\u3002 \u4e3a\u4e86\u8ba9\u60a8\u521d\u6b65\u4f53\u9a8c\u4e00\u4e0b\uff0c\u4ee5\u4e0b\u662f\u5982\u4f55\u5b9e\u73b0\u6d41\u884c\u7684 WordCount \u7b97\u6cd5\uff1a KStream<String, String> textLines = builder.stream(\"quickstart-events\"); KTable<String, Long> wordCounts = textLines .flatMapValues(line -> Arrays.asList(line.toLowerCase().split(\" \"))) .groupBy((keyIgnored, word) -> word) .count(); wordCounts.toStream().to(\"output-topic\", Produced.with(Serdes.String(), Serdes.Long())); Kafka Streams \u6f14\u793a \u548c \u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u6559\u7a0b \u6f14\u793a\u4e86\u5982\u4f55\u4ece\u5934\u5230\u5c3e\u7f16\u7801\u548c\u8fd0\u884c\u6b64\u7c7b\u6d41\u5e94\u7528\u7a0b\u5e8f\u3002","title":"\u7b2c 7 \u6b65\uff1a\u4f7f\u7528 KAFKA STREAMS \u5904\u7406\u60a8\u7684\u4e8b\u4ef6"},{"location":"1/#8kafka","text":"\u73b0\u5728\u60a8\u5df2\u7ecf\u5b8c\u6210\u4e86\u5feb\u901f\u5165\u95e8\uff0c\u53ef\u4ee5\u968f\u610f\u62c6\u9664 Kafka \u73af\u5883\uff0c\u6216\u8005\u7ee7\u7eed\u5c1d\u8bd5\u3002 Ctrl-C \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u8fd9\u6837\u505a\uff0c \u8bf7\u4f7f\u7528 \u505c\u6b62\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u3002 \u4f7f\u7528 \u505c\u6b62 Kafka \u4ee3\u7406 Ctrl-C \u3002 \u6700\u540e\uff0c\u5982\u679c\u9075\u5faa Kafka with ZooKeeper \u90e8\u5206\uff0c\u8bf7\u4f7f\u7528 \u505c\u6b62 ZooKeeper \u670d\u52a1\u5668 Ctrl-C \u3002 \u5982\u679c\u60a8\u8fd8\u60f3\u5220\u9664\u672c\u5730 Kafka \u73af\u5883\u7684\u4efb\u4f55\u6570\u636e\uff0c\u5305\u62ec\u60a8\u5728\u6b64\u8fc7\u7a0b\u4e2d\u521b\u5efa\u7684\u4efb\u4f55\u4e8b\u4ef6\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a $ rm -rf /tmp/kafka-logs /tmp/zookeeper /tmp/kraft-combined-logs","title":"\u6b65\u9aa48\uff1a\u7ec8\u6b62KAFKA\u73af\u5883"},{"location":"1/#_12","text":"\u60a8\u5df2\u6210\u529f\u5b8c\u6210 Apache Kafka \u5feb\u901f\u5165\u95e8\u3002 \u8981\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u6211\u4eec\u5efa\u8bae\u6267\u884c\u4ee5\u4e0b\u540e\u7eed\u6b65\u9aa4\uff1a \u9605\u8bfb\u7b80\u77ed\u7684 \u7b80\u4ecb \uff0c\u4e86\u89e3 Kafka \u5728\u9ad8\u5c42\u6b21\u4e0a\u7684\u5de5\u4f5c\u539f\u7406\u3001\u4e3b\u8981\u6982\u5ff5\u4ee5\u53ca\u4e0e\u5176\u4ed6\u6280\u672f\u7684\u6bd4\u8f83\u3002\u8981\u66f4\u8be6\u7ec6\u5730\u4e86\u89e3 Kafka\uff0c\u8bf7\u8bbf\u95ee \u6587\u6863 \u3002 \u6d4f\u89c8 \u7528\u4f8b\uff0c \u4e86\u89e3\u6211\u4eec\u5168\u7403\u793e\u533a\u4e2d\u7684\u5176\u4ed6\u7528\u6237\u5982\u4f55\u4ece Kafka \u4e2d\u83b7\u53d6\u4ef7\u503c\u3002 \u52a0\u5165 \u5f53\u5730\u7684 Kafka \u805a\u4f1a\u5c0f\u7ec4 \uff0c \u89c2\u770bKafka \u793e\u533a\u4e3b\u8981\u4f1a\u8bae Kafka Summit \u7684\u6f14\u8bb2\u3002","title":"\u606d\u559c\uff01"},{"location":"1/#14","text":"\u5728\u4e3b\u53d1\u884c\u7248\u4e4b\u5916\uff0c\u6709\u5927\u91cf\u4e0e Kafka \u96c6\u6210\u7684\u5de5\u5177\u3002\u751f\u6001 \u7cfb\u7edf\u9875\u9762 \u5217\u51fa\u4e86\u5176\u4e2d\u7684\u8bb8\u591a\u5185\u5bb9\uff0c\u5305\u62ec\u6d41\u5904\u7406\u7cfb\u7edf\u3001Hadoop \u96c6\u6210\u3001\u76d1\u63a7\u548c\u90e8\u7f72\u5de5\u5177\u3002","title":"1.4 \u751f\u6001\u7cfb\u7edf"},{"location":"1/#15","text":"","title":"1.5 \u65e7\u7248\u672c\u5347\u7ea7"},{"location":"1/#08x-34x-351","text":"\u6240\u6709\u5347\u7ea7\u6b65\u9aa4\u4e0e\u5347\u7ea7\u5230 3.5.0 \u76f8\u540c","title":"\u4ece 0.8.x \u5230 3.4.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.5.1"},{"location":"1/#351","text":"\u5c06\u4f9d\u8d56\u9879 snappy-java \u5347\u7ea7\u5230\u4e0d\u6613\u53d7 CVE-2023-34455 \u5f71\u54cd\u7684\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u5728 Kafka CVE \u5217\u8868\u4e2d\u627e\u5230\u6709\u5173 CVE \u7684\u66f4\u591a\u4fe1\u606f \u3002 \u4fee\u590d\u4e86 3.3.0 \u4e2d\u5f15\u5165\u7684\u56de\u5f52\uff0c\u8be5\u56de\u5f52\u5bfc\u81f4 security.protocol \u914d\u7f6e\u503c\u4ec5\u9650\u4e8e\u5927\u5199\u3002\u4fee\u590d\u540e\uff0c security.protocol \u503c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-15053 \u3002","title":"3.5.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-34x-350","text":"","title":"\u4ece 0.8.x \u5230 3.4.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.5.0"},{"location":"1/#350","text":"Kafka Streams \u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u72b6\u6001\u5b58\u50a8\u7c7b\u578b\uff0c\u5373\u7248\u672c\u5316\u952e\u503c\u5b58\u50a8\uff0c\u7528\u4e8e\u6bcf\u4e2a\u952e\u5b58\u50a8\u591a\u4e2a\u8bb0\u5f55\u7248\u672c\uff0c\u4ece\u800c\u4f7f\u5e26\u65f6\u95f4\u6233\u7684\u68c0\u7d22\u64cd\u4f5c\u80fd\u591f\u8fd4\u56de\u6307\u5b9a\u65f6\u95f4\u6233\u7684\u6700\u65b0\u8bb0\u5f55\uff08\u6bcf\u4e2a\u952e\uff09\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-889 \u548c KIP-914 \u3002 \u5982\u679c\u5728 DSL \u4e2d\u4f7f\u7528\u65b0\u7684\u5b58\u50a8\u7c7b\u578b\uff0c\u5219\u5c06\u5e94\u7528\u6539\u8fdb\u7684\u5904\u7406\u8bed\u4e49\uff0c\u5982 KIP-914 \u4e2d\u6240\u8ff0\u3002 KTable \u805a\u5408\u8bed\u4e49\u901a\u8fc7KIP-904 \u5f97\u5230\u4e86\u8fdb\u4e00\u6b65\u6539\u8fdb \uff0c\u73b0\u5728\u907f\u514d\u4e86\u865a\u5047\u7684\u4e2d\u95f4\u7ed3\u679c\u3002 Kafka Streams ProductionExceptionHandler \u901a\u8fc7 KIP-399 \u8fdb\u884c\u4e86\u6539\u8fdb\uff0c\u73b0\u5728\u8fd8\u6db5\u76d6\u4e86\u5e8f\u5217\u5316\u9519\u8bef\u3002 MirrorMaker \u73b0\u5728\u9ed8\u8ba4\u4f7f\u7528\u589e\u91cfAlterConfigs API \u6765\u540c\u6b65\u4e3b\u9898\u914d\u7f6e\uff0c\u800c\u4e0d\u662f\u5df2\u5f03\u7528\u7684 alterConfigs API\u3002\u5f15\u5165\u4e86\u4e00\u4e2a\u540d\u4e3a \u7684\u65b0\u8bbe\u7f6e\uff0c use.incremental.alter.configs \u5141\u8bb8\u7528\u6237\u63a7\u5236\u8981\u4f7f\u7528\u7684 API\u3002\u5f53\u59cb\u7ec8\u4f7f\u7528\u589e\u91cfAlterConfigs API \u65f6\uff0c\u6b64\u65b0\u8bbe\u7f6e\u5df2\u6807\u8bb0\u4e3a\u5df2\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\u4e2d\u5220\u9664\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-894 \u3002 JmxTool\u3001EndToEndLatency\u3001StreamsResetter\u3001ConsumerPerformance \u548c ClusterTool \u5df2\u8fc1\u79fb\u5230\u5de5\u5177\u6a21\u5757\u3002\u201ckafka.tools\u201d\u5305\u5df2\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\u4e2d\u66f4\u6539\u4e3a\u201corg.apache.kafka.tools\u201d\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KAFKA-14525 \u3002","title":"3.5.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#zookeeper","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6b65\u9aa4 5 \u4e2d\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.4 \u3001 3.3 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.4 \u3001 3.3 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.5 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.5 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u5347\u7ea7\u57fa\u4e8eZooKeeper\u7684\u96c6\u7fa4"},{"location":"1/#kraft","text":"\u5982\u679c\u60a8\u662f\u4ece 3.3.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6b65\u9aa4 3 \u4e2d\u7684\u6ce8\u91ca\u3002\u5c06metadata.version\u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u52303.3-IV0\u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002 \u4e00\u65e6\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u5f97\u5230\u9a8c\u8bc1\uff0c\u901a\u8fc7\u8fd0\u884c\u6765\u63d0\u5347metadata.version ./bin/kafka-features.sh upgrade --metadata 3.5 \u8bf7\u6ce8\u610f\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u7248\u672c\u5347\u7ea7\u540e\u65e0\u6cd5\u964d\u7ea7\u5230\u9884\u751f\u4ea7 3.0.x\u30013.1.x \u6216 3.2.x \u7248\u672c\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u964d\u7ea7\u5230\u751f\u4ea7\u7248\u672c\uff0c\u4f8b\u5982 3.3-IV0\u30013.3-IV1 \u7b49\u3002","title":"\u5347\u7ea7\u57fa\u4e8eKRaft\u7684\u96c6\u7fa4"},{"location":"1/#08x-33x-340","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.3 \u3001 3.2 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.3 \u3001 3.2 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.4 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.4 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 3.3.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.4.0"},{"location":"1/#kraft-30x-33x-340","text":"\u5982\u679c\u60a8\u662f\u4ece 3.3.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u6ce8\u91ca\u3002\u5c06metadata.version\u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u52303.3-IV0\u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002 \u4e00\u65e6\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u5f97\u5230\u9a8c\u8bc1\uff0c\u901a\u8fc7\u8fd0\u884c\u6765\u63d0\u5347metadata.version ./bin/kafka-features.sh upgrade --metadata 3.4 \u8bf7\u6ce8\u610f\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u7248\u672c\u5347\u7ea7\u540e\u65e0\u6cd5\u964d\u7ea7\u5230\u9884\u751f\u4ea7 3.0.x\u30013.1.x \u6216 3.2.x \u7248\u672c\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u964d\u7ea7\u5230\u751f\u4ea7\u7248\u672c\uff0c\u4f8b\u5982 3.3-IV0\u30013.3-IV1 \u7b49\u3002","title":"\u5c06\u57fa\u4e8e KRaft \u7684\u96c6\u7fa4\u4ece 3.0.x \u5230 3.3.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.4.0"},{"location":"1/#340","text":"\u81ea Apache Kafka 3.4.0 \u8d77\uff0c\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e2a\u7cfb\u7edf\u5c5e\u6027\uff08\u201corg.apache.kafka.disallowed.login.modules\u201d\uff09\u6765\u7981\u7528 SASL JAAS \u914d\u7f6e\u4e2d\u6709\u95ee\u9898\u7684\u767b\u5f55\u6a21\u5757\u4f7f\u7528\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u201ccom.sun.security.auth.module.JndiLoginModule\u201d\u5728 Apache Kafka 3.4.0 \u4e2d\u88ab\u7981\u7528\u3002","title":"3.4.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-32x-331","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.2 \u3001 3.1 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.2 \u3001 3.1 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.3 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.3 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 3.2.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.3.1"},{"location":"1/#kraft-30x-32x-331","text":"\u5982\u679c\u60a8\u8981\u4ece 3.3.1 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u6ce8\u91ca\u3002\u5c06metadata.version\u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u52303.3-IV0\u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002 \u4e00\u65e6\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u5f97\u5230\u9a8c\u8bc1\uff0c\u901a\u8fc7\u8fd0\u884c\u6765\u63d0\u5347metadata.version ./bin/kafka-features.sh upgrade --metadata 3.3 \u8bf7\u6ce8\u610f\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u7248\u672c\u5347\u7ea7\u540e\u65e0\u6cd5\u964d\u7ea7\u5230\u9884\u751f\u4ea7 3.0.x\u30013.1.x \u6216 3.2.x \u7248\u672c\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u964d\u7ea7\u5230\u751f\u4ea7\u7248\u672c\uff0c\u4f8b\u5982 3.3-IV0\u30013.3-IV1 \u7b49\u3002","title":"\u5c06\u57fa\u4e8e KRaft \u7684\u96c6\u7fa4\u4ece 3.0.x \u5230 3.2.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.3.1"},{"location":"1/#331","text":"KRaft \u6a21\u5f0f\u5df2\u4e3a\u65b0\u96c6\u7fa4\u505a\u597d\u751f\u4ea7\u51c6\u5907\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff08\u5305\u62ec\u9650\u5236\uff09\uff0c \u8bf7\u53c2\u9605 KIP-833 \u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7528\u4e8e\u6ca1\u6709\u952e\u7684\u8bb0\u5f55\u7684\u5206\u533a\u5668\u5df2\u5f97\u5230\u6539\u8fdb\uff0c\u4ee5\u907f\u514d\u5f53\u4e00\u4e2a\u6216\u591a\u4e2a\u4ee3\u7406\u901f\u5ea6\u7f13\u6162\u65f6\u51fa\u73b0\u75c5\u6001\u884c\u4e3a\u3002\u65b0\u903b\u8f91\u53ef\u80fd\u4f1a\u5f71\u54cd\u6279\u5904\u7406\u884c\u4e3a\uff0c\u53ef\u4ee5\u4f7f\u7528 batch.size \u548c/\u6216 linger.ms \u914d\u7f6e\u8bbe\u7f6e\u6765\u8c03\u6574\u6279\u5904\u7406\u884c\u4e3a\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u6062\u590d\u4ee5\u524d\u7684\u884c\u4e3a partitioner.class=org.apache.kafka.clients.producer.internals.DefaultPartitioner \u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-794 \u3002 \u5982\u4e0a\u6240\u8ff0\uff0c\u73b0\u5728 KRaft \u96c6\u7fa4\u7684\u5347\u7ea7\u8fc7\u7a0b\u4e0e\u57fa\u4e8e ZK \u7684\u96c6\u7fa4\u7565\u6709\u4e0d\u540c\u3002 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684 API\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c addMetricIfAbsent \u5b83\u5c06 Metrics \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6307\u6807\uff1b\u5982\u679c\u5df2\u7ecf\u6ce8\u518c\uff0c\u5219\u8fd4\u56de\u76f8\u540c\u7684\u6307\u6807\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u884c\u4e3a\u4e0e API \u4e0d\u540c\uff0c\u540e\u8005\u5728\u5c1d\u8bd5\u521b\u5efa\u5df2\u5b58\u5728\u7684\u6307\u6807\u65f6 addMetric \u629b\u51fa\u3002 IllegalArgumentException \uff08 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-843 \uff09\u3002","title":"3.3.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-31x-320","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.1 \u3001 3.0 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.1 \u3001 3.0 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.2 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.2 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 3.1.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.2.0"},{"location":"1/#320","text":"\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u542f\u7528\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u6027\u3002\u5f53\u5411 2.8.0 \u4e4b\u524d\u7684\u7ecf\u7eaa\u5546\u751f\u4ea7\u65f6\uff0c IDEMPOTENT_WRITE \u9700\u8981\u8bb8\u53ef\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5KIP-679 \u7684\u517c\u5bb9\u6027\u90e8\u5206 \u3002\u5728 3.0.0 \u548c 3.1.0 \u4e2d\uff0c\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u4e86\u5e94\u7528\u6b64\u9ed8\u8ba4\u503c\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5e42\u7b49\u6027\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\uff08\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \uff09\u3002\u6b64\u95ee\u9898\u5df2\u4fee\u590d\uff0c\u9ed8\u8ba4\u503c\u5df2\u5728 3.0.1\u30013.1.1 \u548c 3.2.0 \u4e2d\u6b63\u786e\u5e94\u7528\u3002 \u4e00\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u662f Connect\uff0c\u5b83\u9ed8\u8ba4\u7981\u7528\u6240\u6709\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u884c\u4e3a\uff0c\u4ee5\u4fbf\u7edf\u4e00\u652f\u6301\u4f7f\u7528\u5404\u79cd Kafka \u4ee3\u7406\u7248\u672c\u3002\u7528\u6237\u53ef\u4ee5\u66f4\u6539\u6b64\u884c\u4e3a\uff0c\u4ee5\u901a\u8fc7 Connect Worker \u548c/\u6216\u8fde\u63a5\u5668\u914d\u7f6e\u4e3a\u90e8\u5206\u6216\u6240\u6709\u751f\u4ea7\u8005\u542f\u7528\u5e42\u7b49\u6027\u3002Connect \u53ef\u80fd\u4f1a\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u9ed8\u8ba4\u542f\u7528\u5e42\u7b49\u751f\u4ea7\u8005\u3002 \u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0cKafka \u7528 reload4j \u53d6\u4ee3\u4e86 log4j\u3002\u8fd9\u4ec5\u5f71\u54cd\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u7684\u6a21\u5757\uff08 connect-runtime \u548c kafka-tools \u662f\u4e24\u4e2a\u8fd9\u6837\u7684\u793a\u4f8b\uff09\u3002\u8bb8\u591a\u6a21\u5757\uff08\u5305\u62ec \uff09 kafka-clients \u5c06\u5176\u7559\u7ed9\u5e94\u7528\u7a0b\u5e8f\u6765\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u3002 \u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728reload4j \u627e\u5230\u3002\u4f9d\u8d56\u4e8e Kafka \u9879\u76ee\u4e2d\u53d7\u5f71\u54cd\u6a21\u5757\u7684\u9879\u76ee\u5e94\u4f7f\u7528 slf4j-log4j12 \u7248\u672c 1.7.35 \u6216\u66f4\u9ad8\u7248\u672c \u6216 slf4j-reload4j \u4ee5\u907f\u514d \u6e90\u81ea\u65e5\u5fd7\u8bb0\u5f55\u6846\u67b6\u7684\u53ef\u80fd\u7684\u517c\u5bb9\u6027\u95ee\u9898 \u3002 \u793a\u4f8b\u8fde\u63a5\u5668 FileStreamSourceConnector \u548c FileStreamSinkConnector \u5df2\u4ece\u9ed8\u8ba4\u7c7b\u8def\u5f84\u4e2d\u5220\u9664\u3002\u8981\u5728 Kafka Connect \u72ec\u7acb\u6216\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\u4f7f\u7528\u5b83\u4eec\uff0c\u9700\u8981\u663e\u5f0f\u6dfb\u52a0\u5b83\u4eec\uff0c\u4f8b\u5982 CLASSPATH=./lib/connect-file-3.2.0.jar ./bin/connect-distributed.sh .","title":"3.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-30x-310","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.0 \u3001 2.8 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 3.0 \u3001 2.8 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.1 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.1 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 3.0.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.1.0"},{"location":"1/#311","text":"\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u542f\u7528\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u6027\u3002\u5f53\u5411 2.8.0 \u4e4b\u524d\u7684\u7ecf\u7eaa\u5546\u751f\u4ea7\u65f6\uff0c IDEMPOTENT_WRITE \u9700\u8981\u8bb8\u53ef\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5KIP-679 \u7684\u517c\u5bb9\u6027\u90e8\u5206 \u3002\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u4e86\u751f\u4ea7\u8005\u5e42\u7b49\u6027\u9ed8\u8ba4\u503c\u7684\u5e94\u7528\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5b83\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \u3002 \u6b64\u95ee\u9898\u5df2\u4fee\u590d\u5e76\u4e14\u9ed8\u8ba4\u503c\u5df2\u6b63\u786e\u5e94\u7528\u3002 \u4e00\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u662f Connect\uff0c\u5b83\u9ed8\u8ba4\u7981\u7528\u6240\u6709\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u884c\u4e3a\uff0c\u4ee5\u4fbf\u7edf\u4e00\u652f\u6301\u4f7f\u7528\u5404\u79cd Kafka \u4ee3\u7406\u7248\u672c\u3002\u7528\u6237\u53ef\u4ee5\u66f4\u6539\u6b64\u884c\u4e3a\uff0c\u4ee5\u901a\u8fc7 Connect Worker \u548c/\u6216\u8fde\u63a5\u5668\u914d\u7f6e\u4e3a\u90e8\u5206\u6216\u6240\u6709\u751f\u4ea7\u8005\u542f\u7528\u5e42\u7b49\u6027\u3002Connect \u53ef\u80fd\u4f1a\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u9ed8\u8ba4\u542f\u7528\u5e42\u7b49\u751f\u4ea7\u8005\u3002 \u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0cKafka \u7528 reload4j \u53d6\u4ee3\u4e86 log4j\u3002\u8fd9\u4ec5\u5f71\u54cd\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u7684\u6a21\u5757\uff08 connect-runtime \u548c kafka-tools \u662f\u4e24\u4e2a\u8fd9\u6837\u7684\u793a\u4f8b\uff09\u3002\u8bb8\u591a\u6a21\u5757\uff08\u5305\u62ec \uff09 kafka-clients \u5c06\u5176\u7559\u7ed9\u5e94\u7528\u7a0b\u5e8f\u6765\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u3002 \u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728reload4j \u627e\u5230\u3002\u4f9d\u8d56\u4e8e Kafka \u9879\u76ee\u4e2d\u53d7\u5f71\u54cd\u6a21\u5757\u7684\u9879\u76ee\u5e94\u4f7f\u7528 slf4j-log4j12 \u7248\u672c 1.7.35 \u6216\u66f4\u9ad8\u7248\u672c \u6216 slf4j-reload4j \u4ee5\u907f\u514d \u6e90\u81ea\u65e5\u5fd7\u8bb0\u5f55\u6846\u67b6\u7684\u53ef\u80fd\u7684\u517c\u5bb9\u6027\u95ee\u9898 \u3002","title":"3.1.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#310","text":"Apache Kafka \u652f\u6301 Java 17\u3002 \u4ee5\u4e0b\u6307\u6807\u5df2\u88ab\u5f03\u7528\uff1a bufferpool-wait-time-total \u3001 io-waittime-total \u548c iotime-total \u3002\u8bf7\u4f7f\u7528 bufferpool-wait-time-ns-total \u3001 io-wait-time-ns-total \u3001 \u548c io-time-ns-total \u4ee3\u66ff\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-773 \u3002 IBP 3.1 \u5c06\u4e3b\u9898 ID \u4f5c\u4e3aKIP-516 \u7684\u4e00\u90e8\u5206\u5f15\u5165 FetchRequest \u3002","title":"3.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-28x-301","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.8 \u3001 2.7 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.8 \u3001 2.7 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 3.0 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 3.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 2.8.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 3.0.1"},{"location":"1/#301","text":"\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u542f\u7528\u751f\u4ea7\u8005\u7684\u5e42\u7b49\u6027\u3002\u5f53\u5411 2.8.0 \u4e4b\u524d\u7684\u7ecf\u7eaa\u5546\u751f\u4ea7\u65f6\uff0c IDEMPOTENT_WRITE \u9700\u8981\u8bb8\u53ef\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5KIP-679 \u7684\u517c\u5bb9\u6027\u90e8\u5206 \u3002\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u4e86\u751f\u4ea7\u8005\u5e42\u7b49\u6027\u9ed8\u8ba4\u503c\u7684\u5e94\u7528\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5b83\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \u3002 \u6b64\u95ee\u9898\u5df2\u4fee\u590d\u5e76\u4e14\u9ed8\u8ba4\u503c\u5df2\u6b63\u786e\u5e94\u7528\u3002","title":"3.0.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#300","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u751f\u4ea7\u8005\u5177\u6709\u66f4\u5f3a\u7684\u4ea4\u4ed8\u4fdd\u8bc1\uff1a idempotence \u5df2\u542f\u7528\u5e76 acks \u8bbe\u7f6e all \u4e3a\u800c\u4e0d\u662f 1 \u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-679 \u3002\u5728 3.0.0 \u548c 3.1.0 \u4e2d\uff0c\u4e00\u4e2a\u9519\u8bef\u963b\u6b62\u5e94\u7528\u5e42\u7b49\u9ed8\u8ba4\u503c\uff0c\u8fd9\u610f\u5473\u7740\u9664\u975e\u7528\u6237\u660e\u786e\u8bbe\u7f6e enable.idempotence \u4e3a true\uff0c\u5426\u5219\u5b83\u4ecd\u7136\u5904\u4e8e\u7981\u7528\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u8be5\u9519\u8bef\u5e76\u4e0d\u5f71\u54cd acks=all \u66f4\u6539\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KAFKA-13598 \u3002 \u6b64\u95ee\u9898\u5df2\u4fee\u590d\uff0c\u9ed8\u8ba4\u503c\u5df2\u5728 3.0.1\u30013.1.1 \u548c 3.2.0 \u4e2d\u6b63\u786e\u5e94\u7528\u3002 \u81ea Apache Kafka 3.0 \u8d77\uff0cJava 8 \u548c Scala 2.12 \u652f\u6301\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728 Apache Kafka 4.0 \u4e2d\u5220\u9664\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-750 \u548c KIP-751 \u3002 ZooKeeper\u5df2\u5347\u7ea7\u81f33.6.3\u7248\u672c\u3002 KRaft \u6a21\u5f0f\u7684\u9884\u89c8\u7248\u53ef\u7528\uff0c\u4f46\u65e0\u6cd5\u4ece 2.8 \u65e9\u671f\u8bbf\u95ee\u7248\u672c\u5347\u7ea7\u5230\u8be5\u6a21\u5f0f\u3002 config/kraft/README.md \u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605\u6587\u4ef6\u3002 \u53d1\u5e03 tarball \u4e0d\u518d\u5305\u542b\u6d4b\u8bd5\u3001\u6e90\u3001javadoc \u548c\u6d4b\u8bd5\u6e90 jar\u3002\u8fd9\u4e9b\u4ecd\u7136\u53d1\u5e03\u5230 Maven \u4e2d\u592e\u5b58\u50a8\u5e93\u3002 \u73b0\u5728\uff0c\u8fd0\u884c\u65f6\u7c7b\u8def\u5f84\uff08\u800c\u4e0d\u662f\u7f16\u8bd1\u548c\u8fd0\u884c\u65f6\u7c7b\u8def\u5f84\uff09\u4e2d\u63d0\u4f9b\u4e86 \u8bb8\u591a\u5b9e\u73b0\u4f9d\u8d56\u9879 jar \u3002\u5347\u7ea7\u540e\u7684\u7f16\u8bd1\u9519\u8bef\u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u6dfb\u52a0\u7f3a\u5c11\u7684\u4f9d\u8d56\u9879 jar \u6216\u66f4\u65b0\u5e94\u7528\u7a0b\u5e8f\u4ee5\u4e0d\u4f7f\u7528\u5185\u90e8\u7c7b\u6765\u4fee\u590d\u3002 \u6d88\u8d39\u8005\u914d\u7f6e\u7684\u9ed8\u8ba4\u503c session.timeout.ms \u4ece 10 \u79d2\u589e\u52a0\u5230 45 \u79d2\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-735 \u3002 \u4ee3\u7406\u914d\u7f6e log.message.format.version \u548c\u4e3b\u9898\u914d\u7f6e message.format.version \u5df2\u88ab\u5f03\u7528\u3002\u4e24\u79cd\u914d\u7f6e\u7684\u503c\u59cb\u7ec8\u5047\u5b9a\u4e3a 3.0 if\u6216 inter.broker.protocol.version \u66f4\u9ad8 3.0 \u3002\u5982\u679c\u8bbe\u7f6e\u4e86 log.message.format.version \u6216 message.format.version \uff0c\u6211\u4eec\u5efa\u8bae\u5728\u5347\u7ea7\u5230 3.0 \u7684\u540c\u65f6\u6e05\u9664\u5b83\u4eec inter.broker.protocol.version \u3002\u8fd9\u5c06\u907f\u514d\u964d\u7ea7\u65f6\u6f5c\u5728\u7684\u517c\u5bb9\u6027\u95ee\u9898 inter.broker.protocol.version \u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-724 \u3002 Streams API \u5220\u9664\u4e86\u5728 2.5.0 \u6216\u66f4\u65e9\u7248\u672c\u4e2d\u5df2\u5f03\u7528\u7684\u6240\u6709\u5df2\u5f03\u7528\u7684 API\u3002\u6709\u5173\u5df2\u5220\u9664 API \u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u6bd4\u8f83\u8be6\u7ec6\u7684 Kafka Streams \u5347\u7ea7\u8bf4\u660e\u3002 Kafka Streams \u4e0d\u518d\u5bf9\u201cconnect:json\u201d\u6a21\u5757\u6709\u7f16\u8bd1\u65f6\u4f9d\u8d56\u6027 ( KAFKA-5146 )\u3002\u4f9d\u8d56\u8fd9\u79cd\u4f20\u9012\u4f9d\u8d56\u7684\u9879\u76ee\u5fc5\u987b\u663e\u5f0f\u58f0\u660e\u5b83\u3002 \u901a\u8fc7\u6307\u5b9a\u7684\u81ea\u5b9a\u4e49\u4e3b\u4f53\u6784\u5efa\u5668\u5b9e\u73b0 principal.builder.class \u73b0\u5728\u5fc5\u987b\u5b9e\u73b0\u8be5 KafkaPrincipalSerde \u63a5\u53e3\u4ee5\u5141\u8bb8\u5728\u4ee3\u7406\u4e4b\u95f4\u8f6c\u53d1\u3002\u6709\u5173 KafkaPrincipalSerde \u4f7f\u7528\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-590 \u3002 \u8bb8\u591a\u5df2\u5f03\u7528\u7684\u7c7b\u3001\u65b9\u6cd5\u548c\u5de5\u5177\u5df2\u4ece\u3001 \u548c clients \u6a21\u5757 connect \u4e2d\u5220\u9664\uff1a core``tools Scala Authorizer \u548c SimpleAclAuthorizer \u76f8\u5173\u7c7b\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u4f7f\u7528Java Authorizer \u548c AclAuthorizer \u4ee3\u66ff\u3002 \u8be5 Metric#value() \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\uff08 KAFKA-12573 \uff09\u3002 \u548c Sum \u7c7b Total \u5df2\u88ab\u5220\u9664\uff08 KAFKA-12584 \uff09\u3002\u8bf7\u4f7f\u7528 WindowedSum and CumulativeSum \u4ee3\u66ff\u3002 \u548c Count \u7c7b SampledTotal \u88ab\u5220\u9664\u3002\u8bf7\u5206\u522b\u4f7f\u7528 WindowedCount \u548c WindowedSum \u6765\u4ee3\u66ff\u3002 \u3001 PrincipalBuilder \u548c DefaultPrincipalBuilder \u7c7b ResourceFilter \u5df2\u88ab\u5220\u9664\u3002 SslConfigs \u3001 SaslConfigs \u548c AclBinding \u4e2d \u5220\u9664\u4e86\u5404\u79cd\u5e38\u91cf\u548c\u6784\u9020\u51fd\u6570 AclBindingFilter \u3002 \u8fd9\u4e9b Admin.electedPreferredLeaders() \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 Admin.electLeaders \u3002 \u547d\u4ee4\u884c\u5de5\u5177 kafka-preferred-replica-election \u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 kafka-leader-election \u3002 \u8be5 --zookeeper \u9009\u9879\u5df2\u4ece kafka-topics \u548c kafka-reassign-partitions \u547d\u4ee4\u884c\u5de5\u5177\u4e2d\u5220\u9664\u3002\u8bf7\u6539\u7528 --bootstrap-server \u3002 \u5728 kafka-configs \u547d\u4ee4\u884c\u5de5\u5177\u4e2d\uff0c\u8be5 --zookeeper \u9009\u9879\u4ec5\u652f\u6301\u66f4\u65b0 SCRAM \u51ed\u8bc1\u914d\u7f6e \u4ee5\u53ca \u5728\u4ee3\u7406\u672a\u8fd0\u884c\u65f6\u63cf\u8ff0/\u66f4\u65b0\u52a8\u6001\u4ee3\u7406\u914d\u7f6e \u3002\u8bf7\u7528\u4e8e --bootstrap-server \u5176\u4ed6\u914d\u7f6e\u64cd\u4f5c\u3002 \u6784\u9020\u51fd\u6570 ConfigEntry \u88ab\u5220\u9664\uff08 KAFKA-12577 \uff09\u3002\u8bf7\u6539\u7528\u5269\u4f59\u7684\u516c\u5171\u6784\u9020\u51fd\u6570\u3002 default \u5ba2\u6237\u7aef\u914d\u7f6e\u7684\u914d\u7f6e\u503c client.dns.lookup \u5df2\u88ab\u5220\u9664\u3002\u4e07\u4e00\u60a8\u663e\u5f0f\u8bbe\u7f6e\u6b64\u914d\u7f6e\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4fdd\u7559\u8be5\u914d\u7f6e\u672a\u8bbe\u7f6e\uff08 use_all_dns_ips \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\u3002 \u548c ExtendedDeserializer \u7c7b ExtendedSerializer \u5df2\u88ab\u5220\u9664\u3002\u8bf7\u4f7f\u7528 Deserializer and Serializer \u4ee3\u66ff\u3002 \u8be5 close(long, TimeUnit) \u65b9\u6cd5\u5df2\u4ece\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u7ba1\u7406\u5ba2\u6237\u7aef\u4e2d\u5220\u9664\u3002\u8bf7\u4f7f\u7528 close(Duration) . \u548c ConsumerConfig.addDeserializerToConfig \u65b9\u6cd5 ProducerConfig.addSerializerToConfig \u5df2\u88ab\u5220\u9664\u3002\u8fd9\u4e9b\u65b9\u6cd5\u65e0\u610f\u6210\u4e3a\u516c\u5171 API\uff0c\u5e76\u4e14\u6ca1\u6709\u66ff\u4ee3\u65b9\u6cd5\u3002 \u8be5 NoOffsetForPartitionException.partition() \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 partitions() \u3002 \u9ed8\u8ba4\u503c partition.assignment.strategy \u66f4\u6539\u4e3a\u201c[RangeAssignor, CooperativeStickyAssignor]\u201d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u4f7f\u7528 RangeAssignor\uff0c\u4f46\u5141\u8bb8\u5347\u7ea7\u5230 CooperativeStickyAssignor\uff0c\u53ea\u9700\u4e00\u6b21\u6eda\u52a8\u5f39\u8df3\u5373\u53ef\u4ece\u5217\u8868\u4e2d\u5220\u9664 RangeAssignor\u3002 \u8bf7\u5728\u6b64\u5904 \u67e5\u770b\u5ba2\u6237\u7aef\u5347\u7ea7\u8def\u5f84\u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002 Scala kafka.common.MessageFormatter \u88ab\u5220\u9664\u4e86\u3002\u8bf7\u4f7f\u7528Java org.apache.kafka.common.MessageFormatter . \u8be5 MessageFormatter.init(Properties) \u65b9\u6cd5\u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 configure(Map) \u3002 \u8be5 checksum() \u65b9\u6cd5\u5df2\u4ece ConsumerRecord \u548c\u4e2d\u5220\u9664 RecordMetadata \u3002\u6d88\u606f\u683c\u5f0f v2\uff08\u4ece 0.11 \u5f00\u59cb\u4e00\u76f4\u662f\u9ed8\u8ba4\u683c\u5f0f\uff09\u5c06\u6821\u9a8c\u548c\u4ece\u8bb0\u5f55\u79fb\u81f3\u8bb0\u5f55\u6279\u6b21\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u6ca1\u6709\u610f\u4e49\uff0c\u4e5f\u4e0d\u5b58\u5728\u66ff\u4ee3\u65b9\u6cd5\u3002 \u8be5\u7c7b ChecksumMessageFormatter \u5df2\u88ab\u5220\u9664\u3002\u5b83\u4e0d\u662f\u516c\u5171 API \u7684\u4e00\u90e8\u5206\uff0c\u4f46\u53ef\u80fd\u5df2\u4e0e kafka-console-consumer.sh . \u5b83\u62a5\u544a\u4e86\u6bcf\u6761\u8bb0\u5f55\u7684\u6821\u9a8c\u548c\uff0c\u81ea\u6d88\u606f\u683c\u5f0f v2 \u4ee5\u6765\u4e0d\u518d\u652f\u6301\u8be5\u6821\u9a8c\u548c\u3002 \u8be5\u7c7b org.apache.kafka.clients.consumer.internals.PartitionAssignor \u5df2\u88ab\u5220\u9664\u3002\u8bf7\u6539\u7528 org.apache.kafka.clients.consumer.ConsumerPartitionAssignor \u3002 \u548c\u914d\u7f6e\u5df2\u88ab\u5220\u9664 ( quota.producer.default KAFKA -12591 )\u3002\u5fc5\u987b\u6539\u7528\u52a8\u6001\u914d\u989d\u9ed8\u8ba4\u503c\u3002 quota.consumer.default \u548c\u914d\u7f6e\u5df2\u88ab port \u5220\u9664 host.name \u3002\u8bf7\u6539\u7528 listeners \u3002 \u548c\u914d\u7f6e\u5df2\u88ab advertised.port \u5220\u9664 advertised.host.name \u3002\u8bf7\u6539\u7528 advertised.listeners \u3002 \u5df2\u5f03\u7528\u7684\u5de5\u4f5c\u7a0b\u5e8f\u914d\u7f6e rest.host.name \u5df2\u4eceKafka Connect \u5de5\u4f5c\u7a0b\u5e8f\u914d\u7f6e\u4e2d rest.port \u5220\u9664 ( KAFKA-12482 )\u3002 \u8bf7\u6539\u7528 listeners \u3002 \u8be5 Producer#sendOffsetsToTransaction(Map offsets, String consumerGroupId) \u65b9\u6cd5\u5df2\u88ab\u5f03\u7528\u3002\u8bf7 Producer#sendOffsetsToTransaction(Map offsets, ConsumerGroupMetadata metadata) \u6539\u7528\uff0c\u5176\u4e2d ConsumerGroupMetadata \u53ef\u4ee5\u901a\u8fc7 \u68c0\u7d22 KafkaConsumer#groupMetadata() \u4ee5\u83b7\u5f97\u66f4\u5f3a\u7684\u8bed\u4e49\u3002\u8bf7\u6ce8\u610f\uff0c\u5b8c\u6574\u7684\u6d88\u8d39\u8005\u7ec4\u5143\u6570\u636e\u96c6\u53ea\u6709\u4ee3\u7406\u6216 2.5 \u6216\u66f4\u9ad8\u7248\u672c\u624d\u80fd\u7406\u89e3\uff0c\u56e0\u6b64\u60a8\u5fc5\u987b\u5347\u7ea7\u60a8\u7684 kafka \u96c6\u7fa4\u4ee5\u83b7\u5f97\u66f4\u5f3a\u5927\u7684\u8bed\u4e49\u3002\u5426\u5219\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5 new ConsumerGroupMetadata(consumerGroupId) \u4e0e\u8001broker\u5408\u4f5c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-732 \u3002 \u8fde\u63a5 internal.key.converter \u548c internal.value.converter \u5c5e\u6027\u5df2\u88ab\u5b8c\u5168 \u5220\u9664 \u3002\u81ea\u7248\u672c 2.0.0 \u4ee5\u6765\uff0c\u5df2\u5f03\u7528\u8fd9\u4e9b Connect \u5de5\u4f5c\u7ebf\u7a0b\u5c5e\u6027\u7684\u4f7f\u7528\u3002\u73b0\u5728\uff0c\u5de5\u4f5c\u4eba\u5458\u88ab\u786c\u7f16\u7801\u4e3a\u4f7f\u7528 JSON \u8f6c\u6362\u5668\u5e76 schemas.enable \u8bbe\u7f6e\u4e3a false \u3002 \u5982\u679c\u60a8\u7684\u96c6\u7fa4\u4e00\u76f4\u5728\u4f7f\u7528\u4e0d\u540c\u7684\u5185\u90e8\u952e\u6216\u503c\u8f6c\u6362\u5668\uff0c\u60a8\u53ef\u4ee5\u6309\u7167KIP-738 \u4e2d\u6982\u8ff0\u7684\u8fc1\u79fb\u6b65\u9aa4 \u5c06 Connect \u96c6\u7fa4\u5b89\u5168\u5347\u7ea7\u5230 3.0\u3002 \u57fa\u4e8e Connect \u7684 MirrorMaker (MM2) \u5305\u62ec\u5bf9\u652f\u6301\u7684\u66f4\u6539 IdentityReplicationPolicy \uff0c\u65e0\u9700\u91cd\u547d\u540d\u4e3b\u9898\u5373\u53ef\u5b9e\u73b0\u590d\u5236\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ecd\u4f7f\u7528\u73b0\u6709\u7684 DefaultReplicationPolicy \uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7 replication.policy \u914d\u7f6e\u5c5e\u6027\u542f\u7528\u8eab\u4efd\u590d\u5236\u3002\u8fd9\u5bf9\u4e8e\u4ece\u8f83\u65e7\u7684 MirrorMaker (MM1) \u8fc1\u79fb\u7684\u7528\u6237\uff0c\u6216\u8005\u5bf9\u4e8e\u5177\u6709\u7b80\u5355\u5355\u5411\u590d\u5236\u62d3\u6251\u4e14\u4e0d\u5e0c\u671b\u4e3b\u9898\u91cd\u547d\u540d\u7684\u7528\u4f8b\u7279\u522b\u6709\u7528\u3002\u8bf7\u6ce8\u610f IdentityReplicationPolicy \uff0c\u4e0e \u4e0d\u540c DefaultReplicationPolicy \uff0c \u65e0\u6cd5\u963b\u6b62\u57fa\u4e8e\u4e3b\u9898\u540d\u79f0\u7684\u590d\u5236\u5faa\u73af\uff0c\u56e0\u6b64\u5728\u6784\u5efa\u590d\u5236\u62d3\u6251\u65f6\u8bf7\u6ce8\u610f\u907f\u514d\u5faa\u73af\u3002 \u6700\u521d\u7684 MirrorMaker (MM1) \u548c\u76f8\u5173\u7c7b\u5df2\u88ab\u5f03\u7528\u3002\u8bf7\u4f7f\u7528\u57fa\u4e8e Connect \u7684 MirrorMaker (MM2)\uff0c\u5982 \u5f02\u5730\u590d\u5236\u90e8\u5206 \u4e2d\u6240\u8ff0\u3002","title":"3.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-27x-281","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.7 \u3001 2.6 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.7 \u3001 2.6 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.8 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.8 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 2.7.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.8.1"},{"location":"1/#280","text":"2.8.0 \u7248\u672c\u5411KIP-679 \u4e2d\u5f15\u5165\u7684\u6388\u6743\u8005\u63a5\u53e3\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u65b9\u6cd5 \u3002\u5176\u52a8\u673a\u662f\u89e3\u9501\u6211\u4eec\u672a\u6765\u7684\u8ba1\u5212\uff0c\u4ee5\u9ed8\u8ba4\u542f\u7528\u6700\u5f3a\u7684\u6d88\u606f\u4f20\u9012\u4fdd\u8bc1\u3002\u81ea\u5b9a\u4e49\u6388\u6743\u8005\u5e94\u8003\u8651\u63d0\u4f9b\u66f4\u6709\u6548\u7684\u5b9e\u73b0\uff0c\u652f\u6301\u5ba1\u6838\u65e5\u5fd7\u8bb0\u5f55\u548c\u4efb\u4f55\u81ea\u5b9a\u4e49\u914d\u7f6e\u6216\u8bbf\u95ee\u89c4\u5219\u3002 IBP 2.8 \u5c06\u4e3b\u9898 ID \u4f5c\u4e3aKIP-516 \u7684\u4e00\u90e8\u5206\u5f15\u5165\u4e3b\u9898 \u3002\u4f7f\u7528 ZooKeeper \u65f6\uff0c\u6b64\u4fe1\u606f\u5b58\u50a8\u5728 TopicZNode \u4e2d\u3002\u5982\u679c\u96c6\u7fa4\u964d\u7ea7\u5230\u4ee5\u524d\u7684 IBP \u6216\u7248\u672c\uff0c\u672a\u6765\u7684\u4e3b\u9898\u5c06\u4e0d\u4f1a\u83b7\u5f97\u4e3b\u9898 ID\uff0c\u5e76\u4e14\u4e0d\u4fdd\u8bc1\u4e3b\u9898\u5c06\u5728 ZooKeeper \u4e2d\u4fdd\u7559\u5176\u4e3b\u9898 ID\u3002\u8fd9\u610f\u5473\u7740\u518d\u6b21\u5347\u7ea7\u65f6\uff0c\u67d0\u4e9b\u4e3b\u9898\u6216\u6240\u6709\u4e3b\u9898\u5c06\u88ab\u5206\u914d\u65b0\u7684 ID\u3002 Kafka Streams \u5f15\u5165\u4e86\u7c7b\u578b\u5b89\u5168 split() \u8fd0\u7b97\u7b26\u4f5c\u4e3a\u5df2\u5f03\u7528\u65b9\u6cd5\u7684\u66ff\u4ee3 KStream#branch() \uff08\u53c2\u89c1 KIP-418 \uff09\u3002","title":"2.8.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-26x-270","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.6 \u3001 2.5 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.6 \u3001 2.5 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.7 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.7 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 2.6.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.7.0"},{"location":"1/#270","text":"2.7.0 \u7248\u672c\u5305\u542b KIP-595 \u4e2d\u6307\u5b9a\u7684\u6838\u5fc3 Raft \u5b9e\u73b0\u3002\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u201craft\u201d\u6a21\u5757\u5305\u542b\u5927\u90e8\u5206\u903b\u8f91\u3002\u5728\u4e0e\u63a7\u5236\u5668\u7684\u96c6\u6210\u5b8c\u6210\u4e4b\u524d\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u72ec\u7acb\u7684\u670d\u52a1\u5668\u6765\u6d4b\u8bd5 Raft \u5b9e\u73b0\u7684\u6027\u80fd\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 raft \u6a21\u5757\u4e2d\u7684 README.md KIP-651\u6dfb\u52a0\u4e86 \u5bf9\u4f7f\u7528 PEM \u6587\u4ef6\u8fdb\u884c\u5bc6\u94a5\u548c\u4fe1\u4efb\u5b58\u50a8\u7684 \u652f\u6301\u3002 KIP-612\u6dfb\u52a0\u4e86 \u5bf9\u5f3a\u5236\u4ee3\u7406\u8303\u56f4\u548c\u6bcf\u4e2a\u4fa6\u542c\u5668\u8fde\u63a5\u521b\u5efa\u901f\u7387\u7684 \u652f\u6301\u3002 2.7.0 \u7248\u672c\u5305\u542b KIP-612 \u7684\u7b2c\u4e00\u90e8\u5206\uff0c\u52a8\u6001\u914d\u7f6e\u5c06\u5728 2.8.0 \u7248\u672c\u4e2d\u51fa\u73b0\u3002 \u80fd\u591f\u9650\u5236\u4e3b\u9898\u548c\u5206\u533a\u521b\u5efa\u6216\u4e3b\u9898\u5220\u9664\uff0c\u4ee5\u9632\u6b62\u96c6\u7fa4\u56e0 KIP-599\u53d7\u5230\u635f\u5bb3 \u5f53 Kafka \u63a8\u51fa\u65b0\u529f\u80fd\u65f6\uff0c\u5b58\u5728\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\uff1a Kafka \u5ba2\u6237\u7aef\u5982\u4f55\u4e86\u89e3\u4ee3\u7406\u529f\u80fd\uff1f \u7ecf\u7eaa\u5546\u5982\u4f55\u51b3\u5b9a\u542f\u7528\u54ea\u4e9b\u529f\u80fd\uff1f KIP-584 \u63d0\u4f9b\u4e86\u7075\u6d3b\u4e14\u6613\u4e8e\u64cd\u4f5c\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ea\u9700\u4e00\u6b21\u91cd\u542f\u5373\u53ef\u5b9e\u73b0\u5ba2\u6237\u7aef\u53d1\u73b0\u3001\u529f\u80fd\u95e8\u63a7\u548c\u6eda\u52a8\u5347\u7ea7\u3002 * ConsoleConsumer \u73b0\u5728\u53ef\u4ee5\u901a\u8fc7 KIP-431 \u6253\u5370\u8bb0\u5f55\u504f\u79fb\u91cf\u548c\u6807\u9898 * KIP-554 \u7684\u6dfb\u52a0 \u7ee7\u7eed\u671d\u7740\u4ece Kafka \u4e2d\u5220\u9664 Zookeeper \u7684\u76ee\u6807\u8fc8\u8fdb\u3002\u6dfb\u52a0 KIP-554 \u610f\u5473\u7740\u60a8\u4e0d\u5fc5\u518d\u76f4\u63a5\u8fde\u63a5\u5230 ZooKeeper \u6765\u7ba1\u7406 SCRAM \u51ed\u8bc1\u3002 * \u66f4\u6539\u73b0\u6709\u4fa6\u542c\u5668\u7684\u4e0d\u53ef\u91cd\u65b0\u914d\u7f6e\u7684\u914d\u7f6e\u4f1a\u5bfc\u81f4 InvalidRequestException . \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u4e4b\u524d\u7684\uff08\u610f\u5916\u7684\uff09\u884c\u4e3a\u4f1a\u5bfc\u81f4\u66f4\u65b0\u7684\u914d\u7f6e\u88ab\u4fdd\u7559\uff0c\u4f46\u76f4\u5230\u4ee3\u7406\u91cd\u65b0\u542f\u52a8\u540e\u624d\u4f1a\u751f\u6548\u3002\u6709\u5173\u66f4\u591a\u8ba8\u8bba\uff0c\u8bf7\u53c2\u9605 KAFKA-10479 \u3002 \u8bf7\u53c2\u9605 DynamicBrokerConfig.DynamicSecurityConfigs \u548c SocketServer.ListenerReconfigurableConfigs \u4e86\u89e3\u73b0\u6709\u4fa6\u542c\u5668\u652f\u6301\u7684\u53ef\u91cd\u65b0\u914d\u7f6e\u914d\u7f6e\u3002 * Kafka Streams \u5728 KStreams DSL \u4e2d \u6dfb\u52a0\u4e86\u5bf9 \u6ed1\u52a8 Windows \u805a\u5408\u7684\u652f\u6301\u3002 * \u72b6\u6001\u5b58\u50a8\u4e0a\u7684\u53cd\u5411\u8fed\u4ee3\u53ef\u4f7f\u7528KIP-617 \u5b9e\u73b0\u66f4\u9ad8\u6548\u7684\u6700\u65b0\u66f4\u65b0\u641c\u7d22 * Kafka Steams \u4e2d\u7684\u7aef\u5230\u7aef\u5ef6\u8fdf\u6307\u6807\u8bf7\u53c2\u9605 KIP-613 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f * Kafka Streams \u6dfb\u52a0\u4e86\u4f7f\u7528KIP-607 \u62a5\u544a\u9ed8\u8ba4 RocksDB \u5c5e\u6027\u7684\u6307\u6807 * KIP-616 \u63d0\u4f9b\u66f4\u597d\u7684 Scala \u9690\u5f0f Serdes \u652f\u6301","title":"2.7.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-25x-260","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.5 \u3001 2.4 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.5 \u3001 2.4 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.6 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.6 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x \u5230 2.5.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.6.0"},{"location":"1/#260","text":"Kafka Streams \u6dfb\u52a0\u4e86\u4e00\u79cd\u65b0\u7684\u5904\u7406\u6a21\u5f0f\uff08\u9700\u8981\u4ee3\u7406 2.5 \u6216\u66f4\u9ad8\u7248\u672c\uff09\uff0c\u8be5\u6a21\u5f0f\u4f7f\u7528\u4e00\u6b21\u6027\u4fdd\u8bc1\u63d0\u9ad8\u5e94\u7528\u7a0b\u5e8f\u53ef\u6269\u5c55\u6027\uff08\u53c2\u89c1 KIP-447 \uff09 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u9ed8\u8ba4\u542f\u7528 TLSv1.3\u3002\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u5c06\u534f\u5546 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-573 \u3002 \u914d\u7f6e\u7684\u9ed8\u8ba4\u503c client.dns.lookup \u5df2\u4ece \u66f4\u6539 default \u4e3a use_all_dns_ips \u3002\u5982\u679c\u4e3b\u673a\u540d\u89e3\u6790\u4e3a\u591a\u4e2a IP \u5730\u5740\uff0c\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u73b0\u5728\u5c06\u5c1d\u8bd5\u6309\u987a\u5e8f\u8fde\u63a5\u5230\u6bcf\u4e2a IP\uff0c\u76f4\u5230\u6210\u529f\u5efa\u7acb\u8fde\u63a5\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-602 \u3002 NotLeaderForPartitionException \u5df2\u88ab\u5f03\u7528\u5e76\u66ff\u6362\u4e3a NotLeaderOrFollowerException . \u5982\u679c\u4ee3\u7406\u4e0d\u662f\u526f\u672c\uff0c\u5219\u4ec5\u9488\u5bf9\u9886\u5bfc\u8005\u6216\u8ffd\u968f\u8005\u7684\u83b7\u53d6\u8bf7\u6c42\u548c\u5176\u4ed6\u8bf7\u6c42\u5c06\u8fd4\u56de NOT_LEADER_OR_FOLLOWER(6) \u800c\u4e0d\u662f REPLICA_NOT_AVAILABLE(9)\uff0c\u786e\u4fdd\u6240\u6709\u5ba2\u6237\u7aef\u5c06\u91cd\u65b0\u5206\u914d\u671f\u95f4\u7684\u77ed\u6682\u9519\u8bef\u4f5c\u4e3a\u53ef\u91cd\u8bd5\u5f02\u5e38\u8fdb\u884c\u5904\u7406\u3002","title":"2.6.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x-24x-250","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.4 \u3001 2.3 \u7b49\uff09 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION \uff08\u4f8b\u5982 2.4 \u3001 2.3 \u7b49\uff09 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u534f\u8bae\u7248\u672c inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c 2.5 \u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.5 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 6. KIP-455 kafka-reassign-partitions.sh \u5b8c\u6210\u540e\uff0c \u91cd\u65b0\u5206\u914d\u5de5\u5177\u53d1\u751f\u4e86\u4e00\u4e9b\u663e\u7740\u7684\u53d8\u5316\u3002\u8be5\u5de5\u5177\u73b0\u5728\u8981\u6c42\u5728\u66f4\u6539\u4e3b\u52a8\u91cd\u65b0\u5206\u914d\u7684\u9650\u5236\u65f6\u63d0\u4f9b\u6807\u5fd7\u3002\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u8be5 \u547d\u4ee4\u53d6\u6d88\u91cd\u65b0\u5206\u914d\u3002\u6700\u540e\uff0c\u91cd\u65b0\u5206\u914d \u5df2\u88ab\u5f03\u7528\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP\u3002 --additional``--cancel``--zookeeper``--bootstrap-server","title":"\u4ece 0.8.x \u5230 2.4.x \u7684\u4efb\u4f55\u7248\u672c\u5347\u7ea7\u5230 2.5.0"},{"location":"1/#250","text":"\u5f53 RebalanceProtocol#COOPERATIVE \u4f7f\u7528\u65f6\uff0c Consumer#poll \u5f53\u5b83\u5904\u4e8e\u6d88\u8d39\u8005\u4ecd\u7136\u62e5\u6709\u7684\u90a3\u4e9b\u5206\u533a\u7684\u91cd\u65b0\u5e73\u8861\u8fc7\u7a0b\u4e2d\u65f6\uff0c\u4ecd\u7136\u53ef\u4ee5\u8fd4\u56de\u6570\u636e\uff1b\u6b64\u5916 Consumer#commitSync \uff0c\u73b0\u5728\u53ef\u80fd\u4f1a\u629b\u51fa\u4e00\u4e2a\u975e\u81f4\u547d RebalanceInProgressException \u4e8b\u4ef6\u6765\u901a\u77e5\u7528\u6237\u6b64\u7c7b\u4e8b\u4ef6\uff0c\u4ee5\u4fbf\u4e0e\u81f4\u547d\u4e8b\u4ef6\u533a\u5206\u5f00\u6765 CommitFailedException \u5e76\u5141\u8bb8\u7528\u6237\u5b8c\u6210\u6b63\u5728\u8fdb\u884c\u7684\u91cd\u65b0\u5e73\u8861\uff0c\u7136\u540e\u91cd\u65b0\u5c1d\u8bd5\u4e3a\u90a3\u4e9b\u4ecd\u7136\u62e5\u6709\u7684\u5206\u533a\u63d0\u4ea4\u504f\u79fb\u91cf\u3002 \u4e3a\u4e86\u63d0\u9ad8\u5178\u578b\u7f51\u7edc\u73af\u5883\u4e2d\u7684\u5f39\u6027\uff0c\u9ed8\u8ba4\u503c zookeeper.session.timeout.ms \u5df2\u4ece 6 \u79d2\u589e\u52a0\u5230 18 \u79d2\uff0c replica.lag.time.max.ms \u4ece 10 \u79d2\u589e\u52a0\u5230 30 \u79d2\u3002 cogroup() \u6dfb\u52a0\u4e86\u65b0\u7684 DSL \u8fd0\u7b97\u7b26\uff0c\u7528\u4e8e\u4e00\u6b21\u5c06\u591a\u4e2a\u6d41\u805a\u5408\u5728\u4e00\u8d77\u3002 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684 KStream.toTable() API\uff0c\u7528\u4e8e\u5c06\u8f93\u5165\u4e8b\u4ef6\u6d41\u8f6c\u6362\u4e3a KTable\u3002 \u6dfb\u52a0\u4e86\u65b0\u7684 Serde \u7c7b\u578b Void \u6765\u8868\u793a\u8f93\u5165\u4e3b\u9898\u4e2d\u7684\u7a7a\u952e\u6216\u7a7a\u503c\u3002 \u5df2\u5f03\u7528 UsePreviousTimeOnInvalidTimestamp \u5e76\u66ff\u6362\u4e3a UsePartitionTimeOnInvalidTimeStamp . \u901a\u8fc7\u6dfb\u52a0\u6302\u8d77\u7684\u504f\u79fb\u9632\u62a4\u673a\u5236\u548c\u66f4\u5f3a\u7684\u4e8b\u52a1\u63d0\u4ea4\u4e00\u81f4\u6027\u68c0\u67e5\u6765\u6539\u8fdb\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\uff0c\u8fd9\u6781\u5927\u5730\u7b80\u5316\u4e86\u53ef\u6269\u5c55\u7684\u7cbe\u786e\u4e00\u6b21\u5e94\u7528\u7a0b\u5e8f\u7684\u5b9e\u73b0\u3002 \u6211\u4eec\u8fd8\u5728\u793a\u4f8b \u6587\u4ef6\u5939\u4e0b\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u4e00\u6b21\u6027\u8bed\u4e49\u4ee3\u7801\u793a\u4f8b \u3002\u67e5\u770b KIP-447 \u4e86\u89e3\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f\u3002 \u6dfb\u52a0\u4e86\u65b0\u7684\u516c\u5171 api KafkaStreams.queryMetadataForKey(String, K, Serializer) to get detailed information on the key being queried. It provides information about the partition number where the key resides in addition to hosts containing the active and standby partitions for the key. \u901a\u8fc7\u5f03\u7528\u5e76\u5c06 KafkaStreams.store(String, QueryableStoreType) \u5176\u66ff\u6362\u4e3a KafkaStreams.store(StoreQueryParameters) . \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u516c\u5171 api\uff0c\u7528\u4e8e\u8bbf\u95ee\u5b9e\u4f8b\u672c\u5730\u5b58\u50a8\u7684\u6ede\u540e\u4fe1\u606f KafkaStreams.allLocalStorePartitionLags() \u3002 \u4e0d\u518d\u652f\u6301 Scala 2.11\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605 KIP-531 \u3002 \u5305\u4e2d\u7684\u6240\u6709 Scala \u7c7b kafka.security.auth \u5747\u5df2\u5f03\u7528\u3002 \u6709\u5173 2.4.0 \u4e2d\u6dfb\u52a0\u7684\u65b0 Java \u6388\u6743\u8005 API \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-504 \u3002 \u8bf7\u6ce8\u610f\uff0c kafka.security.auth.Authorizer \u548c kafka.security.auth.SimpleAclAuthorizer \u5728 2.4.0 \u4e2d\u5df2\u5f03\u7528\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cTLSv1 \u548c TLSv1.1 \u5df2\u88ab\u7981\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u5b58\u5728\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\u3002\u73b0\u5728\u9ed8\u8ba4\u4ec5\u542f\u7528 TLSv1.2\u3002 ssl.protocol \u60a8\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u9009\u9879\u548c \u4e2d\u663e\u5f0f\u542f\u7528 TLSv1 \u548c TLSv1.1 \u6765\u7ee7\u7eed\u4f7f\u7528\u5b83\u4eec ssl.enabled.protocols \u3002 ZooKeeper \u5df2\u5347\u7ea7\u5230 3.5.7\uff0c\u5982\u679c 3.4 \u6570\u636e\u76ee\u5f55\u4e2d\u6ca1\u6709\u5feb\u7167\u6587\u4ef6\uff0cZooKeeper \u4ece 3.4.X \u5347\u7ea7\u5230 3.5.7 \u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u8fd9\u901a\u5e38\u53d1\u751f\u5728\u6d4b\u8bd5\u5347\u7ea7\u4e2d\uff0c\u5176\u4e2d ZooKeeper 3.5.7 \u5c1d\u8bd5\u52a0\u8f7d\u5c1a\u672a\u521b\u5efa\u5feb\u7167\u6587\u4ef6\u7684\u73b0\u6709 3.4 \u6570\u636e\u76ee\u5f55\u3002\u6709\u5173\u8be5\u95ee\u9898\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZOOKEEPER-3056 \u3002 ZOOKEEPER-3056 \u4e2d\u7ed9\u51fa\u4e86\u4fee\u590d\uff0c\u5373\u5728\u5347\u7ea7\u4e4b\u524d \u8bbe\u7f6e snapshot.trust.empty=true \u914d\u7f6e\u3002 zookeeper.properties ZooKeeper \u7248\u672c 3.5.7 \u652f\u6301\u4f7f\u7528\u6216\u4e0d\u4f7f\u7528\u5ba2\u6237\u7aef\u8bc1\u4e66\u4e0e ZooKeeper \u8fdb\u884c TLS \u52a0\u5bc6\u8fde\u63a5\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6 Kafka \u914d\u7f6e\u6765\u5229\u7528\u6b64\u529f\u80fd\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605 KIP-515 \u3002","title":"2.5.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x09x0100x0101x0102x0110x10x11x20x-21x-22x-23x-240","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.10.0\u30010.11.0\u30011.0\u30012.0\u30012.2\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece0.11.0.x\u6216\u66f4\u9ad8\u7248\u672c\u5347\u7ea7\uff0c\u5e76\u4e14\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\u30012.1\u30012.2\u30012.3\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.4 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.4 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a ZooKeeper\u5df2\u5347\u7ea7\u81f33.5.6\u3002\u5982\u679c 3.4 \u6570\u636e\u76ee\u5f55\u4e2d\u6ca1\u6709\u5feb\u7167\u6587\u4ef6\uff0cZooKeeper \u4ece 3.4.X \u5347\u7ea7\u5230 3.5.6 \u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u8fd9\u901a\u5e38\u53d1\u751f\u5728\u6d4b\u8bd5\u5347\u7ea7\u4e2d\uff0c\u5176\u4e2d ZooKeeper 3.5.6 \u5c1d\u8bd5\u52a0\u8f7d\u5c1a\u672a\u521b\u5efa\u5feb\u7167\u6587\u4ef6\u7684\u73b0\u6709 3.4 \u6570\u636e\u76ee\u5f55\u3002\u6709\u5173\u8be5\u95ee\u9898\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZOOKEEPER-3056 \u3002 ZOOKEEPER-3056 \u4e2d\u7ed9\u51fa\u4e86\u4fee\u590d\uff0c\u5373\u5728\u5347\u7ea7\u4e4b\u524d\u8bbe\u7f6e snapshot.trust.empty=true \u914d\u7f6e\u3002 zookeeper.properties \u4f46\u6211\u4eec\u89c2\u5bdf\u5230\u4f7f\u7528 snapshot.trust.empty=true config.js \u8fdb\u884c\u72ec\u7acb\u96c6\u7fa4\u5347\u7ea7\u65f6\u4f1a\u51fa\u73b0\u6570\u636e\u4e22\u5931\u7684\u60c5\u51b5\u3002\u6709\u5173\u8be5\u95ee\u9898\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZOOKEEPER-3644 \u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u590d\u5236\u7a7a\u5feb\u7167 \u7684\u5b89\u5168\u89e3\u51b3\u65b9\u6cd5 \u5982\u679c3.4\u6570\u636e\u76ee\u5f55\u4e2d\u6ca1\u6709\u5feb\u7167\u6587\u4ef6\uff0c\u5219\u5c06\u6587\u4ef6\u590d\u5236\u52303.4\u6570\u636e\u76ee\u5f55\u4e2d\u3002\u6709\u5173\u89e3\u51b3\u65b9\u6cd5\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ZooKeeper \u5347\u7ea7\u5e38\u89c1\u95ee\u9898\u89e3\u7b54 \u3002 ZooKeeper 3.5 \u4e2d\u6dfb\u52a0\u4e86 \u57fa\u4e8e\u5d4c\u5165\u5f0f Jetty \u7684 AdminServer \u3002 zookeeper.properties AdminServer \u5728 ZooKeeper \u4e2d\u9ed8\u8ba4\u542f\u7528\uff0c\u5e76\u5728\u7aef\u53e3 8080 \u4e0a\u542f\u52a8\u3002AdminServer \u5728Apache Kafka \u53d1\u884c\u7248\u63d0\u4f9b\u7684ZooKeeper \u914d\u7f6e ( ) \u4e2d\u9ed8\u8ba4\u7981\u7528\u3002\u5982\u679c\u60a8\u60f3\u7981\u7528\u7ba1\u7406\u670d\u52a1\u5668\uff0c\u8bf7\u786e\u4fdd\u66f4\u65b0\u60a8\u7684\u672c\u5730 zookeeper.properties \u6587\u4ef6\u3002 admin.enableServer=false \u8bf7\u53c2\u8003 AdminServer \u914d\u7f6e \u6765\u914d\u7f6e AdminServer\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\uff0c\u6216\u80052.2.x \u6216 2.3.x \u81f3 2.4.0"},{"location":"1/#240","text":"\u6dfb\u52a0\u4e86\u65b0\u7684\u7ba1\u7406 API\uff0c\u7528\u4e8e\u5206\u533a\u91cd\u65b0\u5206\u914d\u3002\u7531\u4e8e\u6539\u53d8\u4e86 Kafka \u4f20\u64ad\u91cd\u65b0\u5206\u914d\u4fe1\u606f\u7684\u65b9\u5f0f\uff0c\u56e0\u6b64\u5728\u5347\u7ea7\u5230\u65b0\u7248\u672c\u65f6\uff0c\u5728\u6545\u969c\u8fb9\u7f18\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u4e22\u5931\u91cd\u65b0\u5206\u914d\u72b6\u6001\u3002\u4e0d\u5efa\u8bae\u5728\u5347\u7ea7\u65f6\u5f00\u59cb\u91cd\u65b0\u5206\u914d\u3002 ZooKeeper\u5df2\u4ece3.4.14\u5347\u7ea7\u52303.5.6\u3002\u65b0\u7248\u672c\u652f\u6301TLS\u548c\u52a8\u6001\u91cd\u65b0\u914d\u7f6e\u3002 \u547d\u4ee4 bin/kafka-preferred-replica-election.sh \u884c\u5de5\u5177\u5df2\u88ab\u5f03\u7528\u3002\u5b83\u5df2\u88ab\u66ff\u6362\u4e3a bin/kafka-leader-election.sh . electPreferredLeaders Java \u7c7b\u4e2d\u7684\u65b9\u6cd5 AdminClient \u5df2\u88ab\u5f03\u7528\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u65b9\u6cd5 electLeaders \u3002 \u5229\u7528\u5e26\u6709\u6587\u5b57\u503c\u7684\u6784\u9020\u51fd\u6570\u7684 Scala \u4ee3\u7801 NewTopic(String, int, short) \u9700\u8981\u663e\u5f0f\u8c03\u7528 toShort \u7b2c\u4e8c\u4e2a\u6587\u5b57\u3002 \u6784\u9020\u51fd\u6570\u4e2d\u7684\u53c2\u6570 GroupAuthorizationException(String) \u73b0\u5728\u7528\u4e8e\u6307\u5b9a\u5f02\u5e38\u6d88\u606f\u3002\u4ee5\u524d\u5b83\u6307\u7684\u662f\u6388\u6743\u5931\u8d25\u7684\u7ec4\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u4e0e\u5176\u4ed6\u5f02\u5e38\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u5e76\u907f\u514d\u6f5c\u5728\u7684\u8bef\u7528\u3002 TopicAuthorizationException(String) \u4e4b\u524d\u7528\u4e8e\u5355\u4e2a\u672a\u6388\u6743\u4e3b\u9898\u7684 \u6784\u9020\u51fd\u6570\u4e5f\u8fdb\u884c\u4e86\u7c7b\u4f3c\u7684\u66f4\u6539\u3002 \u5185\u90e8 PartitionAssignor \u63a5\u53e3\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u66ff\u6362\u4e3a\u65b0\u7684 ConsumerPartitionAssignor \u516c\u5171 API\u3002\u4e24\u4e2a\u63a5\u53e3\u4e4b\u95f4\u7684\u67d0\u4e9b\u65b9\u6cd5/\u7b7e\u540d\u7565\u6709\u4e0d\u540c\u3002\u5b9e\u73b0\u81ea\u5b9a\u4e49 PartitionAssignor \u7684\u7528\u6237\u5e94\u5c3d\u5feb\u8fc1\u79fb\u5230\u65b0\u754c\u9762\u3002 \u73b0\u5728 DefaultPartitioner \u4f7f\u7528\u7c98\u6027\u5206\u533a\u7b56\u7565\u3002\u8fd9\u610f\u5473\u7740\u5177\u6709\u7a7a\u952e\u4e14\u672a\u5206\u914d\u5206\u533a\u7684\u7279\u5b9a\u4e3b\u9898\u7684\u8bb0\u5f55\u5c06\u88ab\u53d1\u9001\u5230\u540c\u4e00\u5206\u533a\uff0c\u76f4\u5230\u51c6\u5907\u597d\u53d1\u9001\u6279\u6b21\u4e3a\u6b62\u3002\u521b\u5efa\u65b0\u6279\u6b21\u65f6\uff0c\u4f1a\u9009\u62e9\u4e00\u4e2a\u65b0\u5206\u533a\u3002\u8fd9\u51cf\u5c11\u4e86\u751f\u6210\u5ef6\u8fdf\uff0c\u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8fb9\u7f18\u60c5\u51b5\u4e0b\u8bb0\u5f55\u5728\u5206\u533a\u4e4b\u95f4\u5206\u5e03\u4e0d\u5747\u5300\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u7528\u6237\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\uff0c\u4f46\u5728\u6d4b\u8bd5\u548c\u5176\u4ed6\u5728\u5f88\u77ed\u7684\u65f6\u95f4\u5185\u751f\u6210\u8bb0\u5f55\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u79cd\u5dee\u5f02\u53ef\u80fd\u4f1a\u5f88\u660e\u663e\u3002 \u963b\u585e KafkaConsumer#committed \u65b9\u6cd5\u5df2\u6269\u5c55\u4e3a\u5141\u8bb8\u5206\u533a\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5206\u533a\u3002\u5b83\u53ef\u4ee5\u51cf\u5c11\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u4e4b\u95f4\u4e3a\u6d88\u8d39\u8005\u7ec4\u83b7\u53d6\u5df2\u63d0\u4ea4\u504f\u79fb\u91cf\u7684\u8bf7\u6c42/\u54cd\u5e94\u8fed\u4ee3\u3002\u65e7\u7684\u91cd\u8f7d\u51fd\u6570\u5df2\u88ab\u5f03\u7528\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u66f4\u6539\u4ee3\u7801\u4ee5\u5229\u7528\u65b0\u65b9\u6cd5\uff08\u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728 KIP-520 \u4e2d\u627e\u5230\uff09\u3002 \u6211\u4eec INVALID_RECORD \u5728\u751f\u6210\u54cd\u5e94\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u9519\u8bef\u4ee5\u4e0e\u8be5 CORRUPT_MESSAGE \u9519\u8bef\u533a\u5206\u5f00\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u4ee5\u524d\u5f53\u4e00\u6279\u8bb0\u5f55\u4f5c\u4e3a\u5355\u4e2a\u8bf7\u6c42\u7684\u4e00\u90e8\u5206\u53d1\u9001\u5230\u4ee3\u7406\u65f6\uff0c\u7531\u4e8e\u5404\u79cd\u539f\u56e0\uff08\u9b54\u672f\u5b57\u8282\u4e0d\u5339\u914d\u3001crc \u6821\u9a8c\u548c\u9519\u8bef\u3001\u538b\u7f29\u65e5\u5fd7\u7684\u7a7a\u952e\uff09\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\u8bb0\u5f55\u672a\u80fd\u901a\u8fc7\u9a8c\u8bc1\u4e3b\u9898\u7b49\uff09\uff0c\u6574\u4e2a\u6279\u6b21\u5c06\u88ab\u62d2\u7edd\uff0c\u5e76\u4e14\u5177\u6709\u76f8\u540c\u548c\u8bef\u5bfc\u6027 CORRUPT_MESSAGE \uff0c\u5e76\u4e14\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u7684\u8c03\u7528\u8005\u5c06\u4ece RecordMetadata \u8c03\u7528\u8fd4\u56de\u7684\u672a\u6765\u5bf9\u8c61 send \u4ee5\u53ca\u5728 Callback#onCompletion(RecordMetadata metadata, Exception exception) \u73b0\u5728\uff0c\u6709\u4e86\u65b0\u7684\u9519\u8bef\u4ee3\u7801\u548c\u6539\u8fdb\u7684\u5f02\u5e38\u9519\u8bef\u6d88\u606f\uff0c\u751f\u4ea7\u8005\u8c03\u7528\u8005\u53ef\u4ee5\u66f4\u597d\u5730\u4e86\u89e3\u5176\u53d1\u9001\u8bb0\u5f55\u5931\u8d25\u7684\u6839\u672c\u539f\u56e0\u3002 \u6211\u4eec\u6b63\u5728\u5411\u5ba2\u6237\u7aef\u7ec4\u534f\u8bae\u5f15\u5165\u589e\u91cf\u5408\u4f5c\u91cd\u65b0\u5e73\u8861\uff0c\u8be5\u534f\u8bae\u5141\u8bb8\u6d88\u8d39\u8005\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u4fdd\u7559\u6240\u6709\u5206\u914d\u7684\u5206\u533a\uff0c\u5e76\u5728\u6700\u540e\u4ec5\u64a4\u9500\u90a3\u4e9b\u5fc5\u987b\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u6d88\u8d39\u8005\u4ee5\u5b9e\u73b0\u6574\u4f53\u96c6\u7fa4\u5e73\u8861\u7684\u5206\u533a\u3002\u4ed6\u4eec\u5c06\u9009\u62e9 \u6240\u6709\u6d88\u8d39\u8005\u652f\u6301\u7684\u5206\u914d\u8005\u666e\u904d\u652f\u6301\u7684 ConsumerCoordinator \u6700\u65b0\u7248\u672c\u3002 RebalanceProtocol \u60a8\u53ef\u4ee5\u4f7f\u7528\u65b0\u7684\u5185\u7f6e CooperativeStickyAssignor \u6216\u63d2\u5165\u60a8\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u534f\u4f5c\u5206\u914d\u5668\u3002\u4e3a\u6b64\uff0c\u60a8\u5fc5\u987b\u5b9e\u73b0\u8be5 ConsumerPartitionAssignor \u63a5\u53e3\u5e76\u5305\u542b RebalanceProtocol.COOPERATIVE \u5728 . \u8fd4\u56de\u7684\u5217\u8868\u4e2d ConsumerPartitionAssignor#supportedProtocols \u3002\u7136\u540e\uff0c\u60a8\u7684\u81ea\u5b9a\u4e49\u5206\u914d\u8005\u53ef\u4ee5\u5229\u7528 ownedPartitions \u6bcf\u4e2a\u6d88\u8d39\u8005\u7684\u5b57\u6bb5 Subscription \u5c3d\u53ef\u80fd\u5c06\u5206\u533a\u5f52\u8fd8\u7ed9\u4ee5\u524d\u7684\u6240\u6709\u8005\u3002\u8bf7\u6ce8\u610f\uff0c\u5f53\u8981\u5c06\u5206\u533a\u91cd\u65b0\u5206\u914d\u7ed9\u53e6\u4e00\u4e2a\u4f7f\u7528\u8005\u65f6\uff0c \u5fc5\u987b \u5c06\u5176\u4ece\u65b0\u5206\u914d\u4e2d\u5220\u9664\uff0c\u76f4\u5230\u5b83\u4ece\u5176\u539f\u59cb\u6240\u6709\u8005\u624b\u4e2d\u64a4\u9500\u3002\u4efb\u4f55\u5fc5\u987b\u64a4\u9500\u5206\u533a\u7684\u6d88\u8d39\u8005\u90fd\u5c06\u89e6\u53d1\u540e\u7eed\u91cd\u65b0\u5e73\u8861\uff0c\u4ee5\u5141\u8bb8\u64a4\u9500\u7684\u5206\u533a\u5b89\u5168\u5730\u5206\u914d\u7ed9\u5176\u65b0\u6240\u6709\u8005\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 ConsumerPartitionAssignor RebalanceProtocol javadocs \u3002 \u8981\u4ece\u65e7\u7684\uff08\u6025\u5207\u7684\uff09\u534f\u8bae\uff08\u5728\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u603b\u662f\u64a4\u9500\u6240\u6709\u5206\u533a\uff09\u5347\u7ea7\u5230\u534f\u4f5c\u91cd\u65b0\u5e73\u8861\uff0c\u60a8\u5fc5\u987b\u9075\u5faa\u7279\u5b9a\u7684\u5347\u7ea7\u8def\u5f84\u4ee5\u4f7f\u6240\u6709\u5ba2\u6237\u7aef\u90fd\u5904\u4e8e\u540c\u4e00\u72b6\u6001 ConsumerPartitionAssignor \u652f\u6301\u5408\u4f5c\u534f\u8bae\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4e24\u6b21\u6eda\u52a8\u5f39\u8df3\u6765\u5b8c\u6210\uff0c\u4f8b\u5982 CooperativeStickyAssignor \uff1a\u5728\u7b2c\u4e00\u6b21\u5f39\u8df3\u671f\u95f4\uff0c\u5c06\u201c\u5408\u4f5c\u7c98\u6027\u201d\u6dfb\u52a0\u5230\u6bcf\u4e2a\u6210\u5458\u652f\u6301\u7684\u5206\u914d\u5668\u5217\u8868\u4e2d\uff08\u4e0d\u5220\u9664\u5148\u524d\u7684\u5206\u914d\u5668 - \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u4e4b\u524d\u4f7f\u7528\u9ed8\u8ba4\u5206\u914d\u5668\uff09 \uff0c\u60a8\u4e5f\u5fc5\u987b\u660e\u786e\u5305\u542b\u8be5\u5185\u5bb9\uff09\u3002\u7136\u540e\u60a8\u53ef\u4ee5\u9000\u56de\u548c/\u6216\u5347\u7ea7\u5b83\u3002\u4e00\u65e6\u6574\u4e2a\u7ec4\u5904\u4e8e 2.4+ \u5e76\u4e14\u6240\u6709\u6210\u5458\u5728\u5176\u652f\u6301\u7684\u5206\u914d\u8005\u4e4b\u95f4\u90fd\u5177\u6709\u201c\u5408\u4f5c\u7c98\u6027\u201d\uff0c\u8bf7\u5220\u9664\u5176\u4ed6\u5206\u914d\u8005\u5e76\u6267\u884c\u7b2c\u4e8c\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u4ee5\u4fbf\u6700\u7ec8\u6240\u6709\u6210\u5458\u4ec5\u652f\u6301\u5408\u4f5c\u534f\u8bae\u3002\u6709\u5173\u534f\u4f5c\u518d\u5e73\u8861\u534f\u8bae\u548c\u5347\u7ea7\u8def\u5f84\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-429 \u3002 ConsumerRebalanceListener \u4ee5\u53ca\u65b0\u7684 API\u8fdb\u884c\u4e86\u4e00\u4e9b\u884c\u4e3a\u66f4\u6539\u3002\u5728\u4fa6\u542c\u5668\u7684\u4e09\u4e2a\u56de\u8c03\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u671f\u95f4\u629b\u51fa\u7684\u5f02\u5e38\u5c06\u4e0d\u518d\u88ab\u541e\u6389\uff0c\u800c\u662f\u4f1a\u4e00\u76f4\u91cd\u65b0\u629b\u51fa\u76f4\u5230\u8c03\u7528\u4e3a\u6b62 Consumer.poll() \u3002 onPartitionsLost \u6dfb\u52a0\u8be5\u65b9\u6cd5\u662f\u4e3a\u4e86\u5141\u8bb8\u7528\u6237\u5bf9\u6d88\u8d39\u8005\u53ef\u80fd\u5931\u53bb\u5176\u5206\u533a\u6240\u6709\u6743\uff08\u4f8b\u5982\u9519\u8fc7\u91cd\u65b0\u5e73\u8861\uff09\u5e76\u4e14\u65e0\u6cd5\u63d0\u4ea4\u504f\u79fb\u91cf\u7684\u5f02\u5e38\u60c5\u51b5\u505a\u51fa\u53cd\u5e94\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5c06\u7b80\u5355\u5730\u8c03\u7528\u73b0\u6709 onPartitionsRevoked API \u6765\u4e0e\u4e4b\u524d\u7684\u884c\u4e3a\u4fdd\u6301\u4e00\u81f4\u3002\u4f46\u8bf7\u6ce8\u610f\uff0c onPartitionsLost \u5f53\u4e22\u5931\u7684\u5206\u533a\u96c6\u4e3a\u7a7a\u65f6\uff0c\u4e0d\u4f1a\u8c03\u7528\u8be5\u65b9\u6cd5\u3002\u8fd9\u610f\u5473\u7740\u5728\u65b0\u6d88\u8d39\u8005\u52a0\u5165\u7ec4\u7684\u7b2c\u4e00\u6b21\u91cd\u65b0\u5e73\u8861\u5f00\u59cb\u65f6\u4e0d\u4f1a\u8c03\u7528\u56de\u8c03\u3002 \u7684\u8bed\u4e49 ConsumerRebalanceListener's \u5f53\u9075\u5faa\u4e0a\u8ff0\u5408\u4f5c\u518d\u5e73\u8861\u534f\u8bae\u65f6\uff0c\u56de\u8c03\u4f1a\u8fdb\u4e00\u6b65\u6539\u53d8\u3002\u6b64\u5916 onPartitionsLost \uff0c onPartitionsRevoked \u5f53\u64a4\u9500\u5206\u533a\u96c6\u4e3a\u7a7a\u65f6\uff0c\u4e5f\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u8c03\u7528\u3002\u8be5\u56de\u8c03\u901a\u5e38\u4ec5\u5728\u91cd\u65b0\u5e73\u8861\u7ed3\u675f\u65f6\u8c03\u7528\uff0c\u5e76\u4e14\u4ec5\u5728\u6b63\u5728\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u4f7f\u7528\u8005\u7684\u5206\u533a\u96c6\u4e0a\u8c03\u7528\u3002\u7136\u800c\uff0c\u5373\u4f7f\u5206\u533a\u96c6\u4e3a\u7a7a\uff0c\u56de\u8c03 onPartitionsAssigned \u4e5f\u5c06\u59cb\u7ec8\u88ab\u8c03\u7528\uff0c\u4f5c\u4e3a\u901a\u77e5\u7528\u6237\u91cd\u65b0\u5e73\u8861\u4e8b\u4ef6\u7684\u4e00\u79cd\u65b9\u5f0f\uff08\u5bf9\u4e8e\u5408\u4f5c\u578b\u548c\u6e34\u671b\u578b\u90fd\u662f\u5982\u6b64\uff09\u3002\u6709\u5173\u65b0\u56de\u8c03\u8bed\u4e49\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ConsumerRebalanceListener javadocs \u3002 Scala \u7279\u5f81 kafka.security.auth.Authorizer \u5df2\u88ab\u5f03\u7528\u5e76\u88ab\u65b0\u7684 Java API \u53d6\u4ee3 org.apache.kafka.server.authorizer.Authorizer \u3002\u6388\u6743\u8005\u5b9e\u73b0\u7c7b kafka.security.auth.SimpleAclAuthorizer \u4e5f\u5df2\u88ab\u5f03\u7528\u5e76\u88ab\u65b0\u7684\u5b9e\u73b0\u6240\u53d6\u4ee3 kafka.security.authorizer.AclAuthorizer \u3002 AclAuthorizer \u4f7f\u7528\u65b0 API \u652f\u6301\u7684\u529f\u80fd\u6765\u6539\u8fdb\u6388\u6743\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5e76\u4e0e SimpleAclAuthorizer . \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-504 \u3002","title":"2.4.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x09x0100x0101x0102x0110x10x11x20x-21x-22x-230","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\uff0c\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\u30012.1\u30012.2\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.3 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.3 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\uff0c\u6216\u80052.2.x \u81f3 2.3.0"},{"location":"1/#230","text":"\u6211\u4eec\u6b63\u5728\u4e3a Kafka Connect \u5f15\u5165\u4e00\u79cd\u57fa\u4e8e \u589e\u91cf\u5408\u4f5c\u518d\u5e73\u8861 \u7684\u65b0\u518d\u5e73\u8861\u534f\u8bae\u3002\u65b0\u534f\u8bae\u4e0d\u9700\u8981\u5728 Connect \u5de5\u4f5c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u91cd\u65b0\u5e73\u8861\u9636\u6bb5\u505c\u6b62\u6240\u6709\u4efb\u52a1\u3002\u76f8\u53cd\uff0c\u53ea\u6709\u9700\u8981\u5728\u5de5\u4f5c\u4eba\u5458\u4e4b\u95f4\u4ea4\u6362\u7684\u4efb\u52a1\u624d\u4f1a\u505c\u6b62\uff0c\u5e76\u5728\u540e\u7eed\u91cd\u65b0\u5e73\u8861\u4e2d\u542f\u52a8\u5b83\u4eec\u3002\u4ece 2.3.0 \u5f00\u59cb\uff0c\u65b0\u7684 Connect \u534f\u8bae\u9ed8\u8ba4\u542f\u7528\u3002\u6709\u5173\u5176\u5de5\u4f5c\u539f\u7406\u4ee5\u53ca\u5982\u4f55\u542f\u7528\u6025\u5207\u518d\u5e73\u8861\u7684\u65e7\u884c\u4e3a\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u589e\u91cf\u534f\u4f5c\u518d\u5e73\u8861\u8bbe\u8ba1 \u3002 \u6211\u4eec\u6b63\u5728\u5411\u6d88\u8d39\u8005\u7528\u6237\u5f15\u5165\u9759\u6001\u4f1a\u5458\u8d44\u683c\u3002\u6b64\u529f\u80fd\u51cf\u5c11\u4e86\u6b63\u5e38\u5e94\u7528\u7a0b\u5e8f\u5347\u7ea7\u6216\u6eda\u52a8\u5f39\u8df3\u671f\u95f4\u4e0d\u5fc5\u8981\u7684\u91cd\u65b0\u5e73\u8861\u3002\u6709\u5173\u5982\u4f55\u4f7f\u7528\u5b83\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u9759\u6001\u6210\u5458\u8d44\u683c\u8bbe\u8ba1 \u3002 Kafka Streams DSL \u5207\u6362\u5176\u4f7f\u7528\u7684\u5b58\u50a8\u7c7b\u578b\u3002\u867d\u7136\u6b64\u66f4\u6539\u4e3b\u8981\u5bf9\u7528\u6237\u662f\u900f\u660e\u7684\uff0c\u4f46\u5728\u67d0\u4e9b\u6781\u7aef\u60c5\u51b5\u4e0b\u53ef\u80fd\u9700\u8981\u66f4\u6539\u4ee3\u7801\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u90e8\u5206 \u3002 Kafka Streams 2.3.0 \u9700\u8981 0.11 \u6d88\u606f\u683c\u5f0f\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5e76\u4e14\u4e0d\u9002\u7528\u4e8e\u8f83\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u3002","title":"2.3.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x09x0100x0101x0102x0110x10x11x20x-21x-220","text":"\u5982\u679c\u60a8\u8981\u4ece 2.1.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u6709\u5173\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u67b6\u6784\u66f4\u6539\u7684\u6ce8\u91ca\u3002\u4e00\u65e6\u60a8\u5c06 inter.broker.protocol.version \u66f4\u6539\u4e3a\u6700\u65b0\u7248\u672c\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230 2.1 \u4e4b\u524d\u7684\u7248\u672c\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x\u30011.1.x \u6216 2.0.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.2 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.2 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x\u30012.0.x \u6216 2.1.x \u5347\u7ea7\u52302.2.0"},{"location":"1/#221","text":"Kafka Streams 2.2.1 \u9700\u8981 0.11 \u6d88\u606f\u683c\u5f0f\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5e76\u4e14\u4e0d\u9002\u7528\u4e8e\u8f83\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u3002","title":"2.2.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#220","text":"\u9ed8\u8ba4\u6d88\u8d39\u8005\u7ec4 ID \u5df2\u4ece\u7a7a\u5b57\u7b26\u4e32 ( \"\" ) \u66f4\u6539\u4e3a null \u3002\u4f7f\u7528\u65b0\u7684\u9ed8\u8ba4\u7ec4 ID \u7684\u6d88\u8d39\u8005\u5c06\u65e0\u6cd5\u8ba2\u9605\u4e3b\u9898\u3001\u83b7\u53d6\u6216\u63d0\u4ea4\u504f\u79fb\u91cf\u3002\u4e0d\u63a8\u8350\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u6d88\u8d39\u8005\u7ec4 ID\uff0c\u4f46\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e4b\u524d\u5c06\u53d7\u652f\u6301\u3002\u4f9d\u8d56\u7a7a\u5b57\u7b26\u4e32\u7ec4 ID \u7684\u65e7\u5ba2\u6237\u7aef\u73b0\u5728\u5fc5\u987b\u663e\u5f0f\u63d0\u4f9b\u5b83\u4f5c\u4e3a\u5176\u6d88\u8d39\u8005\u914d\u7f6e\u7684\u4e00\u90e8\u5206\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-289 \u3002 \u547d\u4ee4 bin/kafka-topics.sh \u884c\u5de5\u5177\u73b0\u5728\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5\u5230\u4ee3\u7406\u800c --bootstrap-server \u4e0d\u662fzookeeper\u3002\u65e7 --zookeeper \u9009\u9879\u76ee\u524d\u4ecd\u7136\u53ef\u7528\u3002\u8bf7\u9605\u8bfb KIP-377 \u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002 Kafka Streams \u4f9d\u8d56\u4e8e\u8f83\u65b0\u7248\u672c\u7684 RocksDB\uff0c\u9700\u8981 MacOS 10.13 \u6216\u66f4\u9ad8\u7248\u672c\u3002","title":"2.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x09x0100x0101x0102x0110x10x11x-200-210httpskafkaapacheorgdocumentationupgrade_2_1_0","text":"\u8bf7\u6ce8\u610f\uff0c2.1.x \u5305\u542b\u5bf9\u7528\u4e8e\u5b58\u50a8\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u7684\u5185\u90e8\u67b6\u6784\u7684\u66f4\u6539\u3002\u5347\u7ea7\u5b8c\u6210\u540e\uff0c\u5c06\u65e0\u6cd5\u964d\u7ea7\u5230\u4e4b\u524d\u7684\u7248\u672c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u6eda\u52a8\u5347\u7ea7\u8bf4\u660e\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x\u30011.1.x \u6216 2.0.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\u30012.0\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u540e\uff0c\u4ee3\u7406\u5c06\u8fd0\u884c\u6700\u65b0\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff0c\u6b64\u65f6\u4ecd\u7136\u53ef\u4ee5\u964d\u7ea7\u3002 3. \u9a8c\u8bc1\u96c6\u7fa4\u7684\u884c\u4e3a\u548c\u6027\u80fd\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.1 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002\u4e00\u65e6\u4ee3\u7406\u5f00\u59cb\u4f7f\u7528\u6700\u65b0\u7684\u534f\u8bae\u7248\u672c\uff0c\u5c31\u65e0\u6cd5\u518d\u5c06\u96c6\u7fa4\u964d\u7ea7\u5230\u65e7\u7248\u672c\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.1 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u518d\u7ef4\u62a4\u7684\u65e7\u7248 Scala \u5ba2\u6237\u7aef\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u8f6c\u6362\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u5ba2\u6237\u7aef\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5728\u6b64\u7248\u672c\u4e2d\uff0c\u504f\u79fb\u8fc7\u671f\u8bed\u4e49\u7565\u6709\u53d8\u5316\u3002\u6839\u636e\u65b0\u7684\u8bed\u4e49\uff0c\u5f53\u7ec4\u8ba2\u9605\u4e86\u76f8\u5e94\u7684\u4e3b\u9898\u5e76\u4e14\u4ecd\u7136\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff08\u6709\u6d3b\u8dc3\u7684\u6d88\u8d39\u8005\uff09\u65f6\uff0c\u7ec4\u4e2d\u5206\u533a\u7684\u504f\u79fb\u91cf\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u5982\u679c\u7ec4\u53d8\u7a7a\uff0c\u5219\u5728\u9ed8\u8ba4\u504f\u79fb\u4fdd\u7559\u671f\uff08\u6216\u4ee3\u7406\u8bbe\u7f6e\u7684\u4fdd\u7559\u671f\uff09\u8fc7\u53bb\u540e\uff0c\u5176\u6240\u6709\u504f\u79fb\u5c06\u88ab\u5220\u9664\uff08\u9664\u975e\u8be5\u7ec4\u518d\u6b21\u53d8\u4e3a\u6d3b\u52a8\u72b6\u6001\uff09\u3002\u4e0e\u4e0d\u4f7f\u7528 Kafka \u7ec4\u7ba1\u7406\u7684\u72ec\u7acb\uff08\u7b80\u5355\uff09\u6d88\u8d39\u8005\u76f8\u5173\u7684\u504f\u79fb\u91cf\uff0c\u5c06\u5728\u81ea\u4e0a\u6b21\u63d0\u4ea4\u4ee5\u6765\u9ed8\u8ba4\u504f\u79fb\u91cf\u4fdd\u7559\u671f\uff08\u6216\u7531\u4ee3\u7406\u8bbe\u7f6e\u7684\u4fdd\u7559\u671f\uff09\u8fc7\u53bb\u540e\u88ab\u5220\u9664\u3002 enable.auto.commit \u672a\u63d0\u4f9b\u65f6\u63a7\u5236\u53f0\u4f7f\u7528\u8005\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c group.id \u73b0\u5728\u8bbe\u7f6e\u4e3a false \u3002\u8fd9\u662f\u4e3a\u4e86\u907f\u514d\u6c61\u67d3\u6d88\u8d39\u8005\u534f\u8c03\u5668\u7f13\u5b58\uff0c\u56e0\u4e3a\u81ea\u52a8\u751f\u6210\u7684\u7ec4\u4e0d\u592a\u53ef\u80fd\u88ab\u5176\u4ed6\u6d88\u8d39\u8005\u4f7f\u7528\u3002 \u6b63\u5982\u6211\u4eec \u5728 KIP-91 \u4e2d\u4ecb\u7ecd\u7684\u90a3\u6837\uff0c\u751f\u4ea7\u8005 retries \u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\u5df2\u66f4\u6539\u4e3a\uff0c\u5b83\u8bbe\u7f6e\u4e86\u53d1\u9001\u8bb0\u5f55\u548c\u4ece\u4ee3\u7406\u63a5\u6536\u786e\u8ba4\u4e4b\u95f4\u7684\u603b\u65f6\u95f4\u4e0a\u9650\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f20\u9001\u8d85\u65f6\u8bbe\u7f6e\u4e3a 2 \u5206\u949f\u3002 Integer.MAX_VALUE``delivery.timeout.ms \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMirrorMaker \u73b0\u5728\u4f1a\u5728\u914d\u7f6e\u751f\u4ea7\u8005\u65f6 delivery.timeout.ms \u8986\u76d6\u3002\u5982\u679c\u60a8\u4e3a\u4e86\u66f4\u5feb\u5730\u5931\u8d25 Integer.MAX_VALUE \u800c\u8986\u76d6\u4e86 \u7684\u503c\uff0c\u5219\u60a8\u5c06\u9700\u8981\u8986\u76d6\u3002 retries``delivery.timeout.ms ListGroup \u4f5c\u4e3a\u63a8\u8350\u7684\u66ff\u4ee3\u65b9\u6848\uff0cAPI \u73b0\u5728\u671f\u671b\u8bbf\u95ee Describe Group \u7528\u6237\u5e94\u8be5\u80fd\u591f\u5217\u51fa\u7684\u7ec4\u3002\u5c3d\u7ba1 Describe Cluster \u4ecd\u652f\u6301\u65e7\u7684\u8bbf\u95ee\u4ee5\u5b9e\u73b0\u5411\u540e\u517c\u5bb9\u6027\uff0c\u4f46\u4e0d\u5efa\u8bae\u5c06\u5176\u7528\u4e8e\u6b64 API\u3002 KIP-336 \u5f03\u7528\u4e86 ExtendedSerializer \u548c ExtendedDeserializer \u63a5\u53e3\uff0c\u5e76\u63a8\u5e7f\u4e86 Serializer \u548c Deserializer \u7684\u4f7f\u7528\u3002 ExtendedSerializer \u548c ExtendedDeserializer \u662f\u968fKIP-82 \u5f15\u5165\u7684\uff0c \u4ee5 Java 7 \u517c\u5bb9\u7684\u65b9\u5f0f\u4e3a\u5e8f\u5217\u5316\u5668\u548c\u53cd\u5e8f\u5217\u5316\u5668\u63d0\u4f9b\u8bb0\u5f55\u6807\u5934\u3002\u73b0\u5728\u6211\u4eec\u6574\u5408\u4e86\u8fd9\u4e9b\u63a5\u53e3\uff0c\u56e0\u4e3a Java 7 \u652f\u6301\u5df2\u88ab\u5220\u9664\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x\u30011.1.x \u6216 2.0.0 \u5347\u7ea7\u5230 2.1.0](https://kafka.apache.org/documentation/#upgrade_2_1_0)"},{"location":"1/#210","text":"Jetty \u5df2\u5347\u7ea7\u5230 9.4.12\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u5305\u62ec TLS_RSA_* \u5bc6\u7801\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u652f\u6301\u524d\u5411\u4fdd\u5bc6\uff0c\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 https://github.com/eclipse/jetty.project/issues/2807\u3002 unclean.leader.election.enable \u5f53\u4f7f\u7528\u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u8986\u76d6\u52a8\u6001\u66f4\u65b0\u914d\u7f6e\u65f6\uff0c\u63a7\u5236\u5668\u4f1a\u81ea\u52a8\u542f\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e\u3002 \u6dfb\u52a0 AdminClient \u4e86\u4e00\u4e2a\u65b9\u6cd5 AdminClient#metrics() \u3002\u73b0\u5728\uff0c\u4efb\u4f55\u4f7f\u7528 \u7684\u5e94\u7528\u7a0b\u5e8f\u90fd AdminClient \u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u4ece \u6355\u83b7\u7684\u6307\u6807\u6765\u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u548c\u89c1\u89e3 AdminClient \u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-324 Kafka \u73b0\u5728\u652f\u6301 KIP-110 \u7684 Zstandard \u538b\u7f29\u3002\u60a8\u5fc5\u987b\u5347\u7ea7\u7ecf\u7eaa\u5546\u548c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528\u5b83\u30022.1.0 \u4e4b\u524d\u7684\u6d88\u8d39\u8005\u5c06\u65e0\u6cd5\u8bfb\u53d6\u4f7f\u7528 Zstandard \u538b\u7f29\u7684\u4e3b\u9898\uff0c\u56e0\u6b64\u5728\u6240\u6709\u4e0b\u6e38\u6d88\u8d39\u8005\u5347\u7ea7\u4e4b\u524d\uff0c\u4e0d\u5e94\u4e3a\u4e3b\u9898\u542f\u7528\u5b83\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP\u3002","title":"2.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#08x09x0100x0101x0102x0110x10x-11x-200httpskafkaapacheorgdocumentationupgrade_2_0_0","text":"Kafka 2.0.0 \u5f15\u5165\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 2.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\u30011.1\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x\u30011.0.x \u6216 1.1.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u683c\u5f0f\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0\u30011.0\u30011.1\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 3. \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 2.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 2.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u8f83\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u65b0\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002 \u5982\u679c\u60a8\u5728 Kafka Streams \u4ee3\u7801\u4e2d\u4f7f\u7528 Java8 \u65b9\u6cd5\u5f15\u7528\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u4ee3\u7801\u4ee5\u89e3\u51b3\u65b9\u6cd5\u6b67\u4e49\u3002\u4ec5\u70ed\u4ea4\u6362 jar \u6587\u4ef6\u53ef\u80fd\u4e0d\u8d77\u4f5c\u7528\u3002 \u5728\u66f4\u65b0\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u4e4b\u524d\uff0c \u4e0d\u5e94\u5c06 ACL \u6dfb\u52a0\u5230\u524d\u7f00\u8d44\u6e90\uff08\u5728 KIP-290\u4e2d\u6dfb\u52a0\uff09\u3002 \u6ce8\u610f\uff1a\u5982\u679c \u96c6\u7fa4\u518d\u6b21\u964d\u7ea7\uff0c\u5373\u4f7f\u5728\u96c6\u7fa4\u5b8c\u5168\u5347\u7ea7\u4e4b\u540e\uff0c\u6dfb\u52a0\u5230\u96c6\u7fa4\u7684\u4efb\u4f55\u524d\u7f00 ACL \u4e5f\u5c06\u88ab\u5ffd\u7565\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x\u30011.0.x \u6216 1.1.x \u5347\u7ea7\u5230 2.0.0](https://kafka.apache.org/documentation/#upgrade_2_0_0)"},{"location":"1/#200","text":"KIP-186 \u5c06\u9ed8\u8ba4\u504f\u79fb\u91cf\u4fdd\u7559\u65f6\u95f4\u4ece 1 \u5929\u589e\u52a0\u5230 7 \u5929\u3002\u8fd9\u4f7f\u5f97\u5728\u4e0d\u9891\u7e41\u63d0\u4ea4\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u201c\u4e22\u5931\u201d\u504f\u79fb\u91cf\u7684\u53ef\u80fd\u6027\u8f83\u5c0f\u3002\u5b83\u8fd8\u4f1a\u589e\u52a0\u6d3b\u52a8\u7684\u504f\u79fb\u96c6\uff0c\u56e0\u6b64\u4f1a\u589e\u52a0\u4ee3\u7406\u4e0a\u7684\u5185\u5b58\u4f7f\u7528\u91cf\u3002\u8bf7\u6ce8\u610f\uff0c\u63a7\u5236\u53f0\u4f7f\u7528\u8005\u5f53\u524d\u9ed8\u8ba4\u542f\u7528\u504f\u79fb\u91cf\u63d0\u4ea4\uff0c\u5e76\u4e14\u53ef\u80fd\u662f\u5927\u91cf\u504f\u79fb\u91cf\u7684\u6765\u6e90\uff0c\u6b64\u66f4\u6539\u73b0\u5728\u5c06\u4fdd\u7559 7 \u5929\u800c\u4e0d\u662f 1 \u5929\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e\u4e3a 1440 \u6765\u4fdd\u7559\u73b0\u6709\u884c\u4e3a offsets.retention.minutes \u3002 \u5bf9 Java 7 \u7684\u652f\u6301\u5df2\u53d6\u6d88\uff0cJava 8 \u73b0\u5728\u662f\u6240\u9700\u7684\u6700\u4f4e\u7248\u672c\u3002 \u7684\u9ed8\u8ba4\u503c ssl.endpoint.identification.algorithm \u5df2\u66f4\u6539\u4e3a https \uff0c\u5b83\u6267\u884c\u4e3b\u673a\u540d\u9a8c\u8bc1\uff08\u5426\u5219\u53ef\u80fd\u4f1a\u53d1\u751f\u4e2d\u95f4\u4eba\u653b\u51fb\uff09\u3002\u8bbe\u7f6e ssl.endpoint.identification.algorithm \u4e3a\u7a7a\u5b57\u7b26\u4e32\u4ee5\u6062\u590d\u4e4b\u524d\u7684\u884c\u4e3a\u3002 KAFKA-5674 \u5c06\u6700\u5c0f\u503c\u7684\u4e0b\u9650\u95f4\u9694\u6269\u5c55 max.connections.per.ip \u5230\u96f6\uff0c\u56e0\u6b64\u5141\u8bb8\u5bf9\u5165\u7ad9\u8fde\u63a5\u8fdb\u884c\u57fa\u4e8e IP \u7684\u8fc7\u6ee4\u3002 KIP-272 \u5728\u6307\u6807\u4e2d\u6dfb\u52a0\u4e86 API \u7248\u672c\u6807\u7b7e kafka.network:type=RequestMetrics,name=RequestsPerSec,request={Produce|FetchConsumer|FetchFollower|...} \u3002\u8fd9\u4e2a\u6307\u6807\u73b0\u5728\u53d8\u6210\u4e86 kafka.network:type=RequestMetrics,name=RequestsPerSec,request={Produce|FetchConsumer|FetchFollower|...},version={0|1|2|3|...} \u3002\u8fd9\u5c06\u5f71\u54cd\u4e0d\u81ea\u52a8\u805a\u5408\u7684 JMX \u76d1\u63a7\u5de5\u5177\u3002\u8981\u83b7\u53d6\u7279\u5b9a\u8bf7\u6c42\u7c7b\u578b\u7684\u603b\u8ba1\u6570\uff0c\u9700\u8981\u66f4\u65b0\u8be5\u5de5\u5177\u4ee5\u8de8\u4e0d\u540c\u7248\u672c\u8fdb\u884c\u805a\u5408\u3002 KIP-225 \u66f4\u6539\u4e86\u6307\u6807\u201crecords.lag\u201d\u4ee5\u4f7f\u7528\u4e3b\u9898\u548c\u5206\u533a\u7684\u6807\u7b7e\u3002\u540d\u79f0\u683c\u5f0f\u4e3a\u201c{topic}-{partition}.records-lag\u201d\u7684\u539f\u59cb\u7248\u672c\u5df2\u88ab\u5220\u9664\u3002 \u81ea 0.11.0.0 \u8d77\u5df2\u5f03\u7528\u7684 Scala \u6d88\u8d39\u8005\u5df2\u88ab\u5220\u9664\u3002\u81ea 0.10.0.0 \u4ee5\u6765\uff0cJava \u6d88\u8d39\u8005\u4e00\u76f4\u662f\u63a8\u8350\u7684\u9009\u9879\u3002\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u4ee3\u7406\u5347\u7ea7\u5230 2.0.0\uff0c1.1.0\uff08\u53ca\u66f4\u65e9\u7248\u672c\uff09\u4e2d\u7684 Scala \u6d88\u8d39\u8005\u4e5f\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002 \u81ea 0.10.0.0 \u8d77\u5df2\u5f03\u7528\u7684 Scala \u751f\u4ea7\u8005\u5df2\u88ab\u5220\u9664\u3002\u4ece 0.9.0.0 \u5f00\u59cb\uff0cJava \u751f\u4ea7\u8005\u4e00\u76f4\u662f\u63a8\u8350\u9009\u9879\u3002\u8bf7\u6ce8\u610f\uff0cJava \u751f\u4ea7\u8005\u4e2d\u9ed8\u8ba4\u5206\u533a\u5668\u7684\u884c\u4e3a\u4e0e Scala \u751f\u4ea7\u8005\u4e2d\u9ed8\u8ba4\u5206\u533a\u5668\u7684\u884c\u4e3a\u4e0d\u540c\u3002\u8fc1\u79fb\u7684\u7528\u6237\u5e94\u8003\u8651\u914d\u7f6e\u4fdd\u7559\u4ee5\u524d\u884c\u4e3a\u7684\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\u3002\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u4ee3\u7406\u5347\u7ea7\u5230 2.0.0\uff0c1.1.0\uff08\u53ca\u66f4\u65e9\u7248\u672c\uff09\u4e2d\u7684 Scala \u751f\u4ea7\u8005\u4e5f\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002 MirrorMaker \u548c ConsoleConsumer \u4e0d\u518d\u652f\u6301 Scala \u6d88\u8d39\u8005\uff0c\u5b83\u4eec\u59cb\u7ec8\u4f7f\u7528 Java \u6d88\u8d39\u8005\u3002 ConsoleProducer \u4e0d\u518d\u652f\u6301 Scala \u751f\u4ea7\u8005\uff0c\u5b83\u59cb\u7ec8\u4f7f\u7528 Java \u751f\u4ea7\u8005\u3002 \u8bb8\u591a\u4f9d\u8d56 Scala \u5ba2\u6237\u7aef\u7684\u5df2\u5f03\u7528\u5de5\u5177\u5df2\u88ab\u5220\u9664\uff1aReplayLogProducer\u3001SimpleConsumerPerformance\u3001SimpleConsumerShell\u3001ExportZkOffsets\u3001ImportZkOffsets\u3001UpdateOffsetsInZK\u3001VerifyConsumerRebalance\u3002 \u5df2\u5f03\u7528\u7684 kafka.tools.ProducerPerformance \u5df2\u88ab\u5220\u9664\uff0c\u8bf7\u4f7f\u7528 org.apache.kafka.tools.ProducerPerformance\u3002 \u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u65e7\u7248\u672c\u6eda\u52a8\u53cd\u5f39\u5347\u7ea7\u3002 KIP-284 \u901a\u8fc7\u5c06\u9ed8\u8ba4\u503c\u8bbe\u7f6e\u4e3a \u6765\u66f4\u6539 Kafka Streams \u91cd\u65b0\u5206\u533a\u4e3b\u9898\u7684\u4fdd\u7559\u65f6\u95f4 Long.MAX_VALUE \u3002 \u66f4\u65b0\u4e86 ProcessorStateManager Kafka Streams \u4e2d\u7684 API\uff0c\u7528\u4e8e\u5c06\u72b6\u6001\u5b58\u50a8\u6ce8\u518c\u5230\u5904\u7406\u5668\u62d3\u6251\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb Streams \u5347\u7ea7\u6307\u5357 \u3002 \u5728\u65e9\u671f\u7248\u672c\u4e2d\uff0cConnect \u7684\u5de5\u4f5c\u7ebf\u7a0b\u914d\u7f6e\u9700\u8981 internal.key.converter \u548c internal.value.converter \u5c5e\u6027\u3002 \u5728 2.0 \u4e2d\uff0c\u4e0d\u518d\u9700\u8981 \u8fd9\u4e9b\uff0c\u5e76\u4e14\u9ed8\u8ba4\u4e3a JSON \u8f6c\u6362\u5668\u3002\u60a8\u53ef\u4ee5\u5b89\u5168\u5730\u4ece Connect \u72ec\u7acb\u548c\u5206\u5e03\u5f0f\u5de5\u4f5c\u7ebf\u7a0b\u914d\u7f6e\u4e2d\u5220\u9664\u8fd9\u4e9b\u5c5e\u6027\uff1a internal.key.converter=org.apache.kafka.connect.json.JsonConverter internal.key.converter.schemas.enable=false internal.value.converter=org.apache.kafka.connect.json.JsonConverter internal.value.converter.schemas.enable=false KIP-266 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u6d88\u8d39\u8005\u914d\u7f6e default.api.timeout.ms \uff0c\u4ee5\u6307\u5b9a\u7528\u4e8e\u53ef\u80fd\u963b\u585e\u7684 API \u7684\u9ed8\u8ba4\u8d85\u65f6 KafkaConsumer \u3002KIP \u8fd8\u4e3a\u6b64\u7c7b\u963b\u585e API \u6dfb\u52a0\u4e86\u91cd\u8f7d\uff0c\u4ee5\u652f\u6301\u4e3a\u6bcf\u4e2a API \u6307\u5b9a\u7279\u5b9a\u7684\u8d85\u65f6\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 default.api.timeout.ms . \u7279\u522b\u662f\uff0c poll(Duration) \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684 API\uff0c\u8be5 API \u4e0d\u4f1a\u963b\u6b62\u52a8\u6001\u5206\u533a\u5206\u914d\u3002\u65e7\u7684 poll(long) API \u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u672a\u6765\u7248\u672c\u4e2d\u5220\u9664\u3002 KafkaConsumer \u8fd8\u4e3a\u5176\u4ed6\u65b9\u6cd5\u6dfb\u52a0\u4e86\u91cd\u8f7d\uff0c\u4f8b\u5982 partitionsFor , listTopics , offsetsForTimes , beginningOffsets , endOffsets \u4ee5\u53ca close \u63a5\u53d7 Duration . \u53e6\u5916\uff0c\u4f5c\u4e3a KIP-266 \u7684\u4e00\u90e8\u5206\uff0c\u9ed8\u8ba4\u503c request.timeout.ms \u5df2\u66f4\u6539\u4e3a 30 \u79d2\u3002\u8003\u8651\u5230\u91cd\u65b0\u5e73\u8861\u6240\u9700\u7684\u6700\u957f\u65f6\u95f4\uff0c\u4e4b\u524d\u7684\u503c\u7565\u9ad8\u4e8e 5 \u5206\u949f\u3002 max.poll.interval.ms \u73b0\u5728\uff0c\u6211\u4eec\u5c06\u91cd\u65b0\u5e73\u8861\u4e2d\u7684 JoinGroup \u8bf7\u6c42\u89c6\u4e3a\u7279\u6b8a\u60c5\u51b5\uff0c\u5e76\u4f7f\u7528\u4ece\u8bf7\u6c42\u8d85\u65f6\u6d3e\u751f\u7684\u503c \u3002\u6240\u6709\u5176\u4ed6\u8bf7\u6c42\u7c7b\u578b\u4f7f\u7528\u4ee5\u4e0b\u5b9a\u4e49\u7684\u8d85\u65f6 request.timeout.ms \u5185\u90e8\u65b9\u6cd5 kafka.admin.AdminClient.deleteRecordsBefore \u5df2\u88ab\u5220\u9664\u3002\u9f13\u52b1\u7528\u6237\u8fc1\u79fb\u5230 org.apache.kafka.clients.admin.AdminClient.deleteRecords . AclCommand \u5de5\u5177 --producer \u4fbf\u5229\u9009\u9879\u5728\u7ed9\u5b9a\u4e3b\u9898\u4e0a\u4f7f\u7528 KIP-277\u66f4\u7ec6\u7c92\u5ea6\u7684 ACL\u3002 KIP-176 \u5220\u9664\u4e86 --new-consumer \u6240\u6709\u57fa\u4e8e\u6d88\u8d39\u8005\u7684\u5de5\u5177\u7684\u9009\u9879\u3002\u6b64\u9009\u9879\u662f\u591a\u4f59\u7684\uff0c\u56e0\u4e3a\u5982\u679c\u5b9a\u4e49\u4e86 --bootstrap-server\uff0c\u5219\u4f1a\u81ea\u52a8\u4f7f\u7528\u65b0\u7684\u4f7f\u7528\u8005\u3002 KIP-290 \u6dfb\u52a0\u4e86\u5728\u524d\u7f00\u8d44\u6e90\u4e0a\u5b9a\u4e49 ACL \u7684\u80fd\u529b\uff0c\u4f8b\u5982\u4ee5\u201cfoo\u201d\u5f00\u5934\u7684\u4efb\u4f55\u4e3b\u9898\u3002 KIP-283 \u6539\u8fdb\u4e86 Kafka \u4ee3\u7406\u4e0a\u7684\u6d88\u606f\u4e0b\u8f6c\u6362\u5904\u7406\uff0c\u8fd9\u901a\u5e38\u662f\u4e00\u9879\u5185\u5b58\u5bc6\u96c6\u578b\u64cd\u4f5c\u3002KIP \u6dfb\u52a0\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u901a\u8fc7\u4e00\u6b21\u5411\u4e0b\u8f6c\u6362\u5206\u533a\u6570\u636e\u5757\uff0c\u64cd\u4f5c\u4f1a\u51cf\u5c11\u5185\u5b58\u5bc6\u96c6\u5ea6\uff0c\u8fd9\u6709\u52a9\u4e8e\u8bbe\u5b9a\u5185\u5b58\u6d88\u8017\u7684\u4e0a\u9650\u3002\u901a\u8fc7\u8fd9\u4e00\u6539\u8fdb\uff0c\u534f\u8bae\u884c\u4e3a\u53d1\u751f\u4e86\u53d8\u5316 FetchResponse \uff0c\u4ee3\u7406\u53ef\u4ee5\u5728\u54cd\u5e94\u7ed3\u675f\u65f6\u53d1\u9001\u5e26\u6709\u65e0\u6548\u504f\u79fb\u91cf\u7684\u8d85\u5927\u6d88\u606f\u6279\u6b21\u3002\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u5fc5\u987b\u5ffd\u7565\u6b64\u7c7b\u8fc7\u5927\u7684\u6d88\u606f\uff0c\u5c31\u50cf KafkaConsumer . KIP-283\u8fd8\u6dfb\u52a0\u4e86\u65b0\u7684\u4e3b\u9898\u548c\u4ee3\u7406\u914d\u7f6e message.downconversion.enable \uff0c log.message.downconversion.enable \u5206\u522b\u63a7\u5236\u662f\u5426\u542f\u7528\u4e0b\u8f6c\u6362\u3002\u7981\u7528\u540e\uff0c\u4ee3\u7406\u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u4e0b\u8f6c\u6362\uff0c\u800c\u662f UNSUPPORTED_VERSION \u5411\u5ba2\u6237\u7aef\u53d1\u9001\u9519\u8bef\u3002 \u5728\u542f\u52a8\u4ee3\u7406\u4e4b\u524d\uff0c\u53ef\u4ee5\u4f7f\u7528 kafka-configs.sh \u5c06\u52a8\u6001\u4ee3\u7406\u914d\u7f6e\u9009\u9879\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u3002\u6b64\u9009\u9879\u53ef\u7528\u4e8e\u907f\u514d\u5728 server.properties \u4e2d\u5b58\u50a8\u660e\u6587\u5bc6\u7801\uff0c\u56e0\u4e3a\u6240\u6709\u5bc6\u7801\u914d\u7f6e\u90fd\u53ef\u80fd\u4ee5\u52a0\u5bc6\u65b9\u5f0f\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u3002 \u5982\u679c\u8fde\u63a5\u5c1d\u8bd5\u5931\u8d25\uff0cZooKeeper \u4e3b\u673a\u73b0\u5728\u4f1a\u91cd\u65b0\u89e3\u6790\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u7684 ZooKeeper \u4e3b\u673a\u540d\u89e3\u6790\u4e3a\u591a\u4e2a\u5730\u5740\uff0c\u5e76\u4e14\u5176\u4e2d\u4e00\u4e9b\u5730\u5740\u65e0\u6cd5\u8bbf\u95ee\uff0c\u90a3\u4e48\u60a8\u53ef\u80fd\u9700\u8981\u589e\u52a0\u8fde\u63a5\u8d85\u65f6 zookeeper.connection.timeout.ms \u3002","title":"2.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#_13","text":"KIP-279 \uff1aOffsetsForLeaderEpochResponse v1 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 leader_epoch \u5b57\u6bb5\u3002 KIP-219 \uff1a\u63d0\u9ad8\u56e0\u914d\u989d\u8fdd\u89c4\u800c\u53d7\u5230\u9650\u5236\u7684\u975e\u96c6\u7fa4\u64cd\u4f5c\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u534f\u8bae\u7248\u672c\u3002 KIP-290 \uff1a\u63d0\u9ad8 ACL \u521b\u5efa\u3001\u63cf\u8ff0\u548c\u5220\u9664\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u534f\u8bae\u7248\u672c\u3002","title":"\u65b0\u534f\u8bae\u7248\u672c"},{"location":"1/#11-kafka-streams","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 1.1 \u5347\u7ea7\u5230 2.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 2.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 2.0\u30011.1\u30011.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u8bf7\u6ce8\u610f\uff0c\u5728 2.0 \u4e2d\uff0c\u6211\u4eec\u5220\u9664\u4e86 1.0 \u4e4b\u524d\u5df2\u5f03\u7528\u7684\u516c\u5171 API\uff1b\u5229\u7528\u8fd9\u4e9b\u5df2\u5f03\u7528\u7684 API \u7684\u7528\u6237\u9700\u8981\u76f8\u5e94\u5730\u66f4\u6539\u4ee3\u7801\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 2.0.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 1.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#08x09x0100x0101x0102x0110x-10x-11x","text":"Kafka 1.1.0 \u5f15\u5165\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 1.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\u30011.0\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x \u6216 1.0.x \u5347\u7ea7\u5e76\u4e14\u5c1a\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u53ea\u9700\u8986\u76d6\u4ee3\u7406\u95f4\u534f\u8bae\u683c\u5f0f\u3002 * inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff080.11.0 \u6216 1.0\uff09\u3002 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 3. \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 1.1 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 1.1 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u8f83\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u65b0\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002 \u5982\u679c\u60a8\u5728 Kafka Streams \u4ee3\u7801\u4e2d\u4f7f\u7528 Java8 \u65b9\u6cd5\u5f15\u7528\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u4ee3\u7801\u4ee5\u89e3\u51b3\u65b9\u6cd5\u6b67\u4e49\u3002\u4ec5\u70ed\u4ea4\u6362 jar \u6587\u4ef6\u53ef\u80fd\u4e0d\u8d77\u4f5c\u7528\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x\u30010.11.0.x \u6216 1.0.x \u5347\u7ea7\u5230 1.1.x"},{"location":"1/#111","text":"\u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 \u6709\u5173\u6b64\u65b0\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u6307\u5357\u3002","title":"1.1.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#110","text":"Maven \u4e2d\u7684 kafka \u5de5\u4ef6\u4e0d\u518d\u4f9d\u8d56 log4j \u6216 slf4j-log4j12\u3002\u4e0e kafka-clients \u5de5\u4ef6\u7c7b\u4f3c\uff0c\u7528\u6237\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u5305\u542b\u9002\u5f53\u7684 slf4j \u6a21\u5757\uff08slf4j-log4j12\u3001logback \u7b49\uff09\u6765\u9009\u62e9\u65e5\u5fd7\u8bb0\u5f55\u540e\u7aef\u3002\u53d1\u5e03 tarball \u4ecd\u7136\u5305\u542b log4j \u548c slf4j-log4j12\u3002 KIP-225 \u66f4\u6539\u4e86\u6307\u6807\u201crecords.lag\u201d\u4ee5\u4f7f\u7528\u4e3b\u9898\u548c\u5206\u533a\u7684\u6807\u7b7e\u3002\u540d\u79f0\u683c\u5f0f\u4e3a\u201c{topic}-{partition}.records-lag\u201d\u7684\u539f\u59cb\u7248\u672c\u5df2\u5f03\u7528\uff0c\u5e76\u5c06\u5728 2.0.0 \u4e2d\u5220\u9664\u3002 Kafka Streams \u5bf9\u4e8e\u4ee3\u7406\u901a\u4fe1\u9519\u8bef\u66f4\u52a0\u7a33\u5065\u3002Kafka Streams \u4e0d\u4f1a\u56e0\u81f4\u547d\u5f02\u5e38\u800c\u505c\u6b62 Kafka Streams \u5ba2\u6237\u7aef\uff0c\u800c\u662f\u5c1d\u8bd5\u81ea\u6211\u4fee\u590d\u5e76\u91cd\u65b0\u8fde\u63a5\u5230\u96c6\u7fa4\u3002\u4f7f\u7528\u65b0\u7248\u672c\uff0c AdminClient \u60a8\u53ef\u4ee5\u66f4\u597d\u5730\u63a7\u5236 Kafka Streams \u91cd\u8bd5\u7684\u9891\u7387\uff0c\u5e76\u53ef\u4ee5 \u914d\u7f6e \u7ec6\u7c92\u5ea6\u7684\u8d85\u65f6\uff08\u800c\u4e0d\u662f\u50cf\u65e7\u7248\u672c\u4e2d\u90a3\u6837\u786c\u7f16\u7801\u91cd\u8bd5\uff09\u3002 Kafka Streams \u91cd\u65b0\u5e73\u8861\u65f6\u95f4\u8fdb\u4e00\u6b65\u51cf\u5c11\uff0c\u4f7f Kafka Streams \u7684\u54cd\u5e94\u901f\u5ea6\u66f4\u5feb\u3002 Kafka Connect \u73b0\u5728\u652f\u6301\u63a5\u6536\u5668\u548c\u6e90\u8fde\u63a5\u5668\u4e2d\u7684\u6d88\u606f\u6807\u5934\uff0c\u5e76\u901a\u8fc7\u7b80\u5355\u7684\u6d88\u606f\u8f6c\u6362\u6765\u64cd\u4f5c\u5b83\u4eec\u3002\u5fc5\u987b\u66f4\u6539\u8fde\u63a5\u5668\u624d\u80fd\u663e\u5f0f\u4f7f\u7528\u5b83\u4eec\u3002\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u529f\u80fd HeaderConverter \u6765\u63a7\u5236\u6807\u5934\u7684\u5e8f\u5217\u5316\uff08\u53cd\u5e8f\u5217\u5316\uff09\u65b9\u5f0f\uff0c\u5e76\u4e14\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528\u65b0\u7684\u201cSimpleHeaderConverter\u201d\u6765\u4f7f\u7528\u503c\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002 \u5982\u679c\u7531\u4e8e\u89e3\u7801\u5668\u7b49\u4efb\u4f55\u5176\u4ed6\u9009\u9879\u800c\u663e\u5f0f\u6216\u9690\u5f0f\u542f\u7528\u6253\u5370\u6570\u636e\u65e5\u5fd7\uff0ckafka.tools.DumpLogSegments \u73b0\u5728\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u6df1\u5ea6\u8fed\u4ee3\u9009\u9879\u3002","title":"1.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#_14","text":"KIP-226 \u5f15\u5165\u4e86DescribeConfigs \u8bf7\u6c42/\u54cd\u5e94 v1\u3002 KIP-227 \u5f15\u5165\u4e86 Fetch Request/Response v7\u3002","title":"\u65b0\u534f\u8bae\u7248\u672c"},{"location":"1/#10-kafka-streams","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 1.0 \u5347\u7ea7\u5230 1.1 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.1 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 1.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 1.1.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 1.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#08x09x0100x0101x0102x-0110x-100","text":"Kafka 1.0.0 \u5f15\u5165\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 1.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u5df2\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u5e94\u4fdd\u7559\u5176\u5f53\u524d\u503c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u8981\u4ece 0.11.0.x \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u30010.10.2\u30010.11.0\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5982\u679c\u60a8\u4ece 0.11.0.x \u5347\u7ea7\u5e76\u4e14\u672a\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u5fc5\u987b\u5c06\u6d88\u606f\u683c\u5f0f\u7248\u672c\u548c\u4ee3\u7406\u95f4\u534f\u8bae\u7248\u672c\u8bbe\u7f6e\u4e3a 0.11.0\u3002 * inter.broker.protocol.version=0.11.0 * log.message.format.version=0.11.0 2. \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 3. \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 1.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 4. \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 5. \u5982\u679c\u60a8\u5df2\u6309\u7167\u4e0a\u8ff0\u8bf4\u660e\u8986\u76d6\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u5219\u9700\u8981\u518d\u8fdb\u884c\u4e00\u6b21\u6eda\u52a8\u91cd\u542f\u624d\u80fd\u5c06\u5176\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 1.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u5982\u679c\u60a8\u4ece 0.11.0 \u5347\u7ea7\u5e76\u4e14 log.message.format.version \u8bbe\u7f6e\u4e3a 0.11.0\uff0c\u5219\u53ef\u4ee5\u66f4\u65b0\u914d\u7f6e\u5e76\u8df3\u8fc7\u6eda\u52a8\u91cd\u542f\u3002\u8bf7\u6ce8\u610f\uff0c\u8f83\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301 0.11 \u4e2d\u5f15\u5165\u7684\u65b0\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u8f83\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x\u30010.10.2.x \u6216 0.11.0.x \u5347\u7ea7\u5230 1.0.0"},{"location":"1/#102","text":"\u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 \u6709\u5173\u6b64\u65b0\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u6307\u5357\u3002","title":"1.0.2 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#101","text":"\u6062\u590d\u4e86 AdminClient \u7684\u9009\u9879\u7c7b\uff08\u4f8b\u5982 CreateTopicsOptions\u3001DeleteTopicsOptions \u7b49\uff09\u4e0e 0.11.0.x \u7684\u4e8c\u8fdb\u5236\u517c\u5bb9\u6027\u3002\u4e8c\u8fdb\u5236\uff08\u4f46\u4e0d\u662f\u6e90\u4ee3\u7801\uff09\u517c\u5bb9\u6027\u5728 1.0.0 \u4e2d\u88ab\u65e0\u610f\u4e2d\u7834\u574f\u3002","title":"1.0.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#100","text":"\u73b0\u5728\u9ed8\u8ba4\u542f\u7528\u4e3b\u9898\u5220\u9664\uff0c\u56e0\u4e3a\u8be5\u529f\u80fd\u73b0\u5df2\u7a33\u5b9a\u3002\u5e0c\u671b\u4fdd\u7559\u4ee5\u524d\u884c\u4e3a\u7684\u7528\u6237\u5e94\u5c06\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e delete.topic.enable \u4e3a false \u3002\u8bf7\u8bb0\u4f4f\uff0c\u4e3b\u9898\u5220\u9664\u4f1a\u5220\u9664\u6570\u636e\uff0c\u5e76\u4e14\u8be5\u64cd\u4f5c\u662f\u4e0d\u53ef\u9006\u7684\uff08\u5373\u4e0d\u5b58\u5728\u201c\u53d6\u6d88\u5220\u9664\u201d\u64cd\u4f5c\uff09 \u5bf9\u4e8e\u652f\u6301\u65f6\u95f4\u6233\u641c\u7d22\u7684\u4e3b\u9898\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5206\u533a\u7684\u504f\u79fb\u91cf\uff0c\u5219\u8be5\u5206\u533a\u73b0\u5728\u5305\u542b\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\uff0c\u4e14\u504f\u79fb\u91cf\u503c\u4e3a\u7a7a\u3002\u4ee5\u524d\uff0c\u5206\u533a\u4e0d\u5305\u542b\u5728\u5730\u56fe\u4e2d\u3002\u8fdb\u884c\u6b64\u66f4\u6539\u662f\u4e3a\u4e86\u4f7f\u641c\u7d22\u884c\u4e3a\u4e0e\u4e0d\u652f\u6301\u65f6\u95f4\u6233\u641c\u7d22\u7684\u4e3b\u9898\u7684\u60c5\u51b5\u4e00\u81f4\u3002 \u5982\u679c inter.broker.protocol.version \u662f 1.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5373\u4f7f\u5b58\u5728\u8131\u673a\u65e5\u5fd7\u76ee\u5f55\uff0c\u4ee3\u7406\u73b0\u5728\u4e5f\u5c06\u4fdd\u6301\u5728\u7ebf\u72b6\u6001\u4ee5\u5728\u5b9e\u65f6\u65e5\u5fd7\u76ee\u5f55\u4e0a\u63d0\u4f9b\u526f\u672c\u3002\u7531\u4e8e\u786c\u4ef6\u6545\u969c\u5f15\u8d77\u7684IOException\uff0c\u65e5\u5fd7\u76ee\u5f55\u53ef\u80fd\u4f1a\u79bb\u7ebf\u3002\u7528\u6237\u9700\u8981\u76d1\u63a7\u6bcf\u4e2abroker\u7684\u6307\u6807 offlineLogDirectoryCount \u6765\u68c0\u67e5\u662f\u5426\u5b58\u5728\u79bb\u7ebf\u65e5\u5fd7\u76ee\u5f55\u3002 \u6dfb\u52a0\u4e86 KafkaStorageException\uff0c\u8fd9\u662f\u4e00\u4e2a\u53ef\u91cd\u8bd5\u7684\u5f02\u5e38\u3002\u5982\u679c\u5ba2\u6237\u7aef\u7684FetchRequest\u6216ProducerRequest\u7684\u7248\u672c\u4e0d\u652f\u6301KafkaStorageException\uff0c\u5219\u54cd\u5e94\u4e2d\u7684KafkaStorageException\u5c06\u8f6c\u6362\u4e3aNotLeaderForPartitionException\u3002 \u9ed8\u8ba4 JVM \u8bbe\u7f6e\u4e2d\u7684 -XX:+DisableExplicitGC \u5df2\u66ff\u6362\u4e3a -XX:+ExplicitGCInvokesConcurrent\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6709\u52a9\u4e8e\u907f\u514d\u5728\u901a\u8fc7\u76f4\u63a5\u7f13\u51b2\u533a\u5206\u914d\u672c\u673a\u5185\u5b58\u671f\u95f4\u51fa\u73b0\u5185\u5b58\u4e0d\u8db3\u5f02\u5e38\u3002 handleError \u5df2\u4ece\u5305\u4e2d\u4ee5\u4e0b\u5df2\u5f03\u7528\u7684\u7c7b\u4e2d\u5220\u9664\u4e86\u91cd\u5199\u7684\u65b9\u6cd5\u5b9e\u73b0 kafka.api \uff1a FetchRequest \u3001 GroupCoordinatorRequest \u3001 OffsetCommitRequest \u3001 OffsetFetchRequest \u3001 OffsetRequest \u3001 ProducerRequest \u548c TopicMetadataRequest \u3002\u8fd9\u4ec5\u9002\u7528\u4e8e\u4ee3\u7406\uff0c\u4f46\u5df2\u4e0d\u518d\u4f7f\u7528\u4e14\u5b9e\u73b0\u4e5f\u672a\u5f97\u5230\u7ef4\u62a4\u3002\u4e3a\u4e86\u4e8c\u8fdb\u5236\u517c\u5bb9\u6027\uff0c\u4fdd\u7559\u4e86\u5b58\u6839\u5b9e\u73b0\u3002 Java \u5ba2\u6237\u7aef\u548c\u5de5\u5177\u73b0\u5728\u63a5\u53d7\u4efb\u4f55\u5b57\u7b26\u4e32\u4f5c\u4e3a\u5ba2\u6237\u7aef ID\u3002 \u5df2\u5f03\u7528\u7684\u5de5\u5177 kafka-consumer-offset-checker.sh \u5df2\u88ab\u5220\u9664\u3002\u7528\u4e8e kafka-consumer-groups.sh \u83b7\u53d6\u6d88\u8d39\u8005\u7ec4\u8be6\u7ec6\u4fe1\u606f\u3002 SimpleAclAuthorizer \u73b0\u5728\u9ed8\u8ba4\u5c06\u8bbf\u95ee\u62d2\u7edd\u8bb0\u5f55\u5230\u6388\u6743\u8005\u65e5\u5fd7\u4e2d\u3002 \u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u73b0\u5728\u4f5c\u4e3a \u7684\u5b50\u7c7b\u4e4b\u4e00\u62a5\u544a\u7ed9\u5ba2\u6237\u7aef AuthenticationException \u3002\u5982\u679c\u5ba2\u6237\u7aef\u8fde\u63a5\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u5219\u4e0d\u4f1a\u6267\u884c\u91cd\u8bd5\u3002 \u81ea\u5b9a\u4e49 SaslServer \u5b9e\u73b0\u53ef\u80fd\u4f1a SaslAuthenticationException \u629b\u51fa\u9519\u8bef\u6d88\u606f\u4ee5\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u6307\u793a\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u7684\u539f\u56e0\u3002\u5b9e\u65bd\u8005\u5e94\u6ce8\u610f\u4e0d\u8981\u5728\u5f02\u5e38\u6d88\u606f\u4e2d\u5305\u542b\u4efb\u4f55\u5b89\u5168\u5173\u952e\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u4e0d\u5e94\u6cc4\u9732\u7ed9\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u7684\u5ba2\u6237\u7aef\u3002 \u5411 JMX \u6ce8\u518c\u4ee5\u63d0\u4f9b\u7248\u672c\u548c\u63d0\u4ea4 ID \u7684mbean app-info \u5c06\u88ab\u5f03\u7528\uff0c\u5e76\u66ff\u6362\u4e3a\u63d0\u4f9b\u8fd9\u4e9b\u5c5e\u6027\u7684\u6307\u6807\u3002 Kafka \u6307\u6807\u73b0\u5728\u53ef\u80fd\u5305\u542b\u975e\u6570\u5b57\u503c\u3002 org.apache.kafka.common.Metric#value() \u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06 0.0 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8fd4\u56de\uff0c\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u7834\u574f\u8bfb\u53d6\u6bcf\u4e2a\u5ba2\u6237\u7aef\u6307\u6807\u503c\u7684\u7528\u6237\u7684\u53ef\u80fd\u6027\uff08\u901a\u8fc7\u5b9e\u73b0 MetricsReporter \u6216\u8c03\u7528\u8be5 metrics() \u65b9\u6cd5\uff09\u3002 org.apache.kafka.common.Metric#metricValue() \u53ef\u7528\u4e8e\u68c0\u7d22\u6570\u5b57\u548c\u975e\u6570\u5b57\u5ea6\u91cf\u503c\u3002 \u73b0\u5728\uff0c\u6bcf\u4e2a Kafka \u901f\u7387\u6307\u6807\u90fd\u6709\u4e00\u4e2a\u76f8\u5e94\u7684\u7d2f\u79ef\u8ba1\u6570\u6307\u6807\uff0c\u5e76\u5e26\u6709\u540e\u7f00 -total \u4ee5\u7b80\u5316\u4e0b\u6e38\u5904\u7406\u3002\u4f8b\u5982\uff0c records-consumed-rate \u6709\u4e00\u4e2a\u540d\u4e3a \u7684\u76f8\u5e94\u6307\u6807 records-consumed-total \u3002 kafka_mx4jenable \u4ec5\u5f53\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u65f6\uff0c\u624d\u4f1a\u542f\u7528 Mx4j true \u3002\u7531\u4e8e\u903b\u8f91\u53cd\u8f6c\u9519\u8bef\uff0c\u5b83\u4ee5\u524d\u9ed8\u8ba4\u542f\u7528\uff0c\u5982\u679c kafka_mx4jenable \u8bbe\u7f6e\u4e3a\u5219\u7981\u7528 true \u3002 \u5ba2\u6237\u7aef jar \u4e2d\u7684\u5305 org.apache.kafka.common.security.auth \u5df2\u516c\u5f00\u5e76\u6dfb\u52a0\u5230 javadocs \u4e2d\u3002\u4ee5\u524d\u4f4d\u4e8e\u6b64\u5305\u4e2d\u7684\u5185\u90e8\u7c7b\u5df2\u79fb\u81f3\u5176\u4ed6\u5730\u65b9\u3002 \u5f53\u4f7f\u7528\u6388\u6743\u8005\u5e76\u4e14\u7528\u6237\u6ca1\u6709\u4e3b\u9898\u6240\u9700\u7684\u6743\u9650\u65f6\uff0c\u4ee3\u7406\u5c06\u5411\u8bf7\u6c42\u8fd4\u56de TOPIC_AUTHORIZATION_FAILED \u9519\u8bef\uff0c\u65e0\u8bba\u4ee3\u7406\u4e0a\u662f\u5426\u5b58\u5728\u4e3b\u9898\u3002\u5982\u679c\u7528\u6237\u5177\u6709\u6240\u9700\u7684\u6743\u9650\u5e76\u4e14\u4e3b\u9898\u4e0d\u5b58\u5728\uff0c\u5219\u5c06\u8fd4\u56de UNKNOWN_TOPIC_OR_PARTITION \u9519\u8bef\u4ee3\u7801\u3002 config/consumer.properties \u6587\u4ef6\u5df2\u66f4\u65b0\u4ee5\u4f7f\u7528\u65b0\u7684\u6d88\u8d39\u8005\u914d\u7f6e\u5c5e\u6027\u3002","title":"1.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#_15","text":"KIP-112 \uff1aLeaderAndIsrRequest v1 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 is_new \u5b57\u6bb5\u3002 KIP-112 \uff1aUpdateMetadataRequest v4 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 offline_replicas \u5b57\u6bb5\u3002 KIP-112 \uff1aMetadataResponse v5 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 offline_replicas \u5b57\u6bb5\u3002 KIP-112 \uff1aProduceResponse v4 \u5f15\u5165\u4e86 KafkaStorageException \u7684\u9519\u8bef\u4ee3\u7801\u3002 KIP-112 \uff1aFetchResponse v6 \u5f15\u5165\u4e86 KafkaStorageException \u7684\u9519\u8bef\u4ee3\u7801\u3002 KIP-152 \uff1a\u6dfb\u52a0\u4e86 SaslAuthenticate \u8bf7\u6c42\u4ee5\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u62a5\u544a\u3002\u5982\u679c SaslHandshake \u8bf7\u6c42\u7248\u672c\u5927\u4e8e 0\uff0c\u5219\u5c06\u4f7f\u7528\u6b64\u8bf7\u6c42\u3002","title":"\u65b0\u534f\u8bae\u7248\u672c"},{"location":"1/#0110-kafka-streams","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.11.0 \u5347\u7ea7\u5230 1.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002\u4f46\u662f\uff0cKafka Streams 1.0 \u9700\u8981 0.10 \u6d88\u606f\u683c\u5f0f\u6216\u66f4\u65b0\u7248\u672c\uff0c\u5e76\u4e14\u4e0d\u9002\u7528\u4e8e\u8f83\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u3002 \u5982\u679c\u60a8\u6b63\u5728\u76d1\u89c6\u6d41\u6307\u6807\uff0c\u5219\u9700\u8981\u5bf9\u62a5\u544a\u548c\u76d1\u89c6\u4ee3\u7801\u4e2d\u7684\u6307\u6807\u540d\u79f0\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u56e0\u4e3a\u6307\u6807\u4f20\u611f\u5668\u5c42\u6b21\u7ed3\u6784\u5df2\u66f4\u6539\u3002 \u6709\u4e00\u4e9b\u516c\u5171 API\uff0c\u5305\u62ec ProcessorContext#schedule() \u3001 Processor#punctuate() \u548c KStreamBuilder \uff0c TopologyBuilder \u5df2\u88ab\u65b0 API \u5f03\u7528\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5347\u7ea7\u65f6\u8fdb\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u66f4\u6539\uff0c\u8fd9\u4e9b\u66f4\u6539\u5e94\u8be5\u975e\u5e38\u5c0f\uff0c\u56e0\u4e3a\u65b0\u7684 API \u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 1.0.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 0.11.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#0102-kafka-streams","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.2 \u5347\u7ea7\u5230 1.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 1.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u5982\u679c\u60a8\u6b63\u5728\u76d1\u89c6\u6d41\u6307\u6807\uff0c\u5219\u9700\u8981\u5bf9\u62a5\u544a\u548c\u76d1\u89c6\u4ee3\u7801\u4e2d\u7684\u6307\u6807\u540d\u79f0\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u56e0\u4e3a\u6307\u6807\u4f20\u611f\u5668\u5c42\u6b21\u7ed3\u6784\u5df2\u66f4\u6539\u3002 \u6709\u4e00\u4e9b\u516c\u5171 API\uff0c\u5305\u62ec ProcessorContext#schedule() \u3001 Processor#punctuate() \u548c KStreamBuilder \uff0c TopologyBuilder \u5df2\u88ab\u65b0 API \u5f03\u7528\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5347\u7ea7\u65f6\u8fdb\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u66f4\u6539\uff0c\u8fd9\u4e9b\u66f4\u6539\u5e94\u8be5\u975e\u5e38\u5c0f\uff0c\u56e0\u4e3a\u65b0\u7684 API \u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 0.10.2 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#0101-kafka-streams","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 1.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 1.0\u30010.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u60a8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u60a8\u7684\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u5982\u679c\u60a8\u6b63\u5728\u76d1\u89c6\u6d41\u6307\u6807\uff0c\u5219\u9700\u8981\u5bf9\u62a5\u544a\u548c\u76d1\u89c6\u4ee3\u7801\u4e2d\u7684\u6307\u6807\u540d\u79f0\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u56e0\u4e3a\u6307\u6807\u4f20\u611f\u5668\u5c42\u6b21\u7ed3\u6784\u5df2\u66f4\u6539\u3002 \u6709\u4e00\u4e9b\u516c\u5171 API\uff0c\u5305\u62ec ProcessorContext#schedule() \u3001 Processor#punctuate() \u548c KStreamBuilder \uff0c TopologyBuilder \u5df2\u88ab\u65b0 API \u5f03\u7528\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5347\u7ea7\u65f6\u8fdb\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u66f4\u6539\uff0c\u8fd9\u4e9b\u66f4\u6539\u5e94\u8be5\u975e\u5e38\u5c0f\uff0c\u56e0\u4e3a\u65b0\u7684 API \u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u5982\u679c\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\uff08\u5373\u7528\u6237\u5b9e\u73b0\u7684\uff09\u65f6\u95f4\u6233\u63d0\u53d6\u5668\uff0c\u60a8\u5c06\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a\u63a5\u53e3 TimestampExtractor \u5df2\u66f4\u6539\u3002 \u5982\u679c\u60a8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u6807\uff0c\u5219\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a StreamsMetric \u754c\u9762\u5df2\u66f4\u6539\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 1.0.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 0.10.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#0100-kafka-streams","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 1.0 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 1.0 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.1\u30010.11.0\u30010.10.2 \u6216 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 1.0.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.1 \u4e2d\u7684 Streams API \u66f4\u6539 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 1.0.2 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.11.0.3 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u4e3a\u65b0\u90e8\u7f72\u7684 1.0.2 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u505a\u597d\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u8df3\u51fa\u7684\u51c6\u5907\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52301.0.0\u62161.0.1\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff081.0.0 \u6216 1.0.1\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b","title":"\u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#08x09x0100x0101x-0102x-01100","text":"Kafka 0.11.0.0 \u5f15\u5165\u4e86\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4ee5\u53ca\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4f46\u662f\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 0.11.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u4ece\u7248\u672c 0.10.2 \u5f00\u59cb\uff0cJava \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u5df2\u7ecf\u83b7\u5f97\u4e86\u4e0e\u65e7\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u7684\u80fd\u529b\u3002\u7248\u672c 0.11.0 \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u7248\u672c 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u7684\u4ee3\u7406\u4f4e\u4e8e 0.10.0\uff0c\u5219\u5fc5\u987b\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u3002\u7248\u672c 0.11.0 \u4ee3\u7406\u652f\u6301 0.8.x \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u5ba2\u6237\u7aef\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u3002CURRENT_KAFKA_VERSION \u662f\u6307\u60a8\u8981\u5347\u7ea7\u7684\u7248\u672c\u3002CURRENT_MESSAGE_FORMAT_VERSION \u6307\u5f53\u524d\u4f7f\u7528\u7684\u5f53\u524d\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u60a8\u4e4b\u524d\u6ca1\u6709\u8986\u76d6\u6d88\u606f\u683c\u5f0f\uff0c\u5219\u5e94\u5c06 CURRENT_MESSAGE_FORMAT_VERSION \u8bbe\u7f6e\u4e3a\u4e0e CURRENT_KAFKA_VERSION \u5339\u914d\u3002 inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u30010.10.1\u62160.10.2\uff09\u3002 log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91\u5e76\u5c06 inter.broker.protocol.version \u5176\u8bbe\u7f6e\u4e3a 0.11.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\uff0c\u4f46\u6682\u65f6\u4e0d\u8981\u66f4\u6539 log.message.format.version \u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u4e00\u65e6\u6240\u6709\uff08\u6216\u5927\u591a\u6570\uff09\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.11.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u8bf7\u6ce8\u610f\uff0c\u65e7\u7684 Scala \u6d88\u8d39\u8005\u4e0d\u652f\u6301\u65b0\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u4e0b\u8f6c\u6362\u7684\u6027\u80fd\u6210\u672c\uff08\u6216\u5229\u7528 \u6070\u597d\u4e00\u6b21\u8bed\u4e49 \uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u65b0\u7684 Java \u6d88\u8d39\u8005\u3002 \u9644\u52a0\u5347\u7ea7\u8bf4\u660e\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u5347\u7ea7\u4ee3\u7406\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e5f\u7c7b\u4f3c\u3002 bin/kafka-topics.sh \u5728\u66f4\u65b0\u5168\u5c40\u8bbe\u7f6e\u4e4b\u524d\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e3b\u9898\u7ba1\u7406\u5de5\u5177 () \u5728\u5404\u4e2a\u4e3b\u9898\u4e0a\u542f\u7528 0.11.0 \u6d88\u606f\u683c\u5f0f log.message.format.version \u3002 \u5982\u679c\u60a8\u8981\u4ece 0.10.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u5219\u65e0\u9700\u5728\u5207\u6362\u5230 0.11.0 \u4e4b\u524d\u5148\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u65b0\u5230 0.10.0\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x\u30010.10.1.x \u6216 0.10.2.x \u5347\u7ea7\u5230 0.11.0.0"},{"location":"1/#0102-kafka-streams_1","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.2 \u5347\u7ea7\u5230 0.11.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.11.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 0.10.2 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#0101-kafka-streams_1","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 0.11.0 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.11.0 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u60a8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u60a8\u7684\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u5982\u679c\u60a8\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86customized key.serde , value.serde \u548c timestamp.extractor \uff0c\u5efa\u8bae\u4f7f\u7528\u5b83\u4eec\u66ff\u6362\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u914d\u7f6e\u5df2\u88ab\u5f03\u7528\u3002 \u5982\u679c\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\uff08\u5373\u7528\u6237\u5b9e\u73b0\u7684\uff09\u65f6\u95f4\u6233\u63d0\u53d6\u5668\uff0c\u60a8\u5c06\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a\u63a5\u53e3 TimestampExtractor \u5df2\u66f4\u6539\u3002 \u5982\u679c\u60a8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u6807\uff0c\u5219\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a StreamsMetric \u754c\u9762\u5df2\u66f4\u6539\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 0.10.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#0100-kafka-streams_1","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 0.11.0 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 0.11.0 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.11.0\u30010.10.2 \u6216 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 0.11.0 \u4e2d\u7684 Streams API \u66f4\u6539 \u3001 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539 \u548c 0.10.1 \u4e2d\u7684 Streams API \u66f4\u6539 \u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 0.11.0.3 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.11.0.3 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u51c6\u5907\u65b0\u90e8\u7f72\u7684 0.11.0.3 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u53cd\u5f39\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52300.11.0.0\u30010.11.0.1\u62160.11.0.2\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff080.11.0.0\u30010.11.0.1 \u6216 0.11.0.2\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b","title":"\u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#01103","text":"\u6dfb\u52a0\u4e86\u65b0\u7684 Kafka Streams \u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7 \u6709\u5173\u6b64\u65b0\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 Kafka Streams \u5347\u7ea7\u6307\u5357\u3002","title":"0.11.0.3 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#01100","text":"\u73b0\u5728\u9ed8\u8ba4\u7981\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e\u3002\u65b0\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u66f4\u6ce8\u91cd\u6301\u4e45\u6027\u800c\u4e0d\u662f\u53ef\u7528\u6027\u3002\u5e0c\u671b\u4fdd\u7559\u4ee5\u524d\u884c\u4e3a\u7684\u7528\u6237\u5e94\u5c06\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e unclean.leader.election.enable \u4e3a true \u3002 \u751f\u4ea7\u8005\u914d\u7f6e block.on.buffer.full \u548c metadata.fetch.timeout.ms \u5df2 timeout.ms \u88ab\u5220\u9664\u3002\u5b83\u4eec\u6700\u521d\u5728 Kafka 0.9.0.0 \u4e2d\u88ab\u5f03\u7528\u3002 offsets.topic.replication.factor \u73b0\u5728\uff0c\u5728\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u65f6\u5f3a\u5236\u6267\u884c\u4ee3\u7406\u914d\u7f6e\u3002\u5185\u90e8\u81ea\u52a8\u4e3b\u9898\u521b\u5efa\u5c06\u5931\u8d25\u5e76\u51fa\u73b0 GROUP_COORDINATOR_NOT_AVAILABLE \u9519\u8bef\uff0c\u76f4\u5230\u96c6\u7fa4\u5927\u5c0f\u6ee1\u8db3\u6b64\u590d\u5236\u56e0\u5b50\u8981\u6c42\u3002 \u4f7f\u7528 snappy \u538b\u7f29\u6570\u636e\u65f6\uff0c\u751f\u4ea7\u8005\u548c\u4ee3\u7406\u5c06\u4f7f\u7528\u538b\u7f29\u65b9\u6848\u7684\u9ed8\u8ba4\u5757\u5927\u5c0f (2 x 32 KB) \u800c\u4e0d\u662f 1 KB\uff0c\u4ee5\u63d0\u9ad8\u538b\u7f29\u7387\u3002\u6709\u62a5\u544a\u79f0\uff0c\u4f7f\u7528\u8f83\u5c0f\u5757\u5927\u5c0f\u538b\u7f29\u7684\u6570\u636e\u6bd4\u4f7f\u7528\u8f83\u5927\u5757\u5927\u5c0f\u538b\u7f29\u65f6\u5927 50%\u3002\u5bf9\u4e8e\u5feb\u901f\u7684\u60c5\u51b5\uff0c\u5177\u6709 5000 \u4e2a\u5206\u533a\u7684\u751f\u4ea7\u8005\u5c06\u9700\u8981\u989d\u5916\u7684 315 MB JVM \u5806\u3002 \u540c\u6837\uff0c\u5f53\u4f7f\u7528 gzip \u538b\u7f29\u6570\u636e\u65f6\uff0c\u751f\u4ea7\u8005\u548c\u4ee3\u7406\u5c06\u4f7f\u7528 8 KB \u800c\u4e0d\u662f 1 KB \u4f5c\u4e3a\u7f13\u51b2\u533a\u5927\u5c0f\u3002gzip \u7684\u9ed8\u8ba4\u503c\u8fc7\u4f4e\uff08512 \u5b57\u8282\uff09\u3002 \u4ee3\u7406\u914d\u7f6e max.message.bytes \u73b0\u5728\u9002\u7528\u4e8e\u4e00\u6279\u6d88\u606f\u7684\u603b\u5927\u5c0f\u3002\u4ee5\u524d\uff0c\u8be5\u8bbe\u7f6e\u5e94\u7528\u4e8e\u6279\u91cf\u538b\u7f29\u6d88\u606f\uff0c\u6216\u5355\u72ec\u5e94\u7528\u4e8e\u975e\u538b\u7f29\u6d88\u606f\u3002\u6d88\u606f\u6279\u53ef\u80fd\u4ec5\u5305\u542b\u5355\u4e2a\u6d88\u606f\uff0c\u56e0\u6b64\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5bf9\u5355\u4e2a\u6d88\u606f\u7684\u5927\u5c0f\u7684\u9650\u5236\u4ec5\u901a\u8fc7\u6279\u5904\u7406\u683c\u5f0f\u7684\u5f00\u9500\u6765\u51cf\u5c11\u3002\u7136\u800c\uff0c\u6d88\u606f\u683c\u5f0f\u8f6c\u6362\u6709\u4e00\u4e9b\u5fae\u5999\u7684\u542b\u4e49\uff08\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 \u4e0b\u6587\uff09\u3002 \u53e6\u8bf7\u6ce8\u610f\uff0c\u867d\u7136\u4ee5\u524d\u4ee3\u7406\u5c06\u786e\u4fdd\u6bcf\u4e2a\u63d0\u53d6\u8bf7\u6c42\u4e2d\u81f3\u5c11\u8fd4\u56de\u4e00\u6761\u6d88\u606f\uff08\u65e0\u8bba\u603b\u63d0\u53d6\u5927\u5c0f\u548c\u5206\u533a\u7ea7\u522b\u63d0\u53d6\u5927\u5c0f\u5982\u4f55\uff09\uff0c\u4f46\u73b0\u5728\u76f8\u540c\u7684\u884c\u4e3a\u9002\u7528\u4e8e\u4e00\u6279\u6d88\u606f\u3002 \u9ed8\u8ba4\u542f\u7528 GC \u65e5\u5fd7\u8f6e\u6362\uff0c\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605 KAFKA-3754\u3002 RecordMetadata\u3001MetricName \u548c Cluster \u7c7b\u5df2\u5f03\u7528\u7684\u6784\u9020\u51fd\u6570\u5df2\u88ab\u5220\u9664\u3002 \u901a\u8fc7\u63d0\u4f9b\u7528\u6237\u6807\u5934\u8bfb\u5199\u8bbf\u95ee\u7684\u65b0\u6807\u5934\u63a5\u53e3\u6dfb\u52a0\u4e86\u7528\u6237\u6807\u5934\u652f\u6301\u3002 Headers headers() ProducerRecord \u548c ConsumerRecord \u901a\u8fc7\u65b9\u6cd5\u8c03\u7528\u516c\u5f00\u65b0\u7684 Headers API \u3002 \u5f15\u5165\u4e86 ExtendedSerializer \u548c ExtendedDeserializer \u63a5\u53e3\u6765\u652f\u6301\u6807\u5934\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002\u5982\u679c\u914d\u7f6e\u7684\u5e8f\u5217\u5316\u5668\u548c\u53cd\u5e8f\u5217\u5316\u5668\u4e0d\u662f\u4e0a\u8ff0\u7c7b\uff0c\u5219\u6807\u5934\u5c06\u88ab\u5ffd\u7565\u3002 group.initial.rebalance.delay.ms \u5f15\u5165\u4e86\u65b0\u914d\u7f6e\u3002 GroupCoordinator \u6b64\u914d\u7f6e\u6307\u5b9a\u5ef6\u8fdf\u521d\u59cb\u6d88\u8d39\u8005\u91cd\u65b0\u5e73\u8861\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 \u3002\u5f53\u65b0\u6210\u5458\u52a0\u5165\u8be5\u7ec4\u65f6\uff0c\u91cd\u65b0\u5e73\u8861\u5c06\u8fdb\u4e00\u6b65\u5ef6\u8fdf \u7684\u503c group.initial.rebalance.delay.ms \uff0c\u6700\u591a\u4e3a max.poll.interval.ms \u3002\u9ed8\u8ba4\u503c\u4e3a 3 \u79d2\u3002\u5728\u5f00\u53d1\u548c\u6d4b\u8bd5\u671f\u95f4\uff0c\u53ef\u80fd\u9700\u8981\u5c06\u5176\u8bbe\u7f6e\u4e3a 0\uff0c\u4ee5\u514d\u5ef6\u8fdf\u6d4b\u8bd5\u6267\u884c\u65f6\u95f4\u3002 org.apache.kafka.common.Cluster#partitionsForTopic \uff0c partitionsForNode \u5e76\u4e14 availablePartitionsForTopic \u65b9\u6cd5\u5c06\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5217\u8868 null \uff08\u8fd9\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u4e0d\u597d\u7684\u505a\u6cd5\uff09\uff0c\u4ee5\u9632\u6240\u9700\u4e3b\u9898\u7684\u5143\u6570\u636e\u4e0d\u5b58\u5728\u3002 Streams API \u914d\u7f6e\u53c2\u6570 timestamp.extractor \u3001 key.serde \u548c value.serde \u5df2\u5f03\u7528\u5e76\u5206\u522b\u66ff\u6362\u4e3a default.timestamp.extractor \u3001 default.key.serde \u548c default.value.serde \u3002 \u5bf9\u4e8e Java \u4f7f\u7528\u8005 API \u4e2d\u7684\u504f\u79fb\u63d0\u4ea4\u5931\u8d25\uff0c\u5f53 \u7684\u5b9e\u4f8b\u4f20\u9012\u7ed9\u63d0\u4ea4\u56de\u8c03 commitAsync \u65f6\uff0c\u6211\u4eec\u4e0d\u518d\u516c\u5f00\u6839\u672c\u539f\u56e0\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c RetriableCommitFailedException \u8bf7\u53c2\u9605 KAFKA-5052 \u3002","title":"0.11.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#_16","text":"KIP-107 \uff1aFetchRequest v5 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 log_start_offset \u5b57\u6bb5\u3002 KIP-107 \uff1aFetchResponse v5 \u5f15\u5165\u4e86\u5206\u533a\u7ea7 log_start_offset \u5b57\u6bb5\u3002 KIP-82 header \uff1aProduceRequest v3\u5728\u6d88\u606f\u534f\u8bae\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b key field\u548c value field\u3002 KIP-82 header \uff1aFetchResponse v5\u5728\u6d88\u606f\u534f\u8bae\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b key \u5b57\u6bb5\u548c value \u5b57\u6bb5\u3002","title":"\u65b0\u534f\u8bae\u7248\u672c"},{"location":"1/#exactly-once","text":"Kafka 0.11.0 \u652f\u6301\u751f\u4ea7\u8005\u4e2d\u7684\u5e42\u7b49\u548c\u4e8b\u52a1\u529f\u80fd\u3002\u5e42\u7b49\u4f20\u9012\u53ef\u786e\u4fdd\u5728\u5355\u4e2a\u751f\u4ea7\u8005\u7684\u751f\u547d\u5468\u671f\u5185\u5c06\u6d88\u606f\u6070\u597d\u4f20\u9012\u5230\u7279\u5b9a\u4e3b\u9898\u5206\u533a\u4e00\u6b21\u3002\u4e8b\u52a1\u4f20\u9012\u5141\u8bb8\u751f\u4ea7\u8005\u5c06\u6570\u636e\u53d1\u9001\u5230\u591a\u4e2a\u5206\u533a\uff0c\u4ee5\u4fbf\u6240\u6709\u6d88\u606f\u90fd\u6210\u529f\u4f20\u9012\uff0c\u6216\u8005\u6ca1\u6709\u6d88\u606f\u6210\u529f\u4f20\u9012\u3002\u8fd9\u4e9b\u529f\u80fd\u5171\u540c\u5b9e\u73b0\u4e86 Kafka \u4e2d\u7684\u201c\u6070\u597d\u4e00\u6b21\u8bed\u4e49\u201d\u3002\u7528\u6237\u6307\u5357\u4e2d\u63d0\u4f9b\u4e86\u6709\u5173\u8fd9\u4e9b\u529f\u80fd\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f46\u4e0b\u9762\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e9b\u6709\u5173\u5728\u5347\u7ea7\u7684\u96c6\u7fa4\u4e2d\u542f\u7528\u8fd9\u4e9b\u529f\u80fd\u7684\u5177\u4f53\u8bf4\u660e\u3002\u8bf7\u6ce8\u610f\uff0c\u542f\u7528 EoS \u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u5e76\u4e14\u5982\u679c\u4e0d\u4f7f\u7528\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u4ee3\u7406\u7684\u884c\u4e3a\u3002 \u53ea\u6709\u65b0\u7684 Java \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u652f\u6301 Exactly Once \u8bed\u4e49\u3002 \u8fd9\u4e9b\u529f\u80fd\u4e3b\u8981\u53d6\u51b3\u4e8e 0.11.0 \u6d88\u606f\u683c\u5f0f \u3002\u5c1d\u8bd5\u5728\u65e7\u683c\u5f0f\u4e0a\u4f7f\u7528\u5b83\u4eec\u5c06\u5bfc\u81f4\u7248\u672c\u4e0d\u53d7\u652f\u6301\u7684\u9519\u8bef\u3002 \u4e8b\u52a1\u72b6\u6001\u5b58\u50a8\u5728\u65b0\u7684\u5185\u90e8\u4e3b\u9898\u4e2d __transaction_state \u3002\u76f4\u5230\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u4f7f\u7528\u4e8b\u52a1\u8bf7\u6c42 API \u65f6\u624d\u4f1a\u521b\u5efa\u6b64\u4e3b\u9898\u3002\u4e0e\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u4e3b\u9898\u7c7b\u4f3c\uff0c\u6709\u51e0\u4e2a\u8bbe\u7f6e\u53ef\u4ee5\u63a7\u5236\u4e3b\u9898\u7684\u914d\u7f6e\u3002\u4f8b\u5982\uff0c transaction.state.log.min.isr \u63a7\u5236\u8be5\u4e3b\u9898\u7684\u6700\u5c0f ISR\u3002\u6709\u5173\u9009\u9879\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u7528\u6237\u6307\u5357\u4e2d\u7684\u914d\u7f6e\u90e8\u5206\u3002 \u5bf9\u4e8e\u5b89\u5168\u96c6\u7fa4\uff0c\u4e8b\u52a1 API \u9700\u8981\u65b0\u7684 ACL\uff0c\u53ef\u4ee5\u4f7f\u7528 bin/kafka-acls.sh . \u5de5\u5177\u3002 Kafka \u4e2d\u7684 EoS \u5f15\u5165\u4e86\u65b0\u7684\u8bf7\u6c42 API \u5e76\u4fee\u6539\u4e86\u591a\u4e2a\u73b0\u6709 API\u3002 \u6709\u5173\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-98","title":"\u5173\u4e8e Exactly Once \u8bed\u4e49\u7684\u6ce8\u91ca"},{"location":"1/#0110","text":"0.11.0 \u6d88\u606f\u683c\u5f0f\u5305\u62ec\u51e0\u4e2a\u4e3b\u8981\u589e\u5f3a\u529f\u80fd\uff0c\u4ee5\u4fbf\u652f\u6301\u751f\u4ea7\u8005\u66f4\u597d\u7684\u4f20\u9012\u8bed\u4e49\uff08\u8bf7\u53c2\u9605 KIP-98 \uff09\u548c\u6539\u8fdb\u7684\u590d\u5236\u5bb9\u9519\u80fd\u529b\uff08\u8bf7\u53c2\u9605 KIP-101 \uff09\u3002\u5c3d\u7ba1\u65b0\u683c\u5f0f\u5305\u542b\u66f4\u591a\u4fe1\u606f\u4ee5\u4f7f\u8fd9\u4e9b\u6539\u8fdb\u6210\u4e3a\u53ef\u80fd\uff0c\u4f46\u6211\u4eec\u5df2\u7ecf\u4f7f\u6279\u5904\u7406\u683c\u5f0f\u66f4\u52a0\u9ad8\u6548\u3002\u53ea\u8981\u6bcf\u6279\u6b21\u7684\u6d88\u606f\u6570\u91cf\u8d85\u8fc7 2\uff0c\u60a8\u5c31\u53ef\u4ee5\u9884\u671f\u8f83\u4f4e\u7684\u603b\u4f53\u5f00\u9500\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u8f83\u5c0f\u7684\u6279\u6b21\uff0c\u53ef\u80fd\u4f1a\u5bf9\u6027\u80fd\u4ea7\u751f\u8f83\u5c0f\u7684\u5f71\u54cd\u3002\u8bf7\u53c2\u9605 \u6b64\u5904\uff0c \u4e86\u89e3\u6211\u4eec\u5bf9\u65b0\u6d88\u606f\u683c\u5f0f\u7684\u521d\u59cb\u6027\u80fd\u5206\u6790\u7684\u7ed3\u679c\u3002 \u60a8\u8fd8\u53ef\u4ee5\u5728KIP-98 \u63d0\u6848\u4e2d\u627e\u5230\u6709\u5173\u6d88\u606f\u683c\u5f0f\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f \u3002 \u65b0\u6d88\u606f\u683c\u5f0f\u7684\u663e\u7740\u5dee\u5f02\u4e4b\u4e00\u662f\uff0c\u5373\u4f7f\u672a\u538b\u7f29\u7684\u6d88\u606f\u4e5f\u4f1a\u4f5c\u4e3a\u5355\u4e2a\u6279\u6b21\u5b58\u50a8\u5728\u4e00\u8d77\u3002\u8fd9\u5bf9\u4ee3\u7406\u914d\u7f6e\u6709\u4e00\u4e9b\u5f71\u54cd max.message.bytes \uff0c\u5b83\u9650\u5236\u4e86\u5355\u4e2a\u6279\u6b21\u7684\u5927\u5c0f\u3002\u9996\u5148\uff0c\u5982\u679c\u8f83\u65e7\u7684\u5ba2\u6237\u7aef\u4f7f\u7528\u65e7\u683c\u5f0f\u5411\u4e3b\u9898\u5206\u533a\u751f\u6210\u6d88\u606f\uff0c\u5e76\u4e14\u8fd9\u4e9b\u6d88\u606f\u5404\u81ea\u5c0f\u4e8e max.message.bytes \uff0c\u5219\u5728\u4e0a\u8f6c\u6362\u8fc7\u7a0b\u4e2d\u5c06\u5b83\u4eec\u5408\u5e76\u4e3a\u5355\u4e2a\u6279\u6b21\u540e\uff0c\u4ee3\u7406\u53ef\u80fd\u4ecd\u4f1a\u62d2\u7edd\u5b83\u4eec\u3002\u901a\u5e38\uff0c\u5f53\u5355\u4e2a\u6d88\u606f\u7684\u603b\u5927\u5c0f\u5927\u4e8e \u65f6\uff0c\u5c31\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5 max.message.bytes \u3002\u5bf9\u4e8e\u65e7\u6d88\u8d39\u8005\u8bfb\u53d6\u4ece\u65b0\u683c\u5f0f\u5411\u4e0b\u8f6c\u6362\u7684\u6d88\u606f\uff0c\u4e5f\u4f1a\u4ea7\u751f\u7c7b\u4f3c\u7684\u6548\u679c\uff1a\u5982\u679c\u63d0\u53d6\u5927\u5c0f\u672a\u8bbe\u7f6e\u4e3a\u81f3\u5c11\u4e0e max.message.bytes \uff0c\u5373\u4f7f\u5355\u4e2a\u672a\u538b\u7f29\u6d88\u606f\u5c0f\u4e8e\u914d\u7f6e\u7684\u83b7\u53d6\u5927\u5c0f\uff0c\u6d88\u8d39\u8005\u4e5f\u53ef\u80fd\u65e0\u6cd5\u53d6\u5f97\u8fdb\u5c55\u3002\u6b64\u884c\u4e3a\u4e0d\u4f1a\u5f71\u54cd 0.10.1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u7684 Java \u5ba2\u6237\u7aef\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528\u66f4\u65b0\u7684\u83b7\u53d6\u534f\u8bae\uff0c\u8be5\u534f\u8bae\u786e\u4fdd\u5373\u4f7f\u8d85\u8fc7\u83b7\u53d6\u5927\u5c0f\u4e5f\u53ef\u4ee5\u8fd4\u56de\u81f3\u5c11\u4e00\u6761\u6d88\u606f\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u60a8\u5e94\u8be5\u786e\u4fdd 1) \u751f\u4ea7\u8005\u7684\u6279\u91cf\u5927\u5c0f\u8bbe\u7f6e\u4e0d\u5927\u4e8e max.message.bytes \uff0c2) \u6d88\u8d39\u8005\u7684\u83b7\u53d6\u5927\u5c0f\u8bbe\u7f6e\u81f3\u5c11\u4e0e \u4e00\u6837\u5927 max.message.bytes \u3002 \u5927\u591a\u6570\u5173\u4e8e\u5347\u7ea7\u5230 0.10.0 \u6d88\u606f\u683c\u5f0f \u5bf9\u6027\u80fd\u5f71\u54cd\u7684\u8ba8\u8bba \u4ecd\u7136\u4e0e 0.11.0 \u5347\u7ea7\u6709\u5173\u3002\u8fd9\u4e3b\u8981\u5f71\u54cd\u672a\u4f7f\u7528 TLS \u4fdd\u62a4\u7684\u96c6\u7fa4\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u201c\u96f6\u590d\u5236\u201d\u4f20\u8f93\u5df2\u7ecf\u4e0d\u53ef\u80fd\u3002\u4e3a\u4e86\u907f\u514d\u964d\u9891\u8f6c\u6362\u7684\u6210\u672c\uff0c\u60a8\u5e94\u8be5\u786e\u4fdd\u6d88\u8d39\u8005\u5e94\u7528\u7a0b\u5e8f\u5347\u7ea7\u5230\u6700\u65b0\u7684 0.11.0 \u5ba2\u6237\u7aef\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u65e7\u7684\u6d88\u8d39\u8005\u5728 0.11.0.0 \u4e2d\u5df2\u88ab\u5f03\u7528\uff0c\u56e0\u6b64\u5b83\u4e0d\u652f\u6301\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u3002\u60a8\u5fc5\u987b\u5347\u7ea7\u624d\u80fd\u4f7f\u7528\u65b0\u7684\u6d88\u8d39\u8005\u624d\u80fd\u4f7f\u7528\u65b0\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u800c\u65e0\u9700\u8fdb\u884c\u4e0b\u8f6c\u6362\u7684\u6210\u672c\u3002\u8bf7\u6ce8\u610f\uff0c0.11.0 \u6d88\u8d39\u8005\u652f\u6301\u5411\u540e\u517c\u5bb9 0.10.0 \u4ee3\u7406\u53ca\u5411\u4e0a\u7248\u672c\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728\u4ee3\u7406\u4e4b\u524d\u5148\u5347\u7ea7\u5ba2\u6237\u7aef\u3002","title":"\u5173\u4e8e 0.11.0 \u4e2d\u65b0\u6d88\u606f\u683c\u5f0f\u7684\u8bf4\u660e"},{"location":"1/#08x09x0100x-0101x-01020","text":"0.10.2.0 \u8fdb\u884c\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4e0d\u8fc7\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u67e5\u770b 0.10.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316 \u3002 \u4ece\u7248\u672c 0.10.2 \u5f00\u59cb\uff0cJava \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u5df2\u7ecf\u83b7\u5f97\u4e86\u4e0e\u65e7\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u7684\u80fd\u529b\u3002\u7248\u672c 0.10.2 \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u7248\u672c 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u7684\u4ee3\u7406\u4f4e\u4e8e 0.10.0\uff0c\u5219\u5fc5\u987b\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u3002\u7248\u672c 0.10.2 \u4ee3\u7406\u652f\u6301 0.8.x \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u5ba2\u6237\u7aef\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u30010.9.0\u30010.10.0\u62160.10.1\uff09\u3002 log.message.format.version=CURRENT_KAFKA_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.10.2 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 \u5982\u679c\u60a8\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u662f 0.10.0\uff0c\u8bf7\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.2\uff08\u8fd9\u662f\u65e0\u64cd\u4f5c\uff0c\u56e0\u4e3a 0.10.0\u30010.10.1 \u548c 0.10.2 \u7684\u6d88\u606f\u683c\u5f0f\u76f8\u540c\uff09\u3002\u5982\u679c\u60a8\u4e4b\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u4e0d\u8981\u66f4\u6539 log.message.format.version - \u53ea\u6709\u5728\u6240\u6709\u4f7f\u7528\u8005\u5347\u7ea7\u5230 0.10.0.0 \u6216\u66f4\u9ad8\u7248\u672c\u540e\uff0c\u6b64\u53c2\u6570\u624d\u5e94\u66f4\u6539\u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u5982\u679c\u6b64\u65f6 log.message.format.version \u4ecd\u7136\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u7b49\u5230\u6240\u6709\u6d88\u8d39\u8005\u90fd\u5347\u7ea7\u5230 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.2 \u5e76\u5c06\u5b83\u4eec\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002","title":"\u4ece 0.8.x\u30010.9.x\u30010.10.0.x \u6216 0.10.1.x \u5347\u7ea7\u5230 0.10.2.0"},{"location":"1/#0101-kafka-streams_2","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 0.10.2 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.10.2 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 \u60a8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u60a8\u7684\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u5982\u679c\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\uff08\u5373\u7528\u6237\u5b9e\u73b0\u7684\uff09\u65f6\u95f4\u6233\u63d0\u53d6\u5668\uff0c\u60a8\u5c06\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a\u63a5\u53e3 TimestampExtractor \u5df2\u66f4\u6539\u3002 \u5982\u679c\u60a8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u6807\uff0c\u5219\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u7801\uff0c\u56e0\u4e3a StreamsMetric \u754c\u9762\u5df2\u66f4\u6539\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539\u3002","title":"\u5347\u7ea7 0.10.1 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#0100-kafka-streams_2","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 0.10.2 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 0.10.2 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.10.2 \u6216 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 0.10.2 \u4e2d\u7684 Streams API \u66f4\u6539 \u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 0.10.2.2 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.10.2.2 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u4e3a\u65b0\u90e8\u7f72\u7684 0.10.2.2 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u505a\u597d\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u53cd\u5f39\u7684\u51c6\u5907\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52300.10.2.0\u62160.10.2.1\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff080.10.2.0 \u6216 0.10.2.1\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b","title":"\u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#01022","text":"\u6dfb\u52a0\u4e86\u65b0\u7684\u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7","title":"0.10.2.2 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#01021","text":"StreamsConfig \u7c7b\u7684\u4e24\u4e2a\u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\u5df2\u66f4\u6539\uff0c\u4ee5\u63d0\u9ad8 Kafka Streams \u5e94\u7528\u7a0b\u5e8f\u7684\u5f39\u6027\u3002\u5185\u90e8 Kafka Streams \u751f\u4ea7\u8005 retries \u9ed8\u8ba4\u503c\u4ece 0 \u66f4\u6539\u4e3a 10\u3002\u5185\u90e8 Kafka Streams \u6d88\u8d39\u8005 max.poll.interval.ms \u9ed8\u8ba4\u503c\u4ece 300000 \u66f4\u6539\u4e3a Integer.MAX_VALUE \u3002","title":"0.10.2.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#01020","text":"Java \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u5df2\u7ecf\u83b7\u5f97\u4e86\u4e0e\u65e7\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u7684\u80fd\u529b\u3002\u7248\u672c 0.10.2 \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u7248\u672c 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u3002\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u8f83\u65e7\u7684\u4ee3\u7406\u65f6\uff0c\u67d0\u4e9b\u529f\u80fd\u4e0d\u53ef\u7528\u6216\u53d7\u5230\u9650\u5236\u3002 InterruptException \u5982\u679c\u8c03\u7528\u7ebf\u7a0b\u88ab\u4e2d\u65ad\uff0cJava \u4f7f\u7528\u8005\u4e0a\u7684\u591a\u4e2a\u65b9\u6cd5\u73b0\u5728\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u8bf7\u53c2\u9605 KafkaConsumer Javadoc \u4ee5\u83b7\u53d6\u6709\u5173\u6b64\u66f4\u6539\u7684\u66f4\u6df1\u5165\u7684\u8bf4\u660e\u3002 Java \u6d88\u8d39\u8005\u73b0\u5728\u6b63\u5e38\u5173\u95ed\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u8005\u6700\u591a\u7b49\u5f85 30 \u79d2\u624d\u80fd\u5b8c\u6210\u5f85\u5904\u7406\u7684\u8bf7\u6c42\u3002\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5e26\u6709\u8d85\u65f6\u7684\u65b0\u5173\u95ed API KafkaConsumer \u4ee5\u63a7\u5236\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u3002 \u53ef\u4ee5\u901a\u8fc7 --whitelist \u9009\u9879\u5c06\u591a\u4e2a\u4ee5\u9017\u53f7\u5206\u9694\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u4f20\u9012\u7ed9\u65b0 Java \u4f7f\u7528\u8005\u7684 MirrorMaker\u3002\u8fd9\u4f7f\u5f97\u4f7f\u7528\u65e7\u7684 Scala \u6d88\u8d39\u8005\u65f6\u7684\u884c\u4e3a\u4e0e MirrorMaker \u4e00\u81f4\u3002 \u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.1 \u5347\u7ea7\u5230 0.10.2 \u4e0d\u9700\u8981\u4ee3\u7406\u5347\u7ea7\u3002Kafka Streams 0.10.2 \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fde\u63a5\u5230 0.10.2 \u548c 0.10.1 \u4ee3\u7406\uff08\u4f46\u65e0\u6cd5\u8fde\u63a5\u5230 0.10.0 \u4ee3\u7406\uff09\u3002 Zookeeper \u4f9d\u8d56\u9879\u5df2\u4ece Streams API \u4e2d\u5220\u9664\u3002Streams API\u73b0\u5728\u4f7f\u7528Kafka\u534f\u8bae\u6765\u7ba1\u7406\u5185\u90e8\u4e3b\u9898\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4fee\u6539Zookeeper\u3002\u8fd9\u6d88\u9664\u4e86\u76f4\u63a5\u8bbf\u95ee Zookeeper \u7684\u6743\u9650\u7684\u9700\u8981\uff0c\u5e76\u4e14\u4e0d\u5e94\u518d\u5728 Streams \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bbe\u7f6e\u201cStreamsConfig.ZOOKEEPER_CONFIG\u201d\u3002\u5982\u679c Kafka \u96c6\u7fa4\u53d7\u5230\u4fdd\u62a4\uff0cStreams \u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u5177\u6709\u521b\u5efa\u65b0\u4e3b\u9898\u6240\u9700\u7684\u5b89\u5168\u6743\u9650\u3002 StreamsConfig \u7c7b\u4e2d\u6dfb\u52a0\u4e86\u51e0\u4e2a\u65b0\u5b57\u6bb5\uff0c\u5305\u62ec\u201csecurity.protocol\u201d\u3001\u201cconnections.max.idle.ms\u201d\u3001\u201cretry.backoff.ms\u201d\u3001\u201creconnect.backoff.ms\u201d\u548c\u201crequest.timeout.ms\u201d\u3002\u7528\u6237\u5e94\u6ce8\u610f\u9ed8\u8ba4\u503c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u8bbe\u7f6e\u3002\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u8003 3.5 Kafka Streams\u914d\u7f6e \u3002","title":"0.10.2.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#_17","text":"KIP-88 topics \uff1a\u5982\u679c\u6570\u7ec4\u8bbe\u7f6e\u4e3a \uff0cOffsetFetchRequest v2 \u652f\u6301\u68c0\u7d22\u6240\u6709\u4e3b\u9898\u7684\u504f\u79fb\u91cf null \u3002 KIP-88 \uff1aOffsetFetchResponse v2 \u5f15\u5165\u4e86\u4e00\u4e2a\u9876\u7ea7 error_code \u5b57\u6bb5\u3002 KIP-103 \uff1aUpdateMetadataRequest v3 listener_name \u5411\u6570\u7ec4\u5143\u7d20\u5f15\u5165\u4e86\u4e00\u4e2a\u5b57\u6bb5 end_points \u3002 KIP-108 \uff1aCreateTopicsRequest v1 \u5f15\u5165\u4e86\u4e00\u4e2a validate_only \u5b57\u6bb5\u3002 KIP-108 \uff1aCreateTopicsResponse v1 error_message \u5411\u6570\u7ec4\u5143\u7d20\u5f15\u5165\u4e86\u4e00\u4e2a\u5b57\u6bb5 topic_errors \u3002","title":"\u65b0\u534f\u8bae\u7248\u672c"},{"location":"1/#08x09x-0100x-01010","text":"0.10.1.0 \u8fdb\u884c\u4e86\u6709\u7ebf\u534f\u8bae\u66f4\u6539\u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u3002\u4f46\u662f\uff0c\u8bf7\u5728\u5347\u7ea7\u4e4b\u524d\u6ce8\u610f 0.10.1.0 \u4e2d\u7684\u6f5c\u5728\u91cd\u5927\u66f4\u6539 \u3002 \u6ce8\u610f\uff1a\u7531\u4e8e\u5f15\u5165\u4e86\u65b0\u534f\u8bae\uff0c\u56e0\u6b64\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u975e\u5e38\u91cd\u8981\uff08\u5373 0.10.1.x \u5ba2\u6237\u7aef\u4ec5\u652f\u6301 0.10.1.x \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\uff0c\u800c 0.10.1.x \u4ee3\u7406\u4e5f\u652f\u6301\u65e7\u5ba2\u6237\u7aef\uff09 \u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2.0\u30010.9.0.0\u62160.10.0.0\uff09\u3002 log.message.format.version=CURRENT_KAFKA_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u4e00\u6b21\u5347\u7ea7\u4e00\u4e2a\u4ee3\u7406\uff1a\u5173\u95ed\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.10.1.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 \u5982\u679c\u60a8\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u662f 0.10.0\uff0c\u8bf7\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.1\uff08\u8fd9\u662f\u65e0\u64cd\u4f5c\uff0c\u56e0\u4e3a 0.10.0 \u548c 0.10.1 \u7684\u6d88\u606f\u683c\u5f0f\u76f8\u540c\uff09\u3002\u5982\u679c\u60a8\u4e4b\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u4e0d\u8981\u66f4\u6539 log.message.format.version - \u53ea\u6709\u5728\u6240\u6709\u4f7f\u7528\u8005\u5347\u7ea7\u5230 0.10.0.0 \u6216\u66f4\u9ad8\u7248\u672c\u540e\uff0c\u6b64\u53c2\u6570\u624d\u5e94\u66f4\u6539\u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u5982\u679c\u6b64\u65f6 log.message.format.version \u4ecd\u7136\u4f4e\u4e8e 0.10.0\uff0c\u8bf7\u7b49\u5230\u6240\u6709\u6d88\u8d39\u8005\u90fd\u5347\u7ea7\u5230 0.10.0 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u5c06 log.message.format.version \u66f4\u6539\u4e3a 0.10.1 \u5e76\u5c06\u5b83\u4eec\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002","title":"\u4ece 0.8.x\u30010.9.x \u6216 0.10.0.X \u5347\u7ea7\u5230 0.10.1.0"},{"location":"1/#01012","text":"\u6dfb\u52a0\u4e86\u65b0\u7684\u914d\u7f6e\u53c2\u6570 upgrade.from \uff0c\u5141\u8bb8\u4ece\u7248\u672c 0.10.0.x \u6eda\u52a8\u5f39\u8df3\u5347\u7ea7","title":"0.10.1.2 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#01010","text":"\u65e5\u5fd7\u4fdd\u7559\u65f6\u95f4\u4e0d\u518d\u57fa\u4e8e\u65e5\u5fd7\u6bb5\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002\u76f8\u53cd\uff0c\u5b83\u5c06\u57fa\u4e8e\u65e5\u5fd7\u6bb5\u4e2d\u6d88\u606f\u7684\u6700\u5927\u65f6\u95f4\u6233\u3002 \u65e5\u5fd7\u6eda\u52a8\u65f6\u95f4\u4e0d\u518d\u53d6\u51b3\u4e8e\u65e5\u5fd7\u6bb5\u521b\u5efa\u65f6\u95f4\u3002\u76f8\u53cd\uff0c\u5b83\u73b0\u5728\u57fa\u4e8e\u6d88\u606f\u4e2d\u7684\u65f6\u95f4\u6233\u3002\u8fdb\u4e00\u6b65\u6765\u8bf4\u3002\u5982\u679c\u6bb5\u4e2d\u7b2c\u4e00\u6761\u6d88\u606f\u7684\u65f6\u95f4\u6233\u4e3aT\uff0c\u5219\u5f53\u65b0\u6d88\u606f\u7684\u65f6\u95f4\u6233\u5927\u4e8e\u6216\u7b49\u4e8eT + log.roll.ms\u65f6\uff0c\u65e5\u5fd7\u5c06\u88ab\u8f6c\u51fa \u7531\u4e8e\u6bcf\u4e2a\u6bb5\u589e\u52a0\u4e86\u65f6\u95f4\u7d22\u5f15\u6587\u4ef6\uff0c0.10.0 \u7684\u6253\u5f00\u6587\u4ef6\u5904\u7406\u7a0b\u5e8f\u5c06\u589e\u52a0\u7ea6 33%\u3002 \u65f6\u95f4\u7d22\u5f15\u548c\u504f\u79fb\u7d22\u5f15\u5171\u4eab\u76f8\u540c\u7684\u7d22\u5f15\u5927\u5c0f\u914d\u7f6e\u3002\u7531\u4e8e\u6bcf\u6b21\u7d22\u5f15\u6761\u76ee\u7684\u5927\u5c0f\u662f\u504f\u79fb\u7d22\u5f15\u6761\u76ee\u5927\u5c0f\u7684 1.5 \u500d\u3002\u7528\u6237\u53ef\u80fd\u9700\u8981\u589e\u52a0 log.index.size.max.bytes \u4ee5\u907f\u514d\u6f5c\u5728\u7684\u9891\u7e41\u65e5\u5fd7\u6eda\u52a8\u3002 \u7531\u4e8e\u7d22\u5f15\u6587\u4ef6\u6570\u91cf\u7684\u589e\u52a0\uff0c\u5728\u4e00\u4e9b\u65e5\u5fd7\u6bb5\u6570\u91cf\u8f83\u5927\uff08\u4f8b\u5982>15K\uff09\u7684broker\u4e0a\uff0cbroker\u542f\u52a8\u671f\u95f4\u7684\u65e5\u5fd7\u52a0\u8f7d\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u66f4\u957f\u3002\u6839\u636e\u6211\u4eec\u7684\u5b9e\u9a8c\uff0c\u5c06 num.recovery.threads.per.data.dir \u8bbe\u7f6e\u4e3a 1 \u53ef\u80fd\u4f1a\u51cf\u5c11\u65e5\u5fd7\u52a0\u8f7d\u65f6\u95f4\u3002","title":"0.10.1.0 \u4e2d\u6f5c\u5728\u7684\u91cd\u5927\u53d8\u5316"},{"location":"1/#0100-kafka-streams_3","text":"\u5c06 Streams \u5e94\u7528\u7a0b\u5e8f\u4ece 0.10.0 \u5347\u7ea7\u5230 0.10.1 \u786e\u5b9e\u9700\u8981 \u4ee3\u7406\u5347\u7ea7 \uff0c\u56e0\u4e3a Kafka Streams 0.10.1 \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u8fde\u63a5\u5230 0.10.1 \u4ee3\u7406\u3002 \u6709\u4e00\u4e9b API \u66f4\u6539\u4e0d\u5411\u540e\u517c\u5bb9\uff08\u8bf7\u53c2\u9605 0.10.1 \u4e2d\u7684 Streams API \u66f4\u6539 \u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u56e0\u6b64\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ee3\u7801\u3002\u4ec5\u4ea4\u6362 Kafka Streams \u5e93 jar \u6587\u4ef6\u662f\u884c\u4e0d\u901a\u7684\uff0c\u5e76\u4e14\u4f1a\u7834\u574f\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 \u4ece 0.10.0.x \u5347\u7ea7\u5230 0.10.1.2 \u9700\u8981\u4e24\u6b21\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76 upgrade.from=\"0.10.0\" \u4e3a\u7b2c\u4e00\u4e2a\u5347\u7ea7\u9636\u6bb5\u8bbe\u7f6e\u914d\u7f6e\uff08\u53c2\u89c1 KIP-268 \uff09\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5347\u7ea7\u3002 \u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6eda\u52a8\u53cd\u5f39\uff0c\u5e76\u786e\u4fdd\u5c06\u914d\u7f6e upgrade.from \u8bbe\u7f6e \"0.10.0\" \u4e3a\u65b0\u7248\u672c 0.10.1.2 \u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u9000\u56de\u4e00\u6b21 \u51c6\u5907\u65b0\u90e8\u7f72\u7684 0.10.1.2 \u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u7b2c\u4e8c\u8f6e\u6eda\u52a8\u53cd\u5f39\uff1b\u786e\u4fdd\u5220\u9664 config \u7684\u503c upgrade.from \u518d\u6b21\u5f39\u8df3\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4ee5\u5b8c\u6210\u5347\u7ea7 \u4ece0.10.0.x\u5347\u7ea7\u52300.10.1.0\u62160.10.1.1\u9700\u8981\u79bb\u7ebf\u5347\u7ea7\uff08\u4e0d\u652f\u6301\u6eda\u52a8\u5f39\u8df3\u5347\u7ea7\uff09 \u505c\u6b62\u6240\u6709\u65e7\u7684\uff080.10.0.x\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b \u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u5e76\u5c06\u65e7\u4ee3\u7801\u548c jar \u6587\u4ef6\u66ff\u6362\u4e3a\u65b0\u4ee3\u7801\u548c\u65b0 jar \u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u6240\u6709\u65b0\u7684\uff080.10.1.0 \u6216 0.10.1.1\uff09\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b","title":"\u5347\u7ea7 0.10.0 Kafka Streams \u5e94\u7528\u7a0b\u5e8f"},{"location":"1/#01010_1","text":"\u65b0\u7684 Java \u6d88\u8d39\u8005\u4e0d\u518d\u5904\u4e8e\u6d4b\u8bd5\u9636\u6bb5\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u7528\u4e8e\u6240\u6709\u65b0\u5f00\u53d1\u3002\u65e7\u7684 Scala \u4f7f\u7528\u8005\u4ecd\u7136\u53d7\u652f\u6301\uff0c\u4f46\u5b83\u4eec\u5c06\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u4e2d\u5f03\u7528\uff0c\u5e76\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u5220\u9664\u3002 \u5728\u65b0\u6d88\u8d39\u8005\u4e2d\u4f7f\u7528 MirrorMaker \u548c Console Consumer \u7b49\u5de5\u5177\u65f6\u4e0d\u518d\u9700\u8981 --new-consumer /\u5f00\u5173\uff1b --new.consumer \u53ea\u9700\u8981\u901a\u8fc7 Kafka \u4ee3\u7406\u6765\u8fde\u63a5\u5373\u53ef\uff0c\u800c\u4e0d\u662f\u901a\u8fc7 ZooKeeper \u6574\u4f53\u8fdb\u884c\u8fde\u63a5\u3002\u6b64\u5916\uff0c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u4e0e\u65e7\u6d88\u8d39\u8005\u7684\u4f7f\u7528\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u5220\u9664\u3002 Kafka \u96c6\u7fa4\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u96c6\u7fa4 ID \u6765\u552f\u4e00\u6807\u8bc6\u3002\u5f53broker\u5347\u7ea7\u52300.10.1.0\u65f6\uff0c\u5b83\u5c06\u81ea\u52a8\u751f\u6210\u3002\u96c6\u7fa4 ID \u53ef\u901a\u8fc7 kafka.server:type=KafkaServer,name=ClusterId \u6307\u6807\u83b7\u5f97\uff0c\u5b83\u662f\u5143\u6570\u636e\u54cd\u5e94\u7684\u4e00\u90e8\u5206\u3002\u5e8f\u5217\u5316\u5668\u3001\u5ba2\u6237\u7aef\u62e6\u622a\u5668\u548c\u6307\u6807\u62a5\u544a\u5668\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0 ClusterResourceListener \u63a5\u53e3\u6765\u63a5\u6536\u96c6\u7fa4 ID\u3002 BrokerState\u201cRunningAsController\u201d\uff08\u503c 4\uff09\u5df2\u88ab\u5220\u9664\u3002\u7531\u4e8e\u5b58\u5728\u9519\u8bef\uff0c\u4ee3\u7406\u5728\u9000\u51fa\u8be5\u72b6\u6001\u4e4b\u524d\u53ea\u4f1a\u77ed\u6682\u5904\u4e8e\u6b64\u72b6\u6001\uff0c\u56e0\u6b64\u5220\u9664\u7684\u5f71\u54cd\u5e94\u8be5\u5f88\u5c0f\u3002\u68c0\u6d4b\u7ed9\u5b9a\u4ee3\u7406\u662f\u5426\u662f\u63a7\u5236\u5668\u7684\u63a8\u8350\u65b9\u6cd5\u662f\u901a\u8fc7 kafka.controller:type=KafkaController,name=ActiveControllerCount \u6307\u6807\u3002 \u65b0\u7684 Java Consumer \u73b0\u5728\u5141\u8bb8\u7528\u6237\u6309\u5206\u533a\u4e0a\u7684\u65f6\u95f4\u6233\u641c\u7d22\u504f\u79fb\u91cf\u3002 \u65b0\u7684 Java Consumer \u73b0\u5728\u652f\u6301\u540e\u53f0\u7ebf\u7a0b\u7684\u5fc3\u8df3\u3002\u6709\u4e00\u4e2a\u65b0\u914d\u7f6e max.poll.interval.ms \u53ef\u4ee5\u63a7\u5236\u6d88\u8d39\u8005\u4e3b\u52a8\u79bb\u5f00\u7ec4\u4e4b\u524d\u8f6e\u8be2\u8c03\u7528\u4e4b\u95f4\u7684\u6700\u957f\u65f6\u95f4\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a 5 \u5206\u949f\uff09\u3002\u914d\u7f6e\u503c request.timeout.ms \uff08\u9ed8\u8ba4\u4e3a 30 \u79d2\uff09\u5fc5\u987b\u59cb\u7ec8\u5c0f\u4e8e max.poll.interval.ms \uff08\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff09\uff0c\u56e0\u4e3a\u8fd9\u662f\u6d88\u8d39\u8005\u91cd\u65b0\u5e73\u8861\u65f6 JoinGroup \u8bf7\u6c42\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u4e0a\u963b\u585e\u7684\u6700\u957f\u65f6\u95f4\u3002\u6700\u540e\uff0c\u9ed8\u8ba4\u503c session.timeout.ms \u8c03\u6574\u4e3a10\u79d2\uff0c\u9ed8\u8ba4\u503c max.poll.records \u6539\u4e3a500\u3002 \u5f53\u4f7f\u7528\u6388\u6743\u8005\u5e76\u4e14\u7528\u6237\u6ca1\u6709\u4e3b\u9898\u7684\u63cf\u8ff0\u6388\u6743\u65f6\uff0c\u4ee3\u7406\u5c06\u4e0d\u518d\u5411\u8bf7\u6c42\u8fd4\u56de TOPIC_AUTHORIZATION_FAILED \u9519\u8bef\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u6cc4\u6f0f\u4e3b\u9898\u540d\u79f0 \u3002 \u76f8\u53cd\uff0c\u5c06\u8fd4\u56de UNKNOWN_TOPIC_OR_PARTITION \u9519\u8bef\u4ee3\u7801\u3002\u5728\u4f7f\u7528\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u65f6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u8d85\u65f6\u6216\u5ef6\u8fdf\uff0c\u56e0\u4e3a Kafka \u5ba2\u6237\u7aef\u901a\u5e38\u4f1a\u9488\u5bf9\u672a\u77e5\u4e3b\u9898\u9519\u8bef\u81ea\u52a8\u91cd\u8bd5\u3002\u5982\u679c\u60a8\u6000\u7591\u53ef\u80fd\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u60a8\u5e94\u8be5\u67e5\u9605\u5ba2\u6237\u7aef\u65e5\u5fd7\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u83b7\u53d6\u54cd\u5e94\u6709\u5927\u5c0f\u9650\u5236\uff08\u6d88\u8d39\u8005\u4e3a 50 MB\uff0c\u590d\u5236\u4e3a 10 MB\uff09\u3002\u73b0\u6709\u7684\u6bcf\u4e2a\u5206\u533a\u9650\u5236\u4e5f\u9002\u7528\uff08\u4f7f\u7528\u8005\u548c\u590d\u5236\u4e3a 1 MB\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u9650\u5236\u90fd\u4e0d\u662f\u7edd\u5bf9\u6700\u5927\u503c\uff0c\u5982\u4e0b\u4e00\u70b9\u6240\u8ff0\u3002 \u5982\u679c\u53d1\u73b0\u5927\u4e8e\u54cd\u5e94/\u5206\u533a\u5927\u5c0f\u9650\u5236\u7684\u6d88\u606f\uff0c\u4f7f\u7528\u8005\u548c\u526f\u672c\u53ef\u4ee5\u53d6\u5f97\u8fdb\u5c55\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u5982\u679c\u63d0\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u6761\u6d88\u606f\u5927\u4e8e\u5176\u4e2d\u4e00\u4e2a\u6216\u4e24\u4e2a\u9650\u5236\uff0c\u5219\u4ecd\u5c06\u8fd4\u56de\u8be5\u6d88\u606f\u3002 \u6dfb\u52a0\u4e86\u91cd\u8f7d\u7684\u6784\u9020\u51fd\u6570 kafka.api.FetchRequest \uff0c\u5e76 kafka.javaapi.FetchRequest \u5141\u8bb8\u8c03\u7528\u8005\u6307\u5b9a\u5206\u533a\u7684\u987a\u5e8f\uff08\u56e0\u4e3a\u987a\u5e8f\u5728 v3 \u4e2d\u5f88\u91cd\u8981\uff09\u3002\u4ee5\u524d\u5b58\u5728\u7684\u6784\u9020\u51fd\u6570\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u4e14\u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u4f1a\u5bf9\u5206\u533a\u8fdb\u884c\u6d17\u724c\u4ee5\u907f\u514d\u9965\u997f\u95ee\u9898\u3002","title":"0.10.1.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#_18","text":"ListOffsetRequest v1\u652f\u6301\u57fa\u4e8e\u65f6\u95f4\u6233\u7684\u7cbe\u786e\u504f\u79fb\u641c\u7d22\u3002 MetadataResponse v2 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u5b57\u6bb5\uff1a\u201ccluster_id\u201d\u3002 FetchRequest v3 \u652f\u6301\u9650\u5236\u54cd\u5e94\u5927\u5c0f\uff08\u9664\u4e86\u73b0\u6709\u7684\u6bcf\u4e2a\u5206\u533a\u9650\u5236\uff09\uff0c\u5982\u679c\u9700\u8981\u53d6\u5f97\u8fdb\u5c55\uff0c\u5b83\u4f1a\u8fd4\u56de\u5927\u4e8e\u9650\u5236\u7684\u6d88\u606f\uff0c\u5e76\u4e14\u8bf7\u6c42\u4e2d\u7684\u5206\u533a\u987a\u5e8f\u73b0\u5728\u5f88\u91cd\u8981\u3002 JoinGroup v1 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u5b57\u6bb5\uff1a\u201crebalance_timeout\u201d\u3002","title":"\u65b0\u534f\u8bae\u7248\u672c"},{"location":"1/#08x-09x-01000","text":"0.10.0.0 \u5177\u6709 \u6f5c\u5728\u7684\u91cd\u5927\u66f4\u6539 \uff08\u8bf7\u5728\u5347\u7ea7\u524d\u67e5\u770b\uff09\uff0c\u5e76\u4e14 \u5347\u7ea7\u540e\u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd \u3002\u901a\u8fc7\u9075\u5faa\u4e0b\u9762\u63a8\u8350\u7684\u6eda\u52a8\u5347\u7ea7\u8ba1\u5212\uff0c\u60a8\u53ef\u4ee5\u4fdd\u8bc1\u5347\u7ea7\u671f\u95f4\u548c\u5347\u7ea7\u540e\u4e0d\u4f1a\u51fa\u73b0\u505c\u673a\u4e14\u4e0d\u4f1a\u5f71\u54cd\u6027\u80fd\u3002 \u6ce8\u610f\uff1a\u7531\u4e8e\u5f15\u5165\u4e86\u65b0\u534f\u8bae\uff0c\u56e0\u6b64\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u975e\u5e38\u91cd\u8981\u3002 \u7248\u672c 0.9.0.0 \u7684\u5ba2\u6237\u7aef\u6ce8\u610f\u4e8b\u9879\uff1a \u7531\u4e8e 0.9.0.0 \u4e2d\u5f15\u5165\u7684\u9519\u8bef\uff0c\u4f9d\u8d56 ZooKeeper\uff08\u65e7\u7684 Scala \u9ad8\u7ea7 Consumer \u548c MirrorMaker\uff0c\u5982\u679c\u4e0e\u65e7\u7684 Consumer \u4e00\u8d77\u4f7f\u7528\uff09\u7684\u5ba2\u6237\u7aef\u5c06\u65e0\u6cd5\u4e0e 0.10.0.x \u4ee3\u7406\u4e00\u8d77\u4f7f\u7528\u3002\u56e0\u6b64\uff0c\u5728\u4ee3\u7406\u5347\u7ea7\u52300.10.0.x \u4e4b\u524d\uff0c 0.9.0.0\u5ba2\u6237\u7aef\u5e94\u5347\u7ea7\u52300.9.0.1\u3002\u5bf9\u4e8e 0.8.X \u6216 0.9.0.1 \u5ba2\u6237\u7aef\uff0c\u65e0\u9700\u6267\u884c\u6b64\u6b65\u9aa4\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=CURRENT_KAFKA_VERSION\uff08\u4f8b\u59820.8.2\u62160.9.0.0\uff09\u3002 log.message.format.version=CURRENT_KAFKA_VERSION\uff08\u6709\u5173\u6b64\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5347\u7ea7\u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd\u3002\uff09 \u5347\u7ea7broker\u3002\u53ea\u9700\u5c06\u4ee3\u7406\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.10.0.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002\u6ce8\u610f\uff1a\u60a8\u8fd8\u4e0d\u5e94\u8be5\u89e6\u6478 log.message.format.version - \u53ea\u6709\u5728\u6240\u6709\u4f7f\u7528\u8005\u90fd\u5347\u7ea7\u5230 0.10.0.0 \u540e\uff0c\u6b64\u53c2\u6570\u624d\u5e94\u66f4\u6539 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u5373\u53ef\u751f\u6548\u3002 \u6240\u6709\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.10.0 \u540e\uff0c\u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7684 log.message.format.version \u66f4\u6539\u4e3a 0.10.0 \u5e76\u4e00\u4e00\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002","title":"\u4ece 0.8.x \u6216 0.9.x \u5347\u7ea7\u5230 0.10.0.0"},{"location":"1/#01000","text":"0.10.0 \u4e2d\u7684\u6d88\u606f\u683c\u5f0f\u5305\u62ec\u4e00\u4e2a\u65b0\u7684\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528\u538b\u7f29\u6d88\u606f\u7684\u76f8\u5bf9\u504f\u79fb\u91cf\u3002\u78c1\u76d8\u6d88\u606f\u683c\u5f0f\u53ef\u4ee5\u901a\u8fc7 server.properties \u6587\u4ef6\u4e2d\u7684 log.message.format.version \u914d\u7f6e\u3002\u9ed8\u8ba4\u78c1\u76d8\u6d88\u606f\u683c\u5f0f\u4e3a 0.10.0\u3002\u5982\u679c\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u662f 0.10.0.0 \u4e4b\u524d\u7684\u7248\u672c\uff0c\u5219\u5b83\u53ea\u80fd\u7406\u89e3 0.10.0 \u4e4b\u524d\u7684\u6d88\u606f\u683c\u5f0f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4ee3\u7406\u80fd\u591f\u5c06\u6d88\u606f\u4ece 0.10.0 \u683c\u5f0f\u8f6c\u6362\u4e3a\u8f83\u65e9\u7684\u683c\u5f0f\uff0c\u7136\u540e\u518d\u5c06\u54cd\u5e94\u53d1\u9001\u7ed9\u65e7\u7248\u672c\u7684\u4f7f\u7528\u8005\u3002\u4f46\u662f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7ecf\u7eaa\u5546\u4e0d\u80fd\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u3002Kafka \u793e\u533a\u5173\u4e8e\u6027\u80fd\u5f71\u54cd\u7684\u62a5\u544a\u663e\u793a\uff0c\u5347\u7ea7\u540e CPU \u5229\u7528\u7387\u4ece\u4e4b\u524d\u7684 20% \u4e0a\u5347\u5230 100%\uff0c\u8fd9\u8feb\u4f7f\u6240\u6709\u5ba2\u6237\u7aef\u7acb\u5373\u5347\u7ea7\u4ee5\u4f7f\u6027\u80fd\u6062\u590d\u6b63\u5e38\u3002\u4e3a\u4e86\u907f\u514d\u5728\u6d88\u8d39\u8005\u5347\u7ea7\u5230 0.10.0.0 \u4e4b\u524d\u53d1\u751f\u6b64\u7c7b\u6d88\u606f\u8f6c\u6362\uff0c\u53ef\u4ee5\u5728\u5c06\u4ee3\u7406\u5347\u7ea7\u5230 0.10.0.0 \u65f6\u5c06 log.message.format.version \u8bbe\u7f6e\u4e3a 0.8.2 \u6216 0.9.0\u3002\u8fd9\u6837\uff0cbroker\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u7684\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u5c06\u4ee3\u7406\u5347\u7ea7\u5230 0.10.0.0 \u65f6\uff0c\u5c06 message.format.version \u66f4\u6539\u4e3a 0.8.2 \u6216 0.9.0\u3002\u8fd9\u6837\uff0cbroker\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u7684\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u5c06\u4ee3\u7406\u5347\u7ea7\u5230 0.10.0.0 \u65f6\uff0c\u5c06 message.format.version \u66f4\u6539\u4e3a 0.8.2 \u6216 0.9.0\u3002\u8fd9\u6837\uff0cbroker\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u7684\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002Broker \u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002Broker \u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u96f6\u62f7\u8d1d\u4f20\u8f93\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u65e7\u6d88\u8d39\u8005\u3002\u4e00\u65e6\u6d88\u8d39\u8005\u5347\u7ea7\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7406\u4e0a\u5c06\u6d88\u606f\u683c\u5f0f\u66f4\u6539\u4e3a 0.10.0\uff0c\u5e76\u4eab\u53d7\u5305\u62ec\u65b0\u65f6\u95f4\u6233\u548c\u6539\u8fdb\u538b\u7f29\u7684\u65b0\u6d88\u606f\u683c\u5f0f\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002\u652f\u6301\u8f6c\u6362\u662f\u4e3a\u4e86\u786e\u4fdd\u517c\u5bb9\u6027\uff0c\u5e76\u4e14\u5bf9\u4e8e\u652f\u6301\u4e00\u4e9b\u5c1a\u672a\u66f4\u65b0\u5230\u8f83\u65b0\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528\uff0c\u4f46\u5373\u4f7f\u5728\u8fc7\u5ea6\u914d\u7f6e\u7684\u96c6\u7fa4\u4e0a\u652f\u6301\u6240\u6709\u6d88\u8d39\u8005\u6d41\u91cf\u4e5f\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\u56e0\u6b64\uff0c\u5f53\u4ee3\u7406\u5df2\u5347\u7ea7\u4f46\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5c1a\u672a\u5347\u7ea7\u65f6\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u6d88\u606f\u8f6c\u6362\u81f3\u5173\u91cd\u8981\u3002 \u5bf9\u4e8e\u5347\u7ea7\u5230 0.10.0.0 \u7684\u5ba2\u6237\u7aef\uff0c\u4e0d\u4f1a\u4ea7\u751f\u6027\u80fd\u5f71\u54cd\u3002 \u6ce8\u610f\uff1a \u901a\u8fc7\u8bbe\u7f6e\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u53ef\u4ee5\u8bc1\u660e\u6240\u6709\u73b0\u6709\u6d88\u606f\u5747\u7b49\u4e8e\u6216\u4f4e\u4e8e\u8be5\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5426\u5219 0.10.0.0 \u4e4b\u524d\u7684\u6d88\u8d39\u8005\u53ef\u80fd\u4f1a\u5d29\u6e83\u3002\u7279\u522b\u662f\uff0c\u5728\u6d88\u606f\u683c\u5f0f\u8bbe\u7f6e\u4e3a 0.10.0 \u540e\uff0c\u4e0d\u5e94\u5c06\u5176\u66f4\u6539\u56de\u8f83\u65e9\u7684\u683c\u5f0f\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u7834\u574f 0.10.0.0 \u4e4b\u524d\u7248\u672c\u7684\u6d88\u8d39\u8005\u3002 \u6ce8\u610f\uff1a \u7531\u4e8e\u6bcf\u6761\u6d88\u606f\u4e2d\u5f15\u5165\u4e86\u989d\u5916\u7684\u65f6\u95f4\u6233\uff0c\u53d1\u9001\u5c0f\u6d88\u606f\u7684\u751f\u4ea7\u8005\u53ef\u80fd\u4f1a\u56e0\u4e3a\u5f00\u9500\u589e\u52a0\u800c\u770b\u5230\u6d88\u606f\u541e\u5410\u91cf\u4e0b\u964d\u3002\u540c\u6837\uff0c\u590d\u5236\u73b0\u5728\u6bcf\u6761\u6d88\u606f\u989d\u5916\u4f20\u8f93 8 \u4e2a\u5b57\u8282\u3002\u5982\u679c\u60a8\u7684\u8fd0\u884c\u63a5\u8fd1\u96c6\u7fa4\u7684\u7f51\u7edc\u5bb9\u91cf\uff0c\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7f51\u5361\u4e0d\u582a\u91cd\u8d1f\uff0c\u5e76\u56e0\u8fc7\u8f7d\u800c\u51fa\u73b0\u6545\u969c\u548c\u6027\u80fd\u95ee\u9898\u3002 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u5728\u751f\u4ea7\u8005\u4e0a\u542f\u7528\u4e86\u538b\u7f29\uff0c\u60a8\u53ef\u80fd\u4f1a\u6ce8\u610f\u5230\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u751f\u4ea7\u8005\u541e\u5410\u91cf\u964d\u4f4e\u548c/\u6216\u4ee3\u7406\u4e0a\u7684\u538b\u7f29\u7387\u964d\u4f4e\u3002\u63a5\u6536\u538b\u7f29\u6d88\u606f\u65f6\uff0c0.10.0 \u4ee3\u7406\u4f1a\u907f\u514d\u91cd\u65b0\u538b\u7f29\u6d88\u606f\uff0c\u8fd9\u901a\u5e38\u4f1a\u51cf\u5c11\u5ef6\u8fdf\u5e76\u63d0\u9ad8\u541e\u5410\u91cf\u3002\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u53ef\u80fd\u4f1a\u51cf\u5c11\u751f\u4ea7\u8005\u7684\u6279\u5904\u7406\u5927\u5c0f\uff0c\u4ece\u800c\u5bfc\u81f4\u541e\u5410\u91cf\u4e0b\u964d\u3002\u5982\u679c\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u7528\u6237\u53ef\u4ee5\u8c03\u6574\u751f\u4ea7\u8005\u7684linger.ms\u548cbatch.size\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u541e\u5410\u91cf\u3002\u6b64\u5916\uff0csnappy \u7528\u4e8e\u538b\u7f29\u6d88\u606f\u7684\u751f\u4ea7\u8005\u7f13\u51b2\u533a\u5c0f\u4e8e\u4ee3\u7406\u4f7f\u7528\u7684\u7f13\u51b2\u533a\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bf9\u78c1\u76d8\u4e0a\u200b\u200b\u6d88\u606f\u7684\u538b\u7f29\u7387\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002\u6211\u4eec\u6253\u7b97\u5728\u672a\u6765\u7684 Kafka \u7248\u672c\u4e2d\u5bf9\u6b64\u8fdb\u884c\u914d\u7f6e\u3002","title":"\u5347\u7ea7\u5230 0.10.0.0 \u540e\u7684\u6f5c\u5728\u6027\u80fd\u5f71\u54cd"},{"location":"1/#01000_1","text":"\u4eceKafka 0.10.0.0\u5f00\u59cb\uff0cKafka\u4e2d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4ee5Kafka\u7248\u672c\u8868\u793a\u3002\u4f8b\u5982\uff0c\u6d88\u606f\u683c\u5f0f0.9.0\u662f\u6307Kafka 0.9.0\u652f\u6301\u7684\u6700\u9ad8\u6d88\u606f\u7248\u672c\u3002 \u5df2\u5f15\u5165\u6d88\u606f\u683c\u5f0f 0.10.0\uff0c\u5e76\u4e14\u9ed8\u8ba4\u4f7f\u7528\u8be5\u683c\u5f0f\u3002\u5b83\u5728\u6d88\u606f\u4e2d\u5305\u542b\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u5e76\u4e14\u76f8\u5bf9\u504f\u79fb\u91cf\u7528\u4e8e\u538b\u7f29\u6d88\u606f\u3002 \u5f15\u5165ProduceRequest/Response v2\uff0c\u9ed8\u8ba4\u652f\u6301\u6d88\u606f\u683c\u5f0f0.10.0 \u5f15\u5165FetchRequest/Response v2\uff0c\u9ed8\u8ba4\u652f\u6301\u6d88\u606f\u683c\u5f0f0.10.0 MessageFormatter \u63a5\u53e3\u5df2\u66f4\u6539 def writeTo(key: Array[Byte], value: Array[Byte], output: PrintStream) \u4e3a def writeTo(consumerRecord: ConsumerRecord[Array[Byte], Array[Byte]], output: PrintStream) MessageReader \u63a5\u53e3\u5df2\u66f4\u6539 def readMessage(): KeyedMessage[Array[Byte], Array[Byte]] \u4e3a def readMessage(): ProducerRecord[Array[Byte], Array[Byte]] MessageFormatter \u7684\u5305\u5df2\u66f4\u6539 kafka.tools \u4e3a kafka.common MessageReader \u7684\u5305\u5df2\u66f4\u6539 kafka.tools \u4e3a kafka.common MirrorMakerMessageHandler \u4e0d\u518d\u516c\u5f00\u8be5 handle(record: MessageAndMetadata[Array[Byte], Array[Byte]]) \u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4ece\u672a\u88ab\u8c03\u7528\u3002 0.7 KafkaMigrationTool \u4e0d\u518d\u4e0e Kafka \u4e00\u8d77\u6253\u5305\u3002\u5982\u679c\u60a8\u9700\u8981\u4ece0.7\u8fc1\u79fb\u52300.10.0\uff0c\u8bf7\u5148\u8fc1\u79fb\u52300.8\uff0c\u7136\u540e\u6309\u7167\u8bb0\u5f55\u7684\u5347\u7ea7\u6d41\u7a0b\u4ece0.8\u5347\u7ea7\u52300.10.0\u3002 \u65b0\u7684\u6d88\u8d39\u8005\u5df2\u6807\u51c6\u5316\u5176 API\uff0c\u4ee5\u63a5\u53d7 java.util.Collection \u4f5c\u4e3a\u65b9\u6cd5\u53c2\u6570\u7684\u5e8f\u5217\u7c7b\u578b\u3002\u73b0\u6709\u4ee3\u7801\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u624d\u80fd\u4e0e 0.10.0 \u5ba2\u6237\u7aef\u5e93\u4e00\u8d77\u4f7f\u7528\u3002 LZ4 \u538b\u7f29\u6d88\u606f\u5904\u7406\u5df2\u66f4\u6539\u4e3a\u4f7f\u7528\u53ef\u4e92\u64cd\u4f5c\u7684\u5e27\u89c4\u8303 (LZ4f v1.5.1)\u3002\u4e3a\u4e86\u4fdd\u6301\u4e0e\u65e7\u5ba2\u6237\u7aef\u7684\u517c\u5bb9\u6027\uff0c\u6b64\u66f4\u6539\u4ec5\u9002\u7528\u4e8e\u6d88\u606f\u683c\u5f0f 0.10.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002\u4f7f\u7528 v0/v1\uff08\u6d88\u606f\u683c\u5f0f 0.9.0\uff09\u751f\u6210/\u83b7\u53d6 LZ4 \u538b\u7f29\u6d88\u606f\u7684\u5ba2\u6237\u7aef\u5e94\u7ee7\u7eed\u4f7f\u7528 0.9.0 \u5e27\u5b9e\u73b0\u3002\u4f7f\u7528 Produce/Fetch \u534f\u8bae v2 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u5ba2\u6237\u7aef\u5e94\u4f7f\u7528\u53ef\u4e92\u64cd\u4f5c\u7684 LZ4f \u5e27\u3002\u53ef\u4e92\u64cd\u4f5c\u7684 LZ4 \u5e93\u5217\u8868\u4f4d\u4e8e https://www.lz4.org/","title":"0.10.0.0 \u4e2d\u6f5c\u5728\u7684\u91cd\u5927\u53d8\u5316"},{"location":"1/#01000_2","text":"\u4ece Kafka 0.10.0.0 \u5f00\u59cb\uff0c\u4e00\u4e2a\u540d\u4e3aKafka Streams \u7684\u65b0\u5ba2\u6237\u7aef\u5e93\u53ef\u7528\u4e8e\u5bf9 Kafka \u4e3b\u9898\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u6d41\u5904\u7406\u3002\u7531\u4e8e\u4e0a\u8ff0\u6d88\u606f\u683c\u5f0f\u7684\u53d8\u5316\uff0c\u8fd9\u4e2a\u65b0\u7684\u5ba2\u6237\u7aef\u5e93\u4ec5\u9002\u7528\u4e8e 0.10.x \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb Streams \u6587\u6863 \u3002 receive.buffer.bytes \u5bf9\u4e8e\u65b0\u6d88\u8d39\u8005\u6765\u8bf4\uff0c\u914d\u7f6e\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u73b0\u5728\u662f 64K\u3002 \u65b0\u7684\u6d88\u8d39\u8005\u73b0\u5728\u516c\u5f00\u914d\u7f6e\u53c2\u6570 exclude.internal.topics \u4ee5\u9650\u5236\u5185\u90e8\u4e3b\u9898\uff08\u4f8b\u5982\u6d88\u8d39\u8005\u504f\u79fb\u4e3b\u9898\uff09\u610f\u5916\u5730\u5305\u542b\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u8ba2\u9605\u4e2d\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u542f\u7528\u7684\u3002 \u65e7\u7684 Scala \u751f\u6210\u5668\u5df2\u88ab\u5f03\u7528\u3002\u7528\u6237\u5e94\u5c3d\u5feb\u5c06\u5176\u4ee3\u7801\u8fc1\u79fb\u5230 kafka-clients JAR \u4e2d\u5305\u542b\u7684 Java \u751f\u4ea7\u8005\u3002 \u65b0\u7684\u6d88\u8d39\u8005 API \u5df2\u6807\u8bb0\u4e3a\u7a33\u5b9a\u3002","title":"0.10.0.0 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#080081x-082x-0900","text":"0.9.0.0 \u5177\u6709 \u6f5c\u5728\u7684\u91cd\u5927\u66f4\u6539 \uff08\u8bf7\u5728\u5347\u7ea7\u524d\u67e5\u770b\uff09\u4ee5\u53ca\u4e0e\u5148\u524d\u7248\u672c\u76f8\u6bd4\u7684\u7ecf\u7eaa\u5546\u95f4\u534f\u8bae\u66f4\u6539\u3002\u8fd9\u610f\u5473\u7740\u5347\u7ea7\u540e\u7684\u7ecf\u7eaa\u5546\u548c\u5ba2\u6237\u7aef\u53ef\u80fd\u4e0e\u65e7\u7248\u672c\u4e0d\u517c\u5bb9\u3002\u5728\u5347\u7ea7\u5ba2\u6237\u7aef\u4e4b\u524d\u5347\u7ea7 Kafka \u96c6\u7fa4\u975e\u5e38\u91cd\u8981\u3002\u5982\u679c\u60a8\u4f7f\u7528 MirrorMaker\uff0c\u4e0b\u6e38\u96c6\u7fa4\u4e5f\u5e94\u8be5\u9996\u5148\u5347\u7ea7\u3002 \u5bf9\u4e8e\u6eda\u52a8\u5347\u7ea7\uff1a \u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684 server.properties \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\uff1a inter.broker.protocol.version=0.8.2.X \u5347\u7ea7broker\u3002\u53ea\u9700\u5c06\u4ee3\u7406\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002 \u6574\u4e2a\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u901a\u8fc7\u7f16\u8f91 inter.broker.protocol.version \u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a 0.9.0.0 \u6765\u63d0\u5347\u534f\u8bae\u7248\u672c\u3002 \u4e00\u4e00\u91cd\u542fbroker\uff0c\u65b0\u534f\u8bae\u7248\u672c\u751f\u6548 \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u613f\u610f\u63a5\u53d7\u505c\u673a\uff0c\u60a8\u53ea\u9700\u5173\u95ed\u6240\u6709\u4ee3\u7406\uff0c\u66f4\u65b0\u4ee3\u7801\u5e76\u542f\u52a8\u6240\u6709\u4ee3\u7406\u5373\u53ef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u5c06\u4ece\u65b0\u534f\u8bae\u5f00\u59cb\u3002 \u6ce8\u610f\uff1a \u5728\u4ee3\u7406\u5347\u7ea7\u540e\uff0c\u53ef\u4ee5\u968f\u65f6\u66f4\u6539\u534f\u8bae\u7248\u672c\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u5b83\u4e0d\u4e00\u5b9a\u662f\u7d27\u968f\u5176\u540e\u3002","title":"\u4ece 0.8.0\u30010.8.1.X \u6216 0.8.2.X \u5347\u7ea7\u5230 0.9.0.0"},{"location":"1/#0900","text":"\u4e0d\u518d\u652f\u6301 Java 1.6\u3002 \u4e0d\u518d\u652f\u6301 Scala 2.9\u3002 1000 \u4ee5\u4e0a\u7684\u7ecf\u7eaa\u5546 ID \u73b0\u5728\u9ed8\u8ba4\u4fdd\u7559\u4e3a\u81ea\u52a8\u5206\u914d\u7684\u7ecf\u7eaa\u5546 ID\u3002\u5982\u679c\u60a8\u7684\u96c6\u7fa4\u7684\u73b0\u6709\u4ee3\u7406 ID \u9ad8\u4e8e\u8be5\u9608\u503c\uff0c\u8bf7\u786e\u4fdd\u76f8\u5e94\u5730\u589e\u52a0served.broker.max.id \u4ee3\u7406\u914d\u7f6e\u5c5e\u6027\u3002 \u914d\u7f6e\u53c2\u6570replica.lag.max.messages\u5df2\u5220\u9664\u3002\u5206\u533a\u9886\u5bfc\u8005\u5728\u51b3\u5b9a\u54ea\u4e9b\u526f\u672c\u540c\u6b65\u65f6\u5c06\u4e0d\u518d\u8003\u8651\u6ede\u540e\u6d88\u606f\u7684\u6570\u91cf\u3002 \u914d\u7f6e\u53c2\u6570replica.lag.time.max.ms\u73b0\u5728\u4e0d\u4ec5\u6307\u81ea\u4e0a\u6b21\u4ece\u526f\u672c\u83b7\u53d6\u8bf7\u6c42\u4ee5\u6765\u7ecf\u8fc7\u7684\u65f6\u95f4\uff0c\u8fd8\u6307\u81ea\u526f\u672c\u4e0a\u6b21\u8d76\u4e0a\u4ee5\u6765\u7684\u65f6\u95f4\u3002\u4ecd\u5728\u4ece\u9886\u5bfc\u8005\u83b7\u53d6\u6d88\u606f\u4f46\u672a\u8d76\u4e0areplica.lag.time.max.ms \u4e2d\u6700\u65b0\u6d88\u606f\u7684\u526f\u672c\u5c06\u88ab\u89c6\u4e3a\u4e0d\u540c\u6b65\u3002 \u538b\u7f29\u4e3b\u9898\u4e0d\u518d\u63a5\u53d7\u6ca1\u6709\u5bc6\u94a5\u7684\u6d88\u606f\uff0c\u5982\u679c\u5c1d\u8bd5\u8fd9\u6837\u505a\uff0c\u751f\u4ea7\u8005\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u5728 0.8.x \u4e2d\uff0c\u6ca1\u6709 key \u7684\u6d88\u606f\u5c06\u5bfc\u81f4\u65e5\u5fd7\u538b\u7f29\u7ebf\u7a0b\u968f\u540e\u62b1\u6028\u5e76\u9000\u51fa\uff08\u5e76\u505c\u6b62\u538b\u7f29\u6240\u6709\u538b\u7f29\u4e3b\u9898\uff09\u3002 MirrorMaker \u4e0d\u518d\u652f\u6301\u591a\u4e2a\u76ee\u6807\u96c6\u7fa4\u3002\u56e0\u6b64\uff0c\u5b83\u53ea\u63a5\u53d7\u5355\u4e2a --consumer.config \u53c2\u6570\u3002\u8981\u955c\u50cf\u591a\u4e2a\u6e90\u96c6\u7fa4\uff0c\u6bcf\u4e2a\u6e90\u96c6\u7fa4\u81f3\u5c11\u9700\u8981\u4e00\u4e2a MirrorMaker \u5b9e\u4f8b\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u6709\u81ea\u5df1\u7684\u4f7f\u7528\u8005\u914d\u7f6e\u3002 \u6253\u5305\u5728org.apache.kafka.clients.tools.* \u4e0b\u7684\u5de5\u5177\u5df2\u79fb\u81f3 org.apache.kafka.tools.* \u3002\u6240\u6709\u5305\u542b\u7684\u811a\u672c\u4ecd\u5c06\u7167\u5e38\u8fd0\u884c\uff0c\u53ea\u6709\u76f4\u63a5\u5bfc\u5165\u8fd9\u4e9b\u7c7b\u7684\u81ea\u5b9a\u4e49\u4ee3\u7801\u624d\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 kafka-run-class.sh \u4e2d\u7684\u9ed8\u8ba4 Kafka JVM \u6027\u80fd\u9009\u9879 (KAFKA_JVM_PERFORMANCE_OPTS) \u5df2\u66f4\u6539\u3002 kafka-topics.sh \u811a\u672c (kafka.admin.TopicCommand) \u73b0\u5728\u5728\u5931\u8d25\u65f6\u4ee5\u975e\u96f6\u9000\u51fa\u4ee3\u7801\u9000\u51fa\u3002 \u5f53\u4e3b\u9898\u540d\u79f0\u56e0\u4f7f\u7528\u201c.\u201d\u800c\u5b58\u5728\u6307\u6807\u51b2\u7a81\u98ce\u9669\u65f6\uff0ckafka-topics.sh \u811a\u672c (kafka.admin.TopicCommand) \u73b0\u5728\u5c06\u6253\u5370\u8b66\u544a \u6216\u4e3b\u9898\u540d\u79f0\u4e2d\u7684\u201c_\u201d\uff0c\u5e76\u4e14\u5728\u5b9e\u9645\u51b2\u7a81\u7684\u60c5\u51b5\u4e0b\u51fa\u9519\u3002 kafka-console- Producer.sh\u811a\u672c\uff08kafka.tools.ConsoleProducer\uff09\u5c06\u9ed8\u8ba4\u4f7f\u7528Java\u751f\u4ea7\u8005\u800c\u4e0d\u662f\u65e7\u7684Scala\u751f\u4ea7\u8005\uff0c\u7528\u6237\u5fc5\u987b\u6307\u5b9a\u201cold- Producer\u201d\u624d\u80fd\u4f7f\u7528\u65e7\u751f\u4ea7\u8005\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u547d\u4ee4\u884c\u5de5\u5177\u90fd\u4f1a\u5c06\u6240\u6709\u65e5\u5fd7\u6d88\u606f\u6253\u5370\u5230 stderr \u800c\u4e0d\u662f stdout\u3002","title":"0.9.0.0 \u4e2d\u6f5c\u5728\u7684\u91cd\u5927\u53d8\u5316"},{"location":"1/#0901","text":"\u53ef\u4ee5\u901a\u8fc7\u5c06broker.id. Generation.enable \u8bbe\u7f6e\u4e3a false \u6765\u7981\u7528\u65b0\u7684\u4ee3\u7406 ID \u751f\u6210\u529f\u80fd\u3002 \u914d\u7f6e\u53c2\u6570 log.cleaner.enable \u73b0\u5728\u9ed8\u8ba4\u4e3a true\u3002\u8fd9\u610f\u5473\u7740\u5177\u6709 cleanup.policy=compact \u7684\u4e3b\u9898\u73b0\u5728\u5c06\u9ed8\u8ba4\u8fdb\u884c\u538b\u7f29\uff0c\u5e76\u4e14 128 MB \u7684\u5806\u5c06\u901a\u8fc7 log.cleaner.dedupe.buffer.size \u5206\u914d\u7ed9\u6e05\u7406\u8fdb\u7a0b\u3002\u60a8\u53ef\u80fd\u9700\u8981\u6839\u636e\u538b\u7f29\u4e3b\u9898\u7684\u4f7f\u7528\u60c5\u51b5\u67e5\u770b log.cleaner.dedupe.buffer.size \u548c\u5176\u4ed6 log.cleaner \u914d\u7f6e\u503c\u3002 \u65b0\u6d88\u8d39\u8005\u7684\u914d\u7f6e\u53c2\u6570 fetch.min.bytes \u7684\u9ed8\u8ba4\u503c\u73b0\u5728\u9ed8\u8ba4\u4e3a 1\u3002","title":"0.9.0.1 \u4e2d\u7684\u663e\u7740\u53d8\u5316"},{"location":"1/#0900_1","text":"\u5df2\u5f03\u7528\u4ece kafka-topics.sh \u811a\u672c (kafka.admin.TopicCommand) \u66f4\u6539\u4e3b\u9898\u914d\u7f6e\u3002\u4eca\u540e\uff0c\u8bf7\u4f7f\u7528 kafka-configs.sh \u811a\u672c (kafka.admin.ConfigCommand) \u6765\u5b9e\u73b0\u6b64\u529f\u80fd\u3002 kafka-consumer-offset-checker.sh (kafka.tools.ConsumerOffsetChecker) \u5df2\u88ab\u5f03\u7528\u3002\u4eca\u540e\uff0c\u8bf7\u4f7f\u7528 kafka-consumer-groups.sh (kafka.admin.ConsumerGroupCommand) \u6765\u5b9e\u73b0\u6b64\u529f\u80fd\u3002 kafka.tools.ProducerPerformance \u7c7b\u5df2\u88ab\u5f03\u7528\u3002\u4eca\u540e\uff0c\u8bf7\u4f7f\u7528 org.apache.kafka.tools.ProducerPerformance \u6765\u5b9e\u73b0\u6b64\u529f\u80fd\uff08kafka- Producer-perf-test.sh \u4e5f\u5c06\u66f4\u6539\u4e3a\u4f7f\u7528\u65b0\u7c7b\uff09\u3002 \u751f\u4ea7\u8005\u914d\u7f6e block.on.buffer.full \u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728\u672a\u6765\u7248\u672c\u4e2d\u5220\u9664\u3002\u76ee\u524d\u5176\u9ed8\u8ba4\u503c\u5df2\u66f4\u6539\u4e3a false\u3002KafkaProducer\u5c06\u4e0d\u518d\u629b\u51faBufferExhaustedException\uff0c\u800c\u662f\u4f7f\u7528max.block.ms\u503c\u8fdb\u884c\u963b\u585e\uff0c\u4e4b\u540e\u5b83\u5c06\u629b\u51faTimeoutException\u3002\u5982\u679c block.on.buffer.full \u5c5e\u6027\u663e\u5f0f\u8bbe\u7f6e\u4e3a true\uff0c\u5219\u4f1a\u5c06 max.block.ms \u8bbe\u7f6e\u4e3a Long.MAX_VALUE\uff0c\u5e76\u4e14metadata.fetch.timeout.ms \u5c06\u4e0d\u4f1a\u88ab\u9075\u5b88","title":"0.9.0.0 \u4e2d\u7684\u5f03\u7528"},{"location":"1/#081082","text":"0.8.2 \u4e0e 0.8.1 \u5b8c\u5168\u517c\u5bb9\u3002\u53ea\u9700\u5c06\u5176\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5bf9\u4e00\u4e2a\u4ee3\u7406\u8fdb\u884c\u5347\u7ea7\u3002","title":"\u4ece0.8.1\u5347\u7ea7\u52300.8.2"},{"location":"1/#080081","text":"0.8.1 \u4e0e 0.8 \u5b8c\u5168\u517c\u5bb9\u3002\u53ea\u9700\u5c06\u5176\u5173\u95ed\u3001\u66f4\u65b0\u4ee3\u7801\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u4e00\u6b21\u5bf9\u4e00\u4e2a\u4ee3\u7406\u8fdb\u884c\u5347\u7ea7\u3002","title":"\u4ece0.8.0\u5347\u7ea7\u52300.8.1"},{"location":"1/#07","text":"\u7248\u672c 0.7 \u4e0e\u8f83\u65b0\u7684\u7248\u672c\u4e0d\u517c\u5bb9\u3002\u4e3a\u4e86\u6dfb\u52a0\u590d\u5236\uff080.7 \u4e2d\u7f3a\u5c11\uff09\uff0c\u5bf9 API\u3001ZooKeeper \u6570\u636e\u7ed3\u6784\u3001\u534f\u8bae\u548c\u914d\u7f6e\u8fdb\u884c\u4e86\u91cd\u5927\u66f4\u6539\u3002\u4ece0.7\u5347\u7ea7\u5230\u66f4\u9ad8\u7248\u672c\u9700\u8981 \u4e13\u95e8\u7684 \u8fc1\u79fb\u5de5\u5177\u3002\u6b64\u8fc1\u79fb\u65e0\u9700\u505c\u673a\u5373\u53ef\u5b8c\u6210\u3002","title":"\u4ece0.7\u5347\u7ea7"},{"location":"2/","text":"2. API Kafka \u5305\u542b\u4e94\u4e2a\u6838\u5fc3 api\uff1a Producer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u6d41\u53d1\u9001\u5230 Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u3002 Consumer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u4ece Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u8bfb\u53d6\u6570\u636e\u6d41\u3002 Streams API \u5141\u8bb8\u5c06\u6570\u636e\u6d41\u4ece\u8f93\u5165\u4e3b\u9898\u8f6c\u6362\u4e3a\u8f93\u51fa\u4e3b\u9898\u3002 Connect API \u5141\u8bb8\u5b9e\u73b0\u4e0d\u65ad\u4ece\u67d0\u4e9b\u6e90\u7cfb\u7edf\u6216\u5e94\u7528\u7a0b\u5e8f\u62c9\u53d6\u5230 Kafka \u6216\u4ece Kafka \u63a8\u9001\u5230\u67d0\u4e9b\u63a5\u6536\u5668\u7cfb\u7edf\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u8fde\u63a5\u5668\u3002 AdminClient API \u5141\u8bb8\u7ba1\u7406\u548c\u68c0\u67e5\u4e3b\u9898\u3001\u4ee3\u7406\u548c\u5176\u4ed6 Kafka \u5bf9\u8c61\u3002 Kafka \u901a\u8fc7\u72ec\u7acb\u4e8e\u8bed\u8a00\u7684\u534f\u8bae\u516c\u5f00\u5176\u6240\u6709\u529f\u80fd\uff0c\u8be5\u534f\u8bae\u5177\u6709\u591a\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u5ba2\u6237\u7aef\u3002\u7136\u800c\uff0c\u53ea\u6709 Java \u5ba2\u6237\u7aef\u4f5c\u4e3a\u4e3b Kafka \u9879\u76ee\u7684\u4e00\u90e8\u5206\u8fdb\u884c\u7ef4\u62a4\uff0c\u5176\u4ed6\u5ba2\u6237\u7aef\u53ef\u4f5c\u4e3a\u72ec\u7acb\u7684\u5f00\u6e90\u9879\u76ee\u4f7f\u7528\u3002 \u6b64\u5904 \u63d0\u4f9b\u4e86\u975e Java \u5ba2\u6237\u7aef\u7684\u5217\u8868\u3002 2.1 Producer API Producer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u6d41\u53d1\u9001\u5230 Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u3002 javadocs \u4e2d\u7ed9\u51fa\u4e86\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u751f\u4ea7\u8005\u7684\u793a\u4f8b \u3002 \u8981\u4f7f\u7528\u751f\u4ea7\u8005\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-clients</artifactId> <version>3.5.0</version> </dependency> 2.2 Consumer API Consumer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u4ece Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u8bfb\u53d6\u6570\u636e\u6d41\u3002 javadocs \u4e2d\u7ed9\u51fa\u4e86\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u6d88\u8d39\u8005\u7684\u793a\u4f8b \u3002 \u8981\u4f7f\u7528\u6d88\u8d39\u8005\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-clients</artifactId> <version>3.5.0</version> </dependency> 2.3 Streams API Streams API \u5141\u8bb8\u5c06\u6570\u636e\u6d41\u4ece\u8f93\u5165\u4e3b\u9898\u8f6c\u6362\u4e3a\u8f93\u51fa\u4e3b\u9898\u3002 javadoc \u4e2d\u7ed9\u51fa\u4e86\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u8be5\u5e93\u7684\u793a\u4f8b\u3002 \u6709\u5173\u4f7f\u7528 Streams API \u7684\u5176\u4ed6\u6587\u6863\u53ef \u5728\u6b64\u5904 \u83b7\u53d6\u3002 \u8981\u4f7f\u7528 Kafka Streams\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-streams</artifactId> <version>3.5.0</version> </dependency> \u4f7f\u7528 Scala \u65f6\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u5305\u542b\u8be5 kafka-streams-scala \u5e93\u3002 \u5f00\u53d1\u4eba\u5458\u6307\u5357\u4e2d \u63d0\u4f9b\u4e86\u6709\u5173\u4f7f\u7528 Scala \u7684 Kafka Streams DSL \u7684\u5176\u4ed6\u6587\u6863\u3002 \u8981\u5728 Scala 2.13 \u4e2d\u4f7f\u7528 Kafka Streams DSL for Scala\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-streams-scala_2.13</artifactId> <version>3.5.0</version> </dependency> 2.4 Connect API Connect API \u5141\u8bb8\u5b9e\u73b0\u4e0d\u65ad\u4ece\u67d0\u4e2a\u6e90\u6570\u636e\u7cfb\u7edf\u62c9\u5165 Kafka \u6216\u4ece Kafka \u63a8\u9001\u5230\u67d0\u4e2a\u63a5\u6536\u5668\u6570\u636e\u7cfb\u7edf\u7684\u8fde\u63a5\u5668\u3002 Connect \u7684\u8bb8\u591a\u7528\u6237\u4e0d\u9700\u8981\u76f4\u63a5\u4f7f\u7528\u6b64 API\uff0c\u4f46\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684\u8fde\u63a5\u5668\uff0c\u800c\u65e0\u9700\u7f16\u5199\u4efb\u4f55\u4ee3\u7801\u3002\u6709\u5173\u4f7f\u7528 Connect \u7684\u66f4\u591a\u4fe1\u606f\u53ef \u5728\u6b64\u5904 \u83b7\u53d6\u3002 \u60f3\u8981\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8fde\u63a5\u5668\u7684\u4eba\u53ef\u4ee5\u67e5\u770b javadoc \u3002 2.5 AdminClient API AdminClient API \u652f\u6301\u7ba1\u7406\u548c\u68c0\u67e5 topics, brokers, acls, and \u5176\u4ed6 Kafka \u5bf9\u8c61\u3002 \u8981\u4f7f\u7528 AdminClient API\uff0c\u8bf7\u6dfb\u52a0\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-clients</artifactId> <version>3.5.0</version> </dependency> \u6709\u5173 AdminClient API \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 javadoc \u3002","title":"2. APIs"},{"location":"2/#2-api","text":"Kafka \u5305\u542b\u4e94\u4e2a\u6838\u5fc3 api\uff1a Producer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u6d41\u53d1\u9001\u5230 Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u3002 Consumer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u4ece Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u8bfb\u53d6\u6570\u636e\u6d41\u3002 Streams API \u5141\u8bb8\u5c06\u6570\u636e\u6d41\u4ece\u8f93\u5165\u4e3b\u9898\u8f6c\u6362\u4e3a\u8f93\u51fa\u4e3b\u9898\u3002 Connect API \u5141\u8bb8\u5b9e\u73b0\u4e0d\u65ad\u4ece\u67d0\u4e9b\u6e90\u7cfb\u7edf\u6216\u5e94\u7528\u7a0b\u5e8f\u62c9\u53d6\u5230 Kafka \u6216\u4ece Kafka \u63a8\u9001\u5230\u67d0\u4e9b\u63a5\u6536\u5668\u7cfb\u7edf\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u8fde\u63a5\u5668\u3002 AdminClient API \u5141\u8bb8\u7ba1\u7406\u548c\u68c0\u67e5\u4e3b\u9898\u3001\u4ee3\u7406\u548c\u5176\u4ed6 Kafka \u5bf9\u8c61\u3002 Kafka \u901a\u8fc7\u72ec\u7acb\u4e8e\u8bed\u8a00\u7684\u534f\u8bae\u516c\u5f00\u5176\u6240\u6709\u529f\u80fd\uff0c\u8be5\u534f\u8bae\u5177\u6709\u591a\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u5ba2\u6237\u7aef\u3002\u7136\u800c\uff0c\u53ea\u6709 Java \u5ba2\u6237\u7aef\u4f5c\u4e3a\u4e3b Kafka \u9879\u76ee\u7684\u4e00\u90e8\u5206\u8fdb\u884c\u7ef4\u62a4\uff0c\u5176\u4ed6\u5ba2\u6237\u7aef\u53ef\u4f5c\u4e3a\u72ec\u7acb\u7684\u5f00\u6e90\u9879\u76ee\u4f7f\u7528\u3002 \u6b64\u5904 \u63d0\u4f9b\u4e86\u975e Java \u5ba2\u6237\u7aef\u7684\u5217\u8868\u3002","title":"2. API"},{"location":"2/#21-producer-api","text":"Producer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u6d41\u53d1\u9001\u5230 Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u3002 javadocs \u4e2d\u7ed9\u51fa\u4e86\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u751f\u4ea7\u8005\u7684\u793a\u4f8b \u3002 \u8981\u4f7f\u7528\u751f\u4ea7\u8005\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-clients</artifactId> <version>3.5.0</version> </dependency>","title":"2.1 Producer API"},{"location":"2/#22-consumer-api","text":"Consumer API \u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u4ece Kafka \u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u8bfb\u53d6\u6570\u636e\u6d41\u3002 javadocs \u4e2d\u7ed9\u51fa\u4e86\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u6d88\u8d39\u8005\u7684\u793a\u4f8b \u3002 \u8981\u4f7f\u7528\u6d88\u8d39\u8005\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-clients</artifactId> <version>3.5.0</version> </dependency>","title":"2.2 Consumer API"},{"location":"2/#23-streams-api","text":"Streams API \u5141\u8bb8\u5c06\u6570\u636e\u6d41\u4ece\u8f93\u5165\u4e3b\u9898\u8f6c\u6362\u4e3a\u8f93\u51fa\u4e3b\u9898\u3002 javadoc \u4e2d\u7ed9\u51fa\u4e86\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u8be5\u5e93\u7684\u793a\u4f8b\u3002 \u6709\u5173\u4f7f\u7528 Streams API \u7684\u5176\u4ed6\u6587\u6863\u53ef \u5728\u6b64\u5904 \u83b7\u53d6\u3002 \u8981\u4f7f\u7528 Kafka Streams\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-streams</artifactId> <version>3.5.0</version> </dependency> \u4f7f\u7528 Scala \u65f6\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u5305\u542b\u8be5 kafka-streams-scala \u5e93\u3002 \u5f00\u53d1\u4eba\u5458\u6307\u5357\u4e2d \u63d0\u4f9b\u4e86\u6709\u5173\u4f7f\u7528 Scala \u7684 Kafka Streams DSL \u7684\u5176\u4ed6\u6587\u6863\u3002 \u8981\u5728 Scala 2.13 \u4e2d\u4f7f\u7528 Kafka Streams DSL for Scala\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-streams-scala_2.13</artifactId> <version>3.5.0</version> </dependency>","title":"2.3 Streams API"},{"location":"2/#24-connect-api","text":"Connect API \u5141\u8bb8\u5b9e\u73b0\u4e0d\u65ad\u4ece\u67d0\u4e2a\u6e90\u6570\u636e\u7cfb\u7edf\u62c9\u5165 Kafka \u6216\u4ece Kafka \u63a8\u9001\u5230\u67d0\u4e2a\u63a5\u6536\u5668\u6570\u636e\u7cfb\u7edf\u7684\u8fde\u63a5\u5668\u3002 Connect \u7684\u8bb8\u591a\u7528\u6237\u4e0d\u9700\u8981\u76f4\u63a5\u4f7f\u7528\u6b64 API\uff0c\u4f46\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684\u8fde\u63a5\u5668\uff0c\u800c\u65e0\u9700\u7f16\u5199\u4efb\u4f55\u4ee3\u7801\u3002\u6709\u5173\u4f7f\u7528 Connect \u7684\u66f4\u591a\u4fe1\u606f\u53ef \u5728\u6b64\u5904 \u83b7\u53d6\u3002 \u60f3\u8981\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8fde\u63a5\u5668\u7684\u4eba\u53ef\u4ee5\u67e5\u770b javadoc \u3002","title":"2.4 Connect API"},{"location":"2/#25-adminclient-api","text":"AdminClient API \u652f\u6301\u7ba1\u7406\u548c\u68c0\u67e5 topics, brokers, acls, and \u5176\u4ed6 Kafka \u5bf9\u8c61\u3002 \u8981\u4f7f\u7528 AdminClient API\uff0c\u8bf7\u6dfb\u52a0\u4ee5\u4e0b Maven \u4f9d\u8d56\u9879\uff1a <dependency> <groupId>org.apache.kafka</groupId> <artifactId>kafka-clients</artifactId> <version>3.5.0</version> </dependency> \u6709\u5173 AdminClient API \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 javadoc \u3002","title":"2.5 AdminClient API"},{"location":"3/","text":"3. \u914d\u7f6e Kafka\u4f7f\u7528\u5c5e\u6027\u6587\u4ef6\u683c\u5f0f\u7684 \u952e\u503c\u5bf9\u8fdb\u884c\u914d\u7f6e\u3002\u8fd9\u4e9b\u503c\u53ef\u4ee5\u4ece\u6587\u4ef6\u6216\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u63d0\u4f9b\u3002 3.1 Broker \u914d\u7f6e \u57fa\u672c\u914d\u7f6e\u5982\u4e0b\uff1a broker.id log.dirs zookeeper.connect \u4e0b\u9762 \u5c06\u66f4\u8be6\u7ec6\u5730\u8ba8\u8bba\u4e3b\u9898\u7ea7\u914d\u7f6e\u548c\u9ed8\u8ba4\u503c\u3002 advertised.listeners \u53d1\u5e03\u5230 ZooKeeper \u4f9b\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4fa6\u542c\u5668\uff08\u5982\u679c\u4e0e listeners \u914d\u7f6e\u5c5e\u6027\u4e0d\u540c\uff09\u3002\u5728 IaaS \u73af\u5883\u4e2d\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u4e0e\u4ee3\u7406\u7ed1\u5b9a\u7684\u63a5\u53e3\u4e0d\u540c\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c listeners \u5219\u5c06\u4f7f\u7528 \u7684\u503c\u3002\u4e0e \u4e0d\u540c\u7684\u662f listeners \uff0c\u901a\u544a 0.0.0.0 \u5143\u5730\u5740\u662f\u65e0\u6548\u7684\u3002 \u4e0e \u4e0d\u540c\u7684\u662f listeners \uff0c\u6b64\u5c5e\u6027\u4e2d\u53ef\u4ee5\u6709\u91cd\u590d\u7684\u7aef\u53e3\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u5c06\u4e00\u4e2a\u4fa6\u542c\u5668\u914d\u7f6e\u4e3a\u901a\u544a\u53e6\u4e00\u4e2a\u4fa6\u542c\u5668\u7684\u5730\u5740\u3002\u8fd9\u5728\u67d0\u4e9b\u4f7f\u7528\u5916\u90e8\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u60c5\u51b5\u4e0b\u975e\u5e38\u6709\u7528\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: per-broker auto.create.topics.enable \u5728\u670d\u52a1\u5668\u4e0a\u542f\u7528\u81ea\u52a8\u521b\u5efa\u4e3b\u9898 Type: boolean Default: true Valid Values: Importance: high Update Mode: read-only auto.leader.rebalance.enable \u542f\u7528\u81ea\u52a8\u9886\u5bfc\u8005\u5e73\u8861\u3002\u540e\u53f0\u7ebf\u7a0b\u5b9a\u671f\u68c0\u67e5\u5206\u533a\u9886\u5bfc\u8005\u7684\u5206\u5e03\uff0c\u53ef\u901a\u8fc7\u201cleader.imbalance.check.interval.seconds\u201d\u8fdb\u884c\u914d\u7f6e\u3002\u5982\u679c\u9886\u5bfc\u8005\u4e0d\u5e73\u8861\u8d85\u8fc7\u201cleader.imbalance.per.broker.percentage\u201d\uff0c\u5219\u4f1a\u89e6\u53d1\u9886\u5bfc\u8005\u91cd\u65b0\u5e73\u8861\u5230\u5206\u533a\u7684\u9996\u9009\u9886\u5bfc\u8005\u3002 Type: boolean Default: true Valid Values: Importance: high Update Mode: read-only background.threads \u7528\u4e8e\u5404\u79cd\u540e\u53f0\u5904\u7406\u4efb\u52a1\u7684\u7ebf\u7a0b\u6570 Type: int Default: 10 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide broker.id \u8be5\u670d\u52a1\u5668\u7684\u4ee3\u7406 ID\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5c06\u751f\u6210\u552f\u4e00\u7684\u4ee3\u7406 ID\u3002\u4e3a\u4e86\u907f\u514d Zookeeper \u751f\u6210\u7684\u4ee3\u7406 ID \u548c\u7528\u6237\u914d\u7f6e\u7684\u4ee3\u7406 ID \u4e4b\u95f4\u7684\u51b2\u7a81\uff0c\u751f\u6210\u7684\u4ee3\u7406 ID \u4eceserved.broker.max.id + 1 \u5f00\u59cb\u3002 Type: int Default: -1 Valid Values: Importance: high Update Mode: read-only compression.type \u6307\u5b9a\u7ed9\u5b9a\u4e3b\u9898\u7684\u6700\u7ec8\u538b\u7f29\u7c7b\u578b\u3002\u6b64\u914d\u7f6e\u63a5\u53d7\u6807\u51c6\u538b\u7f29\u7f16\u89e3\u7801\u5668\uff08'gzip'\u3001'snappy'\u3001'lz4'\u3001'zstd'\uff09\u3002\u5b83\u8fd8\u63a5\u53d7\u201c\u672a\u538b\u7f29\u201d\uff0c\u8fd9\u76f8\u5f53\u4e8e\u4e0d\u538b\u7f29\uff1b\u201c\u751f\u4ea7\u8005\u201d\u8868\u793a\u4fdd\u7559\u751f\u4ea7\u8005\u8bbe\u7f6e\u7684\u539f\u59cb\u538b\u7f29\u7f16\u89e3\u7801\u5668\u3002 Type: string Default: producer Valid Values: [uncompressed, zstd, lz4, snappy, gzip, producer] Importance: high Update Mode: cluster-wide control.plane.listener.name \u7528\u4e8e\u63a7\u5236\u5668\u548c\u4ee3\u7406\u4e4b\u95f4\u901a\u4fe1\u7684\u4fa6\u542c\u5668\u540d\u79f0\u3002Broker\u5c06\u4f7f\u7528control.plane.listener.name\u5728\u4fa6\u542c\u5668\u5217\u8868\u4e2d\u5b9a\u4f4d\u7aef\u70b9\uff0c\u4ee5\u4fa6\u542c\u6765\u81ea\u63a7\u5236\u5668\u7684\u8fde\u63a5\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4ee3\u7406\u7684\u914d\u7f6e\u4e3a\uff1a listeners = INTERNAL://192.1.1.8:9092, EXTERNAL://10.1.1.5:9093, CONTROLLER://192.1.1.8:9094 listener.security.protocol.map = INTERNAL:PLAINTEXT, EXTERNAL:SSL, CONTROLLER:SSL control.plane.listener.name = CONTROLLER \u542f\u52a8\u65f6\uff0c\u4ee3\u7406\u5c06\u5f00\u59cb\u4f7f\u7528\u5b89\u5168\u534f\u8bae\u201cSSL\u201d\u4fa6\u542c\u201c192.1.1.8:9094\u201d\u3002 \u5728\u63a7\u5236\u5668\u7aef\uff0c\u5f53\u5b83\u901a\u8fc7zookeeper\u53d1\u73b0\u4ee3\u7406\u7684\u5df2\u53d1\u5e03\u7aef\u70b9\u65f6\uff0c\u5b83\u5c06\u4f7f\u7528control.plane.listener.name\u6765\u67e5\u627e\u7aef\u70b9\uff0c\u5b83\u5c06\u7528\u4e8e\u5efa\u7acb\u4e0e\u4ee3\u7406\u7684\u8fde\u63a5\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u4ee3\u7406\u5728 Zookeeper \u4e0a\u53d1\u5e03\u7684\u7aef\u70b9\u4e3a\uff1a \"endpoints\" : [\"INTERNAL://broker1.example.com:9092\",\"EXTERNAL://broker1.example.com:9093\",\"CONTROLLER://broker1.example.com:9094\"] \u5e76\u4e14\u63a7\u5236\u5668\u7684\u914d\u7f6e\u662f\uff1a listener.security.protocol.map = INTERNAL:PLAINTEXT, EXTERNAL:SSL, CONTROLLER:SSL control.plane.listener.name = CONTROLLER \u90a3\u4e48\u63a7\u5236\u5668\u5c06\u4f7f\u7528\u201cbroker1.example.com:9094\u201d\uff0c\u4f7f\u7528\u5b89\u5168\u534f\u8bae\u201cSSL\u201d\u8fde\u63a5\u5230\u4ee3\u7406\u3002 \u5982\u679c\u672a\u663e\u5f0f\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a null\uff0c\u5e76\u4e14\u4e0d\u4f1a\u6709\u7528\u4e8e\u63a7\u5236\u5668\u8fde\u63a5\u7684\u4e13\u7528\u7aef\u70b9\u3002 \u5982\u679c\u663e\u5f0f\u914d\u7f6e\uff0c\u8be5\u503c\u4e0d\u80fd\u4e0e \u7684\u503c\u76f8\u540c inter.broker.listener.name \u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only controller.listener.names \u63a7\u5236\u5668\u4f7f\u7528\u7684\u4fa6\u542c\u5668\u540d\u79f0\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u5982\u679c\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u8fd9\u662f\u5fc5\u9700\u7684\u3002\u5f53\u4e0e\u63a7\u5236\u5668\u4ef2\u88c1\u901a\u4fe1\u65f6\uff0c\u4ee3\u7406\u5c06\u59cb\u7ec8\u4f7f\u7528\u6b64\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u4fa6\u542c\u5668\u3002 \u6ce8\u610f\uff1a\u57fa\u4e8e ZK \u7684\u63a7\u5236\u5668\u4e0d\u5e94\u8bbe\u7f6e\u6b64\u914d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only controller.quorum.election.backoff.max.ms \u5f00\u59cb\u65b0\u9009\u4e3e\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u8fd9\u7528\u4e8e\u4e8c\u8fdb\u5236\u6307\u6570\u9000\u907f\u673a\u5236\uff0c\u6709\u52a9\u4e8e\u9632\u6b62\u9009\u4e3e\u9677\u5165\u50f5\u5c40 Type: int Default: 1000 (1 second) Valid Values: Importance: high Update Mode: read-only controller.quorum.election.timeout.ms \u5728\u89e6\u53d1\u65b0\u9009\u4e3e\u4e4b\u524d\u65e0\u6cd5\u4ece\u9886\u5bfc\u8005\u83b7\u53d6\u6570\u636e\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1000 (1 second) Valid Values: Importance: high Update Mode: read-only controller.quorum.fetch.timeout.ms \u5728\u6210\u4e3a\u5019\u9009\u4eba\u5e76\u89e6\u53d1\u9009\u6c11\u9009\u4e3e\u4e4b\u524d\uff0c\u4ece\u5f53\u524d\u9886\u5bfc\u8005\u90a3\u91cc\u6210\u529f\u83b7\u53d6\u4fe1\u606f\u7684\u6700\u957f\u65f6\u95f4\uff1b\u5728\u8be2\u95ee\u9886\u5bfc\u8005\u662f\u5426\u6709\u65b0\u7eaa\u5143\u4e4b\u524d\uff0c\u6ca1\u6709\u6536\u5230\u6765\u81ea\u5927\u591a\u6570\u6cd5\u5b9a\u4eba\u6570\u7684\u63d0\u53d6\u7684\u6700\u957f\u65f6\u95f4 Type: int Default: 2000 (2 seconds) Valid Values: Importance: high Update Mode: read-only controller.quorum.voters \u4ee5\u9017\u53f7\u5206\u9694\u7684\u201c{id}@{host}:{port}\u201d\u6761\u76ee\u5217\u8868\u4e2d\u7684\u4e00\u7ec4\u6295\u7968\u8005\u7684 ID/\u7aef\u70b9\u4fe1\u606f\u6620\u5c04\u3002\u4f8b\u5982\uff1a`1@localhost:9092,2@localhost:9093,3@localhost:9094` Type: list Default: \"\" Valid Values: non-empty list Importance: high Update Mode: read-only delete.topic.enable \u542f\u7528\u5220\u9664\u4e3b\u9898\u3002\u5982\u679c\u5173\u95ed\u6b64\u914d\u7f6e\uff0c\u901a\u8fc7\u7ba1\u7406\u5de5\u5177\u5220\u9664\u4e3b\u9898\u5c06\u4e0d\u8d77\u4f5c\u7528 Type: boolean Default: true Valid Values: Importance: high Update Mode: read-only early.start.listeners \u4ee5\u9017\u53f7\u5206\u9694\u7684\u4fa6\u542c\u5668\u540d\u79f0\u5217\u8868\uff0c\u53ef\u4ee5\u5728\u6388\u6743\u8005\u5b8c\u6210\u521d\u59cb\u5316\u4e4b\u524d\u542f\u52a8\u3002\u5f53\u6388\u6743\u8005\u4f9d\u8d56\u4e8e\u96c6\u7fa4\u672c\u8eab\u8fdb\u884c\u5f15\u5bfc\u65f6\uff0c\u8fd9\u975e\u5e38\u6709\u7528\uff0c\u5c31\u50cf StandardAuthorizer\uff08\u5c06 ACL \u5b58\u50a8\u5728\u5143\u6570\u636e\u65e5\u5fd7\u4e2d\uff09\u7684\u60c5\u51b5\u4e00\u6837\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ccontroller.listener.names \u4e2d\u5305\u542b\u7684\u6240\u6709\u4fa6\u542c\u5668\u4e5f\u5c06\u662f\u65e9\u671f\u542f\u52a8\u4fa6\u542c\u5668\u3002\u5982\u679c\u4fa6\u542c\u5668\u63a5\u53d7\u5916\u90e8\u6d41\u91cf\uff0c\u5219\u4e0d\u5e94\u51fa\u73b0\u5728\u6b64\u5217\u8868\u4e2d\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only leader.imbalance.check.interval.seconds \u63a7\u5236\u5668\u89e6\u53d1\u5206\u533a\u91cd\u65b0\u5e73\u8861\u68c0\u67e5\u7684\u9891\u7387 Type: long Default: 300 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only leader.imbalance.per.broker.percentage \u6bcf\u4e2abroker\u5141\u8bb8\u7684\u9886\u5bfc\u8005\u4e0d\u5e73\u8861\u6bd4\u7387\u3002\u5982\u679c\u6bcf\u4e2abroker\u7684\u4f59\u989d\u8d85\u8fc7\u6b64\u503c\uff0c\u63a7\u5236\u5668\u5c06\u89e6\u53d1\u9886\u5bfc\u8005\u4f59\u989d\u3002\u8be5\u503c\u4ee5\u767e\u5206\u6bd4\u6307\u5b9a\u3002 Type: int Default: 10 Valid Values: Importance: high Update Mode: read-only listeners \u4fa6\u542c\u5668\u5217\u8868 - \u6211\u4eec\u5c06\u4fa6\u542c\u7684 URI \u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u4ee5\u53ca\u4fa6\u542c\u5668\u540d\u79f0\u3002\u5982\u679c\u76d1\u542c\u5668\u540d\u79f0\u4e0d\u662f\u5b89\u5168\u534f\u8bae\uff0c listener.security.protocol.map \u4e5f\u5fc5\u987b\u8bbe\u7f6e\u3002 \u4fa6\u542c\u5668\u540d\u79f0\u548c\u7aef\u53e3\u53f7\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 \u5c06\u4e3b\u673a\u540d\u6307\u5b9a\u4e3a 0.0.0.0 \u4ee5\u7ed1\u5b9a\u5230\u6240\u6709\u63a5\u53e3\u3002 \u5c06\u4e3b\u673a\u540d\u7559\u7a7a\u4ee5\u7ed1\u5b9a\u5230\u9ed8\u8ba4\u63a5\u53e3\u3002 \u5408\u6cd5\u4fa6\u542c\u5668\u5217\u8868\u7684\u793a\u4f8b\uff1a PLAINTEXT://myhost:9092,SSL://:9091 CLIENT://0.0.0.0:9092,REPLICATION://localhost:9093 Type: string Default: PLAINTEXT://:9092 Valid Values: Importance: high Update Mode: per-broker log.dirs \u4fdd\u5b58\u65e5\u5fd7\u6570\u636e\u7684\u76ee\u5f55\uff08log.dirs \u5c5e\u6027\u7684\u8865\u5145\uff09 Type: string Default: /tmp/kafka-logs Valid Values: Importance: high Update Mode: read-only log.dirs \u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u7684\u76ee\u5f55\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.dir \u4e2d\u7684\u503c\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only log.flush.interval.messages \u5728\u6d88\u606f\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u65e5\u5fd7\u5206\u533a\u4e0a\u7d2f\u79ef\u7684\u6d88\u606f\u6570 Type: long Default: 9223372036854775807 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide log.flush.interval.ms \u4efb\u4f55\u4e3b\u9898\u4e2d\u7684\u6d88\u606f\u5728\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.flush.scheduler.interval.ms \u4e2d\u7684\u503c Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide log.flush.offset.checkpoint.interval.ms \u6211\u4eec\u66f4\u65b0\u5145\u5f53\u65e5\u5fd7\u6062\u590d\u70b9\u7684\u6700\u540e\u4e00\u6b21\u5237\u65b0\u7684\u6301\u4e45\u8bb0\u5f55\u7684\u9891\u7387 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: high Update Mode: read-only log.flush.scheduler.interval.ms \u65e5\u5fd7\u5237\u65b0\u5668\u68c0\u67e5\u662f\u5426\u6709\u65e5\u5fd7\u9700\u8981\u5237\u65b0\u5230\u78c1\u76d8\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: long Default: 9223372036854775807 Valid Values: Importance: high Update Mode: read-only log.flush.start.offset.checkpoint.interval.ms \u6211\u4eec\u66f4\u65b0\u65e5\u5fd7\u8d77\u59cb\u504f\u79fb\u91cf\u7684\u6301\u4e45\u8bb0\u5f55\u7684\u9891\u7387 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: high Update Mode: read-only log.retention.bytes \u5220\u9664\u65e5\u5fd7\u4e4b\u524d\u7684\u6700\u5927\u5927\u5c0f Type: long Default: -1 Valid Values: Importance: high Update Mode: cluster-wide log.retention.hours \u5220\u9664\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u6587\u4ef6\u7684\u5c0f\u65f6\u6570\uff08\u4ee5\u5c0f\u65f6\u4e3a\u5355\u4f4d\uff09\uff0c\u7b2c\u4e09\u7ea7\u4e3a log.retention.ms \u5c5e\u6027 Type: int Default: 168 Valid Values: Importance: high Update Mode: read-only log.retention.minutes \u5220\u9664\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u6587\u4ef6\u7684\u5206\u949f\u6570\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\uff0c\u6b21\u8981\u4e8e log.retention.ms \u5c5e\u6027\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.retention.hours \u4e2d\u7684\u503c Type: int Default: null Valid Values: Importance: high Update Mode: read-only log.retention.ms \u5220\u9664\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u6587\u4ef6\u7684\u6beb\u79d2\u6570\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.retention.minutes \u4e2d\u7684\u503c\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a -1\uff0c\u5219\u4e0d\u5e94\u7528\u65f6\u95f4\u9650\u5236\u3002 Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide log.roll.hours \u63a8\u51fa\u65b0\u65e5\u5fd7\u6bb5\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u5c0f\u65f6\u4e3a\u5355\u4f4d\uff09\uff0c\u6b21\u8981\u4e8e log.roll.ms \u5c5e\u6027 Type: int Default: 168 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only log.roll.jitter.hours \u4ece logRollTimeMillis \u4e2d\u51cf\u53bb\u7684\u6700\u5927\u6296\u52a8\uff08\u4ee5\u5c0f\u65f6\u4e3a\u5355\u4f4d\uff09\uff0c\u6b21\u8981\u4e8e log.roll.jitter.ms \u5c5e\u6027 Type: int Default: 0 Valid Values: [0,...] Importance: high Update Mode: read-only log.roll.jitter.ms \u4ece logRollTimeMillis \u4e2d\u51cf\u53bb\u7684\u6700\u5927\u6296\u52a8\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.roll.jitter.hours \u4e2d\u7684\u503c Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide log.roll.ms \u63a8\u51fa\u65b0\u65e5\u5fd7\u6bb5\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.roll.hours \u4e2d\u7684\u503c Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide log.segment.bytes \u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f Type: int Default: 1073741824 (1 gibibyte) Valid Values: [14\uff0c...] Importance: high Update Mode: cluster-wide log.segment.delete.delay.ms \u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5220\u9664\u6587\u4ef6\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4 Type: long Default: 60000 (1 minute) Valid Values: [0,...] Importance: high Update Mode: cluster-wide message.max.bytes Kafka \u5141\u8bb8\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\uff08\u5982\u679c\u542f\u7528\u538b\u7f29\uff0c\u5219\u5728\u538b\u7f29\u540e\uff09\u3002\u5982\u679c\u589e\u52a0\u6b64\u503c\u5e76\u4e14\u5b58\u5728\u65e9\u4e8e 0.10.2 \u7684\u6d88\u8d39\u8005\uff0c\u5219\u6d88\u8d39\u8005\u7684\u83b7\u53d6\u5927\u5c0f\u4e5f\u5fc5\u987b\u589e\u52a0\uff0c\u4ee5\u4fbf\u4ed6\u4eec\u53ef\u4ee5\u83b7\u53d6\u8fd9\u4e48\u5927\u7684\u8bb0\u5f55\u6279\u6b21\u3002\u5728\u6700\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u8bb0\u5f55\u603b\u662f\u5206\u7ec4\u4e3a\u6279\u6b21\u3002\u5728\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u672a\u538b\u7f29\u7684\u8bb0\u5f55\u4e0d\u4f1a\u5206\u7ec4\u4e3a\u6279\u6b21\uff0c\u5e76\u4e14\u6b64\u9650\u5236\u4ec5\u9002\u7528\u4e8e\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u5355\u4e2a\u8bb0\u5f55\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u4e3b\u9898\u7ea7\u522b\u914d\u7f6e\u9488\u5bf9\u6bcf\u4e2a\u4e3b\u9898\u8fdb\u884c\u8bbe\u7f6e max.message.bytes \u3002 Type: int Default: 1048588 Valid Values: [0,...] Importance: high Update Mode: cluster-wide metadata.log.dir \u6b64\u914d\u7f6e\u51b3\u5b9a\u4e86\u6211\u4eec\u5c06 KRaft \u6a21\u5f0f\u4e0b\u96c6\u7fa4\u7684\u5143\u6570\u636e\u65e5\u5fd7\u653e\u7f6e\u5728\u4f55\u5904\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5143\u6570\u636e\u65e5\u5fd7\u5c06\u653e\u7f6e\u5728 log.dirs \u4e2d\u7684\u7b2c\u4e00\u4e2alog.dirs\u4e2d\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only metadata.log.max.record.bytes. Between.snapshots \u8fd9\u662f\u6700\u65b0\u5feb\u7167\u4e0e\u751f\u6210\u65b0\u5feb\u7167\u4e4b\u524d\u6240\u9700\u7684\u9ad8\u6c34\u4f4d\u7ebf\u4e4b\u95f4\u7684\u65e5\u5fd7\u4e2d\u7684\u6700\u5927\u5b57\u8282\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a20971520\u3002\u8981\u6839\u636e\u7ecf\u8fc7\u7684\u65f6\u95f4\u751f\u6210\u5feb\u7167\uff0c\u8bf7\u53c2\u89c1 metadata.log.max.snapshot.interval.ms \u914d\u7f6e\u3002\u5f53\u8fbe\u5230\u6700\u5927\u65f6\u95f4\u95f4\u9694\u6216\u8fbe\u5230\u6700\u5927\u5b57\u8282\u6570\u9650\u5236\u65f6\uff0cKafka \u8282\u70b9\u5c06\u751f\u6210\u5feb\u7167\u3002 Type: long Default: 20971520 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only metadata.log.max.snapshot.interval.ms \u5982\u679c\u65e5\u5fd7\u4e2d\u5b58\u5728\u672a\u5305\u542b\u5728\u6700\u65b0\u5feb\u7167\u4e2d\u7684\u5df2\u63d0\u4ea4\u8bb0\u5f55\uff0c\u5219\u8fd9\u662f\u7b49\u5f85\u751f\u6210\u5feb\u7167\u7684\u6700\u5927\u6beb\u79d2\u6570\u3002\u503c\u4e3a\u96f6\u5c06\u7981\u7528\u57fa\u4e8e\u65f6\u95f4\u7684\u5feb\u7167\u751f\u6210\u3002\u9ed8\u8ba4\u503c\u4e3a3600000\u3002\u5982\u679c\u8981\u6839\u636e\u5143\u6570\u636e\u5b57\u8282\u6570\u751f\u6210\u5feb\u7167\uff0c\u8bf7\u53c2\u89c1\u914d\u7f6e metadata.log.max.record.bytes.between.snapshots \u3002\u5f53\u8fbe\u5230\u6700\u5927\u65f6\u95f4\u95f4\u9694\u6216\u8fbe\u5230\u6700\u5927\u5b57\u8282\u6570\u9650\u5236\u65f6\uff0cKafka \u8282\u70b9\u5c06\u751f\u6210\u5feb\u7167\u3002 Type: long Default: 3600000 (1 hour) Valid Values: [0,...] Importance: high Update Mode: read-only metadata.log.segment.bytes \u5355\u4e2a\u5143\u6570\u636e\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f\u3002 Type: int Default: 1073741824 (1 gibibyte) Valid Values: [12\uff0c...] Importance: high Update Mode: read-only metadata.log.segment.ms \u63a8\u51fa\u65b0\u5143\u6570\u636e\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 Type: long Default: 604800000 (7 days) Valid Values: Importance: high Update Mode: read-only metadata.max.retention.bytes \u5220\u9664\u65e7\u5feb\u7167\u548c\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u5143\u6570\u636e\u65e5\u5fd7\u548c\u5feb\u7167\u7684\u6700\u5927\u7ec4\u5408\u5927\u5c0f\u3002\u7531\u4e8e\u5728\u5220\u9664\u4efb\u4f55\u65e5\u5fd7\u4e4b\u524d\u5fc5\u987b\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u5feb\u7167\uff0c\u56e0\u6b64\u8fd9\u662f\u4e00\u9879\u8f6f\u9650\u5236\u3002 Type: long Default: 104857600 (100 mebibytes) Valid Values: Importance: high Update Mode: read-only metadata.max.retention.ms \u5220\u9664\u5143\u6570\u636e\u65e5\u5fd7\u6587\u4ef6\u6216\u5feb\u7167\u4e4b\u524d\u4fdd\u7559\u7684\u6beb\u79d2\u6570\u3002\u7531\u4e8e\u5728\u5220\u9664\u4efb\u4f55\u65e5\u5fd7\u4e4b\u524d\u5fc5\u987b\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u5feb\u7167\uff0c\u56e0\u6b64\u8fd9\u662f\u4e00\u9879\u8f6f\u9650\u5236\u3002 Type: long Default: 604800000 (7 days) Valid Values: Importance: high Update Mode: read-only min.insync.replicas \u5f53\u751f\u4ea7\u8005\u5c06 acks \u8bbe\u7f6e\u4e3a\u201call\u201d\uff08\u6216\u201c-1\u201d\uff09\u65f6\uff0cmin.insync.replicas \u6307\u5b9a\u5fc5\u987b\u786e\u8ba4\u5199\u5165\u624d\u80fd\u88ab\u89c6\u4e3a\u6210\u529f\u7684\u6700\u5c0f\u526f\u672c\u6570\u3002\u5982\u679c\u65e0\u6cd5\u6ee1\u8db3\u6b64\u6700\u5c0f\u503c\uff0c\u5219\u751f\u4ea7\u8005\u5c06\u5f15\u53d1\u5f02\u5e38\uff08NotEnoughReplicas \u6216 NotEnoughReplicasAfterAppend\uff09\u3002 \u5f53\u4e00\u8d77\u4f7f\u7528\u65f6\uff0cmin.insync.replicas \u548c ack \u5141\u8bb8\u60a8\u5f3a\u5236\u6267\u884c\u66f4\u9ad8\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u3002\u5178\u578b\u7684\u573a\u666f\u662f\u521b\u5efa\u4e00\u4e2a\u590d\u5236\u56e0\u5b50\u4e3a 3 \u7684\u4e3b\u9898\uff0c\u5c06 min.insync.replicas \u8bbe\u7f6e\u4e3a 2\uff0c\u5e76\u4f7f\u7528\u201call\u201d\u7684 ack \u8fdb\u884c\u751f\u6210\u3002\u8fd9\u5c06\u786e\u4fdd\u751f\u4ea7\u8005\u5728\u5927\u591a\u6570\u526f\u672c\u672a\u6536\u5230\u5199\u5165\u65f6\u5f15\u53d1\u5f02\u5e38\u3002 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide node.id \u5f53\u201cprocess.roles\u201d\u975e\u7a7a\u65f6\uff0c\u4e0e\u8be5\u8fdb\u7a0b\u6240\u626e\u6f14\u7684\u89d2\u8272\u5173\u8054\u7684\u8282\u70b9 ID\u3002\u8fd9\u662f\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\u6240\u9700\u7684\u914d\u7f6e\u3002 Type: int Default: -1 Valid Values: Importance: high Update Mode: read-only num.io.threads \u670d\u52a1\u5668\u7528\u4e8e\u5904\u7406\u8bf7\u6c42\u7684\u7ebf\u7a0b\u6570\uff0c\u5176\u4e2d\u53ef\u80fd\u5305\u62ec\u78c1\u76d8 I/O Type: int Default: 8 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide num.network.threads \u670d\u52a1\u5668\u7528\u4e8e\u4ece\u7f51\u7edc\u63a5\u6536\u8bf7\u6c42\u5e76\u5411\u7f51\u7edc\u53d1\u9001\u54cd\u5e94\u7684\u7ebf\u7a0b\u6570\u3002\u6ce8\u610f\uff1a\u6bcf\u4e2a\u76d1\u542c\u5668\uff08\u9664\u4e86\u63a7\u5236\u5668\u76d1\u542c\u5668\uff09\u90fd\u4f1a\u521b\u5efa\u81ea\u5df1\u7684\u7ebf\u7a0b\u6c60\u3002 Type: int Default: 3 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide num.recovery.threads.per.data.dir \u6bcf\u4e2a\u6570\u636e\u76ee\u5f55\u7528\u4e8e\u542f\u52a8\u65f6\u65e5\u5fd7\u6062\u590d\u548c\u5173\u95ed\u65f6\u5237\u65b0\u7684\u7ebf\u7a0b\u6570 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide num.replica.alter.log.dirs.threads \u53ef\u4ee5\u5728log.dirs\u4e4b\u95f4\u79fb\u52a8\u526f\u672c\u7684\u7ebf\u7a0b\u6570\uff0c\u5176\u4e2d\u53ef\u80fd\u5305\u62ec\u78c1\u76d8 I/O Type: int Default: null Valid Values: Importance: high Update Mode: read-only num.replica.fetchers \u7528\u4e8e\u4ece\u6bcf\u4e2a\u6e90\u4ee3\u7406\u590d\u5236\u8bb0\u5f55\u7684\u83b7\u53d6\u5668\u7ebf\u7a0b\u6570\u3002\u6bcf\u4e2a Broker \u4e0a\u7684 fetcher \u603b\u6570 num.replica.fetchers \u4e0e\u96c6\u7fa4\u4e2d\u7684 Broker \u6570\u91cf\u76f8\u4e58\u3002\u589e\u52a0\u6b64\u503c\u53ef\u4ee5\u63d0\u9ad8\u8ddf\u968f\u8005\u548c\u9886\u5bfc\u8005 Broker \u4e2d\u7684 I/O \u5e76\u884c\u5ea6\uff0c\u4f46\u4ee3\u4ef7\u662f\u66f4\u9ad8\u7684 CPU \u548c\u5185\u5b58\u5229\u7528\u7387\u3002 Type: int Default: 1 Valid Values: Importance: high Update Mode: cluster-wide offsets.metadata.max.bytes \u4e0e\u504f\u79fb\u63d0\u4ea4\u5173\u8054\u7684\u5143\u6570\u636e\u6761\u76ee\u7684\u6700\u5927\u5927\u5c0f Type: int Default: 4096 (4 kibibytes) Valid Values: Importance: high Update Mode: read-only offsets.commit.required.acks \u53ef\u4ee5\u63a5\u53d7\u63d0\u4ea4\u4e4b\u524d\u6240\u9700\u7684\u786e\u8ba4\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4e0d\u5e94\u8986\u76d6\u9ed8\u8ba4\u503c\uff08-1\uff09 Type: short Default: -1 Valid Values: Importance: high Update Mode: read-only offsets.commit.timeout.ms \u504f\u79fb\u91cf\u63d0\u4ea4\u5c06\u88ab\u5ef6\u8fdf\uff0c\u76f4\u5230\u504f\u79fb\u91cf\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u90fd\u6536\u5230\u63d0\u4ea4\u6216\u8fbe\u5230\u6b64\u8d85\u65f6\u3002\u8fd9\u7c7b\u4f3c\u4e8e\u751f\u4ea7\u8005\u8bf7\u6c42\u8d85\u65f6\u3002 Type: int Default: 5000 (5 seconds) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only offsets.load.buffer.size \u5c06\u504f\u79fb\u91cf\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\u65f6\u4ece\u504f\u79fb\u91cf\u6bb5\u8bfb\u53d6\u7684\u6279\u91cf\u5927\u5c0f\uff08\u8f6f\u9650\u5236\uff0c\u5982\u679c\u8bb0\u5f55\u592a\u5927\u5219\u8986\u76d6\uff09\u3002 Type: int Default: 5242880 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only offsets.retention.check.interval.ms \u68c0\u67e5\u8fc7\u65f6\u504f\u79fb\u91cf\u7684\u9891\u7387 Type: long Default: 600000 (10 minutes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only offsets.retention.minutes \u5bf9\u4e8e\u8ba2\u9605\u7684\u6d88\u8d39\u8005\uff0c\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff0c\u7279\u5b9a\u5206\u533a\u7684\u5df2\u63d0\u4ea4\u504f\u79fb\u91cf\u5c06\u8fc7\u671f\u5e76\u88ab\u4e22\u5f03\uff1a 1\uff09\u5728\u6d88\u8d39\u8005\u7ec4\u5931\u53bb\u6240\u6709\u6d88\u8d39\u8005\uff08\u5373\u53d8\u7a7a\uff09\u540e\uff0c\u6b64\u4fdd\u7559\u671f\u5df2\u8fc7\uff1b 2) \u81ea\u4e0a\u6b21\u4e3a\u8be5\u5206\u533a\u63d0\u4ea4\u504f\u79fb\u91cf\u4ee5\u6765\uff0c\u8be5\u4fdd\u7559\u671f\u5df2\u8fc7\uff0c\u5e76\u4e14\u8be5\u7ec4\u4e0d\u518d\u8ba2\u9605\u76f8\u5e94\u7684\u4e3b\u9898\u3002 \u5bf9\u4e8e\u72ec\u7acb\u6d88\u8d39\u8005\uff08\u4f7f\u7528\u624b\u52a8\u5206\u914d\uff09\uff0c\u81ea\u4e0a\u6b21\u63d0\u4ea4\u4ee5\u6765\u7684\u4fdd\u7559\u671f\u8fc7\u540e\uff0c\u504f\u79fb\u91cf\u5c06\u8fc7\u671f\u3002 \u8bf7\u6ce8\u610f\uff0c\u5f53\u901a\u8fc7delete-group\u8bf7\u6c42\u5220\u9664\u4e00\u4e2a\u7ec4\u65f6\uff0c\u5176\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u4e5f\u5c06\u88ab\u5220\u9664\uff0c\u800c\u65e0\u9700\u989d\u5916\u7684\u4fdd\u7559\u671f\uff1b \u6b64\u5916\uff0c\u5f53\u901a\u8fc7\u5220\u9664\u4e3b\u9898\u8bf7\u6c42\u5220\u9664\u4e3b\u9898\u65f6\uff0c\u5728\u4f20\u64ad\u5143\u6570\u636e\u66f4\u65b0\u65f6\uff0c\u8be5\u4e3b\u9898\u7684\u4efb\u4f55\u7ec4\u7684\u63d0\u4ea4\u504f\u79fb\u91cf\u4e5f\u5c06\u88ab\u5220\u9664\uff0c\u800c\u65e0\u9700\u989d\u5916\u7684\u4fdd\u7559\u671f\u3002 Type: int Default: 10080 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only offsets.topic.compression.codec \u504f\u79fb\u91cf\u4e3b\u9898\u7684\u538b\u7f29\u7f16\u89e3\u7801\u5668 - \u538b\u7f29\u53ef\u7528\u4e8e\u5b9e\u73b0\u201c\u539f\u5b50\u201d\u63d0\u4ea4 Type: int Default: 0 Valid Values: Importance: high Update Mode: read-only offsets.topic.num.partitions \u504f\u79fb\u63d0\u4ea4\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\uff08\u90e8\u7f72\u540e\u4e0d\u5e94\u66f4\u6539\uff09 Type: int Default: 50 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only offsets.topic.replication.factor \u504f\u79fb\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u8bbe\u7f6e\u8f83\u9ad8\u4ee5\u786e\u4fdd\u53ef\u7528\u6027\uff09\u3002\u5728\u96c6\u7fa4\u5927\u5c0f\u6ee1\u8db3\u6b64\u590d\u5236\u56e0\u5b50\u8981\u6c42\u4e4b\u524d\uff0c\u5185\u90e8\u4e3b\u9898\u521b\u5efa\u5c06\u5931\u8d25\u3002 Type: short Default: 3 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only offsets.topic.segment.bytes \u504f\u79fb\u91cf\u4e3b\u9898\u6bb5\u5b57\u8282\u5e94\u4fdd\u6301\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4ee5\u4fbf\u4e8e\u66f4\u5feb\u7684\u65e5\u5fd7\u538b\u7f29\u548c\u7f13\u5b58\u52a0\u8f7d Type: int Default: 104857600 (100 mebibytes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only process.roles \u6b64\u6d41\u7a0b\u626e\u6f14\u7684\u89d2\u8272\uff1a\u201cbroker\u201d\u3001\u201c\u63a7\u5236\u8005\u201d\u6216\u201cbroker\u3001\u63a7\u5236\u8005\u201d\uff08\u5982\u679c\u4e24\u8005\u517c\u800c\u6709\u4e4b\uff09\u3002\u6b64\u914d\u7f6e\u4ec5\u9002\u7528\u4e8eKRaft\uff08Kafka Raft\uff09\u6a21\u5f0f\u7684\u96c6\u7fa4\uff08\u800c\u4e0d\u662fZooKeeper\uff09\u3002\u5bf9\u4e8e Zookeeper \u96c6\u7fa4\uff0c\u5c06\u6b64\u914d\u7f6e\u4fdd\u7559\u4e3a\u672a\u5b9a\u4e49\u6216\u4e3a\u7a7a\u3002 Type: list Default: \"\" Valid Values: [broker, controller] Importance: high Update Mode: read-only queued.max.requests \u5728\u963b\u585e\u7f51\u7edc\u7ebf\u7a0b\u4e4b\u524d\uff0c\u6570\u636e\u5e73\u9762\u5141\u8bb8\u7684\u6392\u961f\u8bf7\u6c42\u6570 Type: int Default: 500 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only replica.fetch.min.bytes \u6bcf\u4e2a\u83b7\u53d6\u54cd\u5e94\u6240\u9700\u7684\u6700\u5c0f\u5b57\u8282\u6570\u3002\u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u5b57\u8282\uff0c\u8bf7\u7b49\u5f85 replica.fetch.wait.max.ms \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u3002 Type: int Default: 1 Valid Values: Importance: high Update Mode: read-only replica.fetch.wait.max.ms \u8ddf\u968f\u8005\u526f\u672c\u53d1\u51fa\u7684\u6bcf\u4e2a fetcher \u8bf7\u6c42\u7684\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u3002\u8be5\u503c\u5e94\u59cb\u7ec8\u5c0f\u4e8ereplica.lag.time.max.ms\uff0c\u4ee5\u9632\u6b62\u4f4e\u541e\u5410\u91cf\u4e3b\u9898\u7684ISR\u9891\u7e41\u6536\u7f29 Type: int Default: 500 Valid Values: Importance: high Update Mode: read-only replica.high.watermark.checkpoint.interval.ms \u5c06\u9ad8\u6c34\u4f4d\u7ebf\u4fdd\u5b58\u5230\u78c1\u76d8\u7684\u9891\u7387 Type: long Default: 5000 (5 seconds) Valid Values: Importance: high Update Mode: read-only replica.lag.time.max.ms \u5982\u679c\u8ffd\u968f\u8005\u6ca1\u6709\u53d1\u9001\u4efb\u4f55\u83b7\u53d6\u8bf7\u6c42\u6216\u8005\u81f3\u5c11\u5728\u8fd9\u4e00\u6b21\u6ca1\u6709\u6d88\u8017\u5230\u9886\u5bfc\u8005\u65e5\u5fd7\u7ed3\u675f\u504f\u79fb\u91cf\uff0c\u5219\u9886\u5bfc\u8005\u5c06\u4ece isr \u4e2d\u5220\u9664\u8ffd\u968f\u8005 Type: long Default: 30000 (30 seconds) Valid Values: Importance: high Update Mode: read-only replica.socket.receive.buffer.bytes \u7528\u4e8e\u5411\u9886\u5bfc\u8005\u590d\u5236\u6570\u636e\u7684\u7f51\u7edc\u8bf7\u6c42\u7684\u5957\u63a5\u5b57\u63a5\u6536\u7f13\u51b2\u533a Type: int Default: 65536 (64 kibibytes) Valid Values: Importance: high Update Mode: read-only replica.socket.timeout.ms \u7f51\u7edc\u8bf7\u6c42\u7684\u5957\u63a5\u5b57\u8d85\u65f6\u3002\u5b83\u7684\u503c\u81f3\u5c11\u5e94\u8be5\u662freplica.fetch.wait.max.ms Type: int Default: 30000 (30 seconds) Valid Values: Importance: high Update Mode: read-only request.timeout.ms \u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 30000 (30 seconds) Valid Values: Importance: high Update Mode: read-only sasl.mechanism.controller.protocol sasl.mechanism\u7528\u4e8e\u4e0e\u63a7\u5236\u5668\u901a\u4fe1\u3002\u9ed8\u8ba4\u4e3a GSSAPI\u3002 Type: string Default: GSAPI Valid Values: Importance: high Update Mode: read-only socket.receive.buffer.bytes \u5957\u63a5\u5b57\u670d\u52a1\u5668\u5957\u63a5\u5b57\u7684 SO_RCVBUF \u7f13\u51b2\u533a\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 102400\uff08100 KB\uff09 Valid Values: Importance: high Update Mode: read-only socket.request.max.bytes \u4e00\u6b21socket\u8bf7\u6c42\u7684\u6700\u5927\u5b57\u8282\u6570 Type: int Default: 104857600 (100 mebibytes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only socket.send.buffer.bytes The SO_SNDBUF buffer of the socket server sockets. If the value is -1, the OS default will be used. Type: int Default: 102400 (100 kibibytes) Valid Values: Importance: high Update Mode: read-only transaction.max.timeout.ms The maximum allowed timeout for transactions. If a client\u2019s requested transaction time exceed this, then the broker will return an error in InitProducerIdRequest. This prevents a client from too large of a timeout, which can stall consumers reading from topics included in the transaction. Type: int Default: 900000 (15 minutes) Valid Values: [1,...] Importance: high Update Mode: read-only transaction.state.log.load.buffer.size Batch size for reading from the transaction log segments when loading producer ids and transactions into the cache (soft-limit, overridden if records are too large). Type: int Default: 5242880 Valid Values: [1,...] Importance: high Update Mode: read-only transaction.state.log.min.isr Overridden min.insync.replicas config for the transaction topic. Type: int Default: 2 Valid Values: [1,...] Importance: high Update Mode: read-only transaction.state.log.num.partitions \u4e8b\u52a1\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\uff08\u90e8\u7f72\u540e\u4e0d\u5e94\u66f4\u6539\uff09\u3002 Type: int Default: 50 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only transaction.state.log.replication.factor \u4e8b\u52a1\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u8bbe\u7f6e\u8f83\u9ad8\u4ee5\u786e\u4fdd\u53ef\u7528\u6027\uff09\u3002\u5728\u96c6\u7fa4\u5927\u5c0f\u6ee1\u8db3\u6b64\u590d\u5236\u56e0\u5b50\u8981\u6c42\u4e4b\u524d\uff0c\u5185\u90e8\u4e3b\u9898\u521b\u5efa\u5c06\u5931\u8d25\u3002 Type: short Default: 3 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only transaction.state.log.segment.bytes \u4e8b\u52a1\u4e3b\u9898\u6bb5\u5b57\u8282\u5e94\u4fdd\u6301\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4ee5\u4fbf\u4e8e\u66f4\u5feb\u7684\u65e5\u5fd7\u538b\u7f29\u548c\u7f13\u5b58\u52a0\u8f7d Type: int Default: 104857600 (100 mebibytes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only transactional.id.expiration.ms \u5728\u4e8b\u52a1 ID \u8fc7\u671f\u4e4b\u524d\uff0c\u4e8b\u52a1\u534f\u8c03\u5668\u5728\u672a\u6536\u5230\u5f53\u524d\u4e8b\u52a1\u7684\u4efb\u4f55\u4e8b\u52a1\u72b6\u6001\u66f4\u65b0\u7684\u60c5\u51b5\u4e0b\u5c06\u7b49\u5f85\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5f53\u4ea4\u6613\u4ecd\u5728\u8fdb\u884c\u65f6\uff0c\u4ea4\u6613 ID \u4e0d\u4f1a\u8fc7\u671f\u3002 Type: int Default: 604800000 (7 days) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only unclean.leader.election.enable \u6307\u793a\u662f\u5426\u5c06\u4e0d\u5728 ISR \u96c6\u4e2d\u7684\u526f\u672c\u4f5c\u4e3a\u6700\u540e\u624b\u6bb5\u9009\u4e3e\u4e3a\u9886\u5bfc\u8005\uff0c\u5373\u4f7f\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931 Type: boolean Default: false Valid Values: Importance: high Update Mode: cluster-wide zookeeper.connect \u4ee5\u4ee5\u4e0b\u5f62\u5f0f\u6307\u5b9a ZooKeeper \u8fde\u63a5\u5b57\u7b26\u4e32\uff0c hostname:port \u5176\u4e2d host \u548c port \u662f ZooKeeper \u670d\u52a1\u5668\u7684\u4e3b\u673a\u548c\u7aef\u53e3\u3002\u8981\u5141\u8bb8\u5728 ZooKeeper \u673a\u5668\u5173\u95ed\u65f6\u901a\u8fc7\u5176\u4ed6 ZooKeeper \u8282\u70b9\u8fdb\u884c\u8fde\u63a5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u5728\u8868\u5355\u4e2d\u6307\u5b9a\u591a\u4e2a\u4e3b\u673a hostname1:port1,hostname2:port2,hostname3:port3 \u3002 \u670d\u52a1\u5668\u8fd8\u53ef\u4ee5\u5c06 ZooKeeper chroot \u8def\u5f84\u4f5c\u4e3a\u5176 ZooKeeper \u8fde\u63a5\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\uff0c\u8be5\u8fde\u63a5\u5b57\u7b26\u4e32\u5c06\u5176\u6570\u636e\u653e\u7f6e\u5728\u5168\u5c40 ZooKeeper \u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u67d0\u4e2a\u8def\u5f84\u4e0b\u3002\u4f8b\u5982\uff0c\u8981\u7ed9\u51fa chroot \u8def\u5f84\uff0c /chroot/path \u8bf7\u5c06\u8fde\u63a5\u5b57\u7b26\u4e32\u7ed9\u51fa\u4e3a hostname1:port1,hostname2:port2,hostname3:port3/chroot/path . Type: string Default: null Valid Values: Importance: high Update Mode: read-only zookeeper.connection.timeout.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u4e0ezookeeper\u5efa\u7acb\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528zookeeper.session.timeout.ms\u4e2d\u7684\u503c Type: int Default: null Valid Values: Importance: high Update Mode: read-only zookeeper.max.in.flight.requests \u5ba2\u6237\u7aef\u5728\u963b\u585e\u4e4b\u524d\u5411 Zookeeper \u53d1\u9001\u7684\u672a\u786e\u8ba4\u8bf7\u6c42\u7684\u6700\u5927\u6570\u91cf\u3002 Type: int Default: 10 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only zookeeper.metadata.migration.enable \u542f\u7528 ZK \u5230 KRaft \u8fc1\u79fb Type: boolean Default: false Valid Values: Importance: high Update Mode: read-only zookeeper.session.timeout.ms Zookeeper \u4f1a\u8bdd\u8d85\u65f6 Type: int Default: 18000 (18 seconds) Valid Values: Importance: high Update Mode: read-only zookeeper.set.acl \u8bbe\u7f6e\u5ba2\u6237\u7aef\u4f7f\u7528\u5b89\u5168 ACL Type: boolean Default: false Valid Values: Importance: high Update Mode: read-only broker.heartbeat.interval.ms \u4ee3\u7406\u5fc3\u8df3\u4e4b\u95f4\u7684\u65f6\u95f4\u957f\u5ea6\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\u4f7f\u7528\u3002 Type: int Default: 2000 (2 seconds) Valid Values: Importance: medium Update Mode: read-only broker.id.generation.enable \u5728\u670d\u52a1\u5668\u4e0a\u542f\u7528\u81ea\u52a8\u4ee3\u7406 ID \u751f\u6210\u3002\u542f\u7528\u540e\uff0c\u5e94\u68c0\u67e5\u4e3aserved.broker.max.id\u914d\u7f6e\u7684\u503c\u3002 Type: boolean Default: true Valid Values: Importance: medium Update Mode: read-only broker.rack broker\u7684\u673a\u67b6\u3002\u8fd9\u5c06\u7528\u4e8e\u673a\u67b6\u611f\u77e5\u590d\u5236\u5206\u914d\u4ee5\u5b9e\u73b0\u5bb9\u9519\u3002\u793a\u4f8b\uff1a\u201cRACK1\u201d\u3001\u201cus-east-1d\u201d Type: string Default: null Valid Values: Importance: medium Update Mode: read-only broker.session.timeout.ms The length of time in milliseconds that a broker lease lasts if no heartbeats are made. Used when running in KRaft mode. Type: int Default: 9000 (9 seconds) Valid Values: Importance: medium Update Mode: read-only connections.max.idle.ms Idle connections timeout: the server socket processor threads close the connections that idle more than this Type: long Default: 600000 (10 minutes) Valid Values: Importance: medium Update Mode: read-only connections.max.reauth.ms When explicitly set to a positive number (the default is 0, not a positive number), a session lifetime that will not exceed the configured value will be communicated to v2.2.0 or later clients when they authenticate. The broker will disconnect any such connection that is not re-authenticated within the session lifetime and that is then subsequently used for any purpose other than re-authentication. Configuration names can optionally be prefixed with listener prefix and SASL mechanism name in lower-case. For example, listener.name.sasl_ssl.oauthbearer.connections.max.reauth.ms=3600000 Type: long Default: 0 Valid Values: Importance: medium Update Mode: read-only controlled.shutdown.enable Enable controlled shutdown of the server Type: boolean Default: true Valid Values: Importance: medium Update Mode: read-only controlled.shutdown.max.retries Controlled shutdown can fail for multiple reasons. This determines the number of retries when such failure happens Type: int Default: 3 Valid Values: Importance: medium Update Mode: read-only controlled.shutdown.retry.backoff.ms Before each retry, the system needs time to recover from the state that caused the previous failure (Controller fail over, replica lag etc). This config determines the amount of time to wait before retrying. Type: long Default: 5000 (5 seconds) Valid Values: Importance: medium Update Mode: read-only controller.quorum.append.linger.ms The duration in milliseconds that the leader will wait for writes to accumulate before flushing them to disk. Type: int Default: 25 Valid Values: Importance: medium Update Mode: read-only controller.quorum.request.timeout.ms \u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 2000 (2 seconds) Valid Values: Importance: medium Update Mode: read-only controller.socket.timeout.ms \u63a7\u5236\u5668\u5230\u4ee3\u7406\u901a\u9053\u7684\u5957\u63a5\u5b57\u8d85\u65f6 Type: int Default: 30000 (30 seconds) Valid Values: Importance: medium Update Mode: read-only default.replication.factor \u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u7684\u9ed8\u8ba4\u590d\u5236\u56e0\u5b50 Type: int Default: 1 Valid Values: Importance: medium Update Mode: read-only delegate.token.expiry.time.ms \u4ee4\u724c\u9700\u8981\u66f4\u65b0\u4e4b\u524d\u7684\u4ee4\u724c\u6709\u6548\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u9ed8\u8ba4\u503c 1 \u5929\u3002 Type: long Default: 86400000 (1 day) Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only delegation.token.master.key \u5df2\u5f03\u7528\uff1adelegation.token.secret.key \u7684\u522b\u540d\uff0c\u5e94\u4f7f\u7528\u5b83\u6765\u4ee3\u66ff\u6b64\u914d\u7f6e\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only delegation.token.max.lifetime.ms \u4ee4\u724c\u5177\u6709\u6700\u957f\u751f\u547d\u5468\u671f\uff0c\u8d85\u8fc7\u8be5\u751f\u547d\u5468\u671f\u5c31\u65e0\u6cd5\u518d\u7eed\u8ba2\u3002\u9ed8\u8ba4\u503c 7 \u5929\u3002 Type: long Default: 604800000 (7 days) Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only delegation.token.secret.key \u7528\u4e8e\u751f\u6210\u548c\u9a8c\u8bc1\u59d4\u6258\u4ee4\u724c\u7684\u5bc6\u94a5\u3002\u5fc5\u987b\u5728\u6240\u6709\u4ee3\u7406\u4e4b\u95f4\u914d\u7f6e\u76f8\u540c\u7684\u5bc6\u94a5\u3002\u5982\u679c\u5bc6\u94a5\u672a\u8bbe\u7f6e\u6216\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u4ee3\u7406\u5c06\u7981\u7528\u59d4\u6258\u4ee4\u724c\u652f\u6301\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only delete.records.purgatory.purge.interval.requests \u5220\u9664\u8bb0\u5f55\u8bf7\u6c42purgatory\u7684\u6e05\u9664\u95f4\u9694\uff08\u4ee5\u8bf7\u6c42\u6570\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1 Valid Values: Importance: medium Update Mode: read-only fetch.max.bytes \u6211\u4eec\u5c06\u4e3a\u83b7\u53d6\u8bf7\u6c42\u8fd4\u56de\u7684\u6700\u5927\u5b57\u8282\u6570\u3002\u5fc5\u987b\u81f3\u5c11\u4e3a 1024\u3002 Type: int Default: 57671680 (55 mebibytes) Valid Values: [1024\uff0c...] Importance: medium Update Mode: read-only fetch.purgatory.purge.interval.requests \u83b7\u53d6\u8bf7\u6c42\u70bc\u72f1\u7684\u6e05\u9664\u95f4\u9694\uff08\u4ee5\u8bf7\u6c42\u6570\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1000 Valid Values: Importance: medium Update Mode: read-only group.initial.rebalance.delay.ms \u7ec4\u534f\u8c03\u5458\u5728\u6267\u884c\u7b2c\u4e00\u6b21\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u7b49\u5f85\u66f4\u591a\u6d88\u8d39\u8005\u52a0\u5165\u65b0\u7ec4\u7684\u65f6\u95f4\u3002\u8f83\u957f\u7684\u5ef6\u8fdf\u610f\u5473\u7740\u53ef\u80fd\u4f1a\u51cf\u5c11\u91cd\u65b0\u5e73\u8861\uff0c\u4f46\u4f1a\u589e\u52a0\u5904\u7406\u5f00\u59cb\u4e4b\u524d\u7684\u65f6\u95f4\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: medium Update Mode: read-only group.max.session.timeout.ms \u6ce8\u518c\u6d88\u8d39\u8005\u5141\u8bb8\u7684\u6700\u5927\u4f1a\u8bdd\u8d85\u65f6\u3002\u8f83\u957f\u7684\u8d85\u65f6\u4f7f\u6d88\u8d39\u8005\u6709\u66f4\u591a\u7684\u65f6\u95f4\u5728\u5fc3\u8df3\u4e4b\u95f4\u5904\u7406\u6d88\u606f\uff0c\u4f46\u4ee3\u4ef7\u662f\u68c0\u6d4b\u6545\u969c\u7684\u65f6\u95f4\u66f4\u957f\u3002 Type: int Default: 1800000\uff0830\u5206\u949f\uff09 Valid Values: Importance: medium Update Mode: read-only group.max.size \u5355\u4e2a\u6d88\u8d39\u7ec4\u53ef\u4ee5\u5bb9\u7eb3\u7684\u6700\u5927\u6d88\u8d39\u8005\u6570\u91cf\u3002 Type: int Default: 2147483647 Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only group.min.session.timeout.ms \u6ce8\u518c\u6d88\u8d39\u8005\u5141\u8bb8\u7684\u6700\u77ed\u4f1a\u8bdd\u8d85\u65f6\u3002\u66f4\u77ed\u7684\u8d85\u65f6\u4f1a\u5bfc\u81f4\u66f4\u5feb\u7684\u6545\u969c\u68c0\u6d4b\uff0c\u4f46\u4ee3\u4ef7\u662f\u66f4\u9891\u7e41\u7684\u6d88\u8d39\u8005\u5fc3\u8df3\uff0c\u8fd9\u53ef\u80fd\u4f1a\u538b\u57ae\u4ee3\u7406\u8d44\u6e90\u3002 Type: int Default: 6000 (6 seconds) Valid Values: Importance: medium Update Mode: read-only initial.broker.registration.timeout.ms \u6700\u521d\u5411\u63a7\u5236\u5668\u4ef2\u88c1\u6ce8\u518c\u65f6\uff0c\u5728\u58f0\u660e\u5931\u8d25\u5e76\u9000\u51fa\u4ee3\u7406\u8fdb\u7a0b\u4e4b\u524d\u7b49\u5f85\u7684\u6beb\u79d2\u6570\u3002 Type: int Default: 60000 (1 minute) Valid Values: Importance: medium Update Mode: read-only inter.broker.listener.name \u7528\u4e8e\u4ee3\u7406\u4e4b\u95f4\u901a\u4fe1\u7684\u4fa6\u542c\u5668\u540d\u79f0\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4fa6\u542c\u5668\u540d\u79f0\u7531 security.inter.broker.protocol \u5b9a\u4e49\u3002\u540c\u65f6\u8bbe\u7f6e\u6b64\u5c5e\u6027\u548c security.inter.broker.protocol \u5c5e\u6027\u662f\u9519\u8bef\u7684\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only inter.broker.protocol.version \u6307\u5b9a\u5c06\u4f7f\u7528\u54ea\u4e2a\u7248\u672c\u7684\u4ee3\u7406\u95f4\u534f\u8bae\u3002 \u5728\u6240\u6709\u4ee3\u7406\u5347\u7ea7\u5230\u65b0\u7248\u672c\u540e\uff0c\u8fd9\u901a\u5e38\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u4e00\u4e9b\u6709\u6548\u503c\u7684\u793a\u4f8b\u4e3a\uff1a 0.8.0\u30010.8.1\u30010.8.1.1\u30010.8.2\u30010.8.2.0\u30010.8.2.1\u30010.9.0.0\u30010.9.0.1 \u68c0\u67e5 MetadataVersion \u4ee5\u83b7\u53d6\u5b8c\u6574\u5217\u8868\u3002 Type: string Default: 3.5-IV2 Valid Values: [0.8.0\u30010.8.1\u30010.8.2\u30010.9.0\u30010.10.0-IV0\u30010.10.0-IV1\u30010.10.1-IV0\u30010.10.1-IV1\u30010.10.1-IV2\u30010.10.2 -IV0\u30010.11.0-IV0\u30010.11.0-IV1\u30010.11.0-IV2\u30011.0-IV0\u30011.1-IV0\u30012.0-IV0\u30012.0-IV1\u30012.1-IV0\u30012.1-IV1\u30012.1-IV2\u30012.2 [0100]-IV0\u30012.2-IV1\u30012.3-IV0\u30012.3-IV1\u30012.4-IV0\u30012.4-IV1\u30012.5-IV0\u30012.6-IV0\u30012.7-IV0\u30012.7-IV1\u30012.7-IV2\u30012.8-IV0\u30012.8-IV1 , 3.0-IV0, 3.0-IV1, 3.1-IV0, 3.2-IV0, 3.3-IV0, 3.3-IV1, 3.3-IV2, 3.3-IV3, 3.4-IV0, 3.5-IV0, 3.5-IV1, 3.5-IV2] Importance: medium Update Mode: read-only log.cleaner.backoff.ms The amount of time to sleep when there are no logs to clean Type: long Default: 15000 (15 seconds) Valid Values: [0,...] Importance: medium Update Mode: cluster-wide log.cleaner.dedupe.buffer.size The total memory used for log deduplication across all cleaner threads Type: long Default: 134217728 Valid Values: Importance: medium Update Mode: cluster-wide log.cleaner.delete.retention.ms The amount of time to retain delete tombstone markers for log compacted topics. This setting also gives a bound on the time in which a consumer must complete a read if they begin from offset 0 to ensure that they get a valid snapshot of the final stage (otherwise delete tombstones may be collected before they complete their scan). Type: long Default: 86400000 (1 day) Valid Values: [0,...] Importance: medium Update Mode: cluster-wide log.cleaner.enable Enable the log cleaner process to run on the server. Should be enabled if using any topics with a cleanup.policy=compact including the internal offsets topic. If disabled those topics will not be compacted and continually grow in size. Type: boolean Default: true Valid Values: Importance: medium Update Mode: read-only log.cleaner.io.buffer.load.factor Log cleaner dedupe buffer load factor. The percentage full the dedupe buffer can become. A higher value will allow more log to be cleaned at once but will lead to more hash collisions Type: double Default: 0.9 Valid Values: Importance: medium Update Mode: cluster-wide log.cleaner.io.buffer.size The total memory used for log cleaner I/O buffers across all cleaner threads Type: int Default: 524288 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide log.cleaner.io.max.bytes.per.second The log cleaner will be throttled so that the sum of its read and write i/o will be less than this value on average Type: double Default: 1.7976931348623157E308 Valid Values: Importance: medium Update Mode: cluster-wide log.cleaner.max.compaction.lag.ms The maximum time a message will remain ineligible for compaction in the log. Only applicable for logs that are being compacted. Type: long Default: 9223372036854775807 Valid Values: [1,...] Importance: medium Update Mode: cluster-wide log.cleaner.min.cleanable.ratio The minimum ratio of dirty log to total log for a log to eligible for cleaning. If the log.cleaner.max.compaction.lag.ms or the log.cleaner.min.compaction.lag.ms configurations are also specified, then the log compactor considers the log eligible for compaction as soon as either: (i) the dirty ratio threshold has been met and the log has had dirty (uncompacted) records for at least the log.cleaner.min.compaction.lag.ms duration, or (ii) if the log has had dirty (uncompacted) records for at most the log.cleaner.max.compaction.lag.ms period. Type: double Default: 0.5 Valid Values: [0,...,1] Importance: medium Update Mode: cluster-wide log.cleaner.min.compaction.lag.ms \u6d88\u606f\u5728\u65e5\u5fd7\u4e2d\u4fdd\u6301\u672a\u538b\u7f29\u72b6\u6001\u7684\u6700\u77ed\u65f6\u95f4\u3002\u4ec5\u9002\u7528\u4e8e\u6b63\u5728\u538b\u7f29\u7684\u65e5\u5fd7\u3002 Type: long Default: 0 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide log.cleaner.threads \u7528\u4e8e\u65e5\u5fd7\u6e05\u7406\u7684\u540e\u53f0\u7ebf\u7a0b\u6570 Type: int Default: 1 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide log.cleanup.policy \u8d85\u51fa\u4fdd\u7559\u7a97\u53e3\u7684\u6bb5\u7684\u9ed8\u8ba4\u6e05\u7406\u7b56\u7565\u3002\u4ee5\u9017\u53f7\u5206\u9694\u7684\u6709\u6548\u7b56\u7565\u5217\u8868\u3002\u6709\u6548\u7684\u7b56\u7565\u662f\uff1a\u201c\u5220\u9664\u201d\u548c\u201c\u7d27\u51d1\u201d Type: list Default: delete Valid Values: [compact, delete] Importance: medium Update Mode: cluster-wide log.index.interval.bytes \u6211\u4eec\u5411\u504f\u79fb\u7d22\u5f15\u6dfb\u52a0\u6761\u76ee\u7684\u65f6\u95f4\u95f4\u9694 Type: int Default: 4096 (4 kibibytes) Valid Values: [0,...] Importance: medium Update Mode: cluster-wide log.index.size.max.bytes \u504f\u79fb\u7d22\u5f15\u7684\u6700\u5927\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09 Type: int Default: 10485760 (10 mebibytes) Valid Values: [4\uff0c...] Importance: medium Update Mode: cluster-wide log.message.format.version \u6307\u5b9a\u4ee3\u7406\u5c06\u7528\u4e8e\u5c06\u6d88\u606f\u9644\u52a0\u5230\u65e5\u5fd7\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u8be5\u503c\u5e94\u8be5\u662f\u6709\u6548\u7684 MetadataVersion\u3002\u4e00\u4e9b\u793a\u4f8b\u662f\uff1a0.8.2\u30010.9.0.0\u30010.10.0\uff0c\u8bf7\u68c0\u67e5 MetadataVersion \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002\u901a\u8fc7\u8bbe\u7f6e\u7279\u5b9a\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u7528\u6237\u53ef\u4ee5\u8bc1\u660e\u78c1\u76d8\u4e0a\u7684\u6240\u6709\u73b0\u6709\u6d88\u606f\u90fd\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u7684\u7248\u672c\u3002\u9519\u8bef\u5730\u8bbe\u7f6e\u6b64\u503c\u5c06\u5bfc\u81f4\u4f7f\u7528\u65e7\u7248\u672c\u7684\u6d88\u8d39\u8005\u5d29\u6e83\uff0c\u56e0\u4e3a\u4ed6\u4eec\u5c06\u6536\u5230\u4ed6\u4eec\u4e0d\u7406\u89e3\u7684\u683c\u5f0f\u7684\u6d88\u606f\u3002 Type: string Default: 3.0-IV1 Valid Values: [0.8.0\u30010.8.1\u30010.8.2\u30010.9.0\u30010.10.0-IV0\u30010.10.0-IV1\u30010.10.1-IV0\u30010.10.1-IV1\u30010.10.1-IV2\u30010.10.2 -IV0\u30010.11.0-IV0\u30010.11.0-IV1\u30010.11.0-IV2\u30011.0-IV0\u30011.1-IV0\u30012.0-IV0\u30012.0-IV1\u30012.1-IV0\u30012.1-IV1\u30012.1-IV2\u30012.2 [0100]-IV0\u30012.2-IV1\u30012.3-IV0\u30012.3-IV1\u30012.4-IV0\u30012.4-IV1\u30012.5-IV0\u30012.6-IV0\u30012.7-IV0\u30012.7-IV1\u30012.7-IV2\u30012.8-IV0\u30012.8-IV1 , 3.0-IV0, 3.0-IV1, 3.1-IV0, 3.2-IV0, 3.3-IV0, 3.3-IV1, 3.3-IV2, 3.3-IV3, 3.4-IV0, 3.5-IV0, 3.5-IV1, 3.5-IV2] Importance: medium Update Mode: read-only log.message.timestamp.difference.max.ms \u4ee3\u7406\u6536\u5230\u6d88\u606f\u65f6\u7684\u65f6\u95f4\u6233\u4e0e\u6d88\u606f\u4e2d\u6307\u5b9a\u7684\u65f6\u95f4\u6233\u4e4b\u95f4\u5141\u8bb8\u7684\u6700\u5927\u5dee\u5f02\u3002\u5982\u679c log.message.timestamp.type=CreateTime\uff0c\u5219\u5982\u679c\u65f6\u95f4\u6233\u5dee\u5f02\u8d85\u8fc7\u6b64\u9608\u503c\uff0c\u6d88\u606f\u5c06\u88ab\u62d2\u7edd\u3002\u5982\u679clog.message.timestamp.type=LogAppendTime\uff0c\u5219\u5ffd\u7565\u6b64\u914d\u7f6e\u3002\u5141\u8bb8\u7684\u6700\u5927\u65f6\u95f4\u6233\u5dee\u5f02\u5e94\u4e0d\u5927\u4e8elog.retention.ms\uff0c\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u9891\u7e41\u65e5\u5fd7\u6eda\u52a8\u3002 Type: long Default: 9223372036854775807 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide log.message.timestamp.type \u5b9a\u4e49\u6d88\u606f\u4e2d\u7684\u65f6\u95f4\u6233\u662f\u6d88\u606f\u521b\u5efa\u65f6\u95f4\u8fd8\u662f\u65e5\u5fd7\u8ffd\u52a0\u65f6\u95f4\u3002\u8be5\u503c\u5e94\u8be5\u662f\u201cCreateTime\u201d\u6216\u201cLogAppendTime\u201d Type: string Default: CreateTime Valid Values: [CreateTime, LogAppendTime] Importance: medium Update Mode: cluster-wide log.preallocate \u521b\u5efa\u65b0\u6bb5\u65f6\u662f\u5426\u5e94\u8be5\u9884\u5148\u5206\u914d\u6587\u4ef6\uff1f\u5982\u679c\u60a8\u5728 Windows \u4e0a\u4f7f\u7528 Kafka\uff0c\u5219\u53ef\u80fd\u9700\u8981\u5c06\u5176\u8bbe\u7f6e\u4e3a true\u3002 Type: boolean Default: false Valid Values: Importance: medium Update Mode: cluster-wide log.retention.check.interval.ms \u65e5\u5fd7\u6e05\u7406\u5668\u68c0\u67e5\u662f\u5426\u6709\u65e5\u5fd7\u7b26\u5408\u5220\u9664\u6761\u4ef6\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: long Default: 300000 (5 minutes) Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only max.connection.creation.rate \u6211\u4eec\u5728\u4efb\u4f55\u65f6\u5019\u5141\u8bb8\u4ee3\u7406\u7684\u6700\u5927\u8fde\u63a5\u521b\u5efa\u901f\u7387\u3002\u4fa6\u542c\u5668\u7ea7\u522b\u9650\u5236\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u540d\u79f0\u524d\u6dfb\u52a0\u4fa6\u542c\u5668\u524d\u7f00\u6765\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c listener.name.internal.max.connection.creation.rate \u5e94\u6839\u636e\u4ee3\u7406\u5bb9\u91cf\u914d\u7f6e\u4ee3\u7406\u8303\u56f4\u7684\u8fde\u63a5\u901f\u7387\u9650\u5236\uff0c\u800c\u5e94\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u8981\u6c42\u914d\u7f6e\u4fa6\u542c\u5668\u9650\u5236\u3002\u5982\u679c\u8fbe\u5230\u4fa6\u542c\u5668\u6216\u4ee3\u7406\u9650\u5236\uff08\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u9664\u5916\uff09\uff0c\u65b0\u8fde\u63a5\u5c06\u53d7\u5230\u9650\u5236\u3002\u4ec5\u5f53\u8fbe\u5230\u4fa6\u542c\u5668\u7ea7\u522b\u7684\u901f\u7387\u9650\u5236\u65f6\uff0c\u624d\u4f1a\u9650\u5236\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u4e0a\u7684\u8fde\u63a5\u3002 Type: int Default: 2147483647 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide max.connections \u6211\u4eec\u5728\u4efb\u4f55\u65f6\u5019\u5141\u8bb8\u4ee3\u7406\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002\u9664\u4e86\u4f7f\u7528 max.connections.per.ip \u914d\u7f6e\u7684\u4efb\u4f55\u6bcf ip \u9650\u5236\u4e4b\u5916\uff0c\u8fd8\u5e94\u7528\u6b64\u9650\u5236\u3002\u4fa6\u542c\u5668\u7ea7\u522b\u9650\u5236\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u540d\u79f0\u524d\u6dfb\u52a0\u4fa6\u542c\u5668\u524d\u7f00\u6765\u914d\u7f6e\uff0c\u4f8b\u5982 listener.name.internal.max.connections . \u4ee3\u7406\u8303\u56f4\u7684\u9650\u5236\u5e94\u6839\u636e\u4ee3\u7406\u5bb9\u91cf\u8fdb\u884c\u914d\u7f6e\uff0c\u800c\u4fa6\u542c\u5668\u9650\u5236\u5e94\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u8981\u6c42\u8fdb\u884c\u914d\u7f6e\u3002\u5982\u679c\u8fbe\u5230\u4fa6\u542c\u5668\u6216\u4ee3\u7406\u9650\u5236\uff0c\u5219\u65b0\u8fde\u63a5\u5c06\u88ab\u963b\u6b62\u3002\u5373\u4f7f\u8fbe\u5230\u4ee3\u7406\u8303\u56f4\u7684\u9650\u5236\uff0c\u4e5f\u5141\u8bb8\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u4e0a\u7684\u8fde\u63a5\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53e6\u4e00\u4e2a\u4fa6\u542c\u5668\u4e0a\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u8fde\u63a5\u5c06\u88ab\u5173\u95ed\u3002 Type: int Default: 2147483647 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide max.connections.per.ip \u6211\u4eec\u5141\u8bb8\u6765\u81ea\u6bcf\u4e2a IP \u5730\u5740\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002\u5982\u679c\u4f7f\u7528 max.connections.per.ip.overrides \u5c5e\u6027\u914d\u7f6e\u4e86\u8986\u76d6\uff0c\u5219\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a 0\u3002\u5982\u679c\u8fbe\u5230\u9650\u5236\uff0c\u6765\u81ea\u8be5 IP \u5730\u5740\u7684\u65b0\u8fde\u63a5\u5c06\u88ab\u4e22\u5f03\u3002 Type: int Default: 2147483647 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide max.connections.per.ip.overrides \u6bcf\u4e2a IP \u6216\u4e3b\u673a\u540d\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u5c06\u8986\u76d6\u9ed8\u8ba4\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002\u793a\u4f8b\u503c\u4e3a\u201chostName:100,127.0.0.1:200\u201d Type: string Default: \"\" Valid Values: Importance: medium Update Mode: cluster-wide max.incremental.fetch.session.cache.slots \u6211\u4eec\u5c06\u7ef4\u62a4\u7684\u589e\u91cf\u83b7\u53d6\u4f1a\u8bdd\u7684\u6700\u5927\u6570\u91cf\u3002 Type: int Default: 1000 Valid Values: [0,...] Importance: medium Update Mode: read-only num.partitions \u6bcf\u4e2a\u4e3b\u9898\u7684\u9ed8\u8ba4\u65e5\u5fd7\u5206\u533a\u6570 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only password.encoder.old.secret \u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u65e7\u79d8\u5bc6\u3002\u4ec5\u5f53\u66f4\u65b0\u673a\u5bc6\u65f6\u624d\u9700\u8981\u8fd9\u6837\u505a\u3002\u5982\u679c\u6307\u5b9a\uff0c\u6240\u6709\u52a8\u6001\u7f16\u7801\u7684\u5bc6\u7801\u90fd\u5c06\u4f7f\u7528\u6b64\u65e7\u5bc6\u94a5\u8fdb\u884c\u89e3\u7801\uff0c\u5e76\u5728\u4ee3\u7406\u542f\u52a8\u65f6\u4f7f\u7528password.encoder.secret \u91cd\u65b0\u7f16\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only password.encoder.secret \u7528\u4e8e\u7f16\u7801\u8be5\u4ee3\u7406\u7684\u52a8\u6001\u914d\u7f6e\u5bc6\u7801\u7684\u79d8\u5bc6\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only principal.builder.class \u5b9e\u73b0 KafkaPrincipalBuilder \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\uff0c\u7528\u4e8e\u6784\u5efa\u6388\u6743\u671f\u95f4\u4f7f\u7528\u7684 KafkaPrincipal \u5bf9\u8c61\u3002\u5982\u679c\u672a\u5b9a\u4e49\u4e3b\u4f53\u6784\u5efa\u5668\uff0c\u5219\u9ed8\u8ba4\u884c\u4e3a\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u5b89\u5168\u534f\u8bae\u3002 ssl.principal.mapping.rules \u5bf9\u4e8e SSL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u5c06\u4f7f\u7528\u5e94\u7528\u4e8e\u5ba2\u6237\u7aef\u8bc1\u4e66\u4e2d\u7684\u53ef\u5206\u8fa8\u540d\u79f0\uff08\u5982\u679c\u63d0\u4f9b\u4e86\uff09\u5b9a\u4e49\u7684\u89c4\u5219\u6d3e\u751f\u4e3b\u4f53\uff1b\u5426\u5219\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u4e3b\u4f53\u540d\u79f0\u5c06\u4e3a ANONYMOUS\u3002 sasl.kerberos.principal.to.local.rules \u5bf9\u4e8e SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u5982\u679c\u4f7f\u7528 GSSAPI\uff0c\u5c06\u4f7f\u7528\u5b9a\u4e49\u7684\u89c4\u5219\u6d3e\u751f\u4e3b\u4f53\uff0c\u5bf9\u4e8e\u5176\u4ed6\u673a\u5236\u5219\u4f7f\u7528 SASL \u8eab\u4efd\u9a8c\u8bc1 ID\u3002\u5bf9\u4e8e\u660e\u6587\uff0c\u4e3b\u4f53\u5c06\u662f\u533f\u540d\u7684\u3002 Type: class Default: org.apache.kafka.common.security.authenticator.DefaultKafkaPrincipalBuilder Valid Values: Importance: medium Update Mode: per-broker producer.purgatory.purge.interval.requests \u751f\u4ea7\u8005\u8bf7\u6c42\u70bc\u72f1\u7684\u6e05\u9664\u95f4\u9694\uff08\u4ee5\u8bf7\u6c42\u6570\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1000 Valid Values: Importance: medium Update Mode: read-only queued.max.request.bytes \u5728\u4e0d\u518d\u8bfb\u53d6\u8bf7\u6c42\u4e4b\u524d\u5141\u8bb8\u7684\u6392\u961f\u5b57\u8282\u6570 Type: long Default: -1 Valid Values: Importance: medium Update Mode: read-only replica.fetch.backoff.ms \u53d1\u751f\u83b7\u53d6\u5206\u533a\u9519\u8bef\u65f6\u4f11\u7720\u7684\u65f6\u95f4\u91cf\u3002 Type: int Default: 1000 (1 second) Valid Values: [0,...] Importance: medium Update Mode: read-only replica.fetch.max.bytes \u5c1d\u8bd5\u4e3a\u6bcf\u4e2a\u5206\u533a\u83b7\u53d6\u7684\u6d88\u606f\u5b57\u8282\u6570\u3002\u8fd9\u4e0d\u662f\u7edd\u5bf9\u6700\u5927\u503c\uff0c\u5982\u679c\u63d0\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u6279\u6b21\u5927\u4e8e\u6b64\u503c\uff0c\u4ecd\u7136\u4f1a\u8fd4\u56de\u8be5\u8bb0\u5f55\u6279\u6b21\u4ee5\u786e\u4fdd\u53ef\u4ee5\u53d6\u5f97\u8fdb\u5c55\u3002\u4ee3\u7406\u63a5\u53d7\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u662f\u901a\u8fc7 message.max.bytes \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u6216 max.message.bytes \uff08\u4e3b\u9898\u914d\u7f6e\uff09\u5b9a\u4e49\u7684\u3002 Type: int Default: 1048576 (1 mebibyte) Valid Values: [0,...] Importance: medium Update Mode: read-only replica.fetch.response.max.bytes Maximum bytes expected for the entire fetch response. Records are fetched in batches, and if the first record batch in the first non-empty partition of the fetch is larger than this value, the record batch will still be returned to ensure that progress can be made. As such, this is not an absolute maximum. The maximum record batch size accepted by the broker is defined via message.max.bytes (broker config) or max.message.bytes (topic config). Type: int Default: 10485760 (10 mebibytes) Valid Values: [0,...] Importance: medium Update Mode: read-only replica.selector.class The fully qualified class name that implements ReplicaSelector. This is used by the broker to find the preferred read replica. By default, we use an implementation that returns the leader. Type: string Default: null Valid Values: Importance: medium Update Mode: read-only reserved.broker.max.id Max number that can be used for a broker.id Type: int Default: 1000 Valid Values: [0,...] Importance: medium Update Mode: read-only sasl.client.callback.handler.class The fully qualified name of a SASL client callback handler class that implements the AuthenticateCallbackHandler interface. Type: class Default: null Valid Values: Importance: medium Update Mode: read-only sasl.enabled.mechanisms The list of SASL mechanisms enabled in the Kafka server. The list may contain any mechanism for which a security provider is available. Only GSSAPI is enabled by default. Type: list Default: GSSAPI Valid Values: Importance: medium Update Mode: per-broker sasl.jaas.config SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker sasl.kerberos.kinit.cmd Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: medium Update Mode: per-broker sasl.kerberos.min.time.before.relogin \u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: medium Update Mode: per-broker sasl.kerberos.principal.to.local.rules \u7528\u4e8e\u4ece\u4e3b\u4f53\u540d\u79f0\u6620\u5c04\u5230\u77ed\u540d\u79f0\uff08\u901a\u5e38\u662f\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u540d\uff09\u7684\u89c4\u5219\u5217\u8868\u3002\u89c4\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u8bc4\u4f30\uff0c\u5e76\u4e14\u4e0e\u4e3b\u4f53\u540d\u79f0\u5339\u914d\u7684\u7b2c\u4e00\u6761\u89c4\u5219\u7528\u4e8e\u5c06\u5176\u6620\u5c04\u5230\u77ed\u540d\u79f0\u3002\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u540e\u7eed\u89c4\u5219\u90fd\u5c06\u88ab\u5ffd\u7565\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8868\u5355\u7684\u4e3b\u4f53\u540d\u79f0 {username}/{hostname}@{REALM} \u6620\u5c04\u5230 {username} . \u6709\u5173\u683c\u5f0f\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5b89\u5168\u6388\u6743\u548c acls \u3002 KafkaPrincipalBuilder \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u914d\u7f6e\u63d0\u4f9b\u4e86 \u7684\u6269\u5c55\uff0c\u5219\u8be5\u914d\u7f6e\u5c06\u88ab\u5ffd\u7565 principal.builder.class \u3002 Type: list Default: DEFAULT Valid Values: Importance: medium Update Mode: per-broker sasl.kerberos.service.name Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker sasl.kerberos.ticket.renew.jitter \u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: medium Update Mode: per-broker sasl.kerberos.ticket.renew.window.factor \u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: medium Update Mode: per-broker sasl.login.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium Update Mode: read-only sasl.login.class \u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 \u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002 \u4f8b\u5982: listener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium Update Mode: read-only sasl.login.refresh.buffer.seconds \u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002 \u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: Importance: medium Update Mode: per-broker sasl.login.refresh.min.period.seconds \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002 \u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: Importance: medium Update Mode: per-broker sasl.login.refresh.window.factor \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: Importance: medium Update Mode: per-broker sasl.login.refresh.window.jitter \u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: Importance: medium Update Mode: per-broker sasl.mechanism.inter.broker.protocol SASL \u673a\u5236\u7528\u4e8e\u4ee3\u7406\u95f4\u901a\u4fe1\u3002 \u9ed8\u8ba4\u4e3a GSSAPI\u3002 Type: string Default: GSSAPI Valid Values: Importance: medium Update Mode: per-broker sasl.oauthbearer.jwks.endpoint.url \u53ef\u4ee5\u4ece\u4e2d\u68c0\u7d22\u63d0\u4f9b\u5546\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u7684 OAuth/OIDC \u63d0\u4f9b\u5546 URL\u3002 URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002 \u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002 \u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002 \u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002 \u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002 \u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002 \u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT \u5e76\u4e14\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only sasl.oauthbearer.token.endpoint.url OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002 \u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002 \u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only sasl.server.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002 \u4f8b\u5982: listener.name.sasl_ssl.plain.sasl.server.callback.handler.class=com.example.CustomPlainCallbackHandler. Type: class Default: null Valid Values: Importance: medium Update Mode: read-only sasl.server.max.receive.size \u521d\u59cb SASL \u8eab\u4efd\u9a8c\u8bc1\u4e4b\u524d\u548c\u671f\u95f4\u5141\u8bb8\u7684\u6700\u5927\u63a5\u6536\u5927\u5c0f\u3002\u9ed8\u8ba4\u63a5\u6536\u5927\u5c0f\u4e3a 512KB\u3002GSSAPI \u5c06\u8bf7\u6c42\u9650\u5236\u4e3a 64K\uff0c\u4f46\u5bf9\u4e8e\u81ea\u5b9a\u4e49 SASL \u673a\u5236\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6211\u4eec\u5141\u8bb8\u6700\u591a 512KB\u3002\u5b9e\u9645\u4e0a\uff0cPLAIN\u3001SCRAM \u548c OAUTH \u673a\u5236\u53ef\u4ee5\u4f7f\u7528\u66f4\u5c0f\u7684\u9650\u5236\u3002 Type: int Default: 524288 Valid Values: Importance: medium Update Mode: read-only security.inter.broker.protocol \u7528\u4e8ebroker\u4e4b\u95f4\u901a\u4fe1\u7684\u5b89\u5168\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002\u540c\u65f6\u8bbe\u7f6e this \u548c inter.broker.listener.name \u5c5e\u6027\u662f\u9519\u8bef\u7684\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium Update Mode: read-only socket.connection.setup.timeout.max.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium Update Mode: read-only socket.connection.setup.timeout.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium Update Mode: read-only socket.listen.backlog.size \u5957\u63a5\u5b57\u4e0a\u6302\u8d77\u7684\u8fde\u63a5\u7684\u6700\u5927\u6570\u91cf\u3002 \u5728Linux\u4e2d\uff0c\u60a8\u53ef\u80fd\u8fd8\u9700\u8981\u76f8\u5e94\u914d\u7f6e somaxconn \u548c tcp_max_syn_backlog \u5185\u6838\u53c2\u6570\u624d\u80fd\u4f7f\u914d\u7f6e\u751f\u6548\u3002 Type: int Default: 50 Valid Values: [1,...] Importance: medium Update Mode: read-only ssl.cipher.suites \u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002 \u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: \"\" Valid Values: Importance: medium Update Mode: per-broker ssl.client.auth \u914d\u7f6e kafka \u4ee3\u7406\u6765\u8bf7\u6c42\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 \u4ee5\u4e0b\u8bbe\u7f6e\u662f\u5e38\u89c1\u7684\uff1a ssl.client.auth=required \u5982\u679c\u8bbe\u7f6e\u4e3a\u5fc5\u9700\uff0c\u5219\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 ssl.client.auth=requested \u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u662f\u53ef\u9009\u7684\u3002 \u4e0e\u5fc5\u9700\u7684\u4e0d\u540c\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u9009\u9879\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u9009\u62e9\u4e0d\u63d0\u4f9b\u6709\u5173\u5176\u81ea\u8eab\u7684\u8eab\u4efd\u9a8c\u8bc1\u4fe1\u606f ssl.client.auth=none \u8fd9\u610f\u5473\u7740\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: none Valid Values: [required, requested, none] Importance: medium Update Mode: per-broker ssl.enabled.protocols \u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002 \u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002 \u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002 \u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002 \u53e6\u8bf7\u53c2\u9605 ssl.protocol \u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium Update Mode: per-broker ssl.key.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.keymanager.algorithm \u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: medium Update Mode: per-broker ssl.keystore.certificate.chain \u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.keystore.key \u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.keystore.location \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.keystore.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.keystore.type \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium Update Mode: per-broker ssl.protocol \u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002 \u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002 \u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002 \u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002 \u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002 \u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002 \u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium Update Mode: per-broker ssl.provider \u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002 \u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.trustmanager.algorithm \u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002 \u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: medium Update Mode: per-broker ssl.truststore.certificates \u91c7\u7528 ssl.truststore.type \u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002 \u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.truststore.location \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.truststore.password \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002 \u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002 PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker ssl.truststore.type \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002 \u9ed8\u8ba4 ssl.engine.factory.class \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS, PKCS12, PEM]. Type: string Default: JKS Valid Values: Importance: medium Update Mode: per-broker zookeeper.clientCnxnSocket \u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\uff0c\u901a\u5e38\u8bbe\u7f6e\u4e3a org.apache.zookeeper.ClientCnxnSocketNetty \u3002 \u8986\u76d6\u901a\u8fc7\u540c\u540d zookeeper.clientCnxnSocket \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only zookeeper.ssl.client.enable \u8bbe\u7f6e\u5ba2\u6237\u7aef\u5728\u8fde\u63a5\u5230 ZooKeeper \u65f6\u4f7f\u7528 TLS\u3002\u663e\u5f0f\u503c\u4f1a\u8986\u76d6\u901a\u8fc7 zookeeper.client.secure \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u503c\uff08\u8bf7\u6ce8\u610f\u4e0d\u540c\u7684\u540d\u79f0\uff09\u3002\u5982\u679c\u4e24\u8005\u5747\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u4e3a false\uff1b\u5982\u679c\u4e3a true\uff0c zookeeper.clientCnxnSocket \u5219\u5fc5\u987b\u8bbe\u7f6e\uff08\u901a\u5e38\u8bbe\u7f6e\u4e3a org.apache.zookeeper.ClientCnxnSocketNetty \uff09\uff1b\u8981\u8bbe\u7f6e\u7684\u5176\u4ed6\u503c\u53ef\u80fd\u5305\u62ec zookeeper.ssl.cipher.suites , zookeeper.ssl.crl.enable , zookeeper.ssl.enabled.protocols , zookeeper.ssl.endpoint.identification.algorithm , zookeeper.ssl.keystore.location , zookeeper.ssl.keystore.password , zookeeper.ssl.keystore.type , zookeeper.ssl.ocsp.enable , zookeeper.ssl.protocol , zookeeper.ssl.truststore.location , zookeeper.ssl.truststore.password , zookeeper.ssl.truststore.type Type: boolean Default: false Valid Values: Importance: medium Update Mode: read-only zookeeper.ssl.keystore.location \u4f7f\u7528\u901a\u8fc7 TLS \u8fde\u63a5\u5230 ZooKeeper \u7684\u5ba2\u6237\u7aef\u8bc1\u4e66\u65f6\u7684\u5bc6\u94a5\u5e93\u4f4d\u7f6e\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.keyStore.location \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only zookeeper.ssl.keystore.password \u4f7f\u7528\u901a\u8fc7 TLS \u8fde\u63a5\u5230 ZooKeeper \u7684\u5ba2\u6237\u7aef\u8bc1\u4e66\u65f6\u7684\u5bc6\u94a5\u5e93\u5bc6\u7801\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.keyStore.password \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u8bf7\u6ce8\u610f\uff0cZooKeeper \u4e0d\u652f\u6301\u4e0e keystore \u5bc6\u7801\u4e0d\u540c\u7684\u5bc6\u94a5\u5bc6\u7801\uff0c\u56e0\u6b64\u8bf7\u52a1\u5fc5\u5c06 keystore \u4e2d\u7684\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e keystore \u5bc6\u7801\u76f8\u540c\uff1b\u5426\u5219\u4e0e Zookeeper \u7684\u8fde\u63a5\u5c1d\u8bd5\u5c06\u5931\u8d25\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only zookeeper.ssl.keystore.type \u4f7f\u7528\u901a\u8fc7 TLS \u8fde\u63a5\u5230 ZooKeeper \u7684\u5ba2\u6237\u7aef\u8bc1\u4e66\u65f6\u7684\u5bc6\u94a5\u5e93\u7c7b\u578b\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.keyStore.type \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u5c06\u6839\u636e\u5bc6\u94a5\u5e93\u7684\u6587\u4ef6\u6269\u5c55\u540d\u81ea\u52a8\u68c0\u6d4b\u7c7b\u578b\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only zookeeper.ssl.truststore.location \u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\u7684\u4fe1\u4efb\u5e93\u4f4d\u7f6e\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.trustStore.location \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only zookeeper.ssl.truststore.password \u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\u7684\u4fe1\u4efb\u5e93\u5bc6\u7801\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.trustStore.password \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only zookeeper.ssl.truststore.type \u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\u7684\u4fe1\u4efb\u5e93\u7c7b\u578b\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.trustStore.type \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u5c06\u6839\u636e\u4fe1\u4efb\u5e93\u7684\u6587\u4ef6\u6269\u5c55\u540d\u81ea\u52a8\u68c0\u6d4b\u7c7b\u578b\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only alter.config.policy.class.name \u5e94\u7528\u4e8e\u9a8c\u8bc1\u7684\u66f4\u6539\u914d\u7f6e\u7b56\u7565\u7c7b\u3002\u8be5\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.server.policy.AlterConfigPolicy \u63a5\u53e3\u3002 Type: class Default: null Valid Values: Importance: low Update Mode: read-only alter.log.dirs.replication.quota.window.num \u4e3a\u66f4\u6539log.dirs\u590d\u5236\u914d\u989d\u800c\u4fdd\u7559\u5728\u5185\u5b58\u4e2d\u7684\u6837\u672c\u6570 Type: int Default: 11 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only alter.log.dirs.replication.quota.window.size.seconds alter log dirs \u590d\u5236\u914d\u989d\u7684\u6bcf\u4e2a\u6837\u672c\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only authorizer.class.name \u5b9e\u73b0\u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0 org.apache.kafka.server.authorizer.Authorizer \uff0c\u4ee3\u7406\u4f7f\u7528\u5b83\u6765\u8fdb\u884c\u6388\u6743\u3002 Type: string Default: \"\" Valid Values: non-null string Importance: low Update Mode: read-only auto.jmx.reporter \u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low Update Mode: read-only client.quota.callback.class \u5b9e\u73b0 ClientQuotaCallback \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\uff0c\u7528\u4e8e\u786e\u5b9a\u5e94\u7528\u4e8e\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u914d\u989d\u9650\u5236\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u7684 \u548c \u914d\u989d\u3002\u5bf9\u4e8e\u4efb\u4f55\u7ed9\u5b9a\u7684\u8bf7\u6c42\uff0c\u5c06\u5e94\u7528\u4e0e\u4f1a\u8bdd\u7684\u7528\u6237\u4e3b\u4f53\u548c\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef ID \u5339\u914d\u7684\u6700\u5177\u4f53\u7684\u914d\u989d\u3002 Type: class Default: null Valid Values: Importance: low Update Mode: read-only connection.failed.authentication.delay.ms \u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u65f6\u7684\u8fde\u63a5\u5173\u95ed\u5ef6\u8fdf\uff1a\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u65f6\u8fde\u63a5\u5173\u95ed\u5c06\u5ef6\u8fdf\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5fc5\u987b\u5c06\u5176\u914d\u7f6e\u4e3a\u5c0f\u4e8econnections.max.idle.ms\uff0c\u4ee5\u9632\u6b62\u8fde\u63a5\u8d85\u65f6\u3002 Type: int Default: 100 Valid Values: [0,...] Importance: low Update Mode: read-only controller.quorum.retry.backoff.ms \u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: int Default: 20 Valid Values: Importance: low Update Mode: read-only controller.quota.window.num \u63a7\u5236\u5668\u7a81\u53d8\u914d\u989d\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u7684\u6837\u672c\u6570\u91cf Type: int Default: 11 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only controller.quota.window.size.seconds \u63a7\u5236\u5668\u7a81\u53d8\u914d\u989d\u7684\u6bcf\u4e2a\u6837\u672c\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only create.topic.policy.class.name \u521b\u5efa\u5e94\u7528\u4e8e\u9a8c\u8bc1\u7684\u4e3b\u9898\u7b56\u7565\u7c7b\u3002\u8be5\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.server.policy.CreateTopicPolicy \u63a5\u53e3\u3002 Type: class Default: null Valid Values: Importance: low Update Mode: read-only delegate.token.expiry.check.interval.ms \u626b\u63cf\u95f4\u9694\u4ee5\u5220\u9664\u8fc7\u671f\u7684\u59d4\u6258\u4ee4\u724c\u3002 Type: long Default: 3600000 (1 hour) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only kafka.metrics.polling.interval.secs \u53ef\u5728 kafka.metrics.reporters \u5b9e\u73b0\u4e2d\u4f7f\u7528\u7684\u6307\u6807\u8f6e\u8be2\u95f4\u9694\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 Type: int Default: 10 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only kafka.metrics.reporters \u7528\u4f5c Yammer \u6307\u6807\u81ea\u5b9a\u4e49\u62a5\u544a\u5668\u7684\u7c7b\u5217\u8868\u3002\u8bb0\u8005\u8981\u8df5\u884c kafka.metrics.KafkaMetricsReporter \u7279\u8272\u3002\u5982\u679c\u5ba2\u6237\u7aef\u60f3\u8981\u5728\u81ea\u5b9a\u4e49\u62a5\u544a\u5668\u4e0a\u516c\u5f00 JMX \u64cd\u4f5c\uff0c\u5219\u81ea\u5b9a\u4e49\u62a5\u544a\u5668\u9700\u8981\u53e6\u5916\u5b9e\u73b0\u6269\u5c55\u7279\u5f81\u7684 MBean \u7279\u5f81\uff0c kafka.metrics.KafkaMetricsReporterMBean \u4ee5\u4fbf\u6ce8\u518c\u7684 MBean \u7b26\u5408\u6807\u51c6 MBean \u7ea6\u5b9a\u3002 Type: list Default: \"\" Valid Values: Importance: low Update Mode: read-only listener.security.protocol.map \u4fa6\u542c\u5668\u540d\u79f0\u548c\u5b89\u5168\u534f\u8bae\u4e4b\u95f4\u7684\u6620\u5c04\u3002\u5fc5\u987b\u5b9a\u4e49\u8fd9\u4e00\u70b9\uff0c\u4ee5\u4fbf\u540c\u4e00\u5b89\u5168\u534f\u8bae\u53ef\u5728\u591a\u4e2a\u7aef\u53e3\u6216 IP \u4e2d\u4f7f\u7528\u3002\u4f8b\u5982\uff0c\u5373\u4f7f\u5185\u90e8\u548c\u5916\u90e8\u6d41\u91cf\u90fd\u9700\u8981 SSL\uff0c\u4e5f\u53ef\u4ee5\u5c06\u4e24\u8005\u5206\u5f00\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u7528\u6237\u53ef\u4ee5\u5b9a\u4e49\u540d\u79f0\u4e3a INTERNAL \u548c EXTERNAL \u7684\u4fa6\u542c\u5668\uff0c\u5e76\u5c06\u6b64\u5c5e\u6027\u5b9a\u4e49\u4e3a\uff1a\u201cINTERNAL:SSL,EXTERNAL:SSL\u201d\u3002\u5982\u56fe\u6240\u793a\uff0c\u952e\u548c\u503c\u7531\u5192\u53f7\u5206\u9694\uff0c\u6620\u5c04\u6761\u76ee\u7531\u9017\u53f7\u5206\u9694\u3002\u6bcf\u4e2a\u4fa6\u542c\u5668\u540d\u79f0\u53ea\u80fd\u5728\u5730\u56fe\u4e2d\u51fa\u73b0\u4e00\u6b21\u3002\u901a\u8fc7\u5411\u914d\u7f6e\u540d\u79f0\u6dfb\u52a0\u89c4\u8303\u5316\u524d\u7f00\uff08\u4fa6\u542c\u5668\u540d\u79f0\u5c0f\u5199\uff09\uff0c\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u4fa6\u542c\u5668\u914d\u7f6e\u4e0d\u540c\u7684\u5b89\u5168\u6027\uff08SSL \u548c SASL\uff09\u8bbe\u7f6e\u3002\u4f8b\u5982\uff0c\u8981\u4e3a INTERNAL \u4fa6\u542c\u5668\u8bbe\u7f6e\u4e0d\u540c\u7684\u5bc6\u94a5\u5e93\uff0c\u8bf7\u4f7f\u7528\u540d\u79f0\u4e3a listener.name.internal.ssl.keystore.location \u5c06\u88ab\u8bbe\u7f6e\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u4fa6\u542c\u5668\u540d\u79f0\u7684\u914d\u7f6e\uff0c\u8be5\u914d\u7f6e\u5c06\u56de\u9000\u5230\u901a\u7528\u914d\u7f6e\uff08\u5373 ssl.keystore.location \uff09\u3002 controller.listener.names \u8bf7\u6ce8\u610f\uff0c\u5728 KRaft \u4e2d\uff0c\u5982\u679c\u672a\u63d0\u4f9b\u663e\u5f0f\u6620\u5c04\u4e14\u672a\u4f7f\u7528\u5176\u4ed6\u5b89\u5168\u534f\u8bae\uff0c\u5219\u5047\u5b9a\u4ece \u5b9a\u4e49\u7684\u4fa6\u542c\u5668\u540d\u79f0\u5230 PLAINTEXT \u7684\u9ed8\u8ba4\u6620\u5c04\u3002 Type: string Default: PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL Valid Values: Importance: low Update Mode: per-broker log.message.downconversion.enable \u8be5\u914d\u7f6e\u63a7\u5236\u662f\u5426\u542f\u7528\u6d88\u606f\u683c\u5f0f\u4e0b\u8f6c\u6362\u4ee5\u6ee1\u8db3\u6d88\u8d39\u8bf7\u6c42\u3002\u5f53\u8bbe\u7f6e\u4e3a \u65f6 false \uff0c\u4ee3\u7406\u5c06\u4e0d\u4f1a\u4e3a\u671f\u671b\u65e7\u6d88\u606f\u683c\u5f0f\u7684\u6d88\u8d39\u8005\u6267\u884c\u5411\u4e0b\u8f6c\u6362\u3002 UNSUPPORTED_VERSION \u5bf9\u4e8e\u6765\u81ea\u6b64\u7c7b\u8f83\u65e7\u5ba2\u6237\u7aef\u7684\u6d88\u8d39\u8bf7\u6c42\uff0c\u4ee3\u7406\u4f1a\u8fd4\u56de\u9519\u8bef\u54cd\u5e94\u3002\u6b64\u914d\u7f6e\u4e0d\u9002\u7528\u4e8e\u590d\u5236\u5230\u5173\u6ce8\u8005\u53ef\u80fd\u9700\u8981\u7684\u4efb\u4f55\u6d88\u606f\u683c\u5f0f\u8f6c\u6362\u3002 Type: boolean Default: true Valid Values: Importance: low Update Mode: cluster-wide metadata.max.idle.interval.ms \u6b64\u914d\u7f6e\u63a7\u5236\u6d3b\u52a8\u63a7\u5236\u5668\u5e94\u5c06\u65e0\u64cd\u4f5c\u8bb0\u5f55\u5199\u5165\u5143\u6570\u636e\u5206\u533a\u7684\u9891\u7387\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u65e0\u64cd\u4f5c\u8bb0\u5f55\u4e0d\u4f1a\u9644\u52a0\u5230\u5143\u6570\u636e\u5206\u533a\u3002\u9ed8\u8ba4\u503c\u4e3a 500 Type: int Default: 500 Valid Values: [0,...] Importance: low Update Mode: read-only metric.reporters \u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low Update Mode: cluster-wide metrics.num.samples \u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only metrics.recording.level \u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: Importance: low Update Mode: read-only metrics.sample.window.ms \u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only password.encoder.password.algorithm \u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u5bc6\u7801\u7b97\u6cd5\u3002 Type: string Default: AES/CBC/PKCS5\u586b\u5145 Valid Values: Importance: low Update Mode: read-only password.encoder.iterations \u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u8fed\u4ee3\u8ba1\u6570\u3002 Type: int Default: 4096 Valid Values: [1024\uff0c...] Importance: low Update Mode: read-only password.encoder.key.length \u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u5bc6\u94a5\u957f\u5ea6\u3002 Type: int Default: 128 Valid Values: [8\uff0c...] Importance: low Update Mode: read-only password.encoder.keyfactory.algorithm SecretKeyFactory \u7b97\u6cd5\u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u3002\u5982\u679c\u53ef\u7528\uff0c\u9ed8\u8ba4\u503c\u4e3a PBKDF2WithHmacSHA512\uff0c\u5426\u5219\u9ed8\u8ba4\u503c\u4e3a PBKDF2WithHmacSHA1\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: read-only producer.id.expiration.ms \u4e3b\u9898\u5206\u533a\u9886\u5bfc\u8005\u5728\u751f\u4ea7\u8005 ID \u8fc7\u671f\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5f53\u4e0e\u5176\u5173\u8054\u7684\u4ea4\u6613\u4ecd\u5728\u8fdb\u884c\u65f6\uff0c\u751f\u4ea7\u8005 ID \u4e0d\u4f1a\u8fc7\u671f\u3002 \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u7531\u4e8e\u4e3b\u9898\u7684\u4fdd\u7559\u8bbe\u7f6e\u800c\u5220\u9664\u4e86\u751f\u4ea7\u8005 ID \u7684\u6700\u540e\u4e00\u6b21\u5199\u5165\uff0c\u5219\u751f\u4ea7\u8005 ID \u53ef\u80fd\u4f1a\u66f4\u5feb\u8fc7\u671f\u3002 \u5c06\u6b64\u503c\u8bbe\u7f6e\u4e3a\u4e0e delivery.timeout.ms \u76f8\u540c\u6216\u66f4\u9ad8\u53ef\u4ee5\u5e2e\u52a9\u9632\u6b62\u91cd\u8bd5\u671f\u95f4\u8fc7\u671f\u5e76\u9632\u6b62\u6d88\u606f\u91cd\u590d\uff0c\u4f46\u9ed8\u8ba4\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u662f\u5408\u7406\u7684\u3002 Type: int Default: 86400000 (1 day) Valid Values: [1,...] Importance: low Update Mode: cluster-wide quota.window.num \u4e3a\u5ba2\u6237\u7aef\u914d\u989d\u4fdd\u7559\u5728\u5185\u5b58\u4e2d\u7684\u6837\u672c\u6570\u91cf Type: int Default: 11 Valid Values: [1,...] Importance: low Update Mode: read-only quota.window.size.seconds \u5ba2\u6237\u914d\u989d\u6bcf\u4e2a\u6837\u672c\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1,...] Importance: low Update Mode: read-only replication.quota.window.num \u4e3a\u4e86\u590d\u5236\u914d\u989d\u800c\u4fdd\u7559\u5728\u5185\u5b58\u4e2d\u7684\u6837\u672c\u6570\u91cf Type: int Default: 11 Valid Values: [1,...] Importance: low Update Mode: read-only replication.quota.window.size.seconds \u6bcf\u4e2a\u6837\u672c\u590d\u5236\u914d\u989d\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only sasl.login.connect.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low Update Mode: read-only sasl.login.read.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low Update Mode: read-only sasl.login.retry.backoff.max.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low Update Mode: read-only sasl.login.retry.backoff.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.clock.skew.seconds \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.expected.audience \u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.expected.issuer \u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.jwks.endpoint.refresh.ms \u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms \u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.scope.claim.name \u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low Update Mode: read-only sasl.oauthbearer.sub.claim.name \u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low Update Mode: read-only security.providers \u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: read-only ssl.endpoint.identification.algorithm \u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low Update Mode: per-broker ssl.engine.factory.class org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low Update Mode: per-broker ssl.principal.mapping.rules \u7528\u4e8e\u4ece\u5ba2\u6237\u7aef\u8bc1\u4e66\u7684\u4e13\u6709\u540d\u79f0\u6620\u5c04\u5230\u77ed\u540d\u79f0\u7684\u89c4\u5219\u5217\u8868\u3002\u89c4\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u8bc4\u4f30\uff0c\u5e76\u4e14\u4e0e\u4e3b\u4f53\u540d\u79f0\u5339\u914d\u7684\u7b2c\u4e00\u6761\u89c4\u5219\u7528\u4e8e\u5c06\u5176\u6620\u5c04\u5230\u77ed\u540d\u79f0\u3002\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u540e\u7eed\u89c4\u5219\u90fd\u5c06\u88ab\u5ffd\u7565\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cX.500 \u8bc1\u4e66\u7684\u4e13\u6709\u540d\u79f0\u5c06\u662f\u4e3b\u4f53\u3002\u6709\u5173\u683c\u5f0f\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5b89\u5168\u6388\u6743\u548c acls \u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u914d\u7f6e\u63d0\u4f9b\u4e86 KafkaPrincipalBuilder \u7684\u6269\u5c55\uff0c\u5219\u6b64\u914d\u7f6e\u5c06\u88ab\u5ffd\u7565 principal.builder.class \u3002 Type: string Default: DEFAULT Valid Values: Importance: low Update Mode: read-only ssl.secure.random.implementation \u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: per-broker transaction.abort.timed.out.transaction.cleanup.interval.ms \u56de\u6eda\u8d85\u65f6\u4e8b\u52a1\u7684\u65f6\u95f4\u95f4\u9694 Type: int Default: 10000 (10 seconds) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only transaction.remove.expired.transaction.cleanup.interval.ms \u5220\u9664\u56e0\u8fc7\u671f\u800c\u8fc7\u671f\u7684\u4ea4\u6613\u7684\u65f6\u95f4 transactional.id.expiration.ms \u95f4\u9694 Type: int Default: 3600000 (1 hour) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only zookeeper.ssl.cipher.suites \u6307\u5b9a\u8981\u5728 ZooKeeper TLS \u534f\u5546 (csv) \u4e2d\u4f7f\u7528\u7684\u5df2\u542f\u7528\u5bc6\u7801\u5957\u4ef6\u3002\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c zookeeper.ssl.ciphersuites \uff08\u8bf7\u6ce8\u610f\u5355\u4e2a\u8bcd\u201c\u5bc6\u7801\u5957\u4ef6\u201d\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u542f\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u7531\u6b63\u5728\u4f7f\u7528\u7684 Java \u8fd0\u884c\u65f6\u786e\u5b9a\u3002 Type: list Default: null Valid Values: Importance: low Update Mode: read-only zookeeper.ssl.crl.enable \u6307\u5b9a\u662f\u5426\u5728 ZooKeeper TLS \u534f\u8bae\u4e2d\u542f\u7528\u8bc1\u4e66\u540a\u9500\u5217\u8868\u3002\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c zookeeper.ssl.crl \uff08\u6ce8\u610f\u8f83\u77ed\u7684\u540d\u79f0\uff09\u3002 Type: boolean Default: false Valid Values: Importance: low Update Mode: read-only zookeeper.ssl.enabled.protocol \u6307\u5b9a ZooKeeper TLS \u534f\u5546 (csv) \u4e2d\u542f\u7528\u7684\u534f\u8bae\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.enabledProtocols \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u542f\u7528\u7684\u534f\u8bae\u5c06\u662f\u914d\u7f6e\u5c5e\u6027\u7684\u503c zookeeper.ssl.protocol \u3002 Type: list Default: null Valid Values: Importance: low Update Mode: read-only zookeeper.ssl.endpoint.identification.algorithm \u6307\u5b9a\u662f\u5426\u5728 ZooKeeper TLS \u534f\u5546\u8fc7\u7a0b\u4e2d\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u201chttps\u201d\u8868\u793a\u542f\u7528 ZooKeeper \u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u663e\u5f0f\u7a7a\u767d\u503c\u8868\u793a\u7981\u7528\u5b83\uff08\u4ec5\u5efa\u8bae\u51fa\u4e8e\u6d4b\u8bd5\u76ee\u7684\u7981\u7528\u5b83\uff09\u3002\u663e\u5f0f\u503c\u4f1a\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u201ctrue\u201d\u6216\u201cfalse\u201d\u503c zookeeper.ssl.hostnameVerification \uff08\u8bf7\u6ce8\u610f\u4e0d\u540c\u7684\u540d\u79f0\u548c\u503c\uff1btrue \u8868\u793a https\uff0cfalse \u8868\u793a\u7a7a\u767d\uff09\u3002 Type: string Default: HTTPS Valid Values: Importance: low Update Mode: read-only zookeeper.ssl.ocsp.enable \u6307\u5b9a\u662f\u5426\u5728 ZooKeeper TLS \u534f\u8bae\u4e2d\u542f\u7528\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u534f\u8bae\u3002\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c zookeeper.ssl.ocsp \uff08\u6ce8\u610f\u8f83\u77ed\u7684\u540d\u79f0\uff09\u3002 Type: boolean Default: false Valid Values: Importance: low Update Mode: read-only zookeeper.ssl.protocol \u6307\u5b9a ZooKeeper TLS \u534f\u5546\u4e2d\u4f7f\u7528\u7684\u534f\u8bae\u3002\u663e\u5f0f\u503c\u4f1a\u8986\u76d6\u901a\u8fc7\u540c\u540d zookeeper.ssl.protocol \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u503c\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: low Update Mode: read-only \u6709\u5173\u4ee3\u7406\u914d\u7f6e\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728 scala \u7c7b\u4e2d\u627e\u5230 kafka.server.KafkaConfig \u3002 3.1.1 \u66f4\u65b0\u4ee3\u7406\u914d\u7f6e \u4ece Kafka 1.1 \u7248\u5f00\u59cb\uff0c\u4e00\u4e9b\u4ee3\u7406\u914d\u7f6e\u53ef\u4ee5\u5728\u4e0d\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\u66f4\u65b0\u3002\u6bcf\u4e2a Broker \u914d\u7f6e\u7684\u66f4\u65b0\u6a21\u5f0f \u8bf7\u53c2\u89c1 Broker Configs Dynamic Update Mode \u680f\u76ee\u3002 read-only \uff1a\u9700\u8981\u91cd\u542f\u4ee3\u7406\u624d\u80fd\u66f4\u65b0 per-broker \uff1a\u53ef\u80fd\u4f1a\u9488\u5bf9\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u52a8\u6001\u66f4\u65b0 cluster-wide \uff1a\u53ef\u4ee5\u4f5c\u4e3a\u96c6\u7fa4\u8303\u56f4\u5185\u7684\u9ed8\u8ba4\u503c\u52a8\u6001\u66f4\u65b0\u3002\u4e5f\u53ef\u4ee5\u66f4\u65b0\u4e3a\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u7684\u6d4b\u8bd5\u503c\u3002 \u8981\u66f4\u6539\u4ee3\u7406 ID 0 \u7684\u5f53\u524d\u4ee3\u7406\u914d\u7f6e\uff08\u4f8b\u5982\uff0c\u65e5\u5fd7\u6e05\u7406\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --alter --add-config log.cleaner.threads=2 \u63cf\u8ff0\u4ee3\u7406 ID 0 \u7684\u5f53\u524d\u52a8\u6001\u4ee3\u7406\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --describe \u8981\u5220\u9664\u914d\u7f6e\u8986\u76d6\u5e76\u6062\u590d\u4e3a\u4ee3\u7406 ID 0 \u7684\u9759\u6001\u914d\u7f6e\u6216\u9ed8\u8ba4\u503c\uff08\u4f8b\u5982\uff0c\u65e5\u5fd7\u6e05\u7406\u5668\u7ebf\u7a0b\u6570\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --alter --delete-config log.cleaner.threads \u67d0\u4e9b\u914d\u7f6e\u53ef\u4ee5\u914d\u7f6e\u4e3a\u96c6\u7fa4\u8303\u56f4\u5185\u7684\u9ed8\u8ba4\u503c\uff0c\u4ee5\u5728\u6574\u4e2a\u96c6\u7fa4\u4e2d\u4fdd\u6301\u4e00\u81f4\u7684\u503c\u3002\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u90fd\u4f1a\u5904\u7406\u96c6\u7fa4\u9ed8\u8ba4\u66f4\u65b0\u3002\u4f8b\u5982\uff0c\u8981\u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684\u65e5\u5fd7\u6e05\u7406\u7ebf\u7a0b\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-default --alter --add-config log.cleaner.threads=2 \u63cf\u8ff0\u5f53\u524d\u914d\u7f6e\u7684\u52a8\u6001\u96c6\u7fa4\u8303\u56f4\u9ed8\u8ba4\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-default --describe \u6240\u6709\u53ef\u5728\u96c6\u7fa4\u7ea7\u522b\u914d\u7f6e\u7684\u914d\u7f6e\u4e5f\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u914d\u7f6e\uff08\u4f8b\u5982\u7528\u4e8e\u6d4b\u8bd5\uff09\u3002\u5982\u679c\u5728\u4e0d\u540c\u7ea7\u522b\u5b9a\u4e49\u914d\u7f6e\u503c\uff0c\u5219\u4f7f\u7528\u4ee5\u4e0b\u4f18\u5148\u987a\u5e8f\uff1a \u5b58\u50a8\u5728 ZooKeeper \u4e2d\u7684\u52a8\u6001\u6bcf\u4e2a\u4ee3\u7406\u914d\u7f6e \u5b58\u50a8\u5728 ZooKeeper \u4e2d\u7684\u52a8\u6001\u96c6\u7fa4\u8303\u56f4\u9ed8\u8ba4\u914d\u7f6e \u9759\u6001\u4ee3\u7406\u914d\u7f6e\u6765\u81ea server.properties Kafka \u9ed8\u8ba4\uff0c\u8bf7\u53c2\u9605 \u4ee3\u7406\u914d\u7f6e \u52a8\u6001\u66f4\u65b0\u5bc6\u7801\u914d\u7f6e \u52a8\u6001\u66f4\u65b0\u7684\u5bc6\u7801\u914d\u7f6e\u503c\u5728\u5b58\u50a8\u5230 ZooKeeper \u4e4b\u524d\u4f1a\u88ab\u52a0\u5bc6\u3002 password.encoder.secret \u5fc5\u987b\u914d\u7f6e\u4ee3\u7406\u914d\u7f6e server.properties \u624d\u80fd\u542f\u7528\u5bc6\u7801\u914d\u7f6e\u7684\u52a8\u6001\u66f4\u65b0\u3002\u4e0d\u540c\u7ecf\u7eaa\u5546\u7684\u79d8\u5bc6\u53ef\u80fd\u4e0d\u540c\u3002 \u7528\u4e8e\u5bc6\u7801\u7f16\u7801\u7684\u79d8\u5bc6\u53ef\u4ee5\u968f\u7740\u4ee3\u7406\u7684\u6eda\u52a8\u91cd\u542f\u800c\u8f6e\u6362\u3002\u5f53\u524d\u5728 ZooKeeper \u4e2d\u7528\u4e8e\u7f16\u7801\u5bc6\u7801\u7684\u65e7\u5bc6\u94a5\u5fc5\u987b\u5728\u9759\u6001\u4ee3\u7406\u914d\u7f6e\u4e2d\u63d0\u4f9b password.encoder.old.secret \uff0c\u65b0\u5bc6\u94a5\u5fc5\u987b\u5728 password.encoder.secret . \u5f53\u4ee3\u7406\u542f\u52a8\u65f6\uff0cZooKeeper \u4e2d\u5b58\u50a8\u7684\u6240\u6709\u52a8\u6001\u5bc6\u7801\u914d\u7f6e\u90fd\u5c06\u4f7f\u7528\u65b0\u5bc6\u94a5\u91cd\u65b0\u7f16\u7801\u3002 kafka-configs.sh \u5728 Kafka 1.1.x \u4e2d\uff0c\u5373\u4f7f\u5bc6\u7801\u914d\u7f6e\u672a\u66f4\u6539\uff0c\u5728\u66f4\u65b0\u914d\u7f6e\u65f6\u4e5f\u5fc5\u987b\u5728\u6bcf\u4e2a\u66f4\u6539\u8bf7\u6c42\u4e2d\u63d0\u4f9b\u6240\u6709\u52a8\u6001\u66f4\u65b0\u7684\u5bc6\u7801\u914d\u7f6e\u3002\u6b64\u9650\u5236\u5c06\u5728\u672a\u6765\u7248\u672c\u4e2d\u5220\u9664\u3002 \u5728\u542f\u52a8 Broker \u4e4b\u524d\u66f4\u65b0 ZooKeeper \u4e2d\u7684\u5bc6\u7801\u914d\u7f6e \u4ece Kafka 2.0.0 \u5f00\u59cb\uff0c kafka-configs.sh \u5728\u542f\u52a8\u4ee3\u7406\u8fdb\u884c\u5f15\u5bfc\u4e4b\u524d\uff0c\u53ef\u4ee5\u4f7f\u7528 ZooKeeper \u66f4\u65b0\u52a8\u6001\u4ee3\u7406\u914d\u7f6e\u3002\u8fd9\u4f7f\u5f97\u6240\u6709\u5bc6\u7801\u914d\u7f6e\u90fd\u80fd\u591f\u4ee5\u52a0\u5bc6\u5f62\u5f0f\u5b58\u50a8\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5728 server.properties . password.encoder.secret \u5982\u679c alter \u547d\u4ee4\u4e2d\u5305\u542b\u4efb\u4f55\u5bc6\u7801\u914d\u7f6e\uff0c\u5219\u8fd8\u5fc5\u987b\u6307\u5b9a\u4ee3\u7406\u914d\u7f6e\u3002\u8fd8\u53ef\u4ee5\u6307\u5b9a\u9644\u52a0\u7684\u52a0\u5bc6\u53c2\u6570\u3002\u5bc6\u7801\u7f16\u7801\u5668\u914d\u7f6e\u4e0d\u4f1a\u4fdd\u7559\u5728 ZooKeeper \u4e2d\u3002\u4f8b\u5982\uff0c\u8981\u5b58\u50a8 INTERNAL \u4ee3\u7406 0 \u4e0a\u4fa6\u542c\u5668\u7684 SSL \u5bc6\u94a5\u5bc6\u7801\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --entity-type brokers --entity-name 0 --alter --add-config 'listener.name.internal.ssl.key.password=key-password,password.encoder.secret=secret,password.encoder.iterations=8192' \u914d\u7f6e listener.name.internal.ssl.key.password \u5c06\u4f7f\u7528\u63d0\u4f9b\u7684\u7f16\u7801\u5668\u914d\u7f6e\u4ee5\u52a0\u5bc6\u5f62\u5f0f\u4fdd\u5b58\u5728 ZooKeeper \u4e2d\u3002\u7f16\u7801\u5668\u79d8\u5bc6\u548c\u8fed\u4ee3\u4e0d\u4f1a\u4fdd\u7559\u5728 ZooKeeper \u4e2d\u3002 \u66f4\u65b0\u73b0\u6709\u4fa6\u542c\u5668\u7684 SSL \u5bc6\u94a5\u5e93 \u4ee3\u7406\u53ef\u4ee5\u914d\u7f6e\u6709\u6548\u671f\u8f83\u77ed\u7684 SSL \u5bc6\u94a5\u5e93\uff0c\u4ee5\u964d\u4f4e\u8bc1\u4e66\u53d7\u635f\u7684\u98ce\u9669\u3002\u5bc6\u94a5\u5e93\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0\uff0c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u914d\u7f6e\u540d\u79f0\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u4f5c\u4e3a\u524d\u7f00 listener.name.{listenerName}. \uff0c\u4ee5\u4fbf\u4ec5\u66f4\u65b0\u7279\u5b9a\u4fa6\u542c\u5668\u7684\u5bc6\u94a5\u5e93\u914d\u7f6e\u3002\u4ee5\u4e0b\u914d\u7f6e\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u7684\u5355\u4e2a\u66f4\u6539\u8bf7\u6c42\u4e2d\u66f4\u65b0\uff1a ssl.keystore.type ssl.keystore.location ssl.keystore.password ssl.key.password \u5982\u679c\u4fa6\u542c\u5668\u662f\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\uff0c\u5219\u4ec5\u5f53\u65b0\u5bc6\u94a5\u5e93\u53d7\u5230\u4e3a\u8be5\u4fa6\u542c\u5668\u914d\u7f6e\u7684\u4fe1\u4efb\u5e93\u4fe1\u4efb\u65f6\u624d\u5141\u8bb8\u66f4\u65b0\u3002\u5bf9\u4e8e\u5176\u4ed6\u4fa6\u542c\u5668\uff0c\u4ee3\u7406\u4e0d\u4f1a\u5bf9\u5bc6\u94a5\u5e93\u6267\u884c\u4fe1\u4efb\u9a8c\u8bc1\u3002\u8bc1\u4e66\u5fc5\u987b\u7531\u7b7e\u7f72\u65e7\u8bc1\u4e66\u7684\u540c\u4e00\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u7b7e\u7f72\uff0c\u4ee5\u907f\u514d\u4efb\u4f55\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u3002 \u66f4\u65b0\u73b0\u6709\u4fa6\u542c\u5668\u7684 SSL \u4fe1\u4efb\u5e93 \u4ee3\u7406\u4fe1\u4efb\u5e93\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0\uff0c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u6765\u6dfb\u52a0\u6216\u5220\u9664\u8bc1\u4e66\u3002\u66f4\u65b0\u540e\u7684\u4fe1\u4efb\u5e93\u5c06\u7528\u4e8e\u9a8c\u8bc1\u65b0\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u914d\u7f6e\u540d\u79f0\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u4f5c\u4e3a\u524d\u7f00 listener.name.{listenerName}. \uff0c\u4ee5\u4fbf\u4ec5\u66f4\u65b0\u7279\u5b9a\u4fa6\u542c\u5668\u7684\u4fe1\u4efb\u5e93\u914d\u7f6e\u3002\u4ee5\u4e0b\u914d\u7f6e\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u7684\u5355\u4e2a\u66f4\u6539\u8bf7\u6c42\u4e2d\u66f4\u65b0\uff1a ssl.truststore.type ssl.truststore.location ssl.truststore.password \u5982\u679c\u4fa6\u542c\u5668\u662f\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\uff0c\u5219\u4ec5\u5f53\u8be5\u4fa6\u542c\u5668\u7684\u73b0\u6709\u5bc6\u94a5\u5e93\u53d7\u5230\u65b0\u4fe1\u4efb\u5e93\u7684\u4fe1\u4efb\u65f6\u624d\u5141\u8bb8\u66f4\u65b0\u3002\u5bf9\u4e8e\u5176\u4ed6\u4fa6\u542c\u5668\uff0c\u4ee3\u7406\u5728\u66f4\u65b0\u4e4b\u524d\u4e0d\u4f1a\u6267\u884c\u4fe1\u4efb\u9a8c\u8bc1\u3002\u4ece\u65b0\u4fe1\u4efb\u5e93\u4e2d\u5220\u9664\u7528\u4e8e\u7b7e\u7f72\u5ba2\u6237\u7aef\u8bc1\u4e66\u7684 CA \u8bc1\u4e66\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u3002 \u66f4\u65b0\u9ed8\u8ba4\u4e3b\u9898\u914d\u7f6e \u4ee3\u7406\u4f7f\u7528\u7684\u9ed8\u8ba4\u4e3b\u9898\u914d\u7f6e\u9009\u9879\u53ef\u4ee5\u5728\u4e0d\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\u66f4\u65b0\u3002\u8fd9\u4e9b\u914d\u7f6e\u9002\u7528\u4e8e\u6ca1\u6709\u4e3b\u9898\u914d\u7f6e\u8986\u76d6\u7684\u4e3b\u9898\uff0c\u4ee5\u5b9e\u73b0\u7b49\u6548\u7684\u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u3002\u8fd9\u4e9b\u914d\u7f6e\u4e2d\u7684\u4e00\u9879\u6216\u591a\u9879\u53ef\u80fd\u4f1a\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u4e0a\u88ab\u8986\u76d6\u3002 log.segment.bytes log.roll.ms log.roll.hours log.roll.jitter.ms log.roll.jitter.hours log.index.size.max.bytes log.flush.interval.messages log.flush.interval.ms log.retention.bytes log.retention.ms log.retention.minutes log.retention.hours log.index.interval.bytes log.cleaner.delete.retention.ms log.cleaner.min.compaction.lag.ms log.cleaner.max.compaction.lag.ms log.cleaner.min.cleanable.ratio log.cleanup.policy log.segment.delete.delay.ms unclean.leader.election.enable min.insync.replicas max.message.bytes compression.type log.preallocate log.message.timestamp.type log.message.timestamp.difference.max.ms unclean.leader.election.enable \u4ece Kafka 2.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5f53\u914d\u7f6e\u52a8\u6001\u66f4\u65b0 \u65f6\uff0c\u63a7\u5236\u5668\u4f1a\u81ea\u52a8\u542f\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e \u3002\u5728 Kafka 1.1.x \u7248\u672c\u4e2d\uff0c\u66f4\u6539 unclean.leader.election.enable \u4ec5\u5728\u9009\u4e3e\u51fa\u65b0\u63a7\u5236\u5668\u65f6\u624d\u4f1a\u751f\u6548\u3002\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5f3a\u5236\u63a7\u5236\u5668\u91cd\u65b0\u9009\u4e3e\uff1a > bin/zookeeper-shell.sh localhost rmr /controller \u66f4\u65b0\u65e5\u5fd7\u6e05\u7406\u5668\u914d\u7f6e \u65e5\u5fd7\u6e05\u7406\u5668\u914d\u7f6e\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\u3002\u8fd9\u4e9b\u66f4\u6539\u5c06\u5728\u4e0b\u4e00\u6b21\u65e5\u5fd7\u6e05\u7406\u8fed\u4ee3\u4e2d\u751f\u6548\u3002\u53ef\u80fd\u4f1a\u66f4\u65b0\u5176\u4e2d\u4e00\u9879\u6216\u591a\u9879\u914d\u7f6e\uff1a log.cleaner.threads log.cleaner.io.max.bytes.per.second log.cleaner.dedupe.buffer.size log.cleaner.io.buffer.size log.cleaner.io.buffer.load.factor log.cleaner.backoff.ms \u66f4\u65b0\u7ebf\u7a0b\u914d\u7f6e \u4ee3\u7406\u4f7f\u7528\u7684\u5404\u79cd\u7ebf\u7a0b\u6c60\u7684\u5927\u5c0f\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\u3002\u66f4\u65b0\u9650\u5236\u5728\u4e00\u5b9a\u8303\u56f4\u5185\uff0c currentSize / 2 \u4ee5 currentSize * 2 \u786e\u4fdd\u914d\u7f6e\u66f4\u65b0\u5f97\u5230\u59a5\u5584\u5904\u7406\u3002 num.network.threads num.io.threads num.replica.fetchers num.recovery.threads.per.data.dir log.cleaner.threads background.threads \u66f4\u65b0 ConnectionQuota \u914d\u7f6e \u4ee3\u7406\u5141\u8bb8\u7ed9\u5b9a IP/\u4e3b\u673a\u7684\u6700\u5927\u8fde\u63a5\u6570\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\u3002\u8fd9\u4e9b\u66f4\u6539\u5c06\u5e94\u7528\u200b\u200b\u4e8e\u65b0\u7684\u8fde\u63a5\u521b\u5efa\uff0c\u5e76\u4e14\u65b0\u7684\u9650\u5236\u5c06\u8003\u8651\u73b0\u6709\u8fde\u63a5\u8ba1\u6570\u3002 max.connections.per.ip max.connections.per.ip.overrides \u6dfb\u52a0\u548c\u5220\u200b\u200b\u9664\u76d1\u542c\u5668 \u76d1\u542c\u5668\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0\u6216\u5220\u9664\u3002\u6dfb\u52a0\u65b0\u4fa6\u542c\u5668\u65f6\uff0c\u5fc5\u987b\u5c06\u4fa6\u542c\u5668\u7684\u5b89\u5168\u914d\u7f6e\u63d0\u4f9b\u4e3a\u5e26\u6709\u4fa6\u542c\u5668\u524d\u7f00\u7684\u4fa6\u542c\u5668\u914d\u7f6e listener.name.{listenerName}. \u3002\u5982\u679c\u65b0\u4fa6\u542c\u5668\u4f7f\u7528 SASL\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u5e26\u6709\u4fa6\u542c\u5668\u548c\u673a\u5236\u524d\u7f00\u7684 JAAS \u914d\u7f6e\u5c5e\u6027\u6765\u63d0\u4f9b\u4fa6\u542c\u5668\u7684 JAAS \u914d\u7f6e sasl.jaas.config \u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Kafka \u4ee3\u7406\u7684 JAAS \u914d\u7f6e \u3002 \u5728Kafka 1.1.x\u7248\u672c\u4e2d\uff0c\u4ee3\u7406\u95f4\u76d1\u542c\u5668\u4f7f\u7528\u7684\u76d1\u542c\u5668\u53ef\u80fd\u4e0d\u4f1a\u52a8\u6001\u66f4\u65b0\u3002\u4e3a\u4e86\u5c06\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u66f4\u65b0\u4e3a\u65b0\u4fa6\u542c\u5668\uff0c\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4e0a\u6dfb\u52a0\u65b0\u4fa6\u542c\u5668\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u7136\u540e\u9700\u8981\u6eda\u52a8\u91cd\u65b0\u542f\u52a8\u624d\u80fd\u66f4\u65b0 inter.broker.listener.name \u3002 \u9664\u4e86\u65b0\u76d1\u542c\u5668\u7684\u6240\u6709\u5b89\u5168\u914d\u7f6e\u4e4b\u5916\uff0c\u4ee5\u4e0b\u914d\u7f6e\u8fd8\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\uff1a listeners advertised.listeners listener.security.protocol.map \u5fc5\u987b\u4f7f\u7528\u9759\u6001\u4ee3\u7406\u914d\u7f6e inter.broker.listener.name \u6216 security.inter.broker.protocol . 3.2 \u4e3b\u9898\u7ea7\u914d\u7f6e \u4e0e\u4e3b\u9898\u76f8\u5173\u7684\u914d\u7f6e\u65e2\u6709\u670d\u52a1\u5668\u9ed8\u8ba4\u503c\uff0c\u4e5f\u6709\u53ef\u9009\u7684\u6bcf\u4e2a\u4e3b\u9898\u8986\u76d6\u3002\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u6bcf\u4e2a\u4e3b\u9898\u7684\u914d\u7f6e\uff0c\u5219\u4f7f\u7528\u670d\u52a1\u5668\u9ed8\u8ba4\u503c\u3002\u53ef\u4ee5\u5728\u4e3b\u9898\u521b\u5efa\u65f6\u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a\u9009\u9879\u6765\u8bbe\u7f6e\u8986\u76d6 --config \u3002\u6b64\u793a\u4f8b\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a my-topic \u7684 \u4e3b\u9898\uff0c\u5177\u6709\u81ea\u5b9a\u4e49\u6700\u5927\u6d88\u606f\u5927\u5c0f\u548c\u5237\u65b0\u7387\uff1a > bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topic my-topic --partitions 1 \\ --replication-factor 1 --config max.message.bytes=64000 --config flush.messages=1 \u4e5f\u53ef\u4ee5\u7a0d\u540e\u4f7f\u7528 alter configs \u547d\u4ee4\u66f4\u6539\u6216\u8bbe\u7f6e\u8986\u76d6\u3002 \u6b64\u793a\u4f8b\u66f4\u65b0my-topic \u7684\u6700\u5927\u6d88\u606f\u5927\u5c0f\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type topics --entity-name my-topic --alter --add-config max.message.bytes=128000 \u8981\u68c0\u67e5\u4e3b\u9898\u4e0a\u8bbe\u7f6e\u7684\u8986\u76d6\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type topics --entity-name my-topic --describe \u8981\u5220\u9664\u8986\u76d6\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type topics --entity-name my-topic --alter --delete-config max.message.bytes \u4ee5\u4e0b\u662f\u4e3b\u9898\u7ea7\u522b\u7684\u914d\u7f6e\u3002\u670d\u52a1\u5668\u5bf9\u6b64\u5c5e\u6027\u7684\u9ed8\u8ba4\u914d\u7f6e\u5728\u201c\u670d\u52a1\u5668\u9ed8\u8ba4\u5c5e\u6027\u201d\u6807\u9898\u4e0b\u7ed9\u51fa\u3002\u7ed9\u5b9a\u7684\u670d\u52a1\u5668\u9ed8\u8ba4\u914d\u7f6e\u503c\u4ec5\u9002\u7528\u4e8e\u6ca1\u6709\u663e\u5f0f\u4e3b\u9898\u914d\u7f6e\u8986\u76d6\u7684\u4e3b\u9898\u3002 cleanup.policy \u6b64\u914d\u7f6e\u6307\u5b9a\u5728\u65e5\u5fd7\u6bb5\u4e0a\u4f7f\u7528\u7684\u4fdd\u7559\u7b56\u7565\u3002\u5f53\u8fbe\u5230\u4fdd\u7559\u65f6\u95f4\u6216\u5927\u5c0f\u9650\u5236\u65f6\uff0c\u201c\u5220\u9664\u201d\u7b56\u7565\uff08\u9ed8\u8ba4\uff09\u5c06\u4e22\u5f03\u65e7\u6bb5\u3002\u201ccompact\u201d\u7b56\u7565\u5c06\u542f\u7528 \u65e5\u5fd7\u538b\u7f29 \uff0c\u5b83\u4fdd\u7559\u6bcf\u4e2a\u952e\u7684\u6700\u65b0\u503c\u3002\u4e5f\u53ef\u4ee5\u5728\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u4e2d\u6307\u5b9a\u8fd9\u4e24\u4e2a\u7b56\u7565\uff08\u4f8b\u5982\u201cdelete,compact\u201d\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u65e7\u7684\u6bb5\u5c06\u6839\u636e\u4fdd\u7559\u65f6\u95f4\u548c\u5927\u5c0f\u914d\u7f6e\u88ab\u4e22\u5f03\uff0c\u800c\u4fdd\u7559\u7684\u6bb5\u5c06\u88ab\u538b\u7f29\u3002 Type: list Default: delete Valid Values: [compact, delete] Server Default Property: log.cleanup.policy Importance: medium compression.type \u6307\u5b9a\u7ed9\u5b9a\u4e3b\u9898\u7684\u6700\u7ec8\u538b\u7f29\u7c7b\u578b\u3002\u6b64\u914d\u7f6e\u63a5\u53d7\u6807\u51c6\u538b\u7f29\u7f16\u89e3\u7801\u5668\uff08'gzip'\u3001'snappy'\u3001'lz4'\u3001'zstd'\uff09\u3002\u5b83\u8fd8\u63a5\u53d7\u201c\u672a\u538b\u7f29\u201d\uff0c\u8fd9\u76f8\u5f53\u4e8e\u4e0d\u538b\u7f29\uff1b\u201c\u751f\u4ea7\u8005\u201d\u8868\u793a\u4fdd\u7559\u751f\u4ea7\u8005\u8bbe\u7f6e\u7684\u539f\u59cb\u538b\u7f29\u7f16\u89e3\u7801\u5668\u3002 Type: string Default: producer Valid Values: [uncompressed, zstd, lz4, snappy, gzip, producer] Server Default Property: compression.type Importance: medium delete.retention.ms \u4e3a\u65e5\u5fd7\u538b\u7f29 \u4e3b\u9898\u4fdd\u7559\u5220\u9664\u903b\u8f91\u5220\u9664\u6807\u8bb0\u7684\u65f6\u95f4\u91cf\u3002\u6b64\u8bbe\u7f6e\u8fd8\u89c4\u5b9a\u4e86\u6d88\u8d39\u8005\u5fc5\u987b\u5b8c\u6210\u8bfb\u53d6\u7684\u65f6\u95f4\u9650\u5236\uff08\u5982\u679c\u6d88\u8d39\u8005\u4ece\u504f\u79fb\u91cf 0 \u5f00\u59cb\uff09\uff0c\u4ee5\u786e\u4fdd\u4ed6\u4eec\u83b7\u5f97\u6700\u540e\u9636\u6bb5\u7684\u6709\u6548\u5feb\u7167\uff08\u5426\u5219\u53ef\u80fd\u4f1a\u5728\u5b8c\u6210\u626b\u63cf\u4e4b\u524d\u6536\u96c6\u5220\u9664\u903b\u8f91\u5220\u9664\uff09\u3002 Type: long Default: 86400000 (1 day) Valid Values: [0,...] Server Default Property: log.cleaner.delete.retention.ms Importance: medium file.delete.delay.ms \u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5220\u9664\u6587\u4ef6\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4 Type: long Default: 60000 (1 minute) Valid Values: [0,...] Server Default Property: log.segment.delete.delay.ms Importance: medium flush.messages \u6b64\u8bbe\u7f6e\u5141\u8bb8\u6307\u5b9a\u5f3a\u5236\u540c\u6b65\u5199\u5165\u65e5\u5fd7\u7684\u6570\u636e\u7684\u65f6\u95f4\u95f4\u9694\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5c06\u5176\u8bbe\u7f6e\u4e3a 1\uff0c\u6211\u4eec\u5c06\u5728\u6bcf\u6761\u6d88\u606f\u4e4b\u540e\u8fdb\u884c fsync\uff1b\u5982\u679c\u662f 5\uff0c\u6211\u4eec\u5c06\u5728\u6bcf 5 \u6761\u6d88\u606f\u540e\u8fdb\u884c fsync\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4e0d\u8981\u8bbe\u7f6e\u6b64\u9879\u5e76\u4f7f\u7528\u590d\u5236\u6765\u5b9e\u73b0\u6301\u4e45\u6027\uff0c\u5e76\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u7684\u540e\u53f0\u5237\u65b0\u529f\u80fd\uff0c\u56e0\u4e3a\u5b83\u66f4\u9ad8\u6548\u3002\u53ef\u4ee5\u6839\u636e\u6bcf\u4e2a\u4e3b\u9898\u8986\u76d6\u6b64\u8bbe\u7f6e\uff08\u8bf7\u53c2\u9605 \u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u90e8\u5206 \uff09\u3002 Type: long Default: 9223372036854775807 Valid Values: [1\uff0c...] Server Default Property: log.flush.interval.messages Importance: medium flush.ms \u6b64\u8bbe\u7f6e\u5141\u8bb8\u6307\u5b9a\u5f3a\u5236\u540c\u6b65\u5199\u5165\u65e5\u5fd7\u7684\u6570\u636e\u7684\u65f6\u95f4\u95f4\u9694\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5c06\u5176\u8bbe\u7f6e\u4e3a 1000\uff0c\u6211\u4eec\u5c06\u5728 1000 \u6beb\u79d2\u8fc7\u53bb\u540e\u8fdb\u884c fsync\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4e0d\u8981\u8bbe\u7f6e\u6b64\u9879\u5e76\u4f7f\u7528\u590d\u5236\u6765\u5b9e\u73b0\u6301\u4e45\u6027\uff0c\u5e76\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u7684\u540e\u53f0\u5237\u65b0\u529f\u80fd\uff0c\u56e0\u4e3a\u5b83\u66f4\u9ad8\u6548\u3002 Type: long Default: 9223372036854775807 Valid Values: [0,...] Server Default Property: log.flush.interval.ms Importance: medium follower.replication.throttled.replicas \u5e94\u5728\u4ece\u5c5e\u7aef\u9650\u5236\u5176\u65e5\u5fd7\u590d\u5236\u7684\u526f\u672c\u5217\u8868\u3002\u8be5\u5217\u8868\u5e94\u4ee5 [PartitionId]:[BrokerId],[PartitionId]:[BrokerId]:... \u7684\u5f62\u5f0f\u63cf\u8ff0\u4e00\u7ec4\u526f\u672c\uff0c\u6216\u8005\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u201c*\u201d\u6765\u9650\u5236\u8be5\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u3002 Type: list Default: \"\" Valid Values: [partitionId]:[brokerId],[partitionId]:[brokerId],... Server Default Property: null Importance: medium index.interval.bytes \u6b64\u8bbe\u7f6e\u63a7\u5236 Kafka \u5c06\u7d22\u5f15\u6761\u76ee\u6dfb\u52a0\u5230\u5176\u504f\u79fb\u7d22\u5f15\u7684\u9891\u7387\u3002\u9ed8\u8ba4\u8bbe\u7f6e\u786e\u4fdd\u6211\u4eec\u5927\u7ea6\u6bcf 4096 \u5b57\u8282\u7d22\u5f15\u4e00\u6761\u6d88\u606f\u3002\u66f4\u591a\u7d22\u5f15\u5141\u8bb8\u8bfb\u53d6\u8df3\u8f6c\u5230\u66f4\u63a5\u8fd1\u65e5\u5fd7\u4e2d\u7684\u786e\u5207\u4f4d\u7f6e\uff0c\u4f46\u4f1a\u4f7f\u7d22\u5f15\u66f4\u5927\u3002\u60a8\u53ef\u80fd\u4e0d\u9700\u8981\u66f4\u6539\u6b64\u8bbe\u7f6e\u3002 Type: int Default: 4096 (4 kibibytes) Valid Values: [0,...] Server Default Property: log.index.interval.bytes Importance: medium leader.replication.throttled.replicas \u5e94\u5728\u9886\u5bfc\u8005\u7aef\u9650\u5236\u5176\u65e5\u5fd7\u590d\u5236\u7684\u526f\u672c\u5217\u8868\u3002\u8be5\u5217\u8868\u5e94\u4ee5 [PartitionId]:[BrokerId],[PartitionId]:[BrokerId]:... \u7684\u5f62\u5f0f\u63cf\u8ff0\u4e00\u7ec4\u526f\u672c\uff0c\u6216\u8005\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u201c*\u201d\u6765\u9650\u5236\u8be5\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u3002 Type: list Default: \"\" Valid Values: [partitionId]:[brokerId],[partitionId]:[brokerId],... Server Default Property: null Importance: medium max.compaction.lag.ms \u6d88\u606f\u5728\u65e5\u5fd7\u4e2d\u4e0d\u7b26\u5408\u538b\u7f29\u6761\u4ef6\u7684\u6700\u957f\u65f6\u95f4\u3002\u4ec5\u9002\u7528\u4e8e\u6b63\u5728\u538b\u7f29\u7684\u65e5\u5fd7\u3002 Type: long Default: 9223372036854775807 Valid Values: [1\uff0c...] Server Default Property: log.cleaner.max.compaction.lag.ms Importance: medium max.message.bytes Kafka \u5141\u8bb8\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\uff08\u5982\u679c\u542f\u7528\u538b\u7f29\uff0c\u5219\u5728\u538b\u7f29\u540e\uff09\u3002\u5982\u679c\u589e\u52a0\u6b64\u503c\u5e76\u4e14\u5b58\u5728\u65e9\u4e8e 0.10.2 \u7684\u6d88\u8d39\u8005\uff0c\u5219\u6d88\u8d39\u8005\u7684\u83b7\u53d6\u5927\u5c0f\u4e5f\u5fc5\u987b\u589e\u52a0\uff0c\u4ee5\u4fbf\u4ed6\u4eec\u53ef\u4ee5\u83b7\u53d6\u8fd9\u4e48\u5927\u7684\u8bb0\u5f55\u6279\u6b21\u3002\u5728\u6700\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u8bb0\u5f55\u603b\u662f\u5206\u7ec4\u4e3a\u6279\u6b21\u3002\u5728\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u672a\u538b\u7f29\u7684\u8bb0\u5f55\u4e0d\u4f1a\u5206\u7ec4\u4e3a\u6279\u6b21\uff0c\u5e76\u4e14\u6b64\u9650\u5236\u4ec5\u9002\u7528\u4e8e\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u5355\u4e2a\u8bb0\u5f55\u3002 Type: int Default: 1048588 Valid Values: [0,...] Server Default Property: message.max.bytes Importance: medium message.format.version [\u5df2\u5f03\u7528] \u6307\u5b9a\u4ee3\u7406\u5c06\u7528\u4e8e\u5c06\u6d88\u606f\u9644\u52a0\u5230\u65e5\u5fd7\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u201cinter.broker.protocol.version\u201d\u4e3a 3.0 \u6216\u66f4\u9ad8\uff0c\u5219\u6b64\u914d\u7f6e\u7684\u503c\u59cb\u7ec8\u5047\u5b9a\u4e3a\u201c3.0\u201d\uff08\u5ffd\u7565\u5b9e\u9645\u914d\u7f6e\u503c\uff09\u3002\u5426\u5219\uff0c\u8be5\u503c\u5e94\u8be5\u662f\u6709\u6548\u7684 ApiVersion\u3002\u4e00\u4e9b\u793a\u4f8b\u662f\uff1a0.10.0\u30011.1\u30012.8\u30013.0\u3002\u901a\u8fc7\u8bbe\u7f6e\u7279\u5b9a\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u7528\u6237\u53ef\u4ee5\u8bc1\u660e\u78c1\u76d8\u4e0a\u7684\u6240\u6709\u73b0\u6709\u6d88\u606f\u90fd\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u7684\u7248\u672c\u3002\u9519\u8bef\u5730\u8bbe\u7f6e\u6b64\u503c\u5c06\u5bfc\u81f4\u4f7f\u7528\u65e7\u7248\u672c\u7684\u6d88\u8d39\u8005\u5d29\u6e83\uff0c\u56e0\u4e3a\u4ed6\u4eec\u5c06\u6536\u5230\u4ed6\u4eec\u4e0d\u7406\u89e3\u7684\u683c\u5f0f\u7684\u6d88\u606f\u3002 Type: string Default: 3.0-IV1 Valid Values: [0.8.0\u30010.8.1\u30010.8.2\u30010.9.0\u30010.10.0-IV0\u30010.10.0-IV1\u30010.10.1-IV0\u30010.10.1-IV1\u30010.10.1-IV2\u30010.10.2 -IV0\u30010.11.0-IV0\u30010.11.0-IV1\u30010.11.0-IV2\u30011.0-IV0\u30011.1-IV0\u30012.0-IV0\u30012.0-IV1\u30012.1-IV0\u30012.1-IV1\u30012.1-IV2\u30012.2 [0100]-IV0\u30012.2-IV1\u30012.3-IV0\u30012.3-IV1\u30012.4-IV0\u30012.4-IV1\u30012.5-IV0\u30012.6-IV0\u30012.7-IV0\u30012.7-IV1\u30012.7-IV2\u30012.8-IV0\u30012.8-IV1 , 3.0-IV0, 3.0-IV1, 3.1-IV0, 3.2-IV0, 3.3-IV0, 3.3-IV1, 3.3-IV2, 3.3-IV3, 3.4-IV0, 3.5-IV0, 3.5-IV1, 3.5-IV2] Server Default Property: log.message.format.version Importance: medium message.timestamp.difference.max.ms \u4ee3\u7406\u6536\u5230\u6d88\u606f\u65f6\u7684\u65f6\u95f4\u6233\u4e0e\u6d88\u606f\u4e2d\u6307\u5b9a\u7684\u65f6\u95f4\u6233\u4e4b\u95f4\u5141\u8bb8\u7684\u6700\u5927\u5dee\u5f02\u3002\u5982\u679cmessage.timestamp.type=CreateTime\uff0c\u5219\u5982\u679c\u65f6\u95f4\u6233\u5dee\u5f02\u8d85\u8fc7\u6b64\u9608\u503c\uff0c\u6d88\u606f\u5c06\u88ab\u62d2\u7edd\u3002\u5982\u679c message.timestamp.type=LogAppendTime\uff0c\u5219\u5ffd\u7565\u6b64\u914d\u7f6e\u3002 Type: long Default: 9223372036854775807 Valid Values: [0,...] Server Default Property: log.message.timestamp.difference.max.ms Importance: medium message.timestamp.type Define whether the timestamp in the message is message create time or log append time. The value should be either `CreateTime` or `LogAppendTime` Type: string Default: CreateTime Valid Values: [CreateTime, LogAppendTime] Server Default Property: log.message.timestamp.type Importance: medium min.cleanable.dirty.ratio This configuration controls how frequently the log compactor will attempt to clean the log (assuming log compaction is enabled). By default we will avoid cleaning a log where more than 50% of the log has been compacted. This ratio bounds the maximum space wasted in the log by duplicates (at 50% at most 50% of the log could be duplicates). A higher ratio will mean fewer, more efficient cleanings but will mean more wasted space in the log. If the max.compaction.lag.ms or the min.compaction.lag.ms configurations are also specified, then the log compactor considers the log to be eligible for compaction as soon as either: (i) the dirty ratio threshold has been met and the log has had dirty (uncompacted) records for at least the min.compaction.lag.ms duration, or (ii) if the log has had dirty (uncompacted) records for at most the max.compaction.lag.ms period. Type: double Default: 0.5 Valid Values: [0,...,1] Server Default Property: log.cleaner.min.cleanable.ratio Importance: medium min.compaction.lag.ms The minimum time a message will remain uncompacted in the log. Only applicable for logs that are being compacted. Type: long Default: 0 Valid Values: [0,...] Server Default Property: log.cleaner.min.compaction.lag.ms Importance: medium min.insync.replicas When a producer sets acks to \"all\" (or \"-1\"), this configuration specifies the minimum number of replicas that must acknowledge a write for the write to be considered successful. If this minimum cannot be met, then the producer will raise an exception (either NotEnoughReplicas or NotEnoughReplicasAfterAppend). When used together, min.insync.replicas and acks allow you to enforce greater durability guarantees. A typical scenario would be to create a topic with a replication factor of 3, set min.insync.replicas to 2, and produce with acks of \"all\". This will ensure that the producer raises an exception if a majority of replicas do not receive a write. Type: int Default: 1 Valid Values: [1,...] Server Default Property: min.insync.replicas Importance: medium preallocate \u5982\u679c\u6211\u4eec\u5728\u521b\u5efa\u65b0\u65e5\u5fd7\u6bb5\u65f6\u5e94\u8be5\u5728\u78c1\u76d8\u4e0a\u9884\u5206\u914d\u6587\u4ef6\uff0c\u5219\u4e3a true\u3002 Type: boolean Default: false Valid Values: Server Default Property: log.preallocate Importance: medium retention.bytes \u5982\u679c\u6211\u4eec\u4f7f\u7528\u201c\u5220\u9664\u201d\u4fdd\u7559\u7b56\u7565\uff0c\u6b64\u914d\u7f6e\u63a7\u5236\u5206\u533a\uff08\u7531\u65e5\u5fd7\u6bb5\u7ec4\u6210\uff09\u5728\u6211\u4eec\u4e22\u5f03\u65e7\u65e5\u5fd7\u6bb5\u4ee5\u91ca\u653e\u7a7a\u95f4\u4e4b\u524d\u53ef\u4ee5\u589e\u957f\u5230\u7684\u6700\u5927\u5927\u5c0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u5927\u5c0f\u9650\u5236\uff0c\u53ea\u6709\u65f6\u95f4\u9650\u5236\u3002\u7531\u4e8e\u6b64\u9650\u5236\u662f\u5728\u5206\u533a\u7ea7\u522b\u5f3a\u5236\u5b9e\u65bd\u7684\uff0c\u56e0\u6b64\u5c06\u5176\u4e58\u4ee5\u5206\u533a\u6570\u5373\u53ef\u8ba1\u7b97\u4e3b\u9898\u4fdd\u7559\u65f6\u95f4\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002 Type: long Default: -1 Valid Values: Server Default Property: log.retention.bytes Importance: medium retention.ms \u5982\u679c\u6211\u4eec\u4f7f\u7528\u201c\u5220\u9664\u201d\u4fdd\u7559\u7b56\u7565\uff0c\u6b64\u914d\u7f6e\u63a7\u5236\u6211\u4eec\u5728\u4e22\u5f03\u65e7\u65e5\u5fd7\u6bb5\u4ee5\u91ca\u653e\u7a7a\u95f4\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u7684\u6700\u957f\u65f6\u95f4\u3002\u8fd9\u4ee3\u8868\u4e86\u5173\u4e8e\u6d88\u8d39\u8005\u5fc5\u987b\u591a\u5feb\u8bfb\u53d6\u5176\u6570\u636e\u7684 SLA\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a -1\uff0c\u5219\u4e0d\u5e94\u7528\u65f6\u95f4\u9650\u5236\u3002 Type: long Default: 604800000 (7 days) Valid Values: [-1\uff0c...] Server Default Property: log.retention.ms Importance: medium segment.bytes \u6b64\u914d\u7f6e\u63a7\u5236\u65e5\u5fd7\u7684\u6bb5\u6587\u4ef6\u5927\u5c0f\u3002\u4fdd\u7559\u548c\u6e05\u7406\u603b\u662f\u4e00\u6b21\u5bf9\u4e00\u4e2a\u6587\u4ef6\u8fdb\u884c\uff0c\u56e0\u6b64\u8f83\u5927\u7684\u6bb5\u5927\u5c0f\u610f\u5473\u7740\u6587\u4ef6\u8f83\u5c11\uff0c\u4f46\u5bf9\u4fdd\u7559\u7684\u7c92\u5ea6\u63a7\u5236\u8f83\u5c0f\u3002 Type: int Default: 1073741824 (1 gibibyte) Valid Values: [14\uff0c...] Server Default Property: log.segment.bytes Importance: medium segment.index.bytes \u6b64\u914d\u7f6e\u63a7\u5236\u5c06\u504f\u79fb\u91cf\u6620\u5c04\u5230\u6587\u4ef6\u4f4d\u7f6e\u7684\u7d22\u5f15\u7684\u5927\u5c0f\u3002\u6211\u4eec\u9884\u5148\u5206\u914d\u8be5\u7d22\u5f15\u6587\u4ef6\uff0c\u5e76\u4ec5\u5728\u65e5\u5fd7\u6eda\u52a8\u540e\u6536\u7f29\u5b83\u3002\u60a8\u901a\u5e38\u4e0d\u9700\u8981\u66f4\u6539\u6b64\u8bbe\u7f6e\u3002 Type: int Default: 10485760 (10 mebibytes) Valid Values: [4\uff0c...] Server Default Property: log.index.size.max.bytes Importance: medium segment.jitter.ms \u4ece\u9884\u5b9a\u7684\u5206\u6bb5\u6eda\u52a8\u65f6\u95f4\u4e2d\u51cf\u53bb\u6700\u5927\u968f\u673a\u6296\u52a8\uff0c\u4ee5\u907f\u514d\u5206\u6bb5\u6eda\u52a8\u7684\u96f7\u7fa4 Type: long Default: 0 Valid Values: [0,...] Server Default Property: log.roll.jitter.ms Importance: medium segment.ms \u6b64\u914d\u7f6e\u63a7\u5236\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5373\u4f7f\u6bb5\u6587\u4ef6\u672a\u6ee1\uff0cKafka\u4e5f\u4f1a\u5f3a\u5236\u65e5\u5fd7\u6eda\u52a8\uff0c\u4ee5\u786e\u4fdd\u4fdd\u7559\u53ef\u4ee5\u5220\u9664\u6216\u538b\u7f29\u65e7\u6570\u636e\u3002 Type: long Default: 604800000 (7 days) Valid Values: [1\uff0c...] Server Default Property: log.roll.ms Importance: medium unclean.leader.election.enable \u6307\u793a\u662f\u5426\u5c06\u4e0d\u5728 ISR \u96c6\u4e2d\u7684\u526f\u672c\u4f5c\u4e3a\u6700\u540e\u624b\u6bb5\u9009\u4e3e\u4e3a\u9886\u5bfc\u8005\uff0c\u5373\u4f7f\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002 Type: boolean Default: false Valid Values: Server Default Property: unclean.leader.election.enable Importance: medium message.downconversion.enable \u8be5\u914d\u7f6e\u63a7\u5236\u662f\u5426\u542f\u7528\u6d88\u606f\u683c\u5f0f\u4e0b\u8f6c\u6362\u4ee5\u6ee1\u8db3\u6d88\u8d39\u8bf7\u6c42\u3002\u5f53\u8bbe\u7f6e\u4e3a \u65f6 false \uff0c\u4ee3\u7406\u5c06\u4e0d\u4f1a\u4e3a\u671f\u671b\u65e7\u6d88\u606f\u683c\u5f0f\u7684\u6d88\u8d39\u8005\u6267\u884c\u5411\u4e0b\u8f6c\u6362\u3002 UNSUPPORTED_VERSION \u5bf9\u4e8e\u6765\u81ea\u6b64\u7c7b\u8f83\u65e7\u5ba2\u6237\u7aef\u7684\u6d88\u8d39\u8bf7\u6c42\uff0c\u4ee3\u7406\u4f1a\u8fd4\u56de\u9519\u8bef\u54cd\u5e94\u3002\u6b64\u914d\u7f6e\u4e0d\u9002\u7528\u4e8e\u590d\u5236\u5230\u5173\u6ce8\u8005\u53ef\u80fd\u9700\u8981\u7684\u4efb\u4f55\u6d88\u606f\u683c\u5f0f\u8f6c\u6362\u3002 Type: boolean Default: true Valid Values: Server Default Property: log.message.downconversion.enable Importance: low 3.3 \u751f\u4ea7\u8005\u914d\u7f6e \u4e0b\u9762\u662f\u751f\u4ea7\u8005\u7684\u914d\u7f6e\uff1a key.serializer \u5b9e\u73b0\u8be5 org.apache.kafka.common.serialization.Serializer \u63a5\u53e3\u7684\u952e\u7684\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high value.serializer \u5b9e\u73b0 org.apache.kafka.common.serialization.Serializer \u63a5\u53e3\u7684\u503c\u7684\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high bootstrap.servers \u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: \"\" Valid Values: non-null string Importance: high buffer.memory \u751f\u4ea7\u8005\u53ef\u7528\u4e8e\u7f13\u51b2\u7b49\u5f85\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u8bb0\u5f55\u7684\u5185\u5b58\u603b\u5b57\u8282\u6570\u3002\u5982\u679c\u8bb0\u5f55\u7684\u53d1\u9001\u901f\u5ea6\u5feb\u4e8e\u4f20\u9001\u5230\u670d\u52a1\u5668\u7684\u901f\u5ea6\uff0c\u751f\u4ea7\u8005\u5c06\u963b\u585e\uff0c max.block.ms \u7136\u540e\u629b\u51fa\u5f02\u5e38\u3002 \u6b64\u8bbe\u7f6e\u5e94\u5927\u81f4\u5bf9\u5e94\u4e8e\u751f\u4ea7\u8005\u5c06\u4f7f\u7528\u7684\u603b\u5185\u5b58\uff0c\u4f46\u4e0d\u662f\u786c\u9650\u5236\uff0c\u56e0\u4e3a\u5e76\u975e\u751f\u4ea7\u8005\u4f7f\u7528\u7684\u6240\u6709\u5185\u5b58\u90fd\u7528\u4e8e\u7f13\u51b2\u3002\u4e00\u4e9b\u989d\u5916\u7684\u5185\u5b58\u5c06\u7528\u4e8e\u538b\u7f29\uff08\u5982\u679c\u542f\u7528\u538b\u7f29\uff09\u4ee5\u53ca\u7ef4\u62a4\u6b63\u5728\u8fdb\u884c\u7684\u8bf7\u6c42\u3002 Type: long Default: 33554432 Valid Values: [0,...] Importance: high compression.type \u751f\u4ea7\u8005\u751f\u6210\u7684\u6240\u6709\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002\u9ed8\u8ba4\u503c\u4e3a\u65e0\uff08\u5373\u4e0d\u538b\u7f29\uff09\u3002\u6709\u6548\u503c\u4e3a none \u3001 gzip \u3001 snappy \u3001 lz4 \u6216 zstd \u3002\u538b\u7f29\u662f\u5bf9\u6574\u6279\u6570\u636e\u8fdb\u884c\u538b\u7f29\uff0c\u56e0\u6b64\u6279\u5904\u7406\u7684\u6548\u679c\u4e5f\u4f1a\u5f71\u54cd\u538b\u7f29\u7387\uff08\u6279\u5904\u7406\u8d8a\u591a\u610f\u5473\u7740\u538b\u7f29\u6548\u679c\u8d8a\u597d\uff09\u3002 Type: string Default: none Valid Values: [\u65e0\u3001gzip\u3001snappy\u3001lz4\u3001zstd] Importance: high retries \u8bbe\u7f6e\u5927\u4e8e\u96f6\u7684\u503c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u91cd\u65b0\u53d1\u9001\u53d1\u9001\u5931\u8d25\u5e76\u53ef\u80fd\u51fa\u73b0\u6682\u65f6\u6027\u9519\u8bef\u7684\u4efb\u4f55\u8bb0\u5f55\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u91cd\u8bd5\u4e0e\u5ba2\u6237\u7aef\u5728\u6536\u5230\u9519\u8bef\u540e\u91cd\u65b0\u53d1\u9001\u8bb0\u5f55\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c\u3002 delivery.timeout.ms \u5982\u679c\u5728\u6210\u529f\u786e\u8ba4\u4e4b\u524d\u914d\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u5148\u5230\u671f\uff0c\u5219\u5728\u91cd\u8bd5\u6b21\u6570\u7528\u5b8c\u4e4b\u524d\uff0c\u751f\u4ea7\u8bf7\u6c42\u5c06\u5931\u8d25\u3002\u7528\u6237\u901a\u5e38\u5e94\u8be5\u66f4\u613f\u610f\u4fdd\u7559\u6b64\u914d\u7f6e\u672a\u8bbe\u7f6e\uff0c\u800c\u662f\u7528\u4e8e delivery.timeout.ms \u63a7\u5236\u91cd\u8bd5\u884c\u4e3a\u3002 \u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42\u6b64\u914d\u7f6e\u503c\u5927\u4e8e 0\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002 \u5728\u8bbe\u7f6e enable.idempotence \u4e3a1 false \u6216 max.in.flight.requests.per.connection \u5927\u4e8e 1 \u65f6\u5141\u8bb8\u91cd\u8bd5\u53ef\u80fd\u4f1a\u66f4\u6539\u8bb0\u5f55\u7684\u987a\u5e8f\uff0c\u56e0\u4e3a\u5982\u679c\u5c06\u4e24\u4e2a\u6279\u6b21\u53d1\u9001\u5230\u5355\u4e2a\u5206\u533a\uff0c\u5e76\u4e14\u7b2c\u4e00\u4e2a\u6279\u6b21\u5931\u8d25\u5e76\u91cd\u8bd5\uff0c\u4f46\u7b2c\u4e8c\u4e2a\u6210\u529f\uff0c\u5219\u7b2c\u4e8c\u4e2a\u6279\u6b21\u4e2d\u7684\u8bb0\u5f55\u53ef\u80fd\u4f1a\u5148\u51fa\u73b0\u3002 Type: int Default: 2147483647 Valid Values: [0\uff0c...\uff0c2147483647] Importance: high ssl.key.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.keystore.certificate.chain \u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high ssl.keystore.key \u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high ssl.keystore.location \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high ssl.keystore.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.certificate \u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.location \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high ssl.truststore.password \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high batch.size \u6bcf\u5f53\u591a\u4e2a\u8bb0\u5f55\u53d1\u9001\u5230\u540c\u4e00\u5206\u533a\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u5c06\u8bb0\u5f55\u4e00\u8d77\u6279\u5904\u7406\u4e3a\u66f4\u5c11\u7684\u8bf7\u6c42\u3002\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u6027\u80fd\u3002\u6b64\u914d\u7f6e\u63a7\u5236\u9ed8\u8ba4\u6279\u91cf\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002 \u4e0d\u4f1a\u5c1d\u8bd5\u6279\u91cf\u8bb0\u5f55\u5927\u4e8e\u6b64\u5927\u5c0f\u7684\u8bb0\u5f55\u3002 \u53d1\u9001\u5230\u4ee3\u7406\u7684\u8bf7\u6c42\u5c06\u5305\u542b\u591a\u4e2a\u6279\u6b21\uff0c\u6bcf\u4e2a\u6279\u6b21\u5bf9\u5e94\u4e00\u4e2a\u53ef\u53d1\u9001\u6570\u636e\u7684\u5206\u533a\u3002 A small batch size will make batching less common and may reduce throughput (a batch size of zero will disable batching entirely). A very large batch size may use memory a bit more wastefully as we will always allocate a buffer of the specified batch size in anticipation of additional records. Note: This setting gives the upper bound of the batch size to be sent. If we have fewer than this many bytes accumulated for this partition, we will 'linger' for the linger.ms time waiting for more records to show up. This linger.ms setting defaults to 0, which means we'll immediately send out a record even the accumulated batch size is under this batch.size setting. Type: int Default: 16384 Valid Values: [0,...] Importance: medium client.dns.lookup Controls how the client uses DNS lookups. If set to use_all_dns_ips , connect to each returned IP address in sequence until a successful connection is established. After a disconnection, the next IP is used. Once all IPs have been used once, the client resolves the IP(s) from the hostname again (both the JVM and the OS cache DNS name lookups, however). If set to resolve_canonical_bootstrap_servers_only , resolve each bootstrap address into a list of canonical names. After the bootstrap phase, this behaves the same as use_all_dns_ips . Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips, resolve_canonical_bootstrap_servers_only] Importance: medium client.id An id string to pass to the server when making requests. The purpose of this is to be able to track the source of requests beyond just ip/port by allowing a logical application name to be included in server-side request logging. Type: string Default: \"\" Valid Values: Importance: medium connections.max.idle.ms Close idle connections after the number of milliseconds specified by this config. Type: long Default: 540000 (9 minutes) Valid Values: Importance: medium delivery.timeout.ms An upper bound on the time to report success or failure after a call to send() returns. This limits the total time that a record will be delayed prior to sending, the time to await acknowledgement from the broker (if expected), and the time allowed for retriable send failures. The producer may report failure to send a record earlier than this config if either an unrecoverable error is encountered, the retries have been exhausted, or the record is added to a batch which reached an earlier delivery expiration deadline. The value of this config should be greater than or equal to the sum of request.timeout.ms and linger.ms . Type: int Default: 120000 (2 minutes) Valid Values: [0,...] Importance: medium linger.ms The producer groups together any records that arrive in between request transmissions into a single batched request. Normally this occurs only under load when records arrive faster than they can be sent out. However in some circumstances the client may want to reduce the number of requests even under moderate load. This setting accomplishes this by adding a small amount of artificial delay\u2014that is, rather than immediately sending out a record, the producer will wait for up to the given delay to allow other records to be sent so that the sends can be batched together. This can be thought of as analogous to Nagle's algorithm in TCP. This setting gives the upper bound on the delay for batching: once we get batch.size \u65e0\u8bba\u6b64\u8bbe\u7f6e\u5982\u4f55\uff0c\u90fd\u4f1a\u7acb\u5373\u53d1\u9001\u5206\u533a\u7684\u8bb0\u5f55\u4ef7\u503c\uff0c\u4f46\u662f\uff0c\u5982\u679c\u8be5\u5206\u533a\u7d2f\u79ef\u7684\u5b57\u8282\u6570\u5c11\u4e8e\u8fd9\u4e48\u591a\uff0c\u6211\u4eec\u5c06\u201c\u5f98\u5f8a\u201d\u6307\u5b9a\u7684\u65f6\u95f4\uff0c\u7b49\u5f85\u66f4\u591a\u8bb0\u5f55\u663e\u793a\u3002\u8be5\u8bbe\u7f6e\u9ed8\u8ba4\u4e3a 0\uff08\u5373\u65e0\u5ef6\u8fdf\uff09\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e linger.ms=5 \u53ef\u4ee5\u51cf\u5c11\u53d1\u9001\u7684\u8bf7\u6c42\u6570\u91cf\uff0c\u4f46\u4f1a\u5728\u6ca1\u6709\u8d1f\u8f7d\u7684\u60c5\u51b5\u4e0b\u4e3a\u53d1\u9001\u7684\u8bb0\u5f55\u589e\u52a0\u6700\u591a 5 \u6beb\u79d2\u7684\u5ef6\u8fdf\u3002 Type: long Default: 0 Valid Values: [0,...] Importance: medium max.block.ms KafkaProducer \u914d\u7f6e\u63a7\u5236 send() \u3001 partitionsFor() \u3001 initTransactions() \u3001 sendOffsetsToTransaction() \u548c commitTransaction() \u65b9\u6cd5\u5c06\u963b\u585e\u591a\u957f\u65f6\u95f4 abortTransaction() \u3002\u5bf9\u4e8e send() \u6b64\u8d85\u65f6\u9650\u5236\u7b49\u5f85\u5143\u6570\u636e\u83b7\u53d6\u548c\u7f13\u51b2\u533a\u5206\u914d\u7684\u603b\u65f6\u95f4\uff08\u7528\u6237\u63d0\u4f9b\u7684\u5e8f\u5217\u5316\u5668\u6216\u5206\u533a\u5668\u4e2d\u7684\u963b\u585e\u4e0d\u8ba1\u5165\u6b64\u8d85\u65f6\uff09\u3002\u5bf9\u4e8e partitionsFor() \u6b64\u8d85\u65f6\uff0c\u9650\u5236\u4e86\u7b49\u5f85\u5143\u6570\u636e\uff08\u5982\u679c\u5143\u6570\u636e\u4e0d\u53ef\u7528\uff09\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002\u4e0e\u4e8b\u52a1\u76f8\u5173\u7684\u65b9\u6cd5\u59cb\u7ec8\u4f1a\u963b\u585e\uff0c\u4f46\u5982\u679c\u65e0\u6cd5\u53d1\u73b0\u4e8b\u52a1\u534f\u8c03\u5668\u6216\u5728\u8d85\u65f6\u5185\u672a\u54cd\u5e94\uff0c\u5219\u53ef\u80fd\u4f1a\u8d85\u65f6\u3002 Type: long Default: 60000 (1 minute) Valid Values: [0,...] Importance: medium max.request.size \u8bf7\u6c42\u7684\u6700\u5927\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u6b64\u8bbe\u7f6e\u5c06\u9650\u5236\u751f\u4ea7\u8005\u5728\u5355\u4e2a\u8bf7\u6c42\u4e2d\u53d1\u9001\u7684\u8bb0\u5f55\u6279\u6b21\u6570\u91cf\uff0c\u4ee5\u907f\u514d\u53d1\u9001\u5de8\u5927\u7684\u8bf7\u6c42\u3002\u8fd9\u5b9e\u9645\u4e0a\u4e5f\u662f\u6700\u5927\u672a\u538b\u7f29\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u7684\u4e0a\u9650\u3002\u8bf7\u6ce8\u610f\uff0c\u670d\u52a1\u5668\u5bf9\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u6709\u81ea\u5df1\u7684\u4e0a\u9650\uff08\u5982\u679c\u542f\u7528\u4e86\u538b\u7f29\uff0c\u5219\u5728\u538b\u7f29\u540e\uff09\uff0c\u8fd9\u53ef\u80fd\u4e0e\u6b64\u4e0d\u540c\u3002 Type: int Default: 1048576 Valid Values: [0,...] Importance: medium partitioner.class \u7528\u4e8e\u786e\u5b9a\u751f\u6210\u8bb0\u5f55\u65f6\u8981\u53d1\u9001\u5230\u54ea\u4e2a\u5206\u533a\u7684\u7c7b\u3002\u53ef\u7528\u9009\u9879\u6709\uff1a \u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u5206\u533a\u903b\u8f91\u3002\u8be5\u7b56\u7565\u5c06\u5c1d\u8bd5\u575a\u6301\u4e00\u4e2a\u5206\u533a\uff0c\u76f4\u5230\u81f3\u5c11\u4e3a\u8be5\u5206\u533a\u751f\u6210\u4e86batch.size\u5b57\u8282\u3002\u5b83\u9002\u7528\u4e8e\u4ee5\u4e0b\u7b56\u7565\uff1a \u5982\u679c\u672a\u6307\u5b9a\u5206\u533a\u4f46\u5b58\u5728\u5bc6\u94a5\uff0c\u5219\u6839\u636e\u5bc6\u94a5\u7684\u54c8\u5e0c\u503c\u9009\u62e9\u5206\u533a \u5982\u679c\u4e0d\u5b58\u5728\u5206\u533a\u6216\u952e\uff0c\u5219\u9009\u62e9\u5f53\u81f3\u5c11\u4e3a\u8be5\u5206\u533a\u751f\u6210batch.size\u5b57\u8282\u65f6\u66f4\u6539\u7684\u7c98\u6027\u5206\u533a\u3002 org.apache.kafka.clients.producer.RoundRobinPartitioner \uff1a\u8fd9\u79cd\u5206\u533a\u7b56\u7565\u662f\u4e00\u7cfb\u5217\u8fde\u7eed\u8bb0\u5f55\u4e2d\u7684\u6bcf\u6761\u8bb0\u5f55\u5c06\u88ab\u53d1\u9001\u5230\u4e0d\u540c\u7684\u5206\u533a\uff08\u65e0\u8bba\u662f\u5426\u63d0\u4f9b\u201ckey\u201d\uff09\uff0c\u76f4\u5230\u6211\u4eec\u7528\u5b8c\u5206\u533a\u5e76\u91cd\u65b0\u5f00\u59cb\u3002\u6ce8\u610f\uff1a\u6709\u4e00\u4e2a\u5df2\u77e5\u95ee\u9898\u4f1a\u5bfc\u81f4\u521b\u5efa\u65b0\u6279\u6b21\u65f6\u5206\u5e03\u4e0d\u5747\u5300\u3002\u8bf7\u67e5\u770b KAFKA-9965 \u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u5b9e\u73b0\u8be5 org.apache.kafka.clients.producer.Partitioner \u63a5\u53e3\u5141\u8bb8\u60a8\u63d2\u5165\u81ea\u5b9a\u4e49\u5206\u533a\u5668\u3002 Type: class Default: null Valid Values: Importance: medium partitioner.ignore.keys \u5f53\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u4e0d\u4f1a\u4f7f\u7528\u8bb0\u5f55\u952e\u6765\u9009\u62e9\u5206\u533a\u3002\u5982\u679c\u4e3a\u201cfalse\u201d\uff0c\u5219\u5f53\u5b58\u5728\u5bc6\u94a5\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u6839\u636e\u5bc6\u94a5\u7684\u54c8\u5e0c\u503c\u9009\u62e9\u5206\u533a\u3002\u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\uff0c\u6b64\u8bbe\u7f6e\u65e0\u6548\u3002 Type: boolean Default: false Valid Values: Importance: medium receive.buffer.bytes \u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 32768\uff0832 KB\uff09 Valid Values: [-1\uff0c...] Importance: medium request.timeout.ms \u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002\u8fd9\u5e94\u8be5\u5927\u4e8e replica.lag.time.max.ms \uff08\u4ee3\u7406\u914d\u7f6e\uff09\uff0c\u4ee5\u51cf\u5c11\u7531\u4e8e\u4e0d\u5fc5\u8981\u7684\u751f\u4ea7\u8005\u91cd\u8bd5\u800c\u5bfc\u81f4\u6d88\u606f\u91cd\u590d\u7684\u53ef\u80fd\u6027\u3002 Type: int Default: 30000 (30 seconds) Valid Values: [0,...] Importance: medium sasl.client.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium sasl.jaas.config SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium sasl.kerberos.service.name Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium sasl.login.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium sasl.login.class \u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium sasl.mechanism \u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium sasl.oauthbearer.jwks.endpoint.url OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium sasl.oauthbearer.token.endpoint.url OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium security.protocol \u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium send.buffer.bytes \u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium socket.connection.setup.timeout.max.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium socket.connection.setup.timeout.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium ssl.enabled.protocol \u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium ssl.keystore.type \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium ssl.protocol \u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium ssl.provider \u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium ssl.truststore.type \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium acks \u751f\u4ea7\u8005\u8981\u6c42\u9886\u5bfc\u8005\u5728\u8003\u8651\u8bf7\u6c42\u5b8c\u6210\u4e4b\u524d\u6536\u5230\u7684\u786e\u8ba4\u6570\u91cf\u3002\u8fd9\u63a7\u5236\u53d1\u9001\u7684\u8bb0\u5f55\u7684\u6301\u4e45\u6027\u3002\u5141\u8bb8\u4ee5\u4e0b\u8bbe\u7f6e\uff1a acks=0 \u5982\u679c\u8bbe\u7f6e\u4e3a\u96f6\uff0c\u5219\u751f\u4ea7\u8005\u6839\u672c\u4e0d\u4f1a\u7b49\u5f85\u670d\u52a1\u5668\u7684\u4efb\u4f55\u786e\u8ba4\u3002\u8be5\u8bb0\u5f55\u5c06\u7acb\u5373\u6dfb\u52a0\u5230\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5e76\u88ab\u89c6\u4e3a\u5df2\u53d1\u9001\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u670d\u52a1\u5668\u5df2\u6536\u5230\u8bb0\u5f55\uff0c\u5e76\u4e14\u914d\u7f6e retries \u4e0d\u4f1a\u751f\u6548\uff08\u56e0\u4e3a\u5ba2\u6237\u7aef\u901a\u5e38\u4e0d\u4f1a\u77e5\u9053\u4efb\u4f55\u5931\u8d25\uff09\u3002\u4e3a\u6bcf\u4e2a\u8bb0\u5f55\u8fd4\u56de\u7684\u504f\u79fb\u91cf\u5c06\u59cb\u7ec8\u8bbe\u7f6e\u4e3a -1 \u3002 acks=1 \u8fd9\u610f\u5473\u7740\u9886\u5bfc\u8005\u4f1a\u5c06\u8bb0\u5f55\u5199\u5165\u5176\u672c\u5730\u65e5\u5fd7\uff0c\u4f46\u4f1a\u5728\u4e0d\u7b49\u5f85\u6240\u6709\u8ffd\u968f\u8005\u5b8c\u5168\u786e\u8ba4\u7684\u60c5\u51b5\u4e0b\u505a\u51fa\u54cd\u5e94\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u9886\u5bfc\u8005\u5728\u786e\u8ba4\u8bb0\u5f55\u540e\u4f46\u5728\u8ffd\u968f\u8005\u590d\u5236\u8bb0\u5f55\u4e4b\u524d\u7acb\u5373\u5931\u8d25\uff0c\u90a3\u4e48\u8bb0\u5f55\u5c06\u4e22\u5931\u3002 acks=all \u8fd9\u610f\u5473\u7740\u9886\u5bfc\u8005\u5c06\u7b49\u5f85\u5b8c\u6574\u7684\u540c\u6b65\u526f\u672c\u96c6\u786e\u8ba4\u8bb0\u5f55\u3002\u8fd9\u4fdd\u8bc1\u4e86\u53ea\u8981\u81f3\u5c11\u4e00\u4e2a\u540c\u6b65\u526f\u672c\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001\uff0c\u8bb0\u5f55\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002\u8fd9\u662f\u6700\u5f3a\u6709\u529b\u7684\u4fdd\u8bc1\u3002\u8fd9\u76f8\u5f53\u4e8e acks=-1 \u8bbe\u7f6e\u3002 \u8bf7\u6ce8\u610f\uff0c\u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42\u6b64\u914d\u7f6e\u503c\u4e3a\u201call\u201d\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002 Type: string Default: All Valid Values: [all, -1, 0, 1] Importance: low auto.jmx.reporter \u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low enable.idempotence \u5f53\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u786e\u4fdd\u6bcf\u6761\u6d88\u606f\u7684\u4e00\u4efd\u526f\u672c\u51c6\u786e\u5199\u5165\u6d41\u4e2d\u3002\u5982\u679c\u4e3a\u201cfalse\u201d\uff0c\u5219\u751f\u4ea7\u8005\u7531\u4e8e\u4ee3\u7406\u6545\u969c\u7b49\u539f\u56e0\u91cd\u8bd5\uff0c\u53ef\u80fd\u4f1a\u5728\u6d41\u4e2d\u5199\u5165\u91cd\u8bd5\u6d88\u606f\u7684\u91cd\u590d\u9879\u3002\u8bf7\u6ce8\u610f\uff0c\u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42 max.in.flight.requests.per.connection \u5c0f\u4e8e\u6216\u7b49\u4e8e 5\uff08\u4e3a\u4efb\u4f55\u5141\u8bb8\u7684\u503c\u4fdd\u7559\u6d88\u606f\u6392\u5e8f\uff09\u3001 retries \u5927\u4e8e 0\uff0c\u5e76\u4e14 acks \u5fc5\u987b\u4e3a\u201c\u5168\u90e8\u201d\u3002 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u542f\u7528\u5e42\u7b49\u6027\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002\u5982\u679c\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\u5e76\u4e14\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\uff0c ConfigException \u5219\u4f1a\u629b\u51fa a \u3002 Type: boolean Default: true Valid Values: Importance: low interceptor.classes \u7528\u4f5c\u62e6\u622a\u5668\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.clients.producer.ProducerInterceptor \u63a5\u53e3\u5141\u8bb8\u60a8\u5728\u5c06\u751f\u4ea7\u8005\u6536\u5230\u7684\u8bb0\u5f55\u53d1\u5e03\u5230 Kafka \u96c6\u7fa4\u4e4b\u524d\u62e6\u622a\uff08\u5e76\u53ef\u80fd\u6539\u53d8\uff09\u8fd9\u4e9b\u8bb0\u5f55\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u62e6\u622a\u5668\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low max.in.flight.requests.per.connection \u5ba2\u6237\u7aef\u5728\u963b\u585e\u4e4b\u524d\u5728\u5355\u4e2a\u8fde\u63a5\u4e0a\u53d1\u9001\u7684\u672a\u786e\u8ba4\u8bf7\u6c42\u7684\u6700\u5927\u6570\u91cf\u3002\u6ce8\u610f\uff0c\u5982\u679c\u8be5\u914d\u7f6e\u8bbe\u7f6e\u5927\u4e8e1\u4e14 enable.idempotence \u8bbe\u7f6e\u4e3afalse\uff0c\u5219\u5b58\u5728\u56e0\u91cd\u8bd5\u5bfc\u81f4\u53d1\u9001\u5931\u8d25\u540e\u6d88\u606f\u91cd\u65b0\u6392\u5e8f\u7684\u98ce\u9669\uff08\u5373\u5982\u679c\u542f\u7528\u4e86\u91cd\u8bd5\uff09\uff1b\u5982\u679c\u7981\u7528\u91cd\u8bd5\u6216 enable.idempotence \u8bbe\u7f6e\u4e3a true\uff0c\u5219\u5c06\u4fdd\u7559\u6392\u5e8f\u3002\u6b64\u5916\uff0c\u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42\u6b64\u914d\u7f6e\u7684\u503c\u5c0f\u4e8e\u6216\u7b49\u4e8e 5\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002 Type: int Default: 5 Valid Values: [1\uff0c...] Importance: low metadata.max.age.ms \u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low metadata.max.idle.ms \u63a7\u5236\u751f\u4ea7\u8005\u4e3a\u7a7a\u95f2\u4e3b\u9898\u7f13\u5b58\u5143\u6570\u636e\u7684\u65f6\u95f4\u3002\u5982\u679c\u81ea\u4e0a\u6b21\u751f\u6210\u4e3b\u9898\u4ee5\u6765\u7ecf\u8fc7\u7684\u65f6\u95f4\u8d85\u8fc7\u4e86\u5143\u6570\u636e\u7a7a\u95f2\u6301\u7eed\u65f6\u95f4\uff0c\u5219\u8be5\u4e3b\u9898\u7684\u5143\u6570\u636e\u5c06\u88ab\u9057\u5fd8\uff0c\u5e76\u4e14\u4e0b\u6b21\u8bbf\u95ee\u8be5\u4e3b\u9898\u5c06\u5f3a\u5236\u6267\u884c\u5143\u6570\u636e\u83b7\u53d6\u8bf7\u6c42\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [5000\uff0c...] Importance: low metric.reporters \u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low metrics.num.samples \u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low metrics.recording.level \u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low metrics.sample.window.ms \u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low partitioner.adaptive.partitioning.enable \u5f53\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u9002\u5e94\u4ee3\u7406\u6027\u80fd\u5e76\u5411\u66f4\u5feb\u4ee3\u7406\u4e0a\u6258\u7ba1\u7684\u5206\u533a\u751f\u6210\u66f4\u591a\u6d88\u606f\u3002\u5982\u679c\u4e3a\u201cfalse\u201d\uff0c\u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u7edf\u4e00\u5206\u53d1\u6d88\u606f\u3002\u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\uff0c\u6b64\u8bbe\u7f6e\u65e0\u6548 Type: boolean Default: true Valid Values: Importance: low partitioner.availability.timeout.ms \u5982\u679c\u4ee3\u7406\u5728\u4e00\u6bb5 partitioner.availability.timeout.ms \u65f6\u95f4\u5185\u65e0\u6cd5\u5904\u7406\u6765\u81ea\u5206\u533a\u7684\u751f\u4ea7\u8bf7\u6c42\uff0c\u5219\u5206\u533a\u7a0b\u5e8f\u4f1a\u5c06\u8be5\u5206\u533a\u89c6\u4e3a\u4e0d\u53ef\u7528\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u7981\u7528\u6b64\u903b\u8f91\u3002 partitioner.adaptive.partitioning.enable \u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\u6216\u8bbe\u7f6e\u4e3a\u201cfalse\u201d\uff0c\u5219\u6b64\u8bbe\u7f6e\u65e0\u6548 Type: long Default: 0 Valid Values: [0,...] Importance: low reconnect.backoff.max.ms \u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low reconnect.backoff.ms \u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low retry.backoff.ms \u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low sasl.kerberos.kinit.cmd Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low sasl.kerberos.min.time.before.relogin \u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low sasl.kerberos.ticket.renew.jitter \u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low sasl.kerberos.ticket.renew.window.factor \u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low sasl.login.connect.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.read.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.refresh.buffer.seconds \u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low sasl.login.refresh.min.period.seconds \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low sasl.login.refresh.window.factor \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low sasl.login.refresh.window.jitter \u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low sasl.login.retry.backoff.max.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.login.retry.backoff.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.clock.skew.seconds \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low sasl.oauthbearer.expected.audience \u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low sasl.oauthbearer.expected.issuer \u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.refresh.ms \u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms \u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.scope.claim.name \u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low sasl.oauthbearer.sub.claim.name \u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low security.providers \u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low ssl.cipher.suites \u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low ssl.endpoint.identification.algorithm \u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low ssl.engine.factory.class org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low ssl.keymanager.algorithm \u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low ssl.secure.random.implementation \u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low ssl.trustmanager.algorithm \u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low transaction.timeout.ms \u5728\u534f\u8c03\u5668\u4e3b\u52a8\u4e2d\u6b62\u4e8b\u52a1\u4e4b\u524d\uff0c\u4e8b\u52a1\u4fdd\u6301\u6253\u5f00\u72b6\u6001\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4e8b\u52a1\u7684\u5f00\u59cb\u65f6\u95f4\u662f\u5728\u5c06\u7b2c\u4e00\u4e2a\u5206\u533a\u6dfb\u52a0\u5230\u5176\u4e2d\u65f6\u8bbe\u7f6e\u7684\u3002\u5982\u679c\u8be5\u503c\u5927\u4e8e transaction.max.timeout.ms \u4ee3\u7406\u4e2d\u7684\u8bbe\u7f6e\uff0c\u8bf7\u6c42\u5c06\u5931\u8d25\u5e76\u51fa\u73b0 InvalidTxnTimeoutException \u9519\u8bef\u3002 Type: int Default: 60000 (1 minute) Valid Values: Importance: low transactional.id \u7528\u4e8e\u4e8b\u52a1\u4ea4\u4ed8\u7684 TransactionalId\u3002\u8fd9\u4f7f\u5f97\u8de8\u591a\u4e2a\u751f\u4ea7\u8005\u4f1a\u8bdd\u7684\u53ef\u9760\u6027\u8bed\u4e49\u6210\u4e3a\u53ef\u80fd\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u4fdd\u8bc1\u4f7f\u7528\u76f8\u540c TransactionalId \u7684\u4e8b\u52a1\u5728\u5f00\u59cb\u4efb\u4f55\u65b0\u4e8b\u52a1\u4e4b\u524d\u5df2\u5b8c\u6210\u3002\u5982\u679c\u672a\u63d0\u4f9b TransactionalId\uff0c\u5219\u751f\u4ea7\u8005\u4ec5\u9650\u4e8e\u5e42\u7b49\u4f20\u9012\u3002\u5982\u679c\u914d\u7f6e\u4e86 TransactionalId\uff0c enable.idempotence \u5219\u9690\u542b\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6ca1\u6709\u914d\u7f6eTransactionId\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u80fd\u4f7f\u7528\u4e8b\u52a1\u3002\u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e8b\u52a1\u9700\u8981\u81f3\u5c11\u5305\u542b\u4e09\u4e2a\u4ee3\u7406\u7684\u96c6\u7fa4\uff0c\u8fd9\u662f\u751f\u4ea7\u73af\u5883\u7684\u63a8\u8350\u8bbe\u7f6e\uff1b\u5bf9\u4e8e\u5f00\u53d1\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4ee3\u7406\u8bbe\u7f6e\u6765\u66f4\u6539\u6b64\u8bbe\u7f6e transaction.state.log.replication.factor \u3002 Type: string Default: null Valid Values: non-null string Importance: low 3.4 \u6d88\u8d39\u8005\u914d\u7f6e \u4ee5\u4e0b\u662f\u6d88\u8d39\u8005\u7684\u914d\u7f6e\uff1a key.deserializer \u5b9e\u73b0\u8be5 org.apache.kafka.common.serialization.Deserializer \u63a5\u53e3\u7684\u952e\u7684\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high value.deserializer \u5b9e\u73b0 org.apache.kafka.common.serialization.Deserializer \u63a5\u53e3\u7684\u503c\u7684\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high bootstrap.servers \u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: \"\" Valid Values: non-null string Importance: high fetch.min.bytes \u670d\u52a1\u5668\u5e94\u4e3a\u83b7\u53d6\u8bf7\u6c42\u8fd4\u56de\u7684\u6700\u5c0f\u6570\u636e\u91cf\u3002\u5982\u679c\u53ef\u7528\u6570\u636e\u4e0d\u8db3\uff0c\u8bf7\u6c42\u5c06\u7b49\u5f85\u79ef\u7d2f\u8db3\u591f\u591a\u7684\u6570\u636e\uff0c\u7136\u540e\u518d\u7b54\u590d\u8bf7\u6c42\u3002\u9ed8\u8ba4\u8bbe\u7f6e 1 \u5b57\u8282\u610f\u5473\u7740\uff0c\u53ea\u8981\u6709\u90a3\u4e48\u591a\u5b57\u8282\u7684\u6570\u636e\u53ef\u7528\uff0c\u6216\u8005\u83b7\u53d6\u8bf7\u6c42\u5728\u7b49\u5f85\u6570\u636e\u5230\u8fbe\u65f6\u8d85\u65f6\uff0c\u5c31\u4f1a\u7acb\u5373\u5e94\u7b54\u83b7\u53d6\u8bf7\u6c42\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u8f83\u5927\u7684\u503c\u5c06\u5bfc\u81f4\u670d\u52a1\u5668\u7b49\u5f85\u5927\u91cf\u6570\u636e\u7684\u79ef\u7d2f\uff0c\u8fd9\u53ef\u4ee5\u7a0d\u5fae\u63d0\u9ad8\u670d\u52a1\u5668\u541e\u5410\u91cf\uff0c\u4f46\u4f1a\u5e26\u6765\u4e00\u4e9b\u989d\u5916\u7684\u5ef6\u8fdf\u3002 Type: int Default: 1 Valid Values: [0,...] Importance: high group.id \u6807\u8bc6\u8be5\u6d88\u8d39\u8005\u6240\u5c5e\u7684\u6d88\u8d39\u8005\u7ec4\u7684\u552f\u4e00\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6d88\u8d39\u8005\u4f7f\u7528\u7ec4\u7ba1\u7406\u529f\u80fd subscribe(topic) \u6216\u57fa\u4e8e Kafka \u7684\u504f\u79fb\u91cf\u7ba1\u7406\u7b56\u7565\uff0c\u5219\u9700\u8981\u6b64\u5c5e\u6027\u3002 Type: string Default: null Valid Values: Importance: high heartbeat.interval.ms \u4f7f\u7528 Kafka \u7684\u7ec4\u7ba1\u7406\u8bbe\u65bd\u65f6\u5411\u6d88\u8d39\u8005\u534f\u8c03\u5668\u53d1\u51fa\u5fc3\u8df3\u7684\u9884\u671f\u65f6\u95f4\u95f4\u9694\u3002\u5fc3\u8df3\u7528\u4e8e\u786e\u4fdd\u6d88\u8d39\u8005\u7684\u4f1a\u8bdd\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001\uff0c\u5e76\u5728\u65b0\u6d88\u8d39\u8005\u52a0\u5165\u6216\u79bb\u5f00\u7ec4\u65f6\u4fc3\u8fdb\u91cd\u65b0\u5e73\u8861\u3002\u8be5\u503c\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u4f4e\u4e8e session.timeout.ms \uff0c\u4f46\u901a\u5e38\u4e0d\u5e94\u9ad8\u4e8e\u8be5\u503c\u7684 1/3\u3002\u5b83\u53ef\u4ee5\u8c03\u6574\u5f97\u66f4\u4f4e\uff0c\u4ee5\u63a7\u5236\u6b63\u5e38\u91cd\u65b0\u5e73\u8861\u7684\u9884\u671f\u65f6\u95f4\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: high max.partition.fetch.bytes \u670d\u52a1\u5668\u5c06\u8fd4\u56de\u7684\u6bcf\u4e2a\u5206\u533a\u7684\u6700\u5927\u6570\u636e\u91cf\u3002\u8bb0\u5f55\u7531\u6d88\u8d39\u8005\u6279\u91cf\u83b7\u53d6\u3002\u5982\u679c\u63d0\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u6279\u6b21\u5927\u4e8e\u6b64\u9650\u5236\uff0c\u8be5\u6279\u6b21\u4ecd\u5c06\u88ab\u8fd4\u56de\u4ee5\u786e\u4fdd\u6d88\u8d39\u8005\u53ef\u4ee5\u53d6\u5f97\u8fdb\u5c55\u3002\u4ee3\u7406\u63a5\u53d7\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u662f\u901a\u8fc7 message.max.bytes \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u6216 max.message.bytes \uff08\u4e3b\u9898\u914d\u7f6e\uff09\u5b9a\u4e49\u7684\u3002\u8bf7\u53c2\u9605 fetch.max.bytes \u4ee5\u9650\u5236\u6d88\u8d39\u8005\u8bf7\u6c42\u5927\u5c0f\u3002 Type: int Default: 1048576 (1 mebibyte) Valid Values: [0,...] Importance: high session.timeout.ms \u4f7f\u7528 Kafka \u7684\u7ec4\u7ba1\u7406\u5de5\u5177\u65f6\u7528\u4e8e\u68c0\u6d4b\u5ba2\u6237\u7aef\u6545\u969c\u7684\u8d85\u65f6\u3002\u5ba2\u6237\u7aef\u5b9a\u671f\u53d1\u9001\u5fc3\u8df3\u4ee5\u5411\u4ee3\u7406\u8868\u660e\u5176\u6d3b\u8dc3\u5ea6\u3002\u5982\u679c\u5728\u6b64\u4f1a\u8bdd\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u4ee3\u7406\u6ca1\u6709\u6536\u5230\u5fc3\u8df3\uff0c\u5219\u4ee3\u7406\u5c06\u4ece\u7ec4\u4e2d\u5220\u9664\u8be5\u5ba2\u6237\u7aef\u5e76\u542f\u52a8\u91cd\u65b0\u5e73\u8861\u3002\u8bf7\u6ce8\u610f\uff0c\u8be5\u503c\u5fc5\u987b\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d group.min.session.timeout.ms \u548c\u6240\u914d\u7f6e\u7684\u5141\u8bb8\u8303\u56f4\u5185 group.max.session.timeout.ms \u3002 Type: int Default: 45000 (45 seconds) Valid Values: Importance: high ssl.key.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.keystore.certificate.chain \u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high ssl.keystore.key \u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high ssl.keystore.location \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high ssl.keystore.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.certificate \u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.location \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high ssl.truststore.password \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high allow.auto.create.topics \u8ba2\u9605\u6216\u5206\u914d\u4e3b\u9898\u65f6\u5141\u8bb8\u5728\u4ee3\u7406\u4e0a\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u3002\u4ec5\u5f53\u4ee3\u7406\u5141\u8bb8\u4f7f\u7528\u201cauto.create.topics.enable\u201d\u4ee3\u7406\u914d\u7f6e\u65f6\uff0c\u624d\u4f1a\u81ea\u52a8\u521b\u5efa\u8ba2\u9605\u7684\u4e3b\u9898\u3002\u4f7f\u7528\u65e9\u4e8e 0.11.0 \u7684\u4ee3\u7406\u65f6\uff0c\u6b64\u914d\u7f6e\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u201cfalse\u201d Type: boolean Default: true Valid Values: Importance: medium auto.offset.reset \u5f53 Kafka \u4e2d\u6ca1\u6709\u521d\u59cb\u504f\u79fb\u91cf\u6216\u8005\u5f53\u524d\u504f\u79fb\u91cf\u5728\u670d\u52a1\u5668\u4e0a\u4e0d\u518d\u5b58\u5728\u65f6\uff08\u4f8b\u5982\u56e0\u4e3a\u8be5\u6570\u636e\u5df2\u88ab\u5220\u9664\uff09\u8be5\u600e\u4e48\u529e\uff1a \u6700\u65e9\uff1a\u81ea\u52a8\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65e9\u7684\u504f\u79fb\u91cf \u6700\u65b0\uff1a\u81ea\u52a8\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65b0\u504f\u79fb\u91cf none\uff1a\u5982\u679c\u6ca1\u6709\u627e\u5230\u6d88\u8d39\u8005\u7ec4\u7684\u5148\u524d\u504f\u79fb\u91cf\uff0c\u5219\u5411\u6d88\u8d39\u8005\u629b\u51fa\u5f02\u5e38 \u5176\u4ed6\u4efb\u4f55\u4e8b\u60c5\uff1a\u5411\u6d88\u8d39\u8005\u629b\u51fa\u5f02\u5e38\u3002 Type: string Default: latest Valid Values: [latest, earliest, none] Importance: medium client.dns.lookup \u63a7\u5236\u5ba2\u6237\u7aef\u5982\u4f55\u4f7f\u7528 DNS \u67e5\u627e\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a use_all_dns_ips \uff0c\u5219\u6309\u987a\u5e8f\u8fde\u63a5\u6bcf\u4e2a\u8fd4\u56de\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u5efa\u7acb\u6210\u529f\u8fde\u63a5\u3002\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u5c06\u4f7f\u7528\u4e0b\u4e00\u4e2a IP\u3002\u4e00\u65e6\u6240\u6709 IP \u4f7f\u7528\u4e00\u6b21\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u518d\u6b21\u4ece\u4e3b\u673a\u540d\u89e3\u6790 IP\uff08\u4f46\u662f JVM \u548c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u7f13\u5b58 DNS \u540d\u79f0\u67e5\u627e\uff09\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a resolve_canonical_bootstrap_servers_only \uff0c\u5219\u5c06\u6bcf\u4e2a\u5f15\u5bfc\u5730\u5740\u89e3\u6790\u4e3a\u89c4\u8303\u540d\u79f0\u5217\u8868\u3002\u5728\u5f15\u5bfc\u9636\u6bb5\u4e4b\u540e\uff0c\u5176\u884c\u4e3a\u4e0e \u76f8\u540c use_all_dns_ips \u3002 Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips\uff0cresolve_canonical_bootstrap_servers_only] Importance: medium connections.max.idle.ms \u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 540000 (9 minutes) Valid Values: Importance: medium default.api.timeout.ms \u6307\u5b9a\u5ba2\u6237\u7aef API \u7684\u8d85\u65f6\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u6b64\u914d\u7f6e\u7528\u4f5c\u6240\u6709\u672a\u6307\u5b9a timeout \u53c2\u6570\u7684\u5ba2\u6237\u7aef\u64cd\u4f5c\u7684\u9ed8\u8ba4\u8d85\u65f6\u3002 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: medium enable.auto.commit \u5982\u679c\u4e3a true\uff0c\u6d88\u8d39\u8005\u7684\u504f\u79fb\u91cf\u5c06\u5728\u540e\u53f0\u5b9a\u671f\u63d0\u4ea4\u3002 Type: boolean Default: true Valid Values: Importance: medium exclude.internal.topic \u662f\u5426\u5e94\u4ece\u8ba2\u9605\u4e2d\u6392\u9664\u4e0e\u8ba2\u9605\u6a21\u5f0f\u5339\u914d\u7684\u5185\u90e8\u4e3b\u9898\u3002\u59cb\u7ec8\u53ef\u4ee5\u663e\u5f0f\u8ba2\u9605\u5185\u90e8\u4e3b\u9898\u3002 Type: boolean Default: true Valid Values: Importance: medium fetch.max.bytes \u670d\u52a1\u5668\u5e94\u4e3a\u83b7\u53d6\u8bf7\u6c42\u8fd4\u56de\u7684\u6700\u5927\u6570\u636e\u91cf\u3002\u8bb0\u5f55\u7531\u6d88\u8d39\u8005\u6279\u91cf\u83b7\u53d6\uff0c\u5982\u679c\u83b7\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u6279\u6b21\u5927\u4e8e\u8be5\u503c\uff0c\u4ecd\u7136\u4f1a\u8fd4\u56de\u8be5\u8bb0\u5f55\u6279\u6b21\u4ee5\u786e\u4fdd\u6d88\u8d39\u8005\u80fd\u591f\u53d6\u5f97\u8fdb\u5c55\u3002\u56e0\u6b64\uff0c\u8fd9\u4e0d\u662f\u7edd\u5bf9\u6700\u5927\u503c\u3002\u4ee3\u7406\u63a5\u53d7\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u662f\u901a\u8fc7 message.max.bytes \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u6216 max.message.bytes \uff08\u4e3b\u9898\u914d\u7f6e\uff09\u5b9a\u4e49\u7684\u3002\u8bf7\u6ce8\u610f\uff0c\u6d88\u8d39\u8005\u5e76\u884c\u6267\u884c\u591a\u4e2a\u63d0\u53d6\u3002 Type: int Default: 52428800 (50 mebibytes) Valid Values: [0,...] Importance: medium group.instance.id \u6700\u7ec8\u7528\u6237\u63d0\u4f9b\u7684\u6d88\u8d39\u8005\u5b9e\u4f8b\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002\u53ea\u5141\u8bb8\u975e\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u8bbe\u7f6e\uff0c\u6d88\u8d39\u8005\u5c06\u88ab\u89c6\u4e3a\u9759\u6001\u6210\u5458\uff0c\u8fd9\u610f\u5473\u7740\u6d88\u8d39\u8005\u7ec4\u4e2d\u4efb\u4f55\u65f6\u5019\u53ea\u5141\u8bb8\u6709\u4e00\u4e2a\u5177\u6709\u6b64 ID \u7684\u5b9e\u4f8b\u3002\u8fd9\u53ef\u4ee5\u4e0e\u8f83\u5927\u7684\u4f1a\u8bdd\u8d85\u65f6\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u907f\u514d\u7531\u4e8e\u6682\u65f6\u4e0d\u53ef\u7528\uff08\u4f8b\u5982\u8fdb\u7a0b\u91cd\u65b0\u542f\u52a8\uff09\u800c\u5bfc\u81f4\u7684\u7ec4\u91cd\u65b0\u5e73\u8861\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u6d88\u8d39\u8005\u5c06\u4f5c\u4e3a\u52a8\u6001\u6210\u5458\u52a0\u5165\u8be5\u7ec4\uff0c\u8fd9\u662f\u4f20\u7edf\u884c\u4e3a\u3002 Type: string Default: null Valid Values: non-null string Importance: medium isolation.level \u63a7\u5236\u5982\u4f55\u8bfb\u53d6\u4ee5\u4e8b\u52a1\u65b9\u5f0f\u5199\u5165\u7684\u6d88\u606f\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a read_committed \uff0cconsumer.poll() \u5c06\u4ec5\u8fd4\u56de\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u6d88\u606f\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a read_uncommitted (the default), consumer.poll() will return all messages, even transactional messages which have been aborted. Non-transactional messages will be returned unconditionally in either mode. Messages will always be returned in offset order. Hence, in read_committed mode, consumer.poll() will only return messages up to the last stable offset (LSO), which is the one less than the offset of the first open transaction. In particular any messages appearing after messages belonging to ongoing transactions will be withheld until the relevant transaction has been completed. As a result, read_committed consumers will not be able to read up to the high watermark when there are in flight transactions. Further, when in read_committed the seekToEnd method will return the LSO Type: string Default: read_uncommitted Valid Values: [read_committed, read_uncommitted] Importance: medium max.poll.interval.ms \u4f7f\u7528\u6d88\u8d39\u8005\u7ec4\u7ba1\u7406\u65f6\uff0c\u8c03\u7528 poll() \u4e4b\u95f4\u7684\u6700\u5927\u5ef6\u8fdf\u3002\u8fd9\u5bf9\u6d88\u8d39\u8005\u5728\u83b7\u53d6\u66f4\u591a\u8bb0\u5f55\u4e4b\u524d\u53ef\u4ee5\u7a7a\u95f2\u7684\u65f6\u95f4\u8bbe\u7f6e\u4e86\u4e0a\u9650\u3002\u5982\u679c\u5728\u6b64\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u672a\u8c03\u7528 poll()\uff0c\u5219\u6d88\u8d39\u8005\u5c06\u88ab\u89c6\u4e3a\u5931\u8d25\uff0c\u5e76\u4e14\u7ec4\u5c06\u91cd\u65b0\u5e73\u8861\uff0c\u4ee5\u4fbf\u5c06\u5206\u533a\u91cd\u65b0\u5206\u914d\u7ed9\u53e6\u4e00\u4e2a\u6210\u5458\u3002\u5bf9\u4e8e\u4f7f\u7528\u975e\u7a7a\u7684\u6d88\u8d39\u8005 group.instance.id \u8fbe\u5230\u6b64\u8d85\u65f6\uff0c\u5206\u533a\u4e0d\u4f1a\u7acb\u5373\u91cd\u65b0\u5206\u914d\u3002\u76f8\u53cd\uff0c\u6d88\u8d39\u8005\u5c06\u505c\u6b62\u53d1\u9001\u5fc3\u8df3\uff0c\u5e76\u4e14\u5206\u533a\u5c06\u5728 \u8fc7\u671f\u540e\u91cd\u65b0\u5206\u914d session.timeout.ms \u3002\u8fd9\u53cd\u6620\u4e86\u5df2\u5173\u95ed\u7684\u9759\u6001\u6d88\u8d39\u8005\u7684\u884c\u4e3a\u3002 Type: int Default: 300000 (5 minutes) Valid Values: [1\uff0c...] Importance: medium max.poll.records \u5355\u6b21\u8c03\u7528 poll() \u8fd4\u56de\u7684\u6700\u5927\u8bb0\u5f55\u6570\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9 max.poll.records \u4e0d\u4f1a\u5f71\u54cd\u5e95\u5c42\u7684\u83b7\u53d6\u884c\u4e3a\u3002\u6d88\u8d39\u8005\u5c06\u7f13\u5b58\u6bcf\u4e2a\u83b7\u53d6\u8bf7\u6c42\u7684\u8bb0\u5f55\uff0c\u5e76\u4ece\u6bcf\u6b21\u8f6e\u8be2\u4e2d\u589e\u91cf\u8fd4\u56de\u5b83\u4eec\u3002 Type: int Default: 500 Valid Values: [1\uff0c...] Importance: medium partition.assignment.strategy \u6309\u4f18\u5148\u987a\u5e8f\u6392\u5e8f\u7684\u7c7b\u540d\u79f0\u6216\u7c7b\u7c7b\u578b\u5217\u8868\uff0c\u652f\u6301\u5206\u533a\u5206\u914d\u7b56\u7565\uff0c\u5f53\u4f7f\u7528\u7ec4\u7ba1\u7406\u65f6\uff0c\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u8fd9\u4e9b\u7b56\u7565\u5728\u6d88\u8d39\u8005\u5b9e\u4f8b\u4e4b\u95f4\u5206\u914d\u5206\u533a\u6240\u6709\u6743\u3002\u53ef\u7528\u9009\u9879\u6709\uff1a org.apache.kafka.clients.consumer.RangeAssignor \uff1a\u6309\u4e3b\u9898\u5206\u914d\u5206\u533a\u3002 org.apache.kafka.clients.consumer.RoundRobinAssignor \uff1a\u4ee5\u5faa\u73af\u65b9\u5f0f\u5c06\u5206\u533a\u5206\u914d\u7ed9\u6d88\u8d39\u8005\u3002 org.apache.kafka.clients.consumer.StickyAssignor \uff1a\u4fdd\u8bc1\u5206\u914d\u6700\u5927\u7a0b\u5ea6\u5730\u5e73\u8861\uff0c\u540c\u65f6\u4fdd\u7559\u5c3d\u53ef\u80fd\u591a\u7684\u73b0\u6709\u5206\u533a\u5206\u914d\u3002 org.apache.kafka.clients.consumer.CooperativeStickyAssignor \uff1a\u9075\u5faa\u76f8\u540c\u7684 StickyAssignor \u903b\u8f91\uff0c\u4f46\u5141\u8bb8\u5408\u4f5c\u91cd\u65b0\u5e73\u8861\u3002 \u9ed8\u8ba4\u5206\u914d\u5668\u662f [RangeAssignor, CooperativeStickyAssignor]\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u4f7f\u7528 RangeAssignor\uff0c\u4f46\u5141\u8bb8\u5347\u7ea7\u5230 CooperativeStickyAssignor\uff0c\u53ea\u9700\u4e00\u6b21\u6eda\u52a8\u5f39\u8df3\u5373\u53ef\u4ece\u5217\u8868\u4e2d\u5220\u9664 RangeAssignor\u3002 \u5b9e\u73b0\u8be5 org.apache.kafka.clients.consumer.ConsumerPartitionAssignor \u63a5\u53e3\u5141\u8bb8\u60a8\u63d2\u5165\u81ea\u5b9a\u4e49\u5206\u914d\u7b56\u7565\u3002 Type: list Default: class org.apache.kafka.clients.consumer.RangeAssignor,class org.apache.kafka.clients.consumer.CooperativeStickyAssignor Valid Values: non-null string Importance: medium receive.buffer.bytes \u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 65536 (64 kibibytes) Valid Values: [-1\uff0c...] Importance: medium request.timeout.ms \u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 30000 (30 seconds) Valid Values: [0,...] Importance: medium sasl.client.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium sasl.jaas.config SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium sasl.kerberos.service.name Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium sasl.login.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium sasl.login.class \u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium sasl.mechanism \u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium sasl.oauthbearer.jwks.endpoint.url OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium sasl.oauthbearer.token.endpoint.url OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium security.protocol \u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium send.buffer.bytes \u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium socket.connection.setup.timeout.max.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium socket.connection.setup.timeout.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium ssl.enabled.protocol \u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium ssl.keystore.type \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium ssl.protocol \u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium ssl.provider \u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium ssl.truststore.type \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium auto.commit.interval.ms enable.auto.commit \u5982\u679c\u8bbe\u7f6e\u4e3a\uff0c\u5219\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u81ea\u52a8\u63d0\u4ea4\u5230 Kafka \u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 true \u3002 Type: int Default: 5000 (5 seconds) Valid Values: [0,...] Importance: low auto.jmx.reporter \u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low check.crcs \u81ea\u52a8\u68c0\u67e5\u6d88\u8d39\u8bb0\u5f55\u7684CRC32\u3002\u8fd9\u53ef\u786e\u4fdd\u6d88\u606f\u4e0d\u4f1a\u53d1\u751f\u5728\u7ebf\u6216\u78c1\u76d8\u635f\u574f\u3002\u6b64\u68c0\u67e5\u4f1a\u589e\u52a0\u4e00\u4e9b\u5f00\u9500\uff0c\u56e0\u6b64\u5728\u5bfb\u6c42\u6781\u7aef\u6027\u80fd\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u7981\u7528\u5b83\u3002 Type: boolean Default: true Valid Values: Importance: low client.id \u53d1\u51fa\u8bf7\u6c42\u65f6\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u7684 id \u5b57\u7b26\u4e32\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u901a\u8fc7\u5141\u8bb8\u5728\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u5305\u542b\u903b\u8f91\u5e94\u7528\u7a0b\u5e8f\u540d\u79f0\uff0c\u80fd\u591f\u8ddf\u8e2a IP/\u7aef\u53e3\u4e4b\u5916\u7684\u8bf7\u6c42\u6e90\u3002 Type: string Default: \"\" Valid Values: Importance: low client..rack \u8be5\u5ba2\u6237\u7aef\u7684\u673a\u67b6\u6807\u8bc6\u7b26\u3002\u8fd9\u53ef\u4ee5\u662f\u6307\u793a\u8be5\u5ba2\u6237\u7aef\u7269\u7406\u4f4d\u7f6e\u7684\u4efb\u4f55\u5b57\u7b26\u4e32\u503c\u3002\u5b83\u4e0e\u4ee3\u7406\u914d\u7f6e\u201cbroker.rack\u201d\u76f8\u5bf9\u5e94 Type: string Default: \"\" Valid Values: Importance: low fetch.max.wait.ms \u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u7acb\u5373\u6ee1\u8db3 fetch.min.bytes \u7ed9\u51fa\u7684\u8981\u6c42\uff0c\u5219\u670d\u52a1\u5668\u5728\u5e94\u7b54\u63d0\u53d6\u8bf7\u6c42\u4e4b\u524d\u5c06\u963b\u585e\u7684\u6700\u957f\u65f6\u95f4\u3002 Type: int Default: 500 Valid Values: [0,...] Importance: low interceptor.classes \u7528\u4f5c\u62e6\u622a\u5668\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.clients.consumer.ConsumerInterceptor \u63a5\u53e3\u5141\u8bb8\u60a8\u62e6\u622a\uff08\u5e76\u53ef\u80fd\u6539\u53d8\uff09\u6d88\u8d39\u8005\u6536\u5230\u7684\u8bb0\u5f55\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u62e6\u622a\u5668\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low metadata.max.age.ms \u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low metric.reporters \u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low metrics.num.samples \u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low metrics.recording.level \u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low metrics.sample.window.ms \u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low reconnect.backoff.max.ms \u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low reconnect.backoff.ms \u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low retry.backoff.ms \u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low sasl.kerberos.kinit.cmd Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low sasl.kerberos.min.time.before.relogin \u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low sasl.kerberos.ticket.renew.jitter \u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low sasl.kerberos.ticket.renew.window.factor \u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low sasl.login.connect.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.read.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.refresh.buffer.seconds \u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low sasl.login.refresh.min.period.seconds \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low sasl.login.refresh.window.factor \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low sasl.login.refresh.window.jitter \u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low sasl.login.retry.backoff.max.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.login.retry.backoff.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.clock.skew.seconds \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low sasl.oauthbearer.expected.audience \u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low sasl.oauthbearer.expected.issuer \u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.refresh.ms \u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms \u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.scope.claim.name \u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low sasl.oauthbearer.sub.claim.name \u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low security.providers \u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low ssl.cipher.suites \u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low ssl.endpoint.identification.algorithm \u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low ssl.engine.factory.class org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low ssl.keymanager.algorithm \u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low ssl.secure.random.implementation \u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low ssl.trustmanager.algorithm \u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low 3.5 Kafka\u8fde\u63a5\u914d\u7f6e \u4ee5\u4e0b\u662f Kafka Connect \u6846\u67b6\u7684\u914d\u7f6e\u3002 config.storage.topic \u5b58\u50a8\u8fde\u63a5\u5668\u914d\u7f6e\u7684 Kafka \u4e3b\u9898\u7684\u540d\u79f0 Type: string Default: Valid Values: Importance: high group.id \u6807\u8bc6\u8be5\u5de5\u4f5c\u7ebf\u7a0b\u6240\u5c5e\u7684 Connect \u96c6\u7fa4\u7ec4\u7684\u552f\u4e00\u5b57\u7b26\u4e32\u3002 Type: string Default: Valid Values: Importance: high key.converter Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: Valid Values: Importance: high offsets.storage.topic \u5b58\u50a8\u6e90\u8fde\u63a5\u5668\u504f\u79fb\u91cf\u7684 Kafka \u4e3b\u9898\u7684\u540d\u79f0 Type: string Default: Valid Values: Importance: high status.storage.topic \u5b58\u50a8\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u72b6\u6001\u7684 Kafka \u4e3b\u9898\u7684\u540d\u79f0 Type: string Default: Valid Values: Importance: high value.converter Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: Valid Values: Importance: high bootstrap.servers \u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: localhost:9092 Valid Values: Importance: high exactly.once.source.support \u662f\u5426\u901a\u8fc7\u4f7f\u7528\u4e8b\u52a1\u5199\u5165\u6e90\u8bb0\u5f55\u53ca\u5176\u6e90\u504f\u79fb\u91cf\uff0c\u4ee5\u53ca\u5728\u542f\u52a8\u65b0\u4efb\u52a1\u4e4b\u524d\u4e3b\u52a8\u9694\u79bb\u65e7\u4efb\u52a1\u4ee3\uff0c\u6765\u4e3a\u96c6\u7fa4\u4e2d\u7684\u6e90\u8fde\u63a5\u5668\u542f\u7528\u4e00\u6b21\u6027\u652f\u6301\u3002 \u8981\u5728\u65b0\u96c6\u7fa4\u4e0a\u542f\u7528\u4e00\u6b21\u6027\u6e90\u652f\u6301\uff0c\u8bf7\u5c06\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u201c\u5df2\u542f\u7528\u201d\u3002\u8981\u5728\u73b0\u6709\u96c6\u7fa4\u4e0a\u542f\u7528\u652f\u6301\uff0c\u8bf7\u9996\u5148\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u4e0a\u8bbe\u7f6e\u4e3a\u201c\u51c6\u5907\u201d\uff0c\u7136\u540e\u8bbe\u7f6e\u4e3a\u201c\u542f\u7528\u201d\u3002\u6eda\u52a8\u5347\u7ea7\u53ef\u7528\u4e8e\u8fd9\u4e24\u79cd\u66f4\u6539\u3002\u6709\u5173\u6b64\u529f\u80fd\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e00\u6b21\u6027\u6e90\u652f\u6301\u6587\u6863 \u3002 Type: string Default: disabled Valid Values: (case insensitive) [DISABLED, ENABLED, PREPARING] Importance: high heartbeat.interval.ms \u4f7f\u7528 Kafka \u7684\u7ec4\u7ba1\u7406\u5de5\u5177\u65f6\uff0c\u5411\u7ec4\u534f\u8c03\u5668\u53d1\u51fa\u5fc3\u8df3\u7684\u9884\u671f\u65f6\u95f4\u95f4\u9694\u3002\u5fc3\u8df3\u7528\u4e8e\u786e\u4fdd\u5de5\u4f5c\u4eba\u5458\u7684\u4f1a\u8bdd\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001\uff0c\u5e76\u5728\u65b0\u6210\u5458\u52a0\u5165\u6216\u79bb\u5f00\u7ec4\u65f6\u4fc3\u8fdb\u91cd\u65b0\u5e73\u8861\u3002\u8be5\u503c\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u4f4e\u4e8e session.timeout.ms \uff0c\u4f46\u901a\u5e38\u4e0d\u5e94\u9ad8\u4e8e\u8be5\u503c\u7684 1/3\u3002\u5b83\u53ef\u4ee5\u8c03\u6574\u5f97\u66f4\u4f4e\uff0c\u4ee5\u63a7\u5236\u6b63\u5e38\u91cd\u65b0\u5e73\u8861\u7684\u9884\u671f\u65f6\u95f4\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: high rebalance.timeout.ms \u91cd\u65b0\u5e73\u8861\u5f00\u59cb\u540e\uff0c\u6bcf\u4e2a\u5de5\u4f5c\u4eba\u5458\u52a0\u5165\u8be5\u7ec4\u7684\u6700\u5927\u5141\u8bb8\u65f6\u95f4\u3002\u8fd9\u57fa\u672c\u4e0a\u662f\u5bf9\u6240\u6709\u4efb\u52a1\u5237\u65b0\u4efb\u4f55\u6302\u8d77\u6570\u636e\u548c\u63d0\u4ea4\u504f\u79fb\u91cf\u6240\u9700\u7684\u65f6\u95f4\u7684\u9650\u5236\u3002\u5982\u679c\u8d85\u8fc7\u8d85\u65f6\uff0c\u90a3\u4e48\u8be5worker\u5c06\u4ece\u7ec4\u4e2d\u5220\u9664\uff0c\u8fd9\u5c06\u5bfc\u81f4\u504f\u79fb\u91cf\u63d0\u4ea4\u5931\u8d25\u3002 Type: int Default: 60000 (1 minute) Valid Values: Importance: high session.timeout.ms \u7528\u4e8e\u68c0\u6d4b\u5de5\u4f5c\u5668\u6545\u969c\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u5de5\u4f5c\u7ebf\u7a0b\u5b9a\u671f\u53d1\u9001\u5fc3\u8df3\u4ee5\u5411\u4ee3\u7406\u8868\u660e\u5176\u6d3b\u8dc3\u5ea6\u3002\u5982\u679c\u5728\u6b64\u4f1a\u8bdd\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u4ee3\u7406\u6ca1\u6709\u6536\u5230\u5fc3\u8df3\uff0c\u5219\u4ee3\u7406\u5c06\u4ece\u7ec4\u4e2d\u5220\u9664\u8be5\u5de5\u4f5c\u7ebf\u7a0b\u5e76\u542f\u52a8\u91cd\u65b0\u5e73\u8861\u3002\u8bf7\u6ce8\u610f\uff0c\u8be5\u503c\u5fc5\u987b\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d group.min.session.timeout.ms \u548c\u6240\u914d\u7f6e\u7684\u5141\u8bb8\u8303\u56f4\u5185 group.max.session.timeout.ms \u3002 Type: int Default: 10000 (10 seconds) Valid Values: Importance: high ssl.key.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.keystore.certificate.chain \u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high ssl.keystore.key \u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high ssl.keystore.location \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high ssl.keystore.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.certificate \u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.location \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high ssl.truststore.password \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high client.dns.lookup \u63a7\u5236\u5ba2\u6237\u7aef\u5982\u4f55\u4f7f\u7528 DNS \u67e5\u627e\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a use_all_dns_ips \uff0c\u5219\u6309\u987a\u5e8f\u8fde\u63a5\u6bcf\u4e2a\u8fd4\u56de\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u5efa\u7acb\u6210\u529f\u8fde\u63a5\u3002\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u5c06\u4f7f\u7528\u4e0b\u4e00\u4e2a IP\u3002\u4e00\u65e6\u6240\u6709 IP \u4f7f\u7528\u4e00\u6b21\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u518d\u6b21\u4ece\u4e3b\u673a\u540d\u89e3\u6790 IP\uff08\u4f46\u662f JVM \u548c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u7f13\u5b58 DNS \u540d\u79f0\u67e5\u627e\uff09\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a resolve_canonical_bootstrap_servers_only \uff0c\u5219\u5c06\u6bcf\u4e2a\u5f15\u5bfc\u5730\u5740\u89e3\u6790\u4e3a\u89c4\u8303\u540d\u79f0\u5217\u8868\u3002\u5728\u5f15\u5bfc\u9636\u6bb5\u4e4b\u540e\uff0c\u5176\u884c\u4e3a\u4e0e \u76f8\u540c use_all_dns_ips \u3002 Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips\uff0cresolve_canonical_bootstrap_servers_only] Importance: medium connections.max.idle.ms \u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 540000 (9 minutes) Valid Values: Importance: medium connector.client.config.override.policy \u7684\u5b9e\u73b0\u7684\u7c7b\u540d\u6216\u522b\u540d ConnectorClientConfigOverridePolicy \u3002\u5b9a\u4e49\u8fde\u63a5\u5668\u53ef\u4ee5\u8986\u76d6\u54ea\u4e9b\u5ba2\u6237\u7aef\u914d\u7f6e\u3002\u9ed8\u8ba4\u5b9e\u73b0\u662f\u201cAll\u201d\uff0c\u8fd9\u610f\u5473\u7740\u8fde\u63a5\u5668\u914d\u7f6e\u53ef\u4ee5\u8986\u76d6\u6240\u6709\u5ba2\u6237\u7aef\u5c5e\u6027\u3002\u6846\u67b6\u4e2d\u7684\u5176\u4ed6\u53ef\u80fd\u7684\u7b56\u7565\u5305\u62ec\u201cNone\u201d\uff08\u7981\u6b62\u8fde\u63a5\u5668\u8986\u76d6\u5ba2\u6237\u7aef\u5c5e\u6027\uff09\u548c\u201cPrincipal\u201d\uff08\u5141\u8bb8\u8fde\u63a5\u5668\u4ec5\u8986\u76d6\u5ba2\u6237\u7aef\u4e3b\u4f53\uff09\u3002 Type: string Default: All Valid Values: Importance: medium receive.buffer.bytes \u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 32768\uff0832 KB\uff09 Valid Values: [-1\uff0c...] Importance: medium request.timeout.ms \u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 40000 (40 seconds) Valid Values: [0,...] Importance: medium sasl.client.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium sasl.jaas.config SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium sasl.kerberos.service.name Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium sasl.login.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium sasl.login.class \u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium sasl.mechanism \u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium sasl.oauthbearer.jwks.endpoint.url OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium sasl.oauthbearer.token.endpoint.url OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium security.protocol \u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium send.buffer.bytes \u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium ssl.enabled.protocol \u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium ssl.keystore.type \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium ssl.protocol \u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium ssl.provider \u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium ssl.truststore.type \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium worker.sync.timeout.ms \u5f53\u5de5\u4f5c\u4eba\u5458\u4e0e\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u4e0d\u540c\u6b65\u5e76\u4e14\u9700\u8981\u91cd\u65b0\u540c\u6b65\u914d\u7f6e\u65f6\uff0c\u8bf7\u5728\u653e\u5f03\u3001\u79bb\u5f00\u7ec4\u4e4b\u524d\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u5e76\u5728\u91cd\u65b0\u52a0\u5165\u4e4b\u524d\u7b49\u5f85\u4e00\u6bb5\u9000\u907f\u671f\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: medium worker.unsync.backoff.ms \u5f53\u5de5\u4f5c\u7ebf\u7a0b\u4e0e\u5176\u4ed6\u5de5\u4f5c\u7ebf\u7a0b\u4e0d\u540c\u6b65\u5e76\u4e14\u65e0\u6cd5\u5728worker.sync.timeout.ms\u5185\u8d76\u4e0a\u65f6\uff0c\u8bf7\u5728\u91cd\u65b0\u52a0\u5165\u4e4b\u524d\u79bb\u5f00Connect\u96c6\u7fa4\u8fd9\u4e48\u957f\u65f6\u95f4\u3002 Type: int Default: 300000 (5 minutes) Valid Values: Importance: medium access.control.allow.methods \u901a\u8fc7\u8bbe\u7f6e Access-Control-Allow-Methods \u6807\u5934\u6765\u8bbe\u7f6e\u8de8\u6e90\u8bf7\u6c42\u652f\u6301\u7684\u65b9\u6cd5\u3002Access-Control-Allow-Methods \u6807\u5934\u7684\u9ed8\u8ba4\u503c\u5141\u8bb8 GET\u3001POST \u548c HEAD \u7684\u8de8\u6e90\u8bf7\u6c42\u3002 Type: string Default: \"\" Valid Values: Importance: low access.control.allow.origin \u4e3a REST API \u8bf7\u6c42\u8bbe\u7f6e Access-Control-Allow-Origin \u6807\u5934\u7684\u503c\u3002\u8981\u542f\u7528\u8de8\u6e90\u8bbf\u95ee\uff0c\u8bf7\u5c06\u5176\u8bbe\u7f6e\u4e3a\u5e94\u5141\u8bb8\u8bbf\u95ee API \u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u57df\uff0c\u6216\u201c*\u201d\u4ee5\u5141\u8bb8\u6765\u81ea\u4efb\u4f55\u57df\u7684\u8bbf\u95ee\u9886\u57df\u3002\u9ed8\u8ba4\u503c\u4ec5\u5141\u8bb8\u4ece REST API \u7684\u57df\u8fdb\u884c\u8bbf\u95ee\u3002 Type: string Default: \"\" Valid Values: Importance: low admin.listeners \u7ba1\u7406 REST API \u5c06\u4fa6\u542c\u7684\u4ee5\u9017\u53f7\u5206\u9694\u7684 URI \u5217\u8868\u3002\u652f\u6301\u7684\u534f\u8bae\u662f HTTP \u548c HTTPS\u3002\u7a7a\u5b57\u7b26\u4e32\u5c06\u7981\u7528\u6b64\u529f\u80fd\u3002\u9ed8\u8ba4\u884c\u4e3a\u662f\u4f7f\u7528\u5e38\u89c4\u4fa6\u542c\u5668\uff08\u7531\u201c\u4fa6\u542c\u5668\u201d\u5c5e\u6027\u6307\u5b9a\uff09\u3002 Type: list Default: null Valid Values: List of comma-separated URLs, ex: http://localhost:8080,https://localhost:8443. Importance: low auto.jmx.reporter \u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low client.id \u53d1\u51fa\u8bf7\u6c42\u65f6\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u7684 id \u5b57\u7b26\u4e32\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u901a\u8fc7\u5141\u8bb8\u5728\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u5305\u542b\u903b\u8f91\u5e94\u7528\u7a0b\u5e8f\u540d\u79f0\uff0c\u80fd\u591f\u8ddf\u8e2a IP/\u7aef\u53e3\u4e4b\u5916\u7684\u8bf7\u6c42\u6e90\u3002 Type: string Default: \"\" Valid Values: Importance: low config.providers \u4ee5\u9017\u53f7\u5206\u9694\u7684 ConfigProvider \u7c7b\u540d\u79f0\uff0c\u6309\u6307\u5b9a\u7684\u987a\u5e8f\u52a0\u8f7d\u548c\u4f7f\u7528\u3002\u5b9e\u73b0\u8be5\u63a5\u53e3 ConfigProvider \u5141\u8bb8\u60a8\u66ff\u6362\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u7684\u53d8\u91cf\u5f15\u7528\uff0c\u4f8b\u5982\u5916\u90e8\u5316\u673a\u5bc6\u3002 Type: list Default: \"\" Valid Values: Importance: low config.storage.replication.factor \u521b\u5efa\u914d\u7f6e\u5b58\u50a8\u4e3b\u9898\u65f6\u4f7f\u7528\u7684\u590d\u5236\u56e0\u5b50 Type: short Default: 3 Valid Values: Positive number not larger than the number of brokers in the Kafka cluster, or -1 to use the broker's default Importance: low connect.protocol Kafka Connect \u534f\u8bae\u7684\u517c\u5bb9\u6a21\u5f0f Type: string Default: sessioned Valid Values: [\u6e34\u671b\u3001\u517c\u5bb9\u3001\u4f1a\u8bae] Importance: low header.converter HeaderConverter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u6807\u5934\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSimpleHeaderConverter \u7528\u4e8e\u5c06\u6807\u5934\u503c\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u901a\u8fc7\u63a8\u65ad\u67b6\u6784\u6765\u53cd\u5e8f\u5217\u5316\u5b83\u4eec\u3002 Type: class Default: org.apache.kafka.connect.storage.SimpleHeaderConverter Valid Values: Importance: low inter.worker.key.generation.algorithm \u7528\u4e8e\u751f\u6210\u5185\u90e8\u8bf7\u6c42\u5bc6\u94a5\u7684\u7b97\u6cd5\u3002\u7b97\u6cd5\u201cHmacSHA256\u201d\u5c06\u5728\u652f\u6301\u8be5\u7b97\u6cd5\u7684 JVM \u4e0a\u9ed8\u8ba4\u4f7f\u7528\uff1b\u5728\u5176\u4ed6 JVM \u4e0a\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5e76\u4e14\u5fc5\u987b\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u624b\u52a8\u6307\u5b9a\u6b64\u5c5e\u6027\u7684\u503c\u3002 Type: string Default: HmacSHA256 Valid Values: Any KeyGenerator algorithm supported by the worker JVM Importance: low inter.worker.key.size \u7528\u4e8e\u7b7e\u7f72\u5185\u90e8\u8bf7\u6c42\u7684\u5bc6\u94a5\u7684\u5927\u5c0f\uff08\u4ee5\u4f4d\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u4e3a\u7a7a\uff0c\u5219\u5c06\u4f7f\u7528\u5bc6\u94a5\u751f\u6210\u7b97\u6cd5\u7684\u9ed8\u8ba4\u5bc6\u94a5\u5927\u5c0f\u3002 Type: int Default: null Valid Values: Importance: low inter.worker.key.ttl.ms \u7528\u4e8e\u5185\u90e8\u8bf7\u6c42\u9a8c\u8bc1\u7684\u751f\u6210\u4f1a\u8bdd\u5bc6\u94a5\u7684 TTL\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: int Default: 3600000 (1 hour) Valid Values: [0\uff0c...\uff0c2147483647] Importance: low inter.worker.signature.algorithm \u7528\u4e8e\u7b7e\u7f72\u5185\u90e8\u8bf7\u6c42\u7684\u7b97\u6cd5\u201cinter.worker.signature.algorithm\u201d\u7b97\u6cd5\u5c06\u5728\u652f\u6301\u8be5\u7b97\u6cd5\u7684 JVM \u4e0a\u9ed8\u8ba4\u4f7f\u7528\uff1b\u5728\u5176\u4ed6 JVM \u4e0a\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5e76\u4e14\u5fc5\u987b\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u624b\u52a8\u6307\u5b9a\u6b64\u5c5e\u6027\u7684\u503c\u3002 Type: string Default: HmacSHA256 Valid Values: Any MAC algorithm supported by the worker JVM Importance: low inter.worker.verification.algorithms \u7528\u4e8e\u9a8c\u8bc1\u5185\u90e8\u8bf7\u6c42\u7684\u5141\u8bb8\u7b97\u6cd5\u5217\u8868\uff0c\u5176\u4e2d\u5fc5\u987b\u5305\u62ec\u7528\u4e8e inter.worker.signature.algorithm \u5c5e\u6027\u7684\u7b97\u6cd5\u3002\u7b97\u6cd5\u201c[HmacSHA256]\u201d\u5c06\u7528\u4f5c\u63d0\u4f9b\u5b83\u4eec\u7684 JVM \u7684\u9ed8\u8ba4\u503c\uff1b\u5728\u5176\u4ed6 JVM \u4e0a\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5e76\u4e14\u5fc5\u987b\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u624b\u52a8\u6307\u5b9a\u6b64\u5c5e\u6027\u7684\u503c\u3002 Type: list Default: HmacSHA256 Valid Values: A list of one or more MAC algorithms, each supported by the worker Importance: low listeners REST API \u5c06\u4fa6\u542c\u7684\u4ee5\u9017\u53f7\u5206\u9694\u7684 URI \u5217\u8868\u3002\u652f\u6301\u7684\u534f\u8bae\u662f HTTP \u548c HTTPS\u3002 \u5c06\u4e3b\u673a\u540d\u6307\u5b9a\u4e3a 0.0.0.0 \u4ee5\u7ed1\u5b9a\u5230\u6240\u6709\u63a5\u53e3\u3002 \u5c06\u4e3b\u673a\u540d\u7559\u7a7a\u4ee5\u7ed1\u5b9a\u5230\u9ed8\u8ba4\u63a5\u53e3\u3002 \u5408\u6cd5\u4fa6\u542c\u5668\u5217\u8868\u793a\u4f8b\uff1aHTTP://myhost:8083\u3001HTTPS://myhost:8084 Type: list Default: http://:8083 Valid Values: List of comma-separated URLs, ex: http://localhost:8080,https://localhost:8443. Importance: low metadata.max.age.ms \u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low metric.reporters \u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low metrics.num.samples \u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low metrics.recording.level \u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG] Importance: low metrics.sample.window.ms \u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low offset.flush.interval.ms \u5c1d\u8bd5\u63d0\u4ea4\u4efb\u52a1\u504f\u79fb\u91cf\u7684\u65f6\u95f4\u95f4\u9694\u3002 Type: long Default: 60000 (1 minute) Valid Values: Importance: low offset.flush.timeout.ms \u5728\u53d6\u6d88\u8fdb\u7a0b\u5e76\u6062\u590d\u8981\u5728\u672a\u6765\u5c1d\u8bd5\u4e2d\u63d0\u4ea4\u7684\u504f\u79fb\u6570\u636e\u4e4b\u524d\uff0c\u7b49\u5f85\u8bb0\u5f55\u5237\u65b0\u5e76\u5c06\u5206\u533a\u504f\u79fb\u6570\u636e\u63d0\u4ea4\u5230\u504f\u79fb\u5b58\u50a8\u7684\u6700\u5927\u6beb\u79d2\u6570\u3002\u6b64\u5c5e\u6027\u5bf9\u4e8e\u4ee5\u4e00\u6b21\u6027\u652f\u6301\u8fd0\u884c\u7684\u6e90\u8fde\u63a5\u5668\u6ca1\u6709\u5f71\u54cd\u3002 Type: long Default: 5000 (5 seconds) Valid Values: Importance: low offset.storage.partitions \u521b\u5efaoffset\u5b58\u50a8topic\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u91cf Type: int Default: 25 Valid Values: Positive number, or -1 to use the broker's default Importance: low offset.storage.replication.factor \u521b\u5efa\u504f\u79fb\u5b58\u50a8\u4e3b\u9898\u65f6\u4f7f\u7528\u7684\u590d\u5236\u56e0\u5b50 Type: short Default: 3 Valid Values: Positive number not larger than the number of brokers in the Kafka cluster, or -1 to use the broker's default Importance: low plugin.path \u7531\u9017\u53f7 (,) \u5206\u9694\u7684\u5305\u542b\u63d2\u4ef6\uff08\u8fde\u63a5\u5668\u3001\u8f6c\u6362\u5668\u3001\u8f6c\u6362\uff09\u7684\u8def\u5f84\u5217\u8868\u3002\u8be5\u5217\u8868\u5e94\u7531\u9876\u7ea7\u76ee\u5f55\u7ec4\u6210\uff0c\u5176\u4e2d\u5305\u62ec\u4ee5\u4e0b\u4efb\u610f\u7ec4\u5408\uff1a a) \u76f4\u63a5\u5305\u542b\u5e26\u6709\u63d2\u4ef6\u53ca\u5176\u4f9d\u8d56\u9879\u7684 jar \u7684\u76ee\u5f55 b) \u5e26\u6709\u63d2\u4ef6\u53ca\u5176\u4f9d\u8d56\u9879\u7684 uber-jars c) \u7acb\u5373\u5305\u542b\u63d2\u4ef6\u7c7b\u53ca\u5176\u4f9d\u8d56\u9879\u7684\u5305\u76ee\u5f55\u7ed3\u6784\u7684\u76ee\u5f55\u4f9d\u8d56\u9879 \u6ce8\u610f\uff1a\u5c06\u9075\u5faa\u7b26\u53f7\u94fe\u63a5\u6765\u53d1\u73b0\u4f9d\u8d56\u9879\u6216\u63d2\u4ef6\u3002 \u793a\u4f8b\uff1aplugin.path=/usr/local/share/java,/usr/local/share/kafka/plugins,/opt/connectors \u4e0d\u8981\u5728\u6b64\u5c5e\u6027\u4e2d\u4f7f\u7528\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u53d8\u91cf\uff0c\u56e0\u4e3a\u539f\u59cb\u8def\u5f84\u7531\u5de5\u4f5c\u7a0b\u5e8f\u7684\u626b\u63cf\u4eea\u4f7f\u7528\u5728\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u521d\u59cb\u5316\u5e76\u7528\u4e8e\u66ff\u6362\u53d8\u91cf\u4e4b\u524d\u3002 Type: list Default: null Valid Values: Importance: low reconnect.backoff.max.ms \u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low reconnect.backoff.ms \u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low response.http.headers.config REST API HTTP \u54cd\u5e94\u6807\u5934\u7684\u89c4\u5219 Type: string Default: \"\" Valid Values: \u9017\u53f7\u5206\u9694\u7684\u6807\u5934\u89c4\u5219\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6807\u5934\u89c4\u5219\u7684\u683c\u5f0f\u4e3a '[action] [\u6807\u5934\u540d\u79f0]:[\u6807\u5934\u503c]'\uff0c\u5982\u679c\u6807\u5934\u89c4\u5219\u7684\u4efb\u4f55\u90e8\u5206\u5305\u542b\u9017\u53f7\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u7528\u53cc\u5f15\u53f7\u5f15\u8d77\u6765 Importance: low rest.advertised.host.name \u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u9879\uff0c\u5219\u8fd9\u5c31\u662f\u5c06\u63d0\u4f9b\u7ed9\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u8fdb\u884c\u8fde\u63a5\u7684\u4e3b\u673a\u540d\u3002 Type: string Default: null Valid Values: Importance: low rest.advertised.listener \u8bbe\u7f6e\u5c06\u63d0\u4f9b\u7ed9\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u4f7f\u7528\u7684\u5e7f\u544a\u4fa6\u542c\u5668\uff08HTTP \u6216 HTTPS\uff09\u3002 Type: string Default: null Valid Values: Importance: low rest.advertised.port \u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u7aef\u53e3\uff0c\u5219\u8be5\u7aef\u53e3\u5c06\u63d0\u4f9b\u7ed9\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u8fdb\u884c\u8fde\u63a5\u3002 Type: int Default: null Valid Values: Importance: low rest.extension.class \u4ee5\u9017\u53f7\u5206\u9694\u7684 ConnectRestExtension \u7c7b\u540d\u79f0\uff0c\u6309\u6307\u5b9a\u7684\u987a\u5e8f\u52a0\u8f7d\u548c\u8c03\u7528\u3002\u5b9e\u73b0\u8be5\u63a5\u53e3 ConnectRestExtension \u5141\u8bb8\u60a8\u5c06\u7528\u6237\u5b9a\u4e49\u7684\u8d44\u6e90\uff08\u4f8b\u5982\u8fc7\u6ee4\u5668\uff09\u6ce8\u5165 Connect \u7684 REST API\u3002\u901a\u5e38\u7528\u4e8e\u6dfb\u52a0\u81ea\u5b9a\u4e49\u529f\u80fd\uff0c\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u3001\u5b89\u5168\u6027\u7b49\u3002 Type: list Default: \"\" Valid Values: Importance: low retry.backoff.ms \u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low sasl.kerberos.kinit.cmd Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low sasl.kerberos.min.time.before.relogin \u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low sasl.kerberos.ticket.renew.jitter \u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low sasl.kerberos.ticket.renew.window.factor \u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low sasl.login.connect.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.read.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.refresh.buffer.seconds \u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low sasl.login.refresh.min.period.seconds \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low sasl.login.refresh.window.factor \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low sasl.login.refresh.window.jitter \u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low sasl.login.retry.backoff.max.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.login.retry.backoff.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.clock.skew.seconds \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low sasl.oauthbearer.expected.audience \u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low sasl.oauthbearer.expected.issuer \u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.refresh.ms \u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms \u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.scope.claim.name \u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low sasl.oauthbearer.sub.claim.name \u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low scheduled.rebalance.max.delay.ms \u4e3a\u7b49\u5f85\u4e00\u540d\u6216\u591a\u540d\u79bb\u804c\u5de5\u4f5c\u4eba\u5458\u8fd4\u56de\u800c\u5b89\u6392\u7684\u6700\u5927\u5ef6\u8fdf\uff0c\u7136\u540e\u518d\u91cd\u65b0\u5e73\u8861\u5176\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u5e76\u5c06\u5176\u91cd\u65b0\u5206\u914d\u7ed9\u7ec4\u3002\u5728\u6b64\u671f\u95f4\uff0c\u79bb\u804c\u5458\u5de5\u7684\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u4ecd\u672a\u5206\u914d Type: int Default: 300000 (5 minutes) Valid Values: [0\uff0c...\uff0c2147483647] Importance: low socket.connection.setup.timeout.max.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low socket.connection.setup.timeout.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: [0,...] Importance: low ssl.cipher.suites \u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low ssl.client.auth \u914d\u7f6e kafka \u4ee3\u7406\u6765\u8bf7\u6c42\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002\u4ee5\u4e0b\u8bbe\u7f6e\u662f\u5e38\u89c1\u7684\uff1a ssl.client.auth=required \u5982\u679c\u8bbe\u7f6e\u4e3a\u5fc5\u9700\uff0c\u5219\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 ssl.client.auth=requested \u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u662f\u53ef\u9009\u7684\u3002\u4e0e\u5fc5\u9700\u7684\u4e0d\u540c\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u9009\u9879\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u9009\u62e9\u4e0d\u63d0\u4f9b\u6709\u5173\u5176\u81ea\u8eab\u7684\u8eab\u4efd\u9a8c\u8bc1\u4fe1\u606f ssl.client.auth=none \u8fd9\u610f\u5473\u7740\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: none Valid Values: [required, requested, none] Importance: low ssl.endpoint.identification.algorithm \u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low ssl.engine.factory.class org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low ssl.keymanager.algorithm \u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low ssl.secure.random.implementation \u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low ssl.trustmanager.algorithm \u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low status.storage.partitions \u521b\u5efa\u72b6\u6001\u5b58\u50a8topic\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u91cf Type: int Default: 5 Valid Values: Positive number, or -1 to use the broker's default Importance: low status.storage.replication.factor \u521b\u5efa\u72b6\u6001\u5b58\u50a8\u4e3b\u9898\u65f6\u4f7f\u7528\u7684\u590d\u5236\u56e0\u5b50 Type: short Default: 3 Valid Values: Positive number not larger than the number of brokers in the Kafka cluster, or -1 to use the broker's default Importance: low task.shutdown.graceful.timeout.ms \u7b49\u5f85\u4efb\u52a1\u6b63\u5e38\u5173\u95ed\u7684\u65f6\u95f4\u3002\u8fd9\u662f\u603b\u65f6\u95f4\uff0c\u800c\u4e0d\u662f\u6bcf\u4e2a\u4efb\u52a1\u7684\u65f6\u95f4\u3002\u6240\u6709\u4efb\u52a1\u90fd\u5df2\u89e6\u53d1\u5173\u95ed\uff0c\u7136\u540e\u6309\u987a\u5e8f\u7b49\u5f85\u3002 Type: long Default: 5000 (5 seconds) Valid Values: Importance: low topic.create.enable \u5f53\u6e90\u8fde\u63a5\u5668\u914d\u7f6e\u4e86\u201ctopic.creation.\u201d\u5c5e\u6027\u65f6\uff0c\u662f\u5426\u5141\u8bb8\u81ea\u52a8\u521b\u5efa\u6e90\u8fde\u63a5\u5668\u4f7f\u7528\u7684\u4e3b\u9898\u3002\u6bcf\u4e2a\u4efb\u52a1\u90fd\u5c06\u4f7f\u7528\u7ba1\u7406\u5ba2\u6237\u7aef\u6765\u521b\u5efa\u5176\u4e3b\u9898\uff0c\u5e76\u4e14\u4e0d\u4f1a\u4f9d\u8d56 Kafka \u4ee3\u7406\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u3002 Type: boolean Default: true Valid Values: Importance: low topic.tracking.allow.reset \u5982\u679c\u8bbe\u7f6e\u4e3a true\uff0c\u5219\u5141\u8bb8\u7528\u6237\u8bf7\u6c42\u91cd\u7f6e\u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\u3002 Type: boolean Default: true Valid Values: Importance: low topic.tracking.enable \u542f\u7528\u5728\u8fd0\u884c\u65f6\u8ddf\u8e2a\u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\u3002 Type: boolean Default: true Valid Values: Importance: low 3.5.1 \u6e90\u8fde\u63a5\u5668\u914d\u7f6e \u4ee5\u4e0b\u662f\u6e90\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u3002 name \u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u5168\u5c40\u552f\u4e00\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string without ISO control characters Importance: high connector.class \u6b64\u8fde\u63a5\u5668\u7684\u7c7b\u7684\u540d\u79f0\u6216\u522b\u540d\u3002\u5fc5\u987b\u662f org.apache.kafka.connect.connector.Connector \u7684\u5b50\u7c7b\u3002\u5982\u679c\u8fde\u63a5\u5668\u662forg.apache.kafka.connect.file.FileStreamSinkConnector\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u5168\u540d\uff0c\u6216\u8005\u4f7f\u7528\u201cFileStreamSink\u201d\u6216\u201cFileStreamSinkConnector\u201d\u4f7f\u914d\u7f6e\u66f4\u77ed\u4e00\u4e9b Type: string Default: Valid Values: Importance: high tasks.max \u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u6700\u5927\u4efb\u52a1\u6570\u3002 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high key.converter Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low value.converter Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low header.converter HeaderConverter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u6807\u5934\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSimpleHeaderConverter \u7528\u4e8e\u5c06\u6807\u5934\u503c\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u901a\u8fc7\u63a8\u65ad\u67b6\u6784\u6765\u53cd\u5e8f\u5217\u5316\u5b83\u4eec\u3002 Type: class Default: null Valid Values: Importance: low config.action.reload \u5f53\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u7684\u66f4\u6539\u5bfc\u81f4\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u5c5e\u6027\u53d1\u751f\u66f4\u6539\u65f6\uff0cConnect \u5e94\u5bf9\u8fde\u63a5\u5668\u6267\u884c\u7684\u64cd\u4f5c\u3002\u503c\u201cnone\u201d\u8868\u793a Connect \u5c06\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u201crestart\u201d\u503c\u8868\u793a Connect \u5e94\u4f7f\u7528\u66f4\u65b0\u7684\u914d\u7f6e\u5c5e\u6027\u91cd\u65b0\u542f\u52a8/\u91cd\u65b0\u52a0\u8f7d\u8fde\u63a5\u5668\u3002\u5982\u679c\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u6307\u793a\u914d\u7f6e\u503c\u5c06\u6765\u4f1a\u8fc7\u671f\uff0c\u5219\u5b9e\u9645\u4e0a\u53ef\u80fd\u4f1a\u5728\u5c06\u6765\u5b89\u6392\u91cd\u65b0\u542f\u52a8\u3002 Type: string Default: restart Valid Values: [none, restart] Importance: low transforms \u5e94\u7528\u4e8e\u8bb0\u5f55\u7684\u8f6c\u6362\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: \u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u552f\u4e00\u7684\u8f6c\u6362\u522b\u540d Importance: low predicates \u8f6c\u6362\u4f7f\u7528\u7684\u8c13\u8bcd\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: non-null string, unique predicate aliases Importance: low errors.retry.timeout \u91cd\u65b0\u5c1d\u8bd5\u5931\u8d25\u64cd\u4f5c\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u4f1a\u5c1d\u8bd5\u91cd\u8bd5\u3002\u4f7f\u7528 -1 \u8fdb\u884c\u65e0\u9650\u91cd\u8bd5\u3002 Type: long Default: 0 Valid Values: Importance: medium errors.retry.delay.max.ms \u8fde\u7eed\u91cd\u8bd5\u4e4b\u95f4\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4e00\u65e6\u8fbe\u5230\u6b64\u9650\u5236\uff0c\u6296\u52a8\u5c31\u4f1a\u6dfb\u52a0\u5230\u5ef6\u8fdf\u4e2d\uff0c\u4ee5\u9632\u6b62\u96f7\u7fa4\u95ee\u9898\u3002 Type: long Default: 60000 (1 minute) Valid Values: Importance: medium errors.tolerance \u8fde\u63a5\u5668\u64cd\u4f5c\u671f\u95f4\u5bb9\u5fcd\u9519\u8bef\u7684\u884c\u4e3a\u3002\u201cnone\u201d\u662f\u9ed8\u8ba4\u503c\uff0c\u8868\u793a\u4efb\u4f55\u9519\u8bef\u90fd\u5c06\u5bfc\u81f4\u8fde\u63a5\u5668\u4efb\u52a1\u7acb\u5373\u5931\u8d25\uff1b\u201call\u201d\u66f4\u6539\u884c\u4e3a\u4ee5\u8df3\u8fc7\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u3002 Type: string Default: none Valid Values: [none, all] Importance: medium errors.log.enable \u5982\u679c\u4e3a true\uff0c\u5219\u5c06\u6bcf\u4e2a\u9519\u8bef\u4ee5\u53ca\u5931\u8d25\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u5199\u5165 Connect \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6b64\u503c\u4e3a\u201cfalse\u201d\uff0c\u56e0\u6b64\u4ec5\u62a5\u544a\u4e0d\u80fd\u5bb9\u5fcd\u7684\u9519\u8bef\u3002 Type: boolean Default: false Valid Values: Importance: medium errors.log.include.messages \u662f\u5426\u5728\u65e5\u5fd7\u4e2d\u5305\u542b\u5bfc\u81f4\u5931\u8d25\u7684\u8fde\u63a5\u8bb0\u5f55\u3002\u5bf9\u4e8e\u63a5\u6536\u5668\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u4e3b\u9898\u3001\u5206\u533a\u3001\u504f\u79fb\u91cf\u548c\u65f6\u95f4\u6233\u3002\u5bf9\u4e8e\u6e90\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u952e\u548c\u503c\uff08\u53ca\u5176\u6a21\u5f0f\uff09\u3001\u6240\u6709\u6807\u5934\u4ee5\u53ca\u65f6\u95f4\u6233\u3001Kafka \u4e3b\u9898\u3001Kafka \u5206\u533a\u3001\u6e90\u5206\u533a\u548c\u6e90\u504f\u79fb\u91cf\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd9\u662f\u201cfalse\u201d\uff0c\u8fd9\u5c06\u963b\u6b62\u8bb0\u5f55\u952e\u3001\u503c\u548c\u6807\u5934\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u3002 Type: boolean Default: false Valid Values: Importance: medium topic.creation.groups \u7531\u6e90\u8fde\u63a5\u5668\u521b\u5efa\u7684\u4e3b\u9898\u914d\u7f6e\u7ec4 Type: list Default: \"\" Valid Values: non-null string, unique topic creation groups Importance: low exactly.once.support \u5141\u8bb8\u7684\u503c\u662f\u8bf7\u6c42\u7684\u3001\u5fc5\u9700\u7684\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u201c\u5fc5\u9700\u201d\uff0c\u5219\u5f3a\u5236\u5bf9\u8fde\u63a5\u5668\u8fdb\u884c\u9884\u68c0\uff0c\u4ee5\u786e\u4fdd\u5b83\u53ef\u4ee5\u4f7f\u7528\u7ed9\u5b9a\u7684\u914d\u7f6e\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002\u67d0\u4e9b\u8fde\u63a5\u5668\u53ef\u80fd\u80fd\u591f\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\uff0c\u4f46\u4e0d\u4f1a\u5411 Connect \u53d1\u51fa\u4fe1\u53f7\u8868\u660e\u5b83\u4eec\u652f\u6301\u6b64\u529f\u80fd\uff1b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5728\u521b\u5efa\u8fde\u63a5\u5668\u4e4b\u524d\u5e94\u4ed4\u7ec6\u67e5\u9605\u8fde\u63a5\u5668\u7684\u6587\u6863\uff0c\u5e76\u4e14\u8be5\u5c5e\u6027\u7684\u503c\u5e94\u8bbe\u7f6e\u4e3a\u201c\u8bf7\u6c42\u201d\u3002\u6b64\u5916\uff0c\u5982\u679c\u8be5\u503c\u8bbe\u7f6e\u4e3a\u201c\u5fc5\u9700\u201d\uff0c\u4f46\u6267\u884c\u9884\u68c0\u9a8c\u8bc1\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6ca1\u6709\u4e3a\u6e90\u8fde\u63a5\u5668\u542f\u7528exactly.once.support\uff0c\u5219\u521b\u5efa\u6216\u9a8c\u8bc1\u8fde\u63a5\u5668\u7684\u8bf7\u6c42\u5c06\u5931\u8d25\u3002 Type: string Default: requested Valid Values: (case insensitive) [REQUIRED, REQUESTED] Importance: medium transaction.boundary \u5141\u8bb8\u7684\u503c\u4e3a\uff1a\u8f6e\u8be2\u3001\u95f4\u9694\u3001\u8fde\u63a5\u5668\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u201c\u8f6e\u8be2\u201d\uff0c\u5219\u5c06\u4e3a\u8be5\u8fde\u63a5\u5668\u4e2d\u7684\u6bcf\u4e2a\u4efb\u52a1\u63d0\u4f9b\u7ed9 Connect \u7684\u6bcf\u6279\u8bb0\u5f55\u542f\u52a8\u5e76\u63d0\u4ea4\u4e00\u4e2a\u65b0\u7684\u751f\u4ea7\u8005\u4e8b\u52a1\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u201c\u8fde\u63a5\u5668\u201d\uff0c\u5219\u4f9d\u8d56\u4e8e\u8fde\u63a5\u5668\u5b9a\u4e49\u7684\u4e8b\u52a1\u8fb9\u754c\uff1b\u8bf7\u6ce8\u610f\uff0c\u5e76\u975e\u6240\u6709\u8fde\u63a5\u5668\u90fd\u80fd\u591f\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c1d\u8bd5\u4f7f\u7528\u6b64\u503c\u5b9e\u4f8b\u5316\u8fde\u63a5\u5668\u5c06\u4f1a\u5931\u8d25\u3002\u6700\u540e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a\u201cinterval\u201d\uff0c\u5219\u4ec5\u5728\u7528\u6237\u5b9a\u4e49\u7684\u65f6\u95f4\u95f4\u9694\u8fc7\u53bb\u540e\u63d0\u4ea4\u4e8b\u52a1\u3002 Type: string Default: poll Valid Values: (case insensitive) [INTERVAL, POLL, CONNECTOR] Importance: medium transaction.boundary.interval.ms \u5982\u679c\u201ctransaction.boundary\u201d\u8bbe\u7f6e\u4e3a\u201cinterval\u201d\uff0c\u5219\u786e\u5b9a\u8fde\u63a5\u5668\u4efb\u52a1\u63d0\u4ea4\u751f\u4ea7\u8005\u4e8b\u52a1\u7684\u65f6\u95f4\u95f4\u9694\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u4e3a\u5de5\u4f5c\u7ebf\u7a0b\u7ea7\u522b\u201coffset.flush.interval.ms\u201d\u5c5e\u6027\u7684\u503c\u3002\u5982\u679c\u6307\u5b9a\u4e86\u4e0d\u540c\u7684 transaction.boundary \u5219\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u3002 Type: long Default: null Valid Values: [0,...] Importance: low offsets.storage.topic \u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u5355\u72ec\u504f\u79fb\u4e3b\u9898\u7684\u540d\u79f0\u3002\u5982\u679c\u4e3a\u7a7a\u6216\u672a\u6307\u5b9a\uff0c\u5219\u5c06\u4f7f\u7528\u5de5\u4f5c\u4eba\u5458\u7684\u5168\u5c40\u504f\u79fb\u91cf\u4e3b\u9898\u540d\u79f0\u3002\u5982\u679c\u6307\u5b9a\uff0c\u5982\u679c\u8be5\u8fde\u63a5\u5668\u7684\u76ee\u6807 Kafka \u96c6\u7fa4\u4e0a\u5c1a\u4e0d\u5b58\u5728\u504f\u79fb\u91cf\u4e3b\u9898\uff0c\u5219\u5c06\u521b\u5efa\u8be5\u504f\u79fb\u91cf\u4e3b\u9898\uff08\u5982\u679c\u8fde\u63a5\u5668\u751f\u4ea7\u8005\u7684 bootstrap.servers \u5c5e\u6027\u5df2\u88ab\u8bbe\u7f6e\uff0c\u5219\u8be5\u504f\u79fb\u91cf\u4e3b\u9898\u53ef\u80fd\u4e0e\u7528\u4e8e\u5de5\u4f5c\u7ebf\u7a0b\u5168\u5c40\u504f\u79fb\u91cf\u4e3b\u9898\u7684\u4e3b\u9898\u4e0d\u540c\uff09\u4ece\u5de5\u4eba\u7684\u8986\u76d6\uff09\u3002\u4ec5\u9002\u7528\u4e8e\u5206\u5e03\u5f0f\u6a21\u5f0f\uff1b\u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\uff0c\u8bbe\u7f6e\u8be5\u5c5e\u6027\u5c06\u4e0d\u8d77\u4f5c\u7528\u3002 Type: string Default: null Valid Values: non-null string Importance: low 3.5.2 \u63a5\u6536\u5668\u8fde\u63a5\u5668\u914d\u7f6e \u4ee5\u4e0b\u662f\u63a5\u6536\u5668\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u3002 name \u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u5168\u5c40\u552f\u4e00\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string without ISO control characters Importance: high connector.class \u6b64\u8fde\u63a5\u5668\u7684\u7c7b\u7684\u540d\u79f0\u6216\u522b\u540d\u3002\u5fc5\u987b\u662f org.apache.kafka.connect.connector.Connector \u7684\u5b50\u7c7b\u3002\u5982\u679c\u8fde\u63a5\u5668\u662forg.apache.kafka.connect.file.FileStreamSinkConnector\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u5168\u540d\uff0c\u6216\u8005\u4f7f\u7528\u201cFileStreamSink\u201d\u6216\u201cFileStreamSinkConnector\u201d\u4f7f\u914d\u7f6e\u66f4\u77ed\u4e00\u4e9b Type: string Default: Valid Values: Importance: high tasks.max \u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u6700\u5927\u4efb\u52a1\u6570\u3002 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high topics \u8981\u4f7f\u7528\u7684\u4e3b\u9898\u5217\u8868\uff0c\u4ee5\u9017\u53f7\u5206\u9694 Type: list Default: \"\" Valid Values: Importance: high topics.regex \u63d0\u4f9b\u8981\u4f7f\u7528\u7684\u4e3b\u9898\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5728\u5e95\u5c42\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u88ab\u7f16\u8bd1\u4e3a java.util.regex.Pattern . \u4ec5\u5e94\u6307\u5b9a topic \u6216 topic.regex \u4e4b\u4e00\u3002 Type: string Default: \"\" Valid Values: \u6709\u6548\u7684\u6b63\u5219\u8868\u8fbe\u5f0f Importance: high key.converter Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low value.converter Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low header.converter HeaderConverter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u6807\u5934\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSimpleHeaderConverter \u7528\u4e8e\u5c06\u6807\u5934\u503c\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u901a\u8fc7\u63a8\u65ad\u67b6\u6784\u6765\u53cd\u5e8f\u5217\u5316\u5b83\u4eec\u3002 Type: class Default: null Valid Values: Importance: low config.action.reload \u5f53\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u7684\u66f4\u6539\u5bfc\u81f4\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u5c5e\u6027\u53d1\u751f\u66f4\u6539\u65f6\uff0cConnect \u5e94\u5bf9\u8fde\u63a5\u5668\u6267\u884c\u7684\u64cd\u4f5c\u3002\u503c\u201cnone\u201d\u8868\u793a Connect \u5c06\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u201crestart\u201d\u503c\u8868\u793a Connect \u5e94\u4f7f\u7528\u66f4\u65b0\u7684\u914d\u7f6e\u5c5e\u6027\u91cd\u65b0\u542f\u52a8/\u91cd\u65b0\u52a0\u8f7d\u8fde\u63a5\u5668\u3002\u5982\u679c\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u6307\u793a\u914d\u7f6e\u503c\u5c06\u6765\u4f1a\u8fc7\u671f\uff0c\u5219\u5b9e\u9645\u4e0a\u53ef\u80fd\u4f1a\u5728\u5c06\u6765\u5b89\u6392\u91cd\u65b0\u542f\u52a8\u3002 Type: string Default: restart Valid Values: [none, restart] Importance: low transforms \u5e94\u7528\u4e8e\u8bb0\u5f55\u7684\u8f6c\u6362\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: \u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u552f\u4e00\u7684\u8f6c\u6362\u522b\u540d Importance: low predicates \u8f6c\u6362\u4f7f\u7528\u7684\u8c13\u8bcd\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: non-null string, unique predicate aliases Importance: low errors.retry.timeout \u91cd\u65b0\u5c1d\u8bd5\u5931\u8d25\u64cd\u4f5c\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u4f1a\u5c1d\u8bd5\u91cd\u8bd5\u3002\u4f7f\u7528 -1 \u8fdb\u884c\u65e0\u9650\u91cd\u8bd5\u3002 Type: long Default: 0 Valid Values: Importance: medium errors.retry.delay.max.ms \u8fde\u7eed\u91cd\u8bd5\u4e4b\u95f4\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4e00\u65e6\u8fbe\u5230\u6b64\u9650\u5236\uff0c\u6296\u52a8\u5c31\u4f1a\u6dfb\u52a0\u5230\u5ef6\u8fdf\u4e2d\uff0c\u4ee5\u9632\u6b62\u96f7\u7fa4\u95ee\u9898\u3002 Type: long Default: 60000 (1 minute) Valid Values: Importance: medium errors.tolerance \u8fde\u63a5\u5668\u64cd\u4f5c\u671f\u95f4\u5bb9\u5fcd\u9519\u8bef\u7684\u884c\u4e3a\u3002\u201cnone\u201d\u662f\u9ed8\u8ba4\u503c\uff0c\u8868\u793a\u4efb\u4f55\u9519\u8bef\u90fd\u5c06\u5bfc\u81f4\u8fde\u63a5\u5668\u4efb\u52a1\u7acb\u5373\u5931\u8d25\uff1b\u201call\u201d\u66f4\u6539\u884c\u4e3a\u4ee5\u8df3\u8fc7\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u3002 Type: string Default: none Valid Values: [none, all] Importance: medium errors.log.enable \u5982\u679c\u4e3a true\uff0c\u5219\u5c06\u6bcf\u4e2a\u9519\u8bef\u4ee5\u53ca\u5931\u8d25\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u5199\u5165 Connect \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6b64\u503c\u4e3a\u201cfalse\u201d\uff0c\u56e0\u6b64\u4ec5\u62a5\u544a\u4e0d\u80fd\u5bb9\u5fcd\u7684\u9519\u8bef\u3002 Type: boolean Default: false Valid Values: Importance: medium errors.log.include.messages \u662f\u5426\u5728\u65e5\u5fd7\u4e2d\u5305\u542b\u5bfc\u81f4\u5931\u8d25\u7684\u8fde\u63a5\u8bb0\u5f55\u3002\u5bf9\u4e8e\u63a5\u6536\u5668\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u4e3b\u9898\u3001\u5206\u533a\u3001\u504f\u79fb\u91cf\u548c\u65f6\u95f4\u6233\u3002\u5bf9\u4e8e\u6e90\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u952e\u548c\u503c\uff08\u53ca\u5176\u6a21\u5f0f\uff09\u3001\u6240\u6709\u6807\u5934\u4ee5\u53ca\u65f6\u95f4\u6233\u3001Kafka \u4e3b\u9898\u3001Kafka \u5206\u533a\u3001\u6e90\u5206\u533a\u548c\u6e90\u504f\u79fb\u91cf\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd9\u662f\u201cfalse\u201d\uff0c\u8fd9\u5c06\u963b\u6b62\u8bb0\u5f55\u952e\u3001\u503c\u548c\u6807\u5934\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u3002 Type: boolean Default: false Valid Values: Importance: medium errors.deadletterqueue.topic.name \u7528\u4f5c\u6b7b\u4fe1\u961f\u5217 (DLQ) \u7684\u4e3b\u9898\u540d\u79f0\uff0c\u7528\u4e8e\u5904\u7406\u7531\u6b64\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6216\u5176\u8f6c\u6362\u6216\u8f6c\u6362\u5668\u65f6\u5bfc\u81f4\u9519\u8bef\u7684\u6d88\u606f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e3b\u9898\u540d\u79f0\u4e3a\u7a7a\uff0c\u8fd9\u610f\u5473\u7740 DLQ \u4e2d\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u6d88\u606f\u3002 Type: string Default: \"\" Valid Values: Importance: medium errors.deadletterqueue.topic.replication.factor \u5f53\u6b7b\u4fe1\u961f\u5217\u4e3b\u9898\u5c1a\u4e0d\u5b58\u5728\u65f6\uff0c\u7528\u4e8e\u521b\u5efa\u8be5\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u3002 Type: short Default: 3 Valid Values: Importance: medium errors.deadletterqueue.context.headers.enable \u5982\u679c\u4e3a true\uff0c\u5219\u5c06\u5305\u542b\u9519\u8bef\u4e0a\u4e0b\u6587\u7684\u6807\u5934\u6dfb\u52a0\u5230\u5199\u5165\u6b7b\u4fe1\u961f\u5217\u7684\u6d88\u606f\u4e2d\u3002\u4e3a\u4e86\u907f\u514d\u4e0e\u539f\u59cb\u8bb0\u5f55\u4e2d\u7684\u6807\u5934\u51b2\u7a81\uff0c\u6240\u6709\u9519\u8bef\u4e0a\u4e0b\u6587\u6807\u5934\u952e\uff0c\u6240\u6709\u9519\u8bef\u4e0a\u4e0b\u6587\u6807\u5934\u952e\u90fd\u5c06\u4ee5 __connect.errors. Type: boolean Default: false Valid Values: Importance: medium 3.6 Kafka\u6d41\u914d\u7f6e \u4ee5\u4e0b\u662f Kafka Streams \u5ba2\u6237\u7aef\u5e93\u7684\u914d\u7f6e\u3002 application.id \u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u8bc6\u7b26\u3002\u5728 Kafka \u96c6\u7fa4\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u5b83\u7528\u4f5c 1) \u9ed8\u8ba4\u5ba2\u6237\u7aef ID \u524d\u7f00\uff0c2) \u7528\u4e8e\u6210\u5458\u8d44\u683c\u7ba1\u7406\u7684\u7ec4 ID\uff0c3) \u53d8\u66f4\u65e5\u5fd7\u4e3b\u9898\u524d\u7f00\u3002 Type: string Default: Valid Values: Importance: high bootstrap.servers \u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: Valid Values: Importance: high num.standby.replicas \u6bcf\u4e2a\u4efb\u52a1\u7684\u5907\u7528\u526f\u672c\u6570\u3002 Type: int Default: 0 Valid Values: Importance: high state.dir \u72b6\u6001\u5b58\u50a8\u7684\u76ee\u5f55\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u5171\u4eab\u76f8\u540c\u5e95\u5c42\u6587\u4ef6\u7cfb\u7edf\u7684\u6bcf\u4e2a\u6d41\u5b9e\u4f8b\uff0c\u6b64\u8def\u5f84\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 Type: string Default: /var/folders/6f/c4r3kvwd76l9c0k_59qzh_r00000gn/T//kafka-streams Valid Values: Importance: high acceptable.recovery.lag \u5ba2\u6237\u7aef\u88ab\u89c6\u4e3a\u5df2\u8d76\u4e0a\u8db3\u4ee5\u63a5\u6536\u6d3b\u52a8\u4efb\u52a1\u5206\u914d\u7684\u6700\u5927\u53ef\u63a5\u53d7\u6ede\u540e\uff08\u8981\u8d76\u4e0a\u7684\u504f\u79fb\u91cf\u6570\u91cf\uff09\u3002\u5206\u914d\u540e\uff0c\u5b83\u4ecd\u7136\u4f1a\u5728\u5904\u7406\u4e4b\u524d\u6062\u590d\u53d8\u66f4\u65e5\u5fd7\u7684\u5176\u4f59\u90e8\u5206\u3002\u4e3a\u4e86\u907f\u514d\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u5904\u7406\u6682\u505c\uff0c\u6b64\u914d\u7f6e\u5e94\u5bf9\u5e94\u4e8e\u7ed9\u5b9a\u5de5\u4f5c\u8d1f\u8f7d\u7684\u8fdc\u4f4e\u4e8e\u4e00\u5206\u949f\u7684\u6062\u590d\u65f6\u95f4\u3002\u5fc5\u987b\u81f3\u5c11\u4e3a 0\u3002 Type: long Default: 10000 Valid Values: [0,...] Importance: medium cache.max.bytes.buffering \u7528\u4e8e\u8de8\u6240\u6709\u7ebf\u7a0b\u7f13\u51b2\u7684\u6700\u5927\u5185\u5b58\u5b57\u8282\u6570 Type: long Default: 10485760 Valid Values: [0,...] Importance: medium client.id \u7528\u4e8e\u5185\u90e8\u6d88\u8d39\u8005\u3001\u751f\u4ea7\u8005\u548c\u6062\u590d\u6d88\u8d39\u8005\u7684\u5ba2\u6237\u7aef ID \u7684 ID \u524d\u7f00\u5b57\u7b26\u4e32\uff0c\u6a21\u5f0f\u4e3a <client.id>-StreamThread-<threadSequenceNumber$gt;-<consumer|producer|restore-consumer> \u3002 Type: string Default: \"\" Valid Values: Importance: medium default.deserialization.exception.handler \u5b9e\u73b0\u8be5 org.apache.kafka.streams.errors.DeserializationExceptionHandler \u63a5\u53e3\u7684\u5f02\u5e38\u5904\u7406\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.errors.LogAndFailExceptionHandler Valid Values: Importance: medium default.key.serde \u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u952e\u7684\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668/\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 org.apache.kafka.common.serialization.Serde \u8bf7\u6ce8\u610f\uff0c\u5f53\u4f7f\u7528\u7a97\u53e3\u5316 Serde \u7c7b\u65f6\uff0c\u8fd8\u9700\u8981\u901a\u8fc7\u201cdefault.windowed.key.serde.inner\u201d\u6216\u201cdefault.windowed.value.serde.inner\u201d\u8bbe\u7f6e\u5b9e\u73b0\u8be5\u63a5\u53e3\u7684\u5185\u90e8 serde \u7c7b Type: class Default: null Valid Values: Importance: medium default.list.key.serde.inner \u5b9e\u73b0\u63a5\u53e3\u7684 key \u7684 list serde \u7684\u9ed8\u8ba4\u5185\u90e8\u7c7b org.apache.kafka.common.serialization.Serde \u3002\u5f53\u4e14\u4ec5\u5f53 default.key.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Type: class Default: null Valid Values: Importance: medium default.list.key.serde.type \u5b9e\u73b0 java.util.List \u63a5\u53e3\u7684\u952e\u7684\u9ed8\u8ba4\u7c7b\u3002\u5f53\u4e14\u4ec5\u5f53 default.key.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Note \u5f53\u4f7f\u7528 list serde \u7c7b\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e org.apache.kafka.common.serialization.Serde \u901a\u8fc7 'default.list.key.serde.inner' \u5b9e\u73b0\u63a5\u53e3\u7684\u5185\u90e8 serde \u7c7b\u65f6\uff0c\u624d\u4f1a\u8bfb\u53d6\u6b64\u914d\u7f6e Type: class Default: null Valid Values: Importance: medium default.list.value.serde.inner \u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u503c\u7684\u5217\u8868 serde \u7684\u9ed8\u8ba4\u5185\u90e8\u7c7b\u3002\u5f53\u4e14\u4ec5\u5f53 default.value.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Type: class Default: null Valid Values: Importance: medium default.list.value.serde.type \u5b9e\u73b0 java.util.List \u63a5\u53e3\u7684\u503c\u7684\u9ed8\u8ba4\u7c7b\u3002\u5f53\u4e14\u4ec5\u5f53 default.value.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Note \u5f53\u4f7f\u7528 list serde \u7c7b\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e org.apache.kafka.common.serialization.Serde \u901a\u8fc7 'default.list.value.serde.inner' \u5b9e\u73b0\u63a5\u53e3\u7684\u5185\u90e8 serde \u7c7b\u65f6\uff0c\u624d\u4f1a\u8bfb\u53d6\u6b64\u914d\u7f6e Type: class Default: null Valid Values: Importance: medium default.production.exception.handler \u5b9e\u73b0\u8be5 org.apache.kafka.streams.errors.ProductionExceptionHandler \u63a5\u53e3\u7684\u5f02\u5e38\u5904\u7406\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.errors.DefaultProductionExceptionHandler Valid Values: Importance: medium default.timestamp.extractor \u5b9e\u73b0\u8be5 org.apache.kafka.streams.processor.TimestampExtractor \u63a5\u53e3\u7684\u9ed8\u8ba4\u65f6\u95f4\u6233\u63d0\u53d6\u5668\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.processor.FailOnInvalidTimestamp Valid Values: Importance: medium default.value.serde \u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u503c\u7684\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668/\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 \u8bf7\u6ce8\u610f\uff0c\u5f53\u4f7f\u7528\u7a97\u53e3\u5316 Serde \u7c7b\u65f6\uff0c\u9700\u8981\u901a\u8fc7 default.windowed.key.serde.inner \u6216 default.windowed \u8bbe\u7f6e\u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u5185\u90e8. Default serializer / deserializer class for value that implements the org.apache.kafka.common.serialization.Serde interface. Note when windowed serde class is used, one needs to set the inner serde class that implements the org.apache.kafka.common.serialization.Serde interface via 'default.windowed.key.serde.inner' or 'default.windowed.value.serde.inner' as well Type: class Default: null Valid Values: Importance: medium max.task.idle.ms \u6b64\u914d\u7f6e\u63a7\u5236\u8fde\u63a5\u548c\u5408\u5e76\u662f\u5426\u53ef\u80fd\u4ea7\u751f\u65e0\u5e8f\u7ed3\u679c\u3002 \u914d\u7f6e\u503c\u662f\u6d41\u4efb\u52a1\u5728\u5b8c\u5168\u8d76\u4e0a\u67d0\u4e9b\uff08\u4f46\u4e0d\u662f\u5168\u90e8\uff09\u8f93\u5165\u5206\u533a\u4ee5\u7b49\u5f85\u751f\u4ea7\u8005\u53d1\u9001\u9644\u52a0\u8bb0\u5f55\u5e76\u907f\u514d\u6f5c\u5728\u7684\u65e0\u5e8f\u8bb0\u5f55\u5904\u7406\u65f6\u4fdd\u6301\u7a7a\u95f2\u72b6\u6001\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 \u8de8\u591a\u4e2a\u8f93\u5165\u6d41\u3002 \u9ed8\u8ba4\u503c\uff08\u96f6\uff09\u4e0d\u7b49\u5f85\u751f\u4ea7\u8005\u53d1\u9001\u66f4\u591a\u8bb0\u5f55\uff0c\u4f46\u5b83\u4f1a\u7b49\u5f85\u83b7\u53d6\u4ee3\u7406\u4e0a\u5df2\u5b58\u5728\u7684\u6570\u636e\u3002 \u6b64\u9ed8\u8ba4\u503c\u610f\u5473\u7740\u5bf9\u4e8e\u4ee3\u7406\u4e0a\u5df2\u5b58\u5728\u7684\u8bb0\u5f55\uff0cStreams \u5c06\u6309\u65f6\u95f4\u6233\u987a\u5e8f\u5904\u7406\u5b83\u4eec\u3002 \u8bbe\u7f6e\u4e3a -1 \u4ee5\u5b8c\u5168\u7981\u7528\u7a7a\u95f2\u5e76\u5904\u7406\u4efb\u4f55\u672c\u5730\u53ef\u7528\u7684\u6570\u636e\uff0c\u5373\u4f7f\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u4ea7\u751f\u65e0\u5e8f\u5904\u7406\u3002 Type: long Default: 0 Valid Values: Importance: medium max.warmup.replicas \u53ef\u4ee5\u4e00\u6b21\u5206\u914d\u7684\u6700\u5927\u9884\u70ed\u526f\u672c\u6570\uff08\u8d85\u51fa\u914d\u7f6e\u7684 num.standbys \u7684\u989d\u5916\u5907\u7528\u526f\u672c\uff09\uff0c\u4ee5\u4fbf\u5728\u4efb\u52a1\u5728\u5df2\u91cd\u65b0\u5206\u914d\u5230\u7684\u53e6\u4e00\u5b9e\u4f8b\u4e0a\u9884\u70ed\u65f6\u4fdd\u6301\u4efb\u52a1\u5728\u4e00\u4e2a\u5b9e\u4f8b\u4e0a\u53ef\u7528\u3002\u7528\u4e8e\u9650\u5236\u53ef\u7528\u4e8e\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027\u7684\u989d\u5916\u4ee3\u7406\u6d41\u91cf\u548c\u96c6\u7fa4\u72b6\u6001\u3002\u5fc5\u987b\u81f3\u5c11\u4e3a 1\u3002\u6ce8\u610f\uff0c1 \u4e2a\u9884\u70ed\u526f\u672c\u5bf9\u5e94\u4e00\u4e2a Stream Task\u3002\u6b64\u5916\uff0c\u8bf7\u6ce8\u610f\uff0c\u6bcf\u4e2a\u9884\u70ed\u526f\u672c\u53ea\u80fd\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u63d0\u5347\u4e3a\u6d3b\u52a8\u4efb\u52a1\uff08\u901a\u5e38\u5728\u6240\u8c13\u7684\u63a2\u6d4b\u91cd\u65b0\u5e73\u8861\u671f\u95f4\uff0c\u5176\u53d1\u751f\u9891\u7387\u7531\u201cprobing.rebalance.interval.ms\u201d\u914d\u7f6e\u6307\u5b9a\uff09\u3002\u8fd9\u610f\u5473\u7740\u6d3b\u52a8\u4efb\u52a1\u4ece\u4e00\u4e2a Kafka Streams \u5b9e\u4f8b\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u5b9e\u4f8b\u7684\u6700\u5927\u901f\u7387\u53ef\u4ee5\u901a\u8fc7 (`max.warmup.replicas` / `probing.rebalance. Type: int Default: 2 Valid Values: [1\uff0c...] Importance: medium num.stream.threads \u6267\u884c\u6d41\u5904\u7406\u7684\u7ebf\u7a0b\u6570\u3002 Type: int Default: 1 Valid Values: Importance: medium processing.guarantee \u5e94\u4f7f\u7528\u7684\u5904\u7406\u4fdd\u8bc1\u3002\u53ef\u80fd\u7684\u503c\u4e3a at_least_once \uff08\u9ed8\u8ba4\uff09\u548c exactly_once_v2 \uff08\u9700\u8981\u4ee3\u7406\u7248\u672c 2.5 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002\u5df2\u5f03\u7528\u7684\u9009\u9879\u6709 exactly_once \uff08\u9700\u8981\u4ee3\u7406\u7248\u672c 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u548c exactly_once_beta \uff08\u9700\u8981\u4ee3\u7406\u7248\u672c 2.5 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e00\u6b21\u5904\u7406\u9700\u8981\u81f3\u5c11\u4e09\u4e2a\u4ee3\u7406\u7684\u96c6\u7fa4\uff0c\u63a8\u8350\u7684\u751f\u4ea7\u8bbe\u7f6e\u662f\u4ec0\u4e48\uff1f\u5bf9\u4e8e\u5f00\u53d1\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4ee3\u7406\u8bbe\u7f6e transaction.state.log.replication.factor \u548c\u6765\u66f4\u6539\u6b64\u8bbe\u7f6e transaction.state.log.min.isr \u3002 Type: string Default: \u81f3\u5c11\u4e00\u6b21 Valid Values: [at_least_once\u3001exact_once\u3001exact_once_beta\u3001exact_once_v2] Importance: medium rack.aware.assignment.tags \u7528\u4e8e\u8de8 Kafka Streams \u5b9e\u4f8b\u5206\u914d\u5907\u7528\u526f\u672c\u7684\u5ba2\u6237\u7aef\u6807\u7b7e\u952e\u5217\u8868\u3002\u914d\u7f6e\u540e\uff0cKafka Streams \u5c06\u5c3d\u6700\u5927\u52aa\u529b\u5728\u6bcf\u4e2a\u5ba2\u6237\u7aef\u6807\u7b7e\u7ef4\u5ea6\u4e0a\u5206\u914d\u5907\u7528\u4efb\u52a1\u3002 Type: list Default: \"\" Valid Values: \u6700\u591a\u5305\u542b 5 \u4e2a\u5143\u7d20\u7684list Importance: medium replication.factor \u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u521b\u5efa\u7684\u66f4\u6539\u65e5\u5fd7\u4e3b\u9898\u548c\u91cd\u65b0\u5206\u533a\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u3002\u9ed8\u8ba4\u503c -1 \uff08\u542b\u4e49\uff1a\u4f7f\u7528\u4ee3\u7406\u9ed8\u8ba4\u590d\u5236\u56e0\u5b50\uff09\u9700\u8981\u4ee3\u7406\u7248\u672c 2.4 \u6216\u66f4\u9ad8\u7248\u672c Type: int Default: -1 Valid Values: Importance: medium security.protocol \u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium statestore.cache.max.bytes \u7528\u4e8e\u6240\u6709\u7ebf\u7a0b\u7684\u72b6\u6001\u5b58\u50a8\u7f13\u5b58\u7684\u6700\u5927\u5185\u5b58\u5b57\u8282\u6570 Type: long Default: 10485760 (10 mebibytes) Valid Values: [0,...] Importance: medium task.timeout.ms \u4efb\u52a1\u53ef\u80fd\u56e0\u5185\u90e8\u9519\u8bef\u800c\u505c\u6b62\u5e76\u91cd\u8bd5\u76f4\u5230\u51fa\u73b0\u9519\u8bef\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5bf9\u4e8e 0 \u6beb\u79d2\u7684\u8d85\u65f6\uff0c\u4efb\u52a1\u5c06\u9488\u5bf9\u7b2c\u4e00\u4e2a\u5185\u90e8\u9519\u8bef\u5f15\u53d1\u9519\u8bef\u3002\u5bf9\u4e8e\u4efb\u4f55\u5927\u4e8e 0 \u6beb\u79d2\u7684\u8d85\u65f6\uff0c\u4efb\u52a1\u5c06\u5728\u5f15\u53d1\u9519\u8bef\u4e4b\u524d\u81f3\u5c11\u91cd\u8bd5\u4e00\u6b21\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: medium topology.optimization \u544a\u8bc9 Kafka Streams \u662f\u5426\u5e94\u8be5\u4f18\u5316\u62d3\u6251\u4ee5\u53ca\u5e94\u7528\u54ea\u4e9b\u4f18\u5316\u7684\u914d\u7f6e\u3002\u53ef\u63a5\u53d7\u7684\u503c\u4e3a\uff1a\u201c+NO_OPTIMIZATION+\u201d\u3001\u201c+OPTIMIZE+\u201d\u6216\u4ee5\u9017\u53f7\u5206\u9694\u7684\u7279\u5b9a\u4f18\u5316\u5217\u8868\uff1a(\u201c+REUSE_KTABLE_SOURCE_TOPICS+\u201d\u3001\u201c+MERGE_REPARTITION_TOPICS+\u201d+\u201cSINGLE_STORE_SELF_JOIN+\u201d)\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a\u201cNO_OPTIMIZATION\u201d\u3002 Type: string Default: none Valid Values: org.apache.kafka.streams.StreamsConfig$$Lambda$3/1996181658@5010be6 Importance: medium application.server \u6307\u5411\u7528\u6237\u5b9a\u4e49\u7aef\u70b9\u7684\u4e3b\u673a\uff1a\u7aef\u53e3\u5bf9\uff0c\u53ef\u7528\u4e8e\u6b64 KafkaStreams \u5b9e\u4f8b\u4e0a\u7684\u72b6\u6001\u5b58\u50a8\u53d1\u73b0\u548c\u4ea4\u4e92\u5f0f\u67e5\u8be2\u3002 Type: string Default: \"\" Valid Values: Importance: low auto.jmx.reporter \u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low buffered.records.per.partition \u6bcf\u4e2a\u5206\u533a\u7f13\u51b2\u7684\u6700\u5927\u8bb0\u5f55\u6570\u3002 Type: int Default: 1000 Valid Values: Importance: low built.in.metrics.version \u8981\u4f7f\u7528\u7684\u5185\u7f6e\u6307\u6807\u7684\u7248\u672c\u3002 Type: string Default: latest Valid Values: [latest] Importance: low commit.interval.ms \u63d0\u4ea4\u5904\u7406\u8fdb\u5ea6\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5bf9\u4e8e\u81f3\u5c11\u4e00\u6b21\u5904\u7406\uff0c\u63d0\u4ea4\u610f\u5473\u7740\u4fdd\u5b58\u5904\u7406\u5668\u7684\u4f4d\u7f6e\uff08\u5373\u504f\u79fb\u91cf\uff09\u3002\u5bf9\u4e8eexactly-once\u5904\u7406\u6765\u8bf4\uff0c\u610f\u5473\u7740\u63d0\u4ea4\u4e8b\u52a1\uff0c\u5305\u62ec\u4fdd\u5b58\u4f4d\u7f6e\u4ee5\u53ca\u4f7f\u8f93\u51fa\u4e3b\u9898\u4e2d\u63d0\u4ea4\u7684\u6570\u636e\u5bf9\u9694\u79bb\u7ea7\u522b\u4e3aread_commissed\u7684\u6d88\u8d39\u8005\u53ef\u89c1\u3002\uff08\u6ce8\u610f\uff0c\u5982\u679c processing.guarantee \u8bbe\u7f6e\u4e3a exactly_once_v2 , exactly_once \uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a 100 \uff0c\u5426\u5219\u9ed8\u8ba4\u503c\u4e3a 30000 \u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low connections.max.idle.ms \u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 540000 (9 minutes) Valid Values: Importance: low default.client.supplier \u5b9e\u73b0\u8be5 org.apache.kafka.streams.KafkaClientSupplier \u63a5\u53e3\u7684\u5ba2\u6237\u7aef\u4f9b\u5e94\u5546\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.processor.internals.DefaultKafkaClientSupplier Valid Values: Importance: low default.dsl.store DSL \u8fd0\u8425\u5546\u4f7f\u7528\u7684\u9ed8\u8ba4\u72b6\u6001\u5b58\u50a8\u7c7b\u578b\u3002 Type: string Default: rocksDB Valid Values: [rocksDB\uff0cin_memory] Importance: low metadata.max.age.ms \u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low metric.reporters \u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low metrics.num.samples \u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low metrics.recording.level \u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low metrics.sample.window.ms \u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low poll.ms \u963b\u6b62\u7b49\u5f85\u8f93\u5165\u7684\u65f6\u95f4\u91cf\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 Type: long Default: 100 Valid Values: Importance: low probing.rebalance.interval.ms \u89e6\u53d1\u91cd\u65b0\u5e73\u8861\u4ee5\u63a2\u6d4b\u5df2\u5b8c\u6210\u9884\u70ed\u5e76\u51c6\u5907\u597d\u6fc0\u6d3b\u7684\u9884\u70ed\u526f\u672c\u4e4b\u524d\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5c06\u7ee7\u7eed\u89e6\u53d1\u63a2\u6d4b\u91cd\u65b0\u5e73\u8861\uff0c\u76f4\u5230\u5206\u914d\u5e73\u8861\u3002\u5fc5\u987b\u81f3\u5c11 1 \u5206\u949f\u3002 Type: long Default: 600000 (10 minutes) Valid Values: [60000\uff0c...] Importance: low receive.buffer.bytes \u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 32768\uff0832 KB\uff09 Valid Values: [-1\uff0c...] Importance: low reconnect.backoff.max.ms \u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002 \u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low reconnect.backoff.ms \u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002 \u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002 \u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low repartition.purge.interval.ms \u4ece\u91cd\u65b0\u5206\u533a\u4e3b\u9898\u4e2d\u5220\u9664\u5b8c\u5168\u4f7f\u7528\u7684\u8bb0\u5f55\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u81ea\u4e0a\u6b21\u6e05\u9664\u540e\u81f3\u5c11\u4f1a\u5728\u8be5\u503c\u4e4b\u540e\u8fdb\u884c\u6e05\u9664\uff0c\u4f46\u53ef\u80fd\u4f1a\u5ef6\u8fdf\u5230\u4ee5\u540e\u3002 \uff08\u8bf7\u6ce8\u610f\uff0c\u4e0e commit.interval.ms \u4e0d\u540c\uff0c\u5f53 processing.guarantee \u8bbe\u7f6e\u4e3a exactly_once_v2 \u65f6\uff0c\u8be5\u503c\u7684\u9ed8\u8ba4\u503c\u4fdd\u6301\u4e0d\u53d8\uff09\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low request.timeout.ms \u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002 \u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 40000 (40 seconds) Valid Values: [0,...] Importance: low retries \u8bbe\u7f6e\u5927\u4e8e\u96f6\u7684\u503c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u91cd\u65b0\u53d1\u9001\u56e0\u6f5c\u5728\u7684\u6682\u65f6\u6027\u9519\u8bef\u800c\u5931\u8d25\u7684\u4efb\u4f55\u8bf7\u6c42\u3002\u5efa\u8bae\u5c06\u8be5\u503c\u8bbe\u7f6e\u4e3a\u96f6\u6216\u201cMAX_VALUE\u201d\uff0c\u5e76\u4f7f\u7528\u76f8\u5e94\u7684\u8d85\u65f6\u53c2\u6570\u6765\u63a7\u5236\u5ba2\u6237\u7aef\u5e94\u91cd\u8bd5\u8bf7\u6c42\u7684\u65f6\u95f4\u3002 Type: int Default: 0 Valid Values: [0\uff0c...\uff0c2147483647] Importance: low retry.backoff.ms \u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low rockdb.config.setter Rocks DB \u914d\u7f6e\u8bbe\u7f6e\u5668\u7c7b\u6216\u5b9e\u73b0\u8be5 org.apache.kafka.streams.state.RocksDBConfigSetter \u63a5\u53e3\u7684\u7c7b\u540d Type: class Default: null Valid Values: Importance: low send.buffer.bytes \u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: low status.cleanup.delay.ms \u5206\u533a\u8fc1\u79fb\u540e\u5220\u9664\u72b6\u6001\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 state.cleanup.delay.ms \u4ec5\u5220\u9664\u81f3\u5c11\u672a\u4fee\u6539\u7684state.dir Type: long Default: 600000 (10 minutes) Valid Values: Importance: low upgrade.from \u5141\u8bb8\u4ee5\u5411\u540e\u517c\u5bb9\u7684\u65b9\u5f0f\u5347\u7ea7\u3002\u4ece [0.10.0, 1.1] \u5347\u7ea7\u5230 2.0+ \u6216\u4ece [2.0, 2.3] \u5347\u7ea7\u5230 2.4+ \u65f6\u9700\u8981\u8fd9\u6837\u505a\u3002\u4ece 3.3 \u5347\u7ea7\u5230\u66f4\u65b0\u7248\u672c\u65f6\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u6b64\u914d\u7f6e\u3002\u9ed8\u8ba4\u4e3a\u201cnull\u201d\u3002\u63a5\u53d7\u7684\u503c\u4e3a\u201c0.10.0\u201d\u3001\u201c0.10.1\u201d\u3001\u201c0.10.2\u201d\u3001\u201c0.11.0\u201d\u3001\u201c1.0\u201d\u3001\u201c1.1\u201d\u3001\u201c2.0\u201d\u3001\u201c2.1\u201d\u3001\u201c2.2\u201d\u3001\u201c2.3\u201d \u3001\u201c2.4\u201d\u3001\u201c2.5\u201d\u3001\u201c2.6\u201d\u3001\u201c2.7\u201d\u3001\u201c2.8\u201d\u3001\u201c3.0\u201d\u3001\u201c3.1\u201d\u3001\u201c3.2\u201d\u3001\u201c3.3\u201d\u3001\u201c3.4\u201d\uff08\u7528\u4e8e\u4ece\u76f8\u5e94\u7684\u65e7\u7248\u672c\u5347\u7ea7\uff09\u3002 Type: string Default: null Valid Values: [null, 0.10.0, 0.10.1, 0.10.2, 0.11.0, 1.0, 1.1, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 3.0, 3.1, 3.2, 3.3, 3.4] Importance: low window.size.ms \u8bbe\u7f6e\u89e3\u4e32\u5668\u7684\u7a97\u53e3\u5927\u5c0f\u4ee5\u8ba1\u7b97\u7a97\u53e3\u7ed3\u675f\u65f6\u95f4\u3002 Type: long Default: null Valid Values: Importance: low windowed.inner.class.serde \u7a97\u53e3\u8bb0\u5f55\u5185\u90e8\u7c7b\u7684\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668/\u53cd\u5e8f\u5217\u5316\u5668\u3002\u5fc5\u987b\u5b9e\u73b0\u8be5 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u3002\u8bf7\u6ce8\u610f\uff0c\u5728 KafkaStreams \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bbe\u7f6e\u6b64\u914d\u7f6e\u4f1a\u5bfc\u81f4\u9519\u8bef\uff0c\u56e0\u4e3a\u5b83\u53ea\u80fd\u4ece\u666e\u901a\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u4f7f\u7528\u3002 Type: string Default: null Valid Values: Importance: low windowstore.changelog.additional.retention.ms \u6dfb\u52a0\u5230 Windows MaintenanceMs \u4ee5\u786e\u4fdd\u6570\u636e\u4e0d\u4f1a\u8fc7\u65e9\u5730\u4ece\u65e5\u5fd7\u4e2d\u5220\u9664\u3002\u5141\u8bb8\u65f6\u949f\u6f02\u79fb\u3002\u9ed8\u8ba4\u4e3a 1 \u5929 Type: long Default: 86400000 (1 day) Valid Values: Importance: low 3.7 \u7ba1\u7406\u914d\u7f6e \u4ee5\u4e0b\u662f Kafka \u7ba1\u7406\u5ba2\u6237\u7aef\u5e93\u7684\u914d\u7f6e\u3002 bootstrap.servers \u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: Valid Values: Importance: high ssl.key.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.keystore.certificate.chain \u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high ssl.keystore.key \u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high ssl.keystore.location \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high ssl.keystore.password \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.certificate \u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high ssl.truststore.location \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high ssl.truststore.password \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high client.dns.lookup \u63a7\u5236\u5ba2\u6237\u7aef\u5982\u4f55\u4f7f\u7528 DNS \u67e5\u627e\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a use_all_dns_ips \uff0c\u5219\u6309\u987a\u5e8f\u8fde\u63a5\u6bcf\u4e2a\u8fd4\u56de\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u5efa\u7acb\u6210\u529f\u8fde\u63a5\u3002\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u5c06\u4f7f\u7528\u4e0b\u4e00\u4e2a IP\u3002\u4e00\u65e6\u6240\u6709 IP \u4f7f\u7528\u4e00\u6b21\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u518d\u6b21\u4ece\u4e3b\u673a\u540d\u89e3\u6790 IP\uff08\u4f46\u662f JVM \u548c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u7f13\u5b58 DNS \u540d\u79f0\u67e5\u627e\uff09\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a resolve_canonical_bootstrap_servers_only \uff0c\u5219\u5c06\u6bcf\u4e2a\u5f15\u5bfc\u5730\u5740\u89e3\u6790\u4e3a\u89c4\u8303\u540d\u79f0\u5217\u8868\u3002\u5728\u5f15\u5bfc\u9636\u6bb5\u4e4b\u540e\uff0c\u5176\u884c\u4e3a\u4e0e \u76f8\u540c use_all_dns_ips \u3002 Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips\uff0cresolve_canonical_bootstrap_servers_only] Importance: medium client.id \u53d1\u51fa\u8bf7\u6c42\u65f6\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u7684 id \u5b57\u7b26\u4e32\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u901a\u8fc7\u5141\u8bb8\u5728\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u5305\u542b\u903b\u8f91\u5e94\u7528\u7a0b\u5e8f\u540d\u79f0\uff0c\u80fd\u591f\u8ddf\u8e2a IP/\u7aef\u53e3\u4e4b\u5916\u7684\u8bf7\u6c42\u6e90\u3002 Type: string Default: \"\" Valid Values: Importance: medium connections.max.idle.ms \u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: Importance: medium default.api.timeout.ms \u6307\u5b9a\u5ba2\u6237\u7aef API \u7684\u8d85\u65f6\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u6b64\u914d\u7f6e\u7528\u4f5c\u6240\u6709\u672a\u6307\u5b9a timeout \u53c2\u6570\u7684\u5ba2\u6237\u7aef\u64cd\u4f5c\u7684\u9ed8\u8ba4\u8d85\u65f6\u3002 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: medium receive.buffer.bytes \u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 65536 (64 kibibytes) Valid Values: [-1\uff0c...] Importance: medium request.timeout.ms \u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 30000 (30 seconds) Valid Values: [0,...] Importance: medium sasl.client.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium sasl.jaas.config SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium sasl.kerberos.service.name Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium sasl.login.callback.handler.class \u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium sasl.login.class \u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium sasl.mechanism \u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium sasl.oauthbearer.jwks.endpoint.url OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium sasl.oauthbearer.token.endpoint.url OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium security.protocol \u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium send.buffer.bytes \u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium socket.connection.setup.timeout.max.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium socket.connection.setup.timeout.ms \u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium ssl.enabled.protocol \u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium ssl.keystore.type \u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium ssl.protocol \u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium ssl.provider \u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium ssl.truststore.type \u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium auto.jmx.reporter \u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low metadata.max.age.ms \u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low metric.reporters \u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low metrics.num.samples \u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low metrics.recording.level \u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low metrics.sample.window.ms \u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low reconnect.backoff.max.ms \u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low reconnect.backoff.ms \u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low retries \u8bbe\u7f6e\u5927\u4e8e\u96f6\u7684\u503c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u91cd\u65b0\u53d1\u9001\u56e0\u6f5c\u5728\u7684\u6682\u65f6\u6027\u9519\u8bef\u800c\u5931\u8d25\u7684\u4efb\u4f55\u8bf7\u6c42\u3002\u5efa\u8bae\u5c06\u8be5\u503c\u8bbe\u7f6e\u4e3a\u96f6\u6216\u201cMAX_VALUE\u201d\uff0c\u5e76\u4f7f\u7528\u76f8\u5e94\u7684\u8d85\u65f6\u53c2\u6570\u6765\u63a7\u5236\u5ba2\u6237\u7aef\u5e94\u91cd\u8bd5\u8bf7\u6c42\u7684\u65f6\u95f4\u3002 Type: int Default: 2147483647 Valid Values: [0\uff0c...\uff0c2147483647] Importance: low retry.backoff.ms \u5c1d\u8bd5\u91cd\u8bd5\u5931\u8d25\u7684\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low sasl.kerberos.kinit.cmd Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low sasl.kerberos.min.time.before.relogin \u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low sasl.kerberos.ticket.renew.jitter \u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low sasl.kerberos.ticket.renew.window.factor \u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low sasl.login.connect.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.read.timeout.ms \u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low sasl.login.refresh.buffer.seconds \u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low sasl.login.refresh.min.period.seconds \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low sasl.login.refresh.window.factor \u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low sasl.login.refresh.window.jitter \u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low sasl.login.retry.backoff.max.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.login.retry.backoff.ms \u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.clock.skew.seconds \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low sasl.oauthbearer.expected.audience \u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low sasl.oauthbearer.expected.issuer \u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.refresh.ms \u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms \u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low sasl.oauthbearer.scope.claim.name \u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low sasl.oauthbearer.sub.claim.name \u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low security.providers \u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low ssl.cipher.suites \u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low ssl.endpoint.identification.algorithm \u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low ssl.engine.factory.class org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low ssl.keymanager.algorithm \u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low ssl.secure.random.implementation \u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low ssl.trustmanager.algorithm \u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low 3.8 \u7cfb\u7edf\u5c5e\u6027 Kafka \u652f\u6301\u4e00\u4e9b\u53ef\u4ee5\u901a\u8fc7 Java \u7cfb\u7edf\u5c5e\u6027\u542f\u7528\u7684\u914d\u7f6e\u3002\u7cfb\u7edf\u5c5e\u6027\u901a\u5e38\u901a\u8fc7\u5c06 -D \u6807\u5fd7\u4f20\u9012\u7ed9\u8fd0\u884c Kafka \u7ec4\u4ef6\u7684 Java \u865a\u62df\u673a\u6765\u8bbe\u7f6e\u3002\u4ee5\u4e0b\u662f\u652f\u6301\u7684\u7cfb\u7edf\u5c5e\u6027\u3002 org.apache.kafka.disallowed.login.modules \u6b64\u7cfb\u7edf\u5c5e\u6027\u7528\u4e8e\u7981\u7528 SASL JAAS \u914d\u7f6e\u4e2d\u5b58\u5728\u95ee\u9898\u7684\u767b\u5f55\u6a21\u5757\u4f7f\u7528\u3002\u6b64\u5c5e\u6027\u63a5\u53d7\u4ee5\u9017\u53f7\u5206\u9694\u7684\u767b\u5f55\u6a21\u5757\u540d\u79f0\u5217\u8868\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c com.sun.security.auth.module.JndiLoginModule \u767b\u5f55\u6a21\u5757\u88ab\u7981\u7528\u3002 \u5982\u679c\u7528\u6237\u60f3\u8981\u542f\u7528 JndiLoginModule\uff0c\u7528\u6237\u9700\u8981\u663e\u5f0f\u91cd\u7f6e\u7cfb\u7edf\u5c5e\u6027\uff0c\u5982\u4e0b\u6240\u793a\u3002\u6211\u4eec\u5efa\u8bae\u7528\u6237\u9a8c\u8bc1\u914d\u7f6e\u5e76\u4ec5\u5141\u8bb8\u53ef\u4fe1\u7684 JNDI \u914d\u7f6e\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f CVE-2023-25194 \u3002 -Dorg.apache.kafka.disallowed.login.modules= \u8981\u7981\u7528\u66f4\u591a\u767b\u5f55\u6a21\u5757\uff0c\u8bf7\u4f7f\u7528\u9017\u53f7\u5206\u9694\u7684\u767b\u5f55\u6a21\u5757\u540d\u79f0\u66f4\u65b0\u7cfb\u7edf\u5c5e\u6027\u3002\u786e\u4fdd\u5c06 JndiLoginModule \u6a21\u5757\u540d\u79f0\u663e\u5f0f\u6dfb\u52a0\u5230\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u4e2d\uff0c\u5982\u4e0b\u6240\u793a\u3002 -Dorg.apache.kafka.disallowed.login.modules=com.sun.security.auth.module.JndiLoginModule,com.ibm.security.auth.module.LdapLoginModule,com.ibm.security.auth.module.Krb5LoginModule \u81ea\u4ece\uff1a 3.4.0 \u9ed8\u8ba4\u503c\uff1a com.sun.security.auth.module.JndiLoginModule","title":"3. \u914d\u7f6e"},{"location":"3/#3","text":"Kafka\u4f7f\u7528\u5c5e\u6027\u6587\u4ef6\u683c\u5f0f\u7684 \u952e\u503c\u5bf9\u8fdb\u884c\u914d\u7f6e\u3002\u8fd9\u4e9b\u503c\u53ef\u4ee5\u4ece\u6587\u4ef6\u6216\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u63d0\u4f9b\u3002","title":"3. \u914d\u7f6e"},{"location":"3/#31-broker","text":"\u57fa\u672c\u914d\u7f6e\u5982\u4e0b\uff1a broker.id log.dirs zookeeper.connect \u4e0b\u9762 \u5c06\u66f4\u8be6\u7ec6\u5730\u8ba8\u8bba\u4e3b\u9898\u7ea7\u914d\u7f6e\u548c\u9ed8\u8ba4\u503c\u3002","title":"3.1 Broker \u914d\u7f6e"},{"location":"3/#advertisedlisteners","text":"\u53d1\u5e03\u5230 ZooKeeper \u4f9b\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4fa6\u542c\u5668\uff08\u5982\u679c\u4e0e listeners \u914d\u7f6e\u5c5e\u6027\u4e0d\u540c\uff09\u3002\u5728 IaaS \u73af\u5883\u4e2d\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u4e0e\u4ee3\u7406\u7ed1\u5b9a\u7684\u63a5\u53e3\u4e0d\u540c\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c listeners \u5219\u5c06\u4f7f\u7528 \u7684\u503c\u3002\u4e0e \u4e0d\u540c\u7684\u662f listeners \uff0c\u901a\u544a 0.0.0.0 \u5143\u5730\u5740\u662f\u65e0\u6548\u7684\u3002 \u4e0e \u4e0d\u540c\u7684\u662f listeners \uff0c\u6b64\u5c5e\u6027\u4e2d\u53ef\u4ee5\u6709\u91cd\u590d\u7684\u7aef\u53e3\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u5c06\u4e00\u4e2a\u4fa6\u542c\u5668\u914d\u7f6e\u4e3a\u901a\u544a\u53e6\u4e00\u4e2a\u4fa6\u542c\u5668\u7684\u5730\u5740\u3002\u8fd9\u5728\u67d0\u4e9b\u4f7f\u7528\u5916\u90e8\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u60c5\u51b5\u4e0b\u975e\u5e38\u6709\u7528\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: per-broker","title":"advertised.listeners"},{"location":"3/#autocreatetopicsenable","text":"\u5728\u670d\u52a1\u5668\u4e0a\u542f\u7528\u81ea\u52a8\u521b\u5efa\u4e3b\u9898 Type: boolean Default: true Valid Values: Importance: high Update Mode: read-only","title":"auto.create.topics.enable"},{"location":"3/#autoleaderrebalanceenable","text":"\u542f\u7528\u81ea\u52a8\u9886\u5bfc\u8005\u5e73\u8861\u3002\u540e\u53f0\u7ebf\u7a0b\u5b9a\u671f\u68c0\u67e5\u5206\u533a\u9886\u5bfc\u8005\u7684\u5206\u5e03\uff0c\u53ef\u901a\u8fc7\u201cleader.imbalance.check.interval.seconds\u201d\u8fdb\u884c\u914d\u7f6e\u3002\u5982\u679c\u9886\u5bfc\u8005\u4e0d\u5e73\u8861\u8d85\u8fc7\u201cleader.imbalance.per.broker.percentage\u201d\uff0c\u5219\u4f1a\u89e6\u53d1\u9886\u5bfc\u8005\u91cd\u65b0\u5e73\u8861\u5230\u5206\u533a\u7684\u9996\u9009\u9886\u5bfc\u8005\u3002 Type: boolean Default: true Valid Values: Importance: high Update Mode: read-only","title":"auto.leader.rebalance.enable"},{"location":"3/#backgroundthreads","text":"\u7528\u4e8e\u5404\u79cd\u540e\u53f0\u5904\u7406\u4efb\u52a1\u7684\u7ebf\u7a0b\u6570 Type: int Default: 10 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide","title":"background.threads"},{"location":"3/#brokerid","text":"\u8be5\u670d\u52a1\u5668\u7684\u4ee3\u7406 ID\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5c06\u751f\u6210\u552f\u4e00\u7684\u4ee3\u7406 ID\u3002\u4e3a\u4e86\u907f\u514d Zookeeper \u751f\u6210\u7684\u4ee3\u7406 ID \u548c\u7528\u6237\u914d\u7f6e\u7684\u4ee3\u7406 ID \u4e4b\u95f4\u7684\u51b2\u7a81\uff0c\u751f\u6210\u7684\u4ee3\u7406 ID \u4eceserved.broker.max.id + 1 \u5f00\u59cb\u3002 Type: int Default: -1 Valid Values: Importance: high Update Mode: read-only","title":"broker.id"},{"location":"3/#compressiontype","text":"\u6307\u5b9a\u7ed9\u5b9a\u4e3b\u9898\u7684\u6700\u7ec8\u538b\u7f29\u7c7b\u578b\u3002\u6b64\u914d\u7f6e\u63a5\u53d7\u6807\u51c6\u538b\u7f29\u7f16\u89e3\u7801\u5668\uff08'gzip'\u3001'snappy'\u3001'lz4'\u3001'zstd'\uff09\u3002\u5b83\u8fd8\u63a5\u53d7\u201c\u672a\u538b\u7f29\u201d\uff0c\u8fd9\u76f8\u5f53\u4e8e\u4e0d\u538b\u7f29\uff1b\u201c\u751f\u4ea7\u8005\u201d\u8868\u793a\u4fdd\u7559\u751f\u4ea7\u8005\u8bbe\u7f6e\u7684\u539f\u59cb\u538b\u7f29\u7f16\u89e3\u7801\u5668\u3002 Type: string Default: producer Valid Values: [uncompressed, zstd, lz4, snappy, gzip, producer] Importance: high Update Mode: cluster-wide","title":"compression.type"},{"location":"3/#controlplanelistenername","text":"\u7528\u4e8e\u63a7\u5236\u5668\u548c\u4ee3\u7406\u4e4b\u95f4\u901a\u4fe1\u7684\u4fa6\u542c\u5668\u540d\u79f0\u3002Broker\u5c06\u4f7f\u7528control.plane.listener.name\u5728\u4fa6\u542c\u5668\u5217\u8868\u4e2d\u5b9a\u4f4d\u7aef\u70b9\uff0c\u4ee5\u4fa6\u542c\u6765\u81ea\u63a7\u5236\u5668\u7684\u8fde\u63a5\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4ee3\u7406\u7684\u914d\u7f6e\u4e3a\uff1a listeners = INTERNAL://192.1.1.8:9092, EXTERNAL://10.1.1.5:9093, CONTROLLER://192.1.1.8:9094 listener.security.protocol.map = INTERNAL:PLAINTEXT, EXTERNAL:SSL, CONTROLLER:SSL control.plane.listener.name = CONTROLLER \u542f\u52a8\u65f6\uff0c\u4ee3\u7406\u5c06\u5f00\u59cb\u4f7f\u7528\u5b89\u5168\u534f\u8bae\u201cSSL\u201d\u4fa6\u542c\u201c192.1.1.8:9094\u201d\u3002 \u5728\u63a7\u5236\u5668\u7aef\uff0c\u5f53\u5b83\u901a\u8fc7zookeeper\u53d1\u73b0\u4ee3\u7406\u7684\u5df2\u53d1\u5e03\u7aef\u70b9\u65f6\uff0c\u5b83\u5c06\u4f7f\u7528control.plane.listener.name\u6765\u67e5\u627e\u7aef\u70b9\uff0c\u5b83\u5c06\u7528\u4e8e\u5efa\u7acb\u4e0e\u4ee3\u7406\u7684\u8fde\u63a5\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u4ee3\u7406\u5728 Zookeeper \u4e0a\u53d1\u5e03\u7684\u7aef\u70b9\u4e3a\uff1a \"endpoints\" : [\"INTERNAL://broker1.example.com:9092\",\"EXTERNAL://broker1.example.com:9093\",\"CONTROLLER://broker1.example.com:9094\"] \u5e76\u4e14\u63a7\u5236\u5668\u7684\u914d\u7f6e\u662f\uff1a listener.security.protocol.map = INTERNAL:PLAINTEXT, EXTERNAL:SSL, CONTROLLER:SSL control.plane.listener.name = CONTROLLER \u90a3\u4e48\u63a7\u5236\u5668\u5c06\u4f7f\u7528\u201cbroker1.example.com:9094\u201d\uff0c\u4f7f\u7528\u5b89\u5168\u534f\u8bae\u201cSSL\u201d\u8fde\u63a5\u5230\u4ee3\u7406\u3002 \u5982\u679c\u672a\u663e\u5f0f\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a null\uff0c\u5e76\u4e14\u4e0d\u4f1a\u6709\u7528\u4e8e\u63a7\u5236\u5668\u8fde\u63a5\u7684\u4e13\u7528\u7aef\u70b9\u3002 \u5982\u679c\u663e\u5f0f\u914d\u7f6e\uff0c\u8be5\u503c\u4e0d\u80fd\u4e0e \u7684\u503c\u76f8\u540c inter.broker.listener.name \u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only","title":"control.plane.listener.name"},{"location":"3/#controllerlistenernames","text":"\u63a7\u5236\u5668\u4f7f\u7528\u7684\u4fa6\u542c\u5668\u540d\u79f0\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u5982\u679c\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u8fd9\u662f\u5fc5\u9700\u7684\u3002\u5f53\u4e0e\u63a7\u5236\u5668\u4ef2\u88c1\u901a\u4fe1\u65f6\uff0c\u4ee3\u7406\u5c06\u59cb\u7ec8\u4f7f\u7528\u6b64\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u4fa6\u542c\u5668\u3002 \u6ce8\u610f\uff1a\u57fa\u4e8e ZK \u7684\u63a7\u5236\u5668\u4e0d\u5e94\u8bbe\u7f6e\u6b64\u914d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only","title":"controller.listener.names"},{"location":"3/#controllerquorumelectionbackoffmaxms","text":"\u5f00\u59cb\u65b0\u9009\u4e3e\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u8fd9\u7528\u4e8e\u4e8c\u8fdb\u5236\u6307\u6570\u9000\u907f\u673a\u5236\uff0c\u6709\u52a9\u4e8e\u9632\u6b62\u9009\u4e3e\u9677\u5165\u50f5\u5c40 Type: int Default: 1000 (1 second) Valid Values: Importance: high Update Mode: read-only","title":"controller.quorum.election.backoff.max.ms"},{"location":"3/#controllerquorumelectiontimeoutms","text":"\u5728\u89e6\u53d1\u65b0\u9009\u4e3e\u4e4b\u524d\u65e0\u6cd5\u4ece\u9886\u5bfc\u8005\u83b7\u53d6\u6570\u636e\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1000 (1 second) Valid Values: Importance: high Update Mode: read-only","title":"controller.quorum.election.timeout.ms"},{"location":"3/#controllerquorumfetchtimeoutms","text":"\u5728\u6210\u4e3a\u5019\u9009\u4eba\u5e76\u89e6\u53d1\u9009\u6c11\u9009\u4e3e\u4e4b\u524d\uff0c\u4ece\u5f53\u524d\u9886\u5bfc\u8005\u90a3\u91cc\u6210\u529f\u83b7\u53d6\u4fe1\u606f\u7684\u6700\u957f\u65f6\u95f4\uff1b\u5728\u8be2\u95ee\u9886\u5bfc\u8005\u662f\u5426\u6709\u65b0\u7eaa\u5143\u4e4b\u524d\uff0c\u6ca1\u6709\u6536\u5230\u6765\u81ea\u5927\u591a\u6570\u6cd5\u5b9a\u4eba\u6570\u7684\u63d0\u53d6\u7684\u6700\u957f\u65f6\u95f4 Type: int Default: 2000 (2 seconds) Valid Values: Importance: high Update Mode: read-only","title":"controller.quorum.fetch.timeout.ms"},{"location":"3/#controllerquorumvoters","text":"\u4ee5\u9017\u53f7\u5206\u9694\u7684\u201c{id}@{host}:{port}\u201d\u6761\u76ee\u5217\u8868\u4e2d\u7684\u4e00\u7ec4\u6295\u7968\u8005\u7684 ID/\u7aef\u70b9\u4fe1\u606f\u6620\u5c04\u3002\u4f8b\u5982\uff1a`1@localhost:9092,2@localhost:9093,3@localhost:9094` Type: list Default: \"\" Valid Values: non-empty list Importance: high Update Mode: read-only","title":"controller.quorum.voters"},{"location":"3/#deletetopicenable","text":"\u542f\u7528\u5220\u9664\u4e3b\u9898\u3002\u5982\u679c\u5173\u95ed\u6b64\u914d\u7f6e\uff0c\u901a\u8fc7\u7ba1\u7406\u5de5\u5177\u5220\u9664\u4e3b\u9898\u5c06\u4e0d\u8d77\u4f5c\u7528 Type: boolean Default: true Valid Values: Importance: high Update Mode: read-only","title":"delete.topic.enable"},{"location":"3/#earlystartlisteners","text":"\u4ee5\u9017\u53f7\u5206\u9694\u7684\u4fa6\u542c\u5668\u540d\u79f0\u5217\u8868\uff0c\u53ef\u4ee5\u5728\u6388\u6743\u8005\u5b8c\u6210\u521d\u59cb\u5316\u4e4b\u524d\u542f\u52a8\u3002\u5f53\u6388\u6743\u8005\u4f9d\u8d56\u4e8e\u96c6\u7fa4\u672c\u8eab\u8fdb\u884c\u5f15\u5bfc\u65f6\uff0c\u8fd9\u975e\u5e38\u6709\u7528\uff0c\u5c31\u50cf StandardAuthorizer\uff08\u5c06 ACL \u5b58\u50a8\u5728\u5143\u6570\u636e\u65e5\u5fd7\u4e2d\uff09\u7684\u60c5\u51b5\u4e00\u6837\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ccontroller.listener.names \u4e2d\u5305\u542b\u7684\u6240\u6709\u4fa6\u542c\u5668\u4e5f\u5c06\u662f\u65e9\u671f\u542f\u52a8\u4fa6\u542c\u5668\u3002\u5982\u679c\u4fa6\u542c\u5668\u63a5\u53d7\u5916\u90e8\u6d41\u91cf\uff0c\u5219\u4e0d\u5e94\u51fa\u73b0\u5728\u6b64\u5217\u8868\u4e2d\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only","title":"early.start.listeners"},{"location":"3/#leaderimbalancecheckintervalseconds","text":"\u63a7\u5236\u5668\u89e6\u53d1\u5206\u533a\u91cd\u65b0\u5e73\u8861\u68c0\u67e5\u7684\u9891\u7387 Type: long Default: 300 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"leader.imbalance.check.interval.seconds"},{"location":"3/#leaderimbalanceperbrokerpercentage","text":"\u6bcf\u4e2abroker\u5141\u8bb8\u7684\u9886\u5bfc\u8005\u4e0d\u5e73\u8861\u6bd4\u7387\u3002\u5982\u679c\u6bcf\u4e2abroker\u7684\u4f59\u989d\u8d85\u8fc7\u6b64\u503c\uff0c\u63a7\u5236\u5668\u5c06\u89e6\u53d1\u9886\u5bfc\u8005\u4f59\u989d\u3002\u8be5\u503c\u4ee5\u767e\u5206\u6bd4\u6307\u5b9a\u3002 Type: int Default: 10 Valid Values: Importance: high Update Mode: read-only","title":"leader.imbalance.per.broker.percentage"},{"location":"3/#listeners","text":"\u4fa6\u542c\u5668\u5217\u8868 - \u6211\u4eec\u5c06\u4fa6\u542c\u7684 URI \u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u4ee5\u53ca\u4fa6\u542c\u5668\u540d\u79f0\u3002\u5982\u679c\u76d1\u542c\u5668\u540d\u79f0\u4e0d\u662f\u5b89\u5168\u534f\u8bae\uff0c listener.security.protocol.map \u4e5f\u5fc5\u987b\u8bbe\u7f6e\u3002 \u4fa6\u542c\u5668\u540d\u79f0\u548c\u7aef\u53e3\u53f7\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 \u5c06\u4e3b\u673a\u540d\u6307\u5b9a\u4e3a 0.0.0.0 \u4ee5\u7ed1\u5b9a\u5230\u6240\u6709\u63a5\u53e3\u3002 \u5c06\u4e3b\u673a\u540d\u7559\u7a7a\u4ee5\u7ed1\u5b9a\u5230\u9ed8\u8ba4\u63a5\u53e3\u3002 \u5408\u6cd5\u4fa6\u542c\u5668\u5217\u8868\u7684\u793a\u4f8b\uff1a PLAINTEXT://myhost:9092,SSL://:9091 CLIENT://0.0.0.0:9092,REPLICATION://localhost:9093 Type: string Default: PLAINTEXT://:9092 Valid Values: Importance: high Update Mode: per-broker","title":"listeners"},{"location":"3/#logdirs","text":"\u4fdd\u5b58\u65e5\u5fd7\u6570\u636e\u7684\u76ee\u5f55\uff08log.dirs \u5c5e\u6027\u7684\u8865\u5145\uff09 Type: string Default: /tmp/kafka-logs Valid Values: Importance: high Update Mode: read-only","title":"log.dirs"},{"location":"3/#logdirs_1","text":"\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u7684\u76ee\u5f55\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.dir \u4e2d\u7684\u503c\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only","title":"log.dirs"},{"location":"3/#logflushintervalmessages","text":"\u5728\u6d88\u606f\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u65e5\u5fd7\u5206\u533a\u4e0a\u7d2f\u79ef\u7684\u6d88\u606f\u6570 Type: long Default: 9223372036854775807 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide","title":"log.flush.interval.messages"},{"location":"3/#logflushintervalms","text":"\u4efb\u4f55\u4e3b\u9898\u4e2d\u7684\u6d88\u606f\u5728\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.flush.scheduler.interval.ms \u4e2d\u7684\u503c Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide","title":"log.flush.interval.ms"},{"location":"3/#logflushoffsetcheckpointintervalms","text":"\u6211\u4eec\u66f4\u65b0\u5145\u5f53\u65e5\u5fd7\u6062\u590d\u70b9\u7684\u6700\u540e\u4e00\u6b21\u5237\u65b0\u7684\u6301\u4e45\u8bb0\u5f55\u7684\u9891\u7387 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: high Update Mode: read-only","title":"log.flush.offset.checkpoint.interval.ms"},{"location":"3/#logflushschedulerintervalms","text":"\u65e5\u5fd7\u5237\u65b0\u5668\u68c0\u67e5\u662f\u5426\u6709\u65e5\u5fd7\u9700\u8981\u5237\u65b0\u5230\u78c1\u76d8\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: long Default: 9223372036854775807 Valid Values: Importance: high Update Mode: read-only","title":"log.flush.scheduler.interval.ms"},{"location":"3/#logflushstartoffsetcheckpointintervalms","text":"\u6211\u4eec\u66f4\u65b0\u65e5\u5fd7\u8d77\u59cb\u504f\u79fb\u91cf\u7684\u6301\u4e45\u8bb0\u5f55\u7684\u9891\u7387 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: high Update Mode: read-only","title":"log.flush.start.offset.checkpoint.interval.ms"},{"location":"3/#logretentionbytes","text":"\u5220\u9664\u65e5\u5fd7\u4e4b\u524d\u7684\u6700\u5927\u5927\u5c0f Type: long Default: -1 Valid Values: Importance: high Update Mode: cluster-wide","title":"log.retention.bytes"},{"location":"3/#logretentionhours","text":"\u5220\u9664\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u6587\u4ef6\u7684\u5c0f\u65f6\u6570\uff08\u4ee5\u5c0f\u65f6\u4e3a\u5355\u4f4d\uff09\uff0c\u7b2c\u4e09\u7ea7\u4e3a log.retention.ms \u5c5e\u6027 Type: int Default: 168 Valid Values: Importance: high Update Mode: read-only","title":"log.retention.hours"},{"location":"3/#logretentionminutes","text":"\u5220\u9664\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u6587\u4ef6\u7684\u5206\u949f\u6570\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\uff0c\u6b21\u8981\u4e8e log.retention.ms \u5c5e\u6027\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.retention.hours \u4e2d\u7684\u503c Type: int Default: null Valid Values: Importance: high Update Mode: read-only","title":"log.retention.minutes"},{"location":"3/#logretentionms","text":"\u5220\u9664\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u6587\u4ef6\u7684\u6beb\u79d2\u6570\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.retention.minutes \u4e2d\u7684\u503c\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a -1\uff0c\u5219\u4e0d\u5e94\u7528\u65f6\u95f4\u9650\u5236\u3002 Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide","title":"log.retention.ms"},{"location":"3/#logrollhours","text":"\u63a8\u51fa\u65b0\u65e5\u5fd7\u6bb5\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u5c0f\u65f6\u4e3a\u5355\u4f4d\uff09\uff0c\u6b21\u8981\u4e8e log.roll.ms \u5c5e\u6027 Type: int Default: 168 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"log.roll.hours"},{"location":"3/#logrolljitterhours","text":"\u4ece logRollTimeMillis \u4e2d\u51cf\u53bb\u7684\u6700\u5927\u6296\u52a8\uff08\u4ee5\u5c0f\u65f6\u4e3a\u5355\u4f4d\uff09\uff0c\u6b21\u8981\u4e8e log.roll.jitter.ms \u5c5e\u6027 Type: int Default: 0 Valid Values: [0,...] Importance: high Update Mode: read-only","title":"log.roll.jitter.hours"},{"location":"3/#logrolljitterms","text":"\u4ece logRollTimeMillis \u4e2d\u51cf\u53bb\u7684\u6700\u5927\u6296\u52a8\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.roll.jitter.hours \u4e2d\u7684\u503c Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide","title":"log.roll.jitter.ms"},{"location":"3/#logrollms","text":"\u63a8\u51fa\u65b0\u65e5\u5fd7\u6bb5\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528 log.roll.hours \u4e2d\u7684\u503c Type: long Default: null Valid Values: Importance: high Update Mode: cluster-wide","title":"log.roll.ms"},{"location":"3/#logsegmentbytes","text":"\u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f Type: int Default: 1073741824 (1 gibibyte) Valid Values: [14\uff0c...] Importance: high Update Mode: cluster-wide","title":"log.segment.bytes"},{"location":"3/#logsegmentdeletedelayms","text":"\u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5220\u9664\u6587\u4ef6\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4 Type: long Default: 60000 (1 minute) Valid Values: [0,...] Importance: high Update Mode: cluster-wide","title":"log.segment.delete.delay.ms"},{"location":"3/#messagemaxbytes","text":"Kafka \u5141\u8bb8\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\uff08\u5982\u679c\u542f\u7528\u538b\u7f29\uff0c\u5219\u5728\u538b\u7f29\u540e\uff09\u3002\u5982\u679c\u589e\u52a0\u6b64\u503c\u5e76\u4e14\u5b58\u5728\u65e9\u4e8e 0.10.2 \u7684\u6d88\u8d39\u8005\uff0c\u5219\u6d88\u8d39\u8005\u7684\u83b7\u53d6\u5927\u5c0f\u4e5f\u5fc5\u987b\u589e\u52a0\uff0c\u4ee5\u4fbf\u4ed6\u4eec\u53ef\u4ee5\u83b7\u53d6\u8fd9\u4e48\u5927\u7684\u8bb0\u5f55\u6279\u6b21\u3002\u5728\u6700\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u8bb0\u5f55\u603b\u662f\u5206\u7ec4\u4e3a\u6279\u6b21\u3002\u5728\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u672a\u538b\u7f29\u7684\u8bb0\u5f55\u4e0d\u4f1a\u5206\u7ec4\u4e3a\u6279\u6b21\uff0c\u5e76\u4e14\u6b64\u9650\u5236\u4ec5\u9002\u7528\u4e8e\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u5355\u4e2a\u8bb0\u5f55\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u4e3b\u9898\u7ea7\u522b\u914d\u7f6e\u9488\u5bf9\u6bcf\u4e2a\u4e3b\u9898\u8fdb\u884c\u8bbe\u7f6e max.message.bytes \u3002 Type: int Default: 1048588 Valid Values: [0,...] Importance: high Update Mode: cluster-wide","title":"message.max.bytes"},{"location":"3/#metadatalogdir","text":"\u6b64\u914d\u7f6e\u51b3\u5b9a\u4e86\u6211\u4eec\u5c06 KRaft \u6a21\u5f0f\u4e0b\u96c6\u7fa4\u7684\u5143\u6570\u636e\u65e5\u5fd7\u653e\u7f6e\u5728\u4f55\u5904\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5143\u6570\u636e\u65e5\u5fd7\u5c06\u653e\u7f6e\u5728 log.dirs \u4e2d\u7684\u7b2c\u4e00\u4e2alog.dirs\u4e2d\u3002 Type: string Default: null Valid Values: Importance: high Update Mode: read-only","title":"metadata.log.dir"},{"location":"3/#metadatalogmaxrecordbytes-betweensnapshots","text":"\u8fd9\u662f\u6700\u65b0\u5feb\u7167\u4e0e\u751f\u6210\u65b0\u5feb\u7167\u4e4b\u524d\u6240\u9700\u7684\u9ad8\u6c34\u4f4d\u7ebf\u4e4b\u95f4\u7684\u65e5\u5fd7\u4e2d\u7684\u6700\u5927\u5b57\u8282\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a20971520\u3002\u8981\u6839\u636e\u7ecf\u8fc7\u7684\u65f6\u95f4\u751f\u6210\u5feb\u7167\uff0c\u8bf7\u53c2\u89c1 metadata.log.max.snapshot.interval.ms \u914d\u7f6e\u3002\u5f53\u8fbe\u5230\u6700\u5927\u65f6\u95f4\u95f4\u9694\u6216\u8fbe\u5230\u6700\u5927\u5b57\u8282\u6570\u9650\u5236\u65f6\uff0cKafka \u8282\u70b9\u5c06\u751f\u6210\u5feb\u7167\u3002 Type: long Default: 20971520 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"metadata.log.max.record.bytes. Between.snapshots"},{"location":"3/#metadatalogmaxsnapshotintervalms","text":"\u5982\u679c\u65e5\u5fd7\u4e2d\u5b58\u5728\u672a\u5305\u542b\u5728\u6700\u65b0\u5feb\u7167\u4e2d\u7684\u5df2\u63d0\u4ea4\u8bb0\u5f55\uff0c\u5219\u8fd9\u662f\u7b49\u5f85\u751f\u6210\u5feb\u7167\u7684\u6700\u5927\u6beb\u79d2\u6570\u3002\u503c\u4e3a\u96f6\u5c06\u7981\u7528\u57fa\u4e8e\u65f6\u95f4\u7684\u5feb\u7167\u751f\u6210\u3002\u9ed8\u8ba4\u503c\u4e3a3600000\u3002\u5982\u679c\u8981\u6839\u636e\u5143\u6570\u636e\u5b57\u8282\u6570\u751f\u6210\u5feb\u7167\uff0c\u8bf7\u53c2\u89c1\u914d\u7f6e metadata.log.max.record.bytes.between.snapshots \u3002\u5f53\u8fbe\u5230\u6700\u5927\u65f6\u95f4\u95f4\u9694\u6216\u8fbe\u5230\u6700\u5927\u5b57\u8282\u6570\u9650\u5236\u65f6\uff0cKafka \u8282\u70b9\u5c06\u751f\u6210\u5feb\u7167\u3002 Type: long Default: 3600000 (1 hour) Valid Values: [0,...] Importance: high Update Mode: read-only","title":"metadata.log.max.snapshot.interval.ms"},{"location":"3/#metadatalogsegmentbytes","text":"\u5355\u4e2a\u5143\u6570\u636e\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f\u3002 Type: int Default: 1073741824 (1 gibibyte) Valid Values: [12\uff0c...] Importance: high Update Mode: read-only","title":"metadata.log.segment.bytes"},{"location":"3/#metadatalogsegmentms","text":"\u63a8\u51fa\u65b0\u5143\u6570\u636e\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 Type: long Default: 604800000 (7 days) Valid Values: Importance: high Update Mode: read-only","title":"metadata.log.segment.ms"},{"location":"3/#metadatamaxretentionbytes","text":"\u5220\u9664\u65e7\u5feb\u7167\u548c\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\u5143\u6570\u636e\u65e5\u5fd7\u548c\u5feb\u7167\u7684\u6700\u5927\u7ec4\u5408\u5927\u5c0f\u3002\u7531\u4e8e\u5728\u5220\u9664\u4efb\u4f55\u65e5\u5fd7\u4e4b\u524d\u5fc5\u987b\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u5feb\u7167\uff0c\u56e0\u6b64\u8fd9\u662f\u4e00\u9879\u8f6f\u9650\u5236\u3002 Type: long Default: 104857600 (100 mebibytes) Valid Values: Importance: high Update Mode: read-only","title":"metadata.max.retention.bytes"},{"location":"3/#metadatamaxretentionms","text":"\u5220\u9664\u5143\u6570\u636e\u65e5\u5fd7\u6587\u4ef6\u6216\u5feb\u7167\u4e4b\u524d\u4fdd\u7559\u7684\u6beb\u79d2\u6570\u3002\u7531\u4e8e\u5728\u5220\u9664\u4efb\u4f55\u65e5\u5fd7\u4e4b\u524d\u5fc5\u987b\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u5feb\u7167\uff0c\u56e0\u6b64\u8fd9\u662f\u4e00\u9879\u8f6f\u9650\u5236\u3002 Type: long Default: 604800000 (7 days) Valid Values: Importance: high Update Mode: read-only","title":"metadata.max.retention.ms"},{"location":"3/#mininsyncreplicas","text":"\u5f53\u751f\u4ea7\u8005\u5c06 acks \u8bbe\u7f6e\u4e3a\u201call\u201d\uff08\u6216\u201c-1\u201d\uff09\u65f6\uff0cmin.insync.replicas \u6307\u5b9a\u5fc5\u987b\u786e\u8ba4\u5199\u5165\u624d\u80fd\u88ab\u89c6\u4e3a\u6210\u529f\u7684\u6700\u5c0f\u526f\u672c\u6570\u3002\u5982\u679c\u65e0\u6cd5\u6ee1\u8db3\u6b64\u6700\u5c0f\u503c\uff0c\u5219\u751f\u4ea7\u8005\u5c06\u5f15\u53d1\u5f02\u5e38\uff08NotEnoughReplicas \u6216 NotEnoughReplicasAfterAppend\uff09\u3002 \u5f53\u4e00\u8d77\u4f7f\u7528\u65f6\uff0cmin.insync.replicas \u548c ack \u5141\u8bb8\u60a8\u5f3a\u5236\u6267\u884c\u66f4\u9ad8\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u3002\u5178\u578b\u7684\u573a\u666f\u662f\u521b\u5efa\u4e00\u4e2a\u590d\u5236\u56e0\u5b50\u4e3a 3 \u7684\u4e3b\u9898\uff0c\u5c06 min.insync.replicas \u8bbe\u7f6e\u4e3a 2\uff0c\u5e76\u4f7f\u7528\u201call\u201d\u7684 ack \u8fdb\u884c\u751f\u6210\u3002\u8fd9\u5c06\u786e\u4fdd\u751f\u4ea7\u8005\u5728\u5927\u591a\u6570\u526f\u672c\u672a\u6536\u5230\u5199\u5165\u65f6\u5f15\u53d1\u5f02\u5e38\u3002 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide","title":"min.insync.replicas"},{"location":"3/#nodeid","text":"\u5f53\u201cprocess.roles\u201d\u975e\u7a7a\u65f6\uff0c\u4e0e\u8be5\u8fdb\u7a0b\u6240\u626e\u6f14\u7684\u89d2\u8272\u5173\u8054\u7684\u8282\u70b9 ID\u3002\u8fd9\u662f\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\u6240\u9700\u7684\u914d\u7f6e\u3002 Type: int Default: -1 Valid Values: Importance: high Update Mode: read-only","title":"node.id"},{"location":"3/#numiothreads","text":"\u670d\u52a1\u5668\u7528\u4e8e\u5904\u7406\u8bf7\u6c42\u7684\u7ebf\u7a0b\u6570\uff0c\u5176\u4e2d\u53ef\u80fd\u5305\u62ec\u78c1\u76d8 I/O Type: int Default: 8 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide","title":"num.io.threads"},{"location":"3/#numnetworkthreads","text":"\u670d\u52a1\u5668\u7528\u4e8e\u4ece\u7f51\u7edc\u63a5\u6536\u8bf7\u6c42\u5e76\u5411\u7f51\u7edc\u53d1\u9001\u54cd\u5e94\u7684\u7ebf\u7a0b\u6570\u3002\u6ce8\u610f\uff1a\u6bcf\u4e2a\u76d1\u542c\u5668\uff08\u9664\u4e86\u63a7\u5236\u5668\u76d1\u542c\u5668\uff09\u90fd\u4f1a\u521b\u5efa\u81ea\u5df1\u7684\u7ebf\u7a0b\u6c60\u3002 Type: int Default: 3 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide","title":"num.network.threads"},{"location":"3/#numrecoverythreadsperdatadir","text":"\u6bcf\u4e2a\u6570\u636e\u76ee\u5f55\u7528\u4e8e\u542f\u52a8\u65f6\u65e5\u5fd7\u6062\u590d\u548c\u5173\u95ed\u65f6\u5237\u65b0\u7684\u7ebf\u7a0b\u6570 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high Update Mode: cluster-wide","title":"num.recovery.threads.per.data.dir"},{"location":"3/#numreplicaalterlogdirsthreads","text":"\u53ef\u4ee5\u5728log.dirs\u4e4b\u95f4\u79fb\u52a8\u526f\u672c\u7684\u7ebf\u7a0b\u6570\uff0c\u5176\u4e2d\u53ef\u80fd\u5305\u62ec\u78c1\u76d8 I/O Type: int Default: null Valid Values: Importance: high Update Mode: read-only","title":"num.replica.alter.log.dirs.threads"},{"location":"3/#numreplicafetchers","text":"\u7528\u4e8e\u4ece\u6bcf\u4e2a\u6e90\u4ee3\u7406\u590d\u5236\u8bb0\u5f55\u7684\u83b7\u53d6\u5668\u7ebf\u7a0b\u6570\u3002\u6bcf\u4e2a Broker \u4e0a\u7684 fetcher \u603b\u6570 num.replica.fetchers \u4e0e\u96c6\u7fa4\u4e2d\u7684 Broker \u6570\u91cf\u76f8\u4e58\u3002\u589e\u52a0\u6b64\u503c\u53ef\u4ee5\u63d0\u9ad8\u8ddf\u968f\u8005\u548c\u9886\u5bfc\u8005 Broker \u4e2d\u7684 I/O \u5e76\u884c\u5ea6\uff0c\u4f46\u4ee3\u4ef7\u662f\u66f4\u9ad8\u7684 CPU \u548c\u5185\u5b58\u5229\u7528\u7387\u3002 Type: int Default: 1 Valid Values: Importance: high Update Mode: cluster-wide","title":"num.replica.fetchers"},{"location":"3/#offsetsmetadatamaxbytes","text":"\u4e0e\u504f\u79fb\u63d0\u4ea4\u5173\u8054\u7684\u5143\u6570\u636e\u6761\u76ee\u7684\u6700\u5927\u5927\u5c0f Type: int Default: 4096 (4 kibibytes) Valid Values: Importance: high Update Mode: read-only","title":"offsets.metadata.max.bytes"},{"location":"3/#offsetscommitrequiredacks","text":"\u53ef\u4ee5\u63a5\u53d7\u63d0\u4ea4\u4e4b\u524d\u6240\u9700\u7684\u786e\u8ba4\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4e0d\u5e94\u8986\u76d6\u9ed8\u8ba4\u503c\uff08-1\uff09 Type: short Default: -1 Valid Values: Importance: high Update Mode: read-only","title":"offsets.commit.required.acks"},{"location":"3/#offsetscommittimeoutms","text":"\u504f\u79fb\u91cf\u63d0\u4ea4\u5c06\u88ab\u5ef6\u8fdf\uff0c\u76f4\u5230\u504f\u79fb\u91cf\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u90fd\u6536\u5230\u63d0\u4ea4\u6216\u8fbe\u5230\u6b64\u8d85\u65f6\u3002\u8fd9\u7c7b\u4f3c\u4e8e\u751f\u4ea7\u8005\u8bf7\u6c42\u8d85\u65f6\u3002 Type: int Default: 5000 (5 seconds) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"offsets.commit.timeout.ms"},{"location":"3/#offsetsloadbuffersize","text":"\u5c06\u504f\u79fb\u91cf\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\u65f6\u4ece\u504f\u79fb\u91cf\u6bb5\u8bfb\u53d6\u7684\u6279\u91cf\u5927\u5c0f\uff08\u8f6f\u9650\u5236\uff0c\u5982\u679c\u8bb0\u5f55\u592a\u5927\u5219\u8986\u76d6\uff09\u3002 Type: int Default: 5242880 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"offsets.load.buffer.size"},{"location":"3/#offsetsretentioncheckintervalms","text":"\u68c0\u67e5\u8fc7\u65f6\u504f\u79fb\u91cf\u7684\u9891\u7387 Type: long Default: 600000 (10 minutes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"offsets.retention.check.interval.ms"},{"location":"3/#offsetsretentionminutes","text":"\u5bf9\u4e8e\u8ba2\u9605\u7684\u6d88\u8d39\u8005\uff0c\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff0c\u7279\u5b9a\u5206\u533a\u7684\u5df2\u63d0\u4ea4\u504f\u79fb\u91cf\u5c06\u8fc7\u671f\u5e76\u88ab\u4e22\u5f03\uff1a 1\uff09\u5728\u6d88\u8d39\u8005\u7ec4\u5931\u53bb\u6240\u6709\u6d88\u8d39\u8005\uff08\u5373\u53d8\u7a7a\uff09\u540e\uff0c\u6b64\u4fdd\u7559\u671f\u5df2\u8fc7\uff1b 2) \u81ea\u4e0a\u6b21\u4e3a\u8be5\u5206\u533a\u63d0\u4ea4\u504f\u79fb\u91cf\u4ee5\u6765\uff0c\u8be5\u4fdd\u7559\u671f\u5df2\u8fc7\uff0c\u5e76\u4e14\u8be5\u7ec4\u4e0d\u518d\u8ba2\u9605\u76f8\u5e94\u7684\u4e3b\u9898\u3002 \u5bf9\u4e8e\u72ec\u7acb\u6d88\u8d39\u8005\uff08\u4f7f\u7528\u624b\u52a8\u5206\u914d\uff09\uff0c\u81ea\u4e0a\u6b21\u63d0\u4ea4\u4ee5\u6765\u7684\u4fdd\u7559\u671f\u8fc7\u540e\uff0c\u504f\u79fb\u91cf\u5c06\u8fc7\u671f\u3002 \u8bf7\u6ce8\u610f\uff0c\u5f53\u901a\u8fc7delete-group\u8bf7\u6c42\u5220\u9664\u4e00\u4e2a\u7ec4\u65f6\uff0c\u5176\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u4e5f\u5c06\u88ab\u5220\u9664\uff0c\u800c\u65e0\u9700\u989d\u5916\u7684\u4fdd\u7559\u671f\uff1b \u6b64\u5916\uff0c\u5f53\u901a\u8fc7\u5220\u9664\u4e3b\u9898\u8bf7\u6c42\u5220\u9664\u4e3b\u9898\u65f6\uff0c\u5728\u4f20\u64ad\u5143\u6570\u636e\u66f4\u65b0\u65f6\uff0c\u8be5\u4e3b\u9898\u7684\u4efb\u4f55\u7ec4\u7684\u63d0\u4ea4\u504f\u79fb\u91cf\u4e5f\u5c06\u88ab\u5220\u9664\uff0c\u800c\u65e0\u9700\u989d\u5916\u7684\u4fdd\u7559\u671f\u3002 Type: int Default: 10080 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"offsets.retention.minutes"},{"location":"3/#offsetstopiccompressioncodec","text":"\u504f\u79fb\u91cf\u4e3b\u9898\u7684\u538b\u7f29\u7f16\u89e3\u7801\u5668 - \u538b\u7f29\u53ef\u7528\u4e8e\u5b9e\u73b0\u201c\u539f\u5b50\u201d\u63d0\u4ea4 Type: int Default: 0 Valid Values: Importance: high Update Mode: read-only","title":"offsets.topic.compression.codec"},{"location":"3/#offsetstopicnumpartitions","text":"\u504f\u79fb\u63d0\u4ea4\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\uff08\u90e8\u7f72\u540e\u4e0d\u5e94\u66f4\u6539\uff09 Type: int Default: 50 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"offsets.topic.num.partitions"},{"location":"3/#offsetstopicreplicationfactor","text":"\u504f\u79fb\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u8bbe\u7f6e\u8f83\u9ad8\u4ee5\u786e\u4fdd\u53ef\u7528\u6027\uff09\u3002\u5728\u96c6\u7fa4\u5927\u5c0f\u6ee1\u8db3\u6b64\u590d\u5236\u56e0\u5b50\u8981\u6c42\u4e4b\u524d\uff0c\u5185\u90e8\u4e3b\u9898\u521b\u5efa\u5c06\u5931\u8d25\u3002 Type: short Default: 3 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"offsets.topic.replication.factor"},{"location":"3/#offsetstopicsegmentbytes","text":"\u504f\u79fb\u91cf\u4e3b\u9898\u6bb5\u5b57\u8282\u5e94\u4fdd\u6301\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4ee5\u4fbf\u4e8e\u66f4\u5feb\u7684\u65e5\u5fd7\u538b\u7f29\u548c\u7f13\u5b58\u52a0\u8f7d Type: int Default: 104857600 (100 mebibytes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"offsets.topic.segment.bytes"},{"location":"3/#processroles","text":"\u6b64\u6d41\u7a0b\u626e\u6f14\u7684\u89d2\u8272\uff1a\u201cbroker\u201d\u3001\u201c\u63a7\u5236\u8005\u201d\u6216\u201cbroker\u3001\u63a7\u5236\u8005\u201d\uff08\u5982\u679c\u4e24\u8005\u517c\u800c\u6709\u4e4b\uff09\u3002\u6b64\u914d\u7f6e\u4ec5\u9002\u7528\u4e8eKRaft\uff08Kafka Raft\uff09\u6a21\u5f0f\u7684\u96c6\u7fa4\uff08\u800c\u4e0d\u662fZooKeeper\uff09\u3002\u5bf9\u4e8e Zookeeper \u96c6\u7fa4\uff0c\u5c06\u6b64\u914d\u7f6e\u4fdd\u7559\u4e3a\u672a\u5b9a\u4e49\u6216\u4e3a\u7a7a\u3002 Type: list Default: \"\" Valid Values: [broker, controller] Importance: high Update Mode: read-only","title":"process.roles"},{"location":"3/#queuedmaxrequests","text":"\u5728\u963b\u585e\u7f51\u7edc\u7ebf\u7a0b\u4e4b\u524d\uff0c\u6570\u636e\u5e73\u9762\u5141\u8bb8\u7684\u6392\u961f\u8bf7\u6c42\u6570 Type: int Default: 500 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"queued.max.requests"},{"location":"3/#replicafetchminbytes","text":"\u6bcf\u4e2a\u83b7\u53d6\u54cd\u5e94\u6240\u9700\u7684\u6700\u5c0f\u5b57\u8282\u6570\u3002\u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u5b57\u8282\uff0c\u8bf7\u7b49\u5f85 replica.fetch.wait.max.ms \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u3002 Type: int Default: 1 Valid Values: Importance: high Update Mode: read-only","title":"replica.fetch.min.bytes"},{"location":"3/#replicafetchwaitmaxms","text":"\u8ddf\u968f\u8005\u526f\u672c\u53d1\u51fa\u7684\u6bcf\u4e2a fetcher \u8bf7\u6c42\u7684\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u3002\u8be5\u503c\u5e94\u59cb\u7ec8\u5c0f\u4e8ereplica.lag.time.max.ms\uff0c\u4ee5\u9632\u6b62\u4f4e\u541e\u5410\u91cf\u4e3b\u9898\u7684ISR\u9891\u7e41\u6536\u7f29 Type: int Default: 500 Valid Values: Importance: high Update Mode: read-only","title":"replica.fetch.wait.max.ms"},{"location":"3/#replicahighwatermarkcheckpointintervalms","text":"\u5c06\u9ad8\u6c34\u4f4d\u7ebf\u4fdd\u5b58\u5230\u78c1\u76d8\u7684\u9891\u7387 Type: long Default: 5000 (5 seconds) Valid Values: Importance: high Update Mode: read-only","title":"replica.high.watermark.checkpoint.interval.ms"},{"location":"3/#replicalagtimemaxms","text":"\u5982\u679c\u8ffd\u968f\u8005\u6ca1\u6709\u53d1\u9001\u4efb\u4f55\u83b7\u53d6\u8bf7\u6c42\u6216\u8005\u81f3\u5c11\u5728\u8fd9\u4e00\u6b21\u6ca1\u6709\u6d88\u8017\u5230\u9886\u5bfc\u8005\u65e5\u5fd7\u7ed3\u675f\u504f\u79fb\u91cf\uff0c\u5219\u9886\u5bfc\u8005\u5c06\u4ece isr \u4e2d\u5220\u9664\u8ffd\u968f\u8005 Type: long Default: 30000 (30 seconds) Valid Values: Importance: high Update Mode: read-only","title":"replica.lag.time.max.ms"},{"location":"3/#replicasocketreceivebufferbytes","text":"\u7528\u4e8e\u5411\u9886\u5bfc\u8005\u590d\u5236\u6570\u636e\u7684\u7f51\u7edc\u8bf7\u6c42\u7684\u5957\u63a5\u5b57\u63a5\u6536\u7f13\u51b2\u533a Type: int Default: 65536 (64 kibibytes) Valid Values: Importance: high Update Mode: read-only","title":"replica.socket.receive.buffer.bytes"},{"location":"3/#replicasockettimeoutms","text":"\u7f51\u7edc\u8bf7\u6c42\u7684\u5957\u63a5\u5b57\u8d85\u65f6\u3002\u5b83\u7684\u503c\u81f3\u5c11\u5e94\u8be5\u662freplica.fetch.wait.max.ms Type: int Default: 30000 (30 seconds) Valid Values: Importance: high Update Mode: read-only","title":"replica.socket.timeout.ms"},{"location":"3/#requesttimeoutms","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 30000 (30 seconds) Valid Values: Importance: high Update Mode: read-only","title":"request.timeout.ms"},{"location":"3/#saslmechanismcontrollerprotocol","text":"sasl.mechanism\u7528\u4e8e\u4e0e\u63a7\u5236\u5668\u901a\u4fe1\u3002\u9ed8\u8ba4\u4e3a GSSAPI\u3002 Type: string Default: GSAPI Valid Values: Importance: high Update Mode: read-only","title":"sasl.mechanism.controller.protocol"},{"location":"3/#socketreceivebufferbytes","text":"\u5957\u63a5\u5b57\u670d\u52a1\u5668\u5957\u63a5\u5b57\u7684 SO_RCVBUF \u7f13\u51b2\u533a\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 102400\uff08100 KB\uff09 Valid Values: Importance: high Update Mode: read-only","title":"socket.receive.buffer.bytes"},{"location":"3/#socketrequestmaxbytes","text":"\u4e00\u6b21socket\u8bf7\u6c42\u7684\u6700\u5927\u5b57\u8282\u6570 Type: int Default: 104857600 (100 mebibytes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"socket.request.max.bytes"},{"location":"3/#socketsendbufferbytes","text":"The SO_SNDBUF buffer of the socket server sockets. If the value is -1, the OS default will be used. Type: int Default: 102400 (100 kibibytes) Valid Values: Importance: high Update Mode: read-only","title":"socket.send.buffer.bytes"},{"location":"3/#transactionmaxtimeoutms","text":"The maximum allowed timeout for transactions. If a client\u2019s requested transaction time exceed this, then the broker will return an error in InitProducerIdRequest. This prevents a client from too large of a timeout, which can stall consumers reading from topics included in the transaction. Type: int Default: 900000 (15 minutes) Valid Values: [1,...] Importance: high Update Mode: read-only","title":"transaction.max.timeout.ms"},{"location":"3/#transactionstatelogloadbuffersize","text":"Batch size for reading from the transaction log segments when loading producer ids and transactions into the cache (soft-limit, overridden if records are too large). Type: int Default: 5242880 Valid Values: [1,...] Importance: high Update Mode: read-only","title":"transaction.state.log.load.buffer.size"},{"location":"3/#transactionstatelogminisr","text":"Overridden min.insync.replicas config for the transaction topic. Type: int Default: 2 Valid Values: [1,...] Importance: high Update Mode: read-only","title":"transaction.state.log.min.isr"},{"location":"3/#transactionstatelognumpartitions","text":"\u4e8b\u52a1\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\uff08\u90e8\u7f72\u540e\u4e0d\u5e94\u66f4\u6539\uff09\u3002 Type: int Default: 50 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"transaction.state.log.num.partitions"},{"location":"3/#transactionstatelogreplicationfactor","text":"\u4e8b\u52a1\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u8bbe\u7f6e\u8f83\u9ad8\u4ee5\u786e\u4fdd\u53ef\u7528\u6027\uff09\u3002\u5728\u96c6\u7fa4\u5927\u5c0f\u6ee1\u8db3\u6b64\u590d\u5236\u56e0\u5b50\u8981\u6c42\u4e4b\u524d\uff0c\u5185\u90e8\u4e3b\u9898\u521b\u5efa\u5c06\u5931\u8d25\u3002 Type: short Default: 3 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"transaction.state.log.replication.factor"},{"location":"3/#transactionstatelogsegmentbytes","text":"\u4e8b\u52a1\u4e3b\u9898\u6bb5\u5b57\u8282\u5e94\u4fdd\u6301\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4ee5\u4fbf\u4e8e\u66f4\u5feb\u7684\u65e5\u5fd7\u538b\u7f29\u548c\u7f13\u5b58\u52a0\u8f7d Type: int Default: 104857600 (100 mebibytes) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"transaction.state.log.segment.bytes"},{"location":"3/#transactionalidexpirationms","text":"\u5728\u4e8b\u52a1 ID \u8fc7\u671f\u4e4b\u524d\uff0c\u4e8b\u52a1\u534f\u8c03\u5668\u5728\u672a\u6536\u5230\u5f53\u524d\u4e8b\u52a1\u7684\u4efb\u4f55\u4e8b\u52a1\u72b6\u6001\u66f4\u65b0\u7684\u60c5\u51b5\u4e0b\u5c06\u7b49\u5f85\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5f53\u4ea4\u6613\u4ecd\u5728\u8fdb\u884c\u65f6\uff0c\u4ea4\u6613 ID \u4e0d\u4f1a\u8fc7\u671f\u3002 Type: int Default: 604800000 (7 days) Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"transactional.id.expiration.ms"},{"location":"3/#uncleanleaderelectionenable","text":"\u6307\u793a\u662f\u5426\u5c06\u4e0d\u5728 ISR \u96c6\u4e2d\u7684\u526f\u672c\u4f5c\u4e3a\u6700\u540e\u624b\u6bb5\u9009\u4e3e\u4e3a\u9886\u5bfc\u8005\uff0c\u5373\u4f7f\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931 Type: boolean Default: false Valid Values: Importance: high Update Mode: cluster-wide","title":"unclean.leader.election.enable"},{"location":"3/#zookeeperconnect","text":"\u4ee5\u4ee5\u4e0b\u5f62\u5f0f\u6307\u5b9a ZooKeeper \u8fde\u63a5\u5b57\u7b26\u4e32\uff0c hostname:port \u5176\u4e2d host \u548c port \u662f ZooKeeper \u670d\u52a1\u5668\u7684\u4e3b\u673a\u548c\u7aef\u53e3\u3002\u8981\u5141\u8bb8\u5728 ZooKeeper \u673a\u5668\u5173\u95ed\u65f6\u901a\u8fc7\u5176\u4ed6 ZooKeeper \u8282\u70b9\u8fdb\u884c\u8fde\u63a5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u5728\u8868\u5355\u4e2d\u6307\u5b9a\u591a\u4e2a\u4e3b\u673a hostname1:port1,hostname2:port2,hostname3:port3 \u3002 \u670d\u52a1\u5668\u8fd8\u53ef\u4ee5\u5c06 ZooKeeper chroot \u8def\u5f84\u4f5c\u4e3a\u5176 ZooKeeper \u8fde\u63a5\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\uff0c\u8be5\u8fde\u63a5\u5b57\u7b26\u4e32\u5c06\u5176\u6570\u636e\u653e\u7f6e\u5728\u5168\u5c40 ZooKeeper \u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u67d0\u4e2a\u8def\u5f84\u4e0b\u3002\u4f8b\u5982\uff0c\u8981\u7ed9\u51fa chroot \u8def\u5f84\uff0c /chroot/path \u8bf7\u5c06\u8fde\u63a5\u5b57\u7b26\u4e32\u7ed9\u51fa\u4e3a hostname1:port1,hostname2:port2,hostname3:port3/chroot/path . Type: string Default: null Valid Values: Importance: high Update Mode: read-only","title":"zookeeper.connect"},{"location":"3/#zookeeperconnectiontimeoutms","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u4e0ezookeeper\u5efa\u7acb\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528zookeeper.session.timeout.ms\u4e2d\u7684\u503c Type: int Default: null Valid Values: Importance: high Update Mode: read-only","title":"zookeeper.connection.timeout.ms"},{"location":"3/#zookeepermaxinflightrequests","text":"\u5ba2\u6237\u7aef\u5728\u963b\u585e\u4e4b\u524d\u5411 Zookeeper \u53d1\u9001\u7684\u672a\u786e\u8ba4\u8bf7\u6c42\u7684\u6700\u5927\u6570\u91cf\u3002 Type: int Default: 10 Valid Values: [1\uff0c...] Importance: high Update Mode: read-only","title":"zookeeper.max.in.flight.requests"},{"location":"3/#zookeepermetadatamigrationenable","text":"\u542f\u7528 ZK \u5230 KRaft \u8fc1\u79fb Type: boolean Default: false Valid Values: Importance: high Update Mode: read-only","title":"zookeeper.metadata.migration.enable"},{"location":"3/#zookeepersessiontimeoutms","text":"Zookeeper \u4f1a\u8bdd\u8d85\u65f6 Type: int Default: 18000 (18 seconds) Valid Values: Importance: high Update Mode: read-only","title":"zookeeper.session.timeout.ms"},{"location":"3/#zookeepersetacl","text":"\u8bbe\u7f6e\u5ba2\u6237\u7aef\u4f7f\u7528\u5b89\u5168 ACL Type: boolean Default: false Valid Values: Importance: high Update Mode: read-only","title":"zookeeper.set.acl"},{"location":"3/#brokerheartbeatintervalms","text":"\u4ee3\u7406\u5fc3\u8df3\u4e4b\u95f4\u7684\u65f6\u95f4\u957f\u5ea6\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\u4f7f\u7528\u3002 Type: int Default: 2000 (2 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"broker.heartbeat.interval.ms"},{"location":"3/#brokeridgenerationenable","text":"\u5728\u670d\u52a1\u5668\u4e0a\u542f\u7528\u81ea\u52a8\u4ee3\u7406 ID \u751f\u6210\u3002\u542f\u7528\u540e\uff0c\u5e94\u68c0\u67e5\u4e3aserved.broker.max.id\u914d\u7f6e\u7684\u503c\u3002 Type: boolean Default: true Valid Values: Importance: medium Update Mode: read-only","title":"broker.id.generation.enable"},{"location":"3/#brokerrack","text":"broker\u7684\u673a\u67b6\u3002\u8fd9\u5c06\u7528\u4e8e\u673a\u67b6\u611f\u77e5\u590d\u5236\u5206\u914d\u4ee5\u5b9e\u73b0\u5bb9\u9519\u3002\u793a\u4f8b\uff1a\u201cRACK1\u201d\u3001\u201cus-east-1d\u201d Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"broker.rack"},{"location":"3/#brokersessiontimeoutms","text":"The length of time in milliseconds that a broker lease lasts if no heartbeats are made. Used when running in KRaft mode. Type: int Default: 9000 (9 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"broker.session.timeout.ms"},{"location":"3/#connectionsmaxidlems","text":"Idle connections timeout: the server socket processor threads close the connections that idle more than this Type: long Default: 600000 (10 minutes) Valid Values: Importance: medium Update Mode: read-only","title":"connections.max.idle.ms"},{"location":"3/#connectionsmaxreauthms","text":"When explicitly set to a positive number (the default is 0, not a positive number), a session lifetime that will not exceed the configured value will be communicated to v2.2.0 or later clients when they authenticate. The broker will disconnect any such connection that is not re-authenticated within the session lifetime and that is then subsequently used for any purpose other than re-authentication. Configuration names can optionally be prefixed with listener prefix and SASL mechanism name in lower-case. For example, listener.name.sasl_ssl.oauthbearer.connections.max.reauth.ms=3600000 Type: long Default: 0 Valid Values: Importance: medium Update Mode: read-only","title":"connections.max.reauth.ms"},{"location":"3/#controlledshutdownenable","text":"Enable controlled shutdown of the server Type: boolean Default: true Valid Values: Importance: medium Update Mode: read-only","title":"controlled.shutdown.enable"},{"location":"3/#controlledshutdownmaxretries","text":"Controlled shutdown can fail for multiple reasons. This determines the number of retries when such failure happens Type: int Default: 3 Valid Values: Importance: medium Update Mode: read-only","title":"controlled.shutdown.max.retries"},{"location":"3/#controlledshutdownretrybackoffms","text":"Before each retry, the system needs time to recover from the state that caused the previous failure (Controller fail over, replica lag etc). This config determines the amount of time to wait before retrying. Type: long Default: 5000 (5 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"controlled.shutdown.retry.backoff.ms"},{"location":"3/#controllerquorumappendlingerms","text":"The duration in milliseconds that the leader will wait for writes to accumulate before flushing them to disk. Type: int Default: 25 Valid Values: Importance: medium Update Mode: read-only","title":"controller.quorum.append.linger.ms"},{"location":"3/#controllerquorumrequesttimeoutms","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 2000 (2 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"controller.quorum.request.timeout.ms"},{"location":"3/#controllersockettimeoutms","text":"\u63a7\u5236\u5668\u5230\u4ee3\u7406\u901a\u9053\u7684\u5957\u63a5\u5b57\u8d85\u65f6 Type: int Default: 30000 (30 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"controller.socket.timeout.ms"},{"location":"3/#defaultreplicationfactor","text":"\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u7684\u9ed8\u8ba4\u590d\u5236\u56e0\u5b50 Type: int Default: 1 Valid Values: Importance: medium Update Mode: read-only","title":"default.replication.factor"},{"location":"3/#delegatetokenexpirytimems","text":"\u4ee4\u724c\u9700\u8981\u66f4\u65b0\u4e4b\u524d\u7684\u4ee4\u724c\u6709\u6548\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u9ed8\u8ba4\u503c 1 \u5929\u3002 Type: long Default: 86400000 (1 day) Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only","title":"delegate.token.expiry.time.ms"},{"location":"3/#delegationtokenmasterkey","text":"\u5df2\u5f03\u7528\uff1adelegation.token.secret.key \u7684\u522b\u540d\uff0c\u5e94\u4f7f\u7528\u5b83\u6765\u4ee3\u66ff\u6b64\u914d\u7f6e\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only","title":"delegation.token.master.key"},{"location":"3/#delegationtokenmaxlifetimems","text":"\u4ee4\u724c\u5177\u6709\u6700\u957f\u751f\u547d\u5468\u671f\uff0c\u8d85\u8fc7\u8be5\u751f\u547d\u5468\u671f\u5c31\u65e0\u6cd5\u518d\u7eed\u8ba2\u3002\u9ed8\u8ba4\u503c 7 \u5929\u3002 Type: long Default: 604800000 (7 days) Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only","title":"delegation.token.max.lifetime.ms"},{"location":"3/#delegationtokensecretkey","text":"\u7528\u4e8e\u751f\u6210\u548c\u9a8c\u8bc1\u59d4\u6258\u4ee4\u724c\u7684\u5bc6\u94a5\u3002\u5fc5\u987b\u5728\u6240\u6709\u4ee3\u7406\u4e4b\u95f4\u914d\u7f6e\u76f8\u540c\u7684\u5bc6\u94a5\u3002\u5982\u679c\u5bc6\u94a5\u672a\u8bbe\u7f6e\u6216\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u4ee3\u7406\u5c06\u7981\u7528\u59d4\u6258\u4ee4\u724c\u652f\u6301\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only","title":"delegation.token.secret.key"},{"location":"3/#deleterecordspurgatorypurgeintervalrequests","text":"\u5220\u9664\u8bb0\u5f55\u8bf7\u6c42purgatory\u7684\u6e05\u9664\u95f4\u9694\uff08\u4ee5\u8bf7\u6c42\u6570\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1 Valid Values: Importance: medium Update Mode: read-only","title":"delete.records.purgatory.purge.interval.requests"},{"location":"3/#fetchmaxbytes","text":"\u6211\u4eec\u5c06\u4e3a\u83b7\u53d6\u8bf7\u6c42\u8fd4\u56de\u7684\u6700\u5927\u5b57\u8282\u6570\u3002\u5fc5\u987b\u81f3\u5c11\u4e3a 1024\u3002 Type: int Default: 57671680 (55 mebibytes) Valid Values: [1024\uff0c...] Importance: medium Update Mode: read-only","title":"fetch.max.bytes"},{"location":"3/#fetchpurgatorypurgeintervalrequests","text":"\u83b7\u53d6\u8bf7\u6c42\u70bc\u72f1\u7684\u6e05\u9664\u95f4\u9694\uff08\u4ee5\u8bf7\u6c42\u6570\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1000 Valid Values: Importance: medium Update Mode: read-only","title":"fetch.purgatory.purge.interval.requests"},{"location":"3/#groupinitialrebalancedelayms","text":"\u7ec4\u534f\u8c03\u5458\u5728\u6267\u884c\u7b2c\u4e00\u6b21\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u7b49\u5f85\u66f4\u591a\u6d88\u8d39\u8005\u52a0\u5165\u65b0\u7ec4\u7684\u65f6\u95f4\u3002\u8f83\u957f\u7684\u5ef6\u8fdf\u610f\u5473\u7740\u53ef\u80fd\u4f1a\u51cf\u5c11\u91cd\u65b0\u5e73\u8861\uff0c\u4f46\u4f1a\u589e\u52a0\u5904\u7406\u5f00\u59cb\u4e4b\u524d\u7684\u65f6\u95f4\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"group.initial.rebalance.delay.ms"},{"location":"3/#groupmaxsessiontimeoutms","text":"\u6ce8\u518c\u6d88\u8d39\u8005\u5141\u8bb8\u7684\u6700\u5927\u4f1a\u8bdd\u8d85\u65f6\u3002\u8f83\u957f\u7684\u8d85\u65f6\u4f7f\u6d88\u8d39\u8005\u6709\u66f4\u591a\u7684\u65f6\u95f4\u5728\u5fc3\u8df3\u4e4b\u95f4\u5904\u7406\u6d88\u606f\uff0c\u4f46\u4ee3\u4ef7\u662f\u68c0\u6d4b\u6545\u969c\u7684\u65f6\u95f4\u66f4\u957f\u3002 Type: int Default: 1800000\uff0830\u5206\u949f\uff09 Valid Values: Importance: medium Update Mode: read-only","title":"group.max.session.timeout.ms"},{"location":"3/#groupmaxsize","text":"\u5355\u4e2a\u6d88\u8d39\u7ec4\u53ef\u4ee5\u5bb9\u7eb3\u7684\u6700\u5927\u6d88\u8d39\u8005\u6570\u91cf\u3002 Type: int Default: 2147483647 Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only","title":"group.max.size"},{"location":"3/#groupminsessiontimeoutms","text":"\u6ce8\u518c\u6d88\u8d39\u8005\u5141\u8bb8\u7684\u6700\u77ed\u4f1a\u8bdd\u8d85\u65f6\u3002\u66f4\u77ed\u7684\u8d85\u65f6\u4f1a\u5bfc\u81f4\u66f4\u5feb\u7684\u6545\u969c\u68c0\u6d4b\uff0c\u4f46\u4ee3\u4ef7\u662f\u66f4\u9891\u7e41\u7684\u6d88\u8d39\u8005\u5fc3\u8df3\uff0c\u8fd9\u53ef\u80fd\u4f1a\u538b\u57ae\u4ee3\u7406\u8d44\u6e90\u3002 Type: int Default: 6000 (6 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"group.min.session.timeout.ms"},{"location":"3/#initialbrokerregistrationtimeoutms","text":"\u6700\u521d\u5411\u63a7\u5236\u5668\u4ef2\u88c1\u6ce8\u518c\u65f6\uff0c\u5728\u58f0\u660e\u5931\u8d25\u5e76\u9000\u51fa\u4ee3\u7406\u8fdb\u7a0b\u4e4b\u524d\u7b49\u5f85\u7684\u6beb\u79d2\u6570\u3002 Type: int Default: 60000 (1 minute) Valid Values: Importance: medium Update Mode: read-only","title":"initial.broker.registration.timeout.ms"},{"location":"3/#interbrokerlistenername","text":"\u7528\u4e8e\u4ee3\u7406\u4e4b\u95f4\u901a\u4fe1\u7684\u4fa6\u542c\u5668\u540d\u79f0\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4fa6\u542c\u5668\u540d\u79f0\u7531 security.inter.broker.protocol \u5b9a\u4e49\u3002\u540c\u65f6\u8bbe\u7f6e\u6b64\u5c5e\u6027\u548c security.inter.broker.protocol \u5c5e\u6027\u662f\u9519\u8bef\u7684\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"inter.broker.listener.name"},{"location":"3/#interbrokerprotocolversion","text":"\u6307\u5b9a\u5c06\u4f7f\u7528\u54ea\u4e2a\u7248\u672c\u7684\u4ee3\u7406\u95f4\u534f\u8bae\u3002 \u5728\u6240\u6709\u4ee3\u7406\u5347\u7ea7\u5230\u65b0\u7248\u672c\u540e\uff0c\u8fd9\u901a\u5e38\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u4e00\u4e9b\u6709\u6548\u503c\u7684\u793a\u4f8b\u4e3a\uff1a 0.8.0\u30010.8.1\u30010.8.1.1\u30010.8.2\u30010.8.2.0\u30010.8.2.1\u30010.9.0.0\u30010.9.0.1 \u68c0\u67e5 MetadataVersion \u4ee5\u83b7\u53d6\u5b8c\u6574\u5217\u8868\u3002 Type: string Default: 3.5-IV2 Valid Values: [0.8.0\u30010.8.1\u30010.8.2\u30010.9.0\u30010.10.0-IV0\u30010.10.0-IV1\u30010.10.1-IV0\u30010.10.1-IV1\u30010.10.1-IV2\u30010.10.2 -IV0\u30010.11.0-IV0\u30010.11.0-IV1\u30010.11.0-IV2\u30011.0-IV0\u30011.1-IV0\u30012.0-IV0\u30012.0-IV1\u30012.1-IV0\u30012.1-IV1\u30012.1-IV2\u30012.2 [0100]-IV0\u30012.2-IV1\u30012.3-IV0\u30012.3-IV1\u30012.4-IV0\u30012.4-IV1\u30012.5-IV0\u30012.6-IV0\u30012.7-IV0\u30012.7-IV1\u30012.7-IV2\u30012.8-IV0\u30012.8-IV1 , 3.0-IV0, 3.0-IV1, 3.1-IV0, 3.2-IV0, 3.3-IV0, 3.3-IV1, 3.3-IV2, 3.3-IV3, 3.4-IV0, 3.5-IV0, 3.5-IV1, 3.5-IV2] Importance: medium Update Mode: read-only","title":"inter.broker.protocol.version"},{"location":"3/#logcleanerbackoffms","text":"The amount of time to sleep when there are no logs to clean Type: long Default: 15000 (15 seconds) Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"log.cleaner.backoff.ms"},{"location":"3/#logcleanerdedupebuffersize","text":"The total memory used for log deduplication across all cleaner threads Type: long Default: 134217728 Valid Values: Importance: medium Update Mode: cluster-wide","title":"log.cleaner.dedupe.buffer.size"},{"location":"3/#logcleanerdeleteretentionms","text":"The amount of time to retain delete tombstone markers for log compacted topics. This setting also gives a bound on the time in which a consumer must complete a read if they begin from offset 0 to ensure that they get a valid snapshot of the final stage (otherwise delete tombstones may be collected before they complete their scan). Type: long Default: 86400000 (1 day) Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"log.cleaner.delete.retention.ms"},{"location":"3/#logcleanerenable","text":"Enable the log cleaner process to run on the server. Should be enabled if using any topics with a cleanup.policy=compact including the internal offsets topic. If disabled those topics will not be compacted and continually grow in size. Type: boolean Default: true Valid Values: Importance: medium Update Mode: read-only","title":"log.cleaner.enable"},{"location":"3/#logcleaneriobufferloadfactor","text":"Log cleaner dedupe buffer load factor. The percentage full the dedupe buffer can become. A higher value will allow more log to be cleaned at once but will lead to more hash collisions Type: double Default: 0.9 Valid Values: Importance: medium Update Mode: cluster-wide","title":"log.cleaner.io.buffer.load.factor"},{"location":"3/#logcleaneriobuffersize","text":"The total memory used for log cleaner I/O buffers across all cleaner threads Type: int Default: 524288 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"log.cleaner.io.buffer.size"},{"location":"3/#logcleaneriomaxbytespersecond","text":"The log cleaner will be throttled so that the sum of its read and write i/o will be less than this value on average Type: double Default: 1.7976931348623157E308 Valid Values: Importance: medium Update Mode: cluster-wide","title":"log.cleaner.io.max.bytes.per.second"},{"location":"3/#logcleanermaxcompactionlagms","text":"The maximum time a message will remain ineligible for compaction in the log. Only applicable for logs that are being compacted. Type: long Default: 9223372036854775807 Valid Values: [1,...] Importance: medium Update Mode: cluster-wide","title":"log.cleaner.max.compaction.lag.ms"},{"location":"3/#logcleanermincleanableratio","text":"The minimum ratio of dirty log to total log for a log to eligible for cleaning. If the log.cleaner.max.compaction.lag.ms or the log.cleaner.min.compaction.lag.ms configurations are also specified, then the log compactor considers the log eligible for compaction as soon as either: (i) the dirty ratio threshold has been met and the log has had dirty (uncompacted) records for at least the log.cleaner.min.compaction.lag.ms duration, or (ii) if the log has had dirty (uncompacted) records for at most the log.cleaner.max.compaction.lag.ms period. Type: double Default: 0.5 Valid Values: [0,...,1] Importance: medium Update Mode: cluster-wide","title":"log.cleaner.min.cleanable.ratio"},{"location":"3/#logcleanermincompactionlagms","text":"\u6d88\u606f\u5728\u65e5\u5fd7\u4e2d\u4fdd\u6301\u672a\u538b\u7f29\u72b6\u6001\u7684\u6700\u77ed\u65f6\u95f4\u3002\u4ec5\u9002\u7528\u4e8e\u6b63\u5728\u538b\u7f29\u7684\u65e5\u5fd7\u3002 Type: long Default: 0 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"log.cleaner.min.compaction.lag.ms"},{"location":"3/#logcleanerthreads","text":"\u7528\u4e8e\u65e5\u5fd7\u6e05\u7406\u7684\u540e\u53f0\u7ebf\u7a0b\u6570 Type: int Default: 1 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"log.cleaner.threads"},{"location":"3/#logcleanuppolicy","text":"\u8d85\u51fa\u4fdd\u7559\u7a97\u53e3\u7684\u6bb5\u7684\u9ed8\u8ba4\u6e05\u7406\u7b56\u7565\u3002\u4ee5\u9017\u53f7\u5206\u9694\u7684\u6709\u6548\u7b56\u7565\u5217\u8868\u3002\u6709\u6548\u7684\u7b56\u7565\u662f\uff1a\u201c\u5220\u9664\u201d\u548c\u201c\u7d27\u51d1\u201d Type: list Default: delete Valid Values: [compact, delete] Importance: medium Update Mode: cluster-wide","title":"log.cleanup.policy"},{"location":"3/#logindexintervalbytes","text":"\u6211\u4eec\u5411\u504f\u79fb\u7d22\u5f15\u6dfb\u52a0\u6761\u76ee\u7684\u65f6\u95f4\u95f4\u9694 Type: int Default: 4096 (4 kibibytes) Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"log.index.interval.bytes"},{"location":"3/#logindexsizemaxbytes","text":"\u504f\u79fb\u7d22\u5f15\u7684\u6700\u5927\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09 Type: int Default: 10485760 (10 mebibytes) Valid Values: [4\uff0c...] Importance: medium Update Mode: cluster-wide","title":"log.index.size.max.bytes"},{"location":"3/#logmessageformatversion","text":"\u6307\u5b9a\u4ee3\u7406\u5c06\u7528\u4e8e\u5c06\u6d88\u606f\u9644\u52a0\u5230\u65e5\u5fd7\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u8be5\u503c\u5e94\u8be5\u662f\u6709\u6548\u7684 MetadataVersion\u3002\u4e00\u4e9b\u793a\u4f8b\u662f\uff1a0.8.2\u30010.9.0.0\u30010.10.0\uff0c\u8bf7\u68c0\u67e5 MetadataVersion \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002\u901a\u8fc7\u8bbe\u7f6e\u7279\u5b9a\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u7528\u6237\u53ef\u4ee5\u8bc1\u660e\u78c1\u76d8\u4e0a\u7684\u6240\u6709\u73b0\u6709\u6d88\u606f\u90fd\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u7684\u7248\u672c\u3002\u9519\u8bef\u5730\u8bbe\u7f6e\u6b64\u503c\u5c06\u5bfc\u81f4\u4f7f\u7528\u65e7\u7248\u672c\u7684\u6d88\u8d39\u8005\u5d29\u6e83\uff0c\u56e0\u4e3a\u4ed6\u4eec\u5c06\u6536\u5230\u4ed6\u4eec\u4e0d\u7406\u89e3\u7684\u683c\u5f0f\u7684\u6d88\u606f\u3002 Type: string Default: 3.0-IV1 Valid Values: [0.8.0\u30010.8.1\u30010.8.2\u30010.9.0\u30010.10.0-IV0\u30010.10.0-IV1\u30010.10.1-IV0\u30010.10.1-IV1\u30010.10.1-IV2\u30010.10.2 -IV0\u30010.11.0-IV0\u30010.11.0-IV1\u30010.11.0-IV2\u30011.0-IV0\u30011.1-IV0\u30012.0-IV0\u30012.0-IV1\u30012.1-IV0\u30012.1-IV1\u30012.1-IV2\u30012.2 [0100]-IV0\u30012.2-IV1\u30012.3-IV0\u30012.3-IV1\u30012.4-IV0\u30012.4-IV1\u30012.5-IV0\u30012.6-IV0\u30012.7-IV0\u30012.7-IV1\u30012.7-IV2\u30012.8-IV0\u30012.8-IV1 , 3.0-IV0, 3.0-IV1, 3.1-IV0, 3.2-IV0, 3.3-IV0, 3.3-IV1, 3.3-IV2, 3.3-IV3, 3.4-IV0, 3.5-IV0, 3.5-IV1, 3.5-IV2] Importance: medium Update Mode: read-only","title":"log.message.format.version"},{"location":"3/#logmessagetimestampdifferencemaxms","text":"\u4ee3\u7406\u6536\u5230\u6d88\u606f\u65f6\u7684\u65f6\u95f4\u6233\u4e0e\u6d88\u606f\u4e2d\u6307\u5b9a\u7684\u65f6\u95f4\u6233\u4e4b\u95f4\u5141\u8bb8\u7684\u6700\u5927\u5dee\u5f02\u3002\u5982\u679c log.message.timestamp.type=CreateTime\uff0c\u5219\u5982\u679c\u65f6\u95f4\u6233\u5dee\u5f02\u8d85\u8fc7\u6b64\u9608\u503c\uff0c\u6d88\u606f\u5c06\u88ab\u62d2\u7edd\u3002\u5982\u679clog.message.timestamp.type=LogAppendTime\uff0c\u5219\u5ffd\u7565\u6b64\u914d\u7f6e\u3002\u5141\u8bb8\u7684\u6700\u5927\u65f6\u95f4\u6233\u5dee\u5f02\u5e94\u4e0d\u5927\u4e8elog.retention.ms\uff0c\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u9891\u7e41\u65e5\u5fd7\u6eda\u52a8\u3002 Type: long Default: 9223372036854775807 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"log.message.timestamp.difference.max.ms"},{"location":"3/#logmessagetimestamptype","text":"\u5b9a\u4e49\u6d88\u606f\u4e2d\u7684\u65f6\u95f4\u6233\u662f\u6d88\u606f\u521b\u5efa\u65f6\u95f4\u8fd8\u662f\u65e5\u5fd7\u8ffd\u52a0\u65f6\u95f4\u3002\u8be5\u503c\u5e94\u8be5\u662f\u201cCreateTime\u201d\u6216\u201cLogAppendTime\u201d Type: string Default: CreateTime Valid Values: [CreateTime, LogAppendTime] Importance: medium Update Mode: cluster-wide","title":"log.message.timestamp.type"},{"location":"3/#logpreallocate","text":"\u521b\u5efa\u65b0\u6bb5\u65f6\u662f\u5426\u5e94\u8be5\u9884\u5148\u5206\u914d\u6587\u4ef6\uff1f\u5982\u679c\u60a8\u5728 Windows \u4e0a\u4f7f\u7528 Kafka\uff0c\u5219\u53ef\u80fd\u9700\u8981\u5c06\u5176\u8bbe\u7f6e\u4e3a true\u3002 Type: boolean Default: false Valid Values: Importance: medium Update Mode: cluster-wide","title":"log.preallocate"},{"location":"3/#logretentioncheckintervalms","text":"\u65e5\u5fd7\u6e05\u7406\u5668\u68c0\u67e5\u662f\u5426\u6709\u65e5\u5fd7\u7b26\u5408\u5220\u9664\u6761\u4ef6\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: long Default: 300000 (5 minutes) Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only","title":"log.retention.check.interval.ms"},{"location":"3/#maxconnectioncreationrate","text":"\u6211\u4eec\u5728\u4efb\u4f55\u65f6\u5019\u5141\u8bb8\u4ee3\u7406\u7684\u6700\u5927\u8fde\u63a5\u521b\u5efa\u901f\u7387\u3002\u4fa6\u542c\u5668\u7ea7\u522b\u9650\u5236\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u540d\u79f0\u524d\u6dfb\u52a0\u4fa6\u542c\u5668\u524d\u7f00\u6765\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c listener.name.internal.max.connection.creation.rate \u5e94\u6839\u636e\u4ee3\u7406\u5bb9\u91cf\u914d\u7f6e\u4ee3\u7406\u8303\u56f4\u7684\u8fde\u63a5\u901f\u7387\u9650\u5236\uff0c\u800c\u5e94\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u8981\u6c42\u914d\u7f6e\u4fa6\u542c\u5668\u9650\u5236\u3002\u5982\u679c\u8fbe\u5230\u4fa6\u542c\u5668\u6216\u4ee3\u7406\u9650\u5236\uff08\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u9664\u5916\uff09\uff0c\u65b0\u8fde\u63a5\u5c06\u53d7\u5230\u9650\u5236\u3002\u4ec5\u5f53\u8fbe\u5230\u4fa6\u542c\u5668\u7ea7\u522b\u7684\u901f\u7387\u9650\u5236\u65f6\uff0c\u624d\u4f1a\u9650\u5236\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u4e0a\u7684\u8fde\u63a5\u3002 Type: int Default: 2147483647 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"max.connection.creation.rate"},{"location":"3/#maxconnections","text":"\u6211\u4eec\u5728\u4efb\u4f55\u65f6\u5019\u5141\u8bb8\u4ee3\u7406\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002\u9664\u4e86\u4f7f\u7528 max.connections.per.ip \u914d\u7f6e\u7684\u4efb\u4f55\u6bcf ip \u9650\u5236\u4e4b\u5916\uff0c\u8fd8\u5e94\u7528\u6b64\u9650\u5236\u3002\u4fa6\u542c\u5668\u7ea7\u522b\u9650\u5236\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5728\u914d\u7f6e\u540d\u79f0\u524d\u6dfb\u52a0\u4fa6\u542c\u5668\u524d\u7f00\u6765\u914d\u7f6e\uff0c\u4f8b\u5982 listener.name.internal.max.connections . \u4ee3\u7406\u8303\u56f4\u7684\u9650\u5236\u5e94\u6839\u636e\u4ee3\u7406\u5bb9\u91cf\u8fdb\u884c\u914d\u7f6e\uff0c\u800c\u4fa6\u542c\u5668\u9650\u5236\u5e94\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u8981\u6c42\u8fdb\u884c\u914d\u7f6e\u3002\u5982\u679c\u8fbe\u5230\u4fa6\u542c\u5668\u6216\u4ee3\u7406\u9650\u5236\uff0c\u5219\u65b0\u8fde\u63a5\u5c06\u88ab\u963b\u6b62\u3002\u5373\u4f7f\u8fbe\u5230\u4ee3\u7406\u8303\u56f4\u7684\u9650\u5236\uff0c\u4e5f\u5141\u8bb8\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u4e0a\u7684\u8fde\u63a5\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53e6\u4e00\u4e2a\u4fa6\u542c\u5668\u4e0a\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u8fde\u63a5\u5c06\u88ab\u5173\u95ed\u3002 Type: int Default: 2147483647 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"max.connections"},{"location":"3/#maxconnectionsperip","text":"\u6211\u4eec\u5141\u8bb8\u6765\u81ea\u6bcf\u4e2a IP \u5730\u5740\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002\u5982\u679c\u4f7f\u7528 max.connections.per.ip.overrides \u5c5e\u6027\u914d\u7f6e\u4e86\u8986\u76d6\uff0c\u5219\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a 0\u3002\u5982\u679c\u8fbe\u5230\u9650\u5236\uff0c\u6765\u81ea\u8be5 IP \u5730\u5740\u7684\u65b0\u8fde\u63a5\u5c06\u88ab\u4e22\u5f03\u3002 Type: int Default: 2147483647 Valid Values: [0,...] Importance: medium Update Mode: cluster-wide","title":"max.connections.per.ip"},{"location":"3/#maxconnectionsperipoverrides","text":"\u6bcf\u4e2a IP \u6216\u4e3b\u673a\u540d\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u5c06\u8986\u76d6\u9ed8\u8ba4\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002\u793a\u4f8b\u503c\u4e3a\u201chostName:100,127.0.0.1:200\u201d Type: string Default: \"\" Valid Values: Importance: medium Update Mode: cluster-wide","title":"max.connections.per.ip.overrides"},{"location":"3/#maxincrementalfetchsessioncacheslots","text":"\u6211\u4eec\u5c06\u7ef4\u62a4\u7684\u589e\u91cf\u83b7\u53d6\u4f1a\u8bdd\u7684\u6700\u5927\u6570\u91cf\u3002 Type: int Default: 1000 Valid Values: [0,...] Importance: medium Update Mode: read-only","title":"max.incremental.fetch.session.cache.slots"},{"location":"3/#numpartitions","text":"\u6bcf\u4e2a\u4e3b\u9898\u7684\u9ed8\u8ba4\u65e5\u5fd7\u5206\u533a\u6570 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: medium Update Mode: read-only","title":"num.partitions"},{"location":"3/#passwordencoderoldsecret","text":"\u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u65e7\u79d8\u5bc6\u3002\u4ec5\u5f53\u66f4\u65b0\u673a\u5bc6\u65f6\u624d\u9700\u8981\u8fd9\u6837\u505a\u3002\u5982\u679c\u6307\u5b9a\uff0c\u6240\u6709\u52a8\u6001\u7f16\u7801\u7684\u5bc6\u7801\u90fd\u5c06\u4f7f\u7528\u6b64\u65e7\u5bc6\u94a5\u8fdb\u884c\u89e3\u7801\uff0c\u5e76\u5728\u4ee3\u7406\u542f\u52a8\u65f6\u4f7f\u7528password.encoder.secret \u91cd\u65b0\u7f16\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only","title":"password.encoder.old.secret"},{"location":"3/#passwordencodersecret","text":"\u7528\u4e8e\u7f16\u7801\u8be5\u4ee3\u7406\u7684\u52a8\u6001\u914d\u7f6e\u5bc6\u7801\u7684\u79d8\u5bc6\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only","title":"password.encoder.secret"},{"location":"3/#principalbuilderclass","text":"\u5b9e\u73b0 KafkaPrincipalBuilder \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\uff0c\u7528\u4e8e\u6784\u5efa\u6388\u6743\u671f\u95f4\u4f7f\u7528\u7684 KafkaPrincipal \u5bf9\u8c61\u3002\u5982\u679c\u672a\u5b9a\u4e49\u4e3b\u4f53\u6784\u5efa\u5668\uff0c\u5219\u9ed8\u8ba4\u884c\u4e3a\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u5b89\u5168\u534f\u8bae\u3002 ssl.principal.mapping.rules \u5bf9\u4e8e SSL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u5c06\u4f7f\u7528\u5e94\u7528\u4e8e\u5ba2\u6237\u7aef\u8bc1\u4e66\u4e2d\u7684\u53ef\u5206\u8fa8\u540d\u79f0\uff08\u5982\u679c\u63d0\u4f9b\u4e86\uff09\u5b9a\u4e49\u7684\u89c4\u5219\u6d3e\u751f\u4e3b\u4f53\uff1b\u5426\u5219\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u4e3b\u4f53\u540d\u79f0\u5c06\u4e3a ANONYMOUS\u3002 sasl.kerberos.principal.to.local.rules \u5bf9\u4e8e SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u5982\u679c\u4f7f\u7528 GSSAPI\uff0c\u5c06\u4f7f\u7528\u5b9a\u4e49\u7684\u89c4\u5219\u6d3e\u751f\u4e3b\u4f53\uff0c\u5bf9\u4e8e\u5176\u4ed6\u673a\u5236\u5219\u4f7f\u7528 SASL \u8eab\u4efd\u9a8c\u8bc1 ID\u3002\u5bf9\u4e8e\u660e\u6587\uff0c\u4e3b\u4f53\u5c06\u662f\u533f\u540d\u7684\u3002 Type: class Default: org.apache.kafka.common.security.authenticator.DefaultKafkaPrincipalBuilder Valid Values: Importance: medium Update Mode: per-broker","title":"principal.builder.class"},{"location":"3/#producerpurgatorypurgeintervalrequests","text":"\u751f\u4ea7\u8005\u8bf7\u6c42\u70bc\u72f1\u7684\u6e05\u9664\u95f4\u9694\uff08\u4ee5\u8bf7\u6c42\u6570\u4e3a\u5355\u4f4d\uff09 Type: int Default: 1000 Valid Values: Importance: medium Update Mode: read-only","title":"producer.purgatory.purge.interval.requests"},{"location":"3/#queuedmaxrequestbytes","text":"\u5728\u4e0d\u518d\u8bfb\u53d6\u8bf7\u6c42\u4e4b\u524d\u5141\u8bb8\u7684\u6392\u961f\u5b57\u8282\u6570 Type: long Default: -1 Valid Values: Importance: medium Update Mode: read-only","title":"queued.max.request.bytes"},{"location":"3/#replicafetchbackoffms","text":"\u53d1\u751f\u83b7\u53d6\u5206\u533a\u9519\u8bef\u65f6\u4f11\u7720\u7684\u65f6\u95f4\u91cf\u3002 Type: int Default: 1000 (1 second) Valid Values: [0,...] Importance: medium Update Mode: read-only","title":"replica.fetch.backoff.ms"},{"location":"3/#replicafetchmaxbytes","text":"\u5c1d\u8bd5\u4e3a\u6bcf\u4e2a\u5206\u533a\u83b7\u53d6\u7684\u6d88\u606f\u5b57\u8282\u6570\u3002\u8fd9\u4e0d\u662f\u7edd\u5bf9\u6700\u5927\u503c\uff0c\u5982\u679c\u63d0\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u6279\u6b21\u5927\u4e8e\u6b64\u503c\uff0c\u4ecd\u7136\u4f1a\u8fd4\u56de\u8be5\u8bb0\u5f55\u6279\u6b21\u4ee5\u786e\u4fdd\u53ef\u4ee5\u53d6\u5f97\u8fdb\u5c55\u3002\u4ee3\u7406\u63a5\u53d7\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u662f\u901a\u8fc7 message.max.bytes \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u6216 max.message.bytes \uff08\u4e3b\u9898\u914d\u7f6e\uff09\u5b9a\u4e49\u7684\u3002 Type: int Default: 1048576 (1 mebibyte) Valid Values: [0,...] Importance: medium Update Mode: read-only","title":"replica.fetch.max.bytes"},{"location":"3/#replicafetchresponsemaxbytes","text":"Maximum bytes expected for the entire fetch response. Records are fetched in batches, and if the first record batch in the first non-empty partition of the fetch is larger than this value, the record batch will still be returned to ensure that progress can be made. As such, this is not an absolute maximum. The maximum record batch size accepted by the broker is defined via message.max.bytes (broker config) or max.message.bytes (topic config). Type: int Default: 10485760 (10 mebibytes) Valid Values: [0,...] Importance: medium Update Mode: read-only","title":"replica.fetch.response.max.bytes"},{"location":"3/#replicaselectorclass","text":"The fully qualified class name that implements ReplicaSelector. This is used by the broker to find the preferred read replica. By default, we use an implementation that returns the leader. Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"replica.selector.class"},{"location":"3/#reservedbrokermaxid","text":"Max number that can be used for a broker.id Type: int Default: 1000 Valid Values: [0,...] Importance: medium Update Mode: read-only","title":"reserved.broker.max.id"},{"location":"3/#saslclientcallbackhandlerclass","text":"The fully qualified name of a SASL client callback handler class that implements the AuthenticateCallbackHandler interface. Type: class Default: null Valid Values: Importance: medium Update Mode: read-only","title":"sasl.client.callback.handler.class"},{"location":"3/#saslenabledmechanisms","text":"The list of SASL mechanisms enabled in the Kafka server. The list may contain any mechanism for which a security provider is available. Only GSSAPI is enabled by default. Type: list Default: GSSAPI Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.enabled.mechanisms"},{"location":"3/#sasljaasconfig","text":"SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.jaas.config"},{"location":"3/#saslkerberoskinitcmd","text":"Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.kerberos.kinit.cmd"},{"location":"3/#saslkerberosmintimebeforerelogin","text":"\u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.kerberos.min.time.before.relogin"},{"location":"3/#saslkerberosprincipaltolocalrules","text":"\u7528\u4e8e\u4ece\u4e3b\u4f53\u540d\u79f0\u6620\u5c04\u5230\u77ed\u540d\u79f0\uff08\u901a\u5e38\u662f\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u540d\uff09\u7684\u89c4\u5219\u5217\u8868\u3002\u89c4\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u8bc4\u4f30\uff0c\u5e76\u4e14\u4e0e\u4e3b\u4f53\u540d\u79f0\u5339\u914d\u7684\u7b2c\u4e00\u6761\u89c4\u5219\u7528\u4e8e\u5c06\u5176\u6620\u5c04\u5230\u77ed\u540d\u79f0\u3002\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u540e\u7eed\u89c4\u5219\u90fd\u5c06\u88ab\u5ffd\u7565\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8868\u5355\u7684\u4e3b\u4f53\u540d\u79f0 {username}/{hostname}@{REALM} \u6620\u5c04\u5230 {username} . \u6709\u5173\u683c\u5f0f\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5b89\u5168\u6388\u6743\u548c acls \u3002 KafkaPrincipalBuilder \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u914d\u7f6e\u63d0\u4f9b\u4e86 \u7684\u6269\u5c55\uff0c\u5219\u8be5\u914d\u7f6e\u5c06\u88ab\u5ffd\u7565 principal.builder.class \u3002 Type: list Default: DEFAULT Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.kerberos.principal.to.local.rules"},{"location":"3/#saslkerberosservicename","text":"Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.kerberos.service.name"},{"location":"3/#saslkerberosticketrenewjitter","text":"\u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.kerberos.ticket.renew.jitter"},{"location":"3/#saslkerberosticketrenewwindowfactor","text":"\u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.kerberos.ticket.renew.window.factor"},{"location":"3/#sasllogincallbackhandlerclass","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium Update Mode: read-only","title":"sasl.login.callback.handler.class"},{"location":"3/#saslloginclass","text":"\u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 \u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002 \u4f8b\u5982: listener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium Update Mode: read-only","title":"sasl.login.class"},{"location":"3/#saslloginrefreshbufferseconds","text":"\u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002 \u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.login.refresh.buffer.seconds"},{"location":"3/#saslloginrefreshminperiodseconds","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002 \u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.login.refresh.min.period.seconds"},{"location":"3/#saslloginrefreshwindowfactor","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.login.refresh.window.factor"},{"location":"3/#saslloginrefreshwindowjitter","text":"\u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002 \u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b \u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002 \u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.login.refresh.window.jitter"},{"location":"3/#saslmechanisminterbrokerprotocol","text":"SASL \u673a\u5236\u7528\u4e8e\u4ee3\u7406\u95f4\u901a\u4fe1\u3002 \u9ed8\u8ba4\u4e3a GSSAPI\u3002 Type: string Default: GSSAPI Valid Values: Importance: medium Update Mode: per-broker","title":"sasl.mechanism.inter.broker.protocol"},{"location":"3/#sasloauthbearerjwksendpointurl","text":"\u53ef\u4ee5\u4ece\u4e2d\u68c0\u7d22\u63d0\u4f9b\u5546\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u7684 OAuth/OIDC \u63d0\u4f9b\u5546 URL\u3002 URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002 \u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002 \u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002 \u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002 \u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002 \u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002 \u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT \u5e76\u4e14\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"sasl.oauthbearer.jwks.endpoint.url"},{"location":"3/#sasloauthbearertokenendpointurl","text":"OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002 \u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002 \u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"sasl.oauthbearer.token.endpoint.url"},{"location":"3/#saslservercallbackhandlerclass","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002 \u4f8b\u5982: listener.name.sasl_ssl.plain.sasl.server.callback.handler.class=com.example.CustomPlainCallbackHandler. Type: class Default: null Valid Values: Importance: medium Update Mode: read-only","title":"sasl.server.callback.handler.class"},{"location":"3/#saslservermaxreceivesize","text":"\u521d\u59cb SASL \u8eab\u4efd\u9a8c\u8bc1\u4e4b\u524d\u548c\u671f\u95f4\u5141\u8bb8\u7684\u6700\u5927\u63a5\u6536\u5927\u5c0f\u3002\u9ed8\u8ba4\u63a5\u6536\u5927\u5c0f\u4e3a 512KB\u3002GSSAPI \u5c06\u8bf7\u6c42\u9650\u5236\u4e3a 64K\uff0c\u4f46\u5bf9\u4e8e\u81ea\u5b9a\u4e49 SASL \u673a\u5236\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6211\u4eec\u5141\u8bb8\u6700\u591a 512KB\u3002\u5b9e\u9645\u4e0a\uff0cPLAIN\u3001SCRAM \u548c OAUTH \u673a\u5236\u53ef\u4ee5\u4f7f\u7528\u66f4\u5c0f\u7684\u9650\u5236\u3002 Type: int Default: 524288 Valid Values: Importance: medium Update Mode: read-only","title":"sasl.server.max.receive.size"},{"location":"3/#securityinterbrokerprotocol","text":"\u7528\u4e8ebroker\u4e4b\u95f4\u901a\u4fe1\u7684\u5b89\u5168\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002\u540c\u65f6\u8bbe\u7f6e this \u548c inter.broker.listener.name \u5c5e\u6027\u662f\u9519\u8bef\u7684\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium Update Mode: read-only","title":"security.inter.broker.protocol"},{"location":"3/#socketconnectionsetuptimeoutmaxms","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"socket.connection.setup.timeout.max.ms"},{"location":"3/#socketconnectionsetuptimeoutms","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium Update Mode: read-only","title":"socket.connection.setup.timeout.ms"},{"location":"3/#socketlistenbacklogsize","text":"\u5957\u63a5\u5b57\u4e0a\u6302\u8d77\u7684\u8fde\u63a5\u7684\u6700\u5927\u6570\u91cf\u3002 \u5728Linux\u4e2d\uff0c\u60a8\u53ef\u80fd\u8fd8\u9700\u8981\u76f8\u5e94\u914d\u7f6e somaxconn \u548c tcp_max_syn_backlog \u5185\u6838\u53c2\u6570\u624d\u80fd\u4f7f\u914d\u7f6e\u751f\u6548\u3002 Type: int Default: 50 Valid Values: [1,...] Importance: medium Update Mode: read-only","title":"socket.listen.backlog.size"},{"location":"3/#sslciphersuites","text":"\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002 \u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: \"\" Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.cipher.suites"},{"location":"3/#sslclientauth","text":"\u914d\u7f6e kafka \u4ee3\u7406\u6765\u8bf7\u6c42\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 \u4ee5\u4e0b\u8bbe\u7f6e\u662f\u5e38\u89c1\u7684\uff1a ssl.client.auth=required \u5982\u679c\u8bbe\u7f6e\u4e3a\u5fc5\u9700\uff0c\u5219\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 ssl.client.auth=requested \u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u662f\u53ef\u9009\u7684\u3002 \u4e0e\u5fc5\u9700\u7684\u4e0d\u540c\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u9009\u9879\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u9009\u62e9\u4e0d\u63d0\u4f9b\u6709\u5173\u5176\u81ea\u8eab\u7684\u8eab\u4efd\u9a8c\u8bc1\u4fe1\u606f ssl.client.auth=none \u8fd9\u610f\u5473\u7740\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: none Valid Values: [required, requested, none] Importance: medium Update Mode: per-broker","title":"ssl.client.auth"},{"location":"3/#sslenabledprotocols","text":"\u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002 \u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002 \u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002 \u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002 \u53e6\u8bf7\u53c2\u9605 ssl.protocol \u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.enabled.protocols"},{"location":"3/#sslkeypassword","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.key.password"},{"location":"3/#sslkeymanageralgorithm","text":"\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.keymanager.algorithm"},{"location":"3/#sslkeystorecertificatechain","text":"\u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.keystore.certificate.chain"},{"location":"3/#sslkeystorekey","text":"\u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.keystore.key"},{"location":"3/#sslkeystorelocation","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.keystore.location"},{"location":"3/#sslkeystorepassword","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.keystore.password"},{"location":"3/#sslkeystoretype","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.keystore.type"},{"location":"3/#sslprotocol","text":"\u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002 \u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002 \u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002 \u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002 \u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002 \u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002 \u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.protocol"},{"location":"3/#sslprovider","text":"\u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002 \u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.provider"},{"location":"3/#ssltrustmanageralgorithm","text":"\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002 \u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.trustmanager.algorithm"},{"location":"3/#ssltruststorecertificates","text":"\u91c7\u7528 ssl.truststore.type \u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002 \u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.truststore.certificates"},{"location":"3/#ssltruststorelocation","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.truststore.location"},{"location":"3/#ssltruststorepassword","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002 \u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002 PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.truststore.password"},{"location":"3/#ssltruststoretype","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002 \u9ed8\u8ba4 ssl.engine.factory.class \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS, PKCS12, PEM]. Type: string Default: JKS Valid Values: Importance: medium Update Mode: per-broker","title":"ssl.truststore.type"},{"location":"3/#zookeeperclientcnxnsocket","text":"\u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\uff0c\u901a\u5e38\u8bbe\u7f6e\u4e3a org.apache.zookeeper.ClientCnxnSocketNetty \u3002 \u8986\u76d6\u901a\u8fc7\u540c\u540d zookeeper.clientCnxnSocket \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.clientCnxnSocket"},{"location":"3/#zookeepersslclientenable","text":"\u8bbe\u7f6e\u5ba2\u6237\u7aef\u5728\u8fde\u63a5\u5230 ZooKeeper \u65f6\u4f7f\u7528 TLS\u3002\u663e\u5f0f\u503c\u4f1a\u8986\u76d6\u901a\u8fc7 zookeeper.client.secure \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u503c\uff08\u8bf7\u6ce8\u610f\u4e0d\u540c\u7684\u540d\u79f0\uff09\u3002\u5982\u679c\u4e24\u8005\u5747\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u4e3a false\uff1b\u5982\u679c\u4e3a true\uff0c zookeeper.clientCnxnSocket \u5219\u5fc5\u987b\u8bbe\u7f6e\uff08\u901a\u5e38\u8bbe\u7f6e\u4e3a org.apache.zookeeper.ClientCnxnSocketNetty \uff09\uff1b\u8981\u8bbe\u7f6e\u7684\u5176\u4ed6\u503c\u53ef\u80fd\u5305\u62ec zookeeper.ssl.cipher.suites , zookeeper.ssl.crl.enable , zookeeper.ssl.enabled.protocols , zookeeper.ssl.endpoint.identification.algorithm , zookeeper.ssl.keystore.location , zookeeper.ssl.keystore.password , zookeeper.ssl.keystore.type , zookeeper.ssl.ocsp.enable , zookeeper.ssl.protocol , zookeeper.ssl.truststore.location , zookeeper.ssl.truststore.password , zookeeper.ssl.truststore.type Type: boolean Default: false Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.ssl.client.enable"},{"location":"3/#zookeepersslkeystorelocation","text":"\u4f7f\u7528\u901a\u8fc7 TLS \u8fde\u63a5\u5230 ZooKeeper \u7684\u5ba2\u6237\u7aef\u8bc1\u4e66\u65f6\u7684\u5bc6\u94a5\u5e93\u4f4d\u7f6e\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.keyStore.location \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.ssl.keystore.location"},{"location":"3/#zookeepersslkeystorepassword","text":"\u4f7f\u7528\u901a\u8fc7 TLS \u8fde\u63a5\u5230 ZooKeeper \u7684\u5ba2\u6237\u7aef\u8bc1\u4e66\u65f6\u7684\u5bc6\u94a5\u5e93\u5bc6\u7801\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.keyStore.password \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u8bf7\u6ce8\u610f\uff0cZooKeeper \u4e0d\u652f\u6301\u4e0e keystore \u5bc6\u7801\u4e0d\u540c\u7684\u5bc6\u94a5\u5bc6\u7801\uff0c\u56e0\u6b64\u8bf7\u52a1\u5fc5\u5c06 keystore \u4e2d\u7684\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e keystore \u5bc6\u7801\u76f8\u540c\uff1b\u5426\u5219\u4e0e Zookeeper \u7684\u8fde\u63a5\u5c1d\u8bd5\u5c06\u5931\u8d25\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.ssl.keystore.password"},{"location":"3/#zookeepersslkeystoretype","text":"\u4f7f\u7528\u901a\u8fc7 TLS \u8fde\u63a5\u5230 ZooKeeper \u7684\u5ba2\u6237\u7aef\u8bc1\u4e66\u65f6\u7684\u5bc6\u94a5\u5e93\u7c7b\u578b\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.keyStore.type \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u5c06\u6839\u636e\u5bc6\u94a5\u5e93\u7684\u6587\u4ef6\u6269\u5c55\u540d\u81ea\u52a8\u68c0\u6d4b\u7c7b\u578b\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.ssl.keystore.type"},{"location":"3/#zookeeperssltruststorelocation","text":"\u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\u7684\u4fe1\u4efb\u5e93\u4f4d\u7f6e\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.trustStore.location \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.ssl.truststore.location"},{"location":"3/#zookeeperssltruststorepassword","text":"\u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\u7684\u4fe1\u4efb\u5e93\u5bc6\u7801\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.trustStore.password \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002 Type: password Default: null Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.ssl.truststore.password"},{"location":"3/#zookeeperssltruststoretype","text":"\u4f7f\u7528 TLS \u8fde\u63a5\u5230 ZooKeeper \u65f6\u7684\u4fe1\u4efb\u5e93\u7c7b\u578b\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.trustStore.type \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u5c06\u6839\u636e\u4fe1\u4efb\u5e93\u7684\u6587\u4ef6\u6269\u5c55\u540d\u81ea\u52a8\u68c0\u6d4b\u7c7b\u578b\u3002 Type: string Default: null Valid Values: Importance: medium Update Mode: read-only","title":"zookeeper.ssl.truststore.type"},{"location":"3/#alterconfigpolicyclassname","text":"\u5e94\u7528\u4e8e\u9a8c\u8bc1\u7684\u66f4\u6539\u914d\u7f6e\u7b56\u7565\u7c7b\u3002\u8be5\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.server.policy.AlterConfigPolicy \u63a5\u53e3\u3002 Type: class Default: null Valid Values: Importance: low Update Mode: read-only","title":"alter.config.policy.class.name"},{"location":"3/#alterlogdirsreplicationquotawindownum","text":"\u4e3a\u66f4\u6539log.dirs\u590d\u5236\u914d\u989d\u800c\u4fdd\u7559\u5728\u5185\u5b58\u4e2d\u7684\u6837\u672c\u6570 Type: int Default: 11 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"alter.log.dirs.replication.quota.window.num"},{"location":"3/#alterlogdirsreplicationquotawindowsizeseconds","text":"alter log dirs \u590d\u5236\u914d\u989d\u7684\u6bcf\u4e2a\u6837\u672c\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"alter.log.dirs.replication.quota.window.size.seconds"},{"location":"3/#authorizerclassname","text":"\u5b9e\u73b0\u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0 org.apache.kafka.server.authorizer.Authorizer \uff0c\u4ee3\u7406\u4f7f\u7528\u5b83\u6765\u8fdb\u884c\u6388\u6743\u3002 Type: string Default: \"\" Valid Values: non-null string Importance: low Update Mode: read-only","title":"authorizer.class.name"},{"location":"3/#autojmxreporter","text":"\u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low Update Mode: read-only","title":"auto.jmx.reporter"},{"location":"3/#clientquotacallbackclass","text":"\u5b9e\u73b0 ClientQuotaCallback \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\uff0c\u7528\u4e8e\u786e\u5b9a\u5e94\u7528\u4e8e\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u914d\u989d\u9650\u5236\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u7684 \u548c \u914d\u989d\u3002\u5bf9\u4e8e\u4efb\u4f55\u7ed9\u5b9a\u7684\u8bf7\u6c42\uff0c\u5c06\u5e94\u7528\u4e0e\u4f1a\u8bdd\u7684\u7528\u6237\u4e3b\u4f53\u548c\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef ID \u5339\u914d\u7684\u6700\u5177\u4f53\u7684\u914d\u989d\u3002 Type: class Default: null Valid Values: Importance: low Update Mode: read-only","title":"client.quota.callback.class"},{"location":"3/#connectionfailedauthenticationdelayms","text":"\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u65f6\u7684\u8fde\u63a5\u5173\u95ed\u5ef6\u8fdf\uff1a\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u65f6\u8fde\u63a5\u5173\u95ed\u5c06\u5ef6\u8fdf\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5fc5\u987b\u5c06\u5176\u914d\u7f6e\u4e3a\u5c0f\u4e8econnections.max.idle.ms\uff0c\u4ee5\u9632\u6b62\u8fde\u63a5\u8d85\u65f6\u3002 Type: int Default: 100 Valid Values: [0,...] Importance: low Update Mode: read-only","title":"connection.failed.authentication.delay.ms"},{"location":"3/#controllerquorumretrybackoffms","text":"\u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: int Default: 20 Valid Values: Importance: low Update Mode: read-only","title":"controller.quorum.retry.backoff.ms"},{"location":"3/#controllerquotawindownum","text":"\u63a7\u5236\u5668\u7a81\u53d8\u914d\u989d\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u7684\u6837\u672c\u6570\u91cf Type: int Default: 11 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"controller.quota.window.num"},{"location":"3/#controllerquotawindowsizeseconds","text":"\u63a7\u5236\u5668\u7a81\u53d8\u914d\u989d\u7684\u6bcf\u4e2a\u6837\u672c\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"controller.quota.window.size.seconds"},{"location":"3/#createtopicpolicyclassname","text":"\u521b\u5efa\u5e94\u7528\u4e8e\u9a8c\u8bc1\u7684\u4e3b\u9898\u7b56\u7565\u7c7b\u3002\u8be5\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.server.policy.CreateTopicPolicy \u63a5\u53e3\u3002 Type: class Default: null Valid Values: Importance: low Update Mode: read-only","title":"create.topic.policy.class.name"},{"location":"3/#delegatetokenexpirycheckintervalms","text":"\u626b\u63cf\u95f4\u9694\u4ee5\u5220\u9664\u8fc7\u671f\u7684\u59d4\u6258\u4ee4\u724c\u3002 Type: long Default: 3600000 (1 hour) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"delegate.token.expiry.check.interval.ms"},{"location":"3/#kafkametricspollingintervalsecs","text":"\u53ef\u5728 kafka.metrics.reporters \u5b9e\u73b0\u4e2d\u4f7f\u7528\u7684\u6307\u6807\u8f6e\u8be2\u95f4\u9694\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 Type: int Default: 10 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"kafka.metrics.polling.interval.secs"},{"location":"3/#kafkametricsreporters","text":"\u7528\u4f5c Yammer \u6307\u6807\u81ea\u5b9a\u4e49\u62a5\u544a\u5668\u7684\u7c7b\u5217\u8868\u3002\u8bb0\u8005\u8981\u8df5\u884c kafka.metrics.KafkaMetricsReporter \u7279\u8272\u3002\u5982\u679c\u5ba2\u6237\u7aef\u60f3\u8981\u5728\u81ea\u5b9a\u4e49\u62a5\u544a\u5668\u4e0a\u516c\u5f00 JMX \u64cd\u4f5c\uff0c\u5219\u81ea\u5b9a\u4e49\u62a5\u544a\u5668\u9700\u8981\u53e6\u5916\u5b9e\u73b0\u6269\u5c55\u7279\u5f81\u7684 MBean \u7279\u5f81\uff0c kafka.metrics.KafkaMetricsReporterMBean \u4ee5\u4fbf\u6ce8\u518c\u7684 MBean \u7b26\u5408\u6807\u51c6 MBean \u7ea6\u5b9a\u3002 Type: list Default: \"\" Valid Values: Importance: low Update Mode: read-only","title":"kafka.metrics.reporters"},{"location":"3/#listenersecurityprotocolmap","text":"\u4fa6\u542c\u5668\u540d\u79f0\u548c\u5b89\u5168\u534f\u8bae\u4e4b\u95f4\u7684\u6620\u5c04\u3002\u5fc5\u987b\u5b9a\u4e49\u8fd9\u4e00\u70b9\uff0c\u4ee5\u4fbf\u540c\u4e00\u5b89\u5168\u534f\u8bae\u53ef\u5728\u591a\u4e2a\u7aef\u53e3\u6216 IP \u4e2d\u4f7f\u7528\u3002\u4f8b\u5982\uff0c\u5373\u4f7f\u5185\u90e8\u548c\u5916\u90e8\u6d41\u91cf\u90fd\u9700\u8981 SSL\uff0c\u4e5f\u53ef\u4ee5\u5c06\u4e24\u8005\u5206\u5f00\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u7528\u6237\u53ef\u4ee5\u5b9a\u4e49\u540d\u79f0\u4e3a INTERNAL \u548c EXTERNAL \u7684\u4fa6\u542c\u5668\uff0c\u5e76\u5c06\u6b64\u5c5e\u6027\u5b9a\u4e49\u4e3a\uff1a\u201cINTERNAL:SSL,EXTERNAL:SSL\u201d\u3002\u5982\u56fe\u6240\u793a\uff0c\u952e\u548c\u503c\u7531\u5192\u53f7\u5206\u9694\uff0c\u6620\u5c04\u6761\u76ee\u7531\u9017\u53f7\u5206\u9694\u3002\u6bcf\u4e2a\u4fa6\u542c\u5668\u540d\u79f0\u53ea\u80fd\u5728\u5730\u56fe\u4e2d\u51fa\u73b0\u4e00\u6b21\u3002\u901a\u8fc7\u5411\u914d\u7f6e\u540d\u79f0\u6dfb\u52a0\u89c4\u8303\u5316\u524d\u7f00\uff08\u4fa6\u542c\u5668\u540d\u79f0\u5c0f\u5199\uff09\uff0c\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u4fa6\u542c\u5668\u914d\u7f6e\u4e0d\u540c\u7684\u5b89\u5168\u6027\uff08SSL \u548c SASL\uff09\u8bbe\u7f6e\u3002\u4f8b\u5982\uff0c\u8981\u4e3a INTERNAL \u4fa6\u542c\u5668\u8bbe\u7f6e\u4e0d\u540c\u7684\u5bc6\u94a5\u5e93\uff0c\u8bf7\u4f7f\u7528\u540d\u79f0\u4e3a listener.name.internal.ssl.keystore.location \u5c06\u88ab\u8bbe\u7f6e\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u4fa6\u542c\u5668\u540d\u79f0\u7684\u914d\u7f6e\uff0c\u8be5\u914d\u7f6e\u5c06\u56de\u9000\u5230\u901a\u7528\u914d\u7f6e\uff08\u5373 ssl.keystore.location \uff09\u3002 controller.listener.names \u8bf7\u6ce8\u610f\uff0c\u5728 KRaft \u4e2d\uff0c\u5982\u679c\u672a\u63d0\u4f9b\u663e\u5f0f\u6620\u5c04\u4e14\u672a\u4f7f\u7528\u5176\u4ed6\u5b89\u5168\u534f\u8bae\uff0c\u5219\u5047\u5b9a\u4ece \u5b9a\u4e49\u7684\u4fa6\u542c\u5668\u540d\u79f0\u5230 PLAINTEXT \u7684\u9ed8\u8ba4\u6620\u5c04\u3002 Type: string Default: PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL Valid Values: Importance: low Update Mode: per-broker","title":"listener.security.protocol.map"},{"location":"3/#logmessagedownconversionenable","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u662f\u5426\u542f\u7528\u6d88\u606f\u683c\u5f0f\u4e0b\u8f6c\u6362\u4ee5\u6ee1\u8db3\u6d88\u8d39\u8bf7\u6c42\u3002\u5f53\u8bbe\u7f6e\u4e3a \u65f6 false \uff0c\u4ee3\u7406\u5c06\u4e0d\u4f1a\u4e3a\u671f\u671b\u65e7\u6d88\u606f\u683c\u5f0f\u7684\u6d88\u8d39\u8005\u6267\u884c\u5411\u4e0b\u8f6c\u6362\u3002 UNSUPPORTED_VERSION \u5bf9\u4e8e\u6765\u81ea\u6b64\u7c7b\u8f83\u65e7\u5ba2\u6237\u7aef\u7684\u6d88\u8d39\u8bf7\u6c42\uff0c\u4ee3\u7406\u4f1a\u8fd4\u56de\u9519\u8bef\u54cd\u5e94\u3002\u6b64\u914d\u7f6e\u4e0d\u9002\u7528\u4e8e\u590d\u5236\u5230\u5173\u6ce8\u8005\u53ef\u80fd\u9700\u8981\u7684\u4efb\u4f55\u6d88\u606f\u683c\u5f0f\u8f6c\u6362\u3002 Type: boolean Default: true Valid Values: Importance: low Update Mode: cluster-wide","title":"log.message.downconversion.enable"},{"location":"3/#metadatamaxidleintervalms","text":"\u6b64\u914d\u7f6e\u63a7\u5236\u6d3b\u52a8\u63a7\u5236\u5668\u5e94\u5c06\u65e0\u64cd\u4f5c\u8bb0\u5f55\u5199\u5165\u5143\u6570\u636e\u5206\u533a\u7684\u9891\u7387\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u65e0\u64cd\u4f5c\u8bb0\u5f55\u4e0d\u4f1a\u9644\u52a0\u5230\u5143\u6570\u636e\u5206\u533a\u3002\u9ed8\u8ba4\u503c\u4e3a 500 Type: int Default: 500 Valid Values: [0,...] Importance: low Update Mode: read-only","title":"metadata.max.idle.interval.ms"},{"location":"3/#metricreporters","text":"\u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low Update Mode: cluster-wide","title":"metric.reporters"},{"location":"3/#metricsnumsamples","text":"\u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"metrics.num.samples"},{"location":"3/#metricsrecordinglevel","text":"\u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: Importance: low Update Mode: read-only","title":"metrics.recording.level"},{"location":"3/#metricssamplewindowms","text":"\u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"metrics.sample.window.ms"},{"location":"3/#passwordencoderpasswordalgorithm","text":"\u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u5bc6\u7801\u7b97\u6cd5\u3002 Type: string Default: AES/CBC/PKCS5\u586b\u5145 Valid Values: Importance: low Update Mode: read-only","title":"password.encoder.password.algorithm"},{"location":"3/#passwordencoderiterations","text":"\u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u8fed\u4ee3\u8ba1\u6570\u3002 Type: int Default: 4096 Valid Values: [1024\uff0c...] Importance: low Update Mode: read-only","title":"password.encoder.iterations"},{"location":"3/#passwordencoderkeylength","text":"\u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u7684\u5bc6\u94a5\u957f\u5ea6\u3002 Type: int Default: 128 Valid Values: [8\uff0c...] Importance: low Update Mode: read-only","title":"password.encoder.key.length"},{"location":"3/#passwordencoderkeyfactoryalgorithm","text":"SecretKeyFactory \u7b97\u6cd5\u7528\u4e8e\u5bf9\u52a8\u6001\u914d\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u3002\u5982\u679c\u53ef\u7528\uff0c\u9ed8\u8ba4\u503c\u4e3a PBKDF2WithHmacSHA512\uff0c\u5426\u5219\u9ed8\u8ba4\u503c\u4e3a PBKDF2WithHmacSHA1\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: read-only","title":"password.encoder.keyfactory.algorithm"},{"location":"3/#produceridexpirationms","text":"\u4e3b\u9898\u5206\u533a\u9886\u5bfc\u8005\u5728\u751f\u4ea7\u8005 ID \u8fc7\u671f\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5f53\u4e0e\u5176\u5173\u8054\u7684\u4ea4\u6613\u4ecd\u5728\u8fdb\u884c\u65f6\uff0c\u751f\u4ea7\u8005 ID \u4e0d\u4f1a\u8fc7\u671f\u3002 \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u7531\u4e8e\u4e3b\u9898\u7684\u4fdd\u7559\u8bbe\u7f6e\u800c\u5220\u9664\u4e86\u751f\u4ea7\u8005 ID \u7684\u6700\u540e\u4e00\u6b21\u5199\u5165\uff0c\u5219\u751f\u4ea7\u8005 ID \u53ef\u80fd\u4f1a\u66f4\u5feb\u8fc7\u671f\u3002 \u5c06\u6b64\u503c\u8bbe\u7f6e\u4e3a\u4e0e delivery.timeout.ms \u76f8\u540c\u6216\u66f4\u9ad8\u53ef\u4ee5\u5e2e\u52a9\u9632\u6b62\u91cd\u8bd5\u671f\u95f4\u8fc7\u671f\u5e76\u9632\u6b62\u6d88\u606f\u91cd\u590d\uff0c\u4f46\u9ed8\u8ba4\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u662f\u5408\u7406\u7684\u3002 Type: int Default: 86400000 (1 day) Valid Values: [1,...] Importance: low Update Mode: cluster-wide","title":"producer.id.expiration.ms"},{"location":"3/#quotawindownum","text":"\u4e3a\u5ba2\u6237\u7aef\u914d\u989d\u4fdd\u7559\u5728\u5185\u5b58\u4e2d\u7684\u6837\u672c\u6570\u91cf Type: int Default: 11 Valid Values: [1,...] Importance: low Update Mode: read-only","title":"quota.window.num"},{"location":"3/#quotawindowsizeseconds","text":"\u5ba2\u6237\u914d\u989d\u6bcf\u4e2a\u6837\u672c\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1,...] Importance: low Update Mode: read-only","title":"quota.window.size.seconds"},{"location":"3/#replicationquotawindownum","text":"\u4e3a\u4e86\u590d\u5236\u914d\u989d\u800c\u4fdd\u7559\u5728\u5185\u5b58\u4e2d\u7684\u6837\u672c\u6570\u91cf Type: int Default: 11 Valid Values: [1,...] Importance: low Update Mode: read-only","title":"replication.quota.window.num"},{"location":"3/#replicationquotawindowsizeseconds","text":"\u6bcf\u4e2a\u6837\u672c\u590d\u5236\u914d\u989d\u7684\u65f6\u95f4\u8de8\u5ea6 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"replication.quota.window.size.seconds"},{"location":"3/#saslloginconnecttimeoutms","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low Update Mode: read-only","title":"sasl.login.connect.timeout.ms"},{"location":"3/#saslloginreadtimeoutms","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low Update Mode: read-only","title":"sasl.login.read.timeout.ms"},{"location":"3/#saslloginretrybackoffmaxms","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low Update Mode: read-only","title":"sasl.login.retry.backoff.max.ms"},{"location":"3/#saslloginretrybackoffms","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low Update Mode: read-only","title":"sasl.login.retry.backoff.ms"},{"location":"3/#sasloauthbearerclockskewseconds","text":"\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.clock.skew.seconds"},{"location":"3/#sasloauthbearerexpectedaudience","text":"\u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.expected.audience"},{"location":"3/#sasloauthbearerexpectedissuer","text":"\u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.expected.issuer"},{"location":"3/#sasloauthbearerjwksendpointrefreshms","text":"\u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.jwks.endpoint.refresh.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffmaxms","text":"\u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffms","text":"\u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.ms"},{"location":"3/#sasloauthbearerscopeclaimname","text":"\u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.scope.claim.name"},{"location":"3/#sasloauthbearersubclaimname","text":"\u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low Update Mode: read-only","title":"sasl.oauthbearer.sub.claim.name"},{"location":"3/#securityproviders","text":"\u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: read-only","title":"security.providers"},{"location":"3/#sslendpointidentificationalgorithm","text":"\u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low Update Mode: per-broker","title":"ssl.endpoint.identification.algorithm"},{"location":"3/#sslenginefactoryclass","text":"org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low Update Mode: per-broker","title":"ssl.engine.factory.class"},{"location":"3/#sslprincipalmappingrules","text":"\u7528\u4e8e\u4ece\u5ba2\u6237\u7aef\u8bc1\u4e66\u7684\u4e13\u6709\u540d\u79f0\u6620\u5c04\u5230\u77ed\u540d\u79f0\u7684\u89c4\u5219\u5217\u8868\u3002\u89c4\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u8bc4\u4f30\uff0c\u5e76\u4e14\u4e0e\u4e3b\u4f53\u540d\u79f0\u5339\u914d\u7684\u7b2c\u4e00\u6761\u89c4\u5219\u7528\u4e8e\u5c06\u5176\u6620\u5c04\u5230\u77ed\u540d\u79f0\u3002\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u540e\u7eed\u89c4\u5219\u90fd\u5c06\u88ab\u5ffd\u7565\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cX.500 \u8bc1\u4e66\u7684\u4e13\u6709\u540d\u79f0\u5c06\u662f\u4e3b\u4f53\u3002\u6709\u5173\u683c\u5f0f\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5b89\u5168\u6388\u6743\u548c acls \u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u914d\u7f6e\u63d0\u4f9b\u4e86 KafkaPrincipalBuilder \u7684\u6269\u5c55\uff0c\u5219\u6b64\u914d\u7f6e\u5c06\u88ab\u5ffd\u7565 principal.builder.class \u3002 Type: string Default: DEFAULT Valid Values: Importance: low Update Mode: read-only","title":"ssl.principal.mapping.rules"},{"location":"3/#sslsecurerandomimplementation","text":"\u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low Update Mode: per-broker","title":"ssl.secure.random.implementation"},{"location":"3/#transactionaborttimedouttransactioncleanupintervalms","text":"\u56de\u6eda\u8d85\u65f6\u4e8b\u52a1\u7684\u65f6\u95f4\u95f4\u9694 Type: int Default: 10000 (10 seconds) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"transaction.abort.timed.out.transaction.cleanup.interval.ms"},{"location":"3/#transactionremoveexpiredtransactioncleanupintervalms","text":"\u5220\u9664\u56e0\u8fc7\u671f\u800c\u8fc7\u671f\u7684\u4ea4\u6613\u7684\u65f6\u95f4 transactional.id.expiration.ms \u95f4\u9694 Type: int Default: 3600000 (1 hour) Valid Values: [1\uff0c...] Importance: low Update Mode: read-only","title":"transaction.remove.expired.transaction.cleanup.interval.ms"},{"location":"3/#zookeepersslciphersuites","text":"\u6307\u5b9a\u8981\u5728 ZooKeeper TLS \u534f\u5546 (csv) \u4e2d\u4f7f\u7528\u7684\u5df2\u542f\u7528\u5bc6\u7801\u5957\u4ef6\u3002\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c zookeeper.ssl.ciphersuites \uff08\u8bf7\u6ce8\u610f\u5355\u4e2a\u8bcd\u201c\u5bc6\u7801\u5957\u4ef6\u201d\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u542f\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u7531\u6b63\u5728\u4f7f\u7528\u7684 Java \u8fd0\u884c\u65f6\u786e\u5b9a\u3002 Type: list Default: null Valid Values: Importance: low Update Mode: read-only","title":"zookeeper.ssl.cipher.suites"},{"location":"3/#zookeepersslcrlenable","text":"\u6307\u5b9a\u662f\u5426\u5728 ZooKeeper TLS \u534f\u8bae\u4e2d\u542f\u7528\u8bc1\u4e66\u540a\u9500\u5217\u8868\u3002\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c zookeeper.ssl.crl \uff08\u6ce8\u610f\u8f83\u77ed\u7684\u540d\u79f0\uff09\u3002 Type: boolean Default: false Valid Values: Importance: low Update Mode: read-only","title":"zookeeper.ssl.crl.enable"},{"location":"3/#zookeepersslenabledprotocol","text":"\u6307\u5b9a ZooKeeper TLS \u534f\u5546 (csv) \u4e2d\u542f\u7528\u7684\u534f\u8bae\u3002\u8986\u76d6\u901a\u8fc7 zookeeper.ssl.enabledProtocols \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c\uff08\u6ce8\u610f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09\u3002\u9ed8\u8ba4\u503c null \u8868\u793a\u542f\u7528\u7684\u534f\u8bae\u5c06\u662f\u914d\u7f6e\u5c5e\u6027\u7684\u503c zookeeper.ssl.protocol \u3002 Type: list Default: null Valid Values: Importance: low Update Mode: read-only","title":"zookeeper.ssl.enabled.protocol"},{"location":"3/#zookeepersslendpointidentificationalgorithm","text":"\u6307\u5b9a\u662f\u5426\u5728 ZooKeeper TLS \u534f\u5546\u8fc7\u7a0b\u4e2d\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u201chttps\u201d\u8868\u793a\u542f\u7528 ZooKeeper \u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u663e\u5f0f\u7a7a\u767d\u503c\u8868\u793a\u7981\u7528\u5b83\uff08\u4ec5\u5efa\u8bae\u51fa\u4e8e\u6d4b\u8bd5\u76ee\u7684\u7981\u7528\u5b83\uff09\u3002\u663e\u5f0f\u503c\u4f1a\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u201ctrue\u201d\u6216\u201cfalse\u201d\u503c zookeeper.ssl.hostnameVerification \uff08\u8bf7\u6ce8\u610f\u4e0d\u540c\u7684\u540d\u79f0\u548c\u503c\uff1btrue \u8868\u793a https\uff0cfalse \u8868\u793a\u7a7a\u767d\uff09\u3002 Type: string Default: HTTPS Valid Values: Importance: low Update Mode: read-only","title":"zookeeper.ssl.endpoint.identification.algorithm"},{"location":"3/#zookeepersslocspenable","text":"\u6307\u5b9a\u662f\u5426\u5728 ZooKeeper TLS \u534f\u8bae\u4e2d\u542f\u7528\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u534f\u8bae\u3002\u8986\u76d6\u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u663e\u5f0f\u503c zookeeper.ssl.ocsp \uff08\u6ce8\u610f\u8f83\u77ed\u7684\u540d\u79f0\uff09\u3002 Type: boolean Default: false Valid Values: Importance: low Update Mode: read-only","title":"zookeeper.ssl.ocsp.enable"},{"location":"3/#zookeepersslprotocol","text":"\u6307\u5b9a ZooKeeper TLS \u534f\u5546\u4e2d\u4f7f\u7528\u7684\u534f\u8bae\u3002\u663e\u5f0f\u503c\u4f1a\u8986\u76d6\u901a\u8fc7\u540c\u540d zookeeper.ssl.protocol \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u7684\u4efb\u4f55\u503c\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: low Update Mode: read-only \u6709\u5173\u4ee3\u7406\u914d\u7f6e\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728 scala \u7c7b\u4e2d\u627e\u5230 kafka.server.KafkaConfig \u3002","title":"zookeeper.ssl.protocol"},{"location":"3/#311","text":"\u4ece Kafka 1.1 \u7248\u5f00\u59cb\uff0c\u4e00\u4e9b\u4ee3\u7406\u914d\u7f6e\u53ef\u4ee5\u5728\u4e0d\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\u66f4\u65b0\u3002\u6bcf\u4e2a Broker \u914d\u7f6e\u7684\u66f4\u65b0\u6a21\u5f0f \u8bf7\u53c2\u89c1 Broker Configs Dynamic Update Mode \u680f\u76ee\u3002 read-only \uff1a\u9700\u8981\u91cd\u542f\u4ee3\u7406\u624d\u80fd\u66f4\u65b0 per-broker \uff1a\u53ef\u80fd\u4f1a\u9488\u5bf9\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u52a8\u6001\u66f4\u65b0 cluster-wide \uff1a\u53ef\u4ee5\u4f5c\u4e3a\u96c6\u7fa4\u8303\u56f4\u5185\u7684\u9ed8\u8ba4\u503c\u52a8\u6001\u66f4\u65b0\u3002\u4e5f\u53ef\u4ee5\u66f4\u65b0\u4e3a\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u7684\u6d4b\u8bd5\u503c\u3002 \u8981\u66f4\u6539\u4ee3\u7406 ID 0 \u7684\u5f53\u524d\u4ee3\u7406\u914d\u7f6e\uff08\u4f8b\u5982\uff0c\u65e5\u5fd7\u6e05\u7406\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --alter --add-config log.cleaner.threads=2 \u63cf\u8ff0\u4ee3\u7406 ID 0 \u7684\u5f53\u524d\u52a8\u6001\u4ee3\u7406\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --describe \u8981\u5220\u9664\u914d\u7f6e\u8986\u76d6\u5e76\u6062\u590d\u4e3a\u4ee3\u7406 ID 0 \u7684\u9759\u6001\u914d\u7f6e\u6216\u9ed8\u8ba4\u503c\uff08\u4f8b\u5982\uff0c\u65e5\u5fd7\u6e05\u7406\u5668\u7ebf\u7a0b\u6570\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --alter --delete-config log.cleaner.threads \u67d0\u4e9b\u914d\u7f6e\u53ef\u4ee5\u914d\u7f6e\u4e3a\u96c6\u7fa4\u8303\u56f4\u5185\u7684\u9ed8\u8ba4\u503c\uff0c\u4ee5\u5728\u6574\u4e2a\u96c6\u7fa4\u4e2d\u4fdd\u6301\u4e00\u81f4\u7684\u503c\u3002\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u90fd\u4f1a\u5904\u7406\u96c6\u7fa4\u9ed8\u8ba4\u66f4\u65b0\u3002\u4f8b\u5982\uff0c\u8981\u66f4\u65b0\u6240\u6709\u4ee3\u7406\u4e0a\u7684\u65e5\u5fd7\u6e05\u7406\u7ebf\u7a0b\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-default --alter --add-config log.cleaner.threads=2 \u63cf\u8ff0\u5f53\u524d\u914d\u7f6e\u7684\u52a8\u6001\u96c6\u7fa4\u8303\u56f4\u9ed8\u8ba4\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-default --describe \u6240\u6709\u53ef\u5728\u96c6\u7fa4\u7ea7\u522b\u914d\u7f6e\u7684\u914d\u7f6e\u4e5f\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u914d\u7f6e\uff08\u4f8b\u5982\u7528\u4e8e\u6d4b\u8bd5\uff09\u3002\u5982\u679c\u5728\u4e0d\u540c\u7ea7\u522b\u5b9a\u4e49\u914d\u7f6e\u503c\uff0c\u5219\u4f7f\u7528\u4ee5\u4e0b\u4f18\u5148\u987a\u5e8f\uff1a \u5b58\u50a8\u5728 ZooKeeper \u4e2d\u7684\u52a8\u6001\u6bcf\u4e2a\u4ee3\u7406\u914d\u7f6e \u5b58\u50a8\u5728 ZooKeeper \u4e2d\u7684\u52a8\u6001\u96c6\u7fa4\u8303\u56f4\u9ed8\u8ba4\u914d\u7f6e \u9759\u6001\u4ee3\u7406\u914d\u7f6e\u6765\u81ea server.properties Kafka \u9ed8\u8ba4\uff0c\u8bf7\u53c2\u9605 \u4ee3\u7406\u914d\u7f6e","title":"3.1.1 \u66f4\u65b0\u4ee3\u7406\u914d\u7f6e"},{"location":"3/#_1","text":"\u52a8\u6001\u66f4\u65b0\u7684\u5bc6\u7801\u914d\u7f6e\u503c\u5728\u5b58\u50a8\u5230 ZooKeeper \u4e4b\u524d\u4f1a\u88ab\u52a0\u5bc6\u3002 password.encoder.secret \u5fc5\u987b\u914d\u7f6e\u4ee3\u7406\u914d\u7f6e server.properties \u624d\u80fd\u542f\u7528\u5bc6\u7801\u914d\u7f6e\u7684\u52a8\u6001\u66f4\u65b0\u3002\u4e0d\u540c\u7ecf\u7eaa\u5546\u7684\u79d8\u5bc6\u53ef\u80fd\u4e0d\u540c\u3002 \u7528\u4e8e\u5bc6\u7801\u7f16\u7801\u7684\u79d8\u5bc6\u53ef\u4ee5\u968f\u7740\u4ee3\u7406\u7684\u6eda\u52a8\u91cd\u542f\u800c\u8f6e\u6362\u3002\u5f53\u524d\u5728 ZooKeeper \u4e2d\u7528\u4e8e\u7f16\u7801\u5bc6\u7801\u7684\u65e7\u5bc6\u94a5\u5fc5\u987b\u5728\u9759\u6001\u4ee3\u7406\u914d\u7f6e\u4e2d\u63d0\u4f9b password.encoder.old.secret \uff0c\u65b0\u5bc6\u94a5\u5fc5\u987b\u5728 password.encoder.secret . \u5f53\u4ee3\u7406\u542f\u52a8\u65f6\uff0cZooKeeper \u4e2d\u5b58\u50a8\u7684\u6240\u6709\u52a8\u6001\u5bc6\u7801\u914d\u7f6e\u90fd\u5c06\u4f7f\u7528\u65b0\u5bc6\u94a5\u91cd\u65b0\u7f16\u7801\u3002 kafka-configs.sh \u5728 Kafka 1.1.x \u4e2d\uff0c\u5373\u4f7f\u5bc6\u7801\u914d\u7f6e\u672a\u66f4\u6539\uff0c\u5728\u66f4\u65b0\u914d\u7f6e\u65f6\u4e5f\u5fc5\u987b\u5728\u6bcf\u4e2a\u66f4\u6539\u8bf7\u6c42\u4e2d\u63d0\u4f9b\u6240\u6709\u52a8\u6001\u66f4\u65b0\u7684\u5bc6\u7801\u914d\u7f6e\u3002\u6b64\u9650\u5236\u5c06\u5728\u672a\u6765\u7248\u672c\u4e2d\u5220\u9664\u3002","title":"\u52a8\u6001\u66f4\u65b0\u5bc6\u7801\u914d\u7f6e"},{"location":"3/#broker-zookeeper","text":"\u4ece Kafka 2.0.0 \u5f00\u59cb\uff0c kafka-configs.sh \u5728\u542f\u52a8\u4ee3\u7406\u8fdb\u884c\u5f15\u5bfc\u4e4b\u524d\uff0c\u53ef\u4ee5\u4f7f\u7528 ZooKeeper \u66f4\u65b0\u52a8\u6001\u4ee3\u7406\u914d\u7f6e\u3002\u8fd9\u4f7f\u5f97\u6240\u6709\u5bc6\u7801\u914d\u7f6e\u90fd\u80fd\u591f\u4ee5\u52a0\u5bc6\u5f62\u5f0f\u5b58\u50a8\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5728 server.properties . password.encoder.secret \u5982\u679c alter \u547d\u4ee4\u4e2d\u5305\u542b\u4efb\u4f55\u5bc6\u7801\u914d\u7f6e\uff0c\u5219\u8fd8\u5fc5\u987b\u6307\u5b9a\u4ee3\u7406\u914d\u7f6e\u3002\u8fd8\u53ef\u4ee5\u6307\u5b9a\u9644\u52a0\u7684\u52a0\u5bc6\u53c2\u6570\u3002\u5bc6\u7801\u7f16\u7801\u5668\u914d\u7f6e\u4e0d\u4f1a\u4fdd\u7559\u5728 ZooKeeper \u4e2d\u3002\u4f8b\u5982\uff0c\u8981\u5b58\u50a8 INTERNAL \u4ee3\u7406 0 \u4e0a\u4fa6\u542c\u5668\u7684 SSL \u5bc6\u94a5\u5bc6\u7801\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --entity-type brokers --entity-name 0 --alter --add-config 'listener.name.internal.ssl.key.password=key-password,password.encoder.secret=secret,password.encoder.iterations=8192' \u914d\u7f6e listener.name.internal.ssl.key.password \u5c06\u4f7f\u7528\u63d0\u4f9b\u7684\u7f16\u7801\u5668\u914d\u7f6e\u4ee5\u52a0\u5bc6\u5f62\u5f0f\u4fdd\u5b58\u5728 ZooKeeper \u4e2d\u3002\u7f16\u7801\u5668\u79d8\u5bc6\u548c\u8fed\u4ee3\u4e0d\u4f1a\u4fdd\u7559\u5728 ZooKeeper \u4e2d\u3002","title":"\u5728\u542f\u52a8 Broker \u4e4b\u524d\u66f4\u65b0 ZooKeeper \u4e2d\u7684\u5bc6\u7801\u914d\u7f6e"},{"location":"3/#ssl","text":"\u4ee3\u7406\u53ef\u4ee5\u914d\u7f6e\u6709\u6548\u671f\u8f83\u77ed\u7684 SSL \u5bc6\u94a5\u5e93\uff0c\u4ee5\u964d\u4f4e\u8bc1\u4e66\u53d7\u635f\u7684\u98ce\u9669\u3002\u5bc6\u94a5\u5e93\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0\uff0c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u914d\u7f6e\u540d\u79f0\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u4f5c\u4e3a\u524d\u7f00 listener.name.{listenerName}. \uff0c\u4ee5\u4fbf\u4ec5\u66f4\u65b0\u7279\u5b9a\u4fa6\u542c\u5668\u7684\u5bc6\u94a5\u5e93\u914d\u7f6e\u3002\u4ee5\u4e0b\u914d\u7f6e\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u7684\u5355\u4e2a\u66f4\u6539\u8bf7\u6c42\u4e2d\u66f4\u65b0\uff1a ssl.keystore.type ssl.keystore.location ssl.keystore.password ssl.key.password \u5982\u679c\u4fa6\u542c\u5668\u662f\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\uff0c\u5219\u4ec5\u5f53\u65b0\u5bc6\u94a5\u5e93\u53d7\u5230\u4e3a\u8be5\u4fa6\u542c\u5668\u914d\u7f6e\u7684\u4fe1\u4efb\u5e93\u4fe1\u4efb\u65f6\u624d\u5141\u8bb8\u66f4\u65b0\u3002\u5bf9\u4e8e\u5176\u4ed6\u4fa6\u542c\u5668\uff0c\u4ee3\u7406\u4e0d\u4f1a\u5bf9\u5bc6\u94a5\u5e93\u6267\u884c\u4fe1\u4efb\u9a8c\u8bc1\u3002\u8bc1\u4e66\u5fc5\u987b\u7531\u7b7e\u7f72\u65e7\u8bc1\u4e66\u7684\u540c\u4e00\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u7b7e\u7f72\uff0c\u4ee5\u907f\u514d\u4efb\u4f55\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u3002","title":"\u66f4\u65b0\u73b0\u6709\u4fa6\u542c\u5668\u7684 SSL \u5bc6\u94a5\u5e93"},{"location":"3/#ssl_1","text":"\u4ee3\u7406\u4fe1\u4efb\u5e93\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0\uff0c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u6765\u6dfb\u52a0\u6216\u5220\u9664\u8bc1\u4e66\u3002\u66f4\u65b0\u540e\u7684\u4fe1\u4efb\u5e93\u5c06\u7528\u4e8e\u9a8c\u8bc1\u65b0\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u914d\u7f6e\u540d\u79f0\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u4f5c\u4e3a\u524d\u7f00 listener.name.{listenerName}. \uff0c\u4ee5\u4fbf\u4ec5\u66f4\u65b0\u7279\u5b9a\u4fa6\u542c\u5668\u7684\u4fe1\u4efb\u5e93\u914d\u7f6e\u3002\u4ee5\u4e0b\u914d\u7f6e\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u7684\u5355\u4e2a\u66f4\u6539\u8bf7\u6c42\u4e2d\u66f4\u65b0\uff1a ssl.truststore.type ssl.truststore.location ssl.truststore.password \u5982\u679c\u4fa6\u542c\u5668\u662f\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\uff0c\u5219\u4ec5\u5f53\u8be5\u4fa6\u542c\u5668\u7684\u73b0\u6709\u5bc6\u94a5\u5e93\u53d7\u5230\u65b0\u4fe1\u4efb\u5e93\u7684\u4fe1\u4efb\u65f6\u624d\u5141\u8bb8\u66f4\u65b0\u3002\u5bf9\u4e8e\u5176\u4ed6\u4fa6\u542c\u5668\uff0c\u4ee3\u7406\u5728\u66f4\u65b0\u4e4b\u524d\u4e0d\u4f1a\u6267\u884c\u4fe1\u4efb\u9a8c\u8bc1\u3002\u4ece\u65b0\u4fe1\u4efb\u5e93\u4e2d\u5220\u9664\u7528\u4e8e\u7b7e\u7f72\u5ba2\u6237\u7aef\u8bc1\u4e66\u7684 CA \u8bc1\u4e66\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\u3002","title":"\u66f4\u65b0\u73b0\u6709\u4fa6\u542c\u5668\u7684 SSL \u4fe1\u4efb\u5e93"},{"location":"3/#_2","text":"\u4ee3\u7406\u4f7f\u7528\u7684\u9ed8\u8ba4\u4e3b\u9898\u914d\u7f6e\u9009\u9879\u53ef\u4ee5\u5728\u4e0d\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\u66f4\u65b0\u3002\u8fd9\u4e9b\u914d\u7f6e\u9002\u7528\u4e8e\u6ca1\u6709\u4e3b\u9898\u914d\u7f6e\u8986\u76d6\u7684\u4e3b\u9898\uff0c\u4ee5\u5b9e\u73b0\u7b49\u6548\u7684\u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u3002\u8fd9\u4e9b\u914d\u7f6e\u4e2d\u7684\u4e00\u9879\u6216\u591a\u9879\u53ef\u80fd\u4f1a\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u4e0a\u88ab\u8986\u76d6\u3002 log.segment.bytes log.roll.ms log.roll.hours log.roll.jitter.ms log.roll.jitter.hours log.index.size.max.bytes log.flush.interval.messages log.flush.interval.ms log.retention.bytes log.retention.ms log.retention.minutes log.retention.hours log.index.interval.bytes log.cleaner.delete.retention.ms log.cleaner.min.compaction.lag.ms log.cleaner.max.compaction.lag.ms log.cleaner.min.cleanable.ratio log.cleanup.policy log.segment.delete.delay.ms unclean.leader.election.enable min.insync.replicas max.message.bytes compression.type log.preallocate log.message.timestamp.type log.message.timestamp.difference.max.ms unclean.leader.election.enable \u4ece Kafka 2.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5f53\u914d\u7f6e\u52a8\u6001\u66f4\u65b0 \u65f6\uff0c\u63a7\u5236\u5668\u4f1a\u81ea\u52a8\u542f\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e \u3002\u5728 Kafka 1.1.x \u7248\u672c\u4e2d\uff0c\u66f4\u6539 unclean.leader.election.enable \u4ec5\u5728\u9009\u4e3e\u51fa\u65b0\u63a7\u5236\u5668\u65f6\u624d\u4f1a\u751f\u6548\u3002\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5f3a\u5236\u63a7\u5236\u5668\u91cd\u65b0\u9009\u4e3e\uff1a > bin/zookeeper-shell.sh localhost rmr /controller","title":"\u66f4\u65b0\u9ed8\u8ba4\u4e3b\u9898\u914d\u7f6e"},{"location":"3/#_3","text":"\u65e5\u5fd7\u6e05\u7406\u5668\u914d\u7f6e\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\u3002\u8fd9\u4e9b\u66f4\u6539\u5c06\u5728\u4e0b\u4e00\u6b21\u65e5\u5fd7\u6e05\u7406\u8fed\u4ee3\u4e2d\u751f\u6548\u3002\u53ef\u80fd\u4f1a\u66f4\u65b0\u5176\u4e2d\u4e00\u9879\u6216\u591a\u9879\u914d\u7f6e\uff1a log.cleaner.threads log.cleaner.io.max.bytes.per.second log.cleaner.dedupe.buffer.size log.cleaner.io.buffer.size log.cleaner.io.buffer.load.factor log.cleaner.backoff.ms","title":"\u66f4\u65b0\u65e5\u5fd7\u6e05\u7406\u5668\u914d\u7f6e"},{"location":"3/#_4","text":"\u4ee3\u7406\u4f7f\u7528\u7684\u5404\u79cd\u7ebf\u7a0b\u6c60\u7684\u5927\u5c0f\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\u3002\u66f4\u65b0\u9650\u5236\u5728\u4e00\u5b9a\u8303\u56f4\u5185\uff0c currentSize / 2 \u4ee5 currentSize * 2 \u786e\u4fdd\u914d\u7f6e\u66f4\u65b0\u5f97\u5230\u59a5\u5584\u5904\u7406\u3002 num.network.threads num.io.threads num.replica.fetchers num.recovery.threads.per.data.dir log.cleaner.threads background.threads","title":"\u66f4\u65b0\u7ebf\u7a0b\u914d\u7f6e"},{"location":"3/#connectionquota","text":"\u4ee3\u7406\u5141\u8bb8\u7ed9\u5b9a IP/\u4e3b\u673a\u7684\u6700\u5927\u8fde\u63a5\u6570\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4f7f\u7528\u7684\u96c6\u7fa4\u9ed8\u8ba4\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\u3002\u8fd9\u4e9b\u66f4\u6539\u5c06\u5e94\u7528\u200b\u200b\u4e8e\u65b0\u7684\u8fde\u63a5\u521b\u5efa\uff0c\u5e76\u4e14\u65b0\u7684\u9650\u5236\u5c06\u8003\u8651\u73b0\u6709\u8fde\u63a5\u8ba1\u6570\u3002 max.connections.per.ip max.connections.per.ip.overrides","title":"\u66f4\u65b0 ConnectionQuota \u914d\u7f6e"},{"location":"3/#_5","text":"\u76d1\u542c\u5668\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0\u6216\u5220\u9664\u3002\u6dfb\u52a0\u65b0\u4fa6\u542c\u5668\u65f6\uff0c\u5fc5\u987b\u5c06\u4fa6\u542c\u5668\u7684\u5b89\u5168\u914d\u7f6e\u63d0\u4f9b\u4e3a\u5e26\u6709\u4fa6\u542c\u5668\u524d\u7f00\u7684\u4fa6\u542c\u5668\u914d\u7f6e listener.name.{listenerName}. \u3002\u5982\u679c\u65b0\u4fa6\u542c\u5668\u4f7f\u7528 SASL\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u5e26\u6709\u4fa6\u542c\u5668\u548c\u673a\u5236\u524d\u7f00\u7684 JAAS \u914d\u7f6e\u5c5e\u6027\u6765\u63d0\u4f9b\u4fa6\u542c\u5668\u7684 JAAS \u914d\u7f6e sasl.jaas.config \u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Kafka \u4ee3\u7406\u7684 JAAS \u914d\u7f6e \u3002 \u5728Kafka 1.1.x\u7248\u672c\u4e2d\uff0c\u4ee3\u7406\u95f4\u76d1\u542c\u5668\u4f7f\u7528\u7684\u76d1\u542c\u5668\u53ef\u80fd\u4e0d\u4f1a\u52a8\u6001\u66f4\u65b0\u3002\u4e3a\u4e86\u5c06\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u66f4\u65b0\u4e3a\u65b0\u4fa6\u542c\u5668\uff0c\u53ef\u4ee5\u5728\u6240\u6709\u4ee3\u7406\u4e0a\u6dfb\u52a0\u65b0\u4fa6\u542c\u5668\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u7136\u540e\u9700\u8981\u6eda\u52a8\u91cd\u65b0\u542f\u52a8\u624d\u80fd\u66f4\u65b0 inter.broker.listener.name \u3002 \u9664\u4e86\u65b0\u76d1\u542c\u5668\u7684\u6240\u6709\u5b89\u5168\u914d\u7f6e\u4e4b\u5916\uff0c\u4ee5\u4e0b\u914d\u7f6e\u8fd8\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u7ea7\u522b\u52a8\u6001\u66f4\u65b0\uff1a listeners advertised.listeners listener.security.protocol.map \u5fc5\u987b\u4f7f\u7528\u9759\u6001\u4ee3\u7406\u914d\u7f6e inter.broker.listener.name \u6216 security.inter.broker.protocol .","title":"\u6dfb\u52a0\u548c\u5220\u200b\u200b\u9664\u76d1\u542c\u5668"},{"location":"3/#32","text":"\u4e0e\u4e3b\u9898\u76f8\u5173\u7684\u914d\u7f6e\u65e2\u6709\u670d\u52a1\u5668\u9ed8\u8ba4\u503c\uff0c\u4e5f\u6709\u53ef\u9009\u7684\u6bcf\u4e2a\u4e3b\u9898\u8986\u76d6\u3002\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u6bcf\u4e2a\u4e3b\u9898\u7684\u914d\u7f6e\uff0c\u5219\u4f7f\u7528\u670d\u52a1\u5668\u9ed8\u8ba4\u503c\u3002\u53ef\u4ee5\u5728\u4e3b\u9898\u521b\u5efa\u65f6\u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a\u9009\u9879\u6765\u8bbe\u7f6e\u8986\u76d6 --config \u3002\u6b64\u793a\u4f8b\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a my-topic \u7684 \u4e3b\u9898\uff0c\u5177\u6709\u81ea\u5b9a\u4e49\u6700\u5927\u6d88\u606f\u5927\u5c0f\u548c\u5237\u65b0\u7387\uff1a > bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topic my-topic --partitions 1 \\ --replication-factor 1 --config max.message.bytes=64000 --config flush.messages=1 \u4e5f\u53ef\u4ee5\u7a0d\u540e\u4f7f\u7528 alter configs \u547d\u4ee4\u66f4\u6539\u6216\u8bbe\u7f6e\u8986\u76d6\u3002 \u6b64\u793a\u4f8b\u66f4\u65b0my-topic \u7684\u6700\u5927\u6d88\u606f\u5927\u5c0f\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type topics --entity-name my-topic --alter --add-config max.message.bytes=128000 \u8981\u68c0\u67e5\u4e3b\u9898\u4e0a\u8bbe\u7f6e\u7684\u8986\u76d6\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type topics --entity-name my-topic --describe \u8981\u5220\u9664\u8986\u76d6\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c > bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type topics --entity-name my-topic --alter --delete-config max.message.bytes \u4ee5\u4e0b\u662f\u4e3b\u9898\u7ea7\u522b\u7684\u914d\u7f6e\u3002\u670d\u52a1\u5668\u5bf9\u6b64\u5c5e\u6027\u7684\u9ed8\u8ba4\u914d\u7f6e\u5728\u201c\u670d\u52a1\u5668\u9ed8\u8ba4\u5c5e\u6027\u201d\u6807\u9898\u4e0b\u7ed9\u51fa\u3002\u7ed9\u5b9a\u7684\u670d\u52a1\u5668\u9ed8\u8ba4\u914d\u7f6e\u503c\u4ec5\u9002\u7528\u4e8e\u6ca1\u6709\u663e\u5f0f\u4e3b\u9898\u914d\u7f6e\u8986\u76d6\u7684\u4e3b\u9898\u3002","title":"3.2 \u4e3b\u9898\u7ea7\u914d\u7f6e"},{"location":"3/#cleanuppolicy","text":"\u6b64\u914d\u7f6e\u6307\u5b9a\u5728\u65e5\u5fd7\u6bb5\u4e0a\u4f7f\u7528\u7684\u4fdd\u7559\u7b56\u7565\u3002\u5f53\u8fbe\u5230\u4fdd\u7559\u65f6\u95f4\u6216\u5927\u5c0f\u9650\u5236\u65f6\uff0c\u201c\u5220\u9664\u201d\u7b56\u7565\uff08\u9ed8\u8ba4\uff09\u5c06\u4e22\u5f03\u65e7\u6bb5\u3002\u201ccompact\u201d\u7b56\u7565\u5c06\u542f\u7528 \u65e5\u5fd7\u538b\u7f29 \uff0c\u5b83\u4fdd\u7559\u6bcf\u4e2a\u952e\u7684\u6700\u65b0\u503c\u3002\u4e5f\u53ef\u4ee5\u5728\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u4e2d\u6307\u5b9a\u8fd9\u4e24\u4e2a\u7b56\u7565\uff08\u4f8b\u5982\u201cdelete,compact\u201d\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u65e7\u7684\u6bb5\u5c06\u6839\u636e\u4fdd\u7559\u65f6\u95f4\u548c\u5927\u5c0f\u914d\u7f6e\u88ab\u4e22\u5f03\uff0c\u800c\u4fdd\u7559\u7684\u6bb5\u5c06\u88ab\u538b\u7f29\u3002 Type: list Default: delete Valid Values: [compact, delete] Server Default Property: log.cleanup.policy Importance: medium","title":"cleanup.policy"},{"location":"3/#compressiontype_1","text":"\u6307\u5b9a\u7ed9\u5b9a\u4e3b\u9898\u7684\u6700\u7ec8\u538b\u7f29\u7c7b\u578b\u3002\u6b64\u914d\u7f6e\u63a5\u53d7\u6807\u51c6\u538b\u7f29\u7f16\u89e3\u7801\u5668\uff08'gzip'\u3001'snappy'\u3001'lz4'\u3001'zstd'\uff09\u3002\u5b83\u8fd8\u63a5\u53d7\u201c\u672a\u538b\u7f29\u201d\uff0c\u8fd9\u76f8\u5f53\u4e8e\u4e0d\u538b\u7f29\uff1b\u201c\u751f\u4ea7\u8005\u201d\u8868\u793a\u4fdd\u7559\u751f\u4ea7\u8005\u8bbe\u7f6e\u7684\u539f\u59cb\u538b\u7f29\u7f16\u89e3\u7801\u5668\u3002 Type: string Default: producer Valid Values: [uncompressed, zstd, lz4, snappy, gzip, producer] Server Default Property: compression.type Importance: medium","title":"compression.type"},{"location":"3/#deleteretentionms","text":"\u4e3a\u65e5\u5fd7\u538b\u7f29 \u4e3b\u9898\u4fdd\u7559\u5220\u9664\u903b\u8f91\u5220\u9664\u6807\u8bb0\u7684\u65f6\u95f4\u91cf\u3002\u6b64\u8bbe\u7f6e\u8fd8\u89c4\u5b9a\u4e86\u6d88\u8d39\u8005\u5fc5\u987b\u5b8c\u6210\u8bfb\u53d6\u7684\u65f6\u95f4\u9650\u5236\uff08\u5982\u679c\u6d88\u8d39\u8005\u4ece\u504f\u79fb\u91cf 0 \u5f00\u59cb\uff09\uff0c\u4ee5\u786e\u4fdd\u4ed6\u4eec\u83b7\u5f97\u6700\u540e\u9636\u6bb5\u7684\u6709\u6548\u5feb\u7167\uff08\u5426\u5219\u53ef\u80fd\u4f1a\u5728\u5b8c\u6210\u626b\u63cf\u4e4b\u524d\u6536\u96c6\u5220\u9664\u903b\u8f91\u5220\u9664\uff09\u3002 Type: long Default: 86400000 (1 day) Valid Values: [0,...] Server Default Property: log.cleaner.delete.retention.ms Importance: medium","title":"delete.retention.ms"},{"location":"3/#filedeletedelayms","text":"\u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5220\u9664\u6587\u4ef6\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4 Type: long Default: 60000 (1 minute) Valid Values: [0,...] Server Default Property: log.segment.delete.delay.ms Importance: medium","title":"file.delete.delay.ms"},{"location":"3/#flushmessages","text":"\u6b64\u8bbe\u7f6e\u5141\u8bb8\u6307\u5b9a\u5f3a\u5236\u540c\u6b65\u5199\u5165\u65e5\u5fd7\u7684\u6570\u636e\u7684\u65f6\u95f4\u95f4\u9694\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5c06\u5176\u8bbe\u7f6e\u4e3a 1\uff0c\u6211\u4eec\u5c06\u5728\u6bcf\u6761\u6d88\u606f\u4e4b\u540e\u8fdb\u884c fsync\uff1b\u5982\u679c\u662f 5\uff0c\u6211\u4eec\u5c06\u5728\u6bcf 5 \u6761\u6d88\u606f\u540e\u8fdb\u884c fsync\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4e0d\u8981\u8bbe\u7f6e\u6b64\u9879\u5e76\u4f7f\u7528\u590d\u5236\u6765\u5b9e\u73b0\u6301\u4e45\u6027\uff0c\u5e76\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u7684\u540e\u53f0\u5237\u65b0\u529f\u80fd\uff0c\u56e0\u4e3a\u5b83\u66f4\u9ad8\u6548\u3002\u53ef\u4ee5\u6839\u636e\u6bcf\u4e2a\u4e3b\u9898\u8986\u76d6\u6b64\u8bbe\u7f6e\uff08\u8bf7\u53c2\u9605 \u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u90e8\u5206 \uff09\u3002 Type: long Default: 9223372036854775807 Valid Values: [1\uff0c...] Server Default Property: log.flush.interval.messages Importance: medium","title":"flush.messages"},{"location":"3/#flushms","text":"\u6b64\u8bbe\u7f6e\u5141\u8bb8\u6307\u5b9a\u5f3a\u5236\u540c\u6b65\u5199\u5165\u65e5\u5fd7\u7684\u6570\u636e\u7684\u65f6\u95f4\u95f4\u9694\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5c06\u5176\u8bbe\u7f6e\u4e3a 1000\uff0c\u6211\u4eec\u5c06\u5728 1000 \u6beb\u79d2\u8fc7\u53bb\u540e\u8fdb\u884c fsync\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4e0d\u8981\u8bbe\u7f6e\u6b64\u9879\u5e76\u4f7f\u7528\u590d\u5236\u6765\u5b9e\u73b0\u6301\u4e45\u6027\uff0c\u5e76\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u7684\u540e\u53f0\u5237\u65b0\u529f\u80fd\uff0c\u56e0\u4e3a\u5b83\u66f4\u9ad8\u6548\u3002 Type: long Default: 9223372036854775807 Valid Values: [0,...] Server Default Property: log.flush.interval.ms Importance: medium","title":"flush.ms"},{"location":"3/#followerreplicationthrottledreplicas","text":"\u5e94\u5728\u4ece\u5c5e\u7aef\u9650\u5236\u5176\u65e5\u5fd7\u590d\u5236\u7684\u526f\u672c\u5217\u8868\u3002\u8be5\u5217\u8868\u5e94\u4ee5 [PartitionId]:[BrokerId],[PartitionId]:[BrokerId]:... \u7684\u5f62\u5f0f\u63cf\u8ff0\u4e00\u7ec4\u526f\u672c\uff0c\u6216\u8005\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u201c*\u201d\u6765\u9650\u5236\u8be5\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u3002 Type: list Default: \"\" Valid Values: [partitionId]:[brokerId],[partitionId]:[brokerId],... Server Default Property: null Importance: medium","title":"follower.replication.throttled.replicas"},{"location":"3/#indexintervalbytes","text":"\u6b64\u8bbe\u7f6e\u63a7\u5236 Kafka \u5c06\u7d22\u5f15\u6761\u76ee\u6dfb\u52a0\u5230\u5176\u504f\u79fb\u7d22\u5f15\u7684\u9891\u7387\u3002\u9ed8\u8ba4\u8bbe\u7f6e\u786e\u4fdd\u6211\u4eec\u5927\u7ea6\u6bcf 4096 \u5b57\u8282\u7d22\u5f15\u4e00\u6761\u6d88\u606f\u3002\u66f4\u591a\u7d22\u5f15\u5141\u8bb8\u8bfb\u53d6\u8df3\u8f6c\u5230\u66f4\u63a5\u8fd1\u65e5\u5fd7\u4e2d\u7684\u786e\u5207\u4f4d\u7f6e\uff0c\u4f46\u4f1a\u4f7f\u7d22\u5f15\u66f4\u5927\u3002\u60a8\u53ef\u80fd\u4e0d\u9700\u8981\u66f4\u6539\u6b64\u8bbe\u7f6e\u3002 Type: int Default: 4096 (4 kibibytes) Valid Values: [0,...] Server Default Property: log.index.interval.bytes Importance: medium","title":"index.interval.bytes"},{"location":"3/#leaderreplicationthrottledreplicas","text":"\u5e94\u5728\u9886\u5bfc\u8005\u7aef\u9650\u5236\u5176\u65e5\u5fd7\u590d\u5236\u7684\u526f\u672c\u5217\u8868\u3002\u8be5\u5217\u8868\u5e94\u4ee5 [PartitionId]:[BrokerId],[PartitionId]:[BrokerId]:... \u7684\u5f62\u5f0f\u63cf\u8ff0\u4e00\u7ec4\u526f\u672c\uff0c\u6216\u8005\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u201c*\u201d\u6765\u9650\u5236\u8be5\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u3002 Type: list Default: \"\" Valid Values: [partitionId]:[brokerId],[partitionId]:[brokerId],... Server Default Property: null Importance: medium","title":"leader.replication.throttled.replicas"},{"location":"3/#maxcompactionlagms","text":"\u6d88\u606f\u5728\u65e5\u5fd7\u4e2d\u4e0d\u7b26\u5408\u538b\u7f29\u6761\u4ef6\u7684\u6700\u957f\u65f6\u95f4\u3002\u4ec5\u9002\u7528\u4e8e\u6b63\u5728\u538b\u7f29\u7684\u65e5\u5fd7\u3002 Type: long Default: 9223372036854775807 Valid Values: [1\uff0c...] Server Default Property: log.cleaner.max.compaction.lag.ms Importance: medium","title":"max.compaction.lag.ms"},{"location":"3/#maxmessagebytes","text":"Kafka \u5141\u8bb8\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\uff08\u5982\u679c\u542f\u7528\u538b\u7f29\uff0c\u5219\u5728\u538b\u7f29\u540e\uff09\u3002\u5982\u679c\u589e\u52a0\u6b64\u503c\u5e76\u4e14\u5b58\u5728\u65e9\u4e8e 0.10.2 \u7684\u6d88\u8d39\u8005\uff0c\u5219\u6d88\u8d39\u8005\u7684\u83b7\u53d6\u5927\u5c0f\u4e5f\u5fc5\u987b\u589e\u52a0\uff0c\u4ee5\u4fbf\u4ed6\u4eec\u53ef\u4ee5\u83b7\u53d6\u8fd9\u4e48\u5927\u7684\u8bb0\u5f55\u6279\u6b21\u3002\u5728\u6700\u65b0\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u8bb0\u5f55\u603b\u662f\u5206\u7ec4\u4e3a\u6279\u6b21\u3002\u5728\u4ee5\u524d\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u4e2d\uff0c\u672a\u538b\u7f29\u7684\u8bb0\u5f55\u4e0d\u4f1a\u5206\u7ec4\u4e3a\u6279\u6b21\uff0c\u5e76\u4e14\u6b64\u9650\u5236\u4ec5\u9002\u7528\u4e8e\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u5355\u4e2a\u8bb0\u5f55\u3002 Type: int Default: 1048588 Valid Values: [0,...] Server Default Property: message.max.bytes Importance: medium","title":"max.message.bytes"},{"location":"3/#messageformatversion","text":"[\u5df2\u5f03\u7528] \u6307\u5b9a\u4ee3\u7406\u5c06\u7528\u4e8e\u5c06\u6d88\u606f\u9644\u52a0\u5230\u65e5\u5fd7\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\u3002\u5982\u679c\u201cinter.broker.protocol.version\u201d\u4e3a 3.0 \u6216\u66f4\u9ad8\uff0c\u5219\u6b64\u914d\u7f6e\u7684\u503c\u59cb\u7ec8\u5047\u5b9a\u4e3a\u201c3.0\u201d\uff08\u5ffd\u7565\u5b9e\u9645\u914d\u7f6e\u503c\uff09\u3002\u5426\u5219\uff0c\u8be5\u503c\u5e94\u8be5\u662f\u6709\u6548\u7684 ApiVersion\u3002\u4e00\u4e9b\u793a\u4f8b\u662f\uff1a0.10.0\u30011.1\u30012.8\u30013.0\u3002\u901a\u8fc7\u8bbe\u7f6e\u7279\u5b9a\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff0c\u7528\u6237\u53ef\u4ee5\u8bc1\u660e\u78c1\u76d8\u4e0a\u7684\u6240\u6709\u73b0\u6709\u6d88\u606f\u90fd\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u7684\u7248\u672c\u3002\u9519\u8bef\u5730\u8bbe\u7f6e\u6b64\u503c\u5c06\u5bfc\u81f4\u4f7f\u7528\u65e7\u7248\u672c\u7684\u6d88\u8d39\u8005\u5d29\u6e83\uff0c\u56e0\u4e3a\u4ed6\u4eec\u5c06\u6536\u5230\u4ed6\u4eec\u4e0d\u7406\u89e3\u7684\u683c\u5f0f\u7684\u6d88\u606f\u3002 Type: string Default: 3.0-IV1 Valid Values: [0.8.0\u30010.8.1\u30010.8.2\u30010.9.0\u30010.10.0-IV0\u30010.10.0-IV1\u30010.10.1-IV0\u30010.10.1-IV1\u30010.10.1-IV2\u30010.10.2 -IV0\u30010.11.0-IV0\u30010.11.0-IV1\u30010.11.0-IV2\u30011.0-IV0\u30011.1-IV0\u30012.0-IV0\u30012.0-IV1\u30012.1-IV0\u30012.1-IV1\u30012.1-IV2\u30012.2 [0100]-IV0\u30012.2-IV1\u30012.3-IV0\u30012.3-IV1\u30012.4-IV0\u30012.4-IV1\u30012.5-IV0\u30012.6-IV0\u30012.7-IV0\u30012.7-IV1\u30012.7-IV2\u30012.8-IV0\u30012.8-IV1 , 3.0-IV0, 3.0-IV1, 3.1-IV0, 3.2-IV0, 3.3-IV0, 3.3-IV1, 3.3-IV2, 3.3-IV3, 3.4-IV0, 3.5-IV0, 3.5-IV1, 3.5-IV2] Server Default Property: log.message.format.version Importance: medium","title":"message.format.version"},{"location":"3/#messagetimestampdifferencemaxms","text":"\u4ee3\u7406\u6536\u5230\u6d88\u606f\u65f6\u7684\u65f6\u95f4\u6233\u4e0e\u6d88\u606f\u4e2d\u6307\u5b9a\u7684\u65f6\u95f4\u6233\u4e4b\u95f4\u5141\u8bb8\u7684\u6700\u5927\u5dee\u5f02\u3002\u5982\u679cmessage.timestamp.type=CreateTime\uff0c\u5219\u5982\u679c\u65f6\u95f4\u6233\u5dee\u5f02\u8d85\u8fc7\u6b64\u9608\u503c\uff0c\u6d88\u606f\u5c06\u88ab\u62d2\u7edd\u3002\u5982\u679c message.timestamp.type=LogAppendTime\uff0c\u5219\u5ffd\u7565\u6b64\u914d\u7f6e\u3002 Type: long Default: 9223372036854775807 Valid Values: [0,...] Server Default Property: log.message.timestamp.difference.max.ms Importance: medium","title":"message.timestamp.difference.max.ms"},{"location":"3/#messagetimestamptype","text":"Define whether the timestamp in the message is message create time or log append time. The value should be either `CreateTime` or `LogAppendTime` Type: string Default: CreateTime Valid Values: [CreateTime, LogAppendTime] Server Default Property: log.message.timestamp.type Importance: medium","title":"message.timestamp.type"},{"location":"3/#mincleanabledirtyratio","text":"This configuration controls how frequently the log compactor will attempt to clean the log (assuming log compaction is enabled). By default we will avoid cleaning a log where more than 50% of the log has been compacted. This ratio bounds the maximum space wasted in the log by duplicates (at 50% at most 50% of the log could be duplicates). A higher ratio will mean fewer, more efficient cleanings but will mean more wasted space in the log. If the max.compaction.lag.ms or the min.compaction.lag.ms configurations are also specified, then the log compactor considers the log to be eligible for compaction as soon as either: (i) the dirty ratio threshold has been met and the log has had dirty (uncompacted) records for at least the min.compaction.lag.ms duration, or (ii) if the log has had dirty (uncompacted) records for at most the max.compaction.lag.ms period. Type: double Default: 0.5 Valid Values: [0,...,1] Server Default Property: log.cleaner.min.cleanable.ratio Importance: medium","title":"min.cleanable.dirty.ratio"},{"location":"3/#mincompactionlagms","text":"The minimum time a message will remain uncompacted in the log. Only applicable for logs that are being compacted. Type: long Default: 0 Valid Values: [0,...] Server Default Property: log.cleaner.min.compaction.lag.ms Importance: medium","title":"min.compaction.lag.ms"},{"location":"3/#mininsyncreplicas_1","text":"When a producer sets acks to \"all\" (or \"-1\"), this configuration specifies the minimum number of replicas that must acknowledge a write for the write to be considered successful. If this minimum cannot be met, then the producer will raise an exception (either NotEnoughReplicas or NotEnoughReplicasAfterAppend). When used together, min.insync.replicas and acks allow you to enforce greater durability guarantees. A typical scenario would be to create a topic with a replication factor of 3, set min.insync.replicas to 2, and produce with acks of \"all\". This will ensure that the producer raises an exception if a majority of replicas do not receive a write. Type: int Default: 1 Valid Values: [1,...] Server Default Property: min.insync.replicas Importance: medium","title":"min.insync.replicas"},{"location":"3/#preallocate","text":"\u5982\u679c\u6211\u4eec\u5728\u521b\u5efa\u65b0\u65e5\u5fd7\u6bb5\u65f6\u5e94\u8be5\u5728\u78c1\u76d8\u4e0a\u9884\u5206\u914d\u6587\u4ef6\uff0c\u5219\u4e3a true\u3002 Type: boolean Default: false Valid Values: Server Default Property: log.preallocate Importance: medium","title":"preallocate"},{"location":"3/#retentionbytes","text":"\u5982\u679c\u6211\u4eec\u4f7f\u7528\u201c\u5220\u9664\u201d\u4fdd\u7559\u7b56\u7565\uff0c\u6b64\u914d\u7f6e\u63a7\u5236\u5206\u533a\uff08\u7531\u65e5\u5fd7\u6bb5\u7ec4\u6210\uff09\u5728\u6211\u4eec\u4e22\u5f03\u65e7\u65e5\u5fd7\u6bb5\u4ee5\u91ca\u653e\u7a7a\u95f4\u4e4b\u524d\u53ef\u4ee5\u589e\u957f\u5230\u7684\u6700\u5927\u5927\u5c0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u5927\u5c0f\u9650\u5236\uff0c\u53ea\u6709\u65f6\u95f4\u9650\u5236\u3002\u7531\u4e8e\u6b64\u9650\u5236\u662f\u5728\u5206\u533a\u7ea7\u522b\u5f3a\u5236\u5b9e\u65bd\u7684\uff0c\u56e0\u6b64\u5c06\u5176\u4e58\u4ee5\u5206\u533a\u6570\u5373\u53ef\u8ba1\u7b97\u4e3b\u9898\u4fdd\u7559\u65f6\u95f4\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002 Type: long Default: -1 Valid Values: Server Default Property: log.retention.bytes Importance: medium","title":"retention.bytes"},{"location":"3/#retentionms","text":"\u5982\u679c\u6211\u4eec\u4f7f\u7528\u201c\u5220\u9664\u201d\u4fdd\u7559\u7b56\u7565\uff0c\u6b64\u914d\u7f6e\u63a7\u5236\u6211\u4eec\u5728\u4e22\u5f03\u65e7\u65e5\u5fd7\u6bb5\u4ee5\u91ca\u653e\u7a7a\u95f4\u4e4b\u524d\u4fdd\u7559\u65e5\u5fd7\u7684\u6700\u957f\u65f6\u95f4\u3002\u8fd9\u4ee3\u8868\u4e86\u5173\u4e8e\u6d88\u8d39\u8005\u5fc5\u987b\u591a\u5feb\u8bfb\u53d6\u5176\u6570\u636e\u7684 SLA\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a -1\uff0c\u5219\u4e0d\u5e94\u7528\u65f6\u95f4\u9650\u5236\u3002 Type: long Default: 604800000 (7 days) Valid Values: [-1\uff0c...] Server Default Property: log.retention.ms Importance: medium","title":"retention.ms"},{"location":"3/#segmentbytes","text":"\u6b64\u914d\u7f6e\u63a7\u5236\u65e5\u5fd7\u7684\u6bb5\u6587\u4ef6\u5927\u5c0f\u3002\u4fdd\u7559\u548c\u6e05\u7406\u603b\u662f\u4e00\u6b21\u5bf9\u4e00\u4e2a\u6587\u4ef6\u8fdb\u884c\uff0c\u56e0\u6b64\u8f83\u5927\u7684\u6bb5\u5927\u5c0f\u610f\u5473\u7740\u6587\u4ef6\u8f83\u5c11\uff0c\u4f46\u5bf9\u4fdd\u7559\u7684\u7c92\u5ea6\u63a7\u5236\u8f83\u5c0f\u3002 Type: int Default: 1073741824 (1 gibibyte) Valid Values: [14\uff0c...] Server Default Property: log.segment.bytes Importance: medium","title":"segment.bytes"},{"location":"3/#segmentindexbytes","text":"\u6b64\u914d\u7f6e\u63a7\u5236\u5c06\u504f\u79fb\u91cf\u6620\u5c04\u5230\u6587\u4ef6\u4f4d\u7f6e\u7684\u7d22\u5f15\u7684\u5927\u5c0f\u3002\u6211\u4eec\u9884\u5148\u5206\u914d\u8be5\u7d22\u5f15\u6587\u4ef6\uff0c\u5e76\u4ec5\u5728\u65e5\u5fd7\u6eda\u52a8\u540e\u6536\u7f29\u5b83\u3002\u60a8\u901a\u5e38\u4e0d\u9700\u8981\u66f4\u6539\u6b64\u8bbe\u7f6e\u3002 Type: int Default: 10485760 (10 mebibytes) Valid Values: [4\uff0c...] Server Default Property: log.index.size.max.bytes Importance: medium","title":"segment.index.bytes"},{"location":"3/#segmentjitterms","text":"\u4ece\u9884\u5b9a\u7684\u5206\u6bb5\u6eda\u52a8\u65f6\u95f4\u4e2d\u51cf\u53bb\u6700\u5927\u968f\u673a\u6296\u52a8\uff0c\u4ee5\u907f\u514d\u5206\u6bb5\u6eda\u52a8\u7684\u96f7\u7fa4 Type: long Default: 0 Valid Values: [0,...] Server Default Property: log.roll.jitter.ms Importance: medium","title":"segment.jitter.ms"},{"location":"3/#segmentms","text":"\u6b64\u914d\u7f6e\u63a7\u5236\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5373\u4f7f\u6bb5\u6587\u4ef6\u672a\u6ee1\uff0cKafka\u4e5f\u4f1a\u5f3a\u5236\u65e5\u5fd7\u6eda\u52a8\uff0c\u4ee5\u786e\u4fdd\u4fdd\u7559\u53ef\u4ee5\u5220\u9664\u6216\u538b\u7f29\u65e7\u6570\u636e\u3002 Type: long Default: 604800000 (7 days) Valid Values: [1\uff0c...] Server Default Property: log.roll.ms Importance: medium","title":"segment.ms"},{"location":"3/#uncleanleaderelectionenable_1","text":"\u6307\u793a\u662f\u5426\u5c06\u4e0d\u5728 ISR \u96c6\u4e2d\u7684\u526f\u672c\u4f5c\u4e3a\u6700\u540e\u624b\u6bb5\u9009\u4e3e\u4e3a\u9886\u5bfc\u8005\uff0c\u5373\u4f7f\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002 Type: boolean Default: false Valid Values: Server Default Property: unclean.leader.election.enable Importance: medium","title":"unclean.leader.election.enable"},{"location":"3/#messagedownconversionenable","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u662f\u5426\u542f\u7528\u6d88\u606f\u683c\u5f0f\u4e0b\u8f6c\u6362\u4ee5\u6ee1\u8db3\u6d88\u8d39\u8bf7\u6c42\u3002\u5f53\u8bbe\u7f6e\u4e3a \u65f6 false \uff0c\u4ee3\u7406\u5c06\u4e0d\u4f1a\u4e3a\u671f\u671b\u65e7\u6d88\u606f\u683c\u5f0f\u7684\u6d88\u8d39\u8005\u6267\u884c\u5411\u4e0b\u8f6c\u6362\u3002 UNSUPPORTED_VERSION \u5bf9\u4e8e\u6765\u81ea\u6b64\u7c7b\u8f83\u65e7\u5ba2\u6237\u7aef\u7684\u6d88\u8d39\u8bf7\u6c42\uff0c\u4ee3\u7406\u4f1a\u8fd4\u56de\u9519\u8bef\u54cd\u5e94\u3002\u6b64\u914d\u7f6e\u4e0d\u9002\u7528\u4e8e\u590d\u5236\u5230\u5173\u6ce8\u8005\u53ef\u80fd\u9700\u8981\u7684\u4efb\u4f55\u6d88\u606f\u683c\u5f0f\u8f6c\u6362\u3002 Type: boolean Default: true Valid Values: Server Default Property: log.message.downconversion.enable Importance: low","title":"message.downconversion.enable"},{"location":"3/#33","text":"\u4e0b\u9762\u662f\u751f\u4ea7\u8005\u7684\u914d\u7f6e\uff1a","title":"3.3 \u751f\u4ea7\u8005\u914d\u7f6e"},{"location":"3/#keyserializer","text":"\u5b9e\u73b0\u8be5 org.apache.kafka.common.serialization.Serializer \u63a5\u53e3\u7684\u952e\u7684\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high","title":"key.serializer"},{"location":"3/#valueserializer","text":"\u5b9e\u73b0 org.apache.kafka.common.serialization.Serializer \u63a5\u53e3\u7684\u503c\u7684\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high","title":"value.serializer"},{"location":"3/#bootstrapservers","text":"\u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: \"\" Valid Values: non-null string Importance: high","title":"bootstrap.servers"},{"location":"3/#buffermemory","text":"\u751f\u4ea7\u8005\u53ef\u7528\u4e8e\u7f13\u51b2\u7b49\u5f85\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u8bb0\u5f55\u7684\u5185\u5b58\u603b\u5b57\u8282\u6570\u3002\u5982\u679c\u8bb0\u5f55\u7684\u53d1\u9001\u901f\u5ea6\u5feb\u4e8e\u4f20\u9001\u5230\u670d\u52a1\u5668\u7684\u901f\u5ea6\uff0c\u751f\u4ea7\u8005\u5c06\u963b\u585e\uff0c max.block.ms \u7136\u540e\u629b\u51fa\u5f02\u5e38\u3002 \u6b64\u8bbe\u7f6e\u5e94\u5927\u81f4\u5bf9\u5e94\u4e8e\u751f\u4ea7\u8005\u5c06\u4f7f\u7528\u7684\u603b\u5185\u5b58\uff0c\u4f46\u4e0d\u662f\u786c\u9650\u5236\uff0c\u56e0\u4e3a\u5e76\u975e\u751f\u4ea7\u8005\u4f7f\u7528\u7684\u6240\u6709\u5185\u5b58\u90fd\u7528\u4e8e\u7f13\u51b2\u3002\u4e00\u4e9b\u989d\u5916\u7684\u5185\u5b58\u5c06\u7528\u4e8e\u538b\u7f29\uff08\u5982\u679c\u542f\u7528\u538b\u7f29\uff09\u4ee5\u53ca\u7ef4\u62a4\u6b63\u5728\u8fdb\u884c\u7684\u8bf7\u6c42\u3002 Type: long Default: 33554432 Valid Values: [0,...] Importance: high","title":"buffer.memory"},{"location":"3/#compressiontype_2","text":"\u751f\u4ea7\u8005\u751f\u6210\u7684\u6240\u6709\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002\u9ed8\u8ba4\u503c\u4e3a\u65e0\uff08\u5373\u4e0d\u538b\u7f29\uff09\u3002\u6709\u6548\u503c\u4e3a none \u3001 gzip \u3001 snappy \u3001 lz4 \u6216 zstd \u3002\u538b\u7f29\u662f\u5bf9\u6574\u6279\u6570\u636e\u8fdb\u884c\u538b\u7f29\uff0c\u56e0\u6b64\u6279\u5904\u7406\u7684\u6548\u679c\u4e5f\u4f1a\u5f71\u54cd\u538b\u7f29\u7387\uff08\u6279\u5904\u7406\u8d8a\u591a\u610f\u5473\u7740\u538b\u7f29\u6548\u679c\u8d8a\u597d\uff09\u3002 Type: string Default: none Valid Values: [\u65e0\u3001gzip\u3001snappy\u3001lz4\u3001zstd] Importance: high","title":"compression.type"},{"location":"3/#retries","text":"\u8bbe\u7f6e\u5927\u4e8e\u96f6\u7684\u503c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u91cd\u65b0\u53d1\u9001\u53d1\u9001\u5931\u8d25\u5e76\u53ef\u80fd\u51fa\u73b0\u6682\u65f6\u6027\u9519\u8bef\u7684\u4efb\u4f55\u8bb0\u5f55\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u91cd\u8bd5\u4e0e\u5ba2\u6237\u7aef\u5728\u6536\u5230\u9519\u8bef\u540e\u91cd\u65b0\u53d1\u9001\u8bb0\u5f55\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c\u3002 delivery.timeout.ms \u5982\u679c\u5728\u6210\u529f\u786e\u8ba4\u4e4b\u524d\u914d\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u5148\u5230\u671f\uff0c\u5219\u5728\u91cd\u8bd5\u6b21\u6570\u7528\u5b8c\u4e4b\u524d\uff0c\u751f\u4ea7\u8bf7\u6c42\u5c06\u5931\u8d25\u3002\u7528\u6237\u901a\u5e38\u5e94\u8be5\u66f4\u613f\u610f\u4fdd\u7559\u6b64\u914d\u7f6e\u672a\u8bbe\u7f6e\uff0c\u800c\u662f\u7528\u4e8e delivery.timeout.ms \u63a7\u5236\u91cd\u8bd5\u884c\u4e3a\u3002 \u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42\u6b64\u914d\u7f6e\u503c\u5927\u4e8e 0\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002 \u5728\u8bbe\u7f6e enable.idempotence \u4e3a1 false \u6216 max.in.flight.requests.per.connection \u5927\u4e8e 1 \u65f6\u5141\u8bb8\u91cd\u8bd5\u53ef\u80fd\u4f1a\u66f4\u6539\u8bb0\u5f55\u7684\u987a\u5e8f\uff0c\u56e0\u4e3a\u5982\u679c\u5c06\u4e24\u4e2a\u6279\u6b21\u53d1\u9001\u5230\u5355\u4e2a\u5206\u533a\uff0c\u5e76\u4e14\u7b2c\u4e00\u4e2a\u6279\u6b21\u5931\u8d25\u5e76\u91cd\u8bd5\uff0c\u4f46\u7b2c\u4e8c\u4e2a\u6210\u529f\uff0c\u5219\u7b2c\u4e8c\u4e2a\u6279\u6b21\u4e2d\u7684\u8bb0\u5f55\u53ef\u80fd\u4f1a\u5148\u51fa\u73b0\u3002 Type: int Default: 2147483647 Valid Values: [0\uff0c...\uff0c2147483647] Importance: high","title":"retries"},{"location":"3/#sslkeypassword_1","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.key.password"},{"location":"3/#sslkeystorecertificatechain_1","text":"\u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.certificate.chain"},{"location":"3/#sslkeystorekey_1","text":"\u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.key"},{"location":"3/#sslkeystorelocation_1","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.keystore.location"},{"location":"3/#sslkeystorepassword_1","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.password"},{"location":"3/#ssltruststorecertificate","text":"\u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.certificate"},{"location":"3/#ssltruststorelocation_1","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.truststore.location"},{"location":"3/#ssltruststorepassword_1","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.password"},{"location":"3/#batchsize","text":"\u6bcf\u5f53\u591a\u4e2a\u8bb0\u5f55\u53d1\u9001\u5230\u540c\u4e00\u5206\u533a\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u5c06\u8bb0\u5f55\u4e00\u8d77\u6279\u5904\u7406\u4e3a\u66f4\u5c11\u7684\u8bf7\u6c42\u3002\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u6027\u80fd\u3002\u6b64\u914d\u7f6e\u63a7\u5236\u9ed8\u8ba4\u6279\u91cf\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002 \u4e0d\u4f1a\u5c1d\u8bd5\u6279\u91cf\u8bb0\u5f55\u5927\u4e8e\u6b64\u5927\u5c0f\u7684\u8bb0\u5f55\u3002 \u53d1\u9001\u5230\u4ee3\u7406\u7684\u8bf7\u6c42\u5c06\u5305\u542b\u591a\u4e2a\u6279\u6b21\uff0c\u6bcf\u4e2a\u6279\u6b21\u5bf9\u5e94\u4e00\u4e2a\u53ef\u53d1\u9001\u6570\u636e\u7684\u5206\u533a\u3002 A small batch size will make batching less common and may reduce throughput (a batch size of zero will disable batching entirely). A very large batch size may use memory a bit more wastefully as we will always allocate a buffer of the specified batch size in anticipation of additional records. Note: This setting gives the upper bound of the batch size to be sent. If we have fewer than this many bytes accumulated for this partition, we will 'linger' for the linger.ms time waiting for more records to show up. This linger.ms setting defaults to 0, which means we'll immediately send out a record even the accumulated batch size is under this batch.size setting. Type: int Default: 16384 Valid Values: [0,...] Importance: medium","title":"batch.size"},{"location":"3/#clientdnslookup","text":"Controls how the client uses DNS lookups. If set to use_all_dns_ips , connect to each returned IP address in sequence until a successful connection is established. After a disconnection, the next IP is used. Once all IPs have been used once, the client resolves the IP(s) from the hostname again (both the JVM and the OS cache DNS name lookups, however). If set to resolve_canonical_bootstrap_servers_only , resolve each bootstrap address into a list of canonical names. After the bootstrap phase, this behaves the same as use_all_dns_ips . Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips, resolve_canonical_bootstrap_servers_only] Importance: medium","title":"client.dns.lookup"},{"location":"3/#clientid","text":"An id string to pass to the server when making requests. The purpose of this is to be able to track the source of requests beyond just ip/port by allowing a logical application name to be included in server-side request logging. Type: string Default: \"\" Valid Values: Importance: medium","title":"client.id"},{"location":"3/#connectionsmaxidlems_1","text":"Close idle connections after the number of milliseconds specified by this config. Type: long Default: 540000 (9 minutes) Valid Values: Importance: medium","title":"connections.max.idle.ms"},{"location":"3/#deliverytimeoutms","text":"An upper bound on the time to report success or failure after a call to send() returns. This limits the total time that a record will be delayed prior to sending, the time to await acknowledgement from the broker (if expected), and the time allowed for retriable send failures. The producer may report failure to send a record earlier than this config if either an unrecoverable error is encountered, the retries have been exhausted, or the record is added to a batch which reached an earlier delivery expiration deadline. The value of this config should be greater than or equal to the sum of request.timeout.ms and linger.ms . Type: int Default: 120000 (2 minutes) Valid Values: [0,...] Importance: medium","title":"delivery.timeout.ms"},{"location":"3/#lingerms","text":"The producer groups together any records that arrive in between request transmissions into a single batched request. Normally this occurs only under load when records arrive faster than they can be sent out. However in some circumstances the client may want to reduce the number of requests even under moderate load. This setting accomplishes this by adding a small amount of artificial delay\u2014that is, rather than immediately sending out a record, the producer will wait for up to the given delay to allow other records to be sent so that the sends can be batched together. This can be thought of as analogous to Nagle's algorithm in TCP. This setting gives the upper bound on the delay for batching: once we get batch.size \u65e0\u8bba\u6b64\u8bbe\u7f6e\u5982\u4f55\uff0c\u90fd\u4f1a\u7acb\u5373\u53d1\u9001\u5206\u533a\u7684\u8bb0\u5f55\u4ef7\u503c\uff0c\u4f46\u662f\uff0c\u5982\u679c\u8be5\u5206\u533a\u7d2f\u79ef\u7684\u5b57\u8282\u6570\u5c11\u4e8e\u8fd9\u4e48\u591a\uff0c\u6211\u4eec\u5c06\u201c\u5f98\u5f8a\u201d\u6307\u5b9a\u7684\u65f6\u95f4\uff0c\u7b49\u5f85\u66f4\u591a\u8bb0\u5f55\u663e\u793a\u3002\u8be5\u8bbe\u7f6e\u9ed8\u8ba4\u4e3a 0\uff08\u5373\u65e0\u5ef6\u8fdf\uff09\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e linger.ms=5 \u53ef\u4ee5\u51cf\u5c11\u53d1\u9001\u7684\u8bf7\u6c42\u6570\u91cf\uff0c\u4f46\u4f1a\u5728\u6ca1\u6709\u8d1f\u8f7d\u7684\u60c5\u51b5\u4e0b\u4e3a\u53d1\u9001\u7684\u8bb0\u5f55\u589e\u52a0\u6700\u591a 5 \u6beb\u79d2\u7684\u5ef6\u8fdf\u3002 Type: long Default: 0 Valid Values: [0,...] Importance: medium","title":"linger.ms"},{"location":"3/#maxblockms","text":"KafkaProducer \u914d\u7f6e\u63a7\u5236 send() \u3001 partitionsFor() \u3001 initTransactions() \u3001 sendOffsetsToTransaction() \u548c commitTransaction() \u65b9\u6cd5\u5c06\u963b\u585e\u591a\u957f\u65f6\u95f4 abortTransaction() \u3002\u5bf9\u4e8e send() \u6b64\u8d85\u65f6\u9650\u5236\u7b49\u5f85\u5143\u6570\u636e\u83b7\u53d6\u548c\u7f13\u51b2\u533a\u5206\u914d\u7684\u603b\u65f6\u95f4\uff08\u7528\u6237\u63d0\u4f9b\u7684\u5e8f\u5217\u5316\u5668\u6216\u5206\u533a\u5668\u4e2d\u7684\u963b\u585e\u4e0d\u8ba1\u5165\u6b64\u8d85\u65f6\uff09\u3002\u5bf9\u4e8e partitionsFor() \u6b64\u8d85\u65f6\uff0c\u9650\u5236\u4e86\u7b49\u5f85\u5143\u6570\u636e\uff08\u5982\u679c\u5143\u6570\u636e\u4e0d\u53ef\u7528\uff09\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002\u4e0e\u4e8b\u52a1\u76f8\u5173\u7684\u65b9\u6cd5\u59cb\u7ec8\u4f1a\u963b\u585e\uff0c\u4f46\u5982\u679c\u65e0\u6cd5\u53d1\u73b0\u4e8b\u52a1\u534f\u8c03\u5668\u6216\u5728\u8d85\u65f6\u5185\u672a\u54cd\u5e94\uff0c\u5219\u53ef\u80fd\u4f1a\u8d85\u65f6\u3002 Type: long Default: 60000 (1 minute) Valid Values: [0,...] Importance: medium","title":"max.block.ms"},{"location":"3/#maxrequestsize","text":"\u8bf7\u6c42\u7684\u6700\u5927\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u6b64\u8bbe\u7f6e\u5c06\u9650\u5236\u751f\u4ea7\u8005\u5728\u5355\u4e2a\u8bf7\u6c42\u4e2d\u53d1\u9001\u7684\u8bb0\u5f55\u6279\u6b21\u6570\u91cf\uff0c\u4ee5\u907f\u514d\u53d1\u9001\u5de8\u5927\u7684\u8bf7\u6c42\u3002\u8fd9\u5b9e\u9645\u4e0a\u4e5f\u662f\u6700\u5927\u672a\u538b\u7f29\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u7684\u4e0a\u9650\u3002\u8bf7\u6ce8\u610f\uff0c\u670d\u52a1\u5668\u5bf9\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u6709\u81ea\u5df1\u7684\u4e0a\u9650\uff08\u5982\u679c\u542f\u7528\u4e86\u538b\u7f29\uff0c\u5219\u5728\u538b\u7f29\u540e\uff09\uff0c\u8fd9\u53ef\u80fd\u4e0e\u6b64\u4e0d\u540c\u3002 Type: int Default: 1048576 Valid Values: [0,...] Importance: medium","title":"max.request.size"},{"location":"3/#partitionerclass","text":"\u7528\u4e8e\u786e\u5b9a\u751f\u6210\u8bb0\u5f55\u65f6\u8981\u53d1\u9001\u5230\u54ea\u4e2a\u5206\u533a\u7684\u7c7b\u3002\u53ef\u7528\u9009\u9879\u6709\uff1a \u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u5206\u533a\u903b\u8f91\u3002\u8be5\u7b56\u7565\u5c06\u5c1d\u8bd5\u575a\u6301\u4e00\u4e2a\u5206\u533a\uff0c\u76f4\u5230\u81f3\u5c11\u4e3a\u8be5\u5206\u533a\u751f\u6210\u4e86batch.size\u5b57\u8282\u3002\u5b83\u9002\u7528\u4e8e\u4ee5\u4e0b\u7b56\u7565\uff1a \u5982\u679c\u672a\u6307\u5b9a\u5206\u533a\u4f46\u5b58\u5728\u5bc6\u94a5\uff0c\u5219\u6839\u636e\u5bc6\u94a5\u7684\u54c8\u5e0c\u503c\u9009\u62e9\u5206\u533a \u5982\u679c\u4e0d\u5b58\u5728\u5206\u533a\u6216\u952e\uff0c\u5219\u9009\u62e9\u5f53\u81f3\u5c11\u4e3a\u8be5\u5206\u533a\u751f\u6210batch.size\u5b57\u8282\u65f6\u66f4\u6539\u7684\u7c98\u6027\u5206\u533a\u3002 org.apache.kafka.clients.producer.RoundRobinPartitioner \uff1a\u8fd9\u79cd\u5206\u533a\u7b56\u7565\u662f\u4e00\u7cfb\u5217\u8fde\u7eed\u8bb0\u5f55\u4e2d\u7684\u6bcf\u6761\u8bb0\u5f55\u5c06\u88ab\u53d1\u9001\u5230\u4e0d\u540c\u7684\u5206\u533a\uff08\u65e0\u8bba\u662f\u5426\u63d0\u4f9b\u201ckey\u201d\uff09\uff0c\u76f4\u5230\u6211\u4eec\u7528\u5b8c\u5206\u533a\u5e76\u91cd\u65b0\u5f00\u59cb\u3002\u6ce8\u610f\uff1a\u6709\u4e00\u4e2a\u5df2\u77e5\u95ee\u9898\u4f1a\u5bfc\u81f4\u521b\u5efa\u65b0\u6279\u6b21\u65f6\u5206\u5e03\u4e0d\u5747\u5300\u3002\u8bf7\u67e5\u770b KAFKA-9965 \u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u5b9e\u73b0\u8be5 org.apache.kafka.clients.producer.Partitioner \u63a5\u53e3\u5141\u8bb8\u60a8\u63d2\u5165\u81ea\u5b9a\u4e49\u5206\u533a\u5668\u3002 Type: class Default: null Valid Values: Importance: medium","title":"partitioner.class"},{"location":"3/#partitionerignorekeys","text":"\u5f53\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u4e0d\u4f1a\u4f7f\u7528\u8bb0\u5f55\u952e\u6765\u9009\u62e9\u5206\u533a\u3002\u5982\u679c\u4e3a\u201cfalse\u201d\uff0c\u5219\u5f53\u5b58\u5728\u5bc6\u94a5\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u6839\u636e\u5bc6\u94a5\u7684\u54c8\u5e0c\u503c\u9009\u62e9\u5206\u533a\u3002\u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\uff0c\u6b64\u8bbe\u7f6e\u65e0\u6548\u3002 Type: boolean Default: false Valid Values: Importance: medium","title":"partitioner.ignore.keys"},{"location":"3/#receivebufferbytes","text":"\u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 32768\uff0832 KB\uff09 Valid Values: [-1\uff0c...] Importance: medium","title":"receive.buffer.bytes"},{"location":"3/#requesttimeoutms_1","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002\u8fd9\u5e94\u8be5\u5927\u4e8e replica.lag.time.max.ms \uff08\u4ee3\u7406\u914d\u7f6e\uff09\uff0c\u4ee5\u51cf\u5c11\u7531\u4e8e\u4e0d\u5fc5\u8981\u7684\u751f\u4ea7\u8005\u91cd\u8bd5\u800c\u5bfc\u81f4\u6d88\u606f\u91cd\u590d\u7684\u53ef\u80fd\u6027\u3002 Type: int Default: 30000 (30 seconds) Valid Values: [0,...] Importance: medium","title":"request.timeout.ms"},{"location":"3/#saslclientcallbackhandlerclass_1","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium","title":"sasl.client.callback.handler.class"},{"location":"3/#sasljaasconfig_1","text":"SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium","title":"sasl.jaas.config"},{"location":"3/#saslkerberosservicename_1","text":"Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.kerberos.service.name"},{"location":"3/#sasllogincallbackhandlerclass_1","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.callback.handler.class"},{"location":"3/#saslloginclass_1","text":"\u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.class"},{"location":"3/#saslmechanism","text":"\u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium","title":"sasl.mechanism"},{"location":"3/#sasloauthbearerjwksendpointurl_1","text":"OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.jwks.endpoint.url"},{"location":"3/#sasloauthbearertokenendpointurl_1","text":"OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.token.endpoint.url"},{"location":"3/#securityprotocol","text":"\u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium","title":"security.protocol"},{"location":"3/#sendbufferbytes","text":"\u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium","title":"send.buffer.bytes"},{"location":"3/#socketconnectionsetuptimeoutmaxms_1","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium","title":"socket.connection.setup.timeout.max.ms"},{"location":"3/#socketconnectionsetuptimeoutms_1","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium","title":"socket.connection.setup.timeout.ms"},{"location":"3/#sslenabledprotocol","text":"\u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.enabled.protocol"},{"location":"3/#sslkeystoretype_1","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.keystore.type"},{"location":"3/#sslprotocol_1","text":"\u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.protocol"},{"location":"3/#sslprovider_1","text":"\u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium","title":"ssl.provider"},{"location":"3/#ssltruststoretype_1","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.truststore.type"},{"location":"3/#acks","text":"\u751f\u4ea7\u8005\u8981\u6c42\u9886\u5bfc\u8005\u5728\u8003\u8651\u8bf7\u6c42\u5b8c\u6210\u4e4b\u524d\u6536\u5230\u7684\u786e\u8ba4\u6570\u91cf\u3002\u8fd9\u63a7\u5236\u53d1\u9001\u7684\u8bb0\u5f55\u7684\u6301\u4e45\u6027\u3002\u5141\u8bb8\u4ee5\u4e0b\u8bbe\u7f6e\uff1a acks=0 \u5982\u679c\u8bbe\u7f6e\u4e3a\u96f6\uff0c\u5219\u751f\u4ea7\u8005\u6839\u672c\u4e0d\u4f1a\u7b49\u5f85\u670d\u52a1\u5668\u7684\u4efb\u4f55\u786e\u8ba4\u3002\u8be5\u8bb0\u5f55\u5c06\u7acb\u5373\u6dfb\u52a0\u5230\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5e76\u88ab\u89c6\u4e3a\u5df2\u53d1\u9001\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u670d\u52a1\u5668\u5df2\u6536\u5230\u8bb0\u5f55\uff0c\u5e76\u4e14\u914d\u7f6e retries \u4e0d\u4f1a\u751f\u6548\uff08\u56e0\u4e3a\u5ba2\u6237\u7aef\u901a\u5e38\u4e0d\u4f1a\u77e5\u9053\u4efb\u4f55\u5931\u8d25\uff09\u3002\u4e3a\u6bcf\u4e2a\u8bb0\u5f55\u8fd4\u56de\u7684\u504f\u79fb\u91cf\u5c06\u59cb\u7ec8\u8bbe\u7f6e\u4e3a -1 \u3002 acks=1 \u8fd9\u610f\u5473\u7740\u9886\u5bfc\u8005\u4f1a\u5c06\u8bb0\u5f55\u5199\u5165\u5176\u672c\u5730\u65e5\u5fd7\uff0c\u4f46\u4f1a\u5728\u4e0d\u7b49\u5f85\u6240\u6709\u8ffd\u968f\u8005\u5b8c\u5168\u786e\u8ba4\u7684\u60c5\u51b5\u4e0b\u505a\u51fa\u54cd\u5e94\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u9886\u5bfc\u8005\u5728\u786e\u8ba4\u8bb0\u5f55\u540e\u4f46\u5728\u8ffd\u968f\u8005\u590d\u5236\u8bb0\u5f55\u4e4b\u524d\u7acb\u5373\u5931\u8d25\uff0c\u90a3\u4e48\u8bb0\u5f55\u5c06\u4e22\u5931\u3002 acks=all \u8fd9\u610f\u5473\u7740\u9886\u5bfc\u8005\u5c06\u7b49\u5f85\u5b8c\u6574\u7684\u540c\u6b65\u526f\u672c\u96c6\u786e\u8ba4\u8bb0\u5f55\u3002\u8fd9\u4fdd\u8bc1\u4e86\u53ea\u8981\u81f3\u5c11\u4e00\u4e2a\u540c\u6b65\u526f\u672c\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001\uff0c\u8bb0\u5f55\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002\u8fd9\u662f\u6700\u5f3a\u6709\u529b\u7684\u4fdd\u8bc1\u3002\u8fd9\u76f8\u5f53\u4e8e acks=-1 \u8bbe\u7f6e\u3002 \u8bf7\u6ce8\u610f\uff0c\u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42\u6b64\u914d\u7f6e\u503c\u4e3a\u201call\u201d\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002 Type: string Default: All Valid Values: [all, -1, 0, 1] Importance: low","title":"acks"},{"location":"3/#autojmxreporter_1","text":"\u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"auto.jmx.reporter"},{"location":"3/#enableidempotence","text":"\u5f53\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u786e\u4fdd\u6bcf\u6761\u6d88\u606f\u7684\u4e00\u4efd\u526f\u672c\u51c6\u786e\u5199\u5165\u6d41\u4e2d\u3002\u5982\u679c\u4e3a\u201cfalse\u201d\uff0c\u5219\u751f\u4ea7\u8005\u7531\u4e8e\u4ee3\u7406\u6545\u969c\u7b49\u539f\u56e0\u91cd\u8bd5\uff0c\u53ef\u80fd\u4f1a\u5728\u6d41\u4e2d\u5199\u5165\u91cd\u8bd5\u6d88\u606f\u7684\u91cd\u590d\u9879\u3002\u8bf7\u6ce8\u610f\uff0c\u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42 max.in.flight.requests.per.connection \u5c0f\u4e8e\u6216\u7b49\u4e8e 5\uff08\u4e3a\u4efb\u4f55\u5141\u8bb8\u7684\u503c\u4fdd\u7559\u6d88\u606f\u6392\u5e8f\uff09\u3001 retries \u5927\u4e8e 0\uff0c\u5e76\u4e14 acks \u5fc5\u987b\u4e3a\u201c\u5168\u90e8\u201d\u3002 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u51b2\u7a81\u7684\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u542f\u7528\u5e42\u7b49\u6027\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002\u5982\u679c\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\u5e76\u4e14\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\uff0c ConfigException \u5219\u4f1a\u629b\u51fa a \u3002 Type: boolean Default: true Valid Values: Importance: low","title":"enable.idempotence"},{"location":"3/#interceptorclasses","text":"\u7528\u4f5c\u62e6\u622a\u5668\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.clients.producer.ProducerInterceptor \u63a5\u53e3\u5141\u8bb8\u60a8\u5728\u5c06\u751f\u4ea7\u8005\u6536\u5230\u7684\u8bb0\u5f55\u53d1\u5e03\u5230 Kafka \u96c6\u7fa4\u4e4b\u524d\u62e6\u622a\uff08\u5e76\u53ef\u80fd\u6539\u53d8\uff09\u8fd9\u4e9b\u8bb0\u5f55\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u62e6\u622a\u5668\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low","title":"interceptor.classes"},{"location":"3/#maxinflightrequestsperconnection","text":"\u5ba2\u6237\u7aef\u5728\u963b\u585e\u4e4b\u524d\u5728\u5355\u4e2a\u8fde\u63a5\u4e0a\u53d1\u9001\u7684\u672a\u786e\u8ba4\u8bf7\u6c42\u7684\u6700\u5927\u6570\u91cf\u3002\u6ce8\u610f\uff0c\u5982\u679c\u8be5\u914d\u7f6e\u8bbe\u7f6e\u5927\u4e8e1\u4e14 enable.idempotence \u8bbe\u7f6e\u4e3afalse\uff0c\u5219\u5b58\u5728\u56e0\u91cd\u8bd5\u5bfc\u81f4\u53d1\u9001\u5931\u8d25\u540e\u6d88\u606f\u91cd\u65b0\u6392\u5e8f\u7684\u98ce\u9669\uff08\u5373\u5982\u679c\u542f\u7528\u4e86\u91cd\u8bd5\uff09\uff1b\u5982\u679c\u7981\u7528\u91cd\u8bd5\u6216 enable.idempotence \u8bbe\u7f6e\u4e3a true\uff0c\u5219\u5c06\u4fdd\u7559\u6392\u5e8f\u3002\u6b64\u5916\uff0c\u542f\u7528\u5e42\u7b49\u6027\u8981\u6c42\u6b64\u914d\u7f6e\u7684\u503c\u5c0f\u4e8e\u6216\u7b49\u4e8e 5\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u51b2\u7a81\u7684\u914d\u7f6e\u5e76\u4e14\u672a\u663e\u5f0f\u542f\u7528\u5e42\u7b49\u6027\uff0c\u5219\u5e42\u7b49\u6027\u5c06\u88ab\u7981\u7528\u3002 Type: int Default: 5 Valid Values: [1\uff0c...] Importance: low","title":"max.in.flight.requests.per.connection"},{"location":"3/#metadatamaxagems","text":"\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low","title":"metadata.max.age.ms"},{"location":"3/#metadatamaxidlems","text":"\u63a7\u5236\u751f\u4ea7\u8005\u4e3a\u7a7a\u95f2\u4e3b\u9898\u7f13\u5b58\u5143\u6570\u636e\u7684\u65f6\u95f4\u3002\u5982\u679c\u81ea\u4e0a\u6b21\u751f\u6210\u4e3b\u9898\u4ee5\u6765\u7ecf\u8fc7\u7684\u65f6\u95f4\u8d85\u8fc7\u4e86\u5143\u6570\u636e\u7a7a\u95f2\u6301\u7eed\u65f6\u95f4\uff0c\u5219\u8be5\u4e3b\u9898\u7684\u5143\u6570\u636e\u5c06\u88ab\u9057\u5fd8\uff0c\u5e76\u4e14\u4e0b\u6b21\u8bbf\u95ee\u8be5\u4e3b\u9898\u5c06\u5f3a\u5236\u6267\u884c\u5143\u6570\u636e\u83b7\u53d6\u8bf7\u6c42\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [5000\uff0c...] Importance: low","title":"metadata.max.idle.ms"},{"location":"3/#metricreporters_1","text":"\u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low","title":"metric.reporters"},{"location":"3/#metricsnumsamples_1","text":"\u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low","title":"metrics.num.samples"},{"location":"3/#metricsrecordinglevel_1","text":"\u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low","title":"metrics.recording.level"},{"location":"3/#metricssamplewindowms_1","text":"\u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"metrics.sample.window.ms"},{"location":"3/#partitioneradaptivepartitioningenable","text":"\u5f53\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u65f6\uff0c\u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u9002\u5e94\u4ee3\u7406\u6027\u80fd\u5e76\u5411\u66f4\u5feb\u4ee3\u7406\u4e0a\u6258\u7ba1\u7684\u5206\u533a\u751f\u6210\u66f4\u591a\u6d88\u606f\u3002\u5982\u679c\u4e3a\u201cfalse\u201d\uff0c\u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u7edf\u4e00\u5206\u53d1\u6d88\u606f\u3002\u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\uff0c\u6b64\u8bbe\u7f6e\u65e0\u6548 Type: boolean Default: true Valid Values: Importance: low","title":"partitioner.adaptive.partitioning.enable"},{"location":"3/#partitioneravailabilitytimeoutms","text":"\u5982\u679c\u4ee3\u7406\u5728\u4e00\u6bb5 partitioner.availability.timeout.ms \u65f6\u95f4\u5185\u65e0\u6cd5\u5904\u7406\u6765\u81ea\u5206\u533a\u7684\u751f\u4ea7\u8bf7\u6c42\uff0c\u5219\u5206\u533a\u7a0b\u5e8f\u4f1a\u5c06\u8be5\u5206\u533a\u89c6\u4e3a\u4e0d\u53ef\u7528\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u7981\u7528\u6b64\u903b\u8f91\u3002 partitioner.adaptive.partitioning.enable \u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u533a\u7a0b\u5e8f\u6216\u8bbe\u7f6e\u4e3a\u201cfalse\u201d\uff0c\u5219\u6b64\u8bbe\u7f6e\u65e0\u6548 Type: long Default: 0 Valid Values: [0,...] Importance: low","title":"partitioner.availability.timeout.ms"},{"location":"3/#reconnectbackoffmaxms","text":"\u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low","title":"reconnect.backoff.max.ms"},{"location":"3/#reconnectbackoffms","text":"\u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low","title":"reconnect.backoff.ms"},{"location":"3/#retrybackoffms","text":"\u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low","title":"retry.backoff.ms"},{"location":"3/#saslkerberoskinitcmd_1","text":"Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low","title":"sasl.kerberos.kinit.cmd"},{"location":"3/#saslkerberosmintimebeforerelogin_1","text":"\u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low","title":"sasl.kerberos.min.time.before.relogin"},{"location":"3/#saslkerberosticketrenewjitter_1","text":"\u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.jitter"},{"location":"3/#saslkerberosticketrenewwindowfactor_1","text":"\u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.window.factor"},{"location":"3/#saslloginconnecttimeoutms_1","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.connect.timeout.ms"},{"location":"3/#saslloginreadtimeoutms_1","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.read.timeout.ms"},{"location":"3/#saslloginrefreshbufferseconds_1","text":"\u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low","title":"sasl.login.refresh.buffer.seconds"},{"location":"3/#saslloginrefreshminperiodseconds_1","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low","title":"sasl.login.refresh.min.period.seconds"},{"location":"3/#saslloginrefreshwindowfactor_1","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low","title":"sasl.login.refresh.window.factor"},{"location":"3/#saslloginrefreshwindowjitter_1","text":"\u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low","title":"sasl.login.refresh.window.jitter"},{"location":"3/#saslloginretrybackoffmaxms_1","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.login.retry.backoff.max.ms"},{"location":"3/#saslloginretrybackoffms_1","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.login.retry.backoff.ms"},{"location":"3/#sasloauthbearerclockskewseconds_1","text":"\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low","title":"sasl.oauthbearer.clock.skew.seconds"},{"location":"3/#sasloauthbearerexpectedaudience_1","text":"\u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.audience"},{"location":"3/#sasloauthbearerexpectedissuer_1","text":"\u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.issuer"},{"location":"3/#sasloauthbearerjwksendpointrefreshms_1","text":"\u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.refresh.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffmaxms_1","text":"\u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffms_1","text":"\u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.ms"},{"location":"3/#sasloauthbearerscopeclaimname_1","text":"\u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low","title":"sasl.oauthbearer.scope.claim.name"},{"location":"3/#sasloauthbearersubclaimname_1","text":"\u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low","title":"sasl.oauthbearer.sub.claim.name"},{"location":"3/#securityproviders_1","text":"\u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low","title":"security.providers"},{"location":"3/#sslciphersuites_1","text":"\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low","title":"ssl.cipher.suites"},{"location":"3/#sslendpointidentificationalgorithm_1","text":"\u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low","title":"ssl.endpoint.identification.algorithm"},{"location":"3/#sslenginefactoryclass_1","text":"org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low","title":"ssl.engine.factory.class"},{"location":"3/#sslkeymanageralgorithm_1","text":"\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low","title":"ssl.keymanager.algorithm"},{"location":"3/#sslsecurerandomimplementation_1","text":"\u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low","title":"ssl.secure.random.implementation"},{"location":"3/#ssltrustmanageralgorithm_1","text":"\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low","title":"ssl.trustmanager.algorithm"},{"location":"3/#transactiontimeoutms","text":"\u5728\u534f\u8c03\u5668\u4e3b\u52a8\u4e2d\u6b62\u4e8b\u52a1\u4e4b\u524d\uff0c\u4e8b\u52a1\u4fdd\u6301\u6253\u5f00\u72b6\u6001\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4e8b\u52a1\u7684\u5f00\u59cb\u65f6\u95f4\u662f\u5728\u5c06\u7b2c\u4e00\u4e2a\u5206\u533a\u6dfb\u52a0\u5230\u5176\u4e2d\u65f6\u8bbe\u7f6e\u7684\u3002\u5982\u679c\u8be5\u503c\u5927\u4e8e transaction.max.timeout.ms \u4ee3\u7406\u4e2d\u7684\u8bbe\u7f6e\uff0c\u8bf7\u6c42\u5c06\u5931\u8d25\u5e76\u51fa\u73b0 InvalidTxnTimeoutException \u9519\u8bef\u3002 Type: int Default: 60000 (1 minute) Valid Values: Importance: low","title":"transaction.timeout.ms"},{"location":"3/#transactionalid","text":"\u7528\u4e8e\u4e8b\u52a1\u4ea4\u4ed8\u7684 TransactionalId\u3002\u8fd9\u4f7f\u5f97\u8de8\u591a\u4e2a\u751f\u4ea7\u8005\u4f1a\u8bdd\u7684\u53ef\u9760\u6027\u8bed\u4e49\u6210\u4e3a\u53ef\u80fd\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u4fdd\u8bc1\u4f7f\u7528\u76f8\u540c TransactionalId \u7684\u4e8b\u52a1\u5728\u5f00\u59cb\u4efb\u4f55\u65b0\u4e8b\u52a1\u4e4b\u524d\u5df2\u5b8c\u6210\u3002\u5982\u679c\u672a\u63d0\u4f9b TransactionalId\uff0c\u5219\u751f\u4ea7\u8005\u4ec5\u9650\u4e8e\u5e42\u7b49\u4f20\u9012\u3002\u5982\u679c\u914d\u7f6e\u4e86 TransactionalId\uff0c enable.idempotence \u5219\u9690\u542b\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6ca1\u6709\u914d\u7f6eTransactionId\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u80fd\u4f7f\u7528\u4e8b\u52a1\u3002\u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e8b\u52a1\u9700\u8981\u81f3\u5c11\u5305\u542b\u4e09\u4e2a\u4ee3\u7406\u7684\u96c6\u7fa4\uff0c\u8fd9\u662f\u751f\u4ea7\u73af\u5883\u7684\u63a8\u8350\u8bbe\u7f6e\uff1b\u5bf9\u4e8e\u5f00\u53d1\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4ee3\u7406\u8bbe\u7f6e\u6765\u66f4\u6539\u6b64\u8bbe\u7f6e transaction.state.log.replication.factor \u3002 Type: string Default: null Valid Values: non-null string Importance: low","title":"transactional.id"},{"location":"3/#34","text":"\u4ee5\u4e0b\u662f\u6d88\u8d39\u8005\u7684\u914d\u7f6e\uff1a","title":"3.4 \u6d88\u8d39\u8005\u914d\u7f6e"},{"location":"3/#keydeserializer","text":"\u5b9e\u73b0\u8be5 org.apache.kafka.common.serialization.Deserializer \u63a5\u53e3\u7684\u952e\u7684\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high","title":"key.deserializer"},{"location":"3/#valuedeserializer","text":"\u5b9e\u73b0 org.apache.kafka.common.serialization.Deserializer \u63a5\u53e3\u7684\u503c\u7684\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 Type: class Default: Valid Values: Importance: high","title":"value.deserializer"},{"location":"3/#bootstrapservers_1","text":"\u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: \"\" Valid Values: non-null string Importance: high","title":"bootstrap.servers"},{"location":"3/#fetchminbytes","text":"\u670d\u52a1\u5668\u5e94\u4e3a\u83b7\u53d6\u8bf7\u6c42\u8fd4\u56de\u7684\u6700\u5c0f\u6570\u636e\u91cf\u3002\u5982\u679c\u53ef\u7528\u6570\u636e\u4e0d\u8db3\uff0c\u8bf7\u6c42\u5c06\u7b49\u5f85\u79ef\u7d2f\u8db3\u591f\u591a\u7684\u6570\u636e\uff0c\u7136\u540e\u518d\u7b54\u590d\u8bf7\u6c42\u3002\u9ed8\u8ba4\u8bbe\u7f6e 1 \u5b57\u8282\u610f\u5473\u7740\uff0c\u53ea\u8981\u6709\u90a3\u4e48\u591a\u5b57\u8282\u7684\u6570\u636e\u53ef\u7528\uff0c\u6216\u8005\u83b7\u53d6\u8bf7\u6c42\u5728\u7b49\u5f85\u6570\u636e\u5230\u8fbe\u65f6\u8d85\u65f6\uff0c\u5c31\u4f1a\u7acb\u5373\u5e94\u7b54\u83b7\u53d6\u8bf7\u6c42\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u8f83\u5927\u7684\u503c\u5c06\u5bfc\u81f4\u670d\u52a1\u5668\u7b49\u5f85\u5927\u91cf\u6570\u636e\u7684\u79ef\u7d2f\uff0c\u8fd9\u53ef\u4ee5\u7a0d\u5fae\u63d0\u9ad8\u670d\u52a1\u5668\u541e\u5410\u91cf\uff0c\u4f46\u4f1a\u5e26\u6765\u4e00\u4e9b\u989d\u5916\u7684\u5ef6\u8fdf\u3002 Type: int Default: 1 Valid Values: [0,...] Importance: high","title":"fetch.min.bytes"},{"location":"3/#groupid","text":"\u6807\u8bc6\u8be5\u6d88\u8d39\u8005\u6240\u5c5e\u7684\u6d88\u8d39\u8005\u7ec4\u7684\u552f\u4e00\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6d88\u8d39\u8005\u4f7f\u7528\u7ec4\u7ba1\u7406\u529f\u80fd subscribe(topic) \u6216\u57fa\u4e8e Kafka \u7684\u504f\u79fb\u91cf\u7ba1\u7406\u7b56\u7565\uff0c\u5219\u9700\u8981\u6b64\u5c5e\u6027\u3002 Type: string Default: null Valid Values: Importance: high","title":"group.id"},{"location":"3/#heartbeatintervalms","text":"\u4f7f\u7528 Kafka \u7684\u7ec4\u7ba1\u7406\u8bbe\u65bd\u65f6\u5411\u6d88\u8d39\u8005\u534f\u8c03\u5668\u53d1\u51fa\u5fc3\u8df3\u7684\u9884\u671f\u65f6\u95f4\u95f4\u9694\u3002\u5fc3\u8df3\u7528\u4e8e\u786e\u4fdd\u6d88\u8d39\u8005\u7684\u4f1a\u8bdd\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001\uff0c\u5e76\u5728\u65b0\u6d88\u8d39\u8005\u52a0\u5165\u6216\u79bb\u5f00\u7ec4\u65f6\u4fc3\u8fdb\u91cd\u65b0\u5e73\u8861\u3002\u8be5\u503c\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u4f4e\u4e8e session.timeout.ms \uff0c\u4f46\u901a\u5e38\u4e0d\u5e94\u9ad8\u4e8e\u8be5\u503c\u7684 1/3\u3002\u5b83\u53ef\u4ee5\u8c03\u6574\u5f97\u66f4\u4f4e\uff0c\u4ee5\u63a7\u5236\u6b63\u5e38\u91cd\u65b0\u5e73\u8861\u7684\u9884\u671f\u65f6\u95f4\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: high","title":"heartbeat.interval.ms"},{"location":"3/#maxpartitionfetchbytes","text":"\u670d\u52a1\u5668\u5c06\u8fd4\u56de\u7684\u6bcf\u4e2a\u5206\u533a\u7684\u6700\u5927\u6570\u636e\u91cf\u3002\u8bb0\u5f55\u7531\u6d88\u8d39\u8005\u6279\u91cf\u83b7\u53d6\u3002\u5982\u679c\u63d0\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u6279\u6b21\u5927\u4e8e\u6b64\u9650\u5236\uff0c\u8be5\u6279\u6b21\u4ecd\u5c06\u88ab\u8fd4\u56de\u4ee5\u786e\u4fdd\u6d88\u8d39\u8005\u53ef\u4ee5\u53d6\u5f97\u8fdb\u5c55\u3002\u4ee3\u7406\u63a5\u53d7\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u662f\u901a\u8fc7 message.max.bytes \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u6216 max.message.bytes \uff08\u4e3b\u9898\u914d\u7f6e\uff09\u5b9a\u4e49\u7684\u3002\u8bf7\u53c2\u9605 fetch.max.bytes \u4ee5\u9650\u5236\u6d88\u8d39\u8005\u8bf7\u6c42\u5927\u5c0f\u3002 Type: int Default: 1048576 (1 mebibyte) Valid Values: [0,...] Importance: high","title":"max.partition.fetch.bytes"},{"location":"3/#sessiontimeoutms","text":"\u4f7f\u7528 Kafka \u7684\u7ec4\u7ba1\u7406\u5de5\u5177\u65f6\u7528\u4e8e\u68c0\u6d4b\u5ba2\u6237\u7aef\u6545\u969c\u7684\u8d85\u65f6\u3002\u5ba2\u6237\u7aef\u5b9a\u671f\u53d1\u9001\u5fc3\u8df3\u4ee5\u5411\u4ee3\u7406\u8868\u660e\u5176\u6d3b\u8dc3\u5ea6\u3002\u5982\u679c\u5728\u6b64\u4f1a\u8bdd\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u4ee3\u7406\u6ca1\u6709\u6536\u5230\u5fc3\u8df3\uff0c\u5219\u4ee3\u7406\u5c06\u4ece\u7ec4\u4e2d\u5220\u9664\u8be5\u5ba2\u6237\u7aef\u5e76\u542f\u52a8\u91cd\u65b0\u5e73\u8861\u3002\u8bf7\u6ce8\u610f\uff0c\u8be5\u503c\u5fc5\u987b\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d group.min.session.timeout.ms \u548c\u6240\u914d\u7f6e\u7684\u5141\u8bb8\u8303\u56f4\u5185 group.max.session.timeout.ms \u3002 Type: int Default: 45000 (45 seconds) Valid Values: Importance: high","title":"session.timeout.ms"},{"location":"3/#sslkeypassword_2","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.key.password"},{"location":"3/#sslkeystorecertificatechain_2","text":"\u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.certificate.chain"},{"location":"3/#sslkeystorekey_2","text":"\u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.key"},{"location":"3/#sslkeystorelocation_2","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.keystore.location"},{"location":"3/#sslkeystorepassword_2","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.password"},{"location":"3/#ssltruststorecertificate_1","text":"\u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.certificate"},{"location":"3/#ssltruststorelocation_2","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.truststore.location"},{"location":"3/#ssltruststorepassword_2","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.password"},{"location":"3/#allowautocreatetopics","text":"\u8ba2\u9605\u6216\u5206\u914d\u4e3b\u9898\u65f6\u5141\u8bb8\u5728\u4ee3\u7406\u4e0a\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u3002\u4ec5\u5f53\u4ee3\u7406\u5141\u8bb8\u4f7f\u7528\u201cauto.create.topics.enable\u201d\u4ee3\u7406\u914d\u7f6e\u65f6\uff0c\u624d\u4f1a\u81ea\u52a8\u521b\u5efa\u8ba2\u9605\u7684\u4e3b\u9898\u3002\u4f7f\u7528\u65e9\u4e8e 0.11.0 \u7684\u4ee3\u7406\u65f6\uff0c\u6b64\u914d\u7f6e\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u201cfalse\u201d Type: boolean Default: true Valid Values: Importance: medium","title":"allow.auto.create.topics"},{"location":"3/#autooffsetreset","text":"\u5f53 Kafka \u4e2d\u6ca1\u6709\u521d\u59cb\u504f\u79fb\u91cf\u6216\u8005\u5f53\u524d\u504f\u79fb\u91cf\u5728\u670d\u52a1\u5668\u4e0a\u4e0d\u518d\u5b58\u5728\u65f6\uff08\u4f8b\u5982\u56e0\u4e3a\u8be5\u6570\u636e\u5df2\u88ab\u5220\u9664\uff09\u8be5\u600e\u4e48\u529e\uff1a \u6700\u65e9\uff1a\u81ea\u52a8\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65e9\u7684\u504f\u79fb\u91cf \u6700\u65b0\uff1a\u81ea\u52a8\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65b0\u504f\u79fb\u91cf none\uff1a\u5982\u679c\u6ca1\u6709\u627e\u5230\u6d88\u8d39\u8005\u7ec4\u7684\u5148\u524d\u504f\u79fb\u91cf\uff0c\u5219\u5411\u6d88\u8d39\u8005\u629b\u51fa\u5f02\u5e38 \u5176\u4ed6\u4efb\u4f55\u4e8b\u60c5\uff1a\u5411\u6d88\u8d39\u8005\u629b\u51fa\u5f02\u5e38\u3002 Type: string Default: latest Valid Values: [latest, earliest, none] Importance: medium","title":"auto.offset.reset"},{"location":"3/#clientdnslookup_1","text":"\u63a7\u5236\u5ba2\u6237\u7aef\u5982\u4f55\u4f7f\u7528 DNS \u67e5\u627e\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a use_all_dns_ips \uff0c\u5219\u6309\u987a\u5e8f\u8fde\u63a5\u6bcf\u4e2a\u8fd4\u56de\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u5efa\u7acb\u6210\u529f\u8fde\u63a5\u3002\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u5c06\u4f7f\u7528\u4e0b\u4e00\u4e2a IP\u3002\u4e00\u65e6\u6240\u6709 IP \u4f7f\u7528\u4e00\u6b21\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u518d\u6b21\u4ece\u4e3b\u673a\u540d\u89e3\u6790 IP\uff08\u4f46\u662f JVM \u548c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u7f13\u5b58 DNS \u540d\u79f0\u67e5\u627e\uff09\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a resolve_canonical_bootstrap_servers_only \uff0c\u5219\u5c06\u6bcf\u4e2a\u5f15\u5bfc\u5730\u5740\u89e3\u6790\u4e3a\u89c4\u8303\u540d\u79f0\u5217\u8868\u3002\u5728\u5f15\u5bfc\u9636\u6bb5\u4e4b\u540e\uff0c\u5176\u884c\u4e3a\u4e0e \u76f8\u540c use_all_dns_ips \u3002 Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips\uff0cresolve_canonical_bootstrap_servers_only] Importance: medium","title":"client.dns.lookup"},{"location":"3/#connectionsmaxidlems_2","text":"\u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 540000 (9 minutes) Valid Values: Importance: medium","title":"connections.max.idle.ms"},{"location":"3/#defaultapitimeoutms","text":"\u6307\u5b9a\u5ba2\u6237\u7aef API \u7684\u8d85\u65f6\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u6b64\u914d\u7f6e\u7528\u4f5c\u6240\u6709\u672a\u6307\u5b9a timeout \u53c2\u6570\u7684\u5ba2\u6237\u7aef\u64cd\u4f5c\u7684\u9ed8\u8ba4\u8d85\u65f6\u3002 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: medium","title":"default.api.timeout.ms"},{"location":"3/#enableautocommit","text":"\u5982\u679c\u4e3a true\uff0c\u6d88\u8d39\u8005\u7684\u504f\u79fb\u91cf\u5c06\u5728\u540e\u53f0\u5b9a\u671f\u63d0\u4ea4\u3002 Type: boolean Default: true Valid Values: Importance: medium","title":"enable.auto.commit"},{"location":"3/#excludeinternaltopic","text":"\u662f\u5426\u5e94\u4ece\u8ba2\u9605\u4e2d\u6392\u9664\u4e0e\u8ba2\u9605\u6a21\u5f0f\u5339\u914d\u7684\u5185\u90e8\u4e3b\u9898\u3002\u59cb\u7ec8\u53ef\u4ee5\u663e\u5f0f\u8ba2\u9605\u5185\u90e8\u4e3b\u9898\u3002 Type: boolean Default: true Valid Values: Importance: medium","title":"exclude.internal.topic"},{"location":"3/#fetchmaxbytes_1","text":"\u670d\u52a1\u5668\u5e94\u4e3a\u83b7\u53d6\u8bf7\u6c42\u8fd4\u56de\u7684\u6700\u5927\u6570\u636e\u91cf\u3002\u8bb0\u5f55\u7531\u6d88\u8d39\u8005\u6279\u91cf\u83b7\u53d6\uff0c\u5982\u679c\u83b7\u53d6\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5206\u533a\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u6279\u6b21\u5927\u4e8e\u8be5\u503c\uff0c\u4ecd\u7136\u4f1a\u8fd4\u56de\u8be5\u8bb0\u5f55\u6279\u6b21\u4ee5\u786e\u4fdd\u6d88\u8d39\u8005\u80fd\u591f\u53d6\u5f97\u8fdb\u5c55\u3002\u56e0\u6b64\uff0c\u8fd9\u4e0d\u662f\u7edd\u5bf9\u6700\u5927\u503c\u3002\u4ee3\u7406\u63a5\u53d7\u7684\u6700\u5927\u8bb0\u5f55\u6279\u91cf\u5927\u5c0f\u662f\u901a\u8fc7 message.max.bytes \uff08\u4ee3\u7406\u914d\u7f6e\uff09\u6216 max.message.bytes \uff08\u4e3b\u9898\u914d\u7f6e\uff09\u5b9a\u4e49\u7684\u3002\u8bf7\u6ce8\u610f\uff0c\u6d88\u8d39\u8005\u5e76\u884c\u6267\u884c\u591a\u4e2a\u63d0\u53d6\u3002 Type: int Default: 52428800 (50 mebibytes) Valid Values: [0,...] Importance: medium","title":"fetch.max.bytes"},{"location":"3/#groupinstanceid","text":"\u6700\u7ec8\u7528\u6237\u63d0\u4f9b\u7684\u6d88\u8d39\u8005\u5b9e\u4f8b\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002\u53ea\u5141\u8bb8\u975e\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u8bbe\u7f6e\uff0c\u6d88\u8d39\u8005\u5c06\u88ab\u89c6\u4e3a\u9759\u6001\u6210\u5458\uff0c\u8fd9\u610f\u5473\u7740\u6d88\u8d39\u8005\u7ec4\u4e2d\u4efb\u4f55\u65f6\u5019\u53ea\u5141\u8bb8\u6709\u4e00\u4e2a\u5177\u6709\u6b64 ID \u7684\u5b9e\u4f8b\u3002\u8fd9\u53ef\u4ee5\u4e0e\u8f83\u5927\u7684\u4f1a\u8bdd\u8d85\u65f6\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u907f\u514d\u7531\u4e8e\u6682\u65f6\u4e0d\u53ef\u7528\uff08\u4f8b\u5982\u8fdb\u7a0b\u91cd\u65b0\u542f\u52a8\uff09\u800c\u5bfc\u81f4\u7684\u7ec4\u91cd\u65b0\u5e73\u8861\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u6d88\u8d39\u8005\u5c06\u4f5c\u4e3a\u52a8\u6001\u6210\u5458\u52a0\u5165\u8be5\u7ec4\uff0c\u8fd9\u662f\u4f20\u7edf\u884c\u4e3a\u3002 Type: string Default: null Valid Values: non-null string Importance: medium","title":"group.instance.id"},{"location":"3/#isolationlevel","text":"\u63a7\u5236\u5982\u4f55\u8bfb\u53d6\u4ee5\u4e8b\u52a1\u65b9\u5f0f\u5199\u5165\u7684\u6d88\u606f\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a read_committed \uff0cconsumer.poll() \u5c06\u4ec5\u8fd4\u56de\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u6d88\u606f\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a read_uncommitted (the default), consumer.poll() will return all messages, even transactional messages which have been aborted. Non-transactional messages will be returned unconditionally in either mode. Messages will always be returned in offset order. Hence, in read_committed mode, consumer.poll() will only return messages up to the last stable offset (LSO), which is the one less than the offset of the first open transaction. In particular any messages appearing after messages belonging to ongoing transactions will be withheld until the relevant transaction has been completed. As a result, read_committed consumers will not be able to read up to the high watermark when there are in flight transactions. Further, when in read_committed the seekToEnd method will return the LSO Type: string Default: read_uncommitted Valid Values: [read_committed, read_uncommitted] Importance: medium","title":"isolation.level"},{"location":"3/#maxpollintervalms","text":"\u4f7f\u7528\u6d88\u8d39\u8005\u7ec4\u7ba1\u7406\u65f6\uff0c\u8c03\u7528 poll() \u4e4b\u95f4\u7684\u6700\u5927\u5ef6\u8fdf\u3002\u8fd9\u5bf9\u6d88\u8d39\u8005\u5728\u83b7\u53d6\u66f4\u591a\u8bb0\u5f55\u4e4b\u524d\u53ef\u4ee5\u7a7a\u95f2\u7684\u65f6\u95f4\u8bbe\u7f6e\u4e86\u4e0a\u9650\u3002\u5982\u679c\u5728\u6b64\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u672a\u8c03\u7528 poll()\uff0c\u5219\u6d88\u8d39\u8005\u5c06\u88ab\u89c6\u4e3a\u5931\u8d25\uff0c\u5e76\u4e14\u7ec4\u5c06\u91cd\u65b0\u5e73\u8861\uff0c\u4ee5\u4fbf\u5c06\u5206\u533a\u91cd\u65b0\u5206\u914d\u7ed9\u53e6\u4e00\u4e2a\u6210\u5458\u3002\u5bf9\u4e8e\u4f7f\u7528\u975e\u7a7a\u7684\u6d88\u8d39\u8005 group.instance.id \u8fbe\u5230\u6b64\u8d85\u65f6\uff0c\u5206\u533a\u4e0d\u4f1a\u7acb\u5373\u91cd\u65b0\u5206\u914d\u3002\u76f8\u53cd\uff0c\u6d88\u8d39\u8005\u5c06\u505c\u6b62\u53d1\u9001\u5fc3\u8df3\uff0c\u5e76\u4e14\u5206\u533a\u5c06\u5728 \u8fc7\u671f\u540e\u91cd\u65b0\u5206\u914d session.timeout.ms \u3002\u8fd9\u53cd\u6620\u4e86\u5df2\u5173\u95ed\u7684\u9759\u6001\u6d88\u8d39\u8005\u7684\u884c\u4e3a\u3002 Type: int Default: 300000 (5 minutes) Valid Values: [1\uff0c...] Importance: medium","title":"max.poll.interval.ms"},{"location":"3/#maxpollrecords","text":"\u5355\u6b21\u8c03\u7528 poll() \u8fd4\u56de\u7684\u6700\u5927\u8bb0\u5f55\u6570\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9 max.poll.records \u4e0d\u4f1a\u5f71\u54cd\u5e95\u5c42\u7684\u83b7\u53d6\u884c\u4e3a\u3002\u6d88\u8d39\u8005\u5c06\u7f13\u5b58\u6bcf\u4e2a\u83b7\u53d6\u8bf7\u6c42\u7684\u8bb0\u5f55\uff0c\u5e76\u4ece\u6bcf\u6b21\u8f6e\u8be2\u4e2d\u589e\u91cf\u8fd4\u56de\u5b83\u4eec\u3002 Type: int Default: 500 Valid Values: [1\uff0c...] Importance: medium","title":"max.poll.records"},{"location":"3/#partitionassignmentstrategy","text":"\u6309\u4f18\u5148\u987a\u5e8f\u6392\u5e8f\u7684\u7c7b\u540d\u79f0\u6216\u7c7b\u7c7b\u578b\u5217\u8868\uff0c\u652f\u6301\u5206\u533a\u5206\u914d\u7b56\u7565\uff0c\u5f53\u4f7f\u7528\u7ec4\u7ba1\u7406\u65f6\uff0c\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u8fd9\u4e9b\u7b56\u7565\u5728\u6d88\u8d39\u8005\u5b9e\u4f8b\u4e4b\u95f4\u5206\u914d\u5206\u533a\u6240\u6709\u6743\u3002\u53ef\u7528\u9009\u9879\u6709\uff1a org.apache.kafka.clients.consumer.RangeAssignor \uff1a\u6309\u4e3b\u9898\u5206\u914d\u5206\u533a\u3002 org.apache.kafka.clients.consumer.RoundRobinAssignor \uff1a\u4ee5\u5faa\u73af\u65b9\u5f0f\u5c06\u5206\u533a\u5206\u914d\u7ed9\u6d88\u8d39\u8005\u3002 org.apache.kafka.clients.consumer.StickyAssignor \uff1a\u4fdd\u8bc1\u5206\u914d\u6700\u5927\u7a0b\u5ea6\u5730\u5e73\u8861\uff0c\u540c\u65f6\u4fdd\u7559\u5c3d\u53ef\u80fd\u591a\u7684\u73b0\u6709\u5206\u533a\u5206\u914d\u3002 org.apache.kafka.clients.consumer.CooperativeStickyAssignor \uff1a\u9075\u5faa\u76f8\u540c\u7684 StickyAssignor \u903b\u8f91\uff0c\u4f46\u5141\u8bb8\u5408\u4f5c\u91cd\u65b0\u5e73\u8861\u3002 \u9ed8\u8ba4\u5206\u914d\u5668\u662f [RangeAssignor, CooperativeStickyAssignor]\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u4f7f\u7528 RangeAssignor\uff0c\u4f46\u5141\u8bb8\u5347\u7ea7\u5230 CooperativeStickyAssignor\uff0c\u53ea\u9700\u4e00\u6b21\u6eda\u52a8\u5f39\u8df3\u5373\u53ef\u4ece\u5217\u8868\u4e2d\u5220\u9664 RangeAssignor\u3002 \u5b9e\u73b0\u8be5 org.apache.kafka.clients.consumer.ConsumerPartitionAssignor \u63a5\u53e3\u5141\u8bb8\u60a8\u63d2\u5165\u81ea\u5b9a\u4e49\u5206\u914d\u7b56\u7565\u3002 Type: list Default: class org.apache.kafka.clients.consumer.RangeAssignor,class org.apache.kafka.clients.consumer.CooperativeStickyAssignor Valid Values: non-null string Importance: medium","title":"partition.assignment.strategy"},{"location":"3/#receivebufferbytes_1","text":"\u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 65536 (64 kibibytes) Valid Values: [-1\uff0c...] Importance: medium","title":"receive.buffer.bytes"},{"location":"3/#requesttimeoutms_2","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 30000 (30 seconds) Valid Values: [0,...] Importance: medium","title":"request.timeout.ms"},{"location":"3/#saslclientcallbackhandlerclass_2","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium","title":"sasl.client.callback.handler.class"},{"location":"3/#sasljaasconfig_2","text":"SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium","title":"sasl.jaas.config"},{"location":"3/#saslkerberosservicename_2","text":"Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.kerberos.service.name"},{"location":"3/#sasllogincallbackhandlerclass_2","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.callback.handler.class"},{"location":"3/#saslloginclass_2","text":"\u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.class"},{"location":"3/#saslmechanism_1","text":"\u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium","title":"sasl.mechanism"},{"location":"3/#sasloauthbearerjwksendpointurl_2","text":"OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.jwks.endpoint.url"},{"location":"3/#sasloauthbearertokenendpointurl_2","text":"OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.token.endpoint.url"},{"location":"3/#securityprotocol_1","text":"\u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium","title":"security.protocol"},{"location":"3/#sendbufferbytes_1","text":"\u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium","title":"send.buffer.bytes"},{"location":"3/#socketconnectionsetuptimeoutmaxms_2","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium","title":"socket.connection.setup.timeout.max.ms"},{"location":"3/#socketconnectionsetuptimeoutms_2","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium","title":"socket.connection.setup.timeout.ms"},{"location":"3/#sslenabledprotocol_1","text":"\u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.enabled.protocol"},{"location":"3/#sslkeystoretype_2","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.keystore.type"},{"location":"3/#sslprotocol_2","text":"\u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.protocol"},{"location":"3/#sslprovider_2","text":"\u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium","title":"ssl.provider"},{"location":"3/#ssltruststoretype_2","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.truststore.type"},{"location":"3/#autocommitintervalms","text":"enable.auto.commit \u5982\u679c\u8bbe\u7f6e\u4e3a\uff0c\u5219\u6d88\u8d39\u8005\u504f\u79fb\u91cf\u81ea\u52a8\u63d0\u4ea4\u5230 Kafka \u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 true \u3002 Type: int Default: 5000 (5 seconds) Valid Values: [0,...] Importance: low","title":"auto.commit.interval.ms"},{"location":"3/#autojmxreporter_2","text":"\u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"auto.jmx.reporter"},{"location":"3/#checkcrcs","text":"\u81ea\u52a8\u68c0\u67e5\u6d88\u8d39\u8bb0\u5f55\u7684CRC32\u3002\u8fd9\u53ef\u786e\u4fdd\u6d88\u606f\u4e0d\u4f1a\u53d1\u751f\u5728\u7ebf\u6216\u78c1\u76d8\u635f\u574f\u3002\u6b64\u68c0\u67e5\u4f1a\u589e\u52a0\u4e00\u4e9b\u5f00\u9500\uff0c\u56e0\u6b64\u5728\u5bfb\u6c42\u6781\u7aef\u6027\u80fd\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u7981\u7528\u5b83\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"check.crcs"},{"location":"3/#clientid_1","text":"\u53d1\u51fa\u8bf7\u6c42\u65f6\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u7684 id \u5b57\u7b26\u4e32\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u901a\u8fc7\u5141\u8bb8\u5728\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u5305\u542b\u903b\u8f91\u5e94\u7528\u7a0b\u5e8f\u540d\u79f0\uff0c\u80fd\u591f\u8ddf\u8e2a IP/\u7aef\u53e3\u4e4b\u5916\u7684\u8bf7\u6c42\u6e90\u3002 Type: string Default: \"\" Valid Values: Importance: low","title":"client.id"},{"location":"3/#clientrack","text":"\u8be5\u5ba2\u6237\u7aef\u7684\u673a\u67b6\u6807\u8bc6\u7b26\u3002\u8fd9\u53ef\u4ee5\u662f\u6307\u793a\u8be5\u5ba2\u6237\u7aef\u7269\u7406\u4f4d\u7f6e\u7684\u4efb\u4f55\u5b57\u7b26\u4e32\u503c\u3002\u5b83\u4e0e\u4ee3\u7406\u914d\u7f6e\u201cbroker.rack\u201d\u76f8\u5bf9\u5e94 Type: string Default: \"\" Valid Values: Importance: low","title":"client..rack"},{"location":"3/#fetchmaxwaitms","text":"\u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u7acb\u5373\u6ee1\u8db3 fetch.min.bytes \u7ed9\u51fa\u7684\u8981\u6c42\uff0c\u5219\u670d\u52a1\u5668\u5728\u5e94\u7b54\u63d0\u53d6\u8bf7\u6c42\u4e4b\u524d\u5c06\u963b\u585e\u7684\u6700\u957f\u65f6\u95f4\u3002 Type: int Default: 500 Valid Values: [0,...] Importance: low","title":"fetch.max.wait.ms"},{"location":"3/#interceptorclasses_1","text":"\u7528\u4f5c\u62e6\u622a\u5668\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.clients.consumer.ConsumerInterceptor \u63a5\u53e3\u5141\u8bb8\u60a8\u62e6\u622a\uff08\u5e76\u53ef\u80fd\u6539\u53d8\uff09\u6d88\u8d39\u8005\u6536\u5230\u7684\u8bb0\u5f55\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u62e6\u622a\u5668\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low","title":"interceptor.classes"},{"location":"3/#metadatamaxagems_1","text":"\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low","title":"metadata.max.age.ms"},{"location":"3/#metricreporters_2","text":"\u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: non-null string Importance: low","title":"metric.reporters"},{"location":"3/#metricsnumsamples_2","text":"\u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low","title":"metrics.num.samples"},{"location":"3/#metricsrecordinglevel_2","text":"\u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low","title":"metrics.recording.level"},{"location":"3/#metricssamplewindowms_2","text":"\u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"metrics.sample.window.ms"},{"location":"3/#reconnectbackoffmaxms_1","text":"\u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low","title":"reconnect.backoff.max.ms"},{"location":"3/#reconnectbackoffms_1","text":"\u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low","title":"reconnect.backoff.ms"},{"location":"3/#retrybackoffms_1","text":"\u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low","title":"retry.backoff.ms"},{"location":"3/#saslkerberoskinitcmd_2","text":"Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low","title":"sasl.kerberos.kinit.cmd"},{"location":"3/#saslkerberosmintimebeforerelogin_2","text":"\u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low","title":"sasl.kerberos.min.time.before.relogin"},{"location":"3/#saslkerberosticketrenewjitter_2","text":"\u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.jitter"},{"location":"3/#saslkerberosticketrenewwindowfactor_2","text":"\u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.window.factor"},{"location":"3/#saslloginconnecttimeoutms_2","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.connect.timeout.ms"},{"location":"3/#saslloginreadtimeoutms_2","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.read.timeout.ms"},{"location":"3/#saslloginrefreshbufferseconds_2","text":"\u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low","title":"sasl.login.refresh.buffer.seconds"},{"location":"3/#saslloginrefreshminperiodseconds_2","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low","title":"sasl.login.refresh.min.period.seconds"},{"location":"3/#saslloginrefreshwindowfactor_2","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low","title":"sasl.login.refresh.window.factor"},{"location":"3/#saslloginrefreshwindowjitter_2","text":"\u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low","title":"sasl.login.refresh.window.jitter"},{"location":"3/#saslloginretrybackoffmaxms_2","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.login.retry.backoff.max.ms"},{"location":"3/#saslloginretrybackoffms_2","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.login.retry.backoff.ms"},{"location":"3/#sasloauthbearerclockskewseconds_2","text":"\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low","title":"sasl.oauthbearer.clock.skew.seconds"},{"location":"3/#sasloauthbearerexpectedaudience_2","text":"\u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.audience"},{"location":"3/#sasloauthbearerexpectedissuer_2","text":"\u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.issuer"},{"location":"3/#sasloauthbearerjwksendpointrefreshms_2","text":"\u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.refresh.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffmaxms_2","text":"\u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffms_2","text":"\u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.ms"},{"location":"3/#sasloauthbearerscopeclaimname_2","text":"\u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low","title":"sasl.oauthbearer.scope.claim.name"},{"location":"3/#sasloauthbearersubclaimname_2","text":"\u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low","title":"sasl.oauthbearer.sub.claim.name"},{"location":"3/#securityproviders_2","text":"\u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low","title":"security.providers"},{"location":"3/#sslciphersuites_2","text":"\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low","title":"ssl.cipher.suites"},{"location":"3/#sslendpointidentificationalgorithm_2","text":"\u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low","title":"ssl.endpoint.identification.algorithm"},{"location":"3/#sslenginefactoryclass_2","text":"org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low","title":"ssl.engine.factory.class"},{"location":"3/#sslkeymanageralgorithm_2","text":"\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low","title":"ssl.keymanager.algorithm"},{"location":"3/#sslsecurerandomimplementation_2","text":"\u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low","title":"ssl.secure.random.implementation"},{"location":"3/#ssltrustmanageralgorithm_2","text":"\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low","title":"ssl.trustmanager.algorithm"},{"location":"3/#35-kafka","text":"\u4ee5\u4e0b\u662f Kafka Connect \u6846\u67b6\u7684\u914d\u7f6e\u3002","title":"3.5 Kafka\u8fde\u63a5\u914d\u7f6e"},{"location":"3/#configstoragetopic","text":"\u5b58\u50a8\u8fde\u63a5\u5668\u914d\u7f6e\u7684 Kafka \u4e3b\u9898\u7684\u540d\u79f0 Type: string Default: Valid Values: Importance: high","title":"config.storage.topic"},{"location":"3/#groupid_1","text":"\u6807\u8bc6\u8be5\u5de5\u4f5c\u7ebf\u7a0b\u6240\u5c5e\u7684 Connect \u96c6\u7fa4\u7ec4\u7684\u552f\u4e00\u5b57\u7b26\u4e32\u3002 Type: string Default: Valid Values: Importance: high","title":"group.id"},{"location":"3/#keyconverter","text":"Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: Valid Values: Importance: high","title":"key.converter"},{"location":"3/#offsetsstoragetopic","text":"\u5b58\u50a8\u6e90\u8fde\u63a5\u5668\u504f\u79fb\u91cf\u7684 Kafka \u4e3b\u9898\u7684\u540d\u79f0 Type: string Default: Valid Values: Importance: high","title":"offsets.storage.topic"},{"location":"3/#statusstoragetopic","text":"\u5b58\u50a8\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u72b6\u6001\u7684 Kafka \u4e3b\u9898\u7684\u540d\u79f0 Type: string Default: Valid Values: Importance: high","title":"status.storage.topic"},{"location":"3/#valueconverter","text":"Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: Valid Values: Importance: high","title":"value.converter"},{"location":"3/#bootstrapservers_2","text":"\u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: localhost:9092 Valid Values: Importance: high","title":"bootstrap.servers"},{"location":"3/#exactlyoncesourcesupport","text":"\u662f\u5426\u901a\u8fc7\u4f7f\u7528\u4e8b\u52a1\u5199\u5165\u6e90\u8bb0\u5f55\u53ca\u5176\u6e90\u504f\u79fb\u91cf\uff0c\u4ee5\u53ca\u5728\u542f\u52a8\u65b0\u4efb\u52a1\u4e4b\u524d\u4e3b\u52a8\u9694\u79bb\u65e7\u4efb\u52a1\u4ee3\uff0c\u6765\u4e3a\u96c6\u7fa4\u4e2d\u7684\u6e90\u8fde\u63a5\u5668\u542f\u7528\u4e00\u6b21\u6027\u652f\u6301\u3002 \u8981\u5728\u65b0\u96c6\u7fa4\u4e0a\u542f\u7528\u4e00\u6b21\u6027\u6e90\u652f\u6301\uff0c\u8bf7\u5c06\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u201c\u5df2\u542f\u7528\u201d\u3002\u8981\u5728\u73b0\u6709\u96c6\u7fa4\u4e0a\u542f\u7528\u652f\u6301\uff0c\u8bf7\u9996\u5148\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u4e0a\u8bbe\u7f6e\u4e3a\u201c\u51c6\u5907\u201d\uff0c\u7136\u540e\u8bbe\u7f6e\u4e3a\u201c\u542f\u7528\u201d\u3002\u6eda\u52a8\u5347\u7ea7\u53ef\u7528\u4e8e\u8fd9\u4e24\u79cd\u66f4\u6539\u3002\u6709\u5173\u6b64\u529f\u80fd\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e00\u6b21\u6027\u6e90\u652f\u6301\u6587\u6863 \u3002 Type: string Default: disabled Valid Values: (case insensitive) [DISABLED, ENABLED, PREPARING] Importance: high","title":"exactly.once.source.support"},{"location":"3/#heartbeatintervalms_1","text":"\u4f7f\u7528 Kafka \u7684\u7ec4\u7ba1\u7406\u5de5\u5177\u65f6\uff0c\u5411\u7ec4\u534f\u8c03\u5668\u53d1\u51fa\u5fc3\u8df3\u7684\u9884\u671f\u65f6\u95f4\u95f4\u9694\u3002\u5fc3\u8df3\u7528\u4e8e\u786e\u4fdd\u5de5\u4f5c\u4eba\u5458\u7684\u4f1a\u8bdd\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001\uff0c\u5e76\u5728\u65b0\u6210\u5458\u52a0\u5165\u6216\u79bb\u5f00\u7ec4\u65f6\u4fc3\u8fdb\u91cd\u65b0\u5e73\u8861\u3002\u8be5\u503c\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u4f4e\u4e8e session.timeout.ms \uff0c\u4f46\u901a\u5e38\u4e0d\u5e94\u9ad8\u4e8e\u8be5\u503c\u7684 1/3\u3002\u5b83\u53ef\u4ee5\u8c03\u6574\u5f97\u66f4\u4f4e\uff0c\u4ee5\u63a7\u5236\u6b63\u5e38\u91cd\u65b0\u5e73\u8861\u7684\u9884\u671f\u65f6\u95f4\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: high","title":"heartbeat.interval.ms"},{"location":"3/#rebalancetimeoutms","text":"\u91cd\u65b0\u5e73\u8861\u5f00\u59cb\u540e\uff0c\u6bcf\u4e2a\u5de5\u4f5c\u4eba\u5458\u52a0\u5165\u8be5\u7ec4\u7684\u6700\u5927\u5141\u8bb8\u65f6\u95f4\u3002\u8fd9\u57fa\u672c\u4e0a\u662f\u5bf9\u6240\u6709\u4efb\u52a1\u5237\u65b0\u4efb\u4f55\u6302\u8d77\u6570\u636e\u548c\u63d0\u4ea4\u504f\u79fb\u91cf\u6240\u9700\u7684\u65f6\u95f4\u7684\u9650\u5236\u3002\u5982\u679c\u8d85\u8fc7\u8d85\u65f6\uff0c\u90a3\u4e48\u8be5worker\u5c06\u4ece\u7ec4\u4e2d\u5220\u9664\uff0c\u8fd9\u5c06\u5bfc\u81f4\u504f\u79fb\u91cf\u63d0\u4ea4\u5931\u8d25\u3002 Type: int Default: 60000 (1 minute) Valid Values: Importance: high","title":"rebalance.timeout.ms"},{"location":"3/#sessiontimeoutms_1","text":"\u7528\u4e8e\u68c0\u6d4b\u5de5\u4f5c\u5668\u6545\u969c\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u5de5\u4f5c\u7ebf\u7a0b\u5b9a\u671f\u53d1\u9001\u5fc3\u8df3\u4ee5\u5411\u4ee3\u7406\u8868\u660e\u5176\u6d3b\u8dc3\u5ea6\u3002\u5982\u679c\u5728\u6b64\u4f1a\u8bdd\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u4ee3\u7406\u6ca1\u6709\u6536\u5230\u5fc3\u8df3\uff0c\u5219\u4ee3\u7406\u5c06\u4ece\u7ec4\u4e2d\u5220\u9664\u8be5\u5de5\u4f5c\u7ebf\u7a0b\u5e76\u542f\u52a8\u91cd\u65b0\u5e73\u8861\u3002\u8bf7\u6ce8\u610f\uff0c\u8be5\u503c\u5fc5\u987b\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d group.min.session.timeout.ms \u548c\u6240\u914d\u7f6e\u7684\u5141\u8bb8\u8303\u56f4\u5185 group.max.session.timeout.ms \u3002 Type: int Default: 10000 (10 seconds) Valid Values: Importance: high","title":"session.timeout.ms"},{"location":"3/#sslkeypassword_3","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.key.password"},{"location":"3/#sslkeystorecertificatechain_3","text":"\u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.certificate.chain"},{"location":"3/#sslkeystorekey_3","text":"\u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.key"},{"location":"3/#sslkeystorelocation_3","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.keystore.location"},{"location":"3/#sslkeystorepassword_3","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.password"},{"location":"3/#ssltruststorecertificate_2","text":"\u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.certificate"},{"location":"3/#ssltruststorelocation_3","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.truststore.location"},{"location":"3/#ssltruststorepassword_3","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.password"},{"location":"3/#clientdnslookup_2","text":"\u63a7\u5236\u5ba2\u6237\u7aef\u5982\u4f55\u4f7f\u7528 DNS \u67e5\u627e\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a use_all_dns_ips \uff0c\u5219\u6309\u987a\u5e8f\u8fde\u63a5\u6bcf\u4e2a\u8fd4\u56de\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u5efa\u7acb\u6210\u529f\u8fde\u63a5\u3002\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u5c06\u4f7f\u7528\u4e0b\u4e00\u4e2a IP\u3002\u4e00\u65e6\u6240\u6709 IP \u4f7f\u7528\u4e00\u6b21\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u518d\u6b21\u4ece\u4e3b\u673a\u540d\u89e3\u6790 IP\uff08\u4f46\u662f JVM \u548c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u7f13\u5b58 DNS \u540d\u79f0\u67e5\u627e\uff09\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a resolve_canonical_bootstrap_servers_only \uff0c\u5219\u5c06\u6bcf\u4e2a\u5f15\u5bfc\u5730\u5740\u89e3\u6790\u4e3a\u89c4\u8303\u540d\u79f0\u5217\u8868\u3002\u5728\u5f15\u5bfc\u9636\u6bb5\u4e4b\u540e\uff0c\u5176\u884c\u4e3a\u4e0e \u76f8\u540c use_all_dns_ips \u3002 Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips\uff0cresolve_canonical_bootstrap_servers_only] Importance: medium","title":"client.dns.lookup"},{"location":"3/#connectionsmaxidlems_3","text":"\u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 540000 (9 minutes) Valid Values: Importance: medium","title":"connections.max.idle.ms"},{"location":"3/#connectorclientconfigoverridepolicy","text":"\u7684\u5b9e\u73b0\u7684\u7c7b\u540d\u6216\u522b\u540d ConnectorClientConfigOverridePolicy \u3002\u5b9a\u4e49\u8fde\u63a5\u5668\u53ef\u4ee5\u8986\u76d6\u54ea\u4e9b\u5ba2\u6237\u7aef\u914d\u7f6e\u3002\u9ed8\u8ba4\u5b9e\u73b0\u662f\u201cAll\u201d\uff0c\u8fd9\u610f\u5473\u7740\u8fde\u63a5\u5668\u914d\u7f6e\u53ef\u4ee5\u8986\u76d6\u6240\u6709\u5ba2\u6237\u7aef\u5c5e\u6027\u3002\u6846\u67b6\u4e2d\u7684\u5176\u4ed6\u53ef\u80fd\u7684\u7b56\u7565\u5305\u62ec\u201cNone\u201d\uff08\u7981\u6b62\u8fde\u63a5\u5668\u8986\u76d6\u5ba2\u6237\u7aef\u5c5e\u6027\uff09\u548c\u201cPrincipal\u201d\uff08\u5141\u8bb8\u8fde\u63a5\u5668\u4ec5\u8986\u76d6\u5ba2\u6237\u7aef\u4e3b\u4f53\uff09\u3002 Type: string Default: All Valid Values: Importance: medium","title":"connector.client.config.override.policy"},{"location":"3/#receivebufferbytes_2","text":"\u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 32768\uff0832 KB\uff09 Valid Values: [-1\uff0c...] Importance: medium","title":"receive.buffer.bytes"},{"location":"3/#requesttimeoutms_3","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 40000 (40 seconds) Valid Values: [0,...] Importance: medium","title":"request.timeout.ms"},{"location":"3/#saslclientcallbackhandlerclass_3","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium","title":"sasl.client.callback.handler.class"},{"location":"3/#sasljaasconfig_3","text":"SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium","title":"sasl.jaas.config"},{"location":"3/#saslkerberosservicename_3","text":"Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.kerberos.service.name"},{"location":"3/#sasllogincallbackhandlerclass_3","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.callback.handler.class"},{"location":"3/#saslloginclass_3","text":"\u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.class"},{"location":"3/#saslmechanism_2","text":"\u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium","title":"sasl.mechanism"},{"location":"3/#sasloauthbearerjwksendpointurl_3","text":"OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.jwks.endpoint.url"},{"location":"3/#sasloauthbearertokenendpointurl_3","text":"OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.token.endpoint.url"},{"location":"3/#securityprotocol_2","text":"\u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium","title":"security.protocol"},{"location":"3/#sendbufferbytes_2","text":"\u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium","title":"send.buffer.bytes"},{"location":"3/#sslenabledprotocol_2","text":"\u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.enabled.protocol"},{"location":"3/#sslkeystoretype_3","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.keystore.type"},{"location":"3/#sslprotocol_3","text":"\u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.protocol"},{"location":"3/#sslprovider_3","text":"\u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium","title":"ssl.provider"},{"location":"3/#ssltruststoretype_3","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.truststore.type"},{"location":"3/#workersynctimeoutms","text":"\u5f53\u5de5\u4f5c\u4eba\u5458\u4e0e\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u4e0d\u540c\u6b65\u5e76\u4e14\u9700\u8981\u91cd\u65b0\u540c\u6b65\u914d\u7f6e\u65f6\uff0c\u8bf7\u5728\u653e\u5f03\u3001\u79bb\u5f00\u7ec4\u4e4b\u524d\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u5e76\u5728\u91cd\u65b0\u52a0\u5165\u4e4b\u524d\u7b49\u5f85\u4e00\u6bb5\u9000\u907f\u671f\u3002 Type: int Default: 3000 (3 seconds) Valid Values: Importance: medium","title":"worker.sync.timeout.ms"},{"location":"3/#workerunsyncbackoffms","text":"\u5f53\u5de5\u4f5c\u7ebf\u7a0b\u4e0e\u5176\u4ed6\u5de5\u4f5c\u7ebf\u7a0b\u4e0d\u540c\u6b65\u5e76\u4e14\u65e0\u6cd5\u5728worker.sync.timeout.ms\u5185\u8d76\u4e0a\u65f6\uff0c\u8bf7\u5728\u91cd\u65b0\u52a0\u5165\u4e4b\u524d\u79bb\u5f00Connect\u96c6\u7fa4\u8fd9\u4e48\u957f\u65f6\u95f4\u3002 Type: int Default: 300000 (5 minutes) Valid Values: Importance: medium","title":"worker.unsync.backoff.ms"},{"location":"3/#accesscontrolallowmethods","text":"\u901a\u8fc7\u8bbe\u7f6e Access-Control-Allow-Methods \u6807\u5934\u6765\u8bbe\u7f6e\u8de8\u6e90\u8bf7\u6c42\u652f\u6301\u7684\u65b9\u6cd5\u3002Access-Control-Allow-Methods \u6807\u5934\u7684\u9ed8\u8ba4\u503c\u5141\u8bb8 GET\u3001POST \u548c HEAD \u7684\u8de8\u6e90\u8bf7\u6c42\u3002 Type: string Default: \"\" Valid Values: Importance: low","title":"access.control.allow.methods"},{"location":"3/#accesscontrolalloworigin","text":"\u4e3a REST API \u8bf7\u6c42\u8bbe\u7f6e Access-Control-Allow-Origin \u6807\u5934\u7684\u503c\u3002\u8981\u542f\u7528\u8de8\u6e90\u8bbf\u95ee\uff0c\u8bf7\u5c06\u5176\u8bbe\u7f6e\u4e3a\u5e94\u5141\u8bb8\u8bbf\u95ee API \u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u57df\uff0c\u6216\u201c*\u201d\u4ee5\u5141\u8bb8\u6765\u81ea\u4efb\u4f55\u57df\u7684\u8bbf\u95ee\u9886\u57df\u3002\u9ed8\u8ba4\u503c\u4ec5\u5141\u8bb8\u4ece REST API \u7684\u57df\u8fdb\u884c\u8bbf\u95ee\u3002 Type: string Default: \"\" Valid Values: Importance: low","title":"access.control.allow.origin"},{"location":"3/#adminlisteners","text":"\u7ba1\u7406 REST API \u5c06\u4fa6\u542c\u7684\u4ee5\u9017\u53f7\u5206\u9694\u7684 URI \u5217\u8868\u3002\u652f\u6301\u7684\u534f\u8bae\u662f HTTP \u548c HTTPS\u3002\u7a7a\u5b57\u7b26\u4e32\u5c06\u7981\u7528\u6b64\u529f\u80fd\u3002\u9ed8\u8ba4\u884c\u4e3a\u662f\u4f7f\u7528\u5e38\u89c4\u4fa6\u542c\u5668\uff08\u7531\u201c\u4fa6\u542c\u5668\u201d\u5c5e\u6027\u6307\u5b9a\uff09\u3002 Type: list Default: null Valid Values: List of comma-separated URLs, ex: http://localhost:8080,https://localhost:8443. Importance: low","title":"admin.listeners"},{"location":"3/#autojmxreporter_3","text":"\u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"auto.jmx.reporter"},{"location":"3/#clientid_2","text":"\u53d1\u51fa\u8bf7\u6c42\u65f6\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u7684 id \u5b57\u7b26\u4e32\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u901a\u8fc7\u5141\u8bb8\u5728\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u5305\u542b\u903b\u8f91\u5e94\u7528\u7a0b\u5e8f\u540d\u79f0\uff0c\u80fd\u591f\u8ddf\u8e2a IP/\u7aef\u53e3\u4e4b\u5916\u7684\u8bf7\u6c42\u6e90\u3002 Type: string Default: \"\" Valid Values: Importance: low","title":"client.id"},{"location":"3/#configproviders","text":"\u4ee5\u9017\u53f7\u5206\u9694\u7684 ConfigProvider \u7c7b\u540d\u79f0\uff0c\u6309\u6307\u5b9a\u7684\u987a\u5e8f\u52a0\u8f7d\u548c\u4f7f\u7528\u3002\u5b9e\u73b0\u8be5\u63a5\u53e3 ConfigProvider \u5141\u8bb8\u60a8\u66ff\u6362\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u7684\u53d8\u91cf\u5f15\u7528\uff0c\u4f8b\u5982\u5916\u90e8\u5316\u673a\u5bc6\u3002 Type: list Default: \"\" Valid Values: Importance: low","title":"config.providers"},{"location":"3/#configstoragereplicationfactor","text":"\u521b\u5efa\u914d\u7f6e\u5b58\u50a8\u4e3b\u9898\u65f6\u4f7f\u7528\u7684\u590d\u5236\u56e0\u5b50 Type: short Default: 3 Valid Values: Positive number not larger than the number of brokers in the Kafka cluster, or -1 to use the broker's default Importance: low","title":"config.storage.replication.factor"},{"location":"3/#connectprotocol","text":"Kafka Connect \u534f\u8bae\u7684\u517c\u5bb9\u6a21\u5f0f Type: string Default: sessioned Valid Values: [\u6e34\u671b\u3001\u517c\u5bb9\u3001\u4f1a\u8bae] Importance: low","title":"connect.protocol"},{"location":"3/#headerconverter","text":"HeaderConverter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u6807\u5934\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSimpleHeaderConverter \u7528\u4e8e\u5c06\u6807\u5934\u503c\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u901a\u8fc7\u63a8\u65ad\u67b6\u6784\u6765\u53cd\u5e8f\u5217\u5316\u5b83\u4eec\u3002 Type: class Default: org.apache.kafka.connect.storage.SimpleHeaderConverter Valid Values: Importance: low","title":"header.converter"},{"location":"3/#interworkerkeygenerationalgorithm","text":"\u7528\u4e8e\u751f\u6210\u5185\u90e8\u8bf7\u6c42\u5bc6\u94a5\u7684\u7b97\u6cd5\u3002\u7b97\u6cd5\u201cHmacSHA256\u201d\u5c06\u5728\u652f\u6301\u8be5\u7b97\u6cd5\u7684 JVM \u4e0a\u9ed8\u8ba4\u4f7f\u7528\uff1b\u5728\u5176\u4ed6 JVM \u4e0a\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5e76\u4e14\u5fc5\u987b\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u624b\u52a8\u6307\u5b9a\u6b64\u5c5e\u6027\u7684\u503c\u3002 Type: string Default: HmacSHA256 Valid Values: Any KeyGenerator algorithm supported by the worker JVM Importance: low","title":"inter.worker.key.generation.algorithm"},{"location":"3/#interworkerkeysize","text":"\u7528\u4e8e\u7b7e\u7f72\u5185\u90e8\u8bf7\u6c42\u7684\u5bc6\u94a5\u7684\u5927\u5c0f\uff08\u4ee5\u4f4d\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u4e3a\u7a7a\uff0c\u5219\u5c06\u4f7f\u7528\u5bc6\u94a5\u751f\u6210\u7b97\u6cd5\u7684\u9ed8\u8ba4\u5bc6\u94a5\u5927\u5c0f\u3002 Type: int Default: null Valid Values: Importance: low","title":"inter.worker.key.size"},{"location":"3/#interworkerkeyttlms","text":"\u7528\u4e8e\u5185\u90e8\u8bf7\u6c42\u9a8c\u8bc1\u7684\u751f\u6210\u4f1a\u8bdd\u5bc6\u94a5\u7684 TTL\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 Type: int Default: 3600000 (1 hour) Valid Values: [0\uff0c...\uff0c2147483647] Importance: low","title":"inter.worker.key.ttl.ms"},{"location":"3/#interworkersignaturealgorithm","text":"\u7528\u4e8e\u7b7e\u7f72\u5185\u90e8\u8bf7\u6c42\u7684\u7b97\u6cd5\u201cinter.worker.signature.algorithm\u201d\u7b97\u6cd5\u5c06\u5728\u652f\u6301\u8be5\u7b97\u6cd5\u7684 JVM \u4e0a\u9ed8\u8ba4\u4f7f\u7528\uff1b\u5728\u5176\u4ed6 JVM \u4e0a\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5e76\u4e14\u5fc5\u987b\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u624b\u52a8\u6307\u5b9a\u6b64\u5c5e\u6027\u7684\u503c\u3002 Type: string Default: HmacSHA256 Valid Values: Any MAC algorithm supported by the worker JVM Importance: low","title":"inter.worker.signature.algorithm"},{"location":"3/#interworkerverificationalgorithms","text":"\u7528\u4e8e\u9a8c\u8bc1\u5185\u90e8\u8bf7\u6c42\u7684\u5141\u8bb8\u7b97\u6cd5\u5217\u8868\uff0c\u5176\u4e2d\u5fc5\u987b\u5305\u62ec\u7528\u4e8e inter.worker.signature.algorithm \u5c5e\u6027\u7684\u7b97\u6cd5\u3002\u7b97\u6cd5\u201c[HmacSHA256]\u201d\u5c06\u7528\u4f5c\u63d0\u4f9b\u5b83\u4eec\u7684 JVM \u7684\u9ed8\u8ba4\u503c\uff1b\u5728\u5176\u4ed6 JVM \u4e0a\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5e76\u4e14\u5fc5\u987b\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u624b\u52a8\u6307\u5b9a\u6b64\u5c5e\u6027\u7684\u503c\u3002 Type: list Default: HmacSHA256 Valid Values: A list of one or more MAC algorithms, each supported by the worker Importance: low","title":"inter.worker.verification.algorithms"},{"location":"3/#listeners_1","text":"REST API \u5c06\u4fa6\u542c\u7684\u4ee5\u9017\u53f7\u5206\u9694\u7684 URI \u5217\u8868\u3002\u652f\u6301\u7684\u534f\u8bae\u662f HTTP \u548c HTTPS\u3002 \u5c06\u4e3b\u673a\u540d\u6307\u5b9a\u4e3a 0.0.0.0 \u4ee5\u7ed1\u5b9a\u5230\u6240\u6709\u63a5\u53e3\u3002 \u5c06\u4e3b\u673a\u540d\u7559\u7a7a\u4ee5\u7ed1\u5b9a\u5230\u9ed8\u8ba4\u63a5\u53e3\u3002 \u5408\u6cd5\u4fa6\u542c\u5668\u5217\u8868\u793a\u4f8b\uff1aHTTP://myhost:8083\u3001HTTPS://myhost:8084 Type: list Default: http://:8083 Valid Values: List of comma-separated URLs, ex: http://localhost:8080,https://localhost:8443. Importance: low","title":"listeners"},{"location":"3/#metadatamaxagems_2","text":"\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low","title":"metadata.max.age.ms"},{"location":"3/#metricreporters_3","text":"\u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low","title":"metric.reporters"},{"location":"3/#metricsnumsamples_3","text":"\u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low","title":"metrics.num.samples"},{"location":"3/#metricsrecordinglevel_3","text":"\u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG] Importance: low","title":"metrics.recording.level"},{"location":"3/#metricssamplewindowms_3","text":"\u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"metrics.sample.window.ms"},{"location":"3/#offsetflushintervalms","text":"\u5c1d\u8bd5\u63d0\u4ea4\u4efb\u52a1\u504f\u79fb\u91cf\u7684\u65f6\u95f4\u95f4\u9694\u3002 Type: long Default: 60000 (1 minute) Valid Values: Importance: low","title":"offset.flush.interval.ms"},{"location":"3/#offsetflushtimeoutms","text":"\u5728\u53d6\u6d88\u8fdb\u7a0b\u5e76\u6062\u590d\u8981\u5728\u672a\u6765\u5c1d\u8bd5\u4e2d\u63d0\u4ea4\u7684\u504f\u79fb\u6570\u636e\u4e4b\u524d\uff0c\u7b49\u5f85\u8bb0\u5f55\u5237\u65b0\u5e76\u5c06\u5206\u533a\u504f\u79fb\u6570\u636e\u63d0\u4ea4\u5230\u504f\u79fb\u5b58\u50a8\u7684\u6700\u5927\u6beb\u79d2\u6570\u3002\u6b64\u5c5e\u6027\u5bf9\u4e8e\u4ee5\u4e00\u6b21\u6027\u652f\u6301\u8fd0\u884c\u7684\u6e90\u8fde\u63a5\u5668\u6ca1\u6709\u5f71\u54cd\u3002 Type: long Default: 5000 (5 seconds) Valid Values: Importance: low","title":"offset.flush.timeout.ms"},{"location":"3/#offsetstoragepartitions","text":"\u521b\u5efaoffset\u5b58\u50a8topic\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u91cf Type: int Default: 25 Valid Values: Positive number, or -1 to use the broker's default Importance: low","title":"offset.storage.partitions"},{"location":"3/#offsetstoragereplicationfactor","text":"\u521b\u5efa\u504f\u79fb\u5b58\u50a8\u4e3b\u9898\u65f6\u4f7f\u7528\u7684\u590d\u5236\u56e0\u5b50 Type: short Default: 3 Valid Values: Positive number not larger than the number of brokers in the Kafka cluster, or -1 to use the broker's default Importance: low","title":"offset.storage.replication.factor"},{"location":"3/#pluginpath","text":"\u7531\u9017\u53f7 (,) \u5206\u9694\u7684\u5305\u542b\u63d2\u4ef6\uff08\u8fde\u63a5\u5668\u3001\u8f6c\u6362\u5668\u3001\u8f6c\u6362\uff09\u7684\u8def\u5f84\u5217\u8868\u3002\u8be5\u5217\u8868\u5e94\u7531\u9876\u7ea7\u76ee\u5f55\u7ec4\u6210\uff0c\u5176\u4e2d\u5305\u62ec\u4ee5\u4e0b\u4efb\u610f\u7ec4\u5408\uff1a a) \u76f4\u63a5\u5305\u542b\u5e26\u6709\u63d2\u4ef6\u53ca\u5176\u4f9d\u8d56\u9879\u7684 jar \u7684\u76ee\u5f55 b) \u5e26\u6709\u63d2\u4ef6\u53ca\u5176\u4f9d\u8d56\u9879\u7684 uber-jars c) \u7acb\u5373\u5305\u542b\u63d2\u4ef6\u7c7b\u53ca\u5176\u4f9d\u8d56\u9879\u7684\u5305\u76ee\u5f55\u7ed3\u6784\u7684\u76ee\u5f55\u4f9d\u8d56\u9879 \u6ce8\u610f\uff1a\u5c06\u9075\u5faa\u7b26\u53f7\u94fe\u63a5\u6765\u53d1\u73b0\u4f9d\u8d56\u9879\u6216\u63d2\u4ef6\u3002 \u793a\u4f8b\uff1aplugin.path=/usr/local/share/java,/usr/local/share/kafka/plugins,/opt/connectors \u4e0d\u8981\u5728\u6b64\u5c5e\u6027\u4e2d\u4f7f\u7528\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u53d8\u91cf\uff0c\u56e0\u4e3a\u539f\u59cb\u8def\u5f84\u7531\u5de5\u4f5c\u7a0b\u5e8f\u7684\u626b\u63cf\u4eea\u4f7f\u7528\u5728\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u521d\u59cb\u5316\u5e76\u7528\u4e8e\u66ff\u6362\u53d8\u91cf\u4e4b\u524d\u3002 Type: list Default: null Valid Values: Importance: low","title":"plugin.path"},{"location":"3/#reconnectbackoffmaxms_2","text":"\u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low","title":"reconnect.backoff.max.ms"},{"location":"3/#reconnectbackoffms_2","text":"\u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low","title":"reconnect.backoff.ms"},{"location":"3/#responsehttpheadersconfig","text":"REST API HTTP \u54cd\u5e94\u6807\u5934\u7684\u89c4\u5219 Type: string Default: \"\" Valid Values: \u9017\u53f7\u5206\u9694\u7684\u6807\u5934\u89c4\u5219\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6807\u5934\u89c4\u5219\u7684\u683c\u5f0f\u4e3a '[action] [\u6807\u5934\u540d\u79f0]:[\u6807\u5934\u503c]'\uff0c\u5982\u679c\u6807\u5934\u89c4\u5219\u7684\u4efb\u4f55\u90e8\u5206\u5305\u542b\u9017\u53f7\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u7528\u53cc\u5f15\u53f7\u5f15\u8d77\u6765 Importance: low","title":"response.http.headers.config"},{"location":"3/#restadvertisedhostname","text":"\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u9879\uff0c\u5219\u8fd9\u5c31\u662f\u5c06\u63d0\u4f9b\u7ed9\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u8fdb\u884c\u8fde\u63a5\u7684\u4e3b\u673a\u540d\u3002 Type: string Default: null Valid Values: Importance: low","title":"rest.advertised.host.name"},{"location":"3/#restadvertisedlistener","text":"\u8bbe\u7f6e\u5c06\u63d0\u4f9b\u7ed9\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u4f7f\u7528\u7684\u5e7f\u544a\u4fa6\u542c\u5668\uff08HTTP \u6216 HTTPS\uff09\u3002 Type: string Default: null Valid Values: Importance: low","title":"rest.advertised.listener"},{"location":"3/#restadvertisedport","text":"\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u7aef\u53e3\uff0c\u5219\u8be5\u7aef\u53e3\u5c06\u63d0\u4f9b\u7ed9\u5176\u4ed6\u5de5\u4f5c\u4eba\u5458\u8fdb\u884c\u8fde\u63a5\u3002 Type: int Default: null Valid Values: Importance: low","title":"rest.advertised.port"},{"location":"3/#restextensionclass","text":"\u4ee5\u9017\u53f7\u5206\u9694\u7684 ConnectRestExtension \u7c7b\u540d\u79f0\uff0c\u6309\u6307\u5b9a\u7684\u987a\u5e8f\u52a0\u8f7d\u548c\u8c03\u7528\u3002\u5b9e\u73b0\u8be5\u63a5\u53e3 ConnectRestExtension \u5141\u8bb8\u60a8\u5c06\u7528\u6237\u5b9a\u4e49\u7684\u8d44\u6e90\uff08\u4f8b\u5982\u8fc7\u6ee4\u5668\uff09\u6ce8\u5165 Connect \u7684 REST API\u3002\u901a\u5e38\u7528\u4e8e\u6dfb\u52a0\u81ea\u5b9a\u4e49\u529f\u80fd\uff0c\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u3001\u5b89\u5168\u6027\u7b49\u3002 Type: list Default: \"\" Valid Values: Importance: low","title":"rest.extension.class"},{"location":"3/#retrybackoffms_2","text":"\u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low","title":"retry.backoff.ms"},{"location":"3/#saslkerberoskinitcmd_3","text":"Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low","title":"sasl.kerberos.kinit.cmd"},{"location":"3/#saslkerberosmintimebeforerelogin_3","text":"\u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low","title":"sasl.kerberos.min.time.before.relogin"},{"location":"3/#saslkerberosticketrenewjitter_3","text":"\u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.jitter"},{"location":"3/#saslkerberosticketrenewwindowfactor_3","text":"\u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.window.factor"},{"location":"3/#saslloginconnecttimeoutms_3","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.connect.timeout.ms"},{"location":"3/#saslloginreadtimeoutms_3","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.read.timeout.ms"},{"location":"3/#saslloginrefreshbufferseconds_3","text":"\u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low","title":"sasl.login.refresh.buffer.seconds"},{"location":"3/#saslloginrefreshminperiodseconds_3","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low","title":"sasl.login.refresh.min.period.seconds"},{"location":"3/#saslloginrefreshwindowfactor_3","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low","title":"sasl.login.refresh.window.factor"},{"location":"3/#saslloginrefreshwindowjitter_3","text":"\u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low","title":"sasl.login.refresh.window.jitter"},{"location":"3/#saslloginretrybackoffmaxms_3","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.login.retry.backoff.max.ms"},{"location":"3/#saslloginretrybackoffms_3","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.login.retry.backoff.ms"},{"location":"3/#sasloauthbearerclockskewseconds_3","text":"\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low","title":"sasl.oauthbearer.clock.skew.seconds"},{"location":"3/#sasloauthbearerexpectedaudience_3","text":"\u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.audience"},{"location":"3/#sasloauthbearerexpectedissuer_3","text":"\u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.issuer"},{"location":"3/#sasloauthbearerjwksendpointrefreshms_3","text":"\u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.refresh.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffmaxms_3","text":"\u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffms_3","text":"\u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.ms"},{"location":"3/#sasloauthbearerscopeclaimname_3","text":"\u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low","title":"sasl.oauthbearer.scope.claim.name"},{"location":"3/#sasloauthbearersubclaimname_3","text":"\u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low","title":"sasl.oauthbearer.sub.claim.name"},{"location":"3/#scheduledrebalancemaxdelayms","text":"\u4e3a\u7b49\u5f85\u4e00\u540d\u6216\u591a\u540d\u79bb\u804c\u5de5\u4f5c\u4eba\u5458\u8fd4\u56de\u800c\u5b89\u6392\u7684\u6700\u5927\u5ef6\u8fdf\uff0c\u7136\u540e\u518d\u91cd\u65b0\u5e73\u8861\u5176\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u5e76\u5c06\u5176\u91cd\u65b0\u5206\u914d\u7ed9\u7ec4\u3002\u5728\u6b64\u671f\u95f4\uff0c\u79bb\u804c\u5458\u5de5\u7684\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u4ecd\u672a\u5206\u914d Type: int Default: 300000 (5 minutes) Valid Values: [0\uff0c...\uff0c2147483647] Importance: low","title":"scheduled.rebalance.max.delay.ms"},{"location":"3/#socketconnectionsetuptimeoutmaxms_3","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"socket.connection.setup.timeout.max.ms"},{"location":"3/#socketconnectionsetuptimeoutms_3","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: [0,...] Importance: low","title":"socket.connection.setup.timeout.ms"},{"location":"3/#sslciphersuites_3","text":"\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low","title":"ssl.cipher.suites"},{"location":"3/#sslclientauth_1","text":"\u914d\u7f6e kafka \u4ee3\u7406\u6765\u8bf7\u6c42\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002\u4ee5\u4e0b\u8bbe\u7f6e\u662f\u5e38\u89c1\u7684\uff1a ssl.client.auth=required \u5982\u679c\u8bbe\u7f6e\u4e3a\u5fc5\u9700\uff0c\u5219\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 ssl.client.auth=requested \u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u662f\u53ef\u9009\u7684\u3002\u4e0e\u5fc5\u9700\u7684\u4e0d\u540c\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u9009\u9879\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u9009\u62e9\u4e0d\u63d0\u4f9b\u6709\u5173\u5176\u81ea\u8eab\u7684\u8eab\u4efd\u9a8c\u8bc1\u4fe1\u606f ssl.client.auth=none \u8fd9\u610f\u5473\u7740\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: none Valid Values: [required, requested, none] Importance: low","title":"ssl.client.auth"},{"location":"3/#sslendpointidentificationalgorithm_3","text":"\u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low","title":"ssl.endpoint.identification.algorithm"},{"location":"3/#sslenginefactoryclass_3","text":"org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low","title":"ssl.engine.factory.class"},{"location":"3/#sslkeymanageralgorithm_3","text":"\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low","title":"ssl.keymanager.algorithm"},{"location":"3/#sslsecurerandomimplementation_3","text":"\u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low","title":"ssl.secure.random.implementation"},{"location":"3/#ssltrustmanageralgorithm_3","text":"\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low","title":"ssl.trustmanager.algorithm"},{"location":"3/#statusstoragepartitions","text":"\u521b\u5efa\u72b6\u6001\u5b58\u50a8topic\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u91cf Type: int Default: 5 Valid Values: Positive number, or -1 to use the broker's default Importance: low","title":"status.storage.partitions"},{"location":"3/#statusstoragereplicationfactor","text":"\u521b\u5efa\u72b6\u6001\u5b58\u50a8\u4e3b\u9898\u65f6\u4f7f\u7528\u7684\u590d\u5236\u56e0\u5b50 Type: short Default: 3 Valid Values: Positive number not larger than the number of brokers in the Kafka cluster, or -1 to use the broker's default Importance: low","title":"status.storage.replication.factor"},{"location":"3/#taskshutdowngracefultimeoutms","text":"\u7b49\u5f85\u4efb\u52a1\u6b63\u5e38\u5173\u95ed\u7684\u65f6\u95f4\u3002\u8fd9\u662f\u603b\u65f6\u95f4\uff0c\u800c\u4e0d\u662f\u6bcf\u4e2a\u4efb\u52a1\u7684\u65f6\u95f4\u3002\u6240\u6709\u4efb\u52a1\u90fd\u5df2\u89e6\u53d1\u5173\u95ed\uff0c\u7136\u540e\u6309\u987a\u5e8f\u7b49\u5f85\u3002 Type: long Default: 5000 (5 seconds) Valid Values: Importance: low","title":"task.shutdown.graceful.timeout.ms"},{"location":"3/#topiccreateenable","text":"\u5f53\u6e90\u8fde\u63a5\u5668\u914d\u7f6e\u4e86\u201ctopic.creation.\u201d\u5c5e\u6027\u65f6\uff0c\u662f\u5426\u5141\u8bb8\u81ea\u52a8\u521b\u5efa\u6e90\u8fde\u63a5\u5668\u4f7f\u7528\u7684\u4e3b\u9898\u3002\u6bcf\u4e2a\u4efb\u52a1\u90fd\u5c06\u4f7f\u7528\u7ba1\u7406\u5ba2\u6237\u7aef\u6765\u521b\u5efa\u5176\u4e3b\u9898\uff0c\u5e76\u4e14\u4e0d\u4f1a\u4f9d\u8d56 Kafka \u4ee3\u7406\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"topic.create.enable"},{"location":"3/#topictrackingallowreset","text":"\u5982\u679c\u8bbe\u7f6e\u4e3a true\uff0c\u5219\u5141\u8bb8\u7528\u6237\u8bf7\u6c42\u91cd\u7f6e\u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"topic.tracking.allow.reset"},{"location":"3/#topictrackingenable","text":"\u542f\u7528\u5728\u8fd0\u884c\u65f6\u8ddf\u8e2a\u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"topic.tracking.enable"},{"location":"3/#351","text":"\u4ee5\u4e0b\u662f\u6e90\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u3002","title":"3.5.1 \u6e90\u8fde\u63a5\u5668\u914d\u7f6e"},{"location":"3/#name","text":"\u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u5168\u5c40\u552f\u4e00\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string without ISO control characters Importance: high","title":"name"},{"location":"3/#connectorclass","text":"\u6b64\u8fde\u63a5\u5668\u7684\u7c7b\u7684\u540d\u79f0\u6216\u522b\u540d\u3002\u5fc5\u987b\u662f org.apache.kafka.connect.connector.Connector \u7684\u5b50\u7c7b\u3002\u5982\u679c\u8fde\u63a5\u5668\u662forg.apache.kafka.connect.file.FileStreamSinkConnector\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u5168\u540d\uff0c\u6216\u8005\u4f7f\u7528\u201cFileStreamSink\u201d\u6216\u201cFileStreamSinkConnector\u201d\u4f7f\u914d\u7f6e\u66f4\u77ed\u4e00\u4e9b Type: string Default: Valid Values: Importance: high","title":"connector.class"},{"location":"3/#tasksmax","text":"\u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u6700\u5927\u4efb\u52a1\u6570\u3002 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high","title":"tasks.max"},{"location":"3/#keyconverter_1","text":"Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low","title":"key.converter"},{"location":"3/#valueconverter_1","text":"Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low","title":"value.converter"},{"location":"3/#headerconverter_1","text":"HeaderConverter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u6807\u5934\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSimpleHeaderConverter \u7528\u4e8e\u5c06\u6807\u5934\u503c\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u901a\u8fc7\u63a8\u65ad\u67b6\u6784\u6765\u53cd\u5e8f\u5217\u5316\u5b83\u4eec\u3002 Type: class Default: null Valid Values: Importance: low","title":"header.converter"},{"location":"3/#configactionreload","text":"\u5f53\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u7684\u66f4\u6539\u5bfc\u81f4\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u5c5e\u6027\u53d1\u751f\u66f4\u6539\u65f6\uff0cConnect \u5e94\u5bf9\u8fde\u63a5\u5668\u6267\u884c\u7684\u64cd\u4f5c\u3002\u503c\u201cnone\u201d\u8868\u793a Connect \u5c06\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u201crestart\u201d\u503c\u8868\u793a Connect \u5e94\u4f7f\u7528\u66f4\u65b0\u7684\u914d\u7f6e\u5c5e\u6027\u91cd\u65b0\u542f\u52a8/\u91cd\u65b0\u52a0\u8f7d\u8fde\u63a5\u5668\u3002\u5982\u679c\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u6307\u793a\u914d\u7f6e\u503c\u5c06\u6765\u4f1a\u8fc7\u671f\uff0c\u5219\u5b9e\u9645\u4e0a\u53ef\u80fd\u4f1a\u5728\u5c06\u6765\u5b89\u6392\u91cd\u65b0\u542f\u52a8\u3002 Type: string Default: restart Valid Values: [none, restart] Importance: low","title":"config.action.reload"},{"location":"3/#transforms","text":"\u5e94\u7528\u4e8e\u8bb0\u5f55\u7684\u8f6c\u6362\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: \u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u552f\u4e00\u7684\u8f6c\u6362\u522b\u540d Importance: low","title":"transforms"},{"location":"3/#predicates","text":"\u8f6c\u6362\u4f7f\u7528\u7684\u8c13\u8bcd\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: non-null string, unique predicate aliases Importance: low","title":"predicates"},{"location":"3/#errorsretrytimeout","text":"\u91cd\u65b0\u5c1d\u8bd5\u5931\u8d25\u64cd\u4f5c\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u4f1a\u5c1d\u8bd5\u91cd\u8bd5\u3002\u4f7f\u7528 -1 \u8fdb\u884c\u65e0\u9650\u91cd\u8bd5\u3002 Type: long Default: 0 Valid Values: Importance: medium","title":"errors.retry.timeout"},{"location":"3/#errorsretrydelaymaxms","text":"\u8fde\u7eed\u91cd\u8bd5\u4e4b\u95f4\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4e00\u65e6\u8fbe\u5230\u6b64\u9650\u5236\uff0c\u6296\u52a8\u5c31\u4f1a\u6dfb\u52a0\u5230\u5ef6\u8fdf\u4e2d\uff0c\u4ee5\u9632\u6b62\u96f7\u7fa4\u95ee\u9898\u3002 Type: long Default: 60000 (1 minute) Valid Values: Importance: medium","title":"errors.retry.delay.max.ms"},{"location":"3/#errorstolerance","text":"\u8fde\u63a5\u5668\u64cd\u4f5c\u671f\u95f4\u5bb9\u5fcd\u9519\u8bef\u7684\u884c\u4e3a\u3002\u201cnone\u201d\u662f\u9ed8\u8ba4\u503c\uff0c\u8868\u793a\u4efb\u4f55\u9519\u8bef\u90fd\u5c06\u5bfc\u81f4\u8fde\u63a5\u5668\u4efb\u52a1\u7acb\u5373\u5931\u8d25\uff1b\u201call\u201d\u66f4\u6539\u884c\u4e3a\u4ee5\u8df3\u8fc7\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u3002 Type: string Default: none Valid Values: [none, all] Importance: medium","title":"errors.tolerance"},{"location":"3/#errorslogenable","text":"\u5982\u679c\u4e3a true\uff0c\u5219\u5c06\u6bcf\u4e2a\u9519\u8bef\u4ee5\u53ca\u5931\u8d25\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u5199\u5165 Connect \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6b64\u503c\u4e3a\u201cfalse\u201d\uff0c\u56e0\u6b64\u4ec5\u62a5\u544a\u4e0d\u80fd\u5bb9\u5fcd\u7684\u9519\u8bef\u3002 Type: boolean Default: false Valid Values: Importance: medium","title":"errors.log.enable"},{"location":"3/#errorslogincludemessages","text":"\u662f\u5426\u5728\u65e5\u5fd7\u4e2d\u5305\u542b\u5bfc\u81f4\u5931\u8d25\u7684\u8fde\u63a5\u8bb0\u5f55\u3002\u5bf9\u4e8e\u63a5\u6536\u5668\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u4e3b\u9898\u3001\u5206\u533a\u3001\u504f\u79fb\u91cf\u548c\u65f6\u95f4\u6233\u3002\u5bf9\u4e8e\u6e90\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u952e\u548c\u503c\uff08\u53ca\u5176\u6a21\u5f0f\uff09\u3001\u6240\u6709\u6807\u5934\u4ee5\u53ca\u65f6\u95f4\u6233\u3001Kafka \u4e3b\u9898\u3001Kafka \u5206\u533a\u3001\u6e90\u5206\u533a\u548c\u6e90\u504f\u79fb\u91cf\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd9\u662f\u201cfalse\u201d\uff0c\u8fd9\u5c06\u963b\u6b62\u8bb0\u5f55\u952e\u3001\u503c\u548c\u6807\u5934\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u3002 Type: boolean Default: false Valid Values: Importance: medium","title":"errors.log.include.messages"},{"location":"3/#topiccreationgroups","text":"\u7531\u6e90\u8fde\u63a5\u5668\u521b\u5efa\u7684\u4e3b\u9898\u914d\u7f6e\u7ec4 Type: list Default: \"\" Valid Values: non-null string, unique topic creation groups Importance: low","title":"topic.creation.groups"},{"location":"3/#exactlyoncesupport","text":"\u5141\u8bb8\u7684\u503c\u662f\u8bf7\u6c42\u7684\u3001\u5fc5\u9700\u7684\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u201c\u5fc5\u9700\u201d\uff0c\u5219\u5f3a\u5236\u5bf9\u8fde\u63a5\u5668\u8fdb\u884c\u9884\u68c0\uff0c\u4ee5\u786e\u4fdd\u5b83\u53ef\u4ee5\u4f7f\u7528\u7ed9\u5b9a\u7684\u914d\u7f6e\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002\u67d0\u4e9b\u8fde\u63a5\u5668\u53ef\u80fd\u80fd\u591f\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\uff0c\u4f46\u4e0d\u4f1a\u5411 Connect \u53d1\u51fa\u4fe1\u53f7\u8868\u660e\u5b83\u4eec\u652f\u6301\u6b64\u529f\u80fd\uff1b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5728\u521b\u5efa\u8fde\u63a5\u5668\u4e4b\u524d\u5e94\u4ed4\u7ec6\u67e5\u9605\u8fde\u63a5\u5668\u7684\u6587\u6863\uff0c\u5e76\u4e14\u8be5\u5c5e\u6027\u7684\u503c\u5e94\u8bbe\u7f6e\u4e3a\u201c\u8bf7\u6c42\u201d\u3002\u6b64\u5916\uff0c\u5982\u679c\u8be5\u503c\u8bbe\u7f6e\u4e3a\u201c\u5fc5\u9700\u201d\uff0c\u4f46\u6267\u884c\u9884\u68c0\u9a8c\u8bc1\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6ca1\u6709\u4e3a\u6e90\u8fde\u63a5\u5668\u542f\u7528exactly.once.support\uff0c\u5219\u521b\u5efa\u6216\u9a8c\u8bc1\u8fde\u63a5\u5668\u7684\u8bf7\u6c42\u5c06\u5931\u8d25\u3002 Type: string Default: requested Valid Values: (case insensitive) [REQUIRED, REQUESTED] Importance: medium","title":"exactly.once.support"},{"location":"3/#transactionboundary","text":"\u5141\u8bb8\u7684\u503c\u4e3a\uff1a\u8f6e\u8be2\u3001\u95f4\u9694\u3001\u8fde\u63a5\u5668\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u201c\u8f6e\u8be2\u201d\uff0c\u5219\u5c06\u4e3a\u8be5\u8fde\u63a5\u5668\u4e2d\u7684\u6bcf\u4e2a\u4efb\u52a1\u63d0\u4f9b\u7ed9 Connect \u7684\u6bcf\u6279\u8bb0\u5f55\u542f\u52a8\u5e76\u63d0\u4ea4\u4e00\u4e2a\u65b0\u7684\u751f\u4ea7\u8005\u4e8b\u52a1\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a\u201c\u8fde\u63a5\u5668\u201d\uff0c\u5219\u4f9d\u8d56\u4e8e\u8fde\u63a5\u5668\u5b9a\u4e49\u7684\u4e8b\u52a1\u8fb9\u754c\uff1b\u8bf7\u6ce8\u610f\uff0c\u5e76\u975e\u6240\u6709\u8fde\u63a5\u5668\u90fd\u80fd\u591f\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c1d\u8bd5\u4f7f\u7528\u6b64\u503c\u5b9e\u4f8b\u5316\u8fde\u63a5\u5668\u5c06\u4f1a\u5931\u8d25\u3002\u6700\u540e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a\u201cinterval\u201d\uff0c\u5219\u4ec5\u5728\u7528\u6237\u5b9a\u4e49\u7684\u65f6\u95f4\u95f4\u9694\u8fc7\u53bb\u540e\u63d0\u4ea4\u4e8b\u52a1\u3002 Type: string Default: poll Valid Values: (case insensitive) [INTERVAL, POLL, CONNECTOR] Importance: medium","title":"transaction.boundary"},{"location":"3/#transactionboundaryintervalms","text":"\u5982\u679c\u201ctransaction.boundary\u201d\u8bbe\u7f6e\u4e3a\u201cinterval\u201d\uff0c\u5219\u786e\u5b9a\u8fde\u63a5\u5668\u4efb\u52a1\u63d0\u4ea4\u751f\u4ea7\u8005\u4e8b\u52a1\u7684\u65f6\u95f4\u95f4\u9694\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u4e3a\u5de5\u4f5c\u7ebf\u7a0b\u7ea7\u522b\u201coffset.flush.interval.ms\u201d\u5c5e\u6027\u7684\u503c\u3002\u5982\u679c\u6307\u5b9a\u4e86\u4e0d\u540c\u7684 transaction.boundary \u5219\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u3002 Type: long Default: null Valid Values: [0,...] Importance: low","title":"transaction.boundary.interval.ms"},{"location":"3/#offsetsstoragetopic_1","text":"\u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u5355\u72ec\u504f\u79fb\u4e3b\u9898\u7684\u540d\u79f0\u3002\u5982\u679c\u4e3a\u7a7a\u6216\u672a\u6307\u5b9a\uff0c\u5219\u5c06\u4f7f\u7528\u5de5\u4f5c\u4eba\u5458\u7684\u5168\u5c40\u504f\u79fb\u91cf\u4e3b\u9898\u540d\u79f0\u3002\u5982\u679c\u6307\u5b9a\uff0c\u5982\u679c\u8be5\u8fde\u63a5\u5668\u7684\u76ee\u6807 Kafka \u96c6\u7fa4\u4e0a\u5c1a\u4e0d\u5b58\u5728\u504f\u79fb\u91cf\u4e3b\u9898\uff0c\u5219\u5c06\u521b\u5efa\u8be5\u504f\u79fb\u91cf\u4e3b\u9898\uff08\u5982\u679c\u8fde\u63a5\u5668\u751f\u4ea7\u8005\u7684 bootstrap.servers \u5c5e\u6027\u5df2\u88ab\u8bbe\u7f6e\uff0c\u5219\u8be5\u504f\u79fb\u91cf\u4e3b\u9898\u53ef\u80fd\u4e0e\u7528\u4e8e\u5de5\u4f5c\u7ebf\u7a0b\u5168\u5c40\u504f\u79fb\u91cf\u4e3b\u9898\u7684\u4e3b\u9898\u4e0d\u540c\uff09\u4ece\u5de5\u4eba\u7684\u8986\u76d6\uff09\u3002\u4ec5\u9002\u7528\u4e8e\u5206\u5e03\u5f0f\u6a21\u5f0f\uff1b\u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\uff0c\u8bbe\u7f6e\u8be5\u5c5e\u6027\u5c06\u4e0d\u8d77\u4f5c\u7528\u3002 Type: string Default: null Valid Values: non-null string Importance: low","title":"offsets.storage.topic"},{"location":"3/#352","text":"\u4ee5\u4e0b\u662f\u63a5\u6536\u5668\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u3002","title":"3.5.2 \u63a5\u6536\u5668\u8fde\u63a5\u5668\u914d\u7f6e"},{"location":"3/#name_1","text":"\u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u5168\u5c40\u552f\u4e00\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string without ISO control characters Importance: high","title":"name"},{"location":"3/#connectorclass_1","text":"\u6b64\u8fde\u63a5\u5668\u7684\u7c7b\u7684\u540d\u79f0\u6216\u522b\u540d\u3002\u5fc5\u987b\u662f org.apache.kafka.connect.connector.Connector \u7684\u5b50\u7c7b\u3002\u5982\u679c\u8fde\u63a5\u5668\u662forg.apache.kafka.connect.file.FileStreamSinkConnector\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u5168\u540d\uff0c\u6216\u8005\u4f7f\u7528\u201cFileStreamSink\u201d\u6216\u201cFileStreamSinkConnector\u201d\u4f7f\u914d\u7f6e\u66f4\u77ed\u4e00\u4e9b Type: string Default: Valid Values: Importance: high","title":"connector.class"},{"location":"3/#tasksmax_1","text":"\u7528\u4e8e\u6b64\u8fde\u63a5\u5668\u7684\u6700\u5927\u4efb\u52a1\u6570\u3002 Type: int Default: 1 Valid Values: [1\uff0c...] Importance: high","title":"tasks.max"},{"location":"3/#topics","text":"\u8981\u4f7f\u7528\u7684\u4e3b\u9898\u5217\u8868\uff0c\u4ee5\u9017\u53f7\u5206\u9694 Type: list Default: \"\" Valid Values: Importance: high","title":"topics"},{"location":"3/#topicsregex","text":"\u63d0\u4f9b\u8981\u4f7f\u7528\u7684\u4e3b\u9898\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5728\u5e95\u5c42\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u88ab\u7f16\u8bd1\u4e3a java.util.regex.Pattern . \u4ec5\u5e94\u6307\u5b9a topic \u6216 topic.regex \u4e4b\u4e00\u3002 Type: string Default: \"\" Valid Values: \u6709\u6548\u7684\u6b63\u5219\u8868\u8fbe\u5f0f Importance: high","title":"topics.regex"},{"location":"3/#keyconverter_2","text":"Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low","title":"key.converter"},{"location":"3/#valueconverter_2","text":"Converter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 Type: class Default: null Valid Values: Importance: low","title":"value.converter"},{"location":"3/#headerconverter_2","text":"HeaderConverter \u7c7b\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u6807\u5934\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSimpleHeaderConverter \u7528\u4e8e\u5c06\u6807\u5934\u503c\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u901a\u8fc7\u63a8\u65ad\u67b6\u6784\u6765\u53cd\u5e8f\u5217\u5316\u5b83\u4eec\u3002 Type: class Default: null Valid Values: Importance: low","title":"header.converter"},{"location":"3/#configactionreload_1","text":"\u5f53\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u7684\u66f4\u6539\u5bfc\u81f4\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u5c5e\u6027\u53d1\u751f\u66f4\u6539\u65f6\uff0cConnect \u5e94\u5bf9\u8fde\u63a5\u5668\u6267\u884c\u7684\u64cd\u4f5c\u3002\u503c\u201cnone\u201d\u8868\u793a Connect \u5c06\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u201crestart\u201d\u503c\u8868\u793a Connect \u5e94\u4f7f\u7528\u66f4\u65b0\u7684\u914d\u7f6e\u5c5e\u6027\u91cd\u65b0\u542f\u52a8/\u91cd\u65b0\u52a0\u8f7d\u8fde\u63a5\u5668\u3002\u5982\u679c\u5916\u90e8\u914d\u7f6e\u63d0\u4f9b\u7a0b\u5e8f\u6307\u793a\u914d\u7f6e\u503c\u5c06\u6765\u4f1a\u8fc7\u671f\uff0c\u5219\u5b9e\u9645\u4e0a\u53ef\u80fd\u4f1a\u5728\u5c06\u6765\u5b89\u6392\u91cd\u65b0\u542f\u52a8\u3002 Type: string Default: restart Valid Values: [none, restart] Importance: low","title":"config.action.reload"},{"location":"3/#transforms_1","text":"\u5e94\u7528\u4e8e\u8bb0\u5f55\u7684\u8f6c\u6362\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: \u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u552f\u4e00\u7684\u8f6c\u6362\u522b\u540d Importance: low","title":"transforms"},{"location":"3/#predicates_1","text":"\u8f6c\u6362\u4f7f\u7528\u7684\u8c13\u8bcd\u7684\u522b\u540d\u3002 Type: list Default: \"\" Valid Values: non-null string, unique predicate aliases Importance: low","title":"predicates"},{"location":"3/#errorsretrytimeout_1","text":"\u91cd\u65b0\u5c1d\u8bd5\u5931\u8d25\u64cd\u4f5c\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u4f1a\u5c1d\u8bd5\u91cd\u8bd5\u3002\u4f7f\u7528 -1 \u8fdb\u884c\u65e0\u9650\u91cd\u8bd5\u3002 Type: long Default: 0 Valid Values: Importance: medium","title":"errors.retry.timeout"},{"location":"3/#errorsretrydelaymaxms_1","text":"\u8fde\u7eed\u91cd\u8bd5\u4e4b\u95f4\u7684\u6700\u5927\u6301\u7eed\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u4e00\u65e6\u8fbe\u5230\u6b64\u9650\u5236\uff0c\u6296\u52a8\u5c31\u4f1a\u6dfb\u52a0\u5230\u5ef6\u8fdf\u4e2d\uff0c\u4ee5\u9632\u6b62\u96f7\u7fa4\u95ee\u9898\u3002 Type: long Default: 60000 (1 minute) Valid Values: Importance: medium","title":"errors.retry.delay.max.ms"},{"location":"3/#errorstolerance_1","text":"\u8fde\u63a5\u5668\u64cd\u4f5c\u671f\u95f4\u5bb9\u5fcd\u9519\u8bef\u7684\u884c\u4e3a\u3002\u201cnone\u201d\u662f\u9ed8\u8ba4\u503c\uff0c\u8868\u793a\u4efb\u4f55\u9519\u8bef\u90fd\u5c06\u5bfc\u81f4\u8fde\u63a5\u5668\u4efb\u52a1\u7acb\u5373\u5931\u8d25\uff1b\u201call\u201d\u66f4\u6539\u884c\u4e3a\u4ee5\u8df3\u8fc7\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u3002 Type: string Default: none Valid Values: [none, all] Importance: medium","title":"errors.tolerance"},{"location":"3/#errorslogenable_1","text":"\u5982\u679c\u4e3a true\uff0c\u5219\u5c06\u6bcf\u4e2a\u9519\u8bef\u4ee5\u53ca\u5931\u8d25\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u6709\u95ee\u9898\u7684\u8bb0\u5f55\u5199\u5165 Connect \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6b64\u503c\u4e3a\u201cfalse\u201d\uff0c\u56e0\u6b64\u4ec5\u62a5\u544a\u4e0d\u80fd\u5bb9\u5fcd\u7684\u9519\u8bef\u3002 Type: boolean Default: false Valid Values: Importance: medium","title":"errors.log.enable"},{"location":"3/#errorslogincludemessages_1","text":"\u662f\u5426\u5728\u65e5\u5fd7\u4e2d\u5305\u542b\u5bfc\u81f4\u5931\u8d25\u7684\u8fde\u63a5\u8bb0\u5f55\u3002\u5bf9\u4e8e\u63a5\u6536\u5668\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u4e3b\u9898\u3001\u5206\u533a\u3001\u504f\u79fb\u91cf\u548c\u65f6\u95f4\u6233\u3002\u5bf9\u4e8e\u6e90\u8bb0\u5f55\uff0c\u5c06\u8bb0\u5f55\u952e\u548c\u503c\uff08\u53ca\u5176\u6a21\u5f0f\uff09\u3001\u6240\u6709\u6807\u5934\u4ee5\u53ca\u65f6\u95f4\u6233\u3001Kafka \u4e3b\u9898\u3001Kafka \u5206\u533a\u3001\u6e90\u5206\u533a\u548c\u6e90\u504f\u79fb\u91cf\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd9\u662f\u201cfalse\u201d\uff0c\u8fd9\u5c06\u963b\u6b62\u8bb0\u5f55\u952e\u3001\u503c\u548c\u6807\u5934\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u3002 Type: boolean Default: false Valid Values: Importance: medium","title":"errors.log.include.messages"},{"location":"3/#errorsdeadletterqueuetopicname","text":"\u7528\u4f5c\u6b7b\u4fe1\u961f\u5217 (DLQ) \u7684\u4e3b\u9898\u540d\u79f0\uff0c\u7528\u4e8e\u5904\u7406\u7531\u6b64\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6216\u5176\u8f6c\u6362\u6216\u8f6c\u6362\u5668\u65f6\u5bfc\u81f4\u9519\u8bef\u7684\u6d88\u606f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e3b\u9898\u540d\u79f0\u4e3a\u7a7a\uff0c\u8fd9\u610f\u5473\u7740 DLQ \u4e2d\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u6d88\u606f\u3002 Type: string Default: \"\" Valid Values: Importance: medium","title":"errors.deadletterqueue.topic.name"},{"location":"3/#errorsdeadletterqueuetopicreplicationfactor","text":"\u5f53\u6b7b\u4fe1\u961f\u5217\u4e3b\u9898\u5c1a\u4e0d\u5b58\u5728\u65f6\uff0c\u7528\u4e8e\u521b\u5efa\u8be5\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u3002 Type: short Default: 3 Valid Values: Importance: medium","title":"errors.deadletterqueue.topic.replication.factor"},{"location":"3/#errorsdeadletterqueuecontextheadersenable","text":"\u5982\u679c\u4e3a true\uff0c\u5219\u5c06\u5305\u542b\u9519\u8bef\u4e0a\u4e0b\u6587\u7684\u6807\u5934\u6dfb\u52a0\u5230\u5199\u5165\u6b7b\u4fe1\u961f\u5217\u7684\u6d88\u606f\u4e2d\u3002\u4e3a\u4e86\u907f\u514d\u4e0e\u539f\u59cb\u8bb0\u5f55\u4e2d\u7684\u6807\u5934\u51b2\u7a81\uff0c\u6240\u6709\u9519\u8bef\u4e0a\u4e0b\u6587\u6807\u5934\u952e\uff0c\u6240\u6709\u9519\u8bef\u4e0a\u4e0b\u6587\u6807\u5934\u952e\u90fd\u5c06\u4ee5 __connect.errors. Type: boolean Default: false Valid Values: Importance: medium","title":"errors.deadletterqueue.context.headers.enable"},{"location":"3/#36-kafka","text":"\u4ee5\u4e0b\u662f Kafka Streams \u5ba2\u6237\u7aef\u5e93\u7684\u914d\u7f6e\u3002","title":"3.6 Kafka\u6d41\u914d\u7f6e"},{"location":"3/#applicationid","text":"\u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u8bc6\u7b26\u3002\u5728 Kafka \u96c6\u7fa4\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u5b83\u7528\u4f5c 1) \u9ed8\u8ba4\u5ba2\u6237\u7aef ID \u524d\u7f00\uff0c2) \u7528\u4e8e\u6210\u5458\u8d44\u683c\u7ba1\u7406\u7684\u7ec4 ID\uff0c3) \u53d8\u66f4\u65e5\u5fd7\u4e3b\u9898\u524d\u7f00\u3002 Type: string Default: Valid Values: Importance: high","title":"application.id"},{"location":"3/#bootstrapservers_3","text":"\u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: Valid Values: Importance: high","title":"bootstrap.servers"},{"location":"3/#numstandbyreplicas","text":"\u6bcf\u4e2a\u4efb\u52a1\u7684\u5907\u7528\u526f\u672c\u6570\u3002 Type: int Default: 0 Valid Values: Importance: high","title":"num.standby.replicas"},{"location":"3/#statedir","text":"\u72b6\u6001\u5b58\u50a8\u7684\u76ee\u5f55\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u5171\u4eab\u76f8\u540c\u5e95\u5c42\u6587\u4ef6\u7cfb\u7edf\u7684\u6bcf\u4e2a\u6d41\u5b9e\u4f8b\uff0c\u6b64\u8def\u5f84\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 Type: string Default: /var/folders/6f/c4r3kvwd76l9c0k_59qzh_r00000gn/T//kafka-streams Valid Values: Importance: high","title":"state.dir"},{"location":"3/#acceptablerecoverylag","text":"\u5ba2\u6237\u7aef\u88ab\u89c6\u4e3a\u5df2\u8d76\u4e0a\u8db3\u4ee5\u63a5\u6536\u6d3b\u52a8\u4efb\u52a1\u5206\u914d\u7684\u6700\u5927\u53ef\u63a5\u53d7\u6ede\u540e\uff08\u8981\u8d76\u4e0a\u7684\u504f\u79fb\u91cf\u6570\u91cf\uff09\u3002\u5206\u914d\u540e\uff0c\u5b83\u4ecd\u7136\u4f1a\u5728\u5904\u7406\u4e4b\u524d\u6062\u590d\u53d8\u66f4\u65e5\u5fd7\u7684\u5176\u4f59\u90e8\u5206\u3002\u4e3a\u4e86\u907f\u514d\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u5904\u7406\u6682\u505c\uff0c\u6b64\u914d\u7f6e\u5e94\u5bf9\u5e94\u4e8e\u7ed9\u5b9a\u5de5\u4f5c\u8d1f\u8f7d\u7684\u8fdc\u4f4e\u4e8e\u4e00\u5206\u949f\u7684\u6062\u590d\u65f6\u95f4\u3002\u5fc5\u987b\u81f3\u5c11\u4e3a 0\u3002 Type: long Default: 10000 Valid Values: [0,...] Importance: medium","title":"acceptable.recovery.lag"},{"location":"3/#cachemaxbytesbuffering","text":"\u7528\u4e8e\u8de8\u6240\u6709\u7ebf\u7a0b\u7f13\u51b2\u7684\u6700\u5927\u5185\u5b58\u5b57\u8282\u6570 Type: long Default: 10485760 Valid Values: [0,...] Importance: medium","title":"cache.max.bytes.buffering"},{"location":"3/#clientid_3","text":"\u7528\u4e8e\u5185\u90e8\u6d88\u8d39\u8005\u3001\u751f\u4ea7\u8005\u548c\u6062\u590d\u6d88\u8d39\u8005\u7684\u5ba2\u6237\u7aef ID \u7684 ID \u524d\u7f00\u5b57\u7b26\u4e32\uff0c\u6a21\u5f0f\u4e3a <client.id>-StreamThread-<threadSequenceNumber$gt;-<consumer|producer|restore-consumer> \u3002 Type: string Default: \"\" Valid Values: Importance: medium","title":"client.id"},{"location":"3/#defaultdeserializationexceptionhandler","text":"\u5b9e\u73b0\u8be5 org.apache.kafka.streams.errors.DeserializationExceptionHandler \u63a5\u53e3\u7684\u5f02\u5e38\u5904\u7406\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.errors.LogAndFailExceptionHandler Valid Values: Importance: medium","title":"default.deserialization.exception.handler"},{"location":"3/#defaultkeyserde","text":"\u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u952e\u7684\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668/\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 org.apache.kafka.common.serialization.Serde \u8bf7\u6ce8\u610f\uff0c\u5f53\u4f7f\u7528\u7a97\u53e3\u5316 Serde \u7c7b\u65f6\uff0c\u8fd8\u9700\u8981\u901a\u8fc7\u201cdefault.windowed.key.serde.inner\u201d\u6216\u201cdefault.windowed.value.serde.inner\u201d\u8bbe\u7f6e\u5b9e\u73b0\u8be5\u63a5\u53e3\u7684\u5185\u90e8 serde \u7c7b Type: class Default: null Valid Values: Importance: medium","title":"default.key.serde"},{"location":"3/#defaultlistkeyserdeinner","text":"\u5b9e\u73b0\u63a5\u53e3\u7684 key \u7684 list serde \u7684\u9ed8\u8ba4\u5185\u90e8\u7c7b org.apache.kafka.common.serialization.Serde \u3002\u5f53\u4e14\u4ec5\u5f53 default.key.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Type: class Default: null Valid Values: Importance: medium","title":"default.list.key.serde.inner"},{"location":"3/#defaultlistkeyserdetype","text":"\u5b9e\u73b0 java.util.List \u63a5\u53e3\u7684\u952e\u7684\u9ed8\u8ba4\u7c7b\u3002\u5f53\u4e14\u4ec5\u5f53 default.key.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Note \u5f53\u4f7f\u7528 list serde \u7c7b\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e org.apache.kafka.common.serialization.Serde \u901a\u8fc7 'default.list.key.serde.inner' \u5b9e\u73b0\u63a5\u53e3\u7684\u5185\u90e8 serde \u7c7b\u65f6\uff0c\u624d\u4f1a\u8bfb\u53d6\u6b64\u914d\u7f6e Type: class Default: null Valid Values: Importance: medium","title":"default.list.key.serde.type"},{"location":"3/#defaultlistvalueserdeinner","text":"\u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u503c\u7684\u5217\u8868 serde \u7684\u9ed8\u8ba4\u5185\u90e8\u7c7b\u3002\u5f53\u4e14\u4ec5\u5f53 default.value.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Type: class Default: null Valid Values: Importance: medium","title":"default.list.value.serde.inner"},{"location":"3/#defaultlistvalueserdetype","text":"\u5b9e\u73b0 java.util.List \u63a5\u53e3\u7684\u503c\u7684\u9ed8\u8ba4\u7c7b\u3002\u5f53\u4e14\u4ec5\u5f53 default.value.serde \u914d\u7f6e\u8bbe\u7f6e\u4e3a org.apache.kafka.common.serialization.Serdes.ListSerde Note \u5f53\u4f7f\u7528 list serde \u7c7b\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e org.apache.kafka.common.serialization.Serde \u901a\u8fc7 'default.list.value.serde.inner' \u5b9e\u73b0\u63a5\u53e3\u7684\u5185\u90e8 serde \u7c7b\u65f6\uff0c\u624d\u4f1a\u8bfb\u53d6\u6b64\u914d\u7f6e Type: class Default: null Valid Values: Importance: medium","title":"default.list.value.serde.type"},{"location":"3/#defaultproductionexceptionhandler","text":"\u5b9e\u73b0\u8be5 org.apache.kafka.streams.errors.ProductionExceptionHandler \u63a5\u53e3\u7684\u5f02\u5e38\u5904\u7406\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.errors.DefaultProductionExceptionHandler Valid Values: Importance: medium","title":"default.production.exception.handler"},{"location":"3/#defaulttimestampextractor","text":"\u5b9e\u73b0\u8be5 org.apache.kafka.streams.processor.TimestampExtractor \u63a5\u53e3\u7684\u9ed8\u8ba4\u65f6\u95f4\u6233\u63d0\u53d6\u5668\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.processor.FailOnInvalidTimestamp Valid Values: Importance: medium","title":"default.timestamp.extractor"},{"location":"3/#defaultvalueserde","text":"\u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u503c\u7684\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668/\u53cd\u5e8f\u5217\u5316\u5668\u7c7b\u3002 \u8bf7\u6ce8\u610f\uff0c\u5f53\u4f7f\u7528\u7a97\u53e3\u5316 Serde \u7c7b\u65f6\uff0c\u9700\u8981\u901a\u8fc7 default.windowed.key.serde.inner \u6216 default.windowed \u8bbe\u7f6e\u5b9e\u73b0 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u7684\u5185\u90e8. Default serializer / deserializer class for value that implements the org.apache.kafka.common.serialization.Serde interface. Note when windowed serde class is used, one needs to set the inner serde class that implements the org.apache.kafka.common.serialization.Serde interface via 'default.windowed.key.serde.inner' or 'default.windowed.value.serde.inner' as well Type: class Default: null Valid Values: Importance: medium","title":"default.value.serde"},{"location":"3/#maxtaskidlems","text":"\u6b64\u914d\u7f6e\u63a7\u5236\u8fde\u63a5\u548c\u5408\u5e76\u662f\u5426\u53ef\u80fd\u4ea7\u751f\u65e0\u5e8f\u7ed3\u679c\u3002 \u914d\u7f6e\u503c\u662f\u6d41\u4efb\u52a1\u5728\u5b8c\u5168\u8d76\u4e0a\u67d0\u4e9b\uff08\u4f46\u4e0d\u662f\u5168\u90e8\uff09\u8f93\u5165\u5206\u533a\u4ee5\u7b49\u5f85\u751f\u4ea7\u8005\u53d1\u9001\u9644\u52a0\u8bb0\u5f55\u5e76\u907f\u514d\u6f5c\u5728\u7684\u65e0\u5e8f\u8bb0\u5f55\u5904\u7406\u65f6\u4fdd\u6301\u7a7a\u95f2\u72b6\u6001\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09 \u8de8\u591a\u4e2a\u8f93\u5165\u6d41\u3002 \u9ed8\u8ba4\u503c\uff08\u96f6\uff09\u4e0d\u7b49\u5f85\u751f\u4ea7\u8005\u53d1\u9001\u66f4\u591a\u8bb0\u5f55\uff0c\u4f46\u5b83\u4f1a\u7b49\u5f85\u83b7\u53d6\u4ee3\u7406\u4e0a\u5df2\u5b58\u5728\u7684\u6570\u636e\u3002 \u6b64\u9ed8\u8ba4\u503c\u610f\u5473\u7740\u5bf9\u4e8e\u4ee3\u7406\u4e0a\u5df2\u5b58\u5728\u7684\u8bb0\u5f55\uff0cStreams \u5c06\u6309\u65f6\u95f4\u6233\u987a\u5e8f\u5904\u7406\u5b83\u4eec\u3002 \u8bbe\u7f6e\u4e3a -1 \u4ee5\u5b8c\u5168\u7981\u7528\u7a7a\u95f2\u5e76\u5904\u7406\u4efb\u4f55\u672c\u5730\u53ef\u7528\u7684\u6570\u636e\uff0c\u5373\u4f7f\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u4ea7\u751f\u65e0\u5e8f\u5904\u7406\u3002 Type: long Default: 0 Valid Values: Importance: medium","title":"max.task.idle.ms"},{"location":"3/#maxwarmupreplicas","text":"\u53ef\u4ee5\u4e00\u6b21\u5206\u914d\u7684\u6700\u5927\u9884\u70ed\u526f\u672c\u6570\uff08\u8d85\u51fa\u914d\u7f6e\u7684 num.standbys \u7684\u989d\u5916\u5907\u7528\u526f\u672c\uff09\uff0c\u4ee5\u4fbf\u5728\u4efb\u52a1\u5728\u5df2\u91cd\u65b0\u5206\u914d\u5230\u7684\u53e6\u4e00\u5b9e\u4f8b\u4e0a\u9884\u70ed\u65f6\u4fdd\u6301\u4efb\u52a1\u5728\u4e00\u4e2a\u5b9e\u4f8b\u4e0a\u53ef\u7528\u3002\u7528\u4e8e\u9650\u5236\u53ef\u7528\u4e8e\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027\u7684\u989d\u5916\u4ee3\u7406\u6d41\u91cf\u548c\u96c6\u7fa4\u72b6\u6001\u3002\u5fc5\u987b\u81f3\u5c11\u4e3a 1\u3002\u6ce8\u610f\uff0c1 \u4e2a\u9884\u70ed\u526f\u672c\u5bf9\u5e94\u4e00\u4e2a Stream Task\u3002\u6b64\u5916\uff0c\u8bf7\u6ce8\u610f\uff0c\u6bcf\u4e2a\u9884\u70ed\u526f\u672c\u53ea\u80fd\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u63d0\u5347\u4e3a\u6d3b\u52a8\u4efb\u52a1\uff08\u901a\u5e38\u5728\u6240\u8c13\u7684\u63a2\u6d4b\u91cd\u65b0\u5e73\u8861\u671f\u95f4\uff0c\u5176\u53d1\u751f\u9891\u7387\u7531\u201cprobing.rebalance.interval.ms\u201d\u914d\u7f6e\u6307\u5b9a\uff09\u3002\u8fd9\u610f\u5473\u7740\u6d3b\u52a8\u4efb\u52a1\u4ece\u4e00\u4e2a Kafka Streams \u5b9e\u4f8b\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u5b9e\u4f8b\u7684\u6700\u5927\u901f\u7387\u53ef\u4ee5\u901a\u8fc7 (`max.warmup.replicas` / `probing.rebalance. Type: int Default: 2 Valid Values: [1\uff0c...] Importance: medium","title":"max.warmup.replicas"},{"location":"3/#numstreamthreads","text":"\u6267\u884c\u6d41\u5904\u7406\u7684\u7ebf\u7a0b\u6570\u3002 Type: int Default: 1 Valid Values: Importance: medium","title":"num.stream.threads"},{"location":"3/#processingguarantee","text":"\u5e94\u4f7f\u7528\u7684\u5904\u7406\u4fdd\u8bc1\u3002\u53ef\u80fd\u7684\u503c\u4e3a at_least_once \uff08\u9ed8\u8ba4\uff09\u548c exactly_once_v2 \uff08\u9700\u8981\u4ee3\u7406\u7248\u672c 2.5 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002\u5df2\u5f03\u7528\u7684\u9009\u9879\u6709 exactly_once \uff08\u9700\u8981\u4ee3\u7406\u7248\u672c 0.11.0 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u548c exactly_once_beta \uff08\u9700\u8981\u4ee3\u7406\u7248\u672c 2.5 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e00\u6b21\u5904\u7406\u9700\u8981\u81f3\u5c11\u4e09\u4e2a\u4ee3\u7406\u7684\u96c6\u7fa4\uff0c\u63a8\u8350\u7684\u751f\u4ea7\u8bbe\u7f6e\u662f\u4ec0\u4e48\uff1f\u5bf9\u4e8e\u5f00\u53d1\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4ee3\u7406\u8bbe\u7f6e transaction.state.log.replication.factor \u548c\u6765\u66f4\u6539\u6b64\u8bbe\u7f6e transaction.state.log.min.isr \u3002 Type: string Default: \u81f3\u5c11\u4e00\u6b21 Valid Values: [at_least_once\u3001exact_once\u3001exact_once_beta\u3001exact_once_v2] Importance: medium","title":"processing.guarantee"},{"location":"3/#rackawareassignmenttags","text":"\u7528\u4e8e\u8de8 Kafka Streams \u5b9e\u4f8b\u5206\u914d\u5907\u7528\u526f\u672c\u7684\u5ba2\u6237\u7aef\u6807\u7b7e\u952e\u5217\u8868\u3002\u914d\u7f6e\u540e\uff0cKafka Streams \u5c06\u5c3d\u6700\u5927\u52aa\u529b\u5728\u6bcf\u4e2a\u5ba2\u6237\u7aef\u6807\u7b7e\u7ef4\u5ea6\u4e0a\u5206\u914d\u5907\u7528\u4efb\u52a1\u3002 Type: list Default: \"\" Valid Values: \u6700\u591a\u5305\u542b 5 \u4e2a\u5143\u7d20\u7684list Importance: medium","title":"rack.aware.assignment.tags"},{"location":"3/#replicationfactor","text":"\u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u521b\u5efa\u7684\u66f4\u6539\u65e5\u5fd7\u4e3b\u9898\u548c\u91cd\u65b0\u5206\u533a\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u3002\u9ed8\u8ba4\u503c -1 \uff08\u542b\u4e49\uff1a\u4f7f\u7528\u4ee3\u7406\u9ed8\u8ba4\u590d\u5236\u56e0\u5b50\uff09\u9700\u8981\u4ee3\u7406\u7248\u672c 2.4 \u6216\u66f4\u9ad8\u7248\u672c Type: int Default: -1 Valid Values: Importance: medium","title":"replication.factor"},{"location":"3/#securityprotocol_3","text":"\u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium","title":"security.protocol"},{"location":"3/#statestorecachemaxbytes","text":"\u7528\u4e8e\u6240\u6709\u7ebf\u7a0b\u7684\u72b6\u6001\u5b58\u50a8\u7f13\u5b58\u7684\u6700\u5927\u5185\u5b58\u5b57\u8282\u6570 Type: long Default: 10485760 (10 mebibytes) Valid Values: [0,...] Importance: medium","title":"statestore.cache.max.bytes"},{"location":"3/#tasktimeoutms","text":"\u4efb\u52a1\u53ef\u80fd\u56e0\u5185\u90e8\u9519\u8bef\u800c\u505c\u6b62\u5e76\u91cd\u8bd5\u76f4\u5230\u51fa\u73b0\u9519\u8bef\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5bf9\u4e8e 0 \u6beb\u79d2\u7684\u8d85\u65f6\uff0c\u4efb\u52a1\u5c06\u9488\u5bf9\u7b2c\u4e00\u4e2a\u5185\u90e8\u9519\u8bef\u5f15\u53d1\u9519\u8bef\u3002\u5bf9\u4e8e\u4efb\u4f55\u5927\u4e8e 0 \u6beb\u79d2\u7684\u8d85\u65f6\uff0c\u4efb\u52a1\u5c06\u5728\u5f15\u53d1\u9519\u8bef\u4e4b\u524d\u81f3\u5c11\u91cd\u8bd5\u4e00\u6b21\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: medium","title":"task.timeout.ms"},{"location":"3/#topologyoptimization","text":"\u544a\u8bc9 Kafka Streams \u662f\u5426\u5e94\u8be5\u4f18\u5316\u62d3\u6251\u4ee5\u53ca\u5e94\u7528\u54ea\u4e9b\u4f18\u5316\u7684\u914d\u7f6e\u3002\u53ef\u63a5\u53d7\u7684\u503c\u4e3a\uff1a\u201c+NO_OPTIMIZATION+\u201d\u3001\u201c+OPTIMIZE+\u201d\u6216\u4ee5\u9017\u53f7\u5206\u9694\u7684\u7279\u5b9a\u4f18\u5316\u5217\u8868\uff1a(\u201c+REUSE_KTABLE_SOURCE_TOPICS+\u201d\u3001\u201c+MERGE_REPARTITION_TOPICS+\u201d+\u201cSINGLE_STORE_SELF_JOIN+\u201d)\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a\u201cNO_OPTIMIZATION\u201d\u3002 Type: string Default: none Valid Values: org.apache.kafka.streams.StreamsConfig$$Lambda$3/1996181658@5010be6 Importance: medium","title":"topology.optimization"},{"location":"3/#applicationserver","text":"\u6307\u5411\u7528\u6237\u5b9a\u4e49\u7aef\u70b9\u7684\u4e3b\u673a\uff1a\u7aef\u53e3\u5bf9\uff0c\u53ef\u7528\u4e8e\u6b64 KafkaStreams \u5b9e\u4f8b\u4e0a\u7684\u72b6\u6001\u5b58\u50a8\u53d1\u73b0\u548c\u4ea4\u4e92\u5f0f\u67e5\u8be2\u3002 Type: string Default: \"\" Valid Values: Importance: low","title":"application.server"},{"location":"3/#autojmxreporter_4","text":"\u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"auto.jmx.reporter"},{"location":"3/#bufferedrecordsperpartition","text":"\u6bcf\u4e2a\u5206\u533a\u7f13\u51b2\u7684\u6700\u5927\u8bb0\u5f55\u6570\u3002 Type: int Default: 1000 Valid Values: Importance: low","title":"buffered.records.per.partition"},{"location":"3/#builtinmetricsversion","text":"\u8981\u4f7f\u7528\u7684\u5185\u7f6e\u6307\u6807\u7684\u7248\u672c\u3002 Type: string Default: latest Valid Values: [latest] Importance: low","title":"built.in.metrics.version"},{"location":"3/#commitintervalms","text":"\u63d0\u4ea4\u5904\u7406\u8fdb\u5ea6\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5bf9\u4e8e\u81f3\u5c11\u4e00\u6b21\u5904\u7406\uff0c\u63d0\u4ea4\u610f\u5473\u7740\u4fdd\u5b58\u5904\u7406\u5668\u7684\u4f4d\u7f6e\uff08\u5373\u504f\u79fb\u91cf\uff09\u3002\u5bf9\u4e8eexactly-once\u5904\u7406\u6765\u8bf4\uff0c\u610f\u5473\u7740\u63d0\u4ea4\u4e8b\u52a1\uff0c\u5305\u62ec\u4fdd\u5b58\u4f4d\u7f6e\u4ee5\u53ca\u4f7f\u8f93\u51fa\u4e3b\u9898\u4e2d\u63d0\u4ea4\u7684\u6570\u636e\u5bf9\u9694\u79bb\u7ea7\u522b\u4e3aread_commissed\u7684\u6d88\u8d39\u8005\u53ef\u89c1\u3002\uff08\u6ce8\u610f\uff0c\u5982\u679c processing.guarantee \u8bbe\u7f6e\u4e3a exactly_once_v2 , exactly_once \uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a 100 \uff0c\u5426\u5219\u9ed8\u8ba4\u503c\u4e3a 30000 \u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"commit.interval.ms"},{"location":"3/#connectionsmaxidlems_4","text":"\u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 540000 (9 minutes) Valid Values: Importance: low","title":"connections.max.idle.ms"},{"location":"3/#defaultclientsupplier","text":"\u5b9e\u73b0\u8be5 org.apache.kafka.streams.KafkaClientSupplier \u63a5\u53e3\u7684\u5ba2\u6237\u7aef\u4f9b\u5e94\u5546\u7c7b\u3002 Type: class Default: org.apache.kafka.streams.processor.internals.DefaultKafkaClientSupplier Valid Values: Importance: low","title":"default.client.supplier"},{"location":"3/#defaultdslstore","text":"DSL \u8fd0\u8425\u5546\u4f7f\u7528\u7684\u9ed8\u8ba4\u72b6\u6001\u5b58\u50a8\u7c7b\u578b\u3002 Type: string Default: rocksDB Valid Values: [rocksDB\uff0cin_memory] Importance: low","title":"default.dsl.store"},{"location":"3/#metadatamaxagems_3","text":"\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low","title":"metadata.max.age.ms"},{"location":"3/#metricreporters_4","text":"\u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low","title":"metric.reporters"},{"location":"3/#metricsnumsamples_4","text":"\u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low","title":"metrics.num.samples"},{"location":"3/#metricsrecordinglevel_4","text":"\u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low","title":"metrics.recording.level"},{"location":"3/#metricssamplewindowms_4","text":"\u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"metrics.sample.window.ms"},{"location":"3/#pollms","text":"\u963b\u6b62\u7b49\u5f85\u8f93\u5165\u7684\u65f6\u95f4\u91cf\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"poll.ms"},{"location":"3/#probingrebalanceintervalms","text":"\u89e6\u53d1\u91cd\u65b0\u5e73\u8861\u4ee5\u63a2\u6d4b\u5df2\u5b8c\u6210\u9884\u70ed\u5e76\u51c6\u5907\u597d\u6fc0\u6d3b\u7684\u9884\u70ed\u526f\u672c\u4e4b\u524d\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5c06\u7ee7\u7eed\u89e6\u53d1\u63a2\u6d4b\u91cd\u65b0\u5e73\u8861\uff0c\u76f4\u5230\u5206\u914d\u5e73\u8861\u3002\u5fc5\u987b\u81f3\u5c11 1 \u5206\u949f\u3002 Type: long Default: 600000 (10 minutes) Valid Values: [60000\uff0c...] Importance: low","title":"probing.rebalance.interval.ms"},{"location":"3/#receivebufferbytes_3","text":"\u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 32768\uff0832 KB\uff09 Valid Values: [-1\uff0c...] Importance: low","title":"receive.buffer.bytes"},{"location":"3/#reconnectbackoffmaxms_3","text":"\u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002 \u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low","title":"reconnect.backoff.max.ms"},{"location":"3/#reconnectbackoffms_3","text":"\u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002 \u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002 \u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low","title":"reconnect.backoff.ms"},{"location":"3/#repartitionpurgeintervalms","text":"\u4ece\u91cd\u65b0\u5206\u533a\u4e3b\u9898\u4e2d\u5220\u9664\u5b8c\u5168\u4f7f\u7528\u7684\u8bb0\u5f55\u7684\u9891\u7387\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 \u81ea\u4e0a\u6b21\u6e05\u9664\u540e\u81f3\u5c11\u4f1a\u5728\u8be5\u503c\u4e4b\u540e\u8fdb\u884c\u6e05\u9664\uff0c\u4f46\u53ef\u80fd\u4f1a\u5ef6\u8fdf\u5230\u4ee5\u540e\u3002 \uff08\u8bf7\u6ce8\u610f\uff0c\u4e0e commit.interval.ms \u4e0d\u540c\uff0c\u5f53 processing.guarantee \u8bbe\u7f6e\u4e3a exactly_once_v2 \u65f6\uff0c\u8be5\u503c\u7684\u9ed8\u8ba4\u503c\u4fdd\u6301\u4e0d\u53d8\uff09\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"repartition.purge.interval.ms"},{"location":"3/#requesttimeoutms_4","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002 \u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 40000 (40 seconds) Valid Values: [0,...] Importance: low","title":"request.timeout.ms"},{"location":"3/#retries_1","text":"\u8bbe\u7f6e\u5927\u4e8e\u96f6\u7684\u503c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u91cd\u65b0\u53d1\u9001\u56e0\u6f5c\u5728\u7684\u6682\u65f6\u6027\u9519\u8bef\u800c\u5931\u8d25\u7684\u4efb\u4f55\u8bf7\u6c42\u3002\u5efa\u8bae\u5c06\u8be5\u503c\u8bbe\u7f6e\u4e3a\u96f6\u6216\u201cMAX_VALUE\u201d\uff0c\u5e76\u4f7f\u7528\u76f8\u5e94\u7684\u8d85\u65f6\u53c2\u6570\u6765\u63a7\u5236\u5ba2\u6237\u7aef\u5e94\u91cd\u8bd5\u8bf7\u6c42\u7684\u65f6\u95f4\u3002 Type: int Default: 0 Valid Values: [0\uff0c...\uff0c2147483647] Importance: low","title":"retries"},{"location":"3/#retrybackoffms_3","text":"\u5c1d\u8bd5\u91cd\u8bd5\u5bf9\u7ed9\u5b9a\u4e3b\u9898\u5206\u533a\u7684\u5931\u8d25\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low","title":"retry.backoff.ms"},{"location":"3/#rockdbconfigsetter","text":"Rocks DB \u914d\u7f6e\u8bbe\u7f6e\u5668\u7c7b\u6216\u5b9e\u73b0\u8be5 org.apache.kafka.streams.state.RocksDBConfigSetter \u63a5\u53e3\u7684\u7c7b\u540d Type: class Default: null Valid Values: Importance: low","title":"rockdb.config.setter"},{"location":"3/#sendbufferbytes_3","text":"\u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: low","title":"send.buffer.bytes"},{"location":"3/#statuscleanupdelayms","text":"\u5206\u533a\u8fc1\u79fb\u540e\u5220\u9664\u72b6\u6001\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002 state.cleanup.delay.ms \u4ec5\u5220\u9664\u81f3\u5c11\u672a\u4fee\u6539\u7684state.dir Type: long Default: 600000 (10 minutes) Valid Values: Importance: low","title":"status.cleanup.delay.ms"},{"location":"3/#upgradefrom","text":"\u5141\u8bb8\u4ee5\u5411\u540e\u517c\u5bb9\u7684\u65b9\u5f0f\u5347\u7ea7\u3002\u4ece [0.10.0, 1.1] \u5347\u7ea7\u5230 2.0+ \u6216\u4ece [2.0, 2.3] \u5347\u7ea7\u5230 2.4+ \u65f6\u9700\u8981\u8fd9\u6837\u505a\u3002\u4ece 3.3 \u5347\u7ea7\u5230\u66f4\u65b0\u7248\u672c\u65f6\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u6b64\u914d\u7f6e\u3002\u9ed8\u8ba4\u4e3a\u201cnull\u201d\u3002\u63a5\u53d7\u7684\u503c\u4e3a\u201c0.10.0\u201d\u3001\u201c0.10.1\u201d\u3001\u201c0.10.2\u201d\u3001\u201c0.11.0\u201d\u3001\u201c1.0\u201d\u3001\u201c1.1\u201d\u3001\u201c2.0\u201d\u3001\u201c2.1\u201d\u3001\u201c2.2\u201d\u3001\u201c2.3\u201d \u3001\u201c2.4\u201d\u3001\u201c2.5\u201d\u3001\u201c2.6\u201d\u3001\u201c2.7\u201d\u3001\u201c2.8\u201d\u3001\u201c3.0\u201d\u3001\u201c3.1\u201d\u3001\u201c3.2\u201d\u3001\u201c3.3\u201d\u3001\u201c3.4\u201d\uff08\u7528\u4e8e\u4ece\u76f8\u5e94\u7684\u65e7\u7248\u672c\u5347\u7ea7\uff09\u3002 Type: string Default: null Valid Values: [null, 0.10.0, 0.10.1, 0.10.2, 0.11.0, 1.0, 1.1, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 3.0, 3.1, 3.2, 3.3, 3.4] Importance: low","title":"upgrade.from"},{"location":"3/#windowsizems","text":"\u8bbe\u7f6e\u89e3\u4e32\u5668\u7684\u7a97\u53e3\u5927\u5c0f\u4ee5\u8ba1\u7b97\u7a97\u53e3\u7ed3\u675f\u65f6\u95f4\u3002 Type: long Default: null Valid Values: Importance: low","title":"window.size.ms"},{"location":"3/#windowedinnerclassserde","text":"\u7a97\u53e3\u8bb0\u5f55\u5185\u90e8\u7c7b\u7684\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668/\u53cd\u5e8f\u5217\u5316\u5668\u3002\u5fc5\u987b\u5b9e\u73b0\u8be5 org.apache.kafka.common.serialization.Serde \u63a5\u53e3\u3002\u8bf7\u6ce8\u610f\uff0c\u5728 KafkaStreams \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bbe\u7f6e\u6b64\u914d\u7f6e\u4f1a\u5bfc\u81f4\u9519\u8bef\uff0c\u56e0\u4e3a\u5b83\u53ea\u80fd\u4ece\u666e\u901a\u6d88\u8d39\u8005\u5ba2\u6237\u7aef\u4f7f\u7528\u3002 Type: string Default: null Valid Values: Importance: low","title":"windowed.inner.class.serde"},{"location":"3/#windowstorechangelogadditionalretentionms","text":"\u6dfb\u52a0\u5230 Windows MaintenanceMs \u4ee5\u786e\u4fdd\u6570\u636e\u4e0d\u4f1a\u8fc7\u65e9\u5730\u4ece\u65e5\u5fd7\u4e2d\u5220\u9664\u3002\u5141\u8bb8\u65f6\u949f\u6f02\u79fb\u3002\u9ed8\u8ba4\u4e3a 1 \u5929 Type: long Default: 86400000 (1 day) Valid Values: Importance: low","title":"windowstore.changelog.additional.retention.ms"},{"location":"3/#37","text":"\u4ee5\u4e0b\u662f Kafka \u7ba1\u7406\u5ba2\u6237\u7aef\u5e93\u7684\u914d\u7f6e\u3002","title":"3.7 \u7ba1\u7406\u914d\u7f6e"},{"location":"3/#bootstrapservers_4","text":"\u7528\u4e8e\u5efa\u7acb\u4e0e Kafka \u96c6\u7fa4\u7684\u521d\u59cb\u8fde\u63a5\u7684\u4e3b\u673a/\u7aef\u53e3\u5bf9\u5217\u8868\u3002\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u6240\u6709\u670d\u52a1\u5668\uff0c\u65e0\u8bba\u6b64\u5904\u6307\u5b9a\u54ea\u4e9b\u670d\u52a1\u5668\u8fdb\u884c\u5f15\u5bfc - \u8be5\u5217\u8868\u4ec5\u5f71\u54cd\u7528\u4e8e\u53d1\u73b0\u5168\u5957\u670d\u52a1\u5668\u7684\u521d\u59cb\u4e3b\u673a\u3002\u8be5\u5217\u8868\u5e94\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f host1:port1,host2:port2,... \u3002\u7531\u4e8e\u8fd9\u4e9b\u670d\u52a1\u5668\u4ec5\u7528\u4e8e\u521d\u59cb\u8fde\u63a5\u4ee5\u53d1\u73b0\u5b8c\u6574\u7684\u96c6\u7fa4\u6210\u5458\u8d44\u683c\uff08\u53ef\u80fd\u4f1a\u52a8\u6001\u66f4\u6539\uff09\uff0c\u56e0\u6b64\u6b64\u5217\u8868\u4e0d\u9700\u8981\u5305\u542b\u5b8c\u6574\u7684\u670d\u52a1\u5668\u96c6\uff08\u4e0d\u8fc7\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u9632\u670d\u52a1\u5668\u505c\u673a\uff09 \u3002 Type: list Default: Valid Values: Importance: high","title":"bootstrap.servers"},{"location":"3/#sslkeypassword_4","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u4e2d\u79c1\u94a5\u7684\u5bc6\u7801\u6216\u201cssl.keystore.key\u201d\u4e2d\u6307\u5b9a\u7684 PEM \u5bc6\u94a5\u7684\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.key.password"},{"location":"3/#sslkeystorecertificatechain_4","text":"\u8bc1\u4e66\u94fe\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u5217\u8868\u7684 PEM \u683c\u5f0f Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.certificate.chain"},{"location":"3/#sslkeystorekey_4","text":"\u79c1\u94a5\u91c7\u7528\u201cssl.keystore.type\u201d\u6307\u5b9a\u7684\u683c\u5f0f\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 PKCS#8 \u5bc6\u94a5\u7684 PEM \u683c\u5f0f\u3002\u5982\u679c\u5bc6\u94a5\u5df2\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u201cssl.key.password\u201d\u6307\u5b9a\u5bc6\u94a5\u5bc6\u7801 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.key"},{"location":"3/#sslkeystorelocation_4","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u8fd9\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u7684\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.keystore.location"},{"location":"3/#sslkeystorepassword_4","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u5b58\u50a8\u5bc6\u7801\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u4ec5\u5728\u914d\u7f6e\u4e86\u201cssl.keystore.location\u201d\u65f6\u624d\u9700\u8981\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u5bc6\u94a5\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.keystore.password"},{"location":"3/#ssltruststorecertificate_3","text":"\u91c7\u7528\u201cssl.truststore.type\u201d\u6307\u5b9a\u683c\u5f0f\u7684\u53d7\u4fe1\u4efb\u8bc1\u4e66\u3002\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u4ec5\u652f\u6301\u5e26\u6709 X.509 \u8bc1\u4e66\u7684 PEM \u683c\u5f0f\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.certificate"},{"location":"3/#ssltruststorelocation_4","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002 Type: string Default: null Valid Values: Importance: high","title":"ssl.truststore.location"},{"location":"3/#ssltruststorepassword_4","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u5bc6\u7801\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u5c06\u4f7f\u7528\u914d\u7f6e\u7684\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\uff0c\u4f46\u7981\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u3002PEM \u683c\u5f0f\u4e0d\u652f\u6301\u4fe1\u4efb\u5b58\u50a8\u5bc6\u7801\u3002 Type: password Default: null Valid Values: Importance: high","title":"ssl.truststore.password"},{"location":"3/#clientdnslookup_3","text":"\u63a7\u5236\u5ba2\u6237\u7aef\u5982\u4f55\u4f7f\u7528 DNS \u67e5\u627e\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a use_all_dns_ips \uff0c\u5219\u6309\u987a\u5e8f\u8fde\u63a5\u6bcf\u4e2a\u8fd4\u56de\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u5efa\u7acb\u6210\u529f\u8fde\u63a5\u3002\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u5c06\u4f7f\u7528\u4e0b\u4e00\u4e2a IP\u3002\u4e00\u65e6\u6240\u6709 IP \u4f7f\u7528\u4e00\u6b21\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u518d\u6b21\u4ece\u4e3b\u673a\u540d\u89e3\u6790 IP\uff08\u4f46\u662f JVM \u548c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u7f13\u5b58 DNS \u540d\u79f0\u67e5\u627e\uff09\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a resolve_canonical_bootstrap_servers_only \uff0c\u5219\u5c06\u6bcf\u4e2a\u5f15\u5bfc\u5730\u5740\u89e3\u6790\u4e3a\u89c4\u8303\u540d\u79f0\u5217\u8868\u3002\u5728\u5f15\u5bfc\u9636\u6bb5\u4e4b\u540e\uff0c\u5176\u884c\u4e3a\u4e0e \u76f8\u540c use_all_dns_ips \u3002 Type: string Default: use_all_dns_ips Valid Values: [use_all_dns_ips\uff0cresolve_canonical_bootstrap_servers_only] Importance: medium","title":"client.dns.lookup"},{"location":"3/#clientid_4","text":"\u53d1\u51fa\u8bf7\u6c42\u65f6\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u7684 id \u5b57\u7b26\u4e32\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u901a\u8fc7\u5141\u8bb8\u5728\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u5305\u542b\u903b\u8f91\u5e94\u7528\u7a0b\u5e8f\u540d\u79f0\uff0c\u80fd\u591f\u8ddf\u8e2a IP/\u7aef\u53e3\u4e4b\u5916\u7684\u8bf7\u6c42\u6e90\u3002 Type: string Default: \"\" Valid Values: Importance: medium","title":"client.id"},{"location":"3/#connectionsmaxidlems_5","text":"\u5728\u8be5\u914d\u7f6e\u6307\u5b9a\u7684\u6beb\u79d2\u6570\u540e\u5173\u95ed\u7a7a\u95f2\u8fde\u63a5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: Importance: medium","title":"connections.max.idle.ms"},{"location":"3/#defaultapitimeoutms_1","text":"\u6307\u5b9a\u5ba2\u6237\u7aef API \u7684\u8d85\u65f6\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u6b64\u914d\u7f6e\u7528\u4f5c\u6240\u6709\u672a\u6307\u5b9a timeout \u53c2\u6570\u7684\u5ba2\u6237\u7aef\u64cd\u4f5c\u7684\u9ed8\u8ba4\u8d85\u65f6\u3002 Type: int Default: 60000 (1 minute) Valid Values: [0,...] Importance: medium","title":"default.api.timeout.ms"},{"location":"3/#receivebufferbytes_4","text":"\u8bfb\u53d6\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u63a5\u6536\u7f13\u51b2\u533a (SO_RCVBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 65536 (64 kibibytes) Valid Values: [-1\uff0c...] Importance: medium","title":"receive.buffer.bytes"},{"location":"3/#requesttimeoutms_5","text":"\u8be5\u914d\u7f6e\u63a7\u5236\u5ba2\u6237\u7aef\u7b49\u5f85\u8bf7\u6c42\u54cd\u5e94\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u6536\u5230\u54cd\u5e94\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u5728\u5fc5\u8981\u65f6\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u5728\u91cd\u8bd5\u6b21\u6570\u8017\u5c3d\u65f6\u4f7f\u8bf7\u6c42\u5931\u8d25\u3002 Type: int Default: 30000 (30 seconds) Valid Values: [0,...] Importance: medium","title":"request.timeout.ms"},{"location":"3/#saslclientcallbackhandlerclass_4","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u5ba2\u6237\u7aef\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002 Type: class Default: null Valid Values: Importance: medium","title":"sasl.client.callback.handler.class"},{"location":"3/#sasljaasconfig_4","text":"SASL \u8fde\u63a5\u7684 JAAS \u767b\u5f55\u4e0a\u4e0b\u6587\u53c2\u6570\u91c7\u7528 JAAS \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u683c\u5f0f\u3002JAAS \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u63cf\u8ff0 \u5982\u4e0b \u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e3a\uff1a loginModuleClass controlFlag (optionName=optionValue)*; \u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u9700\u8981listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=com.example.ScramLoginModule\uff1b Type: password Default: null Valid Values: Importance: medium","title":"sasl.jaas.config"},{"location":"3/#saslkerberosservicename_4","text":"Kafka \u8fd0\u884c\u65f6\u4f7f\u7528\u7684 Kerberos \u4e3b\u4f53\u540d\u79f0\u3002\u8fd9\u53ef\u4ee5\u5728 Kafka \u7684 JAAS \u914d\u7f6e\u6216 Kafka \u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.kerberos.service.name"},{"location":"3/#sasllogincallbackhandlerclass_4","text":"\u5b9e\u73b0 AuthenticateCallbackHandler \u63a5\u53e3\u7684 SASL \u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.callback.handler.class=com.example.CustomScramLoginCallbackHandler Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.callback.handler.class"},{"location":"3/#saslloginclass_4","text":"\u5b9e\u73b0 Login \u63a5\u53e3\u7684\u7c7b\u7684\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u3002\u5bf9\u4e8e\u4ee3\u7406\uff0c\u767b\u5f55\u914d\u7f6e\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\u548c\u5c0f\u5199\u7684 SASL \u673a\u5236\u540d\u79f0\u4f5c\u4e3a\u524d\u7f00\u3002\u4f8b\u5982\uff0clistener.name.sasl_ssl.scram-sha-256.sasl.login.class=com.example.CustomScramLogin Type: class Default: null Valid Values: Importance: medium","title":"sasl.login.class"},{"location":"3/#saslmechanism_3","text":"\u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684 SASL \u673a\u5236\u3002\u8fd9\u53ef\u4ee5\u662f\u5b89\u5168\u63d0\u4f9b\u8005\u53ef\u7528\u7684\u4efb\u4f55\u673a\u5236\u3002GSSAPI \u662f\u9ed8\u8ba4\u673a\u5236\u3002 Type: string Default: GSAPI Valid Values: Importance: medium","title":"sasl.mechanism"},{"location":"3/#sasloauthbearerjwksendpointurl_4","text":"OAuth/OIDC \u63d0\u4f9b\u8005 URL\uff0c\u63d0\u4f9b\u8005\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09 \u53ef\u4ee5\u68c0\u7d22\u3002URL \u53ef\u4ee5\u57fa\u4e8e HTTP(S) \u6216\u57fa\u4e8e\u6587\u4ef6\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5c06\u901a\u8fc7\u4ee3\u7406\u542f\u52a8\u65f6\u914d\u7f6e\u7684 URL \u4ece OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS \u6570\u636e\u3002\u6240\u6709\u5f53\u65f6\u7684\u5bc6\u94a5\u90fd\u5c06\u7f13\u5b58\u5728\u4ee3\u7406\u4e0a\u4ee5\u7528\u4e8e\u4f20\u5165\u8bf7\u6c42\u3002\u5982\u679c\u6536\u5230 JWT \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u5176\u4e2d\u5305\u542b\u5c1a\u672a\u5728\u7f13\u5b58\u4e2d\u7684\u201ckid\u201d\u6807\u5934\u58f0\u660e\u503c\uff0c\u5219\u5c06\u6839\u636e\u9700\u8981\u518d\u6b21\u67e5\u8be2 JWKS \u7aef\u70b9\u3002\u4f46\u662f\uff0c\u4ee3\u7406\u4f1a\u6bcf\u9694 sasl.oauthbearer.jwks.endpoint.refresh.ms \u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21 URL\uff0c\u4ee5\u4fbf\u5728\u6536\u5230\u5305\u542b\u8fd9\u4e9b\u5bc6\u94a5\u7684\u4efb\u4f55 JWT \u8bf7\u6c42\u4e4b\u524d\u4f7f\u7528\u4efb\u4f55\u5373\u5c06\u5230\u6765\u7684\u5bc6\u94a5\u5237\u65b0\u7f13\u5b58\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u4ee3\u7406\u5c06\u5728\u542f\u52a8\u65f6\u4ece\u914d\u7f6e\u7684\u4f4d\u7f6e\u52a0\u8f7d JWKS \u6587\u4ef6\u3002\u5982\u679c JWT \u5305\u542b JWKS \u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u7684\u201ckid\u201d\u6807\u5934\u503c\uff0c Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.jwks.endpoint.url"},{"location":"3/#sasloauthbearertokenendpointurl_4","text":"OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u7684 URL\u3002\u5982\u679c URL \u57fa\u4e8e HTTP(S)\uff0c\u5219\u5b83\u662f\u9881\u53d1\u8005\u7684\u4ee4\u724c\u7aef\u70b9 URL\uff0c\u5c06\u6839\u636e sasl.jaas.config \u4e2d\u7684\u914d\u7f6e\u53d1\u51fa\u767b\u5f55\u8bf7\u6c42\u3002\u5982\u679c URL \u662f\u57fa\u4e8e\u6587\u4ef6\u7684\uff0c\u5219\u5b83\u6307\u5b9a\u4e00\u4e2a\u5305\u542b OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u9881\u53d1\u7684\u8bbf\u95ee\u4ee4\u724c\uff08JWT \u5e8f\u5217\u5316\u5f62\u5f0f\uff09\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u6388\u6743\u3002 Type: string Default: null Valid Values: Importance: medium","title":"sasl.oauthbearer.token.endpoint.url"},{"location":"3/#securityprotocol_4","text":"\u7528\u4e8e\u4e0ebroker\u901a\u4fe1\u7684\u534f\u8bae\u3002\u6709\u6548\u503c\u4e3a\uff1aPLAINTEXT\u3001SSL\u3001SASL_PLAINTEXT\u3001SASL_SSL\u3002 Type: string Default: PLAINTEXT Valid Values: [PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL] Importance: medium","title":"security.protocol"},{"location":"3/#sendbufferbytes_4","text":"\u53d1\u9001\u6570\u636e\u65f6\u4f7f\u7528\u7684 TCP \u53d1\u9001\u7f13\u51b2\u533a (SO_SNDBUF) \u7684\u5927\u5c0f\u3002\u5982\u679c\u503c\u4e3a-1\uff0c\u5c06\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Type: int Default: 131072 (128 kibibytes) Valid Values: [-1\uff0c...] Importance: medium","title":"send.buffer.bytes"},{"location":"3/#socketconnectionsetuptimeoutmaxms_4","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u6700\u957f\u65f6\u95f4\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u7eed\u7684\u8fde\u63a5\u5931\u8d25\uff0c\u8fde\u63a5\u8bbe\u7f6e\u8d85\u65f6\u5c06\u5448\u6307\u6570\u589e\u957f\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u4e3a\u4e86\u907f\u514d\u8fde\u63a5\u98ce\u66b4\uff0c\u5c06\u5bf9\u8d85\u65f6\u5e94\u7528 0.2 \u7684\u968f\u673a\u5316\u56e0\u5b50\uff0c\u4ece\u800c\u4ea7\u751f\u6bd4\u8ba1\u7b97\u503c\u4f4e 20% \u5230\u9ad8 20% \u4e4b\u95f4\u7684\u968f\u673a\u8303\u56f4\u3002 Type: long Default: 30000 (30 seconds) Valid Values: Importance: medium","title":"socket.connection.setup.timeout.max.ms"},{"location":"3/#socketconnectionsetuptimeoutms_4","text":"\u5ba2\u6237\u7aef\u7b49\u5f85\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u8d85\u65f6\u4e4b\u524d\u672a\u5efa\u7acb\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c06\u5173\u95ed\u5957\u63a5\u5b57\u901a\u9053\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: medium","title":"socket.connection.setup.timeout.ms"},{"location":"3/#sslenabledprotocol_3","text":"\u4e3a SSL \u8fde\u63a5\u542f\u7528\u7684\u534f\u8bae\u5217\u8868\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.2\u3001TLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u4f7f\u7528 Java 11 \u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301 TLSv1.3\uff0c\u5219\u9996\u9009 TLSv1.3\uff0c\u5426\u5219\u56de\u9000\u5230 TLSv1.2\uff08\u5047\u8bbe\u4e24\u8005\u81f3\u5c11\u652f\u6301 TLSv1.2\uff09\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u6b64\u9ed8\u8ba4\u503c\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u53e6\u8bf7\u53c2\u9605\u201cssl.protocol\u201d\u7684\u914d\u7f6e\u6587\u6863\u3002 Type: list Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.enabled.protocol"},{"location":"3/#sslkeystoretype_4","text":"\u5bc6\u94a5\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u5ba2\u6237\u6765\u8bf4\u662f\u53ef\u9009\u7684\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.keystore.type"},{"location":"3/#sslprotocol_4","text":"\u7528\u4e8e\u751f\u6210 SSLContext \u7684 SSL \u534f\u8bae\u3002\u4f7f\u7528 Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u8fd0\u884c\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a\u201cTLSv1.3\u201d\uff0c\u5426\u5219\u4e3a\u201cTLSv1.2\u201d\u3002\u8be5\u503c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\u6765\u8bf4\u5e94\u8be5\u6ca1\u95ee\u9898\u3002\u6700\u65b0 JVM \u4e2d\u5141\u8bb8\u7684\u503c\u4e3a\u201cTLSv1.2\u201d\u548c\u201cTLSv1.3\u201d\u3002\u8f83\u65e7\u7684 JVM \u53ef\u80fd\u652f\u6301\u201cTLS\u201d\u3001\u201cTLSv1.1\u201d\u3001\u201cSSL\u201d\u3001\u201cSSLv2\u201d\u548c\u201cSSLv3\u201d\uff0c\u4f46\u7531\u4e8e\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u5b83\u4eec\u3002\u4f7f\u7528\u6b64\u914d\u7f6e\u548c\u201cssl.enabled.protocols\u201d\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e0d\u652f\u6301\u201cTLSv1.3\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u964d\u7ea7\u5230\u201cTLSv1.2\u201d\u3002\u5982\u679c\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201cTLSv1.2\u201d\uff0c\u5ba2\u6237\u7aef\u5c06\u4e0d\u4f1a\u4f7f\u7528\u201cTLSv1.3\u201d\uff0c\u5373\u4f7f\u5b83\u662f ssl.enabled.protocols \u4e2d\u7684\u503c\u4e4b\u4e00\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4ec5\u652f\u6301\u201cTLSv1.3\u201d\u3002 Type: string Default: TLSv1.2 Valid Values: Importance: medium","title":"ssl.protocol"},{"location":"3/#sslprovider_4","text":"\u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 Type: string Default: null Valid Values: Importance: medium","title":"ssl.provider"},{"location":"3/#ssltruststoretype_4","text":"\u4fe1\u4efb\u5b58\u50a8\u6587\u4ef6\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u9ed8\u8ba4 `ssl.engine.factory.class` \u5f53\u524d\u652f\u6301\u7684\u503c\u4e3a [JKS\u3001PKCS12\u3001PEM]\u3002 Type: string Default: JKS Valid Values: Importance: medium","title":"ssl.truststore.type"},{"location":"3/#autojmxreporter_5","text":"\u5df2\u5f03\u7528\u3002\u662f\u5426\u81ea\u52a8\u5305\u542b JmxReporter\uff0c\u5373\u4f7f\u5b83\u6ca1\u6709\u5728 \u4e2d\u5217\u51fa metric.reporters \u3002\u6b64\u914d\u7f6e\u5c06\u5728 Kafka 4.0 \u4e2d\u5220\u9664\uff0c\u7528\u6237\u5e94\u6dfb\u52a0 org.apache.kafka.common.metrics.JmxReporter \u8be5\u914d\u7f6e metric.reporters \u4ee5\u542f\u7528 JmxReporter\u3002 Type: boolean Default: true Valid Values: Importance: low","title":"auto.jmx.reporter"},{"location":"3/#metadatamaxagems_4","text":"\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5206\u533a\u9886\u5bfc\u5c42\u53d1\u751f\u53d8\u5316\u4ee5\u4e3b\u52a8\u53d1\u73b0\u4efb\u4f55\u65b0\u7684\u4ee3\u7406\u6216\u5206\u533a\uff0c\u6211\u4eec\u4e5f\u4f1a\u5f3a\u5236\u5237\u65b0\u5143\u6570\u636e\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6bb5\u3002 Type: long Default: 300000 (5 minutes) Valid Values: [0,...] Importance: low","title":"metadata.max.age.ms"},{"location":"3/#metricreporters_5","text":"\u7528\u4f5c\u6307\u6807\u62a5\u544a\u8005\u7684\u7c7b\u7684\u5217\u8868\u3002\u5b9e\u73b0\u8be5 org.apache.kafka.common.metrics.MetricsReporter \u63a5\u53e3\u5141\u8bb8\u63d2\u5165\u5c06\u6536\u5230\u65b0\u6307\u6807\u521b\u5efa\u901a\u77e5\u7684\u7c7b\u3002JmxReporter \u59cb\u7ec8\u5305\u542b\u5728\u5185\u4ee5\u6ce8\u518c JMX \u7edf\u8ba1\u4fe1\u606f\u3002 Type: list Default: \"\" Valid Values: Importance: low","title":"metric.reporters"},{"location":"3/#metricsnumsamples_5","text":"\u4e3a\u8ba1\u7b97\u6307\u6807\u800c\u7ef4\u62a4\u7684\u6837\u672c\u6570\u91cf\u3002 Type: int Default: 2 Valid Values: [1\uff0c...] Importance: low","title":"metrics.num.samples"},{"location":"3/#metricsrecordinglevel_5","text":"\u6307\u6807\u7684\u6700\u9ad8\u8bb0\u5f55\u7ea7\u522b\u3002 Type: string Default: INFO Valid Values: [INFO, DEBUG, TRACE] Importance: low","title":"metrics.recording.level"},{"location":"3/#metricssamplewindowms_5","text":"\u8ba1\u7b97\u6307\u6807\u6837\u672c\u7684\u65f6\u95f4\u7a97\u53e3\u3002 Type: long Default: 30000 (30 seconds) Valid Values: [0,...] Importance: low","title":"metrics.sample.window.ms"},{"location":"3/#reconnectbackoffmaxms_4","text":"\u91cd\u65b0\u8fde\u63a5\u5230\u591a\u6b21\u8fde\u63a5\u5931\u8d25\u7684\u4ee3\u7406\u65f6\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u63d0\u4f9b\uff0c\u6bcf\u4e2a\u4e3b\u673a\u7684\u9000\u907f\u5c06\u5728\u6bcf\u6b21\u8fde\u7eed\u8fde\u63a5\u5931\u8d25\u65f6\u5448\u6307\u6570\u589e\u52a0\uff0c\u76f4\u81f3\u8fbe\u5230\u6b64\u6700\u5927\u503c\u3002\u8ba1\u7b97\u9000\u907f\u589e\u91cf\u540e\uff0c\u6dfb\u52a0 20% \u7684\u968f\u673a\u6296\u52a8\u4ee5\u907f\u514d\u8fde\u63a5\u98ce\u66b4\u3002 Type: long Default: 1000 (1 second) Valid Values: [0,...] Importance: low","title":"reconnect.backoff.max.ms"},{"location":"3/#reconnectbackoffms_4","text":"\u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\u5230\u7ed9\u5b9a\u4e3b\u673a\u4e4b\u524d\u7b49\u5f85\u7684\u57fa\u672c\u65f6\u95f4\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u8fde\u63a5\u5230\u4e3b\u673a\u3002\u6b64\u9000\u907f\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u7684\u200b\u200b\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\u3002 Type: long Default: 50 Valid Values: [0,...] Importance: low","title":"reconnect.backoff.ms"},{"location":"3/#retries_2","text":"\u8bbe\u7f6e\u5927\u4e8e\u96f6\u7684\u503c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u91cd\u65b0\u53d1\u9001\u56e0\u6f5c\u5728\u7684\u6682\u65f6\u6027\u9519\u8bef\u800c\u5931\u8d25\u7684\u4efb\u4f55\u8bf7\u6c42\u3002\u5efa\u8bae\u5c06\u8be5\u503c\u8bbe\u7f6e\u4e3a\u96f6\u6216\u201cMAX_VALUE\u201d\uff0c\u5e76\u4f7f\u7528\u76f8\u5e94\u7684\u8d85\u65f6\u53c2\u6570\u6765\u63a7\u5236\u5ba2\u6237\u7aef\u5e94\u91cd\u8bd5\u8bf7\u6c42\u7684\u65f6\u95f4\u3002 Type: int Default: 2147483647 Valid Values: [0\uff0c...\uff0c2147483647] Importance: low","title":"retries"},{"location":"3/#retrybackoffms_4","text":"\u5c1d\u8bd5\u91cd\u8bd5\u5931\u8d25\u7684\u8bf7\u6c42\u4e4b\u524d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\u8fd9\u907f\u514d\u4e86\u5728\u67d0\u4e9b\u6545\u969c\u573a\u666f\u4e0b\u5728\u7d27\u5bc6\u5faa\u73af\u4e2d\u91cd\u590d\u53d1\u9001\u8bf7\u6c42\u3002 Type: long Default: 100 Valid Values: [0,...] Importance: low","title":"retry.backoff.ms"},{"location":"3/#saslkerberoskinitcmd_4","text":"Kerberos kinit \u547d\u4ee4\u8def\u5f84\u3002 Type: string Default: /usr/bin/kinit Valid Values: Importance: low","title":"sasl.kerberos.kinit.cmd"},{"location":"3/#saslkerberosmintimebeforerelogin_4","text":"\u5237\u65b0\u5c1d\u8bd5\u4e4b\u95f4\u7684\u767b\u5f55\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u3002 Type: long Default: 60000 Valid Values: Importance: low","title":"sasl.kerberos.min.time.before.relogin"},{"location":"3/#saslkerberosticketrenewjitter_4","text":"\u6dfb\u52a0\u5230\u66f4\u65b0\u65f6\u95f4\u7684\u968f\u673a\u6296\u52a8\u7684\u767e\u5206\u6bd4\u3002 Type: double Default: 0.05 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.jitter"},{"location":"3/#saslkerberosticketrenewwindowfactor_4","text":"\u767b\u5f55\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u4ece\u4e0a\u6b21\u5237\u65b0\u5230\u7968\u8bc1\u5230\u671f\u7684\u6307\u5b9a\u65f6\u95f4\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u66f4\u65b0\u7968\u8bc1\u3002 Type: double Default: 0.8 Valid Values: Importance: low","title":"sasl.kerberos.ticket.renew.window.factor"},{"location":"3/#saslloginconnecttimeoutms_4","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8fde\u63a5\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.connect.timeout.ms"},{"location":"3/#saslloginreadtimeoutms_4","text":"\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u8bfb\u53d6\u8d85\u65f6\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: int Default: null Valid Values: Importance: low","title":"sasl.login.read.timeout.ms"},{"location":"3/#saslloginrefreshbufferseconds_4","text":"\u5237\u65b0\u51ed\u8bc1\u65f6\u5728\u51ed\u8bc1\u8fc7\u671f\u524d\u7ef4\u6301\u7684\u7f13\u51b2\u65f6\u95f4\u91cf\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u5237\u65b0\u53d1\u751f\u7684\u65f6\u95f4\u6bd4\u7f13\u51b2\u79d2\u6570\u66f4\u63a5\u8fd1\u5230\u671f\uff0c\u5219\u5237\u65b0\u5c06\u5411\u4e0a\u79fb\u52a8\u4ee5\u7ef4\u6301\u5c3d\u53ef\u80fd\u591a\u7684\u7f13\u51b2\u65f6\u95f4\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 3600\uff081 \u5c0f\u65f6\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 300\uff085 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.min.period.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 300 Valid Values: [0\uff0c...\uff0c3600] Importance: low","title":"sasl.login.refresh.buffer.seconds"},{"location":"3/#saslloginrefreshminperiodseconds_4","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5728\u5237\u65b0\u51ed\u636e\u4e4b\u524d\u7b49\u5f85\u7684\u6240\u9700\u6700\u77ed\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u5230 900\uff0815 \u5206\u949f\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 60\uff081 \u5206\u949f\uff09\u3002\u5982\u679c\u8be5\u503c\u548c sasl.login.refresh.buffer.seconds \u7684\u603b\u548c\u8d85\u8fc7\u51ed\u8bc1\u7684\u5269\u4f59\u751f\u547d\u5468\u671f\uff0c\u5219\u5b83\u4eec\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: short Default: 60 Valid Values: [0,...,900] Importance: low","title":"sasl.login.refresh.min.period.seconds"},{"location":"3/#saslloginrefreshwindowfactor_4","text":"\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u5c06\u4f11\u7720\uff0c\u76f4\u5230\u8fbe\u5230\u76f8\u5bf9\u4e8e\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6307\u5b9a\u7a97\u53e3\u56e0\u5b50\uff0c\u6b64\u65f6\u5b83\u5c06\u5c1d\u8bd5\u5237\u65b0\u51ed\u8bc1\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0.5 (50%) \u548c 1.0 (100%)\uff08\u542b\uff09\u4e4b\u95f4\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.8 (80%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.8 Valid Values: [0.5\uff0c...\uff0c1.0] Importance: low","title":"sasl.login.refresh.window.factor"},{"location":"3/#saslloginrefreshwindowjitter_4","text":"\u76f8\u5bf9\u4e8e\u6dfb\u52a0\u5230\u767b\u5f55\u5237\u65b0\u7ebf\u7a0b\u7761\u7720\u65f6\u95f4\u7684\u51ed\u8bc1\u751f\u547d\u5468\u671f\u7684\u6700\u5927\u968f\u673a\u6296\u52a8\u91cf\u3002\u5408\u6cd5\u503c\u4ecb\u4e8e 0 \u548c 0.25 (25%) \u4e4b\u95f4\uff08\u542b\uff09\uff1b\u5982\u679c\u672a\u6307\u5b9a\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c 0.05 (5%)\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: double Default: 0.05 Valid Values: [0.0\uff0c...\uff0c0.25] Importance: low","title":"sasl.login.refresh.window.jitter"},{"location":"3/#saslloginretrybackoffmaxms_4","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.login.retry.backoff.max.ms"},{"location":"3/#saslloginretrybackoffms_4","text":"\u5c1d\u8bd5\u767b\u5f55\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002Login \u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u521d\u59cb\u7b49\u5f85\u57fa\u4e8e sasl.login.retry.backoff.ms \u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.login.retry.backoff.max \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6\u3002\u6beb\u79d2\u8bbe\u7f6e\u3002\u76ee\u524d\u4ec5\u9002\u7528\u4e8e OAUTHBEARER\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.login.retry.backoff.ms"},{"location":"3/#sasloauthbearerclockskewseconds_4","text":"\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\uff08\u53ef\u9009\uff09\u503c\uff0c\u4ee5\u5141\u8bb8 OAuth/OIDC \u8eab\u4efd\u63d0\u4f9b\u5546\u548c\u4ee3\u7406\u7684\u65f6\u95f4\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002 Type: int Default: 30 Valid Values: Importance: low","title":"sasl.oauthbearer.clock.skew.seconds"},{"location":"3/#sasloauthbearerexpectedaudience_4","text":"\u4ee3\u7406\u7684\uff08\u53ef\u9009\uff09\u9017\u53f7\u5206\u9694\u8bbe\u7f6e\uff0c\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u662f\u4e3a\u9884\u671f\u53d7\u4f17\u4e4b\u4e00\u9881\u53d1\u7684\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201caud\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u503c\uff0c\u4ee3\u7406\u5c06\u5339\u914d JWT \u7684\u201caud\u201d\u58f0\u660e\u4e2d\u7684\u503c\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: list Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.audience"},{"location":"3/#sasloauthbearerexpectedissuer_4","text":"\u4ee3\u7406\u7528\u4e8e\u9a8c\u8bc1 JWT \u662f\u5426\u7531\u9884\u671f\u53d1\u884c\u8005\u521b\u5efa\u7684\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u3002\u5c06\u68c0\u67e5 JWT \u662f\u5426\u6709\u6807\u51c6 OAuth\u201ciss\u201d\u58f0\u660e\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u4ee3\u7406\u4f1a\u5c06\u5176\u4e0e JWT \u7684\u201ciss\u201d\u58f0\u660e\u4e2d\u7684\u5185\u5bb9\u5b8c\u5168\u5339\u914d\u3002\u5982\u679c\u4e0d\u5339\u914d\uff0c\u4ee3\u7406\u5c06\u62d2\u7edd JWT\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\u3002 Type: string Default: null Valid Values: Importance: low","title":"sasl.oauthbearer.expected.issuer"},{"location":"3/#sasloauthbearerjwksendpointrefreshms_4","text":"\u4ee3\u7406\u5728\u5237\u65b0\u5176 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u7f13\u5b58\u4e4b\u95f4\u7b49\u5f85\u7684\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u8be5\u7f13\u5b58\u5305\u542b\u7528\u4e8e\u9a8c\u8bc1 JWT \u7b7e\u540d\u7684\u5bc6\u94a5\u3002 Type: long Default: 3600000 (1 hour) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.refresh.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffmaxms_4","text":"\u5c1d\u8bd5\u4ece\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u68c0\u7d22 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u4e4b\u95f4\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 10000 (10 seconds) Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms"},{"location":"3/#sasloauthbearerjwksendpointretrybackoffms_4","text":"\u6765\u81ea\u5916\u90e8\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684 JWKS\uff08JSON Web \u5bc6\u94a5\u96c6\uff09\u68c0\u7d22\u5c1d\u8bd5\u4e4b\u95f4\u7684\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\uff08\u53ef\u9009\uff09\u503c\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002JWKS \u68c0\u7d22\u4f7f\u7528\u6307\u6570\u9000\u907f\u7b97\u6cd5\uff0c\u5e76\u6839\u636e sasl.oauthbearer.jwks.endpoint.retry.backoff.ms \u8bbe\u7f6e\u8fdb\u884c\u521d\u59cb\u7b49\u5f85\uff0c\u5e76\u4e14\u4e24\u6b21\u5c1d\u8bd5\u4e4b\u95f4\u7684\u7b49\u5f85\u957f\u5ea6\u5c06\u52a0\u500d\uff0c\u76f4\u81f3\u8fbe\u5230 sasl.oauthbearer.jwks \u6307\u5b9a\u7684\u6700\u5927\u7b49\u5f85\u957f\u5ea6.endpoint.retry.backoff.max.ms \u8bbe\u7f6e\u3002 Type: long Default: 100 Valid Values: Importance: low","title":"sasl.oauthbearer.jwks.endpoint.retry.backoff.ms"},{"location":"3/#sasloauthbearerscopeclaimname_4","text":"\u8be5\u8303\u56f4\u7684 OAuth \u58f0\u660e\u901a\u5e38\u88ab\u547d\u540d\u4e3a\u201cscope\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u8303\u56f4\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: scope Valid Values: Importance: low","title":"sasl.oauthbearer.scope.claim.name"},{"location":"3/#sasloauthbearersubclaimname_4","text":"\u4e3b\u9898\u7684 OAuth \u58f0\u660e\u901a\u5e38\u547d\u540d\u4e3a\u201csub\u201d\uff0c\u4f46\u5982\u679c OAuth/OIDC \u63d0\u4f9b\u7a0b\u5e8f\u5bf9\u8be5\u58f0\u660e\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5219\u6b64\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u53ef\u4ee5\u4e3a JWT \u8d1f\u8f7d\u58f0\u660e\u4e2d\u5305\u542b\u7684\u4e3b\u9898\u63d0\u4f9b\u4e0d\u540c\u7684\u540d\u79f0\u3002 Type: string Default: sub Valid Values: Importance: low","title":"sasl.oauthbearer.sub.claim.name"},{"location":"3/#securityproviders_3","text":"\u53ef\u914d\u7f6e\u521b\u5efa\u8005\u7c7b\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u7c7b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u73b0\u5b89\u5168\u7b97\u6cd5\u7684\u63d0\u4f9b\u8005\u3002\u8fd9\u4e9b\u7c7b\u5e94\u8be5\u5b9e\u73b0\u8be5 org.apache.kafka.common.security.auth.SecurityProviderCreator \u63a5\u53e3\u3002 Type: string Default: null Valid Values: Importance: low","title":"security.providers"},{"location":"3/#sslciphersuites_4","text":"\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u3002\u8fd9\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u534f\u5546\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u652f\u6301\u6240\u6709\u53ef\u7528\u7684\u5bc6\u7801\u5957\u4ef6\u3002 Type: list Default: null Valid Values: Importance: low","title":"ssl.cipher.suites"},{"location":"3/#sslendpointidentificationalgorithm_4","text":"\u4f7f\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\u670d\u52a1\u5668\u4e3b\u673a\u540d\u7684\u7aef\u70b9\u8bc6\u522b\u7b97\u6cd5\u3002 Type: string Default: https Valid Values: Importance: low","title":"ssl.endpoint.identification.algorithm"},{"location":"3/#sslenginefactoryclass_4","text":"org.apache.kafka.common.security.auth.SslEngineFactory \u7c7b\u578b\u7684\u7c7b\u63d0\u4f9b SSLEngine \u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3a org.apache.kafka.common.security.ssl.DefaultSslEngineFactory Type: class Default: null Valid Values: Importance: low","title":"ssl.engine.factory.class"},{"location":"3/#sslkeymanageralgorithm_4","text":"\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u5bc6\u94a5\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: SunX509 Valid Values: Importance: low","title":"ssl.keymanager.algorithm"},{"location":"3/#sslsecurerandomimplementation_4","text":"\u7528\u4e8e SSL \u52a0\u5bc6\u64cd\u4f5c\u7684 SecureRandom PRNG \u5b9e\u73b0\u3002 Type: string Default: null Valid Values: Importance: low","title":"ssl.secure.random.implementation"},{"location":"3/#ssltrustmanageralgorithm_4","text":"\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7528\u4e8e SSL \u8fde\u63a5\u7684\u7b97\u6cd5\u3002\u9ed8\u8ba4\u503c\u662f\u4e3a Java \u865a\u62df\u673a\u914d\u7f6e\u7684\u4fe1\u4efb\u7ba1\u7406\u5668\u5de5\u5382\u7b97\u6cd5\u3002 Type: string Default: PKIX Valid Values: Importance: low","title":"ssl.trustmanager.algorithm"},{"location":"3/#38","text":"Kafka \u652f\u6301\u4e00\u4e9b\u53ef\u4ee5\u901a\u8fc7 Java \u7cfb\u7edf\u5c5e\u6027\u542f\u7528\u7684\u914d\u7f6e\u3002\u7cfb\u7edf\u5c5e\u6027\u901a\u5e38\u901a\u8fc7\u5c06 -D \u6807\u5fd7\u4f20\u9012\u7ed9\u8fd0\u884c Kafka \u7ec4\u4ef6\u7684 Java \u865a\u62df\u673a\u6765\u8bbe\u7f6e\u3002\u4ee5\u4e0b\u662f\u652f\u6301\u7684\u7cfb\u7edf\u5c5e\u6027\u3002","title":"3.8 \u7cfb\u7edf\u5c5e\u6027"},{"location":"3/#orgapachekafkadisallowedloginmodules","text":"\u6b64\u7cfb\u7edf\u5c5e\u6027\u7528\u4e8e\u7981\u7528 SASL JAAS \u914d\u7f6e\u4e2d\u5b58\u5728\u95ee\u9898\u7684\u767b\u5f55\u6a21\u5757\u4f7f\u7528\u3002\u6b64\u5c5e\u6027\u63a5\u53d7\u4ee5\u9017\u53f7\u5206\u9694\u7684\u767b\u5f55\u6a21\u5757\u540d\u79f0\u5217\u8868\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c com.sun.security.auth.module.JndiLoginModule \u767b\u5f55\u6a21\u5757\u88ab\u7981\u7528\u3002 \u5982\u679c\u7528\u6237\u60f3\u8981\u542f\u7528 JndiLoginModule\uff0c\u7528\u6237\u9700\u8981\u663e\u5f0f\u91cd\u7f6e\u7cfb\u7edf\u5c5e\u6027\uff0c\u5982\u4e0b\u6240\u793a\u3002\u6211\u4eec\u5efa\u8bae\u7528\u6237\u9a8c\u8bc1\u914d\u7f6e\u5e76\u4ec5\u5141\u8bb8\u53ef\u4fe1\u7684 JNDI \u914d\u7f6e\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f CVE-2023-25194 \u3002 -Dorg.apache.kafka.disallowed.login.modules= \u8981\u7981\u7528\u66f4\u591a\u767b\u5f55\u6a21\u5757\uff0c\u8bf7\u4f7f\u7528\u9017\u53f7\u5206\u9694\u7684\u767b\u5f55\u6a21\u5757\u540d\u79f0\u66f4\u65b0\u7cfb\u7edf\u5c5e\u6027\u3002\u786e\u4fdd\u5c06 JndiLoginModule \u6a21\u5757\u540d\u79f0\u663e\u5f0f\u6dfb\u52a0\u5230\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\u4e2d\uff0c\u5982\u4e0b\u6240\u793a\u3002 -Dorg.apache.kafka.disallowed.login.modules=com.sun.security.auth.module.JndiLoginModule,com.ibm.security.auth.module.LdapLoginModule,com.ibm.security.auth.module.Krb5LoginModule \u81ea\u4ece\uff1a 3.4.0 \u9ed8\u8ba4\u503c\uff1a com.sun.security.auth.module.JndiLoginModule","title":"org.apache.kafka.disallowed.login.modules"},{"location":"4/","text":"4. \u8bbe\u8ba1 4.1 \u52a8\u673a \u6211\u4eec\u5c06 Kafka \u8bbe\u8ba1\u4e3a\u80fd\u591f\u5145\u5f53\u7edf\u4e00\u5e73\u53f0\u6765\u5904\u7406\u5927\u516c\u53f8\u53ef\u80fd\u62e5\u6709\u7684 \u6240\u6709\u5b9e\u65f6\u6570\u636e\u6e90\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u8003\u8651\u76f8\u5f53\u5e7f\u6cdb\u7684\u7528\u4f8b\u3002 \u5b83\u5fc5\u987b\u5177\u6709\u9ad8\u541e\u5410\u91cf\u624d\u80fd\u652f\u6301\u5927\u5bb9\u91cf\u4e8b\u4ef6\u6d41\uff0c\u4f8b\u5982\u5b9e\u65f6\u65e5\u5fd7\u805a\u5408\u3002 \u5b83\u9700\u8981\u59a5\u5584\u5904\u7406\u5927\u91cf\u79ef\u538b\u6570\u636e\uff0c\u4ee5\u4fbf\u80fd\u591f\u652f\u6301\u79bb\u7ebf\u7cfb\u7edf\u7684\u5b9a\u671f\u6570\u636e\u52a0\u8f7d\u3002 \u8fd9\u8fd8\u610f\u5473\u7740\u7cfb\u7edf\u5fc5\u987b\u5904\u7406\u4f4e\u5ef6\u8fdf\u4ea4\u4ed8\uff0c\u4ee5\u5904\u7406\u66f4\u4f20\u7edf\u7684\u6d88\u606f\u4f20\u9012\u7528\u4f8b\u3002 \u6211\u4eec\u5e0c\u671b\u652f\u6301\u8fd9\u4e9b\u63d0\u8981\u7684\u5206\u533a\u3001\u5206\u5e03\u5f0f\u3001\u5b9e\u65f6\u5904\u7406\uff0c\u4ee5\u521b\u5efa\u65b0\u7684\u6d3e\u751f\u63d0\u8981\u3002\u8fd9\u6fc0\u53d1\u4e86\u6211\u4eec\u7684\u5206\u533a\u548c\u6d88\u8d39\u8005\u6a21\u578b\u3002 \u6700\u540e\uff0c\u5728\u5c06\u6d41\u8f93\u5165\u5176\u4ed6\u6570\u636e\u7cfb\u7edf\u8fdb\u884c\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u77e5\u9053\u7cfb\u7edf\u5fc5\u987b\u80fd\u591f\u5728\u51fa\u73b0\u673a\u5668\u6545\u969c\u65f6\u4fdd\u8bc1\u5bb9\u9519\u3002 \u652f\u6301\u8fd9\u4e9b\u7528\u9014\u4f7f\u6211\u4eec\u8bbe\u8ba1\u51fa\u5177\u6709\u8bb8\u591a\u72ec\u7279\u5143\u7d20\u7684\u8bbe\u8ba1\uff0c\u4e0e\u4f20\u7edf\u7684\u6d88\u606f\u7cfb\u7edf\u76f8\u6bd4\uff0c\u5b83\u66f4\u7c7b\u4f3c\u4e8e\u6570\u636e\u5e93\u65e5\u5fd7\u3002\u6211\u4eec\u5c06\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\u6982\u8ff0\u8bbe\u8ba1\u7684\u4e00\u4e9b\u5143\u7d20\u3002 4.2 \u6301\u4e45\u5316 \u4e0d\u8981\u5bb3\u6015\u6587\u4ef6\u7cfb\u7edf\uff01 Kafka \u4e25\u91cd\u4f9d\u8d56\u6587\u4ef6\u7cfb\u7edf\u6765\u5b58\u50a8\u548c\u7f13\u5b58\u6d88\u606f\u3002\u4eba\u4eec\u666e\u904d\u8ba4\u4e3a\u201c\u78c1\u76d8\u901f\u5ea6\u5f88\u6162\u201d\uff0c\u8fd9\u4f7f\u4eba\u4eec\u6000\u7591\u6301\u4e45\u7ed3\u6784\u80fd\u5426\u63d0\u4f9b\u6709\u7ade\u4e89\u529b\u7684\u6027\u80fd\u3002\u4e8b\u5b9e\u4e0a\uff0c\u78c1\u76d8\u6bd4\u4eba\u4eec\u9884\u671f\u7684\u8981\u6162\u5f97\u591a\uff0c\u4e5f\u8981\u5feb\u5f97\u591a\uff0c\u8fd9\u53d6\u51b3\u4e8e\u5b83\u4eec\u7684\u4f7f\u7528\u65b9\u5f0f\uff1b\u8bbe\u8ba1\u5f97\u5f53\u7684\u78c1\u76d8\u7ed3\u6784\u5f80\u5f80\u53ef\u4ee5\u548c\u7f51\u7edc\u4e00\u6837\u5feb\u3002 \u5173\u4e8e\u78c1\u76d8\u6027\u80fd\u7684\u5173\u952e\u4e8b\u5b9e\u662f\uff0c\u5728\u8fc7\u53bb\u5341\u5e74\u4e2d\uff0c\u786c\u76d8\u9a71\u52a8\u5668\u7684\u541e\u5410\u91cf\u4e0e\u78c1\u76d8\u5bfb\u9053\u7684\u5ef6\u8fdf\u4e00\u76f4\u5b58\u5728\u5dee\u5f02\u3002\u56e0\u6b64\uff0c\u5728\u5177\u6709\u516d\u4e2a 7200rpm SATA RAID-5 \u9635\u5217\u7684 JBOD \u914d\u7f6e\u4e0a\uff0c\u7ebf\u6027\u5199\u5165\u6027\u80fd\u7ea6\u4e3a 600MB/\u79d2\uff0c\u4f46\u968f\u673a\u5199\u5165\u6027\u80fd\u4ec5\u4e3a\u7ea6 100k/\u79d2\uff0c\u76f8\u5dee\u8d85\u8fc7 6000 \u500d\u3002\u8fd9\u4e9b\u7ebf\u6027\u8bfb\u53d6\u548c\u5199\u5165\u662f\u6240\u6709\u4f7f\u7528\u6a21\u5f0f\u4e2d\u6700\u53ef\u9884\u6d4b\u7684\uff0c\u5e76\u4e14\u7ecf\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684\u5927\u529b\u4f18\u5316\u3002\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u9884\u8bfb\u548c\u540e\u5199\u6280\u672f\uff0c\u4ee5\u5927\u5757\u500d\u6570\u9884\u53d6\u6570\u636e\uff0c\u5e76\u5c06\u8f83\u5c0f\u7684\u903b\u8f91\u5199\u5165\u5206\u7ec4\u4e3a\u8f83\u5927\u7684\u7269\u7406\u5199\u5165\u3002\u6709\u5173\u6b64\u95ee\u9898\u7684\u8fdb\u4e00\u6b65\u8ba8\u8bba\u53ef\u4ee5\u5728\u8fd9\u7bc7 ACM Queue \u6587\u7ae0 \u4e2d\u627e\u5230\uff1b\u4ed6\u4eec\u5b9e\u9645\u4e0a\u53d1\u73b0 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u987a\u5e8f\u78c1\u76d8\u8bbf\u95ee\u53ef\u80fd\u6bd4\u968f\u673a\u5185\u5b58\u8bbf\u95ee\u66f4\u5feb\uff01 \u4e3a\u4e86\u5f25\u8865\u8fd9\u79cd\u6027\u80fd\u5dee\u5f02\uff0c\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u8d8a\u6765\u8d8a\u79ef\u6781\u5730\u4f7f\u7528\u4e3b\u5185\u5b58\u8fdb\u884c\u78c1\u76d8\u7f13\u5b58\u3002\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5f88\u4e50\u610f\u5c06 \u6240\u6709 \u53ef\u7528\u5185\u5b58\u8f6c\u79fb\u5230\u78c1\u76d8\u7f13\u5b58\uff0c\u5f53\u5185\u5b58\u88ab\u56de\u6536\u65f6\uff0c\u6027\u80fd\u635f\u5931\u5f88\u5c0f\u3002\u6240\u6709\u7684\u78c1\u76d8\u8bfb\u5199\u90fd\u4f1a\u7ecf\u8fc7\u8fd9\u4e2a\u7edf\u4e00\u7684\u7f13\u5b58\u3002\u5982\u679c\u4e0d\u4f7f\u7528\u76f4\u63a5 I/O\uff0c\u5219\u65e0\u6cd5\u8f7b\u677e\u5173\u95ed\u6b64\u529f\u80fd\uff0c\u56e0\u6b64\u5373\u4f7f\u8fdb\u7a0b\u7ef4\u62a4\u6570\u636e\u7684\u8fdb\u7a0b\u5185\u7f13\u5b58\uff0c\u8be5\u6570\u636e\u4e5f\u53ef\u80fd\u4f1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u9875\u9762\u7f13\u5b58\u4e2d\u91cd\u590d\uff0c\u4ece\u800c\u6709\u6548\u5730\u5c06\u6240\u6709\u5185\u5bb9\u5b58\u50a8\u4e24\u6b21\u3002 \u6b64\u5916\uff0c\u6211\u4eec\u662f\u5728 JVM \u4e4b\u4e0a\u6784\u5efa\u7684\uff0c\u4efb\u4f55\u82b1\u65f6\u95f4\u7814\u7a76 Java \u5185\u5b58\u4f7f\u7528\u7684\u4eba\u90fd\u77e5\u9053\u4e24\u4ef6\u4e8b\uff1a \u5bf9\u8c61\u7684\u5185\u5b58\u5f00\u9500\u975e\u5e38\u9ad8\uff0c\u901a\u5e38\u4f1a\u4f7f\u5b58\u50a8\u7684\u6570\u636e\u5927\u5c0f\u589e\u52a0\u4e00\u500d\uff08\u6216\u66f4\u7cdf\uff09\u3002 \u968f\u7740\u5806\u5185\u6570\u636e\u7684\u589e\u52a0\uff0cJava \u5783\u573e\u6536\u96c6\u53d8\u5f97\u8d8a\u6765\u8d8a\u7e41\u7410\u548c\u7f13\u6162\u3002 \u7531\u4e8e\u8fd9\u4e9b\u56e0\u7d20\uff0c\u4f7f\u7528\u6587\u4ef6\u7cfb\u7edf\u5e76\u4f9d\u8d56\u9875\u9762\u7f13\u5b58\u4f18\u4e8e\u7ef4\u62a4\u5185\u5b58\u4e2d\u7f13\u5b58\u6216\u5176\u4ed6\u7ed3\u6784 - \u6211\u4eec\u901a\u8fc7\u81ea\u52a8\u8bbf\u95ee\u6240\u6709\u7a7a\u95f2\u5185\u5b58\u81f3\u5c11\u4f7f\u53ef\u7528\u7f13\u5b58\u52a0\u500d\uff0c\u5e76\u4e14\u53ef\u80fd\u901a\u8fc7\u5b58\u50a8\u7d27\u51d1\u7684\u5185\u5bb9\u518d\u6b21\u52a0\u500d\u5b57\u8282\u7ed3\u6784\u800c\u4e0d\u662f\u5355\u4e2a\u5bf9\u8c61\u3002\u8fd9\u6837\u505a\u5c06\u5728 32GB \u673a\u5668\u4e0a\u4ea7\u751f\u9ad8\u8fbe 28-30GB \u7684\u7f13\u5b58\uff0c\u800c\u4e0d\u4f1a\u9020\u6210 GC \u635f\u5931\u3002\u6b64\u5916\uff0c\u5373\u4f7f\u670d\u52a1\u91cd\u65b0\u542f\u52a8\uff0c\u6b64\u7f13\u5b58\u4e5f\u5c06\u4fdd\u6301\u70ed\u72b6\u6001\uff0c\u800c\u8fdb\u7a0b\u5185\u7f13\u5b58\u5c06\u9700\u8981\u5728\u5185\u5b58\u4e2d\u91cd\u5efa\uff08\u5bf9\u4e8e 10GB \u7f13\u5b58\u53ef\u80fd\u9700\u8981 10 \u5206\u949f\uff09\uff0c\u5426\u5219\u5b83\u5c06\u9700\u8981\u4ee5\u5b8c\u5168\u51b7\u7684\u7f13\u5b58\u542f\u52a8\uff08\u8fd9\u53ef\u80fd\u610f\u5473\u7740\u7cdf\u7cd5\u7684\u521d\u59cb\u6027\u80fd\uff09\u3002\u8fd9\u4e5f\u6781\u5927\u5730\u7b80\u5316\u4e86\u4ee3\u7801\uff0c\u56e0\u4e3a\u7528\u4e8e\u7ef4\u62a4\u7f13\u5b58\u548c\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u4e00\u81f4\u6027\u7684\u6240\u6709\u903b\u8f91\u73b0\u5728\u90fd\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u8fd9\u5f80\u5f80\u6bd4\u4e00\u6b21\u6027\u7684\u8fc7\u7a0b\u4e2d\u5c1d\u8bd5\u66f4\u6709\u6548\u3001\u66f4\u6b63\u786e\u3002\u5982\u679c\u60a8\u7684\u78c1\u76d8\u4f7f\u7528\u6709\u5229\u4e8e\u7ebf\u6027\u8bfb\u53d6\uff0c\u90a3\u4e48\u9884\u8bfb\u5b9e\u9645\u4e0a\u662f\u5728\u6bcf\u6b21\u78c1\u76d8\u8bfb\u53d6\u65f6\u4f7f\u7528\u6709\u7528\u7684\u6570\u636e\u9884\u5148\u586b\u5145\u6b64\u7f13\u5b58\u3002 \u8fd9\u8868\u660e\u4e86\u4e00\u79cd\u975e\u5e38\u7b80\u5355\u7684\u8bbe\u8ba1\uff1a\u6211\u4eec\u4e0d\u662f\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u5c3d\u53ef\u80fd\u591a\u7684\u5185\u5bb9\uff0c\u800c\u662f\u5728\u7a7a\u95f4\u4e0d\u8db3\u65f6\u5c06\u5176\u5168\u90e8\u5237\u65b0\u5230\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c\u662f\u5c06\u5176\u53cd\u8f6c\u3002\u6240\u6709\u6570\u636e\u90fd\u4f1a\u7acb\u5373\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6301\u4e45\u65e5\u5fd7\uff0c\u800c\u4e0d\u5fc5\u5237\u65b0\u5230\u78c1\u76d8\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4ec5\u4ec5\u610f\u5473\u7740\u5b83\u88ab\u8f6c\u79fb\u5230\u5185\u6838\u7684\u9875\u9762\u7f13\u5b58\u4e2d\u3002 \u8fd9\u79cd\u4ee5\u9875\u9762\u7f13\u5b58\u4e3a\u4e2d\u5fc3\u7684\u8bbe\u8ba1\u98ce\u683c\u5728\u4e00\u7bc7\u5173\u4e8e Varnish \u8bbe\u8ba1\u7684 \u6587\u7ae0 \u4e2d\u8fdb\u884c\u4e86\u63cf\u8ff0\uff08\u540c\u65f6\u8fd8\u5e26\u6709\u4e00\u5b9a\u7a0b\u5ea6\u7684\u50b2\u6162\uff09\u3002 \u6052\u5b9a\u7684\u65f6\u95f4\u5c31\u8db3\u591f\u4e86 \u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684\u6301\u4e45\u6570\u636e\u7ed3\u6784\u901a\u5e38\u662f\u6bcf\u4e2a\u6d88\u8d39\u8005\u7684\u961f\u5217\uff0c\u5177\u6709\u5173\u8054\u7684 BTree \u6216\u5176\u4ed6\u901a\u7528\u968f\u673a\u8bbf\u95ee\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u7ef4\u62a4\u6709\u5173\u6d88\u606f\u7684\u5143\u6570\u636e\u3002BTree \u662f\u53ef\u7528\u7684\u6700\u901a\u7528\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u4e14\u53ef\u4ee5\u652f\u6301\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u7684\u5404\u79cd\u4e8b\u52a1\u6027\u548c\u975e\u4e8b\u52a1\u6027\u8bed\u4e49\u3002\u4e0d\u8fc7\uff0c\u5b83\u4eec\u7684\u6210\u672c\u786e\u5b9e\u76f8\u5f53\u9ad8\uff1aBtree \u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(log N)\u3002\u901a\u5e38 O(log N) \u88ab\u8ba4\u4e3a\u672c\u8d28\u4e0a\u7b49\u4e8e\u5e38\u6570\u65f6\u95f4\uff0c\u4f46\u5bf9\u4e8e\u78c1\u76d8\u64cd\u4f5c\u6765\u8bf4\u5e76\u975e\u5982\u6b64\u3002\u78c1\u76d8\u5bfb\u9053\u4e00\u6b21\u5f39\u51fa\u7684\u65f6\u95f4\u4e3a 10 \u6beb\u79d2\uff0c\u5e76\u4e14\u6bcf\u4e2a\u78c1\u76d8\u4e00\u6b21\u53ea\u80fd\u6267\u884c\u4e00\u6b21\u5bfb\u9053\uff0c\u56e0\u6b64\u5e76\u884c\u6027\u53d7\u5230\u9650\u5236\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u5c11\u91cf\u7684\u78c1\u76d8\u67e5\u627e\u4e5f\u4f1a\u5bfc\u81f4\u975e\u5e38\u9ad8\u7684\u5f00\u9500\u3002\u7531\u4e8e\u5b58\u50a8\u7cfb\u7edf\u5c06\u975e\u5e38\u5feb\u7684\u7f13\u5b58\u64cd\u4f5c\u4e0e\u975e\u5e38\u6162\u7684\u7269\u7406\u78c1\u76d8\u64cd\u4f5c\u6df7\u5408\u5728\u4e00\u8d77\uff0c \u76f4\u89c2\u4e0a\uff0c\u6301\u4e45\u961f\u5217\u53ef\u4ee5\u57fa\u4e8e\u7b80\u5355\u7684\u8bfb\u53d6\u548c\u9644\u52a0\u5230\u6587\u4ef6\u6765\u6784\u5efa\uff0c\u5c31\u50cf\u65e5\u5fd7\u8bb0\u5f55\u89e3\u51b3\u65b9\u6848\u7684\u5e38\u89c1\u60c5\u51b5\u4e00\u6837\u3002\u8fd9\u79cd\u7ed3\u6784\u7684\u4f18\u70b9\u662f\u6240\u6709\u64cd\u4f5c\u90fd\u662f O(1) \u5e76\u4e14\u8bfb\u53d6\u4e0d\u4f1a\u963b\u585e\u5199\u5165\u6216\u5f7c\u6b64\u4e4b\u95f4\u3002\u8fd9\u5177\u6709\u660e\u663e\u7684\u6027\u80fd\u4f18\u52bf\uff0c\u56e0\u4e3a\u6027\u80fd\u4e0e\u6570\u636e\u5927\u5c0f\u5b8c\u5168\u89e3\u8026\u2014\u2014\u4e00\u53f0\u670d\u52a1\u5668\u73b0\u5728\u53ef\u4ee5\u5145\u5206\u5229\u7528\u8bb8\u591a\u5ec9\u4ef7\u3001\u4f4e\u8f6c\u901f\u7684 1+TB SATA \u9a71\u52a8\u5668\u3002\u5c3d\u7ba1\u5b83\u4eec\u7684\u5bfb\u9053\u6027\u80fd\u8f83\u5dee\uff0c\u4f46\u8fd9\u4e9b\u9a71\u52a8\u5668\u5bf9\u4e8e\u5927\u91cf\u8bfb\u53d6\u548c\u5199\u5165\u5177\u6709\u53ef\u63a5\u53d7\u7684\u6027\u80fd\uff0c\u5e76\u4e14\u4ef7\u683c\u4ec5\u4e3a\u5176 1/3\uff0c\u5bb9\u91cf\u4e3a 3 \u500d\u3002 \u53ef\u4ee5\u8bbf\u95ee\u51e0\u4e4e\u65e0\u9650\u7684\u78c1\u76d8\u7a7a\u95f4\u800c\u4e0d\u4f1a\u9020\u6210\u4efb\u4f55\u6027\u80fd\u635f\u5931\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e9b\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u901a\u5e38\u4e0d\u5177\u5907\u7684\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u5728 Kafka \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6d88\u606f\u4fdd\u7559\u76f8\u5bf9\u8f83\u957f\u7684\u65f6\u95f4\uff08\u4f8b\u5982\u4e00\u5468\uff09\uff0c\u800c\u4e0d\u662f\u5728\u6d88\u606f\u88ab\u6d88\u8d39\u540e\u7acb\u5373\u5c1d\u8bd5\u5220\u9664\u5b83\u4eec\u3002\u6b63\u5982\u6211\u4eec\u5c06\u8981\u63cf\u8ff0\u7684\uff0c\u8fd9\u4e3a\u6d88\u8d39\u8005\u5e26\u6765\u4e86\u5f88\u5927\u7684\u7075\u6d3b\u6027\u3002 4.3 \u6548\u7387 \u6211\u4eec\u5728\u6548\u7387\u65b9\u9762\u6295\u5165\u4e86\u5927\u91cf\u7cbe\u529b\u3002\u6211\u4eec\u7684\u4e3b\u8981\u7528\u4f8b\u4e4b\u4e00\u662f\u5904\u7406 Web \u6d3b\u52a8\u6570\u636e\uff0c\u8be5\u6570\u636e\u91cf\u975e\u5e38\u5927\uff1a\u6bcf\u4e2a\u9875\u9762\u89c6\u56fe\u53ef\u80fd\u4f1a\u751f\u6210\u6570\u5341\u6b21\u5199\u5165\u3002\u6b64\u5916\uff0c\u6211\u4eec\u5047\u8bbe\u53d1\u5e03\u7684\u6bcf\u6761\u6d88\u606f\u90fd\u88ab\u81f3\u5c11\u4e00\u4e2a\u6d88\u8d39\u8005\uff08\u901a\u5e38\u662f\u591a\u4e2a\uff09\u9605\u8bfb\uff0c\u56e0\u6b64\u6211\u4eec\u52aa\u529b\u4f7f\u6d88\u8d39\u5c3d\u53ef\u80fd\u4fbf\u5b9c\u3002 \u6839\u636e\u6784\u5efa\u548c\u8fd0\u884c\u8bb8\u591a\u7c7b\u4f3c\u7cfb\u7edf\u7684\u7ecf\u9a8c\uff0c\u6211\u4eec\u8fd8\u53d1\u73b0\uff0c\u6548\u7387\u662f\u6709\u6548\u591a\u79df\u6237\u8fd0\u8425\u7684\u5173\u952e\u3002\u5982\u679c\u4e0b\u6e38\u57fa\u7840\u8bbe\u65bd\u670d\u52a1\u5f88\u5bb9\u6613\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u91cf\u7684\u5fae\u5c0f\u53d8\u5316\u800c\u6210\u4e3a\u74f6\u9888\uff0c\u90a3\u4e48\u8fd9\u79cd\u5fae\u5c0f\u7684\u53d8\u5316\u901a\u5e38\u4f1a\u4ea7\u751f\u95ee\u9898\u3002\u901a\u8fc7\u975e\u5e38\u5feb\u7684\u901f\u5ea6\uff0c\u6211\u4eec\u6709\u52a9\u4e8e\u786e\u4fdd\u5e94\u7528\u7a0b\u5e8f\u5728\u8d1f\u8f7d\u4e0b\u5148\u4e8e\u57fa\u7840\u8bbe\u65bd\u53d1\u751f\u7ffb\u5012\u3002\u5f53\u5c1d\u8bd5\u5728\u96c6\u4e2d\u5f0f\u96c6\u7fa4\u4e0a\u8fd0\u884c\u652f\u6301\u6570\u5341\u6216\u6570\u767e\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u96c6\u4e2d\u5f0f\u670d\u52a1\u65f6\uff0c\u8fd9\u4e00\u70b9\u5c24\u5176\u91cd\u8981\uff0c\u56e0\u4e3a\u4f7f\u7528\u6a21\u5f0f\u7684\u53d8\u5316\u51e0\u4e4e\u6bcf\u5929\u90fd\u4f1a\u53d1\u751f\u3002 \u6211\u4eec\u5728\u4e0a\u4e00\u8282\u4e2d\u8ba8\u8bba\u4e86\u78c1\u76d8\u6548\u7387\u3002\u4e00\u65e6\u6d88\u9664\u4e86\u4e0d\u826f\u7684\u78c1\u76d8\u8bbf\u95ee\u6a21\u5f0f\uff0c\u6b64\u7c7b\u7cfb\u7edf\u6548\u7387\u4f4e\u4e0b\u7684\u5e38\u89c1\u539f\u56e0\u6709\u4e24\u4e2a\uff1a\u592a\u591a\u7684\u5c0f\u578b I/O \u64cd\u4f5c\u548c\u8fc7\u591a\u7684\u5b57\u8282\u590d\u5236\u3002 \u5c0f I/O \u95ee\u9898\u65e2\u53d1\u751f\u5728\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\uff0c\u4e5f\u53d1\u751f\u5728\u670d\u52a1\u5668\u81ea\u8eab\u7684\u6301\u4e45\u64cd\u4f5c\u4e2d\u3002 \u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u7684\u534f\u8bae\u662f\u56f4\u7ed5\u201c\u6d88\u606f\u96c6\u201d\u62bd\u8c61\u6784\u5efa\u7684\uff0c\u8be5\u62bd\u8c61\u81ea\u7136\u5730\u5c06\u6d88\u606f\u5206\u7ec4\u5728\u4e00\u8d77\u3002\u8fd9\u5141\u8bb8\u7f51\u7edc\u8bf7\u6c42\u5c06\u6d88\u606f\u5206\u7ec4\u5728\u4e00\u8d77\u5e76\u5206\u644a\u7f51\u7edc\u5f80\u8fd4\u7684\u5f00\u9500\uff0c\u800c\u4e0d\u662f\u4e00\u6b21\u53d1\u9001\u5355\u4e2a\u6d88\u606f\u3002\u670d\u52a1\u5668\u4f9d\u6b21\u5c06\u6d88\u606f\u5757\u4e00\u6b21\u6027\u8ffd\u52a0\u5230\u5176\u65e5\u5fd7\u4e2d\uff0c\u800c\u6d88\u8d39\u8005\u4e00\u6b21\u83b7\u53d6\u5927\u7684\u7ebf\u6027\u5757\u3002 \u8fd9\u4e2a\u7b80\u5355\u7684\u4f18\u5316\u4ea7\u751f\u4e86\u51e0\u4e2a\u6570\u91cf\u7ea7\u7684\u52a0\u901f\u3002\u6279\u5904\u7406\u4f1a\u5bfc\u81f4\u66f4\u5927\u7684\u7f51\u7edc\u6570\u636e\u5305\u3001\u66f4\u5927\u7684\u987a\u5e8f\u78c1\u76d8\u64cd\u4f5c\u3001\u8fde\u7eed\u7684\u5185\u5b58\u5757\u7b49\u7b49\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u5141\u8bb8 Kafka \u5c06\u968f\u673a\u6d88\u606f\u5199\u5165\u7684\u7a81\u53d1\u6d41\u8f6c\u6362\u4e3a\u6d41\u5411\u6d88\u8d39\u8005\u7684\u7ebf\u6027\u5199\u5165\u3002 \u53e6\u4e00\u4e2a\u4f4e\u6548\u4e4b\u5904\u5728\u4e8e\u5b57\u8282\u590d\u5236\u3002\u5728\u4f4e\u6d88\u606f\u901f\u7387\u4e0b\u8fd9\u4e0d\u662f\u95ee\u9898\uff0c\u4f46\u5728\u8d1f\u8f7d\u4e0b\u5f71\u54cd\u5f88\u5927\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u7531\u751f\u4ea7\u8005\u3001\u4ee3\u7406\u548c\u6d88\u8d39\u8005\u5171\u4eab\u7684\u6807\u51c6\u5316\u4e8c\u8fdb\u5236\u6d88\u606f\u683c\u5f0f\uff08\u56e0\u6b64\u6570\u636e\u5757\u53ef\u4ee5\u5728\u5b83\u4eec\u4e4b\u95f4\u4f20\u8f93\u800c\u65e0\u9700\u4fee\u6539\uff09\u3002 \u4ee3\u7406\u7ef4\u62a4\u7684\u6d88\u606f\u65e5\u5fd7\u672c\u8eab\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6\u76ee\u5f55\uff0c\u6bcf\u4e2a\u6587\u4ef6\u90fd\u7531\u4e00\u7cfb\u5217\u6d88\u606f\u96c6\u586b\u5145\uff0c\u8fd9\u4e9b\u6d88\u606f\u96c6\u5df2\u4ee5\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4f7f\u7528\u7684\u76f8\u540c\u683c\u5f0f\u5199\u5165\u78c1\u76d8\u3002\u7ef4\u62a4\u8fd9\u79cd\u901a\u7528\u683c\u5f0f\u53ef\u4ee5\u4f18\u5316\u6700\u91cd\u8981\u7684\u64cd\u4f5c\uff1a\u6301\u4e45\u65e5\u5fd7\u5757\u7684\u7f51\u7edc\u4f20\u8f93\u3002\u73b0\u4ee3 UNIX \u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u4f18\u5316\u7684\u4ee3\u7801\u8def\u5f84\uff0c\u7528\u4e8e\u5c06\u6570\u636e\u4ece\u9875\u9762\u7f13\u5b58\u4f20\u8f93\u5230\u5957\u63a5\u5b57\uff1b\u5728 Linux \u4e2d\uff0c\u8fd9\u662f\u901a\u8fc7 sendfile \u7cfb\u7edf\u8c03\u7528 \u5b8c\u6210\u7684\u3002 \u8981\u4e86\u89e3 sendfile \u7684\u5f71\u54cd\uff0c\u4e86\u89e3\u4ece\u6587\u4ef6\u5230\u5957\u63a5\u5b57\u4f20\u8f93\u6570\u636e\u7684\u901a\u7528\u6570\u636e\u8def\u5f84\u975e\u5e38\u91cd\u8981\uff1a \u64cd\u4f5c\u7cfb\u7edf\u5c06\u6570\u636e\u4ece\u78c1\u76d8\u8bfb\u53d6\u5230\u5185\u6838\u7a7a\u95f4\u7684pagecache\u4e2d \u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u4ece\u5185\u6838\u7a7a\u95f4\u8bfb\u53d6\u5230\u7528\u6237\u7a7a\u95f4\u7f13\u51b2\u533a \u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u5199\u56de\u5230\u5185\u6838\u7a7a\u95f4\u7684\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u4e2d \u64cd\u4f5c\u7cfb\u7edf\u5c06\u6570\u636e\u4ece\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u590d\u5236\u5230 NIC \u7f13\u51b2\u533a\uff0c\u5e76\u5728\u5176\u4e2d\u901a\u8fc7\u7f51\u7edc\u53d1\u9001 \u8fd9\u663e\u7136\u6548\u7387\u4f4e\u4e0b\uff0c\u6709\u56db\u4e2a\u526f\u672c\u548c\u4e24\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002\u4f7f\u7528 sendfile\uff0c\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u5c06\u6570\u636e\u4ece\u9875\u9762\u7f13\u5b58\u76f4\u63a5\u53d1\u9001\u5230\u7f51\u7edc\uff0c\u4ece\u800c\u907f\u514d\u8fd9\u79cd\u91cd\u65b0\u590d\u5236\u3002\u6240\u4ee5\u5728\u8fd9\u4e2a\u4f18\u5316\u8def\u5f84\u4e2d\uff0c\u53ea\u9700\u8981\u6700\u7ec8\u62f7\u8d1d\u5230NIC\u7f13\u51b2\u533a\u5373\u53ef\u3002 \u6211\u4eec\u671f\u671b\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u4e00\u4e2a\u4e3b\u9898\u7684\u591a\u4e2a\u6d88\u8d39\u8005\u3002\u4f7f\u7528\u4e0a\u9762\u7684\u96f6\u590d\u5236\u4f18\u5316\uff0c\u6570\u636e\u88ab\u590d\u5236\u5230\u9875\u9762\u7f13\u5b58\u4e00\u6b21\uff0c\u5e76\u5728\u6bcf\u6b21\u4f7f\u7528\u65f6\u91cd\u590d\u4f7f\u7528\uff0c\u800c\u4e0d\u662f\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u5e76\u5728\u6bcf\u6b21\u8bfb\u53d6\u65f6\u590d\u5236\u5230\u7528\u6237\u7a7a\u95f4\u3002\u8fd9\u5141\u8bb8\u4ee5\u63a5\u8fd1\u7f51\u7edc\u8fde\u63a5\u9650\u5236\u7684\u901f\u7387\u4f7f\u7528\u6d88\u606f\u3002 pagecache \u548c sendfile \u7684\u8fd9\u79cd\u7ec4\u5408\u610f\u5473\u7740\uff0c\u5728\u6d88\u8d39\u8005\u5927\u591a\u9677\u5165\u56f0\u5883\u7684 Kafka \u96c6\u7fa4\u4e0a\uff0c\u60a8\u5c06\u770b\u4e0d\u5230\u78c1\u76d8\u4e0a\u7684\u4efb\u4f55\u8bfb\u53d6\u6d3b\u52a8\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c06\u5b8c\u5168\u4ece\u7f13\u5b58\u63d0\u4f9b\u6570\u636e\u3002 SSL_sendfile TLS/SSL \u5e93\u5728\u7528\u6237\u7a7a\u95f4\u8fd0\u884c\uff08 Kafka \u76ee\u524d\u4e0d\u652f\u6301 \u5185\u6838\uff09\u3002\u7531\u4e8e\u6b64\u9650\u5236\uff0c sendfile \u542f\u7528 SSL \u65f6\u4e0d\u4f7f\u7528\u3002\u8981\u542f\u7528 SSL \u914d\u7f6e\uff0c\u8bf7\u53c2\u9605 security.protocol \u548c security.inter.broker.protocol \u6709\u5173 Java \u4e2d\u7684 sendfile \u548c\u96f6\u62f7\u8d1d\u652f\u6301\u7684\u66f4\u591a\u80cc\u666f\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u8fd9\u7bc7 \u6587\u7ae0 \u3002 \u7aef\u5230\u7aef\u6279\u91cf\u538b\u7f29 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u74f6\u9888\u5b9e\u9645\u4e0a\u4e0d\u662f CPU \u6216\u78c1\u76d8\uff0c\u800c\u662f\u7f51\u7edc\u5e26\u5bbd\u3002\u5bf9\u4e8e\u9700\u8981\u901a\u8fc7\u5e7f\u57df\u7f51\u5728\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u53d1\u9001\u6d88\u606f\u7684\u6570\u636e\u7ba1\u9053\u6765\u8bf4\u5c24\u5176\u5982\u6b64\u3002\u5f53\u7136\uff0c\u7528\u6237\u603b\u662f\u53ef\u4ee5\u4e00\u6b21\u538b\u7f29\u4e00\u4e2a\u6d88\u606f\uff0c\u800c\u4e0d\u9700\u8981 Kafka \u7684\u4efb\u4f55\u652f\u6301\uff0c\u4f46\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u538b\u7f29\u7387\u975e\u5e38\u5dee\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u5197\u4f59\u662f\u7531\u4e8e\u76f8\u540c\u7c7b\u578b\u7684\u6d88\u606f\u4e4b\u95f4\u7684\u91cd\u590d\u9020\u6210\u7684\uff08\u4f8b\u5982\uff0c JSON \u6216\u7f51\u7edc\u65e5\u5fd7\u4e2d\u7684\u7528\u6237\u4ee3\u7406\u6216\u5e38\u89c1\u5b57\u7b26\u4e32\u503c\uff09\u3002\u6709\u6548\u7684\u538b\u7f29\u9700\u8981\u5c06\u591a\u4e2a\u6d88\u606f\u538b\u7f29\u5728\u4e00\u8d77\uff0c\u800c\u4e0d\u662f\u5355\u72ec\u538b\u7f29\u6bcf\u4e2a\u6d88\u606f\u3002 Kafka \u901a\u8fc7\u9ad8\u6548\u7684\u6279\u5904\u7406\u683c\u5f0f\u6765\u652f\u6301\u8fd9\u4e00\u70b9\u3002\u4e00\u6279\u6d88\u606f\u53ef\u4ee5\u805a\u96c6\u5728\u4e00\u8d77\u538b\u7f29\u5e76\u4ee5\u8fd9\u79cd\u5f62\u5f0f\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002\u8fd9\u6279\u6d88\u606f\u5c06\u4ee5\u538b\u7f29\u5f62\u5f0f\u5199\u5165\uff0c\u5e76\u5728\u65e5\u5fd7\u4e2d\u4fdd\u6301\u538b\u7f29\u72b6\u6001\uff0c\u4ec5\u7531\u6d88\u8d39\u8005\u89e3\u538b\u7f29\u3002 Kafka \u652f\u6301 GZIP\u3001Snappy\u3001LZ4 \u548c ZStandard \u538b\u7f29\u534f\u8bae\u3002 \u6709\u5173\u538b\u7f29\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728\u6b64\u5904 \u627e\u5230\u3002 4.4 \u751f\u4ea7\u8005 \u8d1f\u8f7d\u5747\u8861 \u751f\u4ea7\u8005\u5c06\u6570\u636e\u76f4\u63a5\u53d1\u9001\u5230\u4f5c\u4e3a\u5206\u533a\u9886\u5bfc\u8005\u7684\u4ee3\u7406\uff0c\u800c\u65e0\u9700\u4efb\u4f55\u4e2d\u95f4\u8def\u7531\u5c42\u3002\u4e3a\u4e86\u5e2e\u52a9\u751f\u4ea7\u8005\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6240\u6709 Kafka \u8282\u70b9\u90fd\u53ef\u4ee5\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\u54cd\u5e94\u6709\u5173\u54ea\u4e9b\u670d\u52a1\u5668\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u4ee5\u53ca\u4e3b\u9898\u5206\u533a\u7684\u9886\u5bfc\u8005\u6240\u5728\u4f4d\u7f6e\u7684\u5143\u6570\u636e\u8bf7\u6c42\uff0c\u4ee5\u5141\u8bb8\u751f\u4ea7\u8005\u9002\u5f53\u5730\u5f15\u5bfc\u5176\u8bf7\u6c42\u3002 \u5ba2\u6237\u7aef\u63a7\u5236\u5c06\u6d88\u606f\u53d1\u5e03\u5230\u54ea\u4e2a\u5206\u533a\u3002\u8fd9\u53ef\u4ee5\u968f\u673a\u5b8c\u6210\uff0c\u5b9e\u73b0\u4e00\u79cd\u968f\u673a\u8d1f\u8f7d\u5e73\u8861\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u67d0\u79cd\u8bed\u4e49\u5206\u533a\u51fd\u6570\u6765\u5b8c\u6210\u3002\u6211\u4eec\u901a\u8fc7\u5141\u8bb8\u7528\u6237\u6307\u5b9a\u5206\u533a\u952e\u5e76\u4f7f\u7528\u5b83\u6765\u54c8\u5e0c\u5230\u5206\u533a\u6765\u516c\u5f00\u8bed\u4e49\u5206\u533a\u7684\u63a5\u53e3\uff08\u5982\u679c\u9700\u8981\uff0c\u8fd8\u6709\u4e00\u4e2a\u9009\u9879\u53ef\u4ee5\u8986\u76d6\u5206\u533a\u51fd\u6570\uff09\u3002\u4f8b\u5982\uff0c\u5982\u679c\u9009\u62e9\u7684\u952e\u662f\u7528\u6237 ID\uff0c\u5219\u7ed9\u5b9a\u7528\u6237\u7684\u6240\u6709\u6570\u636e\u90fd\u5c06\u53d1\u9001\u5230\u540c\u4e00\u5206\u533a\u3002\u8fd9\u53cd\u8fc7\u6765\u53c8\u5c06\u4f7f\u6d88\u8d39\u8005\u80fd\u591f\u5bf9\u5176\u6d88\u8d39\u505a\u51fa\u5c40\u90e8\u5047\u8bbe\u3002\u8fd9\u79cd\u5206\u533a\u65b9\u5f0f\u660e\u786e\u8bbe\u8ba1\u4e3a\u5141\u8bb8\u6d88\u8d39\u8005\u8fdb\u884c\u5c40\u90e8\u654f\u611f\u5904\u7406\u3002 \u5f02\u6b65\u53d1\u9001 \u6279\u5904\u7406\u662f\u6548\u7387\u7684\u91cd\u8981\u9a71\u52a8\u56e0\u7d20\u4e4b\u4e00\uff0c\u4e3a\u4e86\u542f\u7528\u6279\u5904\u7406\uff0cKafka \u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u5728\u5185\u5b58\u4e2d\u7d2f\u79ef\u6570\u636e\u5e76\u5728\u5355\u4e2a\u8bf7\u6c42\u4e2d\u53d1\u9001\u66f4\u5927\u7684\u6279\u6b21\u3002\u53ef\u4ee5\u5c06\u6279\u5904\u7406\u914d\u7f6e\u4e3a\u7d2f\u79ef\u4e0d\u8d85\u8fc7\u56fa\u5b9a\u6570\u91cf\u7684\u6d88\u606f\uff0c\u5e76\u4e14\u7b49\u5f85\u65f6\u95f4\u4e0d\u8d85\u8fc7\u67d0\u4e2a\u56fa\u5b9a\u5ef6\u8fdf\u9650\u5236\uff08\u4f8b\u5982 64k \u6216 10 ms\uff09\u3002\u8fd9\u5141\u8bb8\u7d2f\u79ef\u66f4\u591a\u8981\u53d1\u9001\u7684\u5b57\u8282\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4e0a\u5f88\u5c11\u6709\u8f83\u5927\u7684 I/O \u64cd\u4f5c\u3002\u8fd9\u79cd\u7f13\u51b2\u662f\u53ef\u914d\u7f6e\u7684\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\u6765\u6743\u8861\u5c11\u91cf\u7684\u989d\u5916\u5ef6\u8fdf\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u541e\u5410\u91cf\u3002 \u6709\u5173\u751f\u4ea7\u8005\u7684 \u914d\u7f6e \u548c api \u7684 \u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728\u6587\u6863\u7684\u5176\u4ed6\u5730\u65b9\u627e\u5230\u3002 4.5 \u6d88\u8d39\u8005 Kafka \u6d88\u8d39\u8005\u7684\u5de5\u4f5c\u65b9\u5f0f\u662f\u5411\u5f15\u5bfc\u5176\u60f3\u8981\u4f7f\u7528\u7684\u5206\u533a\u7684\u4ee3\u7406\u53d1\u51fa\u201c\u83b7\u53d6\u201d\u8bf7\u6c42\u3002\u6d88\u8d39\u8005\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e2d\u6307\u5b9a\u5176\u5728\u65e5\u5fd7\u4e2d\u7684\u504f\u79fb\u91cf\uff0c\u5e76\u63a5\u6536\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u7684\u65e5\u5fd7\u5757\u3002\u56e0\u6b64\uff0c\u6d88\u8d39\u8005\u5bf9\u8be5\u4f4d\u7f6e\u5177\u6709\u663e\u7740\u7684\u63a7\u5236\u6743\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u5c06\u5176\u5012\u56de\u4ee5\u91cd\u65b0\u4f7f\u7528\u6570\u636e\u3002 \u63a8\u4e0e\u62c9 \u6211\u4eec\u8003\u8651\u7684\u6700\u521d\u95ee\u9898\u662f\u6d88\u8d39\u8005\u662f\u5426\u5e94\u8be5\u4ecebroker\u90a3\u91cc\u63d0\u53d6\u6570\u636e\uff0c\u6216\u8005broker\u5e94\u8be5\u5c06\u6570\u636e\u63a8\u9001\u7ed9\u6d88\u8d39\u8005\u3002\u5728\u8fd9\u65b9\u9762\uff0cKafka \u9075\u5faa\u5927\u591a\u6570\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u6240\u5171\u4eab\u7684\u66f4\u4f20\u7edf\u7684\u8bbe\u8ba1\uff0c\u5176\u4e2d\u6570\u636e\u4ece\u751f\u4ea7\u8005\u63a8\u9001\u5230\u4ee3\u7406\u5e76\u7531\u6d88\u8d39\u8005\u4ece\u4ee3\u7406\u4e2d\u63d0\u53d6\u3002\u4e00\u4e9b\u4ee5\u65e5\u5fd7\u8bb0\u5f55\u4e3a\u4e2d\u5fc3\u7684\u7cfb\u7edf\uff0c\u4f8b\u5982 Scribe \u548c Apache Flume \uff0c\u9075\u5faa\u4e00\u79cd\u975e\u5e38\u4e0d\u540c\u7684\u57fa\u4e8e\u63a8\u9001\u7684\u8def\u5f84\uff0c\u5c06\u6570\u636e\u63a8\u9001\u5230\u4e0b\u6e38\u3002\u4e24\u79cd\u65b9\u6cd5\u5404\u6709\u5229\u5f0a\u3002\u7136\u800c\uff0c\u57fa\u4e8e\u63a8\u9001\u7684\u7cfb\u7edf\u5f88\u96be\u5904\u7406\u4e0d\u540c\u7684\u6d88\u8d39\u8005\uff0c\u56e0\u4e3a\u4ee3\u7406\u63a7\u5236\u6570\u636e\u4f20\u8f93\u7684\u901f\u7387\u3002\u76ee\u6807\u901a\u5e38\u662f\u8ba9\u6d88\u8d39\u8005\u80fd\u591f\u4ee5\u5c3d\u53ef\u80fd\u9ad8\u7684\u901f\u5ea6\u6d88\u8d39\uff1b\u4e0d\u5e78\u7684\u662f\uff0c\u5728\u63a8\u9001\u7cfb\u7edf\u4e2d\uff0c\u8fd9\u610f\u5473\u7740\u5f53\u6d88\u8d39\u8005\u7684\u6d88\u8d39\u7387\u4f4e\u4e8e\u751f\u4ea7\u7387\u65f6\uff0c\u6d88\u8d39\u8005\u5f80\u5f80\u4f1a\u4e0d\u77e5\u6240\u63aa\uff08\u672c\u8d28\u4e0a\u662f\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff09\u3002\u57fa\u4e8e\u62c9\u52a8\u7684\u7cfb\u7edf\u5177\u6709\u66f4\u597d\u7684\u7279\u6027\uff0c\u5373\u6d88\u8d39\u8005\u53ef\u4ee5\u7b80\u5355\u5730\u843d\u5728\u540e\u9762\u5e76\u5728\u53ef\u4ee5\u7684\u65f6\u5019\u8d76\u4e0a\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u67d0\u79cd\u9000\u907f\u534f\u8bae\u6765\u7f13\u89e3\uff0c\u6d88\u8d39\u8005\u53ef\u4ee5\u901a\u8fc7\u9000\u907f\u534f\u8bae\u6765\u8868\u660e\u5b83\u5df2\u4e0d\u582a\u91cd\u8d1f\uff0c\u4f46\u8981\u5145\u5206\u5229\u7528\uff08\u4f46\u7edd\u4e0d\u8fc7\u5ea6\u5229\u7528\uff09\u6d88\u8d39\u8005\u7684\u4f20\u8f93\u7387\u6bd4\u770b\u8d77\u6765\u66f4\u68d8\u624b\u3002\u4e4b\u524d\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u6784\u5efa\u7cfb\u7edf\u7684\u5c1d\u8bd5\u5bfc\u81f4\u6211\u4eec\u91c7\u7528\u4e86\u66f4\u4f20\u7edf\u7684\u62c9\u6a21\u578b\u3002 \u57fa\u4e8e\u62c9\u52a8\u7684\u7cfb\u7edf\u7684\u53e6\u4e00\u4e2a\u4f18\u70b9\u662f\uff0c\u5b83\u6709\u52a9\u4e8e\u5c06\u6570\u636e\u6279\u91cf\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u3002\u57fa\u4e8e\u63a8\u9001\u7684\u7cfb\u7edf\u5fc5\u987b\u9009\u62e9\u7acb\u5373\u53d1\u9001\u8bf7\u6c42\u6216\u79ef\u7d2f\u66f4\u591a\u6570\u636e\u7136\u540e\u7a0d\u540e\u53d1\u9001\uff0c\u800c\u4e0d\u77e5\u9053\u4e0b\u6e38\u6d88\u8d39\u8005\u662f\u5426\u80fd\u591f\u7acb\u5373\u5904\u7406\u5b83\u3002\u5982\u679c\u8c03\u6574\u4e3a\u4f4e\u5ef6\u8fdf\uff0c\u8fd9\u5c06\u5bfc\u81f4\u4e00\u6b21\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u4f20\u8f93\u6700\u7ec8\u90fd\u4f1a\u88ab\u7f13\u51b2\uff0c\u8fd9\u662f\u6d6a\u8d39\u7684\u3002\u57fa\u4e8e\u62c9\u53d6\u7684\u8bbe\u8ba1\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u56e0\u4e3a\u6d88\u8d39\u8005\u603b\u662f\u5728\u65e5\u5fd7\u4e2d\u5f53\u524d\u4f4d\u7f6e\u4e4b\u540e\uff08\u6216\u8fbe\u5230\u67d0\u4e2a\u53ef\u914d\u7f6e\u7684\u6700\u5927\u5927\u5c0f\uff09\u62c9\u53d6\u6240\u6709\u53ef\u7528\u6d88\u606f\u3002\u56e0\u6b64\uff0c\u4eba\u4eec\u53ef\u4ee5\u83b7\u5f97\u6700\u4f73\u7684\u6279\u5904\u7406\uff0c\u800c\u4e0d\u4f1a\u5f15\u5165\u4e0d\u5fc5\u8981\u7684\u5ef6\u8fdf\u3002 \u57fa\u4e8e\u62c9\u52a8\u7684\u7cfb\u7edf\u7684\u7f3a\u9677\u5728\u4e8e\uff0c\u5982\u679c\u4ee3\u7406\u6ca1\u6709\u6570\u636e\uff0c\u6d88\u8d39\u8005\u6700\u7ec8\u53ef\u80fd\u4f1a\u5728\u7d27\u5bc6\u7684\u5faa\u73af\u4e2d\u8fdb\u884c\u8f6e\u8be2\uff0c\u5b9e\u9645\u4e0a\u5fd9\u4e8e\u7b49\u5f85\u6570\u636e\u5230\u8fbe\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u5728\u62c9\u53d6\u8bf7\u6c42\u4e2d\u8bbe\u7f6e\u4e86\u53c2\u6570\uff0c\u5141\u8bb8\u6d88\u8d39\u8005\u8bf7\u6c42\u5728\u201c\u957f\u8f6e\u8be2\u201d\u4e2d\u963b\u585e\uff0c\u7b49\u5f85\u6570\u636e\u5230\u8fbe\uff08\u5e76\u4e14\u53ef\u4ee5\u9009\u62e9\u7b49\u5f85\u7ed9\u5b9a\u6570\u91cf\u7684\u5b57\u8282\u53ef\u7528\uff0c\u4ee5\u786e\u4fdd\u5927\u7684\u4f20\u8f93\u5927\u5c0f\uff09\u3002 \u60a8\u53ef\u4ee5\u60f3\u8c61\u5176\u4ed6\u53ef\u80fd\u7684\u8bbe\u8ba1\uff0c\u8fd9\u4e9b\u8bbe\u8ba1\u53ea\u662f\u62c9\u5f0f\u3001\u7aef\u5230\u7aef\u7684\u3002\u751f\u4ea7\u8005\u5c06\u5728\u672c\u5730\u5199\u5165\u672c\u5730\u65e5\u5fd7\uff0cbroker\u5c06\u4ece\u5176\u4e2d\u62c9\u53d6\uff0c\u6d88\u8d39\u8005\u4e5f\u5c06\u4ece\u4e2d\u62c9\u53d6\u3002\u4eba\u4eec\u7ecf\u5e38\u63d0\u51fa\u7c7b\u4f3c\u7c7b\u578b\u7684\u201c\u5b58\u50a8\u8f6c\u53d1\u201d\u751f\u4ea7\u8005\u3002\u8fd9\u5f88\u6709\u8da3\uff0c\u4f46\u6211\u4eec\u89c9\u5f97\u4e0d\u592a\u9002\u5408\u6211\u4eec\u62e5\u6709\u6570\u5343\u4e2a\u751f\u4ea7\u8005\u7684\u76ee\u6807\u7528\u4f8b\u3002\u6211\u4eec\u5927\u89c4\u6a21\u8fd0\u884c\u6301\u4e45\u6570\u636e\u7cfb\u7edf\u7684\u7ecf\u9a8c\u8ba9\u6211\u4eec\u611f\u5230\uff0c\u5728\u7cfb\u7edf\u4e2d\u8de8\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u6d89\u53ca\u6570\u5343\u4e2a\u78c1\u76d8\u5b9e\u9645\u4e0a\u5e76\u4e0d\u4f1a\u8ba9\u4e8b\u60c5\u53d8\u5f97\u66f4\u53ef\u9760\uff0c\u800c\u4e14\u64cd\u4f5c\u8d77\u6765\u4f1a\u662f\u4e00\u573a\u5669\u68a6\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u53ef\u4ee5\u5927\u89c4\u6a21\u8fd0\u884c\u5177\u6709\u5f3a\u5927 SLA \u7684\u7ba1\u9053\uff0c\u800c\u4e0d\u9700\u8981\u751f\u4ea7\u8005\u6301\u4e45\u6027\u3002 \u6d88\u8d39\u8005\u5b9a\u4f4d \u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\uff0c\u8ddf\u8e2a\u5df2\u6d88\u8017\u7684 \u5185\u5bb9 \u662f\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u7684\u5173\u952e\u6027\u80fd\u70b9\u4e4b\u4e00\u3002 \u5927\u591a\u6570\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u90fd\u4f1a\u4fdd\u5b58\u6709\u5173\u4ee3\u7406\u4e0a\u5df2\u4f7f\u7528\u7684\u6d88\u606f\u7684\u5143\u6570\u636e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6d88\u606f\u88ab\u5206\u53d1\u7ed9\u6d88\u8d39\u8005\u65f6\uff0c\u4ee3\u7406\u8981\u4e48\u7acb\u5373\u5728\u672c\u5730\u8bb0\u5f55\u8be5\u4e8b\u5b9e\uff0c\u8981\u4e48\u7b49\u5f85\u6d88\u8d39\u8005\u7684\u786e\u8ba4\u3002\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u76f4\u89c2\u7684\u9009\u62e9\uff0c\u5b9e\u9645\u4e0a\u5bf9\u4e8e\u5355\u673a\u670d\u52a1\u5668\u6765\u8bf4\uff0c\u5e76\u4e0d\u6e05\u695a\u8fd9\u79cd\u72b6\u6001\u8fd8\u53ef\u4ee5\u53bb\u54ea\u91cc\u3002\u7531\u4e8e\u8bb8\u591a\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u7528\u4e8e\u5b58\u50a8\u7684\u6570\u636e\u7ed3\u6784\u6269\u5c55\u6027\u5f88\u5dee\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a\u52a1\u5b9e\u7684\u9009\u62e9\u2014\u2014\u56e0\u4e3a\u4ee3\u7406\u77e5\u9053\u6d88\u8017\u4e86\u4ec0\u4e48\uff0c\u6240\u4ee5\u53ef\u4ee5\u7acb\u5373\u5220\u9664\u5b83\uff0c\u4ece\u800c\u4fdd\u6301\u6570\u636e\u5927\u5c0f\u8f83\u5c0f\u3002 \u4e5f\u8bb8\u4e0d\u592a\u660e\u663e\u7684\u662f\uff0c\u8ba9broker\u548c\u6d88\u8d39\u8005\u5c31\u6d88\u8d39\u5185\u5bb9\u8fbe\u6210\u4e00\u81f4\u5e76\u4e0d\u662f\u4e00\u4e2a\u5c0f\u95ee\u9898\u3002\u5982\u679c\u4ee3\u7406\u5728\u6bcf\u6b21\u901a\u8fc7\u7f51\u7edc\u5206\u53d1\u6d88\u606f\u65f6\u7acb\u5373\u5c06\u5176\u8bb0\u5f55\u4e3a\u5df2\u6d88\u8d39\uff0c\u90a3\u4e48\u5982\u679c\u6d88\u8d39\u8005\u65e0\u6cd5\u5904\u7406\u8be5\u6d88\u606f\uff08\u4f8b\u5982\u56e0\u4e3a\u5d29\u6e83\u6216\u8bf7\u6c42\u8d85\u65f6\u6216\u5176\u4ed6\u539f\u56e0\uff09\uff0c\u8be5\u6d88\u606f\u5c06\u4e22\u5931 \u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8bb8\u591a\u6d88\u606f\u7cfb\u7edf\u6dfb\u52a0\u4e86\u786e\u8ba4\u529f\u80fd\uff0c\u8fd9\u610f\u5473\u7740\u6d88\u606f\u5728\u53d1\u9001\u65f6\u4ec5\u88ab\u6807\u8bb0\u4e3a\u5df2 \u53d1\u9001 \uff0c\u800c\u4e0d\u662f \u88ab\u6d88\u8d39\uff1b \u4ee3\u7406\u7b49\u5f85\u6d88\u8d39\u8005\u7684\u7279\u5b9a\u786e\u8ba4\u4ee5\u5c06\u6d88\u606f\u8bb0\u5f55\u4e3a \u5df2\u6d88\u8d39 \u3002\u8fd9\u79cd\u7b56\u7565\u89e3\u51b3\u4e86\u4e22\u5931\u6d88\u606f\u7684\u95ee\u9898\uff0c\u4f46\u4e5f\u4ea7\u751f\u4e86\u65b0\u7684\u95ee\u9898\u3002\u9996\u5148\uff0c\u5982\u679c\u6d88\u8d39\u8005\u5904\u7406\u6d88\u606f\u4f46\u5728\u53d1\u9001\u786e\u8ba4\u4e4b\u524d\u5931\u8d25\uff0c\u90a3\u4e48\u8be5\u6d88\u606f\u5c06\u88ab\u6d88\u8d39\u4e24\u6b21\u3002\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\u5173\u4e8e\u6027\u80fd\u7684\uff0c\u73b0\u5728\u4ee3\u7406\u5fc5\u987b\u4fdd\u7559\u6bcf\u6761\u6d88\u606f\u7684\u591a\u4e2a\u72b6\u6001\uff08\u9996\u5148\u9501\u5b9a\u5b83\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u518d\u6b21\u53d1\u51fa\uff0c\u7136\u540e\u5c06\u5176\u6807\u8bb0\u4e3a\u6c38\u4e45\u6d88\u8017\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u5c06\u5176\u5220\u9664\uff09\u3002\u5fc5\u987b\u5904\u7406\u68d8\u624b\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u5982\u4f55\u5904\u7406\u5df2\u53d1\u9001\u4f46\u4ece\u672a\u786e\u8ba4\u7684\u6d88\u606f\u3002 Kafka\u5bf9\u6b64\u7684\u5904\u7406\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\u3002\u6211\u4eec\u7684\u4e3b\u9898\u5206\u4e3a\u4e00\u7ec4\u5b8c\u5168\u6709\u5e8f\u7684\u5206\u533a\uff0c\u6bcf\u4e2a\u5206\u533a\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\u90fd\u7531\u6bcf\u4e2a\u8ba2\u9605\u6d88\u8d39\u8005\u7ec4\u4e2d\u7684\u4e00\u4e2a\u6d88\u8d39\u8005\u6d88\u8d39\u3002\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u5206\u533a\u4e2d\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u53ea\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u5373\u8981\u6d88\u8d39\u7684\u4e0b\u4e00\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002\u8fd9\u4f7f\u5f97\u6709\u5173\u5df2\u6d88\u8017\u5185\u5bb9\u7684\u72b6\u6001\u975e\u5e38\u5c0f\uff0c\u6bcf\u4e2a\u5206\u533a\u53ea\u6709\u4e00\u4e2a\u6570\u5b57\u3002\u53ef\u4ee5\u5b9a\u671f\u68c0\u67e5\u6b64\u72b6\u6001\u3002\u8fd9\u4f7f\u5f97\u6d88\u606f\u786e\u8ba4\u7684\u6210\u672c\u975e\u5e38\u4f4e\u3002 \u8fd9\u4e2a\u51b3\u5b9a\u8fd8\u6709\u4e00\u4e2a\u9644\u5e26\u7684\u597d\u5904\u3002\u6d88\u8d39\u8005\u53ef\u4ee5\u6545\u610f \u56de \u9000\u5230\u65e7\u7684\u504f\u79fb\u91cf\u5e76\u91cd\u65b0\u4f7f\u7528\u6570\u636e\u3002\u8fd9\u8fdd\u53cd\u4e86\u961f\u5217\u7684\u5e38\u89c1\u5951\u7ea6\uff0c\u4f46\u4e8b\u5b9e\u8bc1\u660e\u5bf9\u4e8e\u8bb8\u591a\u6d88\u8d39\u8005\u6765\u8bf4\u8fd9\u662f\u4e00\u4e2a\u57fa\u672c\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6d88\u8d39\u8005\u4ee3\u7801\u5b58\u5728\u9519\u8bef\uff0c\u5e76\u4e14\u5728\u6d88\u8d39\u4e86\u4e00\u4e9b\u6d88\u606f\u540e\u53d1\u73b0\uff0c\u5219\u6d88\u8d39\u8005\u53ef\u4ee5\u5728\u9519\u8bef\u4fee\u590d\u540e\u91cd\u65b0\u6d88\u8d39\u8fd9\u4e9b\u6d88\u606f\u3002 \u79bb\u7ebf\u6570\u636e\u52a0\u8f7d \u53ef\u6269\u5c55\u7684\u6301\u4e45\u6027\u5141\u8bb8\u6d88\u8d39\u8005\u4ec5\u5b9a\u671f\u6d88\u8d39\uff0c\u4f8b\u5982\u6279\u91cf\u6570\u636e\u52a0\u8f7d\uff0c\u5b9a\u671f\u5c06\u6570\u636e\u6279\u91cf\u52a0\u8f7d\u5230\u79bb\u7ebf\u7cfb\u7edf\uff08\u4f8b\u5982 Hadoop \u6216\u5173\u7cfb\u6570\u636e\u4ed3\u5e93\uff09\u4e2d\u3002 \u5bf9\u4e8e Hadoop\uff0c\u6211\u4eec\u901a\u8fc7\u5c06\u8d1f\u8f7d\u62c6\u5206\u5230\u5404\u4e2a\u6620\u5c04\u4efb\u52a1\uff08\u6bcf\u4e2a\u8282\u70b9/\u4e3b\u9898/\u5206\u533a\u7ec4\u5408\u4e00\u4e2a\uff09\u6765\u5e76\u884c\u5316\u6570\u636e\u52a0\u8f7d\uff0c\u4ece\u800c\u5141\u8bb8\u52a0\u8f7d\u5b8c\u5168\u5e76\u884c\u3002Hadoop \u63d0\u4f9b\u4efb\u52a1\u7ba1\u7406\uff0c\u5931\u8d25\u7684\u4efb\u52a1\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u6570\u636e\u7684\u5371\u9669\u2014\u2014\u5b83\u4eec\u53ea\u662f\u4ece\u539f\u6765\u7684\u4f4d\u7f6e\u91cd\u65b0\u542f\u52a8\u3002 \u9759\u6001\u4f1a\u5458\u8d44\u683c \u9759\u6001\u6210\u5458\u8d44\u683c\u65e8\u5728\u63d0\u9ad8\u6d41\u5e94\u7528\u7a0b\u5e8f\u3001\u6d88\u8d39\u8005\u7ec4\u548c\u5176\u4ed6\u6784\u5efa\u5728\u7ec4\u518d\u5e73\u8861\u534f\u8bae\u4e4b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u53ef\u7528\u6027\u3002\u518d\u5e73\u8861\u534f\u8bae\u4f9d\u8d56\u7ec4\u534f\u8c03\u5668\u4e3a\u7ec4\u6210\u5458\u5206\u914d\u5b9e\u4f53 ID\u3002\u8fd9\u4e9b\u751f\u6210\u7684 ID \u662f\u77ed\u6682\u7684\uff0c\u5e76\u4e14\u4f1a\u5728\u6210\u5458\u91cd\u65b0\u542f\u52a8\u548c\u91cd\u65b0\u52a0\u5165\u65f6\u53d1\u751f\u53d8\u5316\u3002\u5bf9\u4e8e\u57fa\u4e8e\u6d88\u8d39\u8005\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u8fd9\u79cd\u201c\u52a8\u6001\u6210\u5458\u8d44\u683c\u201d\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5728\u7ba1\u7406\u64cd\u4f5c\uff08\u4f8b\u5982\u4ee3\u7801\u90e8\u7f72\u3001\u914d\u7f6e\u66f4\u65b0\u548c\u5b9a\u671f\u91cd\u65b0\u542f\u52a8\uff09\u671f\u95f4\u5c06\u5927\u90e8\u5206\u4efb\u52a1\u91cd\u65b0\u5206\u914d\u7ed9\u4e0d\u540c\u7684\u5b9e\u4f8b\u3002\u5bf9\u4e8e\u5927\u578b\u72b6\u6001\u5e94\u7528\u7a0b\u5e8f\uff0c\u6d17\u724c\u4efb\u52a1\u5728\u5904\u7406\u4e4b\u524d\u9700\u8981\u5f88\u957f\u65f6\u95f4\u624d\u80fd\u6062\u590d\u5176\u672c\u5730\u72b6\u6001\uff0c\u4ece\u800c\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u90e8\u5206\u6216\u5b8c\u5168\u4e0d\u53ef\u7528\u3002\u53d7\u8fd9\u4e00\u89c2\u5bdf\u7684\u542f\u53d1\uff0cKafka \u7684\u7ec4\u7ba1\u7406\u534f\u8bae\u5141\u8bb8\u7ec4\u6210\u5458\u63d0\u4f9b\u6301\u4e45\u7684\u5b9e\u4f53 ID\u3002\u6839\u636e\u8fd9\u4e9b ID\uff0c\u7ec4\u6210\u5458\u8d44\u683c\u4fdd\u6301\u4e0d\u53d8\uff0c\u56e0\u6b64\u4e0d\u4f1a\u89e6\u53d1\u91cd\u65b0\u5e73\u8861\u3002 \u5982\u679c\u60a8\u60f3\u4f7f\u7528\u9759\u6001\u6210\u5458\u8d44\u683c\uff0c \u5c06\u4ee3\u7406\u96c6\u7fa4\u548c\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u5347\u7ea7\u5230 2.3 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5e76\u786e\u4fdd\u5347\u7ea7\u540e\u7684\u4ee3\u7406\u4e5f\u4f7f\u7528 inter.broker.protocol.version 2.3 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u5c06\u914d\u7f6e\u8bbe\u7f6e ConsumerConfig#GROUP_INSTANCE_ID_CONFIG \u4e3a\u4e00\u7ec4\u4e0b\u6bcf\u4e2a\u6d88\u8d39\u8005\u5b9e\u4f8b\u7684\u552f\u4e00\u503c\u3002 \u5bf9\u4e8e Kafka Streams \u5e94\u7528\u7a0b\u5e8f\uff0c\u4e3a\u6bcf\u4e2a KafkaStreams \u5b9e\u4f8b\u8bbe\u7f6e\u552f\u4e00\u7684\u503c\u5c31\u8db3\u591f\u4e86 ConsumerConfig#GROUP_INSTANCE_ID_CONFIG \uff0c\u4e0e\u5b9e\u4f8b\u4f7f\u7528\u7684\u7ebf\u7a0b\u6570\u65e0\u5173\u3002 \u5982\u679c\u60a8\u7684\u4ee3\u7406\u4f7f\u7528\u7684\u7248\u672c\u4f4e\u4e8e 2.3\uff0c\u4f46\u60a8\u9009\u62e9 ConsumerConfig#GROUP_INSTANCE_ID_CONFIG \u5728\u5ba2\u6237\u7aef\u8bbe\u7f6e\uff0c\u5219\u5e94\u7528\u7a0b\u5e8f\u5c06\u68c0\u6d4b\u4ee3\u7406\u7248\u672c\uff0c\u7136\u540e\u629b\u51fa UnsupportedException\u3002\u5982\u679c\u60a8\u4e0d\u5c0f\u5fc3\u4e3a\u4e0d\u540c\u7684\u5b9e\u4f8b\u914d\u7f6e\u4e86\u91cd\u590d\u7684 ID\uff0c\u4ee3\u7406\u7aef\u7684\u9632\u62a4\u673a\u5236\u5c06\u901a\u8fc7\u89e6\u53d1 org.apache.kafka.common.errors.FencedInstanceIdException . \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-345 4.6 \u6d88\u606f\u4f20\u9012\u8bed\u4e49 \u73b0\u5728\u6211\u4eec\u5bf9\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u5de5\u4f5c\u539f\u7406\u6709\u4e86\u4e00\u4e9b\u4e86\u89e3\uff0c\u8ba9\u6211\u4eec\u8ba8\u8bba\u4e00\u4e0b Kafka \u5728\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4e4b\u95f4\u63d0\u4f9b\u7684\u8bed\u4e49\u4fdd\u8bc1\u3002\u663e\u7136\uff0c\u53ef\u4ee5\u63d0\u4f9b\u591a\u79cd\u53ef\u80fd\u7684\u6d88\u606f\u4f20\u9012\u4fdd\u8bc1\uff1a \u6700\u591a\u4e00\u6b21 \u2014\u2014\u6d88\u606f\u53ef\u80fd\u4f1a\u4e22\u5931\uff0c\u4f46\u6c38\u8fdc\u4e0d\u4f1a\u91cd\u65b0\u4f20\u9001\u3002 \u81f3\u5c11\u4e00\u6b21 \u2014\u2014\u6d88\u606f\u6c38\u8fdc\u4e0d\u4f1a\u4e22\u5931\uff0c\u4f46\u53ef\u4ee5\u91cd\u65b0\u4f20\u9001\u3002 \u6070\u597d\u4e00\u6b21 \u2014\u2014\u8fd9\u5c31\u662f\u4eba\u4eec\u771f\u6b63\u60f3\u8981\u7684\uff0c\u6bcf\u6761\u6d88\u606f\u90fd\u4f20\u9012\u4e00\u6b21\u4e14\u4ec5\u4e00\u6b21\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u5206\u4e3a\u4e24\u4e2a\u95ee\u9898\uff1a\u53d1\u5e03\u6d88\u606f\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u548c\u6d88\u8d39\u6d88\u606f\u65f6\u7684\u4fdd\u8bc1\u3002 \u8bb8\u591a\u7cfb\u7edf\u58f0\u79f0\u63d0\u4f9b\u201c\u6070\u597d\u4e00\u6b21\u201d\u4ea4\u4ed8\u8bed\u4e49\uff0c\u4f46\u9605\u8bfb\u7ec6\u5219\u5f88\u91cd\u8981\uff0c\u8fd9\u4e9b\u58f0\u660e\u4e2d\u7684\u5927\u591a\u6570\u90fd\u662f\u8bef\u5bfc\u6027\u7684\uff08\u5373\u5b83\u4eec\u4e0d\u80fd\u8f6c\u5316\u4e3a\u6d88\u8d39\u8005\u6216\u751f\u4ea7\u8005\u53ef\u80fd\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u6709\u591a\u4e2a\u7684\u60c5\u51b5\uff09\u6d88\u8d39\u8005\u8fdb\u7a0b\uff0c\u6216\u8005\u5199\u5165\u78c1\u76d8\u7684\u6570\u636e\u53ef\u80fd\u4e22\u5931\u7684\u60c5\u51b5\uff09\u3002 Kafka\u7684\u8bed\u4e49\u662f\u76f4\u63a5\u7684\u3002\u5f53\u53d1\u5e03\u6d88\u606f\u65f6\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u6d88\u606f\u88ab\u201c\u63d0\u4ea4\u201d\u5230\u65e5\u5fd7\u7684\u6982\u5ff5\u3002\u4e00\u65e6\u63d0\u4ea4\u4e86\u5df2\u53d1\u5e03\u7684\u6d88\u606f\uff0c\u53ea\u8981\u590d\u5236\u8be5\u6d88\u606f\u6240\u5199\u5165\u7684\u5206\u533a\u7684\u4e00\u4e2a\u4ee3\u7406\u4fdd\u6301\u201c\u6d3b\u52a8\u201d\u72b6\u6001\uff0c\u8be5\u6d88\u606f\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002\u5df2\u63d0\u4ea4\u6d88\u606f\u3001\u6d3b\u52a8\u5206\u533a\u7684\u5b9a\u4e49\u4ee5\u53ca\u6211\u4eec\u5c1d\u8bd5\u5904\u7406\u7684\u6545\u969c\u7c7b\u578b\u7684\u63cf\u8ff0\u5c06\u5728\u4e0b\u4e00\u8282\u4e2d\u66f4\u8be6\u7ec6\u5730\u63cf\u8ff0\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5047\u8bbe\u4e00\u4e2a\u5b8c\u7f8e\u7684\u3001\u65e0\u635f\u7684broker\uff0c\u5e76\u5c1d\u8bd5\u7406\u89e3\u5bf9\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u4fdd\u8bc1\u3002\u5982\u679c\u751f\u4ea7\u8005\u5c1d\u8bd5\u53d1\u5e03\u6d88\u606f\u5e76\u9047\u5230\u7f51\u7edc\u9519\u8bef\uff0c\u5219\u65e0\u6cd5\u786e\u5b9a\u6b64\u9519\u8bef\u662f\u5728\u63d0\u4ea4\u6d88\u606f\u4e4b\u524d\u8fd8\u662f\u4e4b\u540e\u53d1\u751f\u3002 \u5728 0.11.0.0 \u4e4b\u524d\uff0c\u5982\u679c\u751f\u4ea7\u8005\u672a\u80fd\u6536\u5230\u6307\u793a\u6d88\u606f\u5df2\u63d0\u4ea4\u7684\u54cd\u5e94\uff0c\u5b83\u522b\u65e0\u9009\u62e9\uff0c\u53ea\u80fd\u91cd\u65b0\u53d1\u9001\u6d88\u606f\u3002\u8fd9\u63d0\u4f9b\u4e86\u81f3\u5c11\u4e00\u6b21\u4f20\u9012\u8bed\u4e49\uff0c\u56e0\u4e3a\u5982\u679c\u539f\u59cb\u8bf7\u6c42\u5b9e\u9645\u4e0a\u5df2\u6210\u529f\uff0c\u5219\u5728\u91cd\u65b0\u53d1\u9001\u671f\u95f4\u6d88\u606f\u53ef\u80fd\u4f1a\u518d\u6b21\u5199\u5165\u65e5\u5fd7\u3002\u4ece0.11.0.0\u5f00\u59cb\uff0cKafka\u751f\u4ea7\u8005\u8fd8\u652f\u6301\u5e42\u7b49\u4f20\u9012\u9009\u9879\uff0c\u4fdd\u8bc1\u91cd\u65b0\u53d1\u9001\u4e0d\u4f1a\u5bfc\u81f4\u65e5\u5fd7\u4e2d\u51fa\u73b0\u91cd\u590d\u6761\u76ee\u200b\u200b\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u4ee3\u7406\u4e3a\u6bcf\u4e2a\u751f\u4ea7\u8005\u5206\u914d\u4e00\u4e2a ID\uff0c\u5e76\u4f7f\u7528\u751f\u4ea7\u8005\u968f\u6bcf\u6761\u6d88\u606f\u53d1\u9001\u7684\u5e8f\u5217\u53f7\u6765\u5220\u9664\u91cd\u590d\u7684\u6d88\u606f\u3002\u540c\u6837\u4ece 0.11.0.0 \u5f00\u59cb\uff0c\u751f\u4ea7\u8005\u652f\u6301\u4f7f\u7528\u7c7b\u4f3c\u4e8b\u52a1\u7684\u8bed\u4e49\u5c06\u6d88\u606f\u53d1\u9001\u5230\u591a\u4e2a\u4e3b\u9898\u5206\u533a\u7684\u80fd\u529b\uff1a\u5373 \u8981\u4e48\u6240\u6709\u6d88\u606f\u5747\u5df2\u6210\u529f\u5199\u5165\uff0c\u8981\u4e48\u5747\u672a\u6210\u529f\u5199\u5165\u3002\u5176\u4e3b\u8981\u7528\u4f8b\u662f Kafka \u4e3b\u9898\u4e4b\u95f4\u7684\u4e00\u6b21\u6027\u5904\u7406\uff08\u5982\u4e0b\u6240\u8ff0\uff09\u3002 \u5e76\u975e\u6240\u6709\u7528\u4f8b\u90fd\u9700\u8981\u5982\u6b64\u5f3a\u6709\u529b\u7684\u4fdd\u8bc1\u3002\u5bf9\u4e8e\u5bf9\u5ef6\u8fdf\u654f\u611f\u7684\u7528\u9014\uff0c\u6211\u4eec\u5141\u8bb8\u751f\u4ea7\u8005\u6307\u5b9a\u5176\u6240\u9700\u7684\u6301\u4e45\u6027\u7ea7\u522b\u3002\u5982\u679c\u751f\u4ea7\u8005\u6307\u5b9a\u5b83\u60f3\u8981\u7b49\u5f85\u6d88\u606f\u88ab\u63d0\u4ea4\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u5927\u7ea6 10 \u6beb\u79d2\u3002\u7136\u800c\uff0c\u751f\u4ea7\u8005\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5b83\u60f3\u8981\u5b8c\u5168\u5f02\u6b65\u5730\u6267\u884c\u53d1\u9001\uff0c\u6216\u8005\u5b83\u53ea\u60f3\u7b49\u5230\u9886\u5bfc\u8005\uff08\u4f46\u4e0d\u4e00\u5b9a\u662f\u8ffd\u968f\u8005\uff09\u6536\u5230\u6d88\u606f\u3002 \u73b0\u5728\u8ba9\u6211\u4eec\u4ece\u6d88\u8d39\u8005\u7684\u89d2\u5ea6\u6765\u63cf\u8ff0\u8bed\u4e49\u3002\u6240\u6709\u526f\u672c\u90fd\u5177\u6709\u5b8c\u5168\u76f8\u540c\u7684\u65e5\u5fd7\u548c\u76f8\u540c\u7684\u504f\u79fb\u91cf\u3002\u6d88\u8d39\u8005\u63a7\u5236\u5176\u5728\u6b64\u65e5\u5fd7\u4e2d\u7684\u4f4d\u7f6e\u3002\u5982\u679c\u6d88\u8d39\u8005\u4ece\u672a\u5d29\u6e83\uff0c\u5b83\u53ef\u4ee5\u53ea\u5c06\u8be5\u4f4d\u7f6e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4f46\u5982\u679c\u6d88\u8d39\u8005\u5931\u8d25\u5e76\u4e14\u6211\u4eec\u5e0c\u671b\u8be5\u4e3b\u9898\u5206\u533a\u7531\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u63a5\u7ba1\uff0c\u5219\u65b0\u8fdb\u7a0b\u5c06\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u9002\u5f53\u7684\u4f4d\u7f6e\u6765\u5f00\u59cb\u5904\u7406\u3002\u5047\u8bbe\u6d88\u8d39\u8005\u8bfb\u53d6\u4e86\u4e00\u4e9b\u6d88\u606f\u2014\u2014\u5b83\u6709\u51e0\u4e2a\u9009\u9879\u6765\u5904\u7406\u6d88\u606f\u5e76\u66f4\u65b0\u5176\u4f4d\u7f6e\u3002 \u5b83\u53ef\u4ee5\u8bfb\u53d6\u6d88\u606f\uff0c\u7136\u540e\u5c06\u5176\u4f4d\u7f6e\u4fdd\u5b58\u5728\u65e5\u5fd7\u4e2d\uff0c\u6700\u540e\u5904\u7406\u6d88\u606f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6d88\u8d39\u8005\u8fdb\u7a0b\u6709\u53ef\u80fd\u5728\u4fdd\u5b58\u5176\u4f4d\u7f6e\u4e4b\u540e\u4f46\u5728\u4fdd\u5b58\u5176\u6d88\u606f\u5904\u7406\u7684\u8f93\u51fa\u4e4b\u524d\u5d29\u6e83\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u63a5\u7ba1\u5904\u7406\u7684\u8fdb\u7a0b\u5c06\u4ece\u4fdd\u5b58\u7684\u4f4d\u7f6e\u5f00\u59cb\uff0c\u5373\u4f7f\u8be5\u4f4d\u7f6e\u4e4b\u524d\u7684\u4e00\u4e9b\u6d88\u606f\u5c1a\u672a\u5904\u7406\u3002\u8fd9\u5bf9\u5e94\u4e8e\u201c\u81f3\u591a\u4e00\u6b21\u201d\u8bed\u4e49\uff0c\u56e0\u4e3a\u5728\u6d88\u8d39\u8005\u5931\u8d25\u6d88\u606f\u53ef\u80fd\u4e0d\u4f1a\u88ab\u5904\u7406\u7684\u60c5\u51b5\u4e0b\u3002 \u5b83\u53ef\u4ee5\u8bfb\u53d6\u6d88\u606f\uff0c\u5904\u7406\u6d88\u606f\uff0c\u6700\u540e\u4fdd\u5b58\u5176\u4f4d\u7f6e\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6d88\u8d39\u8005\u8fdb\u7a0b\u6709\u53ef\u80fd\u5728\u5904\u7406\u6d88\u606f\u4e4b\u540e\u4f46\u5728\u4fdd\u5b58\u5176\u4f4d\u7f6e\u4e4b\u524d\u5d29\u6e83\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53\u65b0\u8fdb\u7a0b\u63a5\u7ba1\u65f6\uff0c\u5b83\u6536\u5230\u7684\u524d\u51e0\u6761\u6d88\u606f\u5c06\u5df2\u7ecf\u88ab\u5904\u7406\u3002\u8fd9\u5bf9\u5e94\u4e8e\u6d88\u8d39\u8005\u5931\u8d25\u60c5\u51b5\u4e0b\u7684\u201c\u81f3\u5c11\u4e00\u6b21\u201d\u8bed\u4e49\u3002\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u6d88\u606f\u5177\u6709\u4e3b\u952e\uff0c\u56e0\u6b64\u66f4\u65b0\u662f\u5e42\u7b49\u7684\uff08\u4e24\u6b21\u63a5\u6536\u76f8\u540c\u7684\u6d88\u606f\u53ea\u4f1a\u7528\u5176\u81ea\u8eab\u7684\u53e6\u4e00\u4e2a\u526f\u672c\u8986\u76d6\u8bb0\u5f55\uff09\u3002 \u90a3\u4e48\u6070\u597d\u4e00\u6b21\u8bed\u4e49\uff08\u5373\u4f60\u771f\u6b63\u60f3\u8981\u7684\u4e1c\u897f\uff09\u53c8\u5982\u4f55\u5462\uff1f\u5f53\u4ece Kafka \u4e3b\u9898\u6d88\u8d39\u5e76\u751f\u4ea7\u5230\u53e6\u4e00\u4e2a\u4e3b\u9898\u65f6\uff08\u5982\u5728 Kafka Streams\u4e2d\uff09 \u5e94\u7528\u7a0b\u5e8f\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e0a\u9762\u63d0\u5230\u7684 0.11.0.0 \u4e2d\u65b0\u7684\u4e8b\u52a1\u6027\u751f\u4ea7\u8005\u529f\u80fd\u3002\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u4f5c\u4e3a\u6d88\u606f\u5b58\u50a8\u5728\u4e3b\u9898\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728\u4e0e\u63a5\u6536\u5904\u7406\u6570\u636e\u7684\u8f93\u51fa\u4e3b\u9898\u76f8\u540c\u7684\u4e8b\u52a1\u4e2d\u5c06\u504f\u79fb\u91cf\u5199\u5165 Kafka\u3002\u5982\u679c\u4e8b\u52a1\u4e2d\u6b62\uff0c\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u5c06\u6062\u590d\u5230\u5176\u65e7\u503c\uff0c\u5e76\u4e14\u8f93\u51fa\u4e3b\u9898\u4e0a\u751f\u6210\u7684\u6570\u636e\u5bf9\u5176\u4ed6\u6d88\u8d39\u8005\u4e0d\u53ef\u89c1\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u4ed6\u4eec\u7684\u201c\u9694\u79bb\u7ea7\u522b\u201d\u3002\u5728\u9ed8\u8ba4\u7684\u201cread_uncommissed\u201d\u9694\u79bb\u7ea7\u522b\u4e2d\uff0c\u6240\u6709\u6d88\u606f\u5bf9\u6d88\u8d39\u8005\u90fd\u662f\u53ef\u89c1\u7684\uff0c\u5373\u4f7f\u5b83\u4eec\u662f\u4e2d\u6b62\u4e8b\u52a1\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u5728\u201cread_commissed\u201d\u4e2d\uff0c\u6d88\u8d39\u8005\u53ea\u4f1a\u4ece\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u4e2d\u8fd4\u56de\u6d88\u606f\uff08\u4ee5\u53ca\u4e0d\u5c5e\u4e8e\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u4efb\u4f55\u6d88\u606f\uff09\u4ea4\u6613\u7684\u4e00\u90e8\u5206\uff09\u3002 \u5f53\u5199\u5165\u5916\u90e8\u7cfb\u7edf\u65f6\uff0c\u9650\u5236\u5728\u4e8e\u9700\u8981\u5c06\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u4e0e\u5b9e\u9645\u5b58\u50a8\u4e3a\u8f93\u51fa\u7684\u5185\u5bb9\u76f8\u534f\u8c03\u3002\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u7684\u7ecf\u5178\u65b9\u6cd5\u662f\u5728\u6d88\u8d39\u8005\u4f4d\u7f6e\u7684\u5b58\u50a8\u548c\u6d88\u8d39\u8005\u8f93\u51fa\u7684\u5b58\u50a8\u4e4b\u95f4\u5f15\u5165\u4e24\u9636\u6bb5\u63d0\u4ea4\u3002\u4f46\u8fd9\u53ef\u4ee5\u901a\u8fc7\u8ba9\u6d88\u8d39\u8005\u5c06\u5176\u504f\u79fb\u91cf\u5b58\u50a8\u5728\u4e0e\u5176\u8f93\u51fa\u76f8\u540c\u7684\u4f4d\u7f6e\u6765\u66f4\u7b80\u5355\u548c\u66f4\u666e\u904d\u5730\u5904\u7406\u3002\u8fd9\u66f4\u597d\uff0c\u56e0\u4e3a\u6d88\u8d39\u8005\u53ef\u80fd\u60f3\u8981\u5199\u5165\u7684\u8bb8\u591a\u8f93\u51fa\u7cfb\u7edf\u4e0d\u652f\u6301\u4e24\u9636\u6bb5\u63d0\u4ea4\u3002\u4f5c\u4e3a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8003\u8651 Kafka Connect \u8fde\u63a5\u5668\u5c06\u6570\u636e\u53ca\u5176\u8bfb\u53d6\u7684\u6570\u636e\u7684\u504f\u79fb\u91cf\u586b\u5145\u5230 HDFS \u4e2d\uff0c\u4ee5\u4fbf\u4fdd\u8bc1\u6570\u636e\u548c\u504f\u79fb\u91cf\u8981\u4e48\u90fd\u66f4\u65b0\uff0c\u8981\u4e48\u90fd\u4e0d\u66f4\u65b0\u3002\u5bf9\u4e8e\u8bb8\u591a\u5176\u4ed6\u6570\u636e\u7cfb\u7edf\uff0c\u6211\u4eec\u9075\u5faa\u7c7b\u4f3c\u7684\u6a21\u5f0f\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u9700\u8981\u8fd9\u4e9b\u66f4\u5f3a\u7684\u8bed\u4e49\uff0c\u5e76\u4e14\u6d88\u606f\u6ca1\u6709\u4e3b\u952e\u6765\u5141\u8bb8\u91cd\u590d\u6570\u636e\u5220\u9664\u3002 \u56e0\u6b64\uff0cKafka\u6709\u6548\u5730\u652f\u6301Kafka Streams \u4e2d\u7684\u4e00\u6b21\u6027\u4ea4\u4ed8\uff0c\u5e76\u4e14\u5728Kafka\u4e3b\u9898\u4e4b\u95f4\u4f20\u8f93\u548c\u5904\u7406\u6570\u636e\u65f6\uff0c\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528\u4e8b\u52a1\u6027\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\u6765\u63d0\u4f9b\u4e00\u6b21\u6027\u4ea4\u4ed8\u3002\u5176\u4ed6\u76ee\u6807\u7cfb\u7edf\u7684\u4e00\u6b21\u6027\u4ea4\u4ed8\u901a\u5e38\u9700\u8981\u4e0e\u6b64\u7c7b\u7cfb\u7edf\u5408\u4f5c\uff0c\u4f46 Kafka \u63d0\u4f9b\u4e86\u504f\u79fb\u91cf\uff0c\u4f7f\u5f97\u5b9e\u73b0\u8fd9\u4e00\u70b9\u53d8\u5f97\u53ef\u884c\uff08\u53e6\u8bf7\u53c2\u9605 Kafka Connect \uff09\u3002\u5426\u5219\uff0cKafka \u9ed8\u8ba4\u4fdd\u8bc1\u81f3\u5c11\u4e00\u6b21\u4f20\u9001\uff0c\u5e76\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u5728\u5904\u7406\u4e00\u6279\u6d88\u606f\u4e4b\u524d\u7981\u7528\u751f\u4ea7\u8005\u91cd\u8bd5\u5e76\u5728\u6d88\u8d39\u8005\u4e2d\u63d0\u4ea4\u504f\u79fb\u91cf\u6765\u5b9e\u73b0\u6700\u591a\u4e00\u6b21\u4f20\u9001\u3002 4.7 \u590d\u5236 Kafka \u5728\u53ef\u914d\u7f6e\u6570\u91cf\u7684\u670d\u52a1\u5668\u4e0a\u590d\u5236\u6bcf\u4e2a\u4e3b\u9898\u5206\u533a\u7684\u65e5\u5fd7\uff08\u60a8\u53ef\u4ee5\u9010\u4e2a\u4e3b\u9898\u8bbe\u7f6e\u6b64\u590d\u5236\u56e0\u5b50\uff09\u3002\u5f53\u96c6\u7fa4\u4e2d\u7684\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u65f6\uff0c\u8fd9\u5141\u8bb8\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u5230\u8fd9\u4e9b\u526f\u672c\uff0c\u56e0\u6b64\u6d88\u606f\u5728\u51fa\u73b0\u6545\u969c\u65f6\u4ecd\u7136\u53ef\u7528\u3002 \u5176\u4ed6\u6d88\u606f\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e9b\u4e0e\u590d\u5236\u76f8\u5173\u7684\u529f\u80fd\uff0c\u4f46\u662f\uff0c\u5728\u6211\u4eec\uff08\u5b8c\u5168\u6709\u504f\u89c1\u7684\uff09\u770b\u6765\uff0c\u8fd9\u4f3c\u4e4e\u662f\u4e00\u4e2a\u9644\u52a0\u7684\u4e1c\u897f\uff0c\u6ca1\u6709\u88ab\u5927\u91cf\u4f7f\u7528\uff0c\u5e76\u4e14\u6709\u5f88\u5927\u7684\u7f3a\u70b9\uff1a\u526f\u672c\u4e0d\u6d3b\u52a8\uff0c\u541e\u5410\u91cf\u53d7\u5230\u4e25\u91cd\u5f71\u54cd\uff0c\u5b83\u9700\u8981\u7e41\u7410\u7684\u624b\u52a8\u914d\u7f6e\u7b49\u3002Kafka \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0e\u590d\u5236\u4e00\u8d77\u4f7f\u7528 - \u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u5c06\u672a\u590d\u5236\u7684\u4e3b\u9898\u5b9e\u73b0\u4e3a\u590d\u5236\u4e3b\u9898\uff0c\u5176\u4e2d\u590d\u5236\u56e0\u5b50\u4e3a 1\u3002 \u590d\u5236\u7684\u5355\u4f4d\u662f\u4e3b\u9898\u5206\u533a\u3002\u5728\u975e\u6545\u969c\u6761\u4ef6\u4e0b\uff0cKafka \u4e2d\u7684\u6bcf\u4e2a\u5206\u533a\u90fd\u6709\u4e00\u4e2a\u9886\u5bfc\u8005\u548c\u96f6\u4e2a\u6216\u591a\u4e2a\u8ffd\u968f\u8005\u3002\u5305\u62ec\u9886\u5bfc\u8005\u5728\u5185\u7684\u526f\u672c\u603b\u6570\u6784\u6210\u4e86\u590d\u5236\u56e0\u5b50\u3002\u6240\u6709\u5199\u5165\u90fd\u5c06\u53d1\u9001\u5230\u5206\u533a\u7684\u9886\u5bfc\u8005\uff0c\u800c\u8bfb\u53d6\u53ef\u80fd\u4f1a\u53d1\u9001\u5230\u5206\u533a\u7684\u9886\u5bfc\u8005\u6216\u8ffd\u968f\u8005\u3002\u901a\u5e38\uff0c\u5206\u533a\u7684\u6570\u91cf\u6bd4broker\u591a\u5f97\u591a\uff0c\u5e76\u4e14\u9886\u5bfc\u8005\u5747\u5300\u5206\u5e03\u5728broker\u4e4b\u95f4\u3002\u8ffd\u968f\u8005\u4e0a\u7684\u65e5\u5fd7\u4e0e\u9886\u5bfc\u8005\u7684\u65e5\u5fd7\u76f8\u540c - \u90fd\u5177\u6709\u76f8\u540c\u7684\u504f\u79fb\u91cf\u548c\u76f8\u540c\u987a\u5e8f\u7684\u6d88\u606f\uff08\u5f53\u7136\uff0c\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\uff0c\u9886\u5bfc\u8005\u53ef\u80fd\u5728\u5176\u65e5\u5fd7\u672b\u5c3e\u6709\u4e00\u4e9b\u5c1a\u672a\u590d\u5236\u7684\u6d88\u606f\uff09 \uff09\u3002 \u8ffd\u968f\u8005\u50cf\u666e\u901a Kafka \u6d88\u8d39\u8005\u4e00\u6837\u6d88\u8d39\u6765\u81ea\u9886\u5bfc\u8005\u7684\u6d88\u606f\uff0c\u5e76\u5c06\u5176\u5e94\u7528\u5230\u81ea\u5df1\u7684\u65e5\u5fd7\u4e2d\u3002\u8ba9\u8ffd\u968f\u8005\u4ece\u9886\u5bfc\u8005\u90a3\u91cc\u62c9\u53d6\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u7279\u6027\uff0c\u5373\u5141\u8bb8\u8ffd\u968f\u8005\u81ea\u7136\u5730\u5c06\u4ed6\u4eec\u5e94\u7528\u4e8e\u5176\u65e5\u5fd7\u7684\u65e5\u5fd7\u6761\u76ee\u5206\u6279\u5728\u4e00\u8d77\u3002 \u4e0e\u5927\u591a\u6570\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e00\u6837\uff0c\u81ea\u52a8\u5904\u7406\u6545\u969c\u9700\u8981\u7cbe\u786e\u5b9a\u4e49\u8282\u70b9\u201c\u6d3b\u52a8\u201d\u7684\u542b\u4e49\u3002\u5728Kafka\u4e2d\uff0c\u4e00\u4e2a\u88ab\u79f0\u4e3a\u201c\u63a7\u5236\u5668\u201d\u7684\u7279\u6b8a\u8282\u70b9\u8d1f\u8d23\u7ba1\u7406\u96c6\u7fa4\u4e2dbroker\u7684\u6ce8\u518c\u3002\u7ecf\u7eaa\u5546\u6d3b\u8dc3\u5ea6\u6709\u4e24\u4e2a\u6761\u4ef6\uff1a \u4ee3\u7406\u5fc5\u987b\u4e0e\u63a7\u5236\u5668\u4fdd\u6301\u6d3b\u52a8\u4f1a\u8bdd\uff0c\u4ee5\u4fbf\u5b9a\u671f\u63a5\u6536\u5143\u6570\u636e\u66f4\u65b0\u3002 \u4f5c\u4e3a\u8ffd\u968f\u8005\u7684broker\u5fc5\u987b\u590d\u5236\u9886\u5bfc\u8005\u7684\u5199\u5165\uff0c\u5e76\u4e14\u4e0d\u80fd\u843d\u540e\u201c\u592a\u8fdc\u201d\u3002 \u201c\u6d3b\u52a8\u4f1a\u8bdd\u201d\u7684\u542b\u4e49\u53d6\u51b3\u4e8e\u96c6\u7fa4\u914d\u7f6e\u3002\u5bf9\u4e8e KRaft \u96c6\u7fa4\uff0c\u901a\u8fc7\u5411\u63a7\u5236\u5668\u53d1\u9001\u5b9a\u671f\u5fc3\u8df3\u6765\u7ef4\u62a4\u6d3b\u52a8\u4f1a\u8bdd\u3002\u5982\u679c\u63a7\u5236\u5668\u5728\u914d\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u5230\u671f\u4e4b\u524d\u672a\u80fd\u6536\u5230\u5fc3\u8df3 broker.session.timeout.ms \uff0c\u5219\u8be5\u8282\u70b9\u88ab\u89c6\u4e3a\u79bb\u7ebf\u3002 \u5bf9\u4e8e\u4f7f\u7528 Zookeeper \u7684\u96c6\u7fa4\uff0c\u6d3b\u52a8\u6027\u662f\u901a\u8fc7\u4e34\u65f6\u8282\u70b9\u7684\u5b58\u5728\u6765\u95f4\u63a5\u786e\u5b9a\u7684\uff0c\u4e34\u65f6\u8282\u70b9\u662f\u7531\u4ee3\u7406\u5728\u5176 Zookeeper \u4f1a\u8bdd\u521d\u59cb\u5316\u65f6\u521b\u5efa\u7684\u3002\u5982\u679c\u4ee3\u7406\u5728 \u8fc7\u671f\u4e4b\u524d\u672a\u80fd\u5411 Zookeeper \u53d1\u9001\u5fc3\u8df3\u540e\u4e22\u5931\u4f1a\u8bdd zookeeper.session.timeout.ms \uff0c\u5219\u8be5\u8282\u70b9\u5c06\u88ab\u5220\u9664\u3002\u7136\u540e\uff0c\u63a7\u5236\u5668\u5c06\u901a\u8fc7 Zookeeper \u76d1\u89c6\u6ce8\u610f\u5230\u8282\u70b9\u5220\u9664\uff0c\u5e76\u5c06\u4ee3\u7406\u6807\u8bb0\u4e3a\u79bb\u7ebf\u3002 \u6211\u4eec\u5c06\u6ee1\u8db3\u8fd9\u4e24\u4e2a\u6761\u4ef6\u7684\u8282\u70b9\u79f0\u4e3a\u201c\u540c\u6b65\u201d\uff0c\u4ee5\u907f\u514d\u201c\u6d3b\u52a8\u201d\u6216\u201c\u5931\u8d25\u201d\u7684\u6a21\u7cca\u6027\u3002\u9886\u5bfc\u8005\u8ddf\u8e2a\u4e00\u7ec4\u201c\u540c\u6b65\u201d\u526f\u672c\uff0c\u79f0\u4e3a ISR\u3002\u5982\u679c\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u672a\u80fd\u6ee1\u8db3\uff0c\u5219\u8be5\u7ecf\u7eaa\u5546\u5c06\u4ece ISR \u4e2d\u5220\u9664\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8ddf\u968f\u8005\u6b7b\u4ea1\uff0c\u90a3\u4e48\u63a7\u5236\u5668\u5c06\u901a\u8fc7\u5176\u4f1a\u8bdd\u4e22\u5931\u6ce8\u610f\u5230\u5931\u8d25\uff0c\u5e76\u5c06\u4ece ISR \u4e2d\u5220\u9664\u4ee3\u7406\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u8ffd\u968f\u8005\u843d\u540e\u9886\u5bfc\u8005\u592a\u591a\uff0c\u4f46\u4ecd\u7136\u6709\u6d3b\u52a8\u4f1a\u8bdd\uff0c\u90a3\u4e48\u9886\u5bfc\u8005\u4e5f\u53ef\u4ee5\u5c06\u5176\u4ece ISR \u4e2d\u5220\u9664\u3002\u6ede\u540e\u526f\u672c\u7684\u786e\u5b9a\u662f\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u63a7\u5236\u7684 replica.lag.time.max.ms \u914d\u7f6e\u3002\u5728\u6b64\u914d\u7f6e\u8bbe\u7f6e\u7684\u6700\u5927\u65f6\u95f4\u5185\u65e0\u6cd5\u8d76\u4e0a\u9886\u5bfc\u8005\u65e5\u5fd7\u672b\u5c3e\u7684\u526f\u672c\u5c06\u4ece ISR \u4e2d\u5220\u9664\u3002 \u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u672f\u8bed\u4e2d\uff0c\u6211\u4eec\u53ea\u5c1d\u8bd5\u5904\u7406\u201c\u5931\u8d25/\u6062\u590d\u201d\u6545\u969c\u6a21\u578b\uff0c\u5176\u4e2d\u8282\u70b9\u7a81\u7136\u505c\u6b62\u5de5\u4f5c\uff0c\u7136\u540e\u6062\u590d\uff08\u53ef\u80fd\u4e0d\u77e5\u9053\u5b83\u4eec\u5df2\u7ecf\u6b7b\u4ea1\uff09\u3002Kafka \u4e0d\u5904\u7406\u6240\u8c13\u7684\u201c\u62dc\u5360\u5ead\u201d\u6545\u969c\uff0c\u5373\u8282\u70b9\u4ea7\u751f\u4efb\u610f\u6216\u6076\u610f\u54cd\u5e94\uff08\u53ef\u80fd\u662f\u7531\u4e8e\u9519\u8bef\u6216\u72af\u89c4\uff09\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u7cbe\u786e\u5730\u5b9a\u4e49\uff0c\u5f53\u8be5\u5206\u533a\u7684 ISR \u4e2d\u7684\u6240\u6709\u526f\u672c\u90fd\u5df2\u5c06\u6d88\u606f\u5e94\u7528\u5230\u5176\u65e5\u5fd7\u65f6\uff0c\u8be5\u6d88\u606f\u88ab\u89c6\u4e3a\u5df2\u63d0\u4ea4\u3002\u53ea\u6709\u63d0\u4ea4\u7684\u6d88\u606f\u624d\u4f1a\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u3002\u8fd9\u610f\u5473\u7740\u6d88\u8d39\u8005\u4e0d\u5fc5\u62c5\u5fc3\u5982\u679c\u9886\u5bfc\u8005\u5931\u8d25\u53ef\u80fd\u4f1a\u770b\u5230\u53ef\u80fd\u4e22\u5931\u7684\u6d88\u606f\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u751f\u4ea7\u8005\u53ef\u4ee5\u9009\u62e9\u7b49\u5f85\u6d88\u606f\u63d0\u4ea4\u6216\u4e0d\u63d0\u4ea4\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u4ed6\u4eec\u5bf9\u5ef6\u8fdf\u548c\u6301\u4e45\u6027\u4e4b\u95f4\u6743\u8861\u7684\u504f\u597d\u3002\u6b64\u9996\u9009\u9879\u7531\u751f\u4ea7\u8005\u4f7f\u7528\u7684 ack \u8bbe\u7f6e\u63a7\u5236\u3002\u8bf7\u6ce8\u610f\uff0c\u4e3b\u9898\u5177\u6709\u540c\u6b65\u526f\u672c\u201c\u6700\u5c0f\u6570\u91cf\u201d\u7684\u8bbe\u7f6e\uff0c\u5f53\u751f\u4ea7\u8005\u8bf7\u6c42\u786e\u8ba4\u6d88\u606f\u5df2\u5199\u5165\u5b8c\u6574\u7684\u540c\u6b65\u526f\u672c\u96c6\u65f6\uff0c\u4f1a\u68c0\u67e5\u8be5\u8bbe\u7f6e\u3002 Kafka \u63d0\u4f9b\u7684\u4fdd\u8bc1\u662f\uff0c\u53ea\u8981\u81f3\u5c11\u6709\u4e00\u4e2a\u540c\u6b65\u526f\u672c\u59cb\u7ec8\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002 \u5728\u77ed\u6682\u7684\u6545\u969c\u8f6c\u79fb\u671f\u540e\uff0cKafka \u5c06\u5728\u51fa\u73b0\u8282\u70b9\u6545\u969c\u7684\u60c5\u51b5\u4e0b\u4fdd\u6301\u53ef\u7528\uff0c\u4f46\u5728\u5b58\u5728\u7f51\u7edc\u5206\u533a\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u65e0\u6cd5\u4fdd\u6301\u53ef\u7528\u3002 \u590d\u5236\u65e5\u5fd7\uff1a\u4ef2\u88c1\u3001ISR \u548c\u72b6\u6001\u673a\uff08\u5929\u54ea\uff01\uff09 Kafka \u5206\u533a\u7684\u6838\u5fc3\u662f\u590d\u5236\u65e5\u5fd7\u3002\u590d\u5236\u65e5\u5fd7\u662f\u5206\u5e03\u5f0f\u6570\u636e\u7cfb\u7edf\u4e2d\u6700\u57fa\u672c\u7684\u539f\u8bed\u4e4b\u4e00\uff0c\u6709\u591a\u79cd\u5b9e\u73b0\u65b9\u6cd5\u3002 \u590d\u5236\u65e5\u5fd7\u53ef\u4ee5\u88ab\u5176\u4ed6\u7cfb\u7edf\u7528\u4f5c\u4ee5\u72b6\u6001\u673a\u65b9\u5f0f \u5b9e\u73b0\u5176\u4ed6\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u539f\u8bed\u3002 \u590d\u5236\u65e5\u5fd7\u6a21\u62df\u4e86\u5c31\u4e00\u7cfb\u5217\u503c\u7684\u987a\u5e8f\u8fbe\u6210\u5171\u8bc6\u7684\u8fc7\u7a0b\uff08\u901a\u5e38\u5c06\u65e5\u5fd7\u6761\u76ee\u7f16\u53f7\u4e3a 0\u30011\u30012...\uff09\u3002\u5b9e\u73b0\u8fd9\u4e00\u70b9\u7684\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u4f46\u6700\u7b80\u5355\u3001\u6700\u5feb\u7684\u65b9\u6cd5\u662f\u7531\u9886\u5bfc\u8005\u9009\u62e9\u63d0\u4f9b\u7ed9\u5b83\u7684\u503c\u7684\u987a\u5e8f\u3002\u53ea\u8981\u9886\u5bfc\u8005\u8fd8\u6d3b\u7740\uff0c\u6240\u6709\u8ffd\u968f\u8005\u53ea\u9700\u590d\u5236\u9886\u5bfc\u8005\u9009\u62e9\u7684\u503c\u548c\u547d\u4ee4\u5373\u53ef\u3002 \u5f53\u7136\uff0c\u5982\u679c\u9886\u5bfc\u8005\u6ca1\u6709\u5931\u8d25\uff0c\u6211\u4eec\u5c31\u4e0d\u9700\u8981\u8ffd\u968f\u8005\uff01\u5f53\u9886\u5bfc\u8005\u6b7b\u4ea1\u65f6\uff0c\u6211\u4eec\u9700\u8981\u4ece\u8ffd\u968f\u8005\u4e2d\u9009\u62e9\u4e00\u4f4d\u65b0\u7684\u9886\u5bfc\u8005\u3002\u4f46\u8ffd\u968f\u8005\u672c\u8eab\u53ef\u80fd\u4f1a\u843d\u540e\u6216\u5d29\u6e83\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u786e\u4fdd\u9009\u62e9\u4e00\u4e2a\u6700\u65b0\u7684\u8ffd\u968f\u8005\u3002\u65e5\u5fd7\u590d\u5236\u7b97\u6cd5\u5fc5\u987b\u63d0\u4f9b\u7684\u57fa\u672c\u4fdd\u8bc1\u662f\uff0c\u5982\u679c\u6211\u4eec\u544a\u8bc9\u5ba2\u6237\u7aef\u4e00\u6761\u6d88\u606f\u5df2\u63d0\u4ea4\uff0c\u5e76\u4e14\u9886\u5bfc\u8005\u5931\u8d25\uff0c\u90a3\u4e48\u6211\u4eec\u9009\u51fa\u7684\u65b0\u9886\u5bfc\u8005\u4e5f\u5fc5\u987b\u5177\u6709\u8be5\u6d88\u606f\u3002\u8fd9\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6743\u8861\uff1a\u5982\u679c\u9886\u5bfc\u8005\u5728\u5ba3\u5e03\u6d88\u606f\u5df2\u63d0\u4ea4\u4e4b\u524d\u7b49\u5f85\u66f4\u591a\u8ffd\u968f\u8005\u786e\u8ba4\u6d88\u606f\uff0c\u90a3\u4e48\u5c06\u4f1a\u6709\u66f4\u591a\u6f5c\u5728\u7684\u5f53\u9009\u9886\u5bfc\u8005\u3002 \u5982\u679c\u60a8\u9009\u62e9\u6240\u9700\u7684\u786e\u8ba4\u6570\u91cf\u548c\u5fc5\u987b\u6bd4\u8f83\u7684\u65e5\u5fd7\u6570\u91cf\u6765\u9009\u4e3e\u9886\u5bfc\u8005\uff0c\u4ee5\u786e\u4fdd\u5b58\u5728\u91cd\u53e0\uff0c\u90a3\u4e48\u8fd9\u79f0\u4e3a\u4ef2\u88c1\u3002 \u8fd9\u79cd\u6743\u8861\u7684\u5e38\u89c1\u65b9\u6cd5\u662f\u5bf9\u63d0\u4ea4\u51b3\u7b56\u548c\u9886\u5bfc\u8005\u9009\u4e3e\u90fd\u4f7f\u7528\u591a\u6570\u7968\u3002\u8fd9\u4e0d\u662f Kafka \u6240\u505a\u7684\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u6211\u4eec\u8fd8\u662f\u8981\u63a2\u7d22\u4e00\u4e0b\u5b83\u4ee5\u4e86\u89e3\u5176\u4e2d\u7684\u6743\u8861\u3002\u5047\u8bbe\u6211\u4eec\u6709 2 f +1 \u4e2a\u526f\u672c\u3002\u5982\u679c f +1 \u4e2a\u526f\u672c\u5fc5\u987b\u5728\u9886\u5bfc\u8005\u58f0\u660e\u63d0\u4ea4\u4e4b\u524d\u63a5\u6536\u6d88\u606f\uff0c\u5e76\u4e14\u5982\u679c\u6211\u4eec\u901a\u8fc7\u4ece\u81f3\u5c11 f +1 \u4e2a\u526f\u672c\u4e2d\u9009\u4e3e\u5177\u6709\u6700\u5b8c\u6574\u65e5\u5fd7\u7684\u8ffd\u968f\u8005\u6765\u9009\u4e3e\u65b0\u7684\u9886\u5bfc\u8005\uff0c\u90a3\u4e48\uff0c\u4e0d\u8d85\u8fc7 f \u5931\u8d25\u65f6\uff0c\u9886\u5bfc\u8005\u4fdd\u8bc1\u62e5\u6709\u6240\u6709\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u4efb\u4f55 f +1 \u4e2a\u526f\u672c\uff0c\u5fc5\u987b\u81f3\u5c11\u6709\u4e00\u4e2a\u526f\u672c\u5305\u542b\u6240\u6709\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002\u8be5\u526f\u672c\u7684\u65e5\u5fd7\u5c06\u662f\u6700\u5b8c\u6574\u7684\uff0c\u56e0\u6b64\u5c06\u88ab\u9009\u4e3a\u65b0\u7684\u9886\u5bfc\u8005\u3002\u6bcf\u4e2a\u7b97\u6cd5\u8fd8\u5fc5\u987b\u5904\u7406\u8bb8\u591a\u5269\u4f59\u7684\u7ec6\u8282\uff08\u4f8b\u5982\u7cbe\u786e\u5b9a\u4e49\u4ec0\u4e48\u4f7f\u65e5\u5fd7\u66f4\u5b8c\u6574\uff0c\u786e\u4fdd\u9886\u5bfc\u8005\u6545\u969c\u671f\u95f4\u7684\u65e5\u5fd7\u4e00\u81f4\u6027\u6216\u66f4\u6539\u526f\u672c\u96c6\u4e2d\u7684\u670d\u52a1\u5668\u96c6\uff09\uff0c\u4f46\u6211\u4eec\u73b0\u5728\u5c06\u5ffd\u7565\u8fd9\u4e9b\u3002 \u8fd9\u79cd\u591a\u6570\u6295\u7968\u65b9\u6cd5\u6709\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u7279\u6027\uff1a\u5ef6\u8fdf\u4ec5\u53d6\u51b3\u4e8e\u6700\u5feb\u7684\u670d\u52a1\u5668\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u590d\u5236\u56e0\u5b50\u4e3a 3\uff0c\u5219\u5ef6\u8fdf\u7531\u8f83\u5feb\u7684\u8ddf\u968f\u8005\u51b3\u5b9a\uff0c\u800c\u4e0d\u662f\u7531\u8f83\u6162\u7684\u8ddf\u968f\u8005\u51b3\u5b9a\u3002 \u8fd9\u4e2a\u5bb6\u65cf\u4e2d\u6709\u5404\u79cd\u5404\u6837\u7684\u7b97\u6cd5\uff0c\u5305\u62ec ZooKeeper \u7684 Zab \u3001 Raft \u548c Viewstamped Replication \u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u4e0e Kafka \u5b9e\u9645\u5b9e\u73b0\u6700\u76f8\u4f3c\u7684\u5b66\u672f\u51fa\u7248\u7269\u662f Microsoft \u7684 PacificA \u3002 \u591a\u6570\u6295\u7968\u7684\u7f3a\u70b9\u662f\uff0c\u4e0d\u9700\u8981\u591a\u6b21\u5931\u8d25\u5c31\u4f1a\u5bfc\u81f4\u6ca1\u6709\u53ef\u4f9b\u9009\u4e3e\u7684\u9886\u5bfc\u4eba\u3002\u5bb9\u5fcd\u4e00\u6b21\u6545\u969c\u9700\u8981\u4e09\u4efd\u6570\u636e\uff0c\u5bb9\u5fcd\u4e24\u6b21\u6545\u969c\u9700\u8981\u4e94\u4efd\u6570\u636e\u3002\u6839\u636e\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u53ea\u6709\u8db3\u591f\u7684\u5197\u4f59\u6765\u5bb9\u5fcd\u5355\u4e2a\u6545\u969c\u5bf9\u4e8e\u5b9e\u9645\u7cfb\u7edf\u6765\u8bf4\u662f\u4e0d\u591f\u7684\uff0c\u4f46\u662f\u5bf9\u4e8e\u5927\u5bb9\u91cf\u6570\u636e\u95ee\u9898\u6765\u8bf4\uff0c\u6bcf\u6b21\u5199\u5165\u4e94\u6b21\uff0c\u78c1\u76d8\u7a7a\u95f4\u8981\u6c42\u4e3a 5 \u500d\uff0c\u541e\u5410\u91cf\u4e3a 1/5\uff0c\u8fd9\u4e0d\u592a\u5b9e\u7528\u3002\u8fd9\u53ef\u80fd\u5c31\u662f\u4e3a\u4ec0\u4e48\u4ef2\u88c1\u7b97\u6cd5\u66f4\u5e38\u51fa\u73b0\u5728\u5171\u4eab\u96c6\u7fa4\u914d\u7f6e\uff08\u4f8b\u5982 ZooKeeper\uff09\u4e2d\uff0c\u4f46\u5728\u4e3b\u6570\u636e\u5b58\u50a8\u4e2d\u5374\u4e0d\u592a\u5e38\u89c1\u3002\u4f8b\u5982\uff0c\u5728 HDFS \u4e2d\uff0cnamenode \u7684\u9ad8\u53ef\u7528\u6027\u529f\u80fd\u662f\u5efa\u7acb\u5728 \u57fa\u4e8e\u591a\u6570\u7968\u7684\u65e5\u5fd7\u4e4b\u4e0a\u7684 \uff0c\u4f46\u8fd9\u79cd\u66f4\u6602\u8d35\u7684\u65b9\u6cd5\u5e76\u4e0d\u7528\u4e8e\u6570\u636e\u672c\u8eab\u3002 Kafka \u91c7\u7528\u7565\u6709\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u9009\u62e9\u4ef2\u88c1\u96c6\u3002Kafka \u4e0d\u662f\u591a\u6570\u6295\u7968\uff0c\u800c\u662f\u52a8\u6001\u7ef4\u62a4\u4e00\u7ec4\u8d76\u4e0a\u9886\u5bfc\u8005\u7684\u540c\u6b65\u526f\u672c (ISR)\u3002\u53ea\u6709\u8be5\u7ec4\u7684\u6210\u5458\u624d\u6709\u8d44\u683c\u5f53\u9009\u4e3a\u9886\u5bfc\u8005\u3002 \u5728\u6240\u6709 \u540c\u6b65\u526f\u672c\u90fd\u6536\u5230\u5199\u5165\u4e4b\u524d\uff0c\u5bf9 Kafka \u5206\u533a\u7684\u5199\u5165\u4e0d\u4f1a\u88ab\u89c6\u4e3a\u5df2\u63d0\u4ea4\u3002\u53ea\u8981\u8be5 ISR \u96c6\u53d1\u751f\u66f4\u6539\uff0c\u5b83\u5c31\u4f1a\u4fdd\u7559\u5728\u96c6\u7fa4\u5143\u6570\u636e\u4e2d\u3002\u56e0\u6b64\uff0cISR \u4e2d\u7684\u4efb\u4f55\u526f\u672c\u90fd\u6709\u8d44\u683c\u88ab\u9009\u4e3e\u4e3a\u9886\u5bfc\u8005\u3002\u5bf9\u4e8e Kafka \u7684\u4f7f\u7528\u6a21\u578b\u6765\u8bf4\uff0c\u8fd9\u662f\u4e00\u4e2a\u91cd\u8981\u56e0\u7d20\uff0c\u5176\u4e2d\u6709\u5f88\u591a\u5206\u533a\uff0c\u786e\u4fdd\u9886\u5bfc\u5e73\u8861\u5f88\u91cd\u8981\u3002\u501f\u52a9\u6b64 ISR \u6a21\u578b\u548c f+1 \u4e2a \u526f\u672c\uff0cKafka \u4e3b\u9898\u53ef\u4ee5\u5bb9\u5fcd f \u4e2a \u6545\u969c\u800c\u4e0d\u4f1a\u4e22\u5931\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002 \u5bf9\u4e8e\u6211\u4eec\u5e0c\u671b\u5904\u7406\u7684\u5927\u591a\u6570\u7528\u4f8b\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u79cd\u6743\u8861\u662f\u5408\u7406\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u4e3a\u4e86\u5bb9\u5fcd \u5931\u8d25 \uff0c\u591a\u6570\u6295\u7968\u548c ISR \u65b9\u6cd5\u90fd\u5c06\u5728\u63d0\u4ea4\u6d88\u606f\u4e4b\u524d\u7b49\u5f85\u76f8\u540c\u6570\u91cf\u7684\u526f\u672c\u8fdb\u884c\u786e\u8ba4\uff08\u4f8b\u5982\uff0c\u4e3a\u4e86\u5728\u4e00\u6b21\u5931\u8d25\u4e2d\u5e78\u5b58\uff0c\u591a\u6570\u4ef2\u88c1\u9700\u8981\u4e09\u4e2a\u526f\u672c\u548c\u4e00\u4e2a\u786e\u8ba4\uff0c\u800c ISR \u65b9\u6cd5\u9700\u8981\u4e24\u4e2a\u526f\u672c\u548c\u4e00\u4e2a\u786e\u8ba4\uff09\u3002\u65e0\u9700\u6700\u6162\u7684\u670d\u52a1\u5668\u5373\u53ef\u63d0\u4ea4\u7684\u80fd\u529b\u662f\u591a\u6570\u6295\u7968\u65b9\u6cd5\u7684\u4f18\u70b9\u3002\u7136\u800c\uff0c\u6211\u4eec\u8ba4\u4e3a\u901a\u8fc7\u5141\u8bb8\u5ba2\u6237\u7aef\u9009\u62e9\u662f\u5426\u5728\u6d88\u606f\u63d0\u4ea4\u65f6\u963b\u585e\u53ef\u4ee5\u6539\u5584\u8fd9\u4e00\u60c5\u51b5\uff0c\u5e76\u4e14\u7531\u4e8e\u6240\u9700\u7684\u590d\u5236\u56e0\u5b50\u8f83\u4f4e\u800c\u5e26\u6765\u7684\u989d\u5916\u541e\u5410\u91cf\u548c\u78c1\u76d8\u7a7a\u95f4\u662f\u503c\u5f97\u7684\u3002 \u53e6\u4e00\u4e2a\u91cd\u8981\u7684\u8bbe\u8ba1\u533a\u522b\u662f Kafka \u4e0d\u8981\u6c42\u5d29\u6e83\u7684\u8282\u70b9\u6062\u590d\u65f6\u6240\u6709\u6570\u636e\u90fd\u5b8c\u597d\u65e0\u635f\u3002\u8be5\u9886\u57df\u7684\u590d\u5236\u7b97\u6cd5\u4f9d\u8d56\u4e8e\u201c\u7a33\u5b9a\u5b58\u50a8\u201d\u7684\u5b58\u5728\u5e76\u4e0d\u5c11\u89c1\uff0c\u201c\u7a33\u5b9a\u5b58\u50a8\u201d\u5728\u4efb\u4f55\u6545\u969c\u6062\u590d\u573a\u666f\u4e2d\u90fd\u4e0d\u4f1a\u4e22\u5931\uff0c\u800c\u4e0d\u4f1a\u5bfc\u81f4\u6f5c\u5728\u7684\u4e00\u81f4\u6027\u8fdd\u89c4\u3002\u8fd9\u4e2a\u5047\u8bbe\u6709\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\u3002\u9996\u5148\uff0c\u78c1\u76d8\u9519\u8bef\u662f\u6211\u4eec\u5728\u6301\u4e45\u6570\u636e\u7cfb\u7edf\u7684\u5b9e\u9645\u64cd\u4f5c\u4e2d\u89c2\u5bdf\u5230\u7684\u6700\u5e38\u89c1\u95ee\u9898\uff0c\u5e76\u4e14\u5b83\u4eec\u901a\u5e38\u4e0d\u4f1a\u4f7f\u6570\u636e\u5b8c\u597d\u65e0\u635f\u3002\u5176\u6b21\uff0c\u5373\u4f7f\u8fd9\u4e0d\u662f\u95ee\u9898\uff0c\u6211\u4eec\u4e5f\u4e0d\u5e0c\u671b\u5728\u6bcf\u6b21\u5199\u5165\u65f6\u90fd\u4f7f\u7528 fsync \u6765\u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u5c06\u6027\u80fd\u964d\u4f4e\u4e24\u5230\u4e09\u4e2a\u6570\u91cf\u7ea7\u3002\u6211\u4eec\u5141\u8bb8\u526f\u672c\u91cd\u65b0\u52a0\u5165 ISR \u7684\u534f\u8bae\u786e\u4fdd\u5728\u91cd\u65b0\u52a0\u5165\u4e4b\u524d\uff0c \u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u4eba\u9009\u4e3e\uff1a\u5982\u679c\u4ed6\u4eec\u90fd\u6b7b\u4e86\u600e\u4e48\u529e\uff1f \u8bf7\u6ce8\u610f\uff0cKafka \u5bf9\u6570\u636e\u4e22\u5931\u7684\u4fdd\u8bc1\u662f\u57fa\u4e8e\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u4fdd\u6301\u540c\u6b65\u3002\u5982\u679c\u590d\u5236\u5206\u533a\u7684\u6240\u6709\u8282\u70b9\u90fd\u6b7b\u4ea1\uff0c\u5219\u6b64\u4fdd\u8bc1\u4e0d\u518d\u6210\u7acb\u3002 \u7136\u800c\uff0c\u5f53\u6240\u6709\u526f\u672c\u6b7b\u4ea1\u65f6\uff0c\u4e00\u4e2a\u5b9e\u7528\u7684\u7cfb\u7edf\u9700\u8981\u505a\u4e00\u4e9b\u5408\u7406\u7684\u4e8b\u60c5\u3002\u5982\u679c\u60a8\u4e0d\u5e78\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u91cd\u8981\u7684\u662f\u8981\u8003\u8651\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002\u6709\u4e24\u79cd\u53ef\u4ee5\u5b9e\u73b0\u7684\u884c\u4e3a\uff1a \u7b49\u5f85 ISR \u4e2d\u7684\u526f\u672c\u6062\u590d\u5e76\u9009\u62e9\u8be5\u526f\u672c\u4f5c\u4e3a\u9886\u5bfc\u8005\uff08\u5e0c\u671b\u5b83\u4ecd\u7136\u62e5\u6709\u6240\u6709\u6570\u636e\uff09\u3002 \u9009\u62e9\u7b2c\u4e00\u4e2a\u4f5c\u4e3a\u9886\u5bfc\u8005\u590d\u6d3b\u7684\u526f\u672c\uff08\u4e0d\u4e00\u5b9a\u5728 ISR \u4e2d\uff09\u3002 \u8fd9\u662f\u53ef\u7528\u6027\u548c\u4e00\u81f4\u6027\u4e4b\u95f4\u7684\u7b80\u5355\u6743\u8861\u3002\u5982\u679c\u6211\u4eec\u5728 ISR \u4e2d\u7b49\u5f85\u526f\u672c\uff0c\u90a3\u4e48\u53ea\u8981\u8fd9\u4e9b\u526f\u672c\u5173\u95ed\uff0c\u6211\u4eec\u5c31\u5c06\u4fdd\u6301\u4e0d\u53ef\u7528\u72b6\u6001\u3002\u5982\u679c\u6b64\u7c7b\u526f\u672c\u88ab\u7834\u574f\u6216\u6570\u636e\u4e22\u5931\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4f1a\u6c38\u4e45\u762b\u75ea\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u4e00\u4e2a\u975e\u540c\u6b65\u526f\u672c\u6062\u590d\u6b63\u5e38\uff0c\u5e76\u4e14\u6211\u4eec\u5141\u8bb8\u5b83\u6210\u4e3a\u9886\u5bfc\u8005\uff0c\u90a3\u4e48\u5b83\u7684\u65e5\u5fd7\u5c31\u4f1a\u6210\u4e3a\u4e8b\u5b9e\u6765\u6e90\uff0c\u5373\u4f7f\u5b83\u4e0d\u80fd\u4fdd\u8bc1\u62e5\u6709\u6bcf\u6761\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ece 0.11.0.0 \u7248\u672c\u5f00\u59cb\uff0cKafka \u9009\u62e9\u7b2c\u4e00\u79cd\u7b56\u7565\u5e76\u503e\u5411\u4e8e\u7b49\u5f85\u4e00\u81f4\u7684\u526f\u672c\u3002\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u5c5e\u6027 unclean.leader.election.enable \u66f4\u6539\u6b64\u884c\u4e3a\uff0c\u4ee5\u652f\u6301\u6b63\u5e38\u8fd0\u884c\u65f6\u95f4\u4f18\u4e8e\u4e00\u81f4\u6027\u7684\u7528\u4f8b\u3002 \u8fd9\u79cd\u56f0\u5883\u5e76\u4e0d\u662fKafka\u7279\u6709\u7684\u3002\u5b83\u5b58\u5728\u4e8e\u4efb\u4f55\u57fa\u4e8e\u4ef2\u88c1\u7684\u65b9\u6848\u4e2d\u3002\u4f8b\u5982\uff0c\u5728\u591a\u6570\u6295\u7968\u65b9\u6848\u4e2d\uff0c\u5982\u679c\u5927\u591a\u6570\u670d\u52a1\u5668\u906d\u53d7\u6c38\u4e45\u6027\u6545\u969c\uff0c\u90a3\u4e48\u60a8\u5fc5\u987b\u9009\u62e9\u4e22\u5931 100% \u7684\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5c06\u73b0\u6709\u670d\u52a1\u5668\u4e0a\u5269\u4f59\u7684\u6570\u636e\u4f5c\u4e3a\u65b0\u7684\u4e8b\u5b9e\u6765\u6e90\u6765\u8fdd\u53cd\u4e00\u81f4\u6027\u3002 \u53ef\u7528\u6027\u548c\u8010\u7528\u6027\u4fdd\u8bc1 \u5f53\u5199\u5165 Kafka \u65f6\uff0c\u751f\u4ea7\u8005\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u7b49\u5f85 0,1 \u6216\u6240\u6709\uff08-1\uff09\u526f\u672c\u786e\u8ba4\u6d88\u606f\u3002\u8bf7\u6ce8\u610f\uff0c\u201c\u6240\u6709\u526f\u672c\u7684\u786e\u8ba4\u201d\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u5206\u914d\u7684\u526f\u672c\u90fd\u5df2\u6536\u5230\u8be5\u6d88\u606f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53 acks=all \u65f6\uff0c\u4e00\u65e6\u6240\u6709\u5f53\u524d\u540c\u6b65\u526f\u672c\u6536\u5230\u6d88\u606f\uff0c\u5c31\u4f1a\u7acb\u5373\u53d1\u751f\u786e\u8ba4\u3002\u4f8b\u5982\uff0c\u5982\u679c\u67d0\u4e2a\u4e3b\u9898\u4ec5\u914d\u7f6e\u4e86\u4e24\u4e2a\u526f\u672c\uff0c\u5176\u4e2d\u4e00\u4e2a\u5931\u8d25\uff08\u5373\u4ec5\u4fdd\u7559\u4e00\u4e2a\u540c\u6b65\u526f\u672c\uff09\uff0c\u5219\u6307\u5b9a acks=all \u7684\u5199\u5165\u5c06\u4f1a\u6210\u529f\u3002\u4f46\u662f\uff0c\u5982\u679c\u5269\u4f59\u526f\u672c\u4e5f\u53d1\u751f\u6545\u969c\uff0c\u8fd9\u4e9b\u5199\u5165\u53ef\u80fd\u4f1a\u4e22\u5931\u3002\u5c3d\u7ba1\u8fd9\u786e\u4fdd\u4e86\u5206\u533a\u7684\u6700\u5927\u53ef\u7528\u6027\uff0c\u4f46\u5bf9\u4e8e\u67d0\u4e9b\u66f4\u559c\u6b22\u6301\u4e45\u6027\u800c\u4e0d\u662f\u53ef\u7528\u6027\u7684\u7528\u6237\u6765\u8bf4\uff0c\u8fd9\u79cd\u884c\u4e3a\u53ef\u80fd\u662f\u4e0d\u53d7\u6b22\u8fce\u7684\u3002\u6240\u4ee5\uff0c \u7981\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e - \u5982\u679c\u6240\u6709\u526f\u672c\u90fd\u4e0d\u53ef\u7528\uff0c\u5219\u5206\u533a\u5c06\u4fdd\u6301\u4e0d\u53ef\u7528\uff0c\u76f4\u5230\u6700\u8fd1\u7684\u9886\u5bfc\u8005\u518d\u6b21\u53ef\u7528\u3002\u8fd9\u5b9e\u9645\u4e0a\u66f4\u503e\u5411\u4e8e\u4e0d\u53ef\u7528\u800c\u4e0d\u662f\u6d88\u606f\u4e22\u5931\u7684\u98ce\u9669\u3002\u8bf7\u53c2\u9605\u4e0a\u4e00\u8282\u5173\u4e8e\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e\u7684\u8bf4\u660e\u3002 \u6307\u5b9a\u6700\u5c0f ISR \u5927\u5c0f - \u4ec5\u5f53 ISR \u5927\u5c0f\u9ad8\u4e8e\u67d0\u4e2a\u6700\u5c0f\u503c\u65f6\uff0c\u5206\u533a\u624d\u4f1a\u63a5\u53d7\u5199\u5165\uff0c\u4ee5\u9632\u6b62\u4ec5\u5199\u5165\u5355\u4e2a\u526f\u672c\u7684\u6d88\u606f\u4e22\u5931\uff0c\u8be5\u526f\u672c\u968f\u540e\u53d8\u5f97\u4e0d\u53ef\u7528\u3002\u4ec5\u5f53\u751f\u4ea7\u8005\u4f7f\u7528 acks=all \u5e76\u4fdd\u8bc1\u6d88\u606f\u5c06\u88ab\u81f3\u5c11\u8fd9\u4e48\u591a\u540c\u6b65\u526f\u672c\u786e\u8ba4\u65f6\uff0c\u6b64\u8bbe\u7f6e\u624d\u4f1a\u751f\u6548\u3002\u6b64\u8bbe\u7f6e\u63d0\u4f9b\u4e86\u4e00\u81f4\u6027\u548c\u53ef\u7528\u6027\u4e4b\u95f4\u7684\u6743\u8861\u3002\u6700\u5c0f ISR \u5927\u5c0f\u7684\u8f83\u9ad8\u8bbe\u7f6e\u53ef\u4ee5\u4fdd\u8bc1\u66f4\u597d\u7684\u4e00\u81f4\u6027\uff0c\u56e0\u4e3a\u6d88\u606f\u53ef\u4ee5\u4fdd\u8bc1\u5199\u5165\u66f4\u591a\u526f\u672c\uff0c\u4ece\u800c\u964d\u4f4e\u4e22\u5931\u7684\u53ef\u80fd\u6027\u3002\u4f46\u662f\uff0c\u5b83\u4f1a\u964d\u4f4e\u53ef\u7528\u6027\uff0c\u56e0\u4e3a\u5982\u679c\u540c\u6b65\u526f\u672c\u7684\u6570\u91cf\u4f4e\u4e8e\u6700\u5c0f\u9608\u503c\uff0c\u5219\u5206\u533a\u5c06\u65e0\u6cd5\u7528\u4e8e\u5199\u5165\u3002 \u526f\u672c\u7ba1\u7406 \u4e0a\u9762\u5173\u4e8e\u590d\u5236\u65e5\u5fd7\u7684\u8ba8\u8bba\u5b9e\u9645\u4e0a\u53ea\u6db5\u76d6\u4e86\u5355\u4e2a\u65e5\u5fd7\uff0c\u5373\u4e00\u4e2a\u4e3b\u9898\u5206\u533a\u3002\u7136\u800c\uff0cKafka \u96c6\u7fa4\u5c06\u7ba1\u7406\u6570\u767e\u6216\u6570\u5343\u4e2a\u8fd9\u6837\u7684\u5206\u533a\u3002\u6211\u4eec\u5c1d\u8bd5\u4ee5\u5faa\u73af\u65b9\u5f0f\u5e73\u8861\u96c6\u7fa4\u5185\u7684\u5206\u533a\uff0c\u4ee5\u907f\u514d\u5c06\u5927\u91cf\u4e3b\u9898\u7684\u6240\u6709\u5206\u533a\u805a\u96c6\u5728\u5c11\u91cf\u8282\u70b9\u4e0a\u3002\u540c\u6837\uff0c\u6211\u4eec\u5c1d\u8bd5\u5e73\u8861\u9886\u5bfc\u529b\uff0c\u4ee5\u4fbf\u6bcf\u4e2a\u8282\u70b9\u90fd\u662f\u5176\u5206\u533a\u4e2d\u4e00\u5b9a\u6bd4\u4f8b\u4efd\u989d\u7684\u9886\u5bfc\u8005\u3002 \u4f18\u5316\u9886\u5bfc\u9009\u4e3e\u6d41\u7a0b\u4e5f\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e0d\u53ef\u7528\u7684\u5173\u952e\u7a97\u53e3\u3002\u9886\u5bfc\u8005\u9009\u4e3e\u7684\u7b80\u5355\u5b9e\u73b0\u6700\u7ec8\u4f1a\u5728\u8be5\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\u4e3a\u8be5\u8282\u70b9\u6258\u7ba1\u7684\u6240\u6709\u5206\u533a\u8fd0\u884c\u6bcf\u4e2a\u5206\u533a\u7684\u9009\u4e3e\u3002 \u6b63\u5982\u4e0a\u9762\u6709\u5173\u590d\u5236\u7684 \u90e8\u5206\u6240\u8ba8\u8bba\u7684 Kafka\u96c6\u7fa4\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u89d2\u8272\uff0c\u79f0\u4e3a\u201c\u63a7\u5236\u5668\u201d\uff0c\u8d1f\u8d23\u7ba1\u7406broker\u7684\u6ce8\u518c\u3002\u5982\u679c\u63a7\u5236\u5668\u68c0\u6d4b\u5230\u4ee3\u7406\u53d1\u751f\u6545\u969c\uff0c\u5219\u5b83\u8d1f\u8d23\u9009\u4e3e ISR \u7684\u5269\u4f59\u6210\u5458\u4e4b\u4e00\u4f5c\u4e3a\u65b0\u7684\u9886\u5bfc\u8005\u3002\u7ed3\u679c\u662f\uff0c\u6211\u4eec\u80fd\u591f\u5c06\u8bb8\u591a\u6240\u9700\u7684\u9886\u5bfc\u5c42\u53d8\u66f4\u901a\u77e5\u6279\u5904\u7406\u5728\u4e00\u8d77\uff0c\u8fd9\u4f7f\u5f97\u5927\u91cf\u5206\u533a\u7684\u9009\u4e3e\u8fc7\u7a0b\u66f4\u52a0\u4fbf\u5b9c\u4e14\u66f4\u5feb\u3002\u5982\u679c\u63a7\u5236\u5668\u672c\u8eab\u53d1\u751f\u6545\u969c\uff0c\u5219\u5c06\u9009\u4e3e\u53e6\u4e00\u4e2a\u63a7\u5236\u5668\u3002 4.8 \u65e5\u5fd7\u538b\u7f29 \u65e5\u5fd7\u538b\u7f29\u786e\u4fdd Kafka \u59cb\u7ec8\u81f3\u5c11\u4fdd\u7559\u5355\u4e2a\u4e3b\u9898\u5206\u533a\u7684\u6570\u636e\u65e5\u5fd7\u4e2d\u6bcf\u4e2a\u6d88\u606f\u952e\u7684\u6700\u540e\u4e00\u4e2a\u5df2\u77e5\u503c\u3002\u5b83\u89e3\u51b3\u4e86\u7528\u4f8b\u548c\u573a\u666f\uff0c\u4f8b\u5982\u5e94\u7528\u7a0b\u5e8f\u5d29\u6e83\u6216\u7cfb\u7edf\u6545\u969c\u540e\u6062\u590d\u72b6\u6001\uff0c\u6216\u5728\u64cd\u4f5c\u7ef4\u62a4\u671f\u95f4\u5e94\u7528\u7a0b\u5e8f\u91cd\u65b0\u542f\u52a8\u540e\u91cd\u65b0\u52a0\u8f7d\u7f13\u5b58\u3002\u8ba9\u6211\u4eec\u66f4\u8be6\u7ec6\u5730\u7814\u7a76\u8fd9\u4e9b\u7528\u4f8b\uff0c\u7136\u540e\u63cf\u8ff0\u538b\u7f29\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u4ec5\u63cf\u8ff0\u4e86\u66f4\u7b80\u5355\u7684\u6570\u636e\u4fdd\u7559\u65b9\u6cd5\uff0c\u5176\u4e2d\u65e7\u65e5\u5fd7\u6570\u636e\u5728\u56fa\u5b9a\u65f6\u95f4\u6bb5\u540e\u6216\u5f53\u65e5\u5fd7\u8fbe\u5230\u67d0\u4e2a\u9884\u5b9a\u5927\u5c0f\u65f6\u88ab\u4e22\u5f03\u3002\u8fd9\u5bf9\u4e8e\u65f6\u95f4\u4e8b\u4ef6\u6570\u636e\u975e\u5e38\u6709\u6548\uff0c\u4f8b\u5982\u8bb0\u5f55\u6bcf\u4e2a\u8bb0\u5f55\u72ec\u7acb\u7684\u60c5\u51b5\u3002\u7136\u800c\uff0c\u4e00\u7c7b\u91cd\u8981\u7684\u6570\u636e\u6d41\u662f\u5bf9\u952e\u63a7\u3001\u53ef\u53d8\u6570\u636e\u7684\u66f4\u6539\u7684\u65e5\u5fd7\uff08\u4f8b\u5982\uff0c\u5bf9\u6570\u636e\u5e93\u8868\u7684\u66f4\u6539\uff09\u3002 \u8ba9\u6211\u4eec\u8ba8\u8bba\u8fd9\u6837\u4e00\u4e2a\u6d41\u7684\u5177\u4f53\u793a\u4f8b\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u5305\u542b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7684\u4e3b\u9898\uff1b\u6bcf\u6b21\u7528\u6237\u66f4\u65b0\u5176\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u65f6\uff0c\u6211\u4eec\u90fd\u4f1a\u4f7f\u7528\u5176\u7528\u6237 ID \u4f5c\u4e3a\u4e3b\u952e\u5411\u8be5\u4e3b\u9898\u53d1\u9001\u4e00\u6761\u6d88\u606f\u3002\u73b0\u5728\u5047\u8bbe\u6211\u4eec\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u4e3a id \u4e3a 123 \u7684\u7528\u6237\u53d1\u9001\u4ee5\u4e0b\u6d88\u606f\uff0c\u6bcf\u6761\u6d88\u606f\u5bf9\u5e94\u4e8e\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7684\u66f4\u6539\uff08\u5176\u4ed6 id \u7684\u6d88\u606f\u88ab\u7701\u7565\uff09\uff1a 123 => bill@microsoft.com . . . 123 => bill@gatesfoundation.org . . . 123 => bill@gmail.com \u65e5\u5fd7\u538b\u7f29\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u7ec6\u7c92\u5ea6\u7684\u4fdd\u7559\u673a\u5236\uff0c\u4ee5\u4fbf\u4fdd\u8bc1\u6211\u4eec\u81f3\u5c11\u4fdd\u7559\u6bcf\u4e2a\u4e3b\u952e\u7684\u6700\u540e\u66f4\u65b0\uff08\u4f8b\u5982 bill@gmail.com \uff09\u3002\u901a\u8fc7\u8fd9\u6837\u505a\uff0c\u6211\u4eec\u4fdd\u8bc1\u65e5\u5fd7\u5305\u542b\u6bcf\u4e2a\u952e\u7684\u6700\u7ec8\u503c\u7684\u5b8c\u6574\u5feb\u7167\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6700\u8fd1\u66f4\u6539\u7684\u952e\u3002\u8fd9\u610f\u5473\u7740\u4e0b\u6e38\u6d88\u8d39\u8005\u53ef\u4ee5\u5728\u8be5\u4e3b\u9898\u4e4b\u5916\u6062\u590d\u81ea\u5df1\u7684\u72b6\u6001\uff0c\u800c\u65e0\u9700\u6211\u4eec\u4fdd\u7559\u6240\u6709\u66f4\u6539\u7684\u5b8c\u6574\u65e5\u5fd7\u3002 \u8ba9\u6211\u4eec\u9996\u5148\u770b\u4e00\u4e9b\u6709\u7528\u7684\u7528\u4f8b\uff0c\u7136\u540e\u6211\u4eec\u5c06\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u5b83\u3002 \u6570\u636e\u5e93\u53d8\u66f4\u8ba2\u9605 \u3002\u901a\u5e38\u9700\u8981\u5728\u591a\u4e2a\u6570\u636e\u7cfb\u7edf\u4e2d\u62e5\u6709\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u5e76\u4e14\u901a\u5e38\u8fd9\u4e9b\u7cfb\u7edf\u4e4b\u4e00\u662f\u67d0\u79cd\u6570\u636e\u5e93\uff08RDBMS \u6216\u53ef\u80fd\u662f\u65b0\u578b\u952e\u503c\u5b58\u50a8\uff09\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u6709\u4e00\u4e2a\u6570\u636e\u5e93\u3001\u4e00\u4e2a\u7f13\u5b58\u3001\u4e00\u4e2a\u641c\u7d22\u96c6\u7fa4\u548c\u4e00\u4e2a Hadoop \u96c6\u7fa4\u3002\u5bf9\u6570\u636e\u5e93\u7684\u6bcf\u6b21\u66f4\u6539\u90fd\u9700\u8981\u53cd\u6620\u5728\u7f13\u5b58\u3001\u641c\u7d22\u96c6\u7fa4\u4e2d\uff0c\u5e76\u6700\u7ec8\u53cd\u6620\u5728 Hadoop \u4e2d\u3002\u5982\u679c\u53ea\u5904\u7406\u5b9e\u65f6\u66f4\u65b0\uff0c\u60a8\u53ea\u9700\u8981\u6700\u8fd1\u7684\u65e5\u5fd7\u3002\u4f46\u5982\u679c\u60a8\u5e0c\u671b\u80fd\u591f\u91cd\u65b0\u52a0\u8f7d\u7f13\u5b58\u6216\u6062\u590d\u5931\u8d25\u7684\u641c\u7d22\u8282\u70b9\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u5b8c\u6574\u7684\u6570\u636e\u96c6\u3002 \u4e8b\u4ef6\u6eaf\u6e90 \u3002\u8fd9\u662f\u4e00\u79cd\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u98ce\u683c\uff0c\u5b83\u5c06\u67e5\u8be2\u5904\u7406\u4e0e\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u653e\u5728\u4e00\u8d77\uff0c\u5e76\u4f7f\u7528\u66f4\u6539\u65e5\u5fd7\u4f5c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u7684\u4e3b\u8981\u5b58\u50a8\u3002 \u65e5\u5fd7\u8bb0\u5f55\u4ee5\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027 \u3002\u8fdb\u884c\u672c\u5730\u8ba1\u7b97\u7684\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6ce8\u9500\u5bf9\u5176\u672c\u5730\u72b6\u6001\u6240\u505a\u7684\u66f4\u6539\u6765\u5b9e\u73b0\u5bb9\u9519\uff0c\u4ee5\u4fbf\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u91cd\u65b0\u52a0\u8f7d\u8fd9\u4e9b\u66f4\u6539\u5e76\u5728\u5931\u8d25\u65f6\u7ee7\u7eed\u6267\u884c\u3002\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u662f\u5728\u6d41\u67e5\u8be2\u7cfb\u7edf\u4e2d\u5904\u7406\u8ba1\u6570\u3001\u805a\u5408\u548c\u5176\u4ed6\u7c7b\u4f3c\u201cgroup by\u201d\u7684\u5904\u7406\u3002Samza \u662f\u4e00\u4e2a\u5b9e\u65f6\u6d41\u5904\u7406\u6846\u67b6\uff0c \u6b63\u662f\u5229\u7528\u6b64\u529f\u80fd \u6765\u5b9e\u73b0\u6b64\u76ee\u7684\u3002 \u5728\u6bcf\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e3b\u8981\u9700\u8981\u5904\u7406\u5b9e\u65f6\u7684\u53d8\u5316\uff0c\u4f46\u5076\u5c14\uff0c\u5f53\u673a\u5668\u5d29\u6e83\u6216\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u6216\u91cd\u65b0\u5904\u7406\u6570\u636e\u65f6\uff0c\u5c31\u9700\u8981\u8fdb\u884c\u5b8c\u5168\u52a0\u8f7d\u3002\u65e5\u5fd7\u538b\u7f29\u5141\u8bb8\u5c06\u8fd9\u4e24\u4e2a\u7528\u4f8b\u63d0\u4f9b\u7ed9\u540c\u4e00\u652f\u6301\u4e3b\u9898\u3002 \u8fd9\u7bc7\u535a\u5ba2\u6587\u7ae0 \u66f4\u8be6\u7ec6\u5730\u63cf\u8ff0\u4e86\u65e5\u5fd7\u7684\u8fd9\u79cd\u4f7f\u7528\u65b9\u5f0f\u3002 \u603b\u4f53\u601d\u8def\u975e\u5e38\u7b80\u5355\u3002\u5982\u679c\u6211\u4eec\u6709\u65e0\u9650\u7684\u65e5\u5fd7\u4fdd\u7559\uff0c\u5e76\u4e14\u6211\u4eec\u8bb0\u5f55\u4e86\u4e0a\u8ff0\u60c5\u51b5\u4e0b\u7684\u6bcf\u4e2a\u66f4\u6539\uff0c\u90a3\u4e48\u6211\u4eec\u5c06\u6355\u83b7\u7cfb\u7edf\u4ece\u7b2c\u4e00\u6b21\u5f00\u59cb\u65f6\u7684\u6bcf\u4e2a\u65f6\u95f4\u7684\u72b6\u6001\u3002\u4f7f\u7528\u8fd9\u4e2a\u5b8c\u6574\u7684\u65e5\u5fd7\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u91cd\u653e\u65e5\u5fd7\u4e2d\u7684\u524d N \u200b\u200b\u6761\u8bb0\u5f55\u6765\u6062\u590d\u5230\u4efb\u610f\u65f6\u95f4\u70b9\u3002\u5bf9\u4e8e\u591a\u6b21\u66f4\u65b0\u5355\u4e2a\u8bb0\u5f55\u7684\u7cfb\u7edf\u6765\u8bf4\uff0c\u8fd9\u79cd\u5047\u8bbe\u7684\u5b8c\u6574\u65e5\u5fd7\u4e0d\u592a\u5b9e\u7528\uff0c\u56e0\u4e3a\u5373\u4f7f\u5bf9\u4e8e\u7a33\u5b9a\u7684\u6570\u636e\u96c6\uff0c\u65e5\u5fd7\u4e5f\u4f1a\u65e0\u9650\u5236\u5730\u589e\u957f\u3002\u4e22\u5f03\u65e7\u66f4\u65b0\u7684\u7b80\u5355\u65e5\u5fd7\u4fdd\u7559\u673a\u5236\u4f1a\u9650\u5236\u7a7a\u95f4\uff0c\u4f46\u65e5\u5fd7\u4e0d\u518d\u662f\u6062\u590d\u5f53\u524d\u72b6\u6001\u7684\u65b9\u6cd5 - \u73b0\u5728\u4ece\u65e5\u5fd7\u5f00\u5934\u6062\u590d\u4e0d\u518d\u91cd\u65b0\u521b\u5efa\u5f53\u524d\u72b6\u6001\uff0c\u56e0\u4e3a\u65e7\u66f4\u65b0\u53ef\u80fd\u6839\u672c\u65e0\u6cd5\u6355\u83b7\u3002 \u65e5\u5fd7\u538b\u7f29\u662f\u4e00\u79cd\u63d0\u4f9b\u66f4\u7ec6\u7c92\u5ea6\u7684\u6bcf\u6761\u8bb0\u5f55\u4fdd\u7559\u7684\u673a\u5236\uff0c\u800c\u4e0d\u662f\u63d0\u4f9b\u66f4\u7c97\u7c92\u5ea6\u7684\u57fa\u4e8e\u65f6\u95f4\u7684\u4fdd\u7559\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u6709\u9009\u62e9\u5730\u5220\u9664\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u6700\u65b0\u66f4\u65b0\u7684\u8bb0\u5f55\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u65e5\u5fd7\u81f3\u5c11\u5177\u6709\u6bcf\u4e2a\u952e\u7684\u6700\u540e\u72b6\u6001\u3002 \u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u4e3b\u9898\u8bbe\u7f6e\u6b64\u4fdd\u7559\u7b56\u7565\uff0c\u56e0\u6b64\u5355\u4e2a\u96c6\u7fa4\u53ef\u4ee5\u5177\u6709\u4e00\u4e9b\u901a\u8fc7\u5927\u5c0f\u6216\u65f6\u95f4\u5f3a\u5236\u4fdd\u7559\u7684\u4e3b\u9898\uff0c\u4ee5\u53ca\u901a\u8fc7\u538b\u7f29\u5f3a\u5236\u4fdd\u7559\u7684\u5176\u4ed6\u4e3b\u9898\u3002 \u6b64\u529f\u80fd\u7684\u7075\u611f\u6765\u81ea\u4e8e LinkedIn \u6700\u53e4\u8001\u3001\u6700\u6210\u529f\u7684\u57fa\u7840\u8bbe\u65bd\u4e4b\u4e00\u2014\u2014\u540d\u4e3a Databus \u7684 \u6570\u636e\u5e93\u53d8\u66f4\u65e5\u5fd7\u7f13\u5b58\u670d\u52a1\u3002\u4e0e\u5927\u591a\u6570\u65e5\u5fd7\u7ed3\u6784\u5b58\u50a8\u7cfb\u7edf\u4e0d\u540c\uff0cKafka \u662f\u4e3a\u8ba2\u9605\u800c\u6784\u5efa\u7684\uff0c\u5e76\u7ec4\u7ec7\u6570\u636e\u4ee5\u8fdb\u884c\u5feb\u901f\u7ebf\u6027\u8bfb\u53d6\u548c\u5199\u5165\u3002\u4e0e Databus \u4e0d\u540c\uff0cKafka \u5145\u5f53\u771f\u5b9e\u6765\u6e90\u5b58\u50a8\uff0c\u56e0\u6b64\u5373\u4f7f\u5728\u4e0a\u6e38\u6570\u636e\u6e90\u65e0\u6cd5\u91cd\u653e\u7684\u60c5\u51b5\u4e0b\u5b83\u4e5f\u5f88\u6709\u7528\u3002 \u65e5\u5fd7\u538b\u7f29\u57fa\u7840\u77e5\u8bc6 \u8fd9\u662f\u4e00\u5f20\u9ad8\u7ea7\u56fe\u7247\uff0c\u663e\u793a\u4e86 Kafka \u65e5\u5fd7\u7684\u903b\u8f91\u7ed3\u6784\u4ee5\u53ca\u6bcf\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002 \u65e5\u5fd7\u7684\u5934\u90e8\u4e0e\u4f20\u7edf\u7684 Kafka \u65e5\u5fd7\u76f8\u540c\u3002\u5b83\u5177\u6709\u5bc6\u96c6\u3001\u8fde\u7eed\u7684\u504f\u79fb\u91cf\u5e76\u4fdd\u7559\u6240\u6709\u6d88\u606f\u3002\u65e5\u5fd7\u538b\u7f29\u6dfb\u52a0\u4e86\u5904\u7406\u65e5\u5fd7\u5c3e\u90e8\u7684\u9009\u9879\u3002\u4e0a\u56fe\u663e\u793a\u4e86\u4e00\u6839\u5e26\u6709\u538b\u7d27\u5c3e\u90e8\u7684\u539f\u6728\u3002\u8bf7\u6ce8\u610f\uff0c\u65e5\u5fd7\u5c3e\u90e8\u7684\u6d88\u606f\u4fdd\u7559\u9996\u6b21\u5199\u5165\u65f6\u5206\u914d\u7684\u539f\u59cb\u504f\u79fb\u91cf\uff0c\u5e76\u4e14\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\u3002\u53e6\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u5177\u6709\u8be5\u504f\u79fb\u91cf\u7684\u6d88\u606f\u5df2\u88ab\u538b\u7f29\uff0c\u6240\u6709\u504f\u79fb\u91cf\u4ecd\u4fdd\u7559\u5728\u65e5\u5fd7\u4e2d\u7684\u6709\u6548\u4f4d\u7f6e\uff1b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8be5\u4f4d\u7f6e\u4e0e\u65e5\u5fd7\u4e2d\u51fa\u73b0\u7684\u4e0b\u4e00\u4e2a\u6700\u9ad8\u504f\u79fb\u91cf\u65e0\u6cd5\u533a\u5206\u3002\u4f8b\u5982\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0c\u504f\u79fb\u91cf 36\u300137 \u548c 38 \u90fd\u662f\u7b49\u6548\u4f4d\u7f6e\uff0c\u4ece\u8fd9\u4e9b\u504f\u79fb\u91cf\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5f00\u59cb\u8bfb\u53d6\u90fd\u5c06\u8fd4\u56de\u4ee5 38 \u5f00\u5934\u7684\u6d88\u606f\u96c6\u3002 \u538b\u7f29\u8fd8\u5141\u8bb8\u5220\u9664\u3002\u5e26\u6709\u5bc6\u94a5\u548c\u7a7a\u8d1f\u8f7d\u7684\u6d88\u606f\u5c06\u88ab\u89c6\u4e3a\u4ece\u65e5\u5fd7\u4e2d\u5220\u9664\u3002\u8fd9\u6837\u7684\u8bb0\u5f55\u6709\u65f6\u88ab\u79f0\u4e3a \u5893\u7891 \u3002\u6b64\u5220\u9664\u6807\u8bb0\u5c06\u5bfc\u81f4\u4efb\u4f55\u5177\u6709\u8be5\u952e\u7684\u5148\u524d\u6d88\u606f\u88ab\u5220\u9664\uff08\u5c31\u50cf\u5177\u6709\u8be5\u952e\u7684\u4efb\u4f55\u65b0\u6d88\u606f\u4e00\u6837\uff09\uff0c\u4f46\u5220\u9664\u6807\u8bb0\u7684\u7279\u6b8a\u4e4b\u5904\u5728\u4e8e\uff0c\u5b83\u4eec\u672c\u8eab\u4f1a\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u4ece\u65e5\u5fd7\u4e2d\u6e05\u9664\u4ee5\u91ca\u653e\u7a7a\u95f4\u3002\u5220\u9664\u4e0d\u518d\u4fdd\u7559\u7684\u65f6\u95f4\u70b9\u5728\u4e0a\u56fe\u4e2d\u88ab\u6807\u8bb0\u4e3a\u201c\u5220\u9664\u4fdd\u7559\u70b9\u201d\u3002 \u538b\u7f29\u662f\u901a\u8fc7\u5b9a\u671f\u91cd\u65b0\u590d\u5236\u65e5\u5fd7\u6bb5\u5728\u540e\u53f0\u5b8c\u6210\u7684\u3002\u6e05\u7406\u4e0d\u4f1a\u963b\u6b62\u8bfb\u53d6\uff0c\u5e76\u4e14\u53ef\u4ee5\u9650\u5236\u4f7f\u7528\u4e0d\u8d85\u8fc7\u53ef\u914d\u7f6e\u7684 I/O \u541e\u5410\u91cf\uff0c\u4ee5\u907f\u514d\u5f71\u54cd\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u3002\u538b\u7f29\u65e5\u5fd7\u6bb5\u7684\u5b9e\u9645\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a\uff1a \u65e5\u5fd7\u538b\u7f29\u63d0\u4f9b\u4ec0\u4e48\u4fdd\u8bc1 \uff1f \u65e5\u5fd7\u538b\u7f29\u4fdd\u8bc1\u4ee5\u4e0b\u51e0\u70b9\uff1a \u4efb\u4f55\u5173\u6ce8\u65e5\u5fd7\u5934\u90e8\u7684\u6d88\u8d39\u8005\u90fd\u4f1a\u770b\u5230\u5199\u5165\u7684\u6bcf\u6761\u6d88\u606f\uff1b\u8fd9\u4e9b\u6d88\u606f\u5c06\u5177\u6709\u8fde\u7eed\u7684\u504f\u79fb\u91cf\u3002\u4e3b\u9898 min.compaction.lag.ms \u53ef\u7528\u4e8e\u4fdd\u8bc1\u6d88\u606f\u5199\u5165\u540e\u5fc5\u987b\u7ecf\u8fc7\u7684\u6700\u77ed\u65f6\u95f4\u957f\u5ea6\u624d\u80fd\u88ab\u538b\u7f29\u3002\u5373\uff0c\u5b83\u63d0\u4f9b\u4e86\u6bcf\u6761\u6d88\u606f\u5728\uff08\u672a\u538b\u7f29\u7684\uff09\u5934\u90e8\u4e2d\u4fdd\u7559\u591a\u957f\u65f6\u95f4\u7684\u4e0b\u9650\u3002\u4e3b\u9898 max.compaction.lag.ms \u53ef\u7528\u4e8e\u4fdd\u8bc1\u5199\u5165\u6d88\u606f\u7684\u65f6\u95f4\u548c\u6d88\u606f\u9002\u5408\u538b\u7f29\u7684\u65f6\u95f4\u4e4b\u95f4\u7684\u6700\u5927\u5ef6\u8fdf\u3002 \u6d88\u606f\u7684\u987a\u5e8f\u59cb\u7ec8\u4fdd\u6301\u4e0d\u53d8\u3002\u538b\u7f29\u6c38\u8fdc\u4e0d\u4f1a\u91cd\u65b0\u6392\u5e8f\u6d88\u606f\uff0c\u53ea\u662f\u5220\u9664\u4e00\u4e9b\u6d88\u606f\u3002 \u6d88\u606f\u7684\u504f\u79fb\u91cf\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\u3002\u5b83\u662f\u65e5\u5fd7\u4e2d\u67d0\u4e2a\u4f4d\u7f6e\u7684\u6c38\u4e45\u6807\u8bc6\u7b26\u3002 \u4ece\u65e5\u5fd7\u5f00\u59cb\u8fdb\u884c\u7684\u4efb\u4f55\u6d88\u8d39\u8005\u90fd\u5c06\u81f3\u5c11\u6309\u7167\u5199\u5165\u987a\u5e8f\u770b\u5230\u6240\u6709\u8bb0\u5f55\u7684\u6700\u7ec8\u72b6\u6001\u3002\u6b64\u5916\uff0c\u5982\u679c\u6d88\u8d39\u8005\u5728\u5c0f\u4e8e\u4e3b\u9898\u8bbe\u7f6e\u7684\u65f6\u95f4\u6bb5\u5185\u5230\u8fbe\u65e5\u5fd7\u7684\u5934\u90e8 delete.retention.ms \uff08\u9ed8\u8ba4\u4e3a 24\u200b\u200b \u5c0f\u65f6\uff09\uff0c\u5219\u5c06\u770b\u5230\u5df2\u5220\u9664\u8bb0\u5f55\u7684\u6240\u6709\u5220\u9664\u6807\u8bb0\u3002\u6362\u53e5\u8bdd\u8bf4\uff1a\u7531\u4e8e\u5220\u9664\u6807\u8bb0\u7684\u5220\u9664\u4e0e\u8bfb\u53d6\u540c\u65f6\u53d1\u751f\uff0c\u56e0\u6b64\u5982\u679c\u6ede\u540e\u8d85\u8fc7 \uff0c\u6d88\u8d39\u8005\u53ef\u80fd\u4f1a\u9519\u8fc7\u5220\u9664\u6807\u8bb0 delete.retention.ms \u3002 \u65e5\u5fd7\u538b\u7f29\u8be6\u7ec6\u4fe1\u606f \u65e5\u5fd7\u538b\u7f29\u7531\u65e5\u5fd7\u6e05\u7406\u5668\u5904\u7406\uff0c\u65e5\u5fd7\u6e05\u7406\u5668\u662f\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\u6c60\uff0c\u7528\u4e8e\u91cd\u65b0\u590d\u5236\u65e5\u5fd7\u6bb5\u6587\u4ef6\uff0c\u5220\u9664\u5176\u952e\u51fa\u73b0\u5728\u65e5\u5fd7\u5934\u90e8\u7684\u8bb0\u5f55\u3002\u6bcf\u4e2a\u538b\u7f29\u5668\u7ebf\u7a0b\u7684\u5de5\u4f5c\u539f\u7406\u5982\u4e0b\uff1a \u5b83\u9009\u62e9\u5177\u6709\u6700\u9ad8\u65e5\u5fd7\u5934\u4e0e\u65e5\u5fd7\u5c3e\u6bd4\u7684\u65e5\u5fd7 \u5b83\u4e3a\u65e5\u5fd7\u5934\u90e8\u7684\u6bcf\u4e2a\u952e\u521b\u5efa\u6700\u540e\u4e00\u4e2a\u504f\u79fb\u91cf\u7684\u7b80\u6d01\u6458\u8981 \u5b83\u4ece\u5934\u5230\u5c3e\u91cd\u65b0\u590d\u5236\u65e5\u5fd7\uff0c\u5220\u9664\u65e5\u5fd7\u4e2d\u7a0d\u540e\u51fa\u73b0\u7684\u952e\u3002\u65b0\u7684\u3001\u5e72\u51c0\u7684\u6bb5\u4f1a\u7acb\u5373\u4ea4\u6362\u5230\u65e5\u5fd7\u4e2d\uff0c\u56e0\u6b64\u6240\u9700\u7684\u989d\u5916\u78c1\u76d8\u7a7a\u95f4\u53ea\u662f\u4e00\u4e2a\u989d\u5916\u7684\u65e5\u5fd7\u6bb5\uff08\u800c\u4e0d\u662f\u65e5\u5fd7\u7684\u5b8c\u6574\u526f\u672c\uff09\u3002 \u65e5\u5fd7\u5934\u7684\u6458\u8981\u672c\u8d28\u4e0a\u53ea\u662f\u4e00\u4e2a\u7a7a\u95f4\u7d27\u51d1\u7684\u54c8\u5e0c\u8868\u3002\u6bcf\u4e2a\u6761\u76ee\u6b63\u597d\u4f7f\u7528 24 \u4e2a\u5b57\u8282\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 8GB \u7684\u200b\u200b\u6e05\u7406\u7f13\u51b2\u533a\uff0c\u4e00\u6b21\u6e05\u7406\u8fed\u4ee3\u53ef\u4ee5\u6e05\u7406\u5927\u7ea6 366GB \u7684\u65e5\u5fd7\u5934\uff08\u5047\u8bbe\u6709 1k \u6761\u6d88\u606f\uff09\u3002 \u914d\u7f6e\u65e5\u5fd7\u6e05\u7406\u5668 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u542f\u7528\u65e5\u5fd7\u6e05\u7406\u5668\u3002\u8fd9\u5c06\u542f\u52a8\u6e05\u7406\u7ebf\u7a0b\u6c60\u3002\u8981\u542f\u7528\u7279\u5b9a\u4e3b\u9898\u7684\u65e5\u5fd7\u6e05\u7406\uff0c\u8bf7\u6dfb\u52a0\u7279\u5b9a\u4e8e\u65e5\u5fd7\u7684\u5c5e\u6027 log.cleanup.policy=compact \u8be5 log.cleanup.policy \u5c5e\u6027\u662f\u4ee3\u7406 server.properties \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e\uff1b\u5b83\u4f1a\u5f71\u54cd\u96c6\u7fa4\u4e2d\u6ca1\u6709\u914d\u7f6e\u8986\u76d6\u7684\u6240\u6709\u4e3b\u9898\uff08\u5982\u6b64\u5904\u6240\u8ff0 \uff09 \u3002\u65e5\u5fd7\u6e05\u7406\u5668\u53ef\u4ee5\u914d\u7f6e\u4e3a\u4fdd\u7559\u6700\u5c11\u91cf\u7684\u672a\u538b\u5b9e\u7684\u65e5\u5fd7\u201c\u5934\u90e8\u201d\u3002\u8fd9\u662f\u901a\u8fc7\u8bbe\u7f6e\u538b\u7f29\u65f6\u95f4\u5ef6\u8fdf\u6765\u542f\u7528\u7684\u3002 log.cleaner.min.compaction.lag.ms \u8fd9\u53ef\u7528\u4e8e\u9632\u6b62\u6bd4\u6700\u5c0f\u6d88\u606f\u5e74\u9f84\u65b0\u7684\u6d88\u606f\u53d7\u5230\u538b\u7f29\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u9664\u6700\u540e\u4e00\u4e2a\u6bb5\uff08\u5373\u5f53\u524d\u6b63\u5728\u5199\u5165\u7684\u6bb5\uff09\u4e4b\u5916\u7684\u6240\u6709\u65e5\u5fd7\u6bb5\u90fd\u9002\u5408\u538b\u7f29\u3002\u5373\u4f7f\u6d3b\u52a8\u6bb5\u7684\u6240\u6709\u6d88\u606f\u90fd\u65e9\u4e8e\u6700\u5c0f\u538b\u7f29\u65f6\u95f4\u5ef6\u8fdf\uff0c\u4e5f\u4e0d\u4f1a\u538b\u7f29\u6d3b\u52a8\u6bb5\u3002\u65e5\u5fd7\u6e05\u7406\u5668\u53ef\u4ee5\u914d\u7f6e\u4e3a\u786e\u4fdd\u6700\u5927\u5ef6\u8fdf\uff0c\u4e4b\u540e\u65e5\u5fd7\u7684\u672a\u538b\u7f29\u201c\u5934\u90e8\u201d\u5c31\u53ef\u4ee5\u8fdb\u884c\u65e5\u5fd7\u538b\u7f29\u3002 log.cleaner.max.compaction.lag.ms \u8fd9\u53ef\u7528\u4e8e\u9632\u6b62\u4f4e\u751f\u4ea7\u7387\u7684\u539f\u6728\u5728\u65e0\u9650\u5236\u7684\u6301\u7eed\u65f6\u95f4\u5185\u4fdd\u6301\u4e0d\u7b26\u5408\u538b\u7f29\u6761\u4ef6\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4e0d\u4f1a\u538b\u7f29\u4e0d\u8d85\u8fc7 min.cleanable.dirty.ratio \u7684\u65e5\u5fd7\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u538b\u7f29\u671f\u9650\u5e76\u4e0d\u662f\u4e00\u4e2a\u786c\u6027\u4fdd\u8bc1\uff0c\u56e0\u4e3a\u5b83\u4ecd\u7136\u53d7\u5230\u65e5\u5fd7\u6e05\u7406\u7ebf\u7a0b\u7684\u53ef\u7528\u6027\u548c\u5b9e\u9645\u538b\u7f29\u65f6\u95f4\u7684\u5f71\u54cd\u3002\u60a8\u5c06\u9700\u8981\u76d1\u63a7 uncleanable-partitions-count\u3001max-clean-time-secs \u548c max-compaction-delay-secs \u6307\u6807\u3002 \u8fd9\u91cc \u63cf\u8ff0\u4e86\u66f4\u591a\u66f4\u6e05\u6d01\u7684\u914d\u7f6e\u3002 4.9 \u914d\u989d Kafka \u96c6\u7fa4\u80fd\u591f\u5bf9\u8bf7\u6c42\u5f3a\u5236\u5b9e\u65bd\u914d\u989d\uff0c\u4ee5\u63a7\u5236\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4ee3\u7406\u8d44\u6e90\u3002Kafka \u4ee3\u7406\u53ef\u4ee5\u4e3a\u5171\u4eab\u914d\u989d\u7684\u6bcf\u7ec4\u5ba2\u6237\u7aef\u5f3a\u5236\u6267\u884c\u4e24\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\u914d\u989d\uff1a \u7f51\u7edc\u5e26\u5bbd\u914d\u989d\u5b9a\u4e49\u5b57\u8282\u7387\u9608\u503c\uff08\u81ea 0.9 \u8d77\uff09 \u8bf7\u6c42\u7387\u914d\u989d\u5c06 CPU \u5229\u7528\u7387\u9608\u503c\u5b9a\u4e49\u4e3a\u7f51\u7edc\u548c I/O \u7ebf\u7a0b\u7684\u767e\u5206\u6bd4\uff08\u81ea 0.11 \u8d77\uff09 \u4e3a\u4ec0\u4e48\u9700\u8981\u914d\u989d \uff1f \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6709\u53ef\u80fd\u4ea7\u751f/\u6d88\u8017\u975e\u5e38\u5927\u91cf\u7684\u6570\u636e\u6216\u4ee5\u975e\u5e38\u9ad8\u7684\u901f\u7387\u751f\u6210\u8bf7\u6c42\uff0c\u4ece\u800c\u5784\u65ad\u4ee3\u7406\u8d44\u6e90\uff0c\u5bfc\u81f4\u7f51\u7edc\u9971\u548c\uff0c\u5e76\u4e14\u901a\u5e38\u4f1a DOS \u5176\u4ed6\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u672c\u8eab\u3002\u62e5\u6709\u914d\u989d\u53ef\u4ee5\u9632\u6b62\u8fd9\u4e9b\u95ee\u9898\uff0c\u5e76\u4e14\u5728\u5927\u578b\u591a\u79df\u6237\u96c6\u7fa4\u4e2d\u5c24\u4e3a\u91cd\u8981\uff0c\u5176\u4e2d\u4e00\u5c0f\u90e8\u5206\u884c\u4e3a\u4e0d\u826f\u7684\u5ba2\u6237\u7aef\u53ef\u80fd\u4f1a\u964d\u4f4e\u884c\u4e3a\u826f\u597d\u5ba2\u6237\u7aef\u7684\u7528\u6237\u4f53\u9a8c\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5f53\u5c06 Kafka \u4f5c\u4e3a\u670d\u52a1\u8fd0\u884c\u65f6\uff0c\u8fd9\u751a\u81f3\u53ef\u4ee5\u6839\u636e\u5546\u5b9a\u7684\u5408\u540c\u5f3a\u5236\u5b9e\u65bd API \u9650\u5236\u3002 \u5ba2\u6237\u7fa4\u4f53 Kafka \u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u662f\u7528\u6237\u4e3b\u4f53\uff0c\u5b83\u4ee3\u8868\u5b89\u5168\u96c6\u7fa4\u4e2d\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u3002\u5728\u652f\u6301\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u7684\u5ba2\u6237\u7aef\u7684\u96c6\u7fa4\u4e2d\uff0c\u7528\u6237\u4e3b\u4f53\u662f\u4ee3\u7406\u4f7f\u7528\u53ef\u914d\u7f6e\u7684 PrincipalBuilder . Client-id \u662f\u5ba2\u6237\u7aef\u7684\u903b\u8f91\u5206\u7ec4\uff0c\u5177\u6709\u7531\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u9009\u62e9\u7684\u6709\u610f\u4e49\u7684\u540d\u79f0\u3002\u5143\u7ec4\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u5b9a\u4e49\u5171\u4eab\u7528\u6237\u4e3b\u4f53\u548c\u5ba2\u6237\u7aef ID \u7684\u5b89\u5168\u903b\u8f91\u5ba2\u6237\u7aef\u7ec4\u3002 \u914d\u989d\u53ef\u4ee5\u5e94\u7528\u4e8e\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ec4\u3002\u5bf9\u4e8e\u7ed9\u5b9a\u8fde\u63a5\uff0c\u5c06\u5e94\u7528\u4e0e\u8be5\u8fde\u63a5\u5339\u914d\u7684\u6700\u5177\u4f53\u7684\u914d\u989d\u3002\u914d\u989d\u7ec4\u7684\u6240\u6709\u8fde\u63a5\u5171\u4eab\u4e3a\u8be5\u7ec4\u914d\u7f6e\u7684\u914d\u989d\u3002\u4f8b\u5982\uff0c\u5982\u679c (user=\"test-user\", client-id=\"test-client\") \u7684\u751f\u4ea7\u914d\u989d\u4e3a 10MB/\u79d2\uff0c\u5219\u8be5\u914d\u989d\u5c06\u5728\u7528\u6237\u201ctest-user\u201d\u7684\u6240\u6709\u751f\u4ea7\u8005\u5b9e\u4f8b\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u5171\u4eabid\u201c\u6d4b\u8bd5\u5ba2\u6237\u7aef\u201d\u3002 \u914d\u989d\u914d\u7f6e \u53ef\u4ee5\u4e3a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u548c\u5ba2\u6237\u7aef ID \u7ec4\u5b9a\u4e49\u914d\u989d\u914d\u7f6e\u3002\u53ef\u4ee5\u5728\u9700\u8981\u66f4\u9ad8\uff08\u751a\u81f3\u66f4\u4f4e\uff09\u914d\u989d\u7684\u4efb\u4f55\u914d\u989d\u7ea7\u522b\u8986\u76d6\u9ed8\u8ba4\u914d\u989d\u3002\u8be5\u673a\u5236\u7c7b\u4f3c\u4e8e\u6bcf\u4e2a\u4e3b\u9898\u7684\u65e5\u5fd7\u914d\u7f6e\u8986\u76d6\u3002\u7528\u6237\u548c\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u914d\u989d\u8986\u76d6\u5199\u5165\u5230 ZooKeeper \u7684 /config/users \u4e0b\uff0c\u5ba2\u6237\u7aef ID \u914d\u989d\u8986\u76d6\u5199\u5165\u5230 /config/clients \u4e0b\u3002\u6240\u6709\u7ecf\u7eaa\u5546\u90fd\u4f1a\u8bfb\u53d6\u8fd9\u4e9b\u8986\u76d6\u5e76\u7acb\u5373\u751f\u6548\u3002\u8fd9\u4f7f\u6211\u4eec\u53ef\u4ee5\u66f4\u6539\u914d\u989d\uff0c\u800c\u65e0\u9700\u6eda\u52a8\u91cd\u65b0\u542f\u52a8\u6574\u4e2a\u96c6\u7fa4\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 \u6b64\u5904 \u3002\u6bcf\u4e2a\u7ec4\u7684\u9ed8\u8ba4\u914d\u989d\u4e5f\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u673a\u5236\u52a8\u6001\u66f4\u65b0\u3002 \u914d\u989d\u914d\u7f6e\u7684\u4f18\u5148\u987a\u5e8f\u662f\uff1a /config/users/ /clients/ /config/users/ /clients/ /config/users/ /config/users/ /clients/ /config/users/ /clients/ /config/users/ /config/clients/ /config/clients/ \u7f51\u7edc\u5e26\u5bbd\u914d\u989d \u7f51\u7edc\u5e26\u5bbd\u914d\u989d\u5b9a\u4e49\u4e3a\u5171\u4eab\u914d\u989d\u7684\u6bcf\u7ec4\u5ba2\u6237\u7aef\u7684\u5b57\u8282\u7387\u9608\u503c\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u552f\u4e00\u7684\u5ba2\u6237\u7aef\u7ec4\u90fd\u4f1a\u6536\u5230\u96c6\u7fa4\u914d\u7f6e\u7684\u56fa\u5b9a\u914d\u989d\uff08\u4ee5\u5b57\u8282/\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u8be5\u914d\u989d\u662f\u6309\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u5b9a\u4e49\u7684\u3002\u5728\u5ba2\u6237\u7aef\u53d7\u5230\u9650\u5236\u4e4b\u524d\uff0c\u6bcf\u7ec4\u5ba2\u6237\u7aef\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u53d1\u5e03/\u83b7\u53d6\u6700\u5927 X \u5b57\u8282/\u79d2\u3002 \u8bf7\u6c42\u901f\u7387\u914d\u989d \u8bf7\u6c42\u901f\u7387\u914d\u989d\u5b9a\u4e49\u4e3a\u5ba2\u6237\u7aef\u5728\u914d\u989d\u7a97\u53e3\u5185\u53ef\u4ee5\u5229\u7528\u6bcf\u4e2a\u4ee3\u7406\u7684\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f I/O \u7ebf\u7a0b\u548c\u7f51\u7edc\u7ebf\u7a0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002n%\u7684\u914d\u989d\u8868\u793a \u4e00\u4e2a\u7ebf\u7a0b\u7684n%\uff0c\u56e0\u6b64\u914d\u989d\u8d85\u51fa\u4e86((num.io.threads + num.network.threads) * 100)%\u7684\u603b\u5bb9\u91cf\u3002\u6bcf\u7ec4\u5ba2\u6237\u6700\u591a\u53ef\u4ee5\u4f7f\u7528n%\u7684\u603b\u767e\u5206\u6bd4\u5728\u914d\u989d\u7a97\u53e3\u4e2d\u7684\u6240\u6709 I/O \u548c\u7f51\u7edc\u7ebf\u7a0b\u53d7\u5230\u9650\u5236\u4e4b\u524d\u3002\u7531\u4e8e\u5206\u914d\u7ed9 I/O \u548c\u7f51\u7edc\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u6570\u901a\u5e38\u57fa\u4e8e\u4ee3\u7406\u4e3b\u673a\u4e0a\u53ef\u7528\u7684\u6838\u5fc3\u6570\uff0c\u56e0\u6b64\u8bf7\u6c42\u7387\u914d\u989d\u8868\u793a\u5171\u4eab\u914d\u989d\u7684\u6bcf\u7ec4\u5ba2\u6237\u7aef\u53ef\u80fd\u4f7f\u7528\u7684 CPU \u603b\u767e\u5206\u6bd4\u3002 \u6267\u884c \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u552f\u4e00\u7684\u5ba2\u6237\u7aef\u7ec4\u90fd\u4f1a\u6536\u5230\u96c6\u7fa4\u914d\u7f6e\u7684\u56fa\u5b9a\u914d\u989d\u3002\u8be5\u914d\u989d\u662f\u6309\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u5b9a\u4e49\u7684\u3002\u5728\u53d7\u5230\u9650\u5236\u4e4b\u524d\uff0c\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u4f7f\u7528\u6bcf\u4e2a\u4ee3\u7406\u7684\u6b64\u914d\u989d\u3002\u6211\u4eec\u8ba4\u4e3a\u4e3a\u6bcf\u4e2a\u4ee3\u7406\u5b9a\u4e49\u8fd9\u4e9b\u914d\u989d\u6bd4\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u62e5\u6709\u56fa\u5b9a\u7684\u96c6\u7fa4\u5bbd\u5e26\u5bbd\u8981\u597d\u5f97\u591a\uff0c\u56e0\u4e3a\u8fd9\u9700\u8981\u4e00\u79cd\u5728\u6240\u6709\u4ee3\u7406\u4e4b\u95f4\u5171\u4eab\u5ba2\u6237\u7aef\u914d\u989d\u4f7f\u7528\u60c5\u51b5\u7684\u673a\u5236\u3002\u8fd9\u53ef\u80fd\u6bd4\u914d\u989d\u5b9e\u65bd\u672c\u8eab\u66f4\u96be\uff01 \u5f53\u7ecf\u7eaa\u5546\u68c0\u6d4b\u5230\u914d\u989d\u8fdd\u89c4\u65f6\u5982\u4f55\u53cd\u5e94\uff1f\u5728\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u4e2d\uff0cbroker\u9996\u5148\u8ba1\u7b97\u4f7f\u8fdd\u89c4\u5ba2\u6237\u7aef\u4f4e\u4e8e\u5176\u914d\u989d\u6240\u9700\u7684\u5ef6\u8fdf\u91cf\uff0c\u5e76\u7acb\u5373\u8fd4\u56de\u5305\u542b\u5ef6\u8fdf\u7684\u54cd\u5e94\u3002\u5982\u679c\u662f\u83b7\u53d6\u8bf7\u6c42\uff0c\u54cd\u5e94\u5c06\u4e0d\u5305\u542b\u4efb\u4f55\u6570\u636e\u3002\u7136\u540e\uff0c\u4ee3\u7406\u5c06\u4e0e\u5ba2\u6237\u7aef\u7684\u901a\u9053\u9759\u97f3\uff0c\u4e0d\u518d\u5904\u7406\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u76f4\u5230\u5ef6\u8fdf\u7ed3\u675f\u3002\u5728\u6536\u5230\u5ef6\u8fdf\u65f6\u95f4\u975e\u96f6\u7684\u54cd\u5e94\u540e\uff0cKafka \u5ba2\u6237\u7aef\u4e5f\u5c06\u5728\u5ef6\u8fdf\u671f\u95f4\u907f\u514d\u5411\u4ee3\u7406\u53d1\u9001\u8fdb\u4e00\u6b65\u7684\u8bf7\u6c42\u3002\u56e0\u6b64\uff0c\u6765\u81ea\u53d7\u9650\u5236\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u4f1a\u88ab\u53cc\u65b9\u6709\u6548\u5730\u963b\u6b62\u3002\u5373\u4f7f\u4f7f\u7528\u4e0d\u5c0a\u91cd\u4ee3\u7406\u5ef6\u8fdf\u54cd\u5e94\u7684\u65e7\u5ba2\u6237\u7aef\u5b9e\u73b0\uff0c\u4ee3\u7406\u901a\u8fc7\u9759\u97f3\u5176\u5957\u63a5\u5b57\u901a\u9053\u65bd\u52a0\u7684\u80cc\u538b\u4ecd\u7136\u53ef\u4ee5\u5904\u7406\u884c\u4e3a\u4e0d\u826f\u7684\u5ba2\u6237\u7aef\u7684\u9650\u5236\u3002\u90a3\u4e9b\u5411\u53d7\u9650\u901a\u9053\u53d1\u9001\u8fdb\u4e00\u6b65\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u53ea\u6709\u5728\u5ef6\u8fdf\u7ed3\u675f\u540e\u624d\u4f1a\u6536\u5230\u54cd\u5e94\u3002 \u5b57\u8282\u7387\u548c\u7ebf\u7a0b\u5229\u7528\u7387\u662f\u5728\u591a\u4e2a\u5c0f\u7a97\u53e3\uff08\u4f8b\u5982 30 \u4e2a\u7a97\u53e3\uff0c\u6bcf\u4e2a\u7a97\u53e3 1 \u79d2\uff09\u4e0a\u6d4b\u91cf\u7684\uff0c\u4ee5\u4fbf\u5feb\u901f\u68c0\u6d4b\u548c\u7ea0\u6b63\u914d\u989d\u8fdd\u89c4\u3002\u901a\u5e38\uff0c\u5177\u6709\u8f83\u5927\u7684\u6d4b\u91cf\u7a97\u53e3\uff08\u4f8b\u5982\uff0c10 \u4e2a\u7a97\u53e3\uff0c\u6bcf\u4e2a\u7a97\u53e3 30 \u79d2\uff09\u4f1a\u5bfc\u81f4\u5927\u91cf\u6d41\u91cf\u7a81\u53d1\uff0c\u7136\u540e\u662f\u8f83\u957f\u7684\u5ef6\u8fdf\uff0c\u8fd9\u5bf9\u4e8e\u7528\u6237\u4f53\u9a8c\u800c\u8a00\u5e76\u4e0d\u662f\u5f88\u597d\u3002","title":"4. \u8bbe\u8ba1"},{"location":"4/#4","text":"","title":"4. \u8bbe\u8ba1"},{"location":"4/#41","text":"\u6211\u4eec\u5c06 Kafka \u8bbe\u8ba1\u4e3a\u80fd\u591f\u5145\u5f53\u7edf\u4e00\u5e73\u53f0\u6765\u5904\u7406\u5927\u516c\u53f8\u53ef\u80fd\u62e5\u6709\u7684 \u6240\u6709\u5b9e\u65f6\u6570\u636e\u6e90\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u8003\u8651\u76f8\u5f53\u5e7f\u6cdb\u7684\u7528\u4f8b\u3002 \u5b83\u5fc5\u987b\u5177\u6709\u9ad8\u541e\u5410\u91cf\u624d\u80fd\u652f\u6301\u5927\u5bb9\u91cf\u4e8b\u4ef6\u6d41\uff0c\u4f8b\u5982\u5b9e\u65f6\u65e5\u5fd7\u805a\u5408\u3002 \u5b83\u9700\u8981\u59a5\u5584\u5904\u7406\u5927\u91cf\u79ef\u538b\u6570\u636e\uff0c\u4ee5\u4fbf\u80fd\u591f\u652f\u6301\u79bb\u7ebf\u7cfb\u7edf\u7684\u5b9a\u671f\u6570\u636e\u52a0\u8f7d\u3002 \u8fd9\u8fd8\u610f\u5473\u7740\u7cfb\u7edf\u5fc5\u987b\u5904\u7406\u4f4e\u5ef6\u8fdf\u4ea4\u4ed8\uff0c\u4ee5\u5904\u7406\u66f4\u4f20\u7edf\u7684\u6d88\u606f\u4f20\u9012\u7528\u4f8b\u3002 \u6211\u4eec\u5e0c\u671b\u652f\u6301\u8fd9\u4e9b\u63d0\u8981\u7684\u5206\u533a\u3001\u5206\u5e03\u5f0f\u3001\u5b9e\u65f6\u5904\u7406\uff0c\u4ee5\u521b\u5efa\u65b0\u7684\u6d3e\u751f\u63d0\u8981\u3002\u8fd9\u6fc0\u53d1\u4e86\u6211\u4eec\u7684\u5206\u533a\u548c\u6d88\u8d39\u8005\u6a21\u578b\u3002 \u6700\u540e\uff0c\u5728\u5c06\u6d41\u8f93\u5165\u5176\u4ed6\u6570\u636e\u7cfb\u7edf\u8fdb\u884c\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u77e5\u9053\u7cfb\u7edf\u5fc5\u987b\u80fd\u591f\u5728\u51fa\u73b0\u673a\u5668\u6545\u969c\u65f6\u4fdd\u8bc1\u5bb9\u9519\u3002 \u652f\u6301\u8fd9\u4e9b\u7528\u9014\u4f7f\u6211\u4eec\u8bbe\u8ba1\u51fa\u5177\u6709\u8bb8\u591a\u72ec\u7279\u5143\u7d20\u7684\u8bbe\u8ba1\uff0c\u4e0e\u4f20\u7edf\u7684\u6d88\u606f\u7cfb\u7edf\u76f8\u6bd4\uff0c\u5b83\u66f4\u7c7b\u4f3c\u4e8e\u6570\u636e\u5e93\u65e5\u5fd7\u3002\u6211\u4eec\u5c06\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\u6982\u8ff0\u8bbe\u8ba1\u7684\u4e00\u4e9b\u5143\u7d20\u3002","title":"4.1 \u52a8\u673a"},{"location":"4/#42","text":"","title":"4.2 \u6301\u4e45\u5316"},{"location":"4/#_1","text":"Kafka \u4e25\u91cd\u4f9d\u8d56\u6587\u4ef6\u7cfb\u7edf\u6765\u5b58\u50a8\u548c\u7f13\u5b58\u6d88\u606f\u3002\u4eba\u4eec\u666e\u904d\u8ba4\u4e3a\u201c\u78c1\u76d8\u901f\u5ea6\u5f88\u6162\u201d\uff0c\u8fd9\u4f7f\u4eba\u4eec\u6000\u7591\u6301\u4e45\u7ed3\u6784\u80fd\u5426\u63d0\u4f9b\u6709\u7ade\u4e89\u529b\u7684\u6027\u80fd\u3002\u4e8b\u5b9e\u4e0a\uff0c\u78c1\u76d8\u6bd4\u4eba\u4eec\u9884\u671f\u7684\u8981\u6162\u5f97\u591a\uff0c\u4e5f\u8981\u5feb\u5f97\u591a\uff0c\u8fd9\u53d6\u51b3\u4e8e\u5b83\u4eec\u7684\u4f7f\u7528\u65b9\u5f0f\uff1b\u8bbe\u8ba1\u5f97\u5f53\u7684\u78c1\u76d8\u7ed3\u6784\u5f80\u5f80\u53ef\u4ee5\u548c\u7f51\u7edc\u4e00\u6837\u5feb\u3002 \u5173\u4e8e\u78c1\u76d8\u6027\u80fd\u7684\u5173\u952e\u4e8b\u5b9e\u662f\uff0c\u5728\u8fc7\u53bb\u5341\u5e74\u4e2d\uff0c\u786c\u76d8\u9a71\u52a8\u5668\u7684\u541e\u5410\u91cf\u4e0e\u78c1\u76d8\u5bfb\u9053\u7684\u5ef6\u8fdf\u4e00\u76f4\u5b58\u5728\u5dee\u5f02\u3002\u56e0\u6b64\uff0c\u5728\u5177\u6709\u516d\u4e2a 7200rpm SATA RAID-5 \u9635\u5217\u7684 JBOD \u914d\u7f6e\u4e0a\uff0c\u7ebf\u6027\u5199\u5165\u6027\u80fd\u7ea6\u4e3a 600MB/\u79d2\uff0c\u4f46\u968f\u673a\u5199\u5165\u6027\u80fd\u4ec5\u4e3a\u7ea6 100k/\u79d2\uff0c\u76f8\u5dee\u8d85\u8fc7 6000 \u500d\u3002\u8fd9\u4e9b\u7ebf\u6027\u8bfb\u53d6\u548c\u5199\u5165\u662f\u6240\u6709\u4f7f\u7528\u6a21\u5f0f\u4e2d\u6700\u53ef\u9884\u6d4b\u7684\uff0c\u5e76\u4e14\u7ecf\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684\u5927\u529b\u4f18\u5316\u3002\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u9884\u8bfb\u548c\u540e\u5199\u6280\u672f\uff0c\u4ee5\u5927\u5757\u500d\u6570\u9884\u53d6\u6570\u636e\uff0c\u5e76\u5c06\u8f83\u5c0f\u7684\u903b\u8f91\u5199\u5165\u5206\u7ec4\u4e3a\u8f83\u5927\u7684\u7269\u7406\u5199\u5165\u3002\u6709\u5173\u6b64\u95ee\u9898\u7684\u8fdb\u4e00\u6b65\u8ba8\u8bba\u53ef\u4ee5\u5728\u8fd9\u7bc7 ACM Queue \u6587\u7ae0 \u4e2d\u627e\u5230\uff1b\u4ed6\u4eec\u5b9e\u9645\u4e0a\u53d1\u73b0 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u987a\u5e8f\u78c1\u76d8\u8bbf\u95ee\u53ef\u80fd\u6bd4\u968f\u673a\u5185\u5b58\u8bbf\u95ee\u66f4\u5feb\uff01 \u4e3a\u4e86\u5f25\u8865\u8fd9\u79cd\u6027\u80fd\u5dee\u5f02\uff0c\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u8d8a\u6765\u8d8a\u79ef\u6781\u5730\u4f7f\u7528\u4e3b\u5185\u5b58\u8fdb\u884c\u78c1\u76d8\u7f13\u5b58\u3002\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5f88\u4e50\u610f\u5c06 \u6240\u6709 \u53ef\u7528\u5185\u5b58\u8f6c\u79fb\u5230\u78c1\u76d8\u7f13\u5b58\uff0c\u5f53\u5185\u5b58\u88ab\u56de\u6536\u65f6\uff0c\u6027\u80fd\u635f\u5931\u5f88\u5c0f\u3002\u6240\u6709\u7684\u78c1\u76d8\u8bfb\u5199\u90fd\u4f1a\u7ecf\u8fc7\u8fd9\u4e2a\u7edf\u4e00\u7684\u7f13\u5b58\u3002\u5982\u679c\u4e0d\u4f7f\u7528\u76f4\u63a5 I/O\uff0c\u5219\u65e0\u6cd5\u8f7b\u677e\u5173\u95ed\u6b64\u529f\u80fd\uff0c\u56e0\u6b64\u5373\u4f7f\u8fdb\u7a0b\u7ef4\u62a4\u6570\u636e\u7684\u8fdb\u7a0b\u5185\u7f13\u5b58\uff0c\u8be5\u6570\u636e\u4e5f\u53ef\u80fd\u4f1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u9875\u9762\u7f13\u5b58\u4e2d\u91cd\u590d\uff0c\u4ece\u800c\u6709\u6548\u5730\u5c06\u6240\u6709\u5185\u5bb9\u5b58\u50a8\u4e24\u6b21\u3002 \u6b64\u5916\uff0c\u6211\u4eec\u662f\u5728 JVM \u4e4b\u4e0a\u6784\u5efa\u7684\uff0c\u4efb\u4f55\u82b1\u65f6\u95f4\u7814\u7a76 Java \u5185\u5b58\u4f7f\u7528\u7684\u4eba\u90fd\u77e5\u9053\u4e24\u4ef6\u4e8b\uff1a \u5bf9\u8c61\u7684\u5185\u5b58\u5f00\u9500\u975e\u5e38\u9ad8\uff0c\u901a\u5e38\u4f1a\u4f7f\u5b58\u50a8\u7684\u6570\u636e\u5927\u5c0f\u589e\u52a0\u4e00\u500d\uff08\u6216\u66f4\u7cdf\uff09\u3002 \u968f\u7740\u5806\u5185\u6570\u636e\u7684\u589e\u52a0\uff0cJava \u5783\u573e\u6536\u96c6\u53d8\u5f97\u8d8a\u6765\u8d8a\u7e41\u7410\u548c\u7f13\u6162\u3002 \u7531\u4e8e\u8fd9\u4e9b\u56e0\u7d20\uff0c\u4f7f\u7528\u6587\u4ef6\u7cfb\u7edf\u5e76\u4f9d\u8d56\u9875\u9762\u7f13\u5b58\u4f18\u4e8e\u7ef4\u62a4\u5185\u5b58\u4e2d\u7f13\u5b58\u6216\u5176\u4ed6\u7ed3\u6784 - \u6211\u4eec\u901a\u8fc7\u81ea\u52a8\u8bbf\u95ee\u6240\u6709\u7a7a\u95f2\u5185\u5b58\u81f3\u5c11\u4f7f\u53ef\u7528\u7f13\u5b58\u52a0\u500d\uff0c\u5e76\u4e14\u53ef\u80fd\u901a\u8fc7\u5b58\u50a8\u7d27\u51d1\u7684\u5185\u5bb9\u518d\u6b21\u52a0\u500d\u5b57\u8282\u7ed3\u6784\u800c\u4e0d\u662f\u5355\u4e2a\u5bf9\u8c61\u3002\u8fd9\u6837\u505a\u5c06\u5728 32GB \u673a\u5668\u4e0a\u4ea7\u751f\u9ad8\u8fbe 28-30GB \u7684\u7f13\u5b58\uff0c\u800c\u4e0d\u4f1a\u9020\u6210 GC \u635f\u5931\u3002\u6b64\u5916\uff0c\u5373\u4f7f\u670d\u52a1\u91cd\u65b0\u542f\u52a8\uff0c\u6b64\u7f13\u5b58\u4e5f\u5c06\u4fdd\u6301\u70ed\u72b6\u6001\uff0c\u800c\u8fdb\u7a0b\u5185\u7f13\u5b58\u5c06\u9700\u8981\u5728\u5185\u5b58\u4e2d\u91cd\u5efa\uff08\u5bf9\u4e8e 10GB \u7f13\u5b58\u53ef\u80fd\u9700\u8981 10 \u5206\u949f\uff09\uff0c\u5426\u5219\u5b83\u5c06\u9700\u8981\u4ee5\u5b8c\u5168\u51b7\u7684\u7f13\u5b58\u542f\u52a8\uff08\u8fd9\u53ef\u80fd\u610f\u5473\u7740\u7cdf\u7cd5\u7684\u521d\u59cb\u6027\u80fd\uff09\u3002\u8fd9\u4e5f\u6781\u5927\u5730\u7b80\u5316\u4e86\u4ee3\u7801\uff0c\u56e0\u4e3a\u7528\u4e8e\u7ef4\u62a4\u7f13\u5b58\u548c\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u4e00\u81f4\u6027\u7684\u6240\u6709\u903b\u8f91\u73b0\u5728\u90fd\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u8fd9\u5f80\u5f80\u6bd4\u4e00\u6b21\u6027\u7684\u8fc7\u7a0b\u4e2d\u5c1d\u8bd5\u66f4\u6709\u6548\u3001\u66f4\u6b63\u786e\u3002\u5982\u679c\u60a8\u7684\u78c1\u76d8\u4f7f\u7528\u6709\u5229\u4e8e\u7ebf\u6027\u8bfb\u53d6\uff0c\u90a3\u4e48\u9884\u8bfb\u5b9e\u9645\u4e0a\u662f\u5728\u6bcf\u6b21\u78c1\u76d8\u8bfb\u53d6\u65f6\u4f7f\u7528\u6709\u7528\u7684\u6570\u636e\u9884\u5148\u586b\u5145\u6b64\u7f13\u5b58\u3002 \u8fd9\u8868\u660e\u4e86\u4e00\u79cd\u975e\u5e38\u7b80\u5355\u7684\u8bbe\u8ba1\uff1a\u6211\u4eec\u4e0d\u662f\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u5c3d\u53ef\u80fd\u591a\u7684\u5185\u5bb9\uff0c\u800c\u662f\u5728\u7a7a\u95f4\u4e0d\u8db3\u65f6\u5c06\u5176\u5168\u90e8\u5237\u65b0\u5230\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c\u662f\u5c06\u5176\u53cd\u8f6c\u3002\u6240\u6709\u6570\u636e\u90fd\u4f1a\u7acb\u5373\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6301\u4e45\u65e5\u5fd7\uff0c\u800c\u4e0d\u5fc5\u5237\u65b0\u5230\u78c1\u76d8\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4ec5\u4ec5\u610f\u5473\u7740\u5b83\u88ab\u8f6c\u79fb\u5230\u5185\u6838\u7684\u9875\u9762\u7f13\u5b58\u4e2d\u3002 \u8fd9\u79cd\u4ee5\u9875\u9762\u7f13\u5b58\u4e3a\u4e2d\u5fc3\u7684\u8bbe\u8ba1\u98ce\u683c\u5728\u4e00\u7bc7\u5173\u4e8e Varnish \u8bbe\u8ba1\u7684 \u6587\u7ae0 \u4e2d\u8fdb\u884c\u4e86\u63cf\u8ff0\uff08\u540c\u65f6\u8fd8\u5e26\u6709\u4e00\u5b9a\u7a0b\u5ea6\u7684\u50b2\u6162\uff09\u3002","title":"\u4e0d\u8981\u5bb3\u6015\u6587\u4ef6\u7cfb\u7edf\uff01"},{"location":"4/#_2","text":"\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684\u6301\u4e45\u6570\u636e\u7ed3\u6784\u901a\u5e38\u662f\u6bcf\u4e2a\u6d88\u8d39\u8005\u7684\u961f\u5217\uff0c\u5177\u6709\u5173\u8054\u7684 BTree \u6216\u5176\u4ed6\u901a\u7528\u968f\u673a\u8bbf\u95ee\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u7ef4\u62a4\u6709\u5173\u6d88\u606f\u7684\u5143\u6570\u636e\u3002BTree \u662f\u53ef\u7528\u7684\u6700\u901a\u7528\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u4e14\u53ef\u4ee5\u652f\u6301\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u7684\u5404\u79cd\u4e8b\u52a1\u6027\u548c\u975e\u4e8b\u52a1\u6027\u8bed\u4e49\u3002\u4e0d\u8fc7\uff0c\u5b83\u4eec\u7684\u6210\u672c\u786e\u5b9e\u76f8\u5f53\u9ad8\uff1aBtree \u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(log N)\u3002\u901a\u5e38 O(log N) \u88ab\u8ba4\u4e3a\u672c\u8d28\u4e0a\u7b49\u4e8e\u5e38\u6570\u65f6\u95f4\uff0c\u4f46\u5bf9\u4e8e\u78c1\u76d8\u64cd\u4f5c\u6765\u8bf4\u5e76\u975e\u5982\u6b64\u3002\u78c1\u76d8\u5bfb\u9053\u4e00\u6b21\u5f39\u51fa\u7684\u65f6\u95f4\u4e3a 10 \u6beb\u79d2\uff0c\u5e76\u4e14\u6bcf\u4e2a\u78c1\u76d8\u4e00\u6b21\u53ea\u80fd\u6267\u884c\u4e00\u6b21\u5bfb\u9053\uff0c\u56e0\u6b64\u5e76\u884c\u6027\u53d7\u5230\u9650\u5236\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u5c11\u91cf\u7684\u78c1\u76d8\u67e5\u627e\u4e5f\u4f1a\u5bfc\u81f4\u975e\u5e38\u9ad8\u7684\u5f00\u9500\u3002\u7531\u4e8e\u5b58\u50a8\u7cfb\u7edf\u5c06\u975e\u5e38\u5feb\u7684\u7f13\u5b58\u64cd\u4f5c\u4e0e\u975e\u5e38\u6162\u7684\u7269\u7406\u78c1\u76d8\u64cd\u4f5c\u6df7\u5408\u5728\u4e00\u8d77\uff0c \u76f4\u89c2\u4e0a\uff0c\u6301\u4e45\u961f\u5217\u53ef\u4ee5\u57fa\u4e8e\u7b80\u5355\u7684\u8bfb\u53d6\u548c\u9644\u52a0\u5230\u6587\u4ef6\u6765\u6784\u5efa\uff0c\u5c31\u50cf\u65e5\u5fd7\u8bb0\u5f55\u89e3\u51b3\u65b9\u6848\u7684\u5e38\u89c1\u60c5\u51b5\u4e00\u6837\u3002\u8fd9\u79cd\u7ed3\u6784\u7684\u4f18\u70b9\u662f\u6240\u6709\u64cd\u4f5c\u90fd\u662f O(1) \u5e76\u4e14\u8bfb\u53d6\u4e0d\u4f1a\u963b\u585e\u5199\u5165\u6216\u5f7c\u6b64\u4e4b\u95f4\u3002\u8fd9\u5177\u6709\u660e\u663e\u7684\u6027\u80fd\u4f18\u52bf\uff0c\u56e0\u4e3a\u6027\u80fd\u4e0e\u6570\u636e\u5927\u5c0f\u5b8c\u5168\u89e3\u8026\u2014\u2014\u4e00\u53f0\u670d\u52a1\u5668\u73b0\u5728\u53ef\u4ee5\u5145\u5206\u5229\u7528\u8bb8\u591a\u5ec9\u4ef7\u3001\u4f4e\u8f6c\u901f\u7684 1+TB SATA \u9a71\u52a8\u5668\u3002\u5c3d\u7ba1\u5b83\u4eec\u7684\u5bfb\u9053\u6027\u80fd\u8f83\u5dee\uff0c\u4f46\u8fd9\u4e9b\u9a71\u52a8\u5668\u5bf9\u4e8e\u5927\u91cf\u8bfb\u53d6\u548c\u5199\u5165\u5177\u6709\u53ef\u63a5\u53d7\u7684\u6027\u80fd\uff0c\u5e76\u4e14\u4ef7\u683c\u4ec5\u4e3a\u5176 1/3\uff0c\u5bb9\u91cf\u4e3a 3 \u500d\u3002 \u53ef\u4ee5\u8bbf\u95ee\u51e0\u4e4e\u65e0\u9650\u7684\u78c1\u76d8\u7a7a\u95f4\u800c\u4e0d\u4f1a\u9020\u6210\u4efb\u4f55\u6027\u80fd\u635f\u5931\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e9b\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u901a\u5e38\u4e0d\u5177\u5907\u7684\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u5728 Kafka \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6d88\u606f\u4fdd\u7559\u76f8\u5bf9\u8f83\u957f\u7684\u65f6\u95f4\uff08\u4f8b\u5982\u4e00\u5468\uff09\uff0c\u800c\u4e0d\u662f\u5728\u6d88\u606f\u88ab\u6d88\u8d39\u540e\u7acb\u5373\u5c1d\u8bd5\u5220\u9664\u5b83\u4eec\u3002\u6b63\u5982\u6211\u4eec\u5c06\u8981\u63cf\u8ff0\u7684\uff0c\u8fd9\u4e3a\u6d88\u8d39\u8005\u5e26\u6765\u4e86\u5f88\u5927\u7684\u7075\u6d3b\u6027\u3002","title":"\u6052\u5b9a\u7684\u65f6\u95f4\u5c31\u8db3\u591f\u4e86"},{"location":"4/#43","text":"\u6211\u4eec\u5728\u6548\u7387\u65b9\u9762\u6295\u5165\u4e86\u5927\u91cf\u7cbe\u529b\u3002\u6211\u4eec\u7684\u4e3b\u8981\u7528\u4f8b\u4e4b\u4e00\u662f\u5904\u7406 Web \u6d3b\u52a8\u6570\u636e\uff0c\u8be5\u6570\u636e\u91cf\u975e\u5e38\u5927\uff1a\u6bcf\u4e2a\u9875\u9762\u89c6\u56fe\u53ef\u80fd\u4f1a\u751f\u6210\u6570\u5341\u6b21\u5199\u5165\u3002\u6b64\u5916\uff0c\u6211\u4eec\u5047\u8bbe\u53d1\u5e03\u7684\u6bcf\u6761\u6d88\u606f\u90fd\u88ab\u81f3\u5c11\u4e00\u4e2a\u6d88\u8d39\u8005\uff08\u901a\u5e38\u662f\u591a\u4e2a\uff09\u9605\u8bfb\uff0c\u56e0\u6b64\u6211\u4eec\u52aa\u529b\u4f7f\u6d88\u8d39\u5c3d\u53ef\u80fd\u4fbf\u5b9c\u3002 \u6839\u636e\u6784\u5efa\u548c\u8fd0\u884c\u8bb8\u591a\u7c7b\u4f3c\u7cfb\u7edf\u7684\u7ecf\u9a8c\uff0c\u6211\u4eec\u8fd8\u53d1\u73b0\uff0c\u6548\u7387\u662f\u6709\u6548\u591a\u79df\u6237\u8fd0\u8425\u7684\u5173\u952e\u3002\u5982\u679c\u4e0b\u6e38\u57fa\u7840\u8bbe\u65bd\u670d\u52a1\u5f88\u5bb9\u6613\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u91cf\u7684\u5fae\u5c0f\u53d8\u5316\u800c\u6210\u4e3a\u74f6\u9888\uff0c\u90a3\u4e48\u8fd9\u79cd\u5fae\u5c0f\u7684\u53d8\u5316\u901a\u5e38\u4f1a\u4ea7\u751f\u95ee\u9898\u3002\u901a\u8fc7\u975e\u5e38\u5feb\u7684\u901f\u5ea6\uff0c\u6211\u4eec\u6709\u52a9\u4e8e\u786e\u4fdd\u5e94\u7528\u7a0b\u5e8f\u5728\u8d1f\u8f7d\u4e0b\u5148\u4e8e\u57fa\u7840\u8bbe\u65bd\u53d1\u751f\u7ffb\u5012\u3002\u5f53\u5c1d\u8bd5\u5728\u96c6\u4e2d\u5f0f\u96c6\u7fa4\u4e0a\u8fd0\u884c\u652f\u6301\u6570\u5341\u6216\u6570\u767e\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u96c6\u4e2d\u5f0f\u670d\u52a1\u65f6\uff0c\u8fd9\u4e00\u70b9\u5c24\u5176\u91cd\u8981\uff0c\u56e0\u4e3a\u4f7f\u7528\u6a21\u5f0f\u7684\u53d8\u5316\u51e0\u4e4e\u6bcf\u5929\u90fd\u4f1a\u53d1\u751f\u3002 \u6211\u4eec\u5728\u4e0a\u4e00\u8282\u4e2d\u8ba8\u8bba\u4e86\u78c1\u76d8\u6548\u7387\u3002\u4e00\u65e6\u6d88\u9664\u4e86\u4e0d\u826f\u7684\u78c1\u76d8\u8bbf\u95ee\u6a21\u5f0f\uff0c\u6b64\u7c7b\u7cfb\u7edf\u6548\u7387\u4f4e\u4e0b\u7684\u5e38\u89c1\u539f\u56e0\u6709\u4e24\u4e2a\uff1a\u592a\u591a\u7684\u5c0f\u578b I/O \u64cd\u4f5c\u548c\u8fc7\u591a\u7684\u5b57\u8282\u590d\u5236\u3002 \u5c0f I/O \u95ee\u9898\u65e2\u53d1\u751f\u5728\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\uff0c\u4e5f\u53d1\u751f\u5728\u670d\u52a1\u5668\u81ea\u8eab\u7684\u6301\u4e45\u64cd\u4f5c\u4e2d\u3002 \u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u7684\u534f\u8bae\u662f\u56f4\u7ed5\u201c\u6d88\u606f\u96c6\u201d\u62bd\u8c61\u6784\u5efa\u7684\uff0c\u8be5\u62bd\u8c61\u81ea\u7136\u5730\u5c06\u6d88\u606f\u5206\u7ec4\u5728\u4e00\u8d77\u3002\u8fd9\u5141\u8bb8\u7f51\u7edc\u8bf7\u6c42\u5c06\u6d88\u606f\u5206\u7ec4\u5728\u4e00\u8d77\u5e76\u5206\u644a\u7f51\u7edc\u5f80\u8fd4\u7684\u5f00\u9500\uff0c\u800c\u4e0d\u662f\u4e00\u6b21\u53d1\u9001\u5355\u4e2a\u6d88\u606f\u3002\u670d\u52a1\u5668\u4f9d\u6b21\u5c06\u6d88\u606f\u5757\u4e00\u6b21\u6027\u8ffd\u52a0\u5230\u5176\u65e5\u5fd7\u4e2d\uff0c\u800c\u6d88\u8d39\u8005\u4e00\u6b21\u83b7\u53d6\u5927\u7684\u7ebf\u6027\u5757\u3002 \u8fd9\u4e2a\u7b80\u5355\u7684\u4f18\u5316\u4ea7\u751f\u4e86\u51e0\u4e2a\u6570\u91cf\u7ea7\u7684\u52a0\u901f\u3002\u6279\u5904\u7406\u4f1a\u5bfc\u81f4\u66f4\u5927\u7684\u7f51\u7edc\u6570\u636e\u5305\u3001\u66f4\u5927\u7684\u987a\u5e8f\u78c1\u76d8\u64cd\u4f5c\u3001\u8fde\u7eed\u7684\u5185\u5b58\u5757\u7b49\u7b49\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u5141\u8bb8 Kafka \u5c06\u968f\u673a\u6d88\u606f\u5199\u5165\u7684\u7a81\u53d1\u6d41\u8f6c\u6362\u4e3a\u6d41\u5411\u6d88\u8d39\u8005\u7684\u7ebf\u6027\u5199\u5165\u3002 \u53e6\u4e00\u4e2a\u4f4e\u6548\u4e4b\u5904\u5728\u4e8e\u5b57\u8282\u590d\u5236\u3002\u5728\u4f4e\u6d88\u606f\u901f\u7387\u4e0b\u8fd9\u4e0d\u662f\u95ee\u9898\uff0c\u4f46\u5728\u8d1f\u8f7d\u4e0b\u5f71\u54cd\u5f88\u5927\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u7531\u751f\u4ea7\u8005\u3001\u4ee3\u7406\u548c\u6d88\u8d39\u8005\u5171\u4eab\u7684\u6807\u51c6\u5316\u4e8c\u8fdb\u5236\u6d88\u606f\u683c\u5f0f\uff08\u56e0\u6b64\u6570\u636e\u5757\u53ef\u4ee5\u5728\u5b83\u4eec\u4e4b\u95f4\u4f20\u8f93\u800c\u65e0\u9700\u4fee\u6539\uff09\u3002 \u4ee3\u7406\u7ef4\u62a4\u7684\u6d88\u606f\u65e5\u5fd7\u672c\u8eab\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6\u76ee\u5f55\uff0c\u6bcf\u4e2a\u6587\u4ef6\u90fd\u7531\u4e00\u7cfb\u5217\u6d88\u606f\u96c6\u586b\u5145\uff0c\u8fd9\u4e9b\u6d88\u606f\u96c6\u5df2\u4ee5\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4f7f\u7528\u7684\u76f8\u540c\u683c\u5f0f\u5199\u5165\u78c1\u76d8\u3002\u7ef4\u62a4\u8fd9\u79cd\u901a\u7528\u683c\u5f0f\u53ef\u4ee5\u4f18\u5316\u6700\u91cd\u8981\u7684\u64cd\u4f5c\uff1a\u6301\u4e45\u65e5\u5fd7\u5757\u7684\u7f51\u7edc\u4f20\u8f93\u3002\u73b0\u4ee3 UNIX \u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u4f18\u5316\u7684\u4ee3\u7801\u8def\u5f84\uff0c\u7528\u4e8e\u5c06\u6570\u636e\u4ece\u9875\u9762\u7f13\u5b58\u4f20\u8f93\u5230\u5957\u63a5\u5b57\uff1b\u5728 Linux \u4e2d\uff0c\u8fd9\u662f\u901a\u8fc7 sendfile \u7cfb\u7edf\u8c03\u7528 \u5b8c\u6210\u7684\u3002 \u8981\u4e86\u89e3 sendfile \u7684\u5f71\u54cd\uff0c\u4e86\u89e3\u4ece\u6587\u4ef6\u5230\u5957\u63a5\u5b57\u4f20\u8f93\u6570\u636e\u7684\u901a\u7528\u6570\u636e\u8def\u5f84\u975e\u5e38\u91cd\u8981\uff1a \u64cd\u4f5c\u7cfb\u7edf\u5c06\u6570\u636e\u4ece\u78c1\u76d8\u8bfb\u53d6\u5230\u5185\u6838\u7a7a\u95f4\u7684pagecache\u4e2d \u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u4ece\u5185\u6838\u7a7a\u95f4\u8bfb\u53d6\u5230\u7528\u6237\u7a7a\u95f4\u7f13\u51b2\u533a \u5e94\u7528\u7a0b\u5e8f\u5c06\u6570\u636e\u5199\u56de\u5230\u5185\u6838\u7a7a\u95f4\u7684\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u4e2d \u64cd\u4f5c\u7cfb\u7edf\u5c06\u6570\u636e\u4ece\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u590d\u5236\u5230 NIC \u7f13\u51b2\u533a\uff0c\u5e76\u5728\u5176\u4e2d\u901a\u8fc7\u7f51\u7edc\u53d1\u9001 \u8fd9\u663e\u7136\u6548\u7387\u4f4e\u4e0b\uff0c\u6709\u56db\u4e2a\u526f\u672c\u548c\u4e24\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002\u4f7f\u7528 sendfile\uff0c\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u5c06\u6570\u636e\u4ece\u9875\u9762\u7f13\u5b58\u76f4\u63a5\u53d1\u9001\u5230\u7f51\u7edc\uff0c\u4ece\u800c\u907f\u514d\u8fd9\u79cd\u91cd\u65b0\u590d\u5236\u3002\u6240\u4ee5\u5728\u8fd9\u4e2a\u4f18\u5316\u8def\u5f84\u4e2d\uff0c\u53ea\u9700\u8981\u6700\u7ec8\u62f7\u8d1d\u5230NIC\u7f13\u51b2\u533a\u5373\u53ef\u3002 \u6211\u4eec\u671f\u671b\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u4e00\u4e2a\u4e3b\u9898\u7684\u591a\u4e2a\u6d88\u8d39\u8005\u3002\u4f7f\u7528\u4e0a\u9762\u7684\u96f6\u590d\u5236\u4f18\u5316\uff0c\u6570\u636e\u88ab\u590d\u5236\u5230\u9875\u9762\u7f13\u5b58\u4e00\u6b21\uff0c\u5e76\u5728\u6bcf\u6b21\u4f7f\u7528\u65f6\u91cd\u590d\u4f7f\u7528\uff0c\u800c\u4e0d\u662f\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u5e76\u5728\u6bcf\u6b21\u8bfb\u53d6\u65f6\u590d\u5236\u5230\u7528\u6237\u7a7a\u95f4\u3002\u8fd9\u5141\u8bb8\u4ee5\u63a5\u8fd1\u7f51\u7edc\u8fde\u63a5\u9650\u5236\u7684\u901f\u7387\u4f7f\u7528\u6d88\u606f\u3002 pagecache \u548c sendfile \u7684\u8fd9\u79cd\u7ec4\u5408\u610f\u5473\u7740\uff0c\u5728\u6d88\u8d39\u8005\u5927\u591a\u9677\u5165\u56f0\u5883\u7684 Kafka \u96c6\u7fa4\u4e0a\uff0c\u60a8\u5c06\u770b\u4e0d\u5230\u78c1\u76d8\u4e0a\u7684\u4efb\u4f55\u8bfb\u53d6\u6d3b\u52a8\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c06\u5b8c\u5168\u4ece\u7f13\u5b58\u63d0\u4f9b\u6570\u636e\u3002 SSL_sendfile TLS/SSL \u5e93\u5728\u7528\u6237\u7a7a\u95f4\u8fd0\u884c\uff08 Kafka \u76ee\u524d\u4e0d\u652f\u6301 \u5185\u6838\uff09\u3002\u7531\u4e8e\u6b64\u9650\u5236\uff0c sendfile \u542f\u7528 SSL \u65f6\u4e0d\u4f7f\u7528\u3002\u8981\u542f\u7528 SSL \u914d\u7f6e\uff0c\u8bf7\u53c2\u9605 security.protocol \u548c security.inter.broker.protocol \u6709\u5173 Java \u4e2d\u7684 sendfile \u548c\u96f6\u62f7\u8d1d\u652f\u6301\u7684\u66f4\u591a\u80cc\u666f\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u8fd9\u7bc7 \u6587\u7ae0 \u3002","title":"4.3 \u6548\u7387"},{"location":"4/#_3","text":"\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u74f6\u9888\u5b9e\u9645\u4e0a\u4e0d\u662f CPU \u6216\u78c1\u76d8\uff0c\u800c\u662f\u7f51\u7edc\u5e26\u5bbd\u3002\u5bf9\u4e8e\u9700\u8981\u901a\u8fc7\u5e7f\u57df\u7f51\u5728\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u53d1\u9001\u6d88\u606f\u7684\u6570\u636e\u7ba1\u9053\u6765\u8bf4\u5c24\u5176\u5982\u6b64\u3002\u5f53\u7136\uff0c\u7528\u6237\u603b\u662f\u53ef\u4ee5\u4e00\u6b21\u538b\u7f29\u4e00\u4e2a\u6d88\u606f\uff0c\u800c\u4e0d\u9700\u8981 Kafka \u7684\u4efb\u4f55\u652f\u6301\uff0c\u4f46\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u538b\u7f29\u7387\u975e\u5e38\u5dee\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u5197\u4f59\u662f\u7531\u4e8e\u76f8\u540c\u7c7b\u578b\u7684\u6d88\u606f\u4e4b\u95f4\u7684\u91cd\u590d\u9020\u6210\u7684\uff08\u4f8b\u5982\uff0c JSON \u6216\u7f51\u7edc\u65e5\u5fd7\u4e2d\u7684\u7528\u6237\u4ee3\u7406\u6216\u5e38\u89c1\u5b57\u7b26\u4e32\u503c\uff09\u3002\u6709\u6548\u7684\u538b\u7f29\u9700\u8981\u5c06\u591a\u4e2a\u6d88\u606f\u538b\u7f29\u5728\u4e00\u8d77\uff0c\u800c\u4e0d\u662f\u5355\u72ec\u538b\u7f29\u6bcf\u4e2a\u6d88\u606f\u3002 Kafka \u901a\u8fc7\u9ad8\u6548\u7684\u6279\u5904\u7406\u683c\u5f0f\u6765\u652f\u6301\u8fd9\u4e00\u70b9\u3002\u4e00\u6279\u6d88\u606f\u53ef\u4ee5\u805a\u96c6\u5728\u4e00\u8d77\u538b\u7f29\u5e76\u4ee5\u8fd9\u79cd\u5f62\u5f0f\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002\u8fd9\u6279\u6d88\u606f\u5c06\u4ee5\u538b\u7f29\u5f62\u5f0f\u5199\u5165\uff0c\u5e76\u5728\u65e5\u5fd7\u4e2d\u4fdd\u6301\u538b\u7f29\u72b6\u6001\uff0c\u4ec5\u7531\u6d88\u8d39\u8005\u89e3\u538b\u7f29\u3002 Kafka \u652f\u6301 GZIP\u3001Snappy\u3001LZ4 \u548c ZStandard \u538b\u7f29\u534f\u8bae\u3002 \u6709\u5173\u538b\u7f29\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728\u6b64\u5904 \u627e\u5230\u3002","title":"\u7aef\u5230\u7aef\u6279\u91cf\u538b\u7f29"},{"location":"4/#44","text":"","title":"4.4 \u751f\u4ea7\u8005"},{"location":"4/#_4","text":"\u751f\u4ea7\u8005\u5c06\u6570\u636e\u76f4\u63a5\u53d1\u9001\u5230\u4f5c\u4e3a\u5206\u533a\u9886\u5bfc\u8005\u7684\u4ee3\u7406\uff0c\u800c\u65e0\u9700\u4efb\u4f55\u4e2d\u95f4\u8def\u7531\u5c42\u3002\u4e3a\u4e86\u5e2e\u52a9\u751f\u4ea7\u8005\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6240\u6709 Kafka \u8282\u70b9\u90fd\u53ef\u4ee5\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\u54cd\u5e94\u6709\u5173\u54ea\u4e9b\u670d\u52a1\u5668\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u4ee5\u53ca\u4e3b\u9898\u5206\u533a\u7684\u9886\u5bfc\u8005\u6240\u5728\u4f4d\u7f6e\u7684\u5143\u6570\u636e\u8bf7\u6c42\uff0c\u4ee5\u5141\u8bb8\u751f\u4ea7\u8005\u9002\u5f53\u5730\u5f15\u5bfc\u5176\u8bf7\u6c42\u3002 \u5ba2\u6237\u7aef\u63a7\u5236\u5c06\u6d88\u606f\u53d1\u5e03\u5230\u54ea\u4e2a\u5206\u533a\u3002\u8fd9\u53ef\u4ee5\u968f\u673a\u5b8c\u6210\uff0c\u5b9e\u73b0\u4e00\u79cd\u968f\u673a\u8d1f\u8f7d\u5e73\u8861\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u67d0\u79cd\u8bed\u4e49\u5206\u533a\u51fd\u6570\u6765\u5b8c\u6210\u3002\u6211\u4eec\u901a\u8fc7\u5141\u8bb8\u7528\u6237\u6307\u5b9a\u5206\u533a\u952e\u5e76\u4f7f\u7528\u5b83\u6765\u54c8\u5e0c\u5230\u5206\u533a\u6765\u516c\u5f00\u8bed\u4e49\u5206\u533a\u7684\u63a5\u53e3\uff08\u5982\u679c\u9700\u8981\uff0c\u8fd8\u6709\u4e00\u4e2a\u9009\u9879\u53ef\u4ee5\u8986\u76d6\u5206\u533a\u51fd\u6570\uff09\u3002\u4f8b\u5982\uff0c\u5982\u679c\u9009\u62e9\u7684\u952e\u662f\u7528\u6237 ID\uff0c\u5219\u7ed9\u5b9a\u7528\u6237\u7684\u6240\u6709\u6570\u636e\u90fd\u5c06\u53d1\u9001\u5230\u540c\u4e00\u5206\u533a\u3002\u8fd9\u53cd\u8fc7\u6765\u53c8\u5c06\u4f7f\u6d88\u8d39\u8005\u80fd\u591f\u5bf9\u5176\u6d88\u8d39\u505a\u51fa\u5c40\u90e8\u5047\u8bbe\u3002\u8fd9\u79cd\u5206\u533a\u65b9\u5f0f\u660e\u786e\u8bbe\u8ba1\u4e3a\u5141\u8bb8\u6d88\u8d39\u8005\u8fdb\u884c\u5c40\u90e8\u654f\u611f\u5904\u7406\u3002","title":"\u8d1f\u8f7d\u5747\u8861"},{"location":"4/#_5","text":"\u6279\u5904\u7406\u662f\u6548\u7387\u7684\u91cd\u8981\u9a71\u52a8\u56e0\u7d20\u4e4b\u4e00\uff0c\u4e3a\u4e86\u542f\u7528\u6279\u5904\u7406\uff0cKafka \u751f\u4ea7\u8005\u5c06\u5c1d\u8bd5\u5728\u5185\u5b58\u4e2d\u7d2f\u79ef\u6570\u636e\u5e76\u5728\u5355\u4e2a\u8bf7\u6c42\u4e2d\u53d1\u9001\u66f4\u5927\u7684\u6279\u6b21\u3002\u53ef\u4ee5\u5c06\u6279\u5904\u7406\u914d\u7f6e\u4e3a\u7d2f\u79ef\u4e0d\u8d85\u8fc7\u56fa\u5b9a\u6570\u91cf\u7684\u6d88\u606f\uff0c\u5e76\u4e14\u7b49\u5f85\u65f6\u95f4\u4e0d\u8d85\u8fc7\u67d0\u4e2a\u56fa\u5b9a\u5ef6\u8fdf\u9650\u5236\uff08\u4f8b\u5982 64k \u6216 10 ms\uff09\u3002\u8fd9\u5141\u8bb8\u7d2f\u79ef\u66f4\u591a\u8981\u53d1\u9001\u7684\u5b57\u8282\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4e0a\u5f88\u5c11\u6709\u8f83\u5927\u7684 I/O \u64cd\u4f5c\u3002\u8fd9\u79cd\u7f13\u51b2\u662f\u53ef\u914d\u7f6e\u7684\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\u6765\u6743\u8861\u5c11\u91cf\u7684\u989d\u5916\u5ef6\u8fdf\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u541e\u5410\u91cf\u3002 \u6709\u5173\u751f\u4ea7\u8005\u7684 \u914d\u7f6e \u548c api \u7684 \u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728\u6587\u6863\u7684\u5176\u4ed6\u5730\u65b9\u627e\u5230\u3002","title":"\u5f02\u6b65\u53d1\u9001"},{"location":"4/#45","text":"Kafka \u6d88\u8d39\u8005\u7684\u5de5\u4f5c\u65b9\u5f0f\u662f\u5411\u5f15\u5bfc\u5176\u60f3\u8981\u4f7f\u7528\u7684\u5206\u533a\u7684\u4ee3\u7406\u53d1\u51fa\u201c\u83b7\u53d6\u201d\u8bf7\u6c42\u3002\u6d88\u8d39\u8005\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e2d\u6307\u5b9a\u5176\u5728\u65e5\u5fd7\u4e2d\u7684\u504f\u79fb\u91cf\uff0c\u5e76\u63a5\u6536\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u7684\u65e5\u5fd7\u5757\u3002\u56e0\u6b64\uff0c\u6d88\u8d39\u8005\u5bf9\u8be5\u4f4d\u7f6e\u5177\u6709\u663e\u7740\u7684\u63a7\u5236\u6743\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u5c06\u5176\u5012\u56de\u4ee5\u91cd\u65b0\u4f7f\u7528\u6570\u636e\u3002","title":"4.5 \u6d88\u8d39\u8005"},{"location":"4/#_6","text":"\u6211\u4eec\u8003\u8651\u7684\u6700\u521d\u95ee\u9898\u662f\u6d88\u8d39\u8005\u662f\u5426\u5e94\u8be5\u4ecebroker\u90a3\u91cc\u63d0\u53d6\u6570\u636e\uff0c\u6216\u8005broker\u5e94\u8be5\u5c06\u6570\u636e\u63a8\u9001\u7ed9\u6d88\u8d39\u8005\u3002\u5728\u8fd9\u65b9\u9762\uff0cKafka \u9075\u5faa\u5927\u591a\u6570\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u6240\u5171\u4eab\u7684\u66f4\u4f20\u7edf\u7684\u8bbe\u8ba1\uff0c\u5176\u4e2d\u6570\u636e\u4ece\u751f\u4ea7\u8005\u63a8\u9001\u5230\u4ee3\u7406\u5e76\u7531\u6d88\u8d39\u8005\u4ece\u4ee3\u7406\u4e2d\u63d0\u53d6\u3002\u4e00\u4e9b\u4ee5\u65e5\u5fd7\u8bb0\u5f55\u4e3a\u4e2d\u5fc3\u7684\u7cfb\u7edf\uff0c\u4f8b\u5982 Scribe \u548c Apache Flume \uff0c\u9075\u5faa\u4e00\u79cd\u975e\u5e38\u4e0d\u540c\u7684\u57fa\u4e8e\u63a8\u9001\u7684\u8def\u5f84\uff0c\u5c06\u6570\u636e\u63a8\u9001\u5230\u4e0b\u6e38\u3002\u4e24\u79cd\u65b9\u6cd5\u5404\u6709\u5229\u5f0a\u3002\u7136\u800c\uff0c\u57fa\u4e8e\u63a8\u9001\u7684\u7cfb\u7edf\u5f88\u96be\u5904\u7406\u4e0d\u540c\u7684\u6d88\u8d39\u8005\uff0c\u56e0\u4e3a\u4ee3\u7406\u63a7\u5236\u6570\u636e\u4f20\u8f93\u7684\u901f\u7387\u3002\u76ee\u6807\u901a\u5e38\u662f\u8ba9\u6d88\u8d39\u8005\u80fd\u591f\u4ee5\u5c3d\u53ef\u80fd\u9ad8\u7684\u901f\u5ea6\u6d88\u8d39\uff1b\u4e0d\u5e78\u7684\u662f\uff0c\u5728\u63a8\u9001\u7cfb\u7edf\u4e2d\uff0c\u8fd9\u610f\u5473\u7740\u5f53\u6d88\u8d39\u8005\u7684\u6d88\u8d39\u7387\u4f4e\u4e8e\u751f\u4ea7\u7387\u65f6\uff0c\u6d88\u8d39\u8005\u5f80\u5f80\u4f1a\u4e0d\u77e5\u6240\u63aa\uff08\u672c\u8d28\u4e0a\u662f\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff09\u3002\u57fa\u4e8e\u62c9\u52a8\u7684\u7cfb\u7edf\u5177\u6709\u66f4\u597d\u7684\u7279\u6027\uff0c\u5373\u6d88\u8d39\u8005\u53ef\u4ee5\u7b80\u5355\u5730\u843d\u5728\u540e\u9762\u5e76\u5728\u53ef\u4ee5\u7684\u65f6\u5019\u8d76\u4e0a\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u67d0\u79cd\u9000\u907f\u534f\u8bae\u6765\u7f13\u89e3\uff0c\u6d88\u8d39\u8005\u53ef\u4ee5\u901a\u8fc7\u9000\u907f\u534f\u8bae\u6765\u8868\u660e\u5b83\u5df2\u4e0d\u582a\u91cd\u8d1f\uff0c\u4f46\u8981\u5145\u5206\u5229\u7528\uff08\u4f46\u7edd\u4e0d\u8fc7\u5ea6\u5229\u7528\uff09\u6d88\u8d39\u8005\u7684\u4f20\u8f93\u7387\u6bd4\u770b\u8d77\u6765\u66f4\u68d8\u624b\u3002\u4e4b\u524d\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u6784\u5efa\u7cfb\u7edf\u7684\u5c1d\u8bd5\u5bfc\u81f4\u6211\u4eec\u91c7\u7528\u4e86\u66f4\u4f20\u7edf\u7684\u62c9\u6a21\u578b\u3002 \u57fa\u4e8e\u62c9\u52a8\u7684\u7cfb\u7edf\u7684\u53e6\u4e00\u4e2a\u4f18\u70b9\u662f\uff0c\u5b83\u6709\u52a9\u4e8e\u5c06\u6570\u636e\u6279\u91cf\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u3002\u57fa\u4e8e\u63a8\u9001\u7684\u7cfb\u7edf\u5fc5\u987b\u9009\u62e9\u7acb\u5373\u53d1\u9001\u8bf7\u6c42\u6216\u79ef\u7d2f\u66f4\u591a\u6570\u636e\u7136\u540e\u7a0d\u540e\u53d1\u9001\uff0c\u800c\u4e0d\u77e5\u9053\u4e0b\u6e38\u6d88\u8d39\u8005\u662f\u5426\u80fd\u591f\u7acb\u5373\u5904\u7406\u5b83\u3002\u5982\u679c\u8c03\u6574\u4e3a\u4f4e\u5ef6\u8fdf\uff0c\u8fd9\u5c06\u5bfc\u81f4\u4e00\u6b21\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u4f20\u8f93\u6700\u7ec8\u90fd\u4f1a\u88ab\u7f13\u51b2\uff0c\u8fd9\u662f\u6d6a\u8d39\u7684\u3002\u57fa\u4e8e\u62c9\u53d6\u7684\u8bbe\u8ba1\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u56e0\u4e3a\u6d88\u8d39\u8005\u603b\u662f\u5728\u65e5\u5fd7\u4e2d\u5f53\u524d\u4f4d\u7f6e\u4e4b\u540e\uff08\u6216\u8fbe\u5230\u67d0\u4e2a\u53ef\u914d\u7f6e\u7684\u6700\u5927\u5927\u5c0f\uff09\u62c9\u53d6\u6240\u6709\u53ef\u7528\u6d88\u606f\u3002\u56e0\u6b64\uff0c\u4eba\u4eec\u53ef\u4ee5\u83b7\u5f97\u6700\u4f73\u7684\u6279\u5904\u7406\uff0c\u800c\u4e0d\u4f1a\u5f15\u5165\u4e0d\u5fc5\u8981\u7684\u5ef6\u8fdf\u3002 \u57fa\u4e8e\u62c9\u52a8\u7684\u7cfb\u7edf\u7684\u7f3a\u9677\u5728\u4e8e\uff0c\u5982\u679c\u4ee3\u7406\u6ca1\u6709\u6570\u636e\uff0c\u6d88\u8d39\u8005\u6700\u7ec8\u53ef\u80fd\u4f1a\u5728\u7d27\u5bc6\u7684\u5faa\u73af\u4e2d\u8fdb\u884c\u8f6e\u8be2\uff0c\u5b9e\u9645\u4e0a\u5fd9\u4e8e\u7b49\u5f85\u6570\u636e\u5230\u8fbe\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u5728\u62c9\u53d6\u8bf7\u6c42\u4e2d\u8bbe\u7f6e\u4e86\u53c2\u6570\uff0c\u5141\u8bb8\u6d88\u8d39\u8005\u8bf7\u6c42\u5728\u201c\u957f\u8f6e\u8be2\u201d\u4e2d\u963b\u585e\uff0c\u7b49\u5f85\u6570\u636e\u5230\u8fbe\uff08\u5e76\u4e14\u53ef\u4ee5\u9009\u62e9\u7b49\u5f85\u7ed9\u5b9a\u6570\u91cf\u7684\u5b57\u8282\u53ef\u7528\uff0c\u4ee5\u786e\u4fdd\u5927\u7684\u4f20\u8f93\u5927\u5c0f\uff09\u3002 \u60a8\u53ef\u4ee5\u60f3\u8c61\u5176\u4ed6\u53ef\u80fd\u7684\u8bbe\u8ba1\uff0c\u8fd9\u4e9b\u8bbe\u8ba1\u53ea\u662f\u62c9\u5f0f\u3001\u7aef\u5230\u7aef\u7684\u3002\u751f\u4ea7\u8005\u5c06\u5728\u672c\u5730\u5199\u5165\u672c\u5730\u65e5\u5fd7\uff0cbroker\u5c06\u4ece\u5176\u4e2d\u62c9\u53d6\uff0c\u6d88\u8d39\u8005\u4e5f\u5c06\u4ece\u4e2d\u62c9\u53d6\u3002\u4eba\u4eec\u7ecf\u5e38\u63d0\u51fa\u7c7b\u4f3c\u7c7b\u578b\u7684\u201c\u5b58\u50a8\u8f6c\u53d1\u201d\u751f\u4ea7\u8005\u3002\u8fd9\u5f88\u6709\u8da3\uff0c\u4f46\u6211\u4eec\u89c9\u5f97\u4e0d\u592a\u9002\u5408\u6211\u4eec\u62e5\u6709\u6570\u5343\u4e2a\u751f\u4ea7\u8005\u7684\u76ee\u6807\u7528\u4f8b\u3002\u6211\u4eec\u5927\u89c4\u6a21\u8fd0\u884c\u6301\u4e45\u6570\u636e\u7cfb\u7edf\u7684\u7ecf\u9a8c\u8ba9\u6211\u4eec\u611f\u5230\uff0c\u5728\u7cfb\u7edf\u4e2d\u8de8\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u6d89\u53ca\u6570\u5343\u4e2a\u78c1\u76d8\u5b9e\u9645\u4e0a\u5e76\u4e0d\u4f1a\u8ba9\u4e8b\u60c5\u53d8\u5f97\u66f4\u53ef\u9760\uff0c\u800c\u4e14\u64cd\u4f5c\u8d77\u6765\u4f1a\u662f\u4e00\u573a\u5669\u68a6\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u53ef\u4ee5\u5927\u89c4\u6a21\u8fd0\u884c\u5177\u6709\u5f3a\u5927 SLA \u7684\u7ba1\u9053\uff0c\u800c\u4e0d\u9700\u8981\u751f\u4ea7\u8005\u6301\u4e45\u6027\u3002","title":"\u63a8\u4e0e\u62c9"},{"location":"4/#_7","text":"\u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\uff0c\u8ddf\u8e2a\u5df2\u6d88\u8017\u7684 \u5185\u5bb9 \u662f\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u7684\u5173\u952e\u6027\u80fd\u70b9\u4e4b\u4e00\u3002 \u5927\u591a\u6570\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u90fd\u4f1a\u4fdd\u5b58\u6709\u5173\u4ee3\u7406\u4e0a\u5df2\u4f7f\u7528\u7684\u6d88\u606f\u7684\u5143\u6570\u636e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6d88\u606f\u88ab\u5206\u53d1\u7ed9\u6d88\u8d39\u8005\u65f6\uff0c\u4ee3\u7406\u8981\u4e48\u7acb\u5373\u5728\u672c\u5730\u8bb0\u5f55\u8be5\u4e8b\u5b9e\uff0c\u8981\u4e48\u7b49\u5f85\u6d88\u8d39\u8005\u7684\u786e\u8ba4\u3002\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u76f4\u89c2\u7684\u9009\u62e9\uff0c\u5b9e\u9645\u4e0a\u5bf9\u4e8e\u5355\u673a\u670d\u52a1\u5668\u6765\u8bf4\uff0c\u5e76\u4e0d\u6e05\u695a\u8fd9\u79cd\u72b6\u6001\u8fd8\u53ef\u4ee5\u53bb\u54ea\u91cc\u3002\u7531\u4e8e\u8bb8\u591a\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4e2d\u7528\u4e8e\u5b58\u50a8\u7684\u6570\u636e\u7ed3\u6784\u6269\u5c55\u6027\u5f88\u5dee\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a\u52a1\u5b9e\u7684\u9009\u62e9\u2014\u2014\u56e0\u4e3a\u4ee3\u7406\u77e5\u9053\u6d88\u8017\u4e86\u4ec0\u4e48\uff0c\u6240\u4ee5\u53ef\u4ee5\u7acb\u5373\u5220\u9664\u5b83\uff0c\u4ece\u800c\u4fdd\u6301\u6570\u636e\u5927\u5c0f\u8f83\u5c0f\u3002 \u4e5f\u8bb8\u4e0d\u592a\u660e\u663e\u7684\u662f\uff0c\u8ba9broker\u548c\u6d88\u8d39\u8005\u5c31\u6d88\u8d39\u5185\u5bb9\u8fbe\u6210\u4e00\u81f4\u5e76\u4e0d\u662f\u4e00\u4e2a\u5c0f\u95ee\u9898\u3002\u5982\u679c\u4ee3\u7406\u5728\u6bcf\u6b21\u901a\u8fc7\u7f51\u7edc\u5206\u53d1\u6d88\u606f\u65f6\u7acb\u5373\u5c06\u5176\u8bb0\u5f55\u4e3a\u5df2\u6d88\u8d39\uff0c\u90a3\u4e48\u5982\u679c\u6d88\u8d39\u8005\u65e0\u6cd5\u5904\u7406\u8be5\u6d88\u606f\uff08\u4f8b\u5982\u56e0\u4e3a\u5d29\u6e83\u6216\u8bf7\u6c42\u8d85\u65f6\u6216\u5176\u4ed6\u539f\u56e0\uff09\uff0c\u8be5\u6d88\u606f\u5c06\u4e22\u5931 \u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8bb8\u591a\u6d88\u606f\u7cfb\u7edf\u6dfb\u52a0\u4e86\u786e\u8ba4\u529f\u80fd\uff0c\u8fd9\u610f\u5473\u7740\u6d88\u606f\u5728\u53d1\u9001\u65f6\u4ec5\u88ab\u6807\u8bb0\u4e3a\u5df2 \u53d1\u9001 \uff0c\u800c\u4e0d\u662f \u88ab\u6d88\u8d39\uff1b \u4ee3\u7406\u7b49\u5f85\u6d88\u8d39\u8005\u7684\u7279\u5b9a\u786e\u8ba4\u4ee5\u5c06\u6d88\u606f\u8bb0\u5f55\u4e3a \u5df2\u6d88\u8d39 \u3002\u8fd9\u79cd\u7b56\u7565\u89e3\u51b3\u4e86\u4e22\u5931\u6d88\u606f\u7684\u95ee\u9898\uff0c\u4f46\u4e5f\u4ea7\u751f\u4e86\u65b0\u7684\u95ee\u9898\u3002\u9996\u5148\uff0c\u5982\u679c\u6d88\u8d39\u8005\u5904\u7406\u6d88\u606f\u4f46\u5728\u53d1\u9001\u786e\u8ba4\u4e4b\u524d\u5931\u8d25\uff0c\u90a3\u4e48\u8be5\u6d88\u606f\u5c06\u88ab\u6d88\u8d39\u4e24\u6b21\u3002\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\u5173\u4e8e\u6027\u80fd\u7684\uff0c\u73b0\u5728\u4ee3\u7406\u5fc5\u987b\u4fdd\u7559\u6bcf\u6761\u6d88\u606f\u7684\u591a\u4e2a\u72b6\u6001\uff08\u9996\u5148\u9501\u5b9a\u5b83\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u518d\u6b21\u53d1\u51fa\uff0c\u7136\u540e\u5c06\u5176\u6807\u8bb0\u4e3a\u6c38\u4e45\u6d88\u8017\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u5c06\u5176\u5220\u9664\uff09\u3002\u5fc5\u987b\u5904\u7406\u68d8\u624b\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u5982\u4f55\u5904\u7406\u5df2\u53d1\u9001\u4f46\u4ece\u672a\u786e\u8ba4\u7684\u6d88\u606f\u3002 Kafka\u5bf9\u6b64\u7684\u5904\u7406\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\u3002\u6211\u4eec\u7684\u4e3b\u9898\u5206\u4e3a\u4e00\u7ec4\u5b8c\u5168\u6709\u5e8f\u7684\u5206\u533a\uff0c\u6bcf\u4e2a\u5206\u533a\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\u90fd\u7531\u6bcf\u4e2a\u8ba2\u9605\u6d88\u8d39\u8005\u7ec4\u4e2d\u7684\u4e00\u4e2a\u6d88\u8d39\u8005\u6d88\u8d39\u3002\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u5206\u533a\u4e2d\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u53ea\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u5373\u8981\u6d88\u8d39\u7684\u4e0b\u4e00\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002\u8fd9\u4f7f\u5f97\u6709\u5173\u5df2\u6d88\u8017\u5185\u5bb9\u7684\u72b6\u6001\u975e\u5e38\u5c0f\uff0c\u6bcf\u4e2a\u5206\u533a\u53ea\u6709\u4e00\u4e2a\u6570\u5b57\u3002\u53ef\u4ee5\u5b9a\u671f\u68c0\u67e5\u6b64\u72b6\u6001\u3002\u8fd9\u4f7f\u5f97\u6d88\u606f\u786e\u8ba4\u7684\u6210\u672c\u975e\u5e38\u4f4e\u3002 \u8fd9\u4e2a\u51b3\u5b9a\u8fd8\u6709\u4e00\u4e2a\u9644\u5e26\u7684\u597d\u5904\u3002\u6d88\u8d39\u8005\u53ef\u4ee5\u6545\u610f \u56de \u9000\u5230\u65e7\u7684\u504f\u79fb\u91cf\u5e76\u91cd\u65b0\u4f7f\u7528\u6570\u636e\u3002\u8fd9\u8fdd\u53cd\u4e86\u961f\u5217\u7684\u5e38\u89c1\u5951\u7ea6\uff0c\u4f46\u4e8b\u5b9e\u8bc1\u660e\u5bf9\u4e8e\u8bb8\u591a\u6d88\u8d39\u8005\u6765\u8bf4\u8fd9\u662f\u4e00\u4e2a\u57fa\u672c\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6d88\u8d39\u8005\u4ee3\u7801\u5b58\u5728\u9519\u8bef\uff0c\u5e76\u4e14\u5728\u6d88\u8d39\u4e86\u4e00\u4e9b\u6d88\u606f\u540e\u53d1\u73b0\uff0c\u5219\u6d88\u8d39\u8005\u53ef\u4ee5\u5728\u9519\u8bef\u4fee\u590d\u540e\u91cd\u65b0\u6d88\u8d39\u8fd9\u4e9b\u6d88\u606f\u3002","title":"\u6d88\u8d39\u8005\u5b9a\u4f4d"},{"location":"4/#_8","text":"\u53ef\u6269\u5c55\u7684\u6301\u4e45\u6027\u5141\u8bb8\u6d88\u8d39\u8005\u4ec5\u5b9a\u671f\u6d88\u8d39\uff0c\u4f8b\u5982\u6279\u91cf\u6570\u636e\u52a0\u8f7d\uff0c\u5b9a\u671f\u5c06\u6570\u636e\u6279\u91cf\u52a0\u8f7d\u5230\u79bb\u7ebf\u7cfb\u7edf\uff08\u4f8b\u5982 Hadoop \u6216\u5173\u7cfb\u6570\u636e\u4ed3\u5e93\uff09\u4e2d\u3002 \u5bf9\u4e8e Hadoop\uff0c\u6211\u4eec\u901a\u8fc7\u5c06\u8d1f\u8f7d\u62c6\u5206\u5230\u5404\u4e2a\u6620\u5c04\u4efb\u52a1\uff08\u6bcf\u4e2a\u8282\u70b9/\u4e3b\u9898/\u5206\u533a\u7ec4\u5408\u4e00\u4e2a\uff09\u6765\u5e76\u884c\u5316\u6570\u636e\u52a0\u8f7d\uff0c\u4ece\u800c\u5141\u8bb8\u52a0\u8f7d\u5b8c\u5168\u5e76\u884c\u3002Hadoop \u63d0\u4f9b\u4efb\u52a1\u7ba1\u7406\uff0c\u5931\u8d25\u7684\u4efb\u52a1\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u6570\u636e\u7684\u5371\u9669\u2014\u2014\u5b83\u4eec\u53ea\u662f\u4ece\u539f\u6765\u7684\u4f4d\u7f6e\u91cd\u65b0\u542f\u52a8\u3002","title":"\u79bb\u7ebf\u6570\u636e\u52a0\u8f7d"},{"location":"4/#_9","text":"\u9759\u6001\u6210\u5458\u8d44\u683c\u65e8\u5728\u63d0\u9ad8\u6d41\u5e94\u7528\u7a0b\u5e8f\u3001\u6d88\u8d39\u8005\u7ec4\u548c\u5176\u4ed6\u6784\u5efa\u5728\u7ec4\u518d\u5e73\u8861\u534f\u8bae\u4e4b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u53ef\u7528\u6027\u3002\u518d\u5e73\u8861\u534f\u8bae\u4f9d\u8d56\u7ec4\u534f\u8c03\u5668\u4e3a\u7ec4\u6210\u5458\u5206\u914d\u5b9e\u4f53 ID\u3002\u8fd9\u4e9b\u751f\u6210\u7684 ID \u662f\u77ed\u6682\u7684\uff0c\u5e76\u4e14\u4f1a\u5728\u6210\u5458\u91cd\u65b0\u542f\u52a8\u548c\u91cd\u65b0\u52a0\u5165\u65f6\u53d1\u751f\u53d8\u5316\u3002\u5bf9\u4e8e\u57fa\u4e8e\u6d88\u8d39\u8005\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u8fd9\u79cd\u201c\u52a8\u6001\u6210\u5458\u8d44\u683c\u201d\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5728\u7ba1\u7406\u64cd\u4f5c\uff08\u4f8b\u5982\u4ee3\u7801\u90e8\u7f72\u3001\u914d\u7f6e\u66f4\u65b0\u548c\u5b9a\u671f\u91cd\u65b0\u542f\u52a8\uff09\u671f\u95f4\u5c06\u5927\u90e8\u5206\u4efb\u52a1\u91cd\u65b0\u5206\u914d\u7ed9\u4e0d\u540c\u7684\u5b9e\u4f8b\u3002\u5bf9\u4e8e\u5927\u578b\u72b6\u6001\u5e94\u7528\u7a0b\u5e8f\uff0c\u6d17\u724c\u4efb\u52a1\u5728\u5904\u7406\u4e4b\u524d\u9700\u8981\u5f88\u957f\u65f6\u95f4\u624d\u80fd\u6062\u590d\u5176\u672c\u5730\u72b6\u6001\uff0c\u4ece\u800c\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u90e8\u5206\u6216\u5b8c\u5168\u4e0d\u53ef\u7528\u3002\u53d7\u8fd9\u4e00\u89c2\u5bdf\u7684\u542f\u53d1\uff0cKafka \u7684\u7ec4\u7ba1\u7406\u534f\u8bae\u5141\u8bb8\u7ec4\u6210\u5458\u63d0\u4f9b\u6301\u4e45\u7684\u5b9e\u4f53 ID\u3002\u6839\u636e\u8fd9\u4e9b ID\uff0c\u7ec4\u6210\u5458\u8d44\u683c\u4fdd\u6301\u4e0d\u53d8\uff0c\u56e0\u6b64\u4e0d\u4f1a\u89e6\u53d1\u91cd\u65b0\u5e73\u8861\u3002 \u5982\u679c\u60a8\u60f3\u4f7f\u7528\u9759\u6001\u6210\u5458\u8d44\u683c\uff0c \u5c06\u4ee3\u7406\u96c6\u7fa4\u548c\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u5347\u7ea7\u5230 2.3 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5e76\u786e\u4fdd\u5347\u7ea7\u540e\u7684\u4ee3\u7406\u4e5f\u4f7f\u7528 inter.broker.protocol.version 2.3 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u5c06\u914d\u7f6e\u8bbe\u7f6e ConsumerConfig#GROUP_INSTANCE_ID_CONFIG \u4e3a\u4e00\u7ec4\u4e0b\u6bcf\u4e2a\u6d88\u8d39\u8005\u5b9e\u4f8b\u7684\u552f\u4e00\u503c\u3002 \u5bf9\u4e8e Kafka Streams \u5e94\u7528\u7a0b\u5e8f\uff0c\u4e3a\u6bcf\u4e2a KafkaStreams \u5b9e\u4f8b\u8bbe\u7f6e\u552f\u4e00\u7684\u503c\u5c31\u8db3\u591f\u4e86 ConsumerConfig#GROUP_INSTANCE_ID_CONFIG \uff0c\u4e0e\u5b9e\u4f8b\u4f7f\u7528\u7684\u7ebf\u7a0b\u6570\u65e0\u5173\u3002 \u5982\u679c\u60a8\u7684\u4ee3\u7406\u4f7f\u7528\u7684\u7248\u672c\u4f4e\u4e8e 2.3\uff0c\u4f46\u60a8\u9009\u62e9 ConsumerConfig#GROUP_INSTANCE_ID_CONFIG \u5728\u5ba2\u6237\u7aef\u8bbe\u7f6e\uff0c\u5219\u5e94\u7528\u7a0b\u5e8f\u5c06\u68c0\u6d4b\u4ee3\u7406\u7248\u672c\uff0c\u7136\u540e\u629b\u51fa UnsupportedException\u3002\u5982\u679c\u60a8\u4e0d\u5c0f\u5fc3\u4e3a\u4e0d\u540c\u7684\u5b9e\u4f8b\u914d\u7f6e\u4e86\u91cd\u590d\u7684 ID\uff0c\u4ee3\u7406\u7aef\u7684\u9632\u62a4\u673a\u5236\u5c06\u901a\u8fc7\u89e6\u53d1 org.apache.kafka.common.errors.FencedInstanceIdException . \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-345","title":"\u9759\u6001\u4f1a\u5458\u8d44\u683c"},{"location":"4/#46","text":"\u73b0\u5728\u6211\u4eec\u5bf9\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u5de5\u4f5c\u539f\u7406\u6709\u4e86\u4e00\u4e9b\u4e86\u89e3\uff0c\u8ba9\u6211\u4eec\u8ba8\u8bba\u4e00\u4e0b Kafka \u5728\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4e4b\u95f4\u63d0\u4f9b\u7684\u8bed\u4e49\u4fdd\u8bc1\u3002\u663e\u7136\uff0c\u53ef\u4ee5\u63d0\u4f9b\u591a\u79cd\u53ef\u80fd\u7684\u6d88\u606f\u4f20\u9012\u4fdd\u8bc1\uff1a \u6700\u591a\u4e00\u6b21 \u2014\u2014\u6d88\u606f\u53ef\u80fd\u4f1a\u4e22\u5931\uff0c\u4f46\u6c38\u8fdc\u4e0d\u4f1a\u91cd\u65b0\u4f20\u9001\u3002 \u81f3\u5c11\u4e00\u6b21 \u2014\u2014\u6d88\u606f\u6c38\u8fdc\u4e0d\u4f1a\u4e22\u5931\uff0c\u4f46\u53ef\u4ee5\u91cd\u65b0\u4f20\u9001\u3002 \u6070\u597d\u4e00\u6b21 \u2014\u2014\u8fd9\u5c31\u662f\u4eba\u4eec\u771f\u6b63\u60f3\u8981\u7684\uff0c\u6bcf\u6761\u6d88\u606f\u90fd\u4f20\u9012\u4e00\u6b21\u4e14\u4ec5\u4e00\u6b21\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u5206\u4e3a\u4e24\u4e2a\u95ee\u9898\uff1a\u53d1\u5e03\u6d88\u606f\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u548c\u6d88\u8d39\u6d88\u606f\u65f6\u7684\u4fdd\u8bc1\u3002 \u8bb8\u591a\u7cfb\u7edf\u58f0\u79f0\u63d0\u4f9b\u201c\u6070\u597d\u4e00\u6b21\u201d\u4ea4\u4ed8\u8bed\u4e49\uff0c\u4f46\u9605\u8bfb\u7ec6\u5219\u5f88\u91cd\u8981\uff0c\u8fd9\u4e9b\u58f0\u660e\u4e2d\u7684\u5927\u591a\u6570\u90fd\u662f\u8bef\u5bfc\u6027\u7684\uff08\u5373\u5b83\u4eec\u4e0d\u80fd\u8f6c\u5316\u4e3a\u6d88\u8d39\u8005\u6216\u751f\u4ea7\u8005\u53ef\u80fd\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u6709\u591a\u4e2a\u7684\u60c5\u51b5\uff09\u6d88\u8d39\u8005\u8fdb\u7a0b\uff0c\u6216\u8005\u5199\u5165\u78c1\u76d8\u7684\u6570\u636e\u53ef\u80fd\u4e22\u5931\u7684\u60c5\u51b5\uff09\u3002 Kafka\u7684\u8bed\u4e49\u662f\u76f4\u63a5\u7684\u3002\u5f53\u53d1\u5e03\u6d88\u606f\u65f6\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u6d88\u606f\u88ab\u201c\u63d0\u4ea4\u201d\u5230\u65e5\u5fd7\u7684\u6982\u5ff5\u3002\u4e00\u65e6\u63d0\u4ea4\u4e86\u5df2\u53d1\u5e03\u7684\u6d88\u606f\uff0c\u53ea\u8981\u590d\u5236\u8be5\u6d88\u606f\u6240\u5199\u5165\u7684\u5206\u533a\u7684\u4e00\u4e2a\u4ee3\u7406\u4fdd\u6301\u201c\u6d3b\u52a8\u201d\u72b6\u6001\uff0c\u8be5\u6d88\u606f\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002\u5df2\u63d0\u4ea4\u6d88\u606f\u3001\u6d3b\u52a8\u5206\u533a\u7684\u5b9a\u4e49\u4ee5\u53ca\u6211\u4eec\u5c1d\u8bd5\u5904\u7406\u7684\u6545\u969c\u7c7b\u578b\u7684\u63cf\u8ff0\u5c06\u5728\u4e0b\u4e00\u8282\u4e2d\u66f4\u8be6\u7ec6\u5730\u63cf\u8ff0\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5047\u8bbe\u4e00\u4e2a\u5b8c\u7f8e\u7684\u3001\u65e0\u635f\u7684broker\uff0c\u5e76\u5c1d\u8bd5\u7406\u89e3\u5bf9\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u4fdd\u8bc1\u3002\u5982\u679c\u751f\u4ea7\u8005\u5c1d\u8bd5\u53d1\u5e03\u6d88\u606f\u5e76\u9047\u5230\u7f51\u7edc\u9519\u8bef\uff0c\u5219\u65e0\u6cd5\u786e\u5b9a\u6b64\u9519\u8bef\u662f\u5728\u63d0\u4ea4\u6d88\u606f\u4e4b\u524d\u8fd8\u662f\u4e4b\u540e\u53d1\u751f\u3002 \u5728 0.11.0.0 \u4e4b\u524d\uff0c\u5982\u679c\u751f\u4ea7\u8005\u672a\u80fd\u6536\u5230\u6307\u793a\u6d88\u606f\u5df2\u63d0\u4ea4\u7684\u54cd\u5e94\uff0c\u5b83\u522b\u65e0\u9009\u62e9\uff0c\u53ea\u80fd\u91cd\u65b0\u53d1\u9001\u6d88\u606f\u3002\u8fd9\u63d0\u4f9b\u4e86\u81f3\u5c11\u4e00\u6b21\u4f20\u9012\u8bed\u4e49\uff0c\u56e0\u4e3a\u5982\u679c\u539f\u59cb\u8bf7\u6c42\u5b9e\u9645\u4e0a\u5df2\u6210\u529f\uff0c\u5219\u5728\u91cd\u65b0\u53d1\u9001\u671f\u95f4\u6d88\u606f\u53ef\u80fd\u4f1a\u518d\u6b21\u5199\u5165\u65e5\u5fd7\u3002\u4ece0.11.0.0\u5f00\u59cb\uff0cKafka\u751f\u4ea7\u8005\u8fd8\u652f\u6301\u5e42\u7b49\u4f20\u9012\u9009\u9879\uff0c\u4fdd\u8bc1\u91cd\u65b0\u53d1\u9001\u4e0d\u4f1a\u5bfc\u81f4\u65e5\u5fd7\u4e2d\u51fa\u73b0\u91cd\u590d\u6761\u76ee\u200b\u200b\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u4ee3\u7406\u4e3a\u6bcf\u4e2a\u751f\u4ea7\u8005\u5206\u914d\u4e00\u4e2a ID\uff0c\u5e76\u4f7f\u7528\u751f\u4ea7\u8005\u968f\u6bcf\u6761\u6d88\u606f\u53d1\u9001\u7684\u5e8f\u5217\u53f7\u6765\u5220\u9664\u91cd\u590d\u7684\u6d88\u606f\u3002\u540c\u6837\u4ece 0.11.0.0 \u5f00\u59cb\uff0c\u751f\u4ea7\u8005\u652f\u6301\u4f7f\u7528\u7c7b\u4f3c\u4e8b\u52a1\u7684\u8bed\u4e49\u5c06\u6d88\u606f\u53d1\u9001\u5230\u591a\u4e2a\u4e3b\u9898\u5206\u533a\u7684\u80fd\u529b\uff1a\u5373 \u8981\u4e48\u6240\u6709\u6d88\u606f\u5747\u5df2\u6210\u529f\u5199\u5165\uff0c\u8981\u4e48\u5747\u672a\u6210\u529f\u5199\u5165\u3002\u5176\u4e3b\u8981\u7528\u4f8b\u662f Kafka \u4e3b\u9898\u4e4b\u95f4\u7684\u4e00\u6b21\u6027\u5904\u7406\uff08\u5982\u4e0b\u6240\u8ff0\uff09\u3002 \u5e76\u975e\u6240\u6709\u7528\u4f8b\u90fd\u9700\u8981\u5982\u6b64\u5f3a\u6709\u529b\u7684\u4fdd\u8bc1\u3002\u5bf9\u4e8e\u5bf9\u5ef6\u8fdf\u654f\u611f\u7684\u7528\u9014\uff0c\u6211\u4eec\u5141\u8bb8\u751f\u4ea7\u8005\u6307\u5b9a\u5176\u6240\u9700\u7684\u6301\u4e45\u6027\u7ea7\u522b\u3002\u5982\u679c\u751f\u4ea7\u8005\u6307\u5b9a\u5b83\u60f3\u8981\u7b49\u5f85\u6d88\u606f\u88ab\u63d0\u4ea4\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u5927\u7ea6 10 \u6beb\u79d2\u3002\u7136\u800c\uff0c\u751f\u4ea7\u8005\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5b83\u60f3\u8981\u5b8c\u5168\u5f02\u6b65\u5730\u6267\u884c\u53d1\u9001\uff0c\u6216\u8005\u5b83\u53ea\u60f3\u7b49\u5230\u9886\u5bfc\u8005\uff08\u4f46\u4e0d\u4e00\u5b9a\u662f\u8ffd\u968f\u8005\uff09\u6536\u5230\u6d88\u606f\u3002 \u73b0\u5728\u8ba9\u6211\u4eec\u4ece\u6d88\u8d39\u8005\u7684\u89d2\u5ea6\u6765\u63cf\u8ff0\u8bed\u4e49\u3002\u6240\u6709\u526f\u672c\u90fd\u5177\u6709\u5b8c\u5168\u76f8\u540c\u7684\u65e5\u5fd7\u548c\u76f8\u540c\u7684\u504f\u79fb\u91cf\u3002\u6d88\u8d39\u8005\u63a7\u5236\u5176\u5728\u6b64\u65e5\u5fd7\u4e2d\u7684\u4f4d\u7f6e\u3002\u5982\u679c\u6d88\u8d39\u8005\u4ece\u672a\u5d29\u6e83\uff0c\u5b83\u53ef\u4ee5\u53ea\u5c06\u8be5\u4f4d\u7f6e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4f46\u5982\u679c\u6d88\u8d39\u8005\u5931\u8d25\u5e76\u4e14\u6211\u4eec\u5e0c\u671b\u8be5\u4e3b\u9898\u5206\u533a\u7531\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u63a5\u7ba1\uff0c\u5219\u65b0\u8fdb\u7a0b\u5c06\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u9002\u5f53\u7684\u4f4d\u7f6e\u6765\u5f00\u59cb\u5904\u7406\u3002\u5047\u8bbe\u6d88\u8d39\u8005\u8bfb\u53d6\u4e86\u4e00\u4e9b\u6d88\u606f\u2014\u2014\u5b83\u6709\u51e0\u4e2a\u9009\u9879\u6765\u5904\u7406\u6d88\u606f\u5e76\u66f4\u65b0\u5176\u4f4d\u7f6e\u3002 \u5b83\u53ef\u4ee5\u8bfb\u53d6\u6d88\u606f\uff0c\u7136\u540e\u5c06\u5176\u4f4d\u7f6e\u4fdd\u5b58\u5728\u65e5\u5fd7\u4e2d\uff0c\u6700\u540e\u5904\u7406\u6d88\u606f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6d88\u8d39\u8005\u8fdb\u7a0b\u6709\u53ef\u80fd\u5728\u4fdd\u5b58\u5176\u4f4d\u7f6e\u4e4b\u540e\u4f46\u5728\u4fdd\u5b58\u5176\u6d88\u606f\u5904\u7406\u7684\u8f93\u51fa\u4e4b\u524d\u5d29\u6e83\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u63a5\u7ba1\u5904\u7406\u7684\u8fdb\u7a0b\u5c06\u4ece\u4fdd\u5b58\u7684\u4f4d\u7f6e\u5f00\u59cb\uff0c\u5373\u4f7f\u8be5\u4f4d\u7f6e\u4e4b\u524d\u7684\u4e00\u4e9b\u6d88\u606f\u5c1a\u672a\u5904\u7406\u3002\u8fd9\u5bf9\u5e94\u4e8e\u201c\u81f3\u591a\u4e00\u6b21\u201d\u8bed\u4e49\uff0c\u56e0\u4e3a\u5728\u6d88\u8d39\u8005\u5931\u8d25\u6d88\u606f\u53ef\u80fd\u4e0d\u4f1a\u88ab\u5904\u7406\u7684\u60c5\u51b5\u4e0b\u3002 \u5b83\u53ef\u4ee5\u8bfb\u53d6\u6d88\u606f\uff0c\u5904\u7406\u6d88\u606f\uff0c\u6700\u540e\u4fdd\u5b58\u5176\u4f4d\u7f6e\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6d88\u8d39\u8005\u8fdb\u7a0b\u6709\u53ef\u80fd\u5728\u5904\u7406\u6d88\u606f\u4e4b\u540e\u4f46\u5728\u4fdd\u5b58\u5176\u4f4d\u7f6e\u4e4b\u524d\u5d29\u6e83\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53\u65b0\u8fdb\u7a0b\u63a5\u7ba1\u65f6\uff0c\u5b83\u6536\u5230\u7684\u524d\u51e0\u6761\u6d88\u606f\u5c06\u5df2\u7ecf\u88ab\u5904\u7406\u3002\u8fd9\u5bf9\u5e94\u4e8e\u6d88\u8d39\u8005\u5931\u8d25\u60c5\u51b5\u4e0b\u7684\u201c\u81f3\u5c11\u4e00\u6b21\u201d\u8bed\u4e49\u3002\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u6d88\u606f\u5177\u6709\u4e3b\u952e\uff0c\u56e0\u6b64\u66f4\u65b0\u662f\u5e42\u7b49\u7684\uff08\u4e24\u6b21\u63a5\u6536\u76f8\u540c\u7684\u6d88\u606f\u53ea\u4f1a\u7528\u5176\u81ea\u8eab\u7684\u53e6\u4e00\u4e2a\u526f\u672c\u8986\u76d6\u8bb0\u5f55\uff09\u3002 \u90a3\u4e48\u6070\u597d\u4e00\u6b21\u8bed\u4e49\uff08\u5373\u4f60\u771f\u6b63\u60f3\u8981\u7684\u4e1c\u897f\uff09\u53c8\u5982\u4f55\u5462\uff1f\u5f53\u4ece Kafka \u4e3b\u9898\u6d88\u8d39\u5e76\u751f\u4ea7\u5230\u53e6\u4e00\u4e2a\u4e3b\u9898\u65f6\uff08\u5982\u5728 Kafka Streams\u4e2d\uff09 \u5e94\u7528\u7a0b\u5e8f\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e0a\u9762\u63d0\u5230\u7684 0.11.0.0 \u4e2d\u65b0\u7684\u4e8b\u52a1\u6027\u751f\u4ea7\u8005\u529f\u80fd\u3002\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u4f5c\u4e3a\u6d88\u606f\u5b58\u50a8\u5728\u4e3b\u9898\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728\u4e0e\u63a5\u6536\u5904\u7406\u6570\u636e\u7684\u8f93\u51fa\u4e3b\u9898\u76f8\u540c\u7684\u4e8b\u52a1\u4e2d\u5c06\u504f\u79fb\u91cf\u5199\u5165 Kafka\u3002\u5982\u679c\u4e8b\u52a1\u4e2d\u6b62\uff0c\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u5c06\u6062\u590d\u5230\u5176\u65e7\u503c\uff0c\u5e76\u4e14\u8f93\u51fa\u4e3b\u9898\u4e0a\u751f\u6210\u7684\u6570\u636e\u5bf9\u5176\u4ed6\u6d88\u8d39\u8005\u4e0d\u53ef\u89c1\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u4ed6\u4eec\u7684\u201c\u9694\u79bb\u7ea7\u522b\u201d\u3002\u5728\u9ed8\u8ba4\u7684\u201cread_uncommissed\u201d\u9694\u79bb\u7ea7\u522b\u4e2d\uff0c\u6240\u6709\u6d88\u606f\u5bf9\u6d88\u8d39\u8005\u90fd\u662f\u53ef\u89c1\u7684\uff0c\u5373\u4f7f\u5b83\u4eec\u662f\u4e2d\u6b62\u4e8b\u52a1\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u5728\u201cread_commissed\u201d\u4e2d\uff0c\u6d88\u8d39\u8005\u53ea\u4f1a\u4ece\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u4e2d\u8fd4\u56de\u6d88\u606f\uff08\u4ee5\u53ca\u4e0d\u5c5e\u4e8e\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u4efb\u4f55\u6d88\u606f\uff09\u4ea4\u6613\u7684\u4e00\u90e8\u5206\uff09\u3002 \u5f53\u5199\u5165\u5916\u90e8\u7cfb\u7edf\u65f6\uff0c\u9650\u5236\u5728\u4e8e\u9700\u8981\u5c06\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u4e0e\u5b9e\u9645\u5b58\u50a8\u4e3a\u8f93\u51fa\u7684\u5185\u5bb9\u76f8\u534f\u8c03\u3002\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u7684\u7ecf\u5178\u65b9\u6cd5\u662f\u5728\u6d88\u8d39\u8005\u4f4d\u7f6e\u7684\u5b58\u50a8\u548c\u6d88\u8d39\u8005\u8f93\u51fa\u7684\u5b58\u50a8\u4e4b\u95f4\u5f15\u5165\u4e24\u9636\u6bb5\u63d0\u4ea4\u3002\u4f46\u8fd9\u53ef\u4ee5\u901a\u8fc7\u8ba9\u6d88\u8d39\u8005\u5c06\u5176\u504f\u79fb\u91cf\u5b58\u50a8\u5728\u4e0e\u5176\u8f93\u51fa\u76f8\u540c\u7684\u4f4d\u7f6e\u6765\u66f4\u7b80\u5355\u548c\u66f4\u666e\u904d\u5730\u5904\u7406\u3002\u8fd9\u66f4\u597d\uff0c\u56e0\u4e3a\u6d88\u8d39\u8005\u53ef\u80fd\u60f3\u8981\u5199\u5165\u7684\u8bb8\u591a\u8f93\u51fa\u7cfb\u7edf\u4e0d\u652f\u6301\u4e24\u9636\u6bb5\u63d0\u4ea4\u3002\u4f5c\u4e3a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8003\u8651 Kafka Connect \u8fde\u63a5\u5668\u5c06\u6570\u636e\u53ca\u5176\u8bfb\u53d6\u7684\u6570\u636e\u7684\u504f\u79fb\u91cf\u586b\u5145\u5230 HDFS \u4e2d\uff0c\u4ee5\u4fbf\u4fdd\u8bc1\u6570\u636e\u548c\u504f\u79fb\u91cf\u8981\u4e48\u90fd\u66f4\u65b0\uff0c\u8981\u4e48\u90fd\u4e0d\u66f4\u65b0\u3002\u5bf9\u4e8e\u8bb8\u591a\u5176\u4ed6\u6570\u636e\u7cfb\u7edf\uff0c\u6211\u4eec\u9075\u5faa\u7c7b\u4f3c\u7684\u6a21\u5f0f\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u9700\u8981\u8fd9\u4e9b\u66f4\u5f3a\u7684\u8bed\u4e49\uff0c\u5e76\u4e14\u6d88\u606f\u6ca1\u6709\u4e3b\u952e\u6765\u5141\u8bb8\u91cd\u590d\u6570\u636e\u5220\u9664\u3002 \u56e0\u6b64\uff0cKafka\u6709\u6548\u5730\u652f\u6301Kafka Streams \u4e2d\u7684\u4e00\u6b21\u6027\u4ea4\u4ed8\uff0c\u5e76\u4e14\u5728Kafka\u4e3b\u9898\u4e4b\u95f4\u4f20\u8f93\u548c\u5904\u7406\u6570\u636e\u65f6\uff0c\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528\u4e8b\u52a1\u6027\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\u6765\u63d0\u4f9b\u4e00\u6b21\u6027\u4ea4\u4ed8\u3002\u5176\u4ed6\u76ee\u6807\u7cfb\u7edf\u7684\u4e00\u6b21\u6027\u4ea4\u4ed8\u901a\u5e38\u9700\u8981\u4e0e\u6b64\u7c7b\u7cfb\u7edf\u5408\u4f5c\uff0c\u4f46 Kafka \u63d0\u4f9b\u4e86\u504f\u79fb\u91cf\uff0c\u4f7f\u5f97\u5b9e\u73b0\u8fd9\u4e00\u70b9\u53d8\u5f97\u53ef\u884c\uff08\u53e6\u8bf7\u53c2\u9605 Kafka Connect \uff09\u3002\u5426\u5219\uff0cKafka \u9ed8\u8ba4\u4fdd\u8bc1\u81f3\u5c11\u4e00\u6b21\u4f20\u9001\uff0c\u5e76\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u5728\u5904\u7406\u4e00\u6279\u6d88\u606f\u4e4b\u524d\u7981\u7528\u751f\u4ea7\u8005\u91cd\u8bd5\u5e76\u5728\u6d88\u8d39\u8005\u4e2d\u63d0\u4ea4\u504f\u79fb\u91cf\u6765\u5b9e\u73b0\u6700\u591a\u4e00\u6b21\u4f20\u9001\u3002","title":"4.6 \u6d88\u606f\u4f20\u9012\u8bed\u4e49"},{"location":"4/#47","text":"Kafka \u5728\u53ef\u914d\u7f6e\u6570\u91cf\u7684\u670d\u52a1\u5668\u4e0a\u590d\u5236\u6bcf\u4e2a\u4e3b\u9898\u5206\u533a\u7684\u65e5\u5fd7\uff08\u60a8\u53ef\u4ee5\u9010\u4e2a\u4e3b\u9898\u8bbe\u7f6e\u6b64\u590d\u5236\u56e0\u5b50\uff09\u3002\u5f53\u96c6\u7fa4\u4e2d\u7684\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u65f6\uff0c\u8fd9\u5141\u8bb8\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u5230\u8fd9\u4e9b\u526f\u672c\uff0c\u56e0\u6b64\u6d88\u606f\u5728\u51fa\u73b0\u6545\u969c\u65f6\u4ecd\u7136\u53ef\u7528\u3002 \u5176\u4ed6\u6d88\u606f\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e9b\u4e0e\u590d\u5236\u76f8\u5173\u7684\u529f\u80fd\uff0c\u4f46\u662f\uff0c\u5728\u6211\u4eec\uff08\u5b8c\u5168\u6709\u504f\u89c1\u7684\uff09\u770b\u6765\uff0c\u8fd9\u4f3c\u4e4e\u662f\u4e00\u4e2a\u9644\u52a0\u7684\u4e1c\u897f\uff0c\u6ca1\u6709\u88ab\u5927\u91cf\u4f7f\u7528\uff0c\u5e76\u4e14\u6709\u5f88\u5927\u7684\u7f3a\u70b9\uff1a\u526f\u672c\u4e0d\u6d3b\u52a8\uff0c\u541e\u5410\u91cf\u53d7\u5230\u4e25\u91cd\u5f71\u54cd\uff0c\u5b83\u9700\u8981\u7e41\u7410\u7684\u624b\u52a8\u914d\u7f6e\u7b49\u3002Kafka \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0e\u590d\u5236\u4e00\u8d77\u4f7f\u7528 - \u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u5c06\u672a\u590d\u5236\u7684\u4e3b\u9898\u5b9e\u73b0\u4e3a\u590d\u5236\u4e3b\u9898\uff0c\u5176\u4e2d\u590d\u5236\u56e0\u5b50\u4e3a 1\u3002 \u590d\u5236\u7684\u5355\u4f4d\u662f\u4e3b\u9898\u5206\u533a\u3002\u5728\u975e\u6545\u969c\u6761\u4ef6\u4e0b\uff0cKafka \u4e2d\u7684\u6bcf\u4e2a\u5206\u533a\u90fd\u6709\u4e00\u4e2a\u9886\u5bfc\u8005\u548c\u96f6\u4e2a\u6216\u591a\u4e2a\u8ffd\u968f\u8005\u3002\u5305\u62ec\u9886\u5bfc\u8005\u5728\u5185\u7684\u526f\u672c\u603b\u6570\u6784\u6210\u4e86\u590d\u5236\u56e0\u5b50\u3002\u6240\u6709\u5199\u5165\u90fd\u5c06\u53d1\u9001\u5230\u5206\u533a\u7684\u9886\u5bfc\u8005\uff0c\u800c\u8bfb\u53d6\u53ef\u80fd\u4f1a\u53d1\u9001\u5230\u5206\u533a\u7684\u9886\u5bfc\u8005\u6216\u8ffd\u968f\u8005\u3002\u901a\u5e38\uff0c\u5206\u533a\u7684\u6570\u91cf\u6bd4broker\u591a\u5f97\u591a\uff0c\u5e76\u4e14\u9886\u5bfc\u8005\u5747\u5300\u5206\u5e03\u5728broker\u4e4b\u95f4\u3002\u8ffd\u968f\u8005\u4e0a\u7684\u65e5\u5fd7\u4e0e\u9886\u5bfc\u8005\u7684\u65e5\u5fd7\u76f8\u540c - \u90fd\u5177\u6709\u76f8\u540c\u7684\u504f\u79fb\u91cf\u548c\u76f8\u540c\u987a\u5e8f\u7684\u6d88\u606f\uff08\u5f53\u7136\uff0c\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\uff0c\u9886\u5bfc\u8005\u53ef\u80fd\u5728\u5176\u65e5\u5fd7\u672b\u5c3e\u6709\u4e00\u4e9b\u5c1a\u672a\u590d\u5236\u7684\u6d88\u606f\uff09 \uff09\u3002 \u8ffd\u968f\u8005\u50cf\u666e\u901a Kafka \u6d88\u8d39\u8005\u4e00\u6837\u6d88\u8d39\u6765\u81ea\u9886\u5bfc\u8005\u7684\u6d88\u606f\uff0c\u5e76\u5c06\u5176\u5e94\u7528\u5230\u81ea\u5df1\u7684\u65e5\u5fd7\u4e2d\u3002\u8ba9\u8ffd\u968f\u8005\u4ece\u9886\u5bfc\u8005\u90a3\u91cc\u62c9\u53d6\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u7279\u6027\uff0c\u5373\u5141\u8bb8\u8ffd\u968f\u8005\u81ea\u7136\u5730\u5c06\u4ed6\u4eec\u5e94\u7528\u4e8e\u5176\u65e5\u5fd7\u7684\u65e5\u5fd7\u6761\u76ee\u5206\u6279\u5728\u4e00\u8d77\u3002 \u4e0e\u5927\u591a\u6570\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e00\u6837\uff0c\u81ea\u52a8\u5904\u7406\u6545\u969c\u9700\u8981\u7cbe\u786e\u5b9a\u4e49\u8282\u70b9\u201c\u6d3b\u52a8\u201d\u7684\u542b\u4e49\u3002\u5728Kafka\u4e2d\uff0c\u4e00\u4e2a\u88ab\u79f0\u4e3a\u201c\u63a7\u5236\u5668\u201d\u7684\u7279\u6b8a\u8282\u70b9\u8d1f\u8d23\u7ba1\u7406\u96c6\u7fa4\u4e2dbroker\u7684\u6ce8\u518c\u3002\u7ecf\u7eaa\u5546\u6d3b\u8dc3\u5ea6\u6709\u4e24\u4e2a\u6761\u4ef6\uff1a \u4ee3\u7406\u5fc5\u987b\u4e0e\u63a7\u5236\u5668\u4fdd\u6301\u6d3b\u52a8\u4f1a\u8bdd\uff0c\u4ee5\u4fbf\u5b9a\u671f\u63a5\u6536\u5143\u6570\u636e\u66f4\u65b0\u3002 \u4f5c\u4e3a\u8ffd\u968f\u8005\u7684broker\u5fc5\u987b\u590d\u5236\u9886\u5bfc\u8005\u7684\u5199\u5165\uff0c\u5e76\u4e14\u4e0d\u80fd\u843d\u540e\u201c\u592a\u8fdc\u201d\u3002 \u201c\u6d3b\u52a8\u4f1a\u8bdd\u201d\u7684\u542b\u4e49\u53d6\u51b3\u4e8e\u96c6\u7fa4\u914d\u7f6e\u3002\u5bf9\u4e8e KRaft \u96c6\u7fa4\uff0c\u901a\u8fc7\u5411\u63a7\u5236\u5668\u53d1\u9001\u5b9a\u671f\u5fc3\u8df3\u6765\u7ef4\u62a4\u6d3b\u52a8\u4f1a\u8bdd\u3002\u5982\u679c\u63a7\u5236\u5668\u5728\u914d\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u5230\u671f\u4e4b\u524d\u672a\u80fd\u6536\u5230\u5fc3\u8df3 broker.session.timeout.ms \uff0c\u5219\u8be5\u8282\u70b9\u88ab\u89c6\u4e3a\u79bb\u7ebf\u3002 \u5bf9\u4e8e\u4f7f\u7528 Zookeeper \u7684\u96c6\u7fa4\uff0c\u6d3b\u52a8\u6027\u662f\u901a\u8fc7\u4e34\u65f6\u8282\u70b9\u7684\u5b58\u5728\u6765\u95f4\u63a5\u786e\u5b9a\u7684\uff0c\u4e34\u65f6\u8282\u70b9\u662f\u7531\u4ee3\u7406\u5728\u5176 Zookeeper \u4f1a\u8bdd\u521d\u59cb\u5316\u65f6\u521b\u5efa\u7684\u3002\u5982\u679c\u4ee3\u7406\u5728 \u8fc7\u671f\u4e4b\u524d\u672a\u80fd\u5411 Zookeeper \u53d1\u9001\u5fc3\u8df3\u540e\u4e22\u5931\u4f1a\u8bdd zookeeper.session.timeout.ms \uff0c\u5219\u8be5\u8282\u70b9\u5c06\u88ab\u5220\u9664\u3002\u7136\u540e\uff0c\u63a7\u5236\u5668\u5c06\u901a\u8fc7 Zookeeper \u76d1\u89c6\u6ce8\u610f\u5230\u8282\u70b9\u5220\u9664\uff0c\u5e76\u5c06\u4ee3\u7406\u6807\u8bb0\u4e3a\u79bb\u7ebf\u3002 \u6211\u4eec\u5c06\u6ee1\u8db3\u8fd9\u4e24\u4e2a\u6761\u4ef6\u7684\u8282\u70b9\u79f0\u4e3a\u201c\u540c\u6b65\u201d\uff0c\u4ee5\u907f\u514d\u201c\u6d3b\u52a8\u201d\u6216\u201c\u5931\u8d25\u201d\u7684\u6a21\u7cca\u6027\u3002\u9886\u5bfc\u8005\u8ddf\u8e2a\u4e00\u7ec4\u201c\u540c\u6b65\u201d\u526f\u672c\uff0c\u79f0\u4e3a ISR\u3002\u5982\u679c\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u672a\u80fd\u6ee1\u8db3\uff0c\u5219\u8be5\u7ecf\u7eaa\u5546\u5c06\u4ece ISR \u4e2d\u5220\u9664\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8ddf\u968f\u8005\u6b7b\u4ea1\uff0c\u90a3\u4e48\u63a7\u5236\u5668\u5c06\u901a\u8fc7\u5176\u4f1a\u8bdd\u4e22\u5931\u6ce8\u610f\u5230\u5931\u8d25\uff0c\u5e76\u5c06\u4ece ISR \u4e2d\u5220\u9664\u4ee3\u7406\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u8ffd\u968f\u8005\u843d\u540e\u9886\u5bfc\u8005\u592a\u591a\uff0c\u4f46\u4ecd\u7136\u6709\u6d3b\u52a8\u4f1a\u8bdd\uff0c\u90a3\u4e48\u9886\u5bfc\u8005\u4e5f\u53ef\u4ee5\u5c06\u5176\u4ece ISR \u4e2d\u5220\u9664\u3002\u6ede\u540e\u526f\u672c\u7684\u786e\u5b9a\u662f\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u63a7\u5236\u7684 replica.lag.time.max.ms \u914d\u7f6e\u3002\u5728\u6b64\u914d\u7f6e\u8bbe\u7f6e\u7684\u6700\u5927\u65f6\u95f4\u5185\u65e0\u6cd5\u8d76\u4e0a\u9886\u5bfc\u8005\u65e5\u5fd7\u672b\u5c3e\u7684\u526f\u672c\u5c06\u4ece ISR \u4e2d\u5220\u9664\u3002 \u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u672f\u8bed\u4e2d\uff0c\u6211\u4eec\u53ea\u5c1d\u8bd5\u5904\u7406\u201c\u5931\u8d25/\u6062\u590d\u201d\u6545\u969c\u6a21\u578b\uff0c\u5176\u4e2d\u8282\u70b9\u7a81\u7136\u505c\u6b62\u5de5\u4f5c\uff0c\u7136\u540e\u6062\u590d\uff08\u53ef\u80fd\u4e0d\u77e5\u9053\u5b83\u4eec\u5df2\u7ecf\u6b7b\u4ea1\uff09\u3002Kafka \u4e0d\u5904\u7406\u6240\u8c13\u7684\u201c\u62dc\u5360\u5ead\u201d\u6545\u969c\uff0c\u5373\u8282\u70b9\u4ea7\u751f\u4efb\u610f\u6216\u6076\u610f\u54cd\u5e94\uff08\u53ef\u80fd\u662f\u7531\u4e8e\u9519\u8bef\u6216\u72af\u89c4\uff09\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u7cbe\u786e\u5730\u5b9a\u4e49\uff0c\u5f53\u8be5\u5206\u533a\u7684 ISR \u4e2d\u7684\u6240\u6709\u526f\u672c\u90fd\u5df2\u5c06\u6d88\u606f\u5e94\u7528\u5230\u5176\u65e5\u5fd7\u65f6\uff0c\u8be5\u6d88\u606f\u88ab\u89c6\u4e3a\u5df2\u63d0\u4ea4\u3002\u53ea\u6709\u63d0\u4ea4\u7684\u6d88\u606f\u624d\u4f1a\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u3002\u8fd9\u610f\u5473\u7740\u6d88\u8d39\u8005\u4e0d\u5fc5\u62c5\u5fc3\u5982\u679c\u9886\u5bfc\u8005\u5931\u8d25\u53ef\u80fd\u4f1a\u770b\u5230\u53ef\u80fd\u4e22\u5931\u7684\u6d88\u606f\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u751f\u4ea7\u8005\u53ef\u4ee5\u9009\u62e9\u7b49\u5f85\u6d88\u606f\u63d0\u4ea4\u6216\u4e0d\u63d0\u4ea4\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u4ed6\u4eec\u5bf9\u5ef6\u8fdf\u548c\u6301\u4e45\u6027\u4e4b\u95f4\u6743\u8861\u7684\u504f\u597d\u3002\u6b64\u9996\u9009\u9879\u7531\u751f\u4ea7\u8005\u4f7f\u7528\u7684 ack \u8bbe\u7f6e\u63a7\u5236\u3002\u8bf7\u6ce8\u610f\uff0c\u4e3b\u9898\u5177\u6709\u540c\u6b65\u526f\u672c\u201c\u6700\u5c0f\u6570\u91cf\u201d\u7684\u8bbe\u7f6e\uff0c\u5f53\u751f\u4ea7\u8005\u8bf7\u6c42\u786e\u8ba4\u6d88\u606f\u5df2\u5199\u5165\u5b8c\u6574\u7684\u540c\u6b65\u526f\u672c\u96c6\u65f6\uff0c\u4f1a\u68c0\u67e5\u8be5\u8bbe\u7f6e\u3002 Kafka \u63d0\u4f9b\u7684\u4fdd\u8bc1\u662f\uff0c\u53ea\u8981\u81f3\u5c11\u6709\u4e00\u4e2a\u540c\u6b65\u526f\u672c\u59cb\u7ec8\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002 \u5728\u77ed\u6682\u7684\u6545\u969c\u8f6c\u79fb\u671f\u540e\uff0cKafka \u5c06\u5728\u51fa\u73b0\u8282\u70b9\u6545\u969c\u7684\u60c5\u51b5\u4e0b\u4fdd\u6301\u53ef\u7528\uff0c\u4f46\u5728\u5b58\u5728\u7f51\u7edc\u5206\u533a\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u65e0\u6cd5\u4fdd\u6301\u53ef\u7528\u3002","title":"4.7 \u590d\u5236"},{"location":"4/#isr","text":"Kafka \u5206\u533a\u7684\u6838\u5fc3\u662f\u590d\u5236\u65e5\u5fd7\u3002\u590d\u5236\u65e5\u5fd7\u662f\u5206\u5e03\u5f0f\u6570\u636e\u7cfb\u7edf\u4e2d\u6700\u57fa\u672c\u7684\u539f\u8bed\u4e4b\u4e00\uff0c\u6709\u591a\u79cd\u5b9e\u73b0\u65b9\u6cd5\u3002 \u590d\u5236\u65e5\u5fd7\u53ef\u4ee5\u88ab\u5176\u4ed6\u7cfb\u7edf\u7528\u4f5c\u4ee5\u72b6\u6001\u673a\u65b9\u5f0f \u5b9e\u73b0\u5176\u4ed6\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u539f\u8bed\u3002 \u590d\u5236\u65e5\u5fd7\u6a21\u62df\u4e86\u5c31\u4e00\u7cfb\u5217\u503c\u7684\u987a\u5e8f\u8fbe\u6210\u5171\u8bc6\u7684\u8fc7\u7a0b\uff08\u901a\u5e38\u5c06\u65e5\u5fd7\u6761\u76ee\u7f16\u53f7\u4e3a 0\u30011\u30012...\uff09\u3002\u5b9e\u73b0\u8fd9\u4e00\u70b9\u7684\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u4f46\u6700\u7b80\u5355\u3001\u6700\u5feb\u7684\u65b9\u6cd5\u662f\u7531\u9886\u5bfc\u8005\u9009\u62e9\u63d0\u4f9b\u7ed9\u5b83\u7684\u503c\u7684\u987a\u5e8f\u3002\u53ea\u8981\u9886\u5bfc\u8005\u8fd8\u6d3b\u7740\uff0c\u6240\u6709\u8ffd\u968f\u8005\u53ea\u9700\u590d\u5236\u9886\u5bfc\u8005\u9009\u62e9\u7684\u503c\u548c\u547d\u4ee4\u5373\u53ef\u3002 \u5f53\u7136\uff0c\u5982\u679c\u9886\u5bfc\u8005\u6ca1\u6709\u5931\u8d25\uff0c\u6211\u4eec\u5c31\u4e0d\u9700\u8981\u8ffd\u968f\u8005\uff01\u5f53\u9886\u5bfc\u8005\u6b7b\u4ea1\u65f6\uff0c\u6211\u4eec\u9700\u8981\u4ece\u8ffd\u968f\u8005\u4e2d\u9009\u62e9\u4e00\u4f4d\u65b0\u7684\u9886\u5bfc\u8005\u3002\u4f46\u8ffd\u968f\u8005\u672c\u8eab\u53ef\u80fd\u4f1a\u843d\u540e\u6216\u5d29\u6e83\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u786e\u4fdd\u9009\u62e9\u4e00\u4e2a\u6700\u65b0\u7684\u8ffd\u968f\u8005\u3002\u65e5\u5fd7\u590d\u5236\u7b97\u6cd5\u5fc5\u987b\u63d0\u4f9b\u7684\u57fa\u672c\u4fdd\u8bc1\u662f\uff0c\u5982\u679c\u6211\u4eec\u544a\u8bc9\u5ba2\u6237\u7aef\u4e00\u6761\u6d88\u606f\u5df2\u63d0\u4ea4\uff0c\u5e76\u4e14\u9886\u5bfc\u8005\u5931\u8d25\uff0c\u90a3\u4e48\u6211\u4eec\u9009\u51fa\u7684\u65b0\u9886\u5bfc\u8005\u4e5f\u5fc5\u987b\u5177\u6709\u8be5\u6d88\u606f\u3002\u8fd9\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6743\u8861\uff1a\u5982\u679c\u9886\u5bfc\u8005\u5728\u5ba3\u5e03\u6d88\u606f\u5df2\u63d0\u4ea4\u4e4b\u524d\u7b49\u5f85\u66f4\u591a\u8ffd\u968f\u8005\u786e\u8ba4\u6d88\u606f\uff0c\u90a3\u4e48\u5c06\u4f1a\u6709\u66f4\u591a\u6f5c\u5728\u7684\u5f53\u9009\u9886\u5bfc\u8005\u3002 \u5982\u679c\u60a8\u9009\u62e9\u6240\u9700\u7684\u786e\u8ba4\u6570\u91cf\u548c\u5fc5\u987b\u6bd4\u8f83\u7684\u65e5\u5fd7\u6570\u91cf\u6765\u9009\u4e3e\u9886\u5bfc\u8005\uff0c\u4ee5\u786e\u4fdd\u5b58\u5728\u91cd\u53e0\uff0c\u90a3\u4e48\u8fd9\u79f0\u4e3a\u4ef2\u88c1\u3002 \u8fd9\u79cd\u6743\u8861\u7684\u5e38\u89c1\u65b9\u6cd5\u662f\u5bf9\u63d0\u4ea4\u51b3\u7b56\u548c\u9886\u5bfc\u8005\u9009\u4e3e\u90fd\u4f7f\u7528\u591a\u6570\u7968\u3002\u8fd9\u4e0d\u662f Kafka \u6240\u505a\u7684\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u6211\u4eec\u8fd8\u662f\u8981\u63a2\u7d22\u4e00\u4e0b\u5b83\u4ee5\u4e86\u89e3\u5176\u4e2d\u7684\u6743\u8861\u3002\u5047\u8bbe\u6211\u4eec\u6709 2 f +1 \u4e2a\u526f\u672c\u3002\u5982\u679c f +1 \u4e2a\u526f\u672c\u5fc5\u987b\u5728\u9886\u5bfc\u8005\u58f0\u660e\u63d0\u4ea4\u4e4b\u524d\u63a5\u6536\u6d88\u606f\uff0c\u5e76\u4e14\u5982\u679c\u6211\u4eec\u901a\u8fc7\u4ece\u81f3\u5c11 f +1 \u4e2a\u526f\u672c\u4e2d\u9009\u4e3e\u5177\u6709\u6700\u5b8c\u6574\u65e5\u5fd7\u7684\u8ffd\u968f\u8005\u6765\u9009\u4e3e\u65b0\u7684\u9886\u5bfc\u8005\uff0c\u90a3\u4e48\uff0c\u4e0d\u8d85\u8fc7 f \u5931\u8d25\u65f6\uff0c\u9886\u5bfc\u8005\u4fdd\u8bc1\u62e5\u6709\u6240\u6709\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u4efb\u4f55 f +1 \u4e2a\u526f\u672c\uff0c\u5fc5\u987b\u81f3\u5c11\u6709\u4e00\u4e2a\u526f\u672c\u5305\u542b\u6240\u6709\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002\u8be5\u526f\u672c\u7684\u65e5\u5fd7\u5c06\u662f\u6700\u5b8c\u6574\u7684\uff0c\u56e0\u6b64\u5c06\u88ab\u9009\u4e3a\u65b0\u7684\u9886\u5bfc\u8005\u3002\u6bcf\u4e2a\u7b97\u6cd5\u8fd8\u5fc5\u987b\u5904\u7406\u8bb8\u591a\u5269\u4f59\u7684\u7ec6\u8282\uff08\u4f8b\u5982\u7cbe\u786e\u5b9a\u4e49\u4ec0\u4e48\u4f7f\u65e5\u5fd7\u66f4\u5b8c\u6574\uff0c\u786e\u4fdd\u9886\u5bfc\u8005\u6545\u969c\u671f\u95f4\u7684\u65e5\u5fd7\u4e00\u81f4\u6027\u6216\u66f4\u6539\u526f\u672c\u96c6\u4e2d\u7684\u670d\u52a1\u5668\u96c6\uff09\uff0c\u4f46\u6211\u4eec\u73b0\u5728\u5c06\u5ffd\u7565\u8fd9\u4e9b\u3002 \u8fd9\u79cd\u591a\u6570\u6295\u7968\u65b9\u6cd5\u6709\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u7279\u6027\uff1a\u5ef6\u8fdf\u4ec5\u53d6\u51b3\u4e8e\u6700\u5feb\u7684\u670d\u52a1\u5668\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u590d\u5236\u56e0\u5b50\u4e3a 3\uff0c\u5219\u5ef6\u8fdf\u7531\u8f83\u5feb\u7684\u8ddf\u968f\u8005\u51b3\u5b9a\uff0c\u800c\u4e0d\u662f\u7531\u8f83\u6162\u7684\u8ddf\u968f\u8005\u51b3\u5b9a\u3002 \u8fd9\u4e2a\u5bb6\u65cf\u4e2d\u6709\u5404\u79cd\u5404\u6837\u7684\u7b97\u6cd5\uff0c\u5305\u62ec ZooKeeper \u7684 Zab \u3001 Raft \u548c Viewstamped Replication \u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u4e0e Kafka \u5b9e\u9645\u5b9e\u73b0\u6700\u76f8\u4f3c\u7684\u5b66\u672f\u51fa\u7248\u7269\u662f Microsoft \u7684 PacificA \u3002 \u591a\u6570\u6295\u7968\u7684\u7f3a\u70b9\u662f\uff0c\u4e0d\u9700\u8981\u591a\u6b21\u5931\u8d25\u5c31\u4f1a\u5bfc\u81f4\u6ca1\u6709\u53ef\u4f9b\u9009\u4e3e\u7684\u9886\u5bfc\u4eba\u3002\u5bb9\u5fcd\u4e00\u6b21\u6545\u969c\u9700\u8981\u4e09\u4efd\u6570\u636e\uff0c\u5bb9\u5fcd\u4e24\u6b21\u6545\u969c\u9700\u8981\u4e94\u4efd\u6570\u636e\u3002\u6839\u636e\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u53ea\u6709\u8db3\u591f\u7684\u5197\u4f59\u6765\u5bb9\u5fcd\u5355\u4e2a\u6545\u969c\u5bf9\u4e8e\u5b9e\u9645\u7cfb\u7edf\u6765\u8bf4\u662f\u4e0d\u591f\u7684\uff0c\u4f46\u662f\u5bf9\u4e8e\u5927\u5bb9\u91cf\u6570\u636e\u95ee\u9898\u6765\u8bf4\uff0c\u6bcf\u6b21\u5199\u5165\u4e94\u6b21\uff0c\u78c1\u76d8\u7a7a\u95f4\u8981\u6c42\u4e3a 5 \u500d\uff0c\u541e\u5410\u91cf\u4e3a 1/5\uff0c\u8fd9\u4e0d\u592a\u5b9e\u7528\u3002\u8fd9\u53ef\u80fd\u5c31\u662f\u4e3a\u4ec0\u4e48\u4ef2\u88c1\u7b97\u6cd5\u66f4\u5e38\u51fa\u73b0\u5728\u5171\u4eab\u96c6\u7fa4\u914d\u7f6e\uff08\u4f8b\u5982 ZooKeeper\uff09\u4e2d\uff0c\u4f46\u5728\u4e3b\u6570\u636e\u5b58\u50a8\u4e2d\u5374\u4e0d\u592a\u5e38\u89c1\u3002\u4f8b\u5982\uff0c\u5728 HDFS \u4e2d\uff0cnamenode \u7684\u9ad8\u53ef\u7528\u6027\u529f\u80fd\u662f\u5efa\u7acb\u5728 \u57fa\u4e8e\u591a\u6570\u7968\u7684\u65e5\u5fd7\u4e4b\u4e0a\u7684 \uff0c\u4f46\u8fd9\u79cd\u66f4\u6602\u8d35\u7684\u65b9\u6cd5\u5e76\u4e0d\u7528\u4e8e\u6570\u636e\u672c\u8eab\u3002 Kafka \u91c7\u7528\u7565\u6709\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u9009\u62e9\u4ef2\u88c1\u96c6\u3002Kafka \u4e0d\u662f\u591a\u6570\u6295\u7968\uff0c\u800c\u662f\u52a8\u6001\u7ef4\u62a4\u4e00\u7ec4\u8d76\u4e0a\u9886\u5bfc\u8005\u7684\u540c\u6b65\u526f\u672c (ISR)\u3002\u53ea\u6709\u8be5\u7ec4\u7684\u6210\u5458\u624d\u6709\u8d44\u683c\u5f53\u9009\u4e3a\u9886\u5bfc\u8005\u3002 \u5728\u6240\u6709 \u540c\u6b65\u526f\u672c\u90fd\u6536\u5230\u5199\u5165\u4e4b\u524d\uff0c\u5bf9 Kafka \u5206\u533a\u7684\u5199\u5165\u4e0d\u4f1a\u88ab\u89c6\u4e3a\u5df2\u63d0\u4ea4\u3002\u53ea\u8981\u8be5 ISR \u96c6\u53d1\u751f\u66f4\u6539\uff0c\u5b83\u5c31\u4f1a\u4fdd\u7559\u5728\u96c6\u7fa4\u5143\u6570\u636e\u4e2d\u3002\u56e0\u6b64\uff0cISR \u4e2d\u7684\u4efb\u4f55\u526f\u672c\u90fd\u6709\u8d44\u683c\u88ab\u9009\u4e3e\u4e3a\u9886\u5bfc\u8005\u3002\u5bf9\u4e8e Kafka \u7684\u4f7f\u7528\u6a21\u578b\u6765\u8bf4\uff0c\u8fd9\u662f\u4e00\u4e2a\u91cd\u8981\u56e0\u7d20\uff0c\u5176\u4e2d\u6709\u5f88\u591a\u5206\u533a\uff0c\u786e\u4fdd\u9886\u5bfc\u5e73\u8861\u5f88\u91cd\u8981\u3002\u501f\u52a9\u6b64 ISR \u6a21\u578b\u548c f+1 \u4e2a \u526f\u672c\uff0cKafka \u4e3b\u9898\u53ef\u4ee5\u5bb9\u5fcd f \u4e2a \u6545\u969c\u800c\u4e0d\u4f1a\u4e22\u5931\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002 \u5bf9\u4e8e\u6211\u4eec\u5e0c\u671b\u5904\u7406\u7684\u5927\u591a\u6570\u7528\u4f8b\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u79cd\u6743\u8861\u662f\u5408\u7406\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u4e3a\u4e86\u5bb9\u5fcd \u5931\u8d25 \uff0c\u591a\u6570\u6295\u7968\u548c ISR \u65b9\u6cd5\u90fd\u5c06\u5728\u63d0\u4ea4\u6d88\u606f\u4e4b\u524d\u7b49\u5f85\u76f8\u540c\u6570\u91cf\u7684\u526f\u672c\u8fdb\u884c\u786e\u8ba4\uff08\u4f8b\u5982\uff0c\u4e3a\u4e86\u5728\u4e00\u6b21\u5931\u8d25\u4e2d\u5e78\u5b58\uff0c\u591a\u6570\u4ef2\u88c1\u9700\u8981\u4e09\u4e2a\u526f\u672c\u548c\u4e00\u4e2a\u786e\u8ba4\uff0c\u800c ISR \u65b9\u6cd5\u9700\u8981\u4e24\u4e2a\u526f\u672c\u548c\u4e00\u4e2a\u786e\u8ba4\uff09\u3002\u65e0\u9700\u6700\u6162\u7684\u670d\u52a1\u5668\u5373\u53ef\u63d0\u4ea4\u7684\u80fd\u529b\u662f\u591a\u6570\u6295\u7968\u65b9\u6cd5\u7684\u4f18\u70b9\u3002\u7136\u800c\uff0c\u6211\u4eec\u8ba4\u4e3a\u901a\u8fc7\u5141\u8bb8\u5ba2\u6237\u7aef\u9009\u62e9\u662f\u5426\u5728\u6d88\u606f\u63d0\u4ea4\u65f6\u963b\u585e\u53ef\u4ee5\u6539\u5584\u8fd9\u4e00\u60c5\u51b5\uff0c\u5e76\u4e14\u7531\u4e8e\u6240\u9700\u7684\u590d\u5236\u56e0\u5b50\u8f83\u4f4e\u800c\u5e26\u6765\u7684\u989d\u5916\u541e\u5410\u91cf\u548c\u78c1\u76d8\u7a7a\u95f4\u662f\u503c\u5f97\u7684\u3002 \u53e6\u4e00\u4e2a\u91cd\u8981\u7684\u8bbe\u8ba1\u533a\u522b\u662f Kafka \u4e0d\u8981\u6c42\u5d29\u6e83\u7684\u8282\u70b9\u6062\u590d\u65f6\u6240\u6709\u6570\u636e\u90fd\u5b8c\u597d\u65e0\u635f\u3002\u8be5\u9886\u57df\u7684\u590d\u5236\u7b97\u6cd5\u4f9d\u8d56\u4e8e\u201c\u7a33\u5b9a\u5b58\u50a8\u201d\u7684\u5b58\u5728\u5e76\u4e0d\u5c11\u89c1\uff0c\u201c\u7a33\u5b9a\u5b58\u50a8\u201d\u5728\u4efb\u4f55\u6545\u969c\u6062\u590d\u573a\u666f\u4e2d\u90fd\u4e0d\u4f1a\u4e22\u5931\uff0c\u800c\u4e0d\u4f1a\u5bfc\u81f4\u6f5c\u5728\u7684\u4e00\u81f4\u6027\u8fdd\u89c4\u3002\u8fd9\u4e2a\u5047\u8bbe\u6709\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\u3002\u9996\u5148\uff0c\u78c1\u76d8\u9519\u8bef\u662f\u6211\u4eec\u5728\u6301\u4e45\u6570\u636e\u7cfb\u7edf\u7684\u5b9e\u9645\u64cd\u4f5c\u4e2d\u89c2\u5bdf\u5230\u7684\u6700\u5e38\u89c1\u95ee\u9898\uff0c\u5e76\u4e14\u5b83\u4eec\u901a\u5e38\u4e0d\u4f1a\u4f7f\u6570\u636e\u5b8c\u597d\u65e0\u635f\u3002\u5176\u6b21\uff0c\u5373\u4f7f\u8fd9\u4e0d\u662f\u95ee\u9898\uff0c\u6211\u4eec\u4e5f\u4e0d\u5e0c\u671b\u5728\u6bcf\u6b21\u5199\u5165\u65f6\u90fd\u4f7f\u7528 fsync \u6765\u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u5c06\u6027\u80fd\u964d\u4f4e\u4e24\u5230\u4e09\u4e2a\u6570\u91cf\u7ea7\u3002\u6211\u4eec\u5141\u8bb8\u526f\u672c\u91cd\u65b0\u52a0\u5165 ISR \u7684\u534f\u8bae\u786e\u4fdd\u5728\u91cd\u65b0\u52a0\u5165\u4e4b\u524d\uff0c","title":"\u590d\u5236\u65e5\u5fd7\uff1a\u4ef2\u88c1\u3001ISR \u548c\u72b6\u6001\u673a\uff08\u5929\u54ea\uff01\uff09"},{"location":"4/#_10","text":"\u8bf7\u6ce8\u610f\uff0cKafka \u5bf9\u6570\u636e\u4e22\u5931\u7684\u4fdd\u8bc1\u662f\u57fa\u4e8e\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u4fdd\u6301\u540c\u6b65\u3002\u5982\u679c\u590d\u5236\u5206\u533a\u7684\u6240\u6709\u8282\u70b9\u90fd\u6b7b\u4ea1\uff0c\u5219\u6b64\u4fdd\u8bc1\u4e0d\u518d\u6210\u7acb\u3002 \u7136\u800c\uff0c\u5f53\u6240\u6709\u526f\u672c\u6b7b\u4ea1\u65f6\uff0c\u4e00\u4e2a\u5b9e\u7528\u7684\u7cfb\u7edf\u9700\u8981\u505a\u4e00\u4e9b\u5408\u7406\u7684\u4e8b\u60c5\u3002\u5982\u679c\u60a8\u4e0d\u5e78\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u91cd\u8981\u7684\u662f\u8981\u8003\u8651\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002\u6709\u4e24\u79cd\u53ef\u4ee5\u5b9e\u73b0\u7684\u884c\u4e3a\uff1a \u7b49\u5f85 ISR \u4e2d\u7684\u526f\u672c\u6062\u590d\u5e76\u9009\u62e9\u8be5\u526f\u672c\u4f5c\u4e3a\u9886\u5bfc\u8005\uff08\u5e0c\u671b\u5b83\u4ecd\u7136\u62e5\u6709\u6240\u6709\u6570\u636e\uff09\u3002 \u9009\u62e9\u7b2c\u4e00\u4e2a\u4f5c\u4e3a\u9886\u5bfc\u8005\u590d\u6d3b\u7684\u526f\u672c\uff08\u4e0d\u4e00\u5b9a\u5728 ISR \u4e2d\uff09\u3002 \u8fd9\u662f\u53ef\u7528\u6027\u548c\u4e00\u81f4\u6027\u4e4b\u95f4\u7684\u7b80\u5355\u6743\u8861\u3002\u5982\u679c\u6211\u4eec\u5728 ISR \u4e2d\u7b49\u5f85\u526f\u672c\uff0c\u90a3\u4e48\u53ea\u8981\u8fd9\u4e9b\u526f\u672c\u5173\u95ed\uff0c\u6211\u4eec\u5c31\u5c06\u4fdd\u6301\u4e0d\u53ef\u7528\u72b6\u6001\u3002\u5982\u679c\u6b64\u7c7b\u526f\u672c\u88ab\u7834\u574f\u6216\u6570\u636e\u4e22\u5931\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4f1a\u6c38\u4e45\u762b\u75ea\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u4e00\u4e2a\u975e\u540c\u6b65\u526f\u672c\u6062\u590d\u6b63\u5e38\uff0c\u5e76\u4e14\u6211\u4eec\u5141\u8bb8\u5b83\u6210\u4e3a\u9886\u5bfc\u8005\uff0c\u90a3\u4e48\u5b83\u7684\u65e5\u5fd7\u5c31\u4f1a\u6210\u4e3a\u4e8b\u5b9e\u6765\u6e90\uff0c\u5373\u4f7f\u5b83\u4e0d\u80fd\u4fdd\u8bc1\u62e5\u6709\u6bcf\u6761\u5df2\u63d0\u4ea4\u7684\u6d88\u606f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ece 0.11.0.0 \u7248\u672c\u5f00\u59cb\uff0cKafka \u9009\u62e9\u7b2c\u4e00\u79cd\u7b56\u7565\u5e76\u503e\u5411\u4e8e\u7b49\u5f85\u4e00\u81f4\u7684\u526f\u672c\u3002\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u5c5e\u6027 unclean.leader.election.enable \u66f4\u6539\u6b64\u884c\u4e3a\uff0c\u4ee5\u652f\u6301\u6b63\u5e38\u8fd0\u884c\u65f6\u95f4\u4f18\u4e8e\u4e00\u81f4\u6027\u7684\u7528\u4f8b\u3002 \u8fd9\u79cd\u56f0\u5883\u5e76\u4e0d\u662fKafka\u7279\u6709\u7684\u3002\u5b83\u5b58\u5728\u4e8e\u4efb\u4f55\u57fa\u4e8e\u4ef2\u88c1\u7684\u65b9\u6848\u4e2d\u3002\u4f8b\u5982\uff0c\u5728\u591a\u6570\u6295\u7968\u65b9\u6848\u4e2d\uff0c\u5982\u679c\u5927\u591a\u6570\u670d\u52a1\u5668\u906d\u53d7\u6c38\u4e45\u6027\u6545\u969c\uff0c\u90a3\u4e48\u60a8\u5fc5\u987b\u9009\u62e9\u4e22\u5931 100% \u7684\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5c06\u73b0\u6709\u670d\u52a1\u5668\u4e0a\u5269\u4f59\u7684\u6570\u636e\u4f5c\u4e3a\u65b0\u7684\u4e8b\u5b9e\u6765\u6e90\u6765\u8fdd\u53cd\u4e00\u81f4\u6027\u3002","title":"\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u4eba\u9009\u4e3e\uff1a\u5982\u679c\u4ed6\u4eec\u90fd\u6b7b\u4e86\u600e\u4e48\u529e\uff1f"},{"location":"4/#_11","text":"\u5f53\u5199\u5165 Kafka \u65f6\uff0c\u751f\u4ea7\u8005\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u7b49\u5f85 0,1 \u6216\u6240\u6709\uff08-1\uff09\u526f\u672c\u786e\u8ba4\u6d88\u606f\u3002\u8bf7\u6ce8\u610f\uff0c\u201c\u6240\u6709\u526f\u672c\u7684\u786e\u8ba4\u201d\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u5206\u914d\u7684\u526f\u672c\u90fd\u5df2\u6536\u5230\u8be5\u6d88\u606f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53 acks=all \u65f6\uff0c\u4e00\u65e6\u6240\u6709\u5f53\u524d\u540c\u6b65\u526f\u672c\u6536\u5230\u6d88\u606f\uff0c\u5c31\u4f1a\u7acb\u5373\u53d1\u751f\u786e\u8ba4\u3002\u4f8b\u5982\uff0c\u5982\u679c\u67d0\u4e2a\u4e3b\u9898\u4ec5\u914d\u7f6e\u4e86\u4e24\u4e2a\u526f\u672c\uff0c\u5176\u4e2d\u4e00\u4e2a\u5931\u8d25\uff08\u5373\u4ec5\u4fdd\u7559\u4e00\u4e2a\u540c\u6b65\u526f\u672c\uff09\uff0c\u5219\u6307\u5b9a acks=all \u7684\u5199\u5165\u5c06\u4f1a\u6210\u529f\u3002\u4f46\u662f\uff0c\u5982\u679c\u5269\u4f59\u526f\u672c\u4e5f\u53d1\u751f\u6545\u969c\uff0c\u8fd9\u4e9b\u5199\u5165\u53ef\u80fd\u4f1a\u4e22\u5931\u3002\u5c3d\u7ba1\u8fd9\u786e\u4fdd\u4e86\u5206\u533a\u7684\u6700\u5927\u53ef\u7528\u6027\uff0c\u4f46\u5bf9\u4e8e\u67d0\u4e9b\u66f4\u559c\u6b22\u6301\u4e45\u6027\u800c\u4e0d\u662f\u53ef\u7528\u6027\u7684\u7528\u6237\u6765\u8bf4\uff0c\u8fd9\u79cd\u884c\u4e3a\u53ef\u80fd\u662f\u4e0d\u53d7\u6b22\u8fce\u7684\u3002\u6240\u4ee5\uff0c \u7981\u7528\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e - \u5982\u679c\u6240\u6709\u526f\u672c\u90fd\u4e0d\u53ef\u7528\uff0c\u5219\u5206\u533a\u5c06\u4fdd\u6301\u4e0d\u53ef\u7528\uff0c\u76f4\u5230\u6700\u8fd1\u7684\u9886\u5bfc\u8005\u518d\u6b21\u53ef\u7528\u3002\u8fd9\u5b9e\u9645\u4e0a\u66f4\u503e\u5411\u4e8e\u4e0d\u53ef\u7528\u800c\u4e0d\u662f\u6d88\u606f\u4e22\u5931\u7684\u98ce\u9669\u3002\u8bf7\u53c2\u9605\u4e0a\u4e00\u8282\u5173\u4e8e\u4e0d\u5e72\u51c0\u7684\u9886\u5bfc\u8005\u9009\u4e3e\u7684\u8bf4\u660e\u3002 \u6307\u5b9a\u6700\u5c0f ISR \u5927\u5c0f - \u4ec5\u5f53 ISR \u5927\u5c0f\u9ad8\u4e8e\u67d0\u4e2a\u6700\u5c0f\u503c\u65f6\uff0c\u5206\u533a\u624d\u4f1a\u63a5\u53d7\u5199\u5165\uff0c\u4ee5\u9632\u6b62\u4ec5\u5199\u5165\u5355\u4e2a\u526f\u672c\u7684\u6d88\u606f\u4e22\u5931\uff0c\u8be5\u526f\u672c\u968f\u540e\u53d8\u5f97\u4e0d\u53ef\u7528\u3002\u4ec5\u5f53\u751f\u4ea7\u8005\u4f7f\u7528 acks=all \u5e76\u4fdd\u8bc1\u6d88\u606f\u5c06\u88ab\u81f3\u5c11\u8fd9\u4e48\u591a\u540c\u6b65\u526f\u672c\u786e\u8ba4\u65f6\uff0c\u6b64\u8bbe\u7f6e\u624d\u4f1a\u751f\u6548\u3002\u6b64\u8bbe\u7f6e\u63d0\u4f9b\u4e86\u4e00\u81f4\u6027\u548c\u53ef\u7528\u6027\u4e4b\u95f4\u7684\u6743\u8861\u3002\u6700\u5c0f ISR \u5927\u5c0f\u7684\u8f83\u9ad8\u8bbe\u7f6e\u53ef\u4ee5\u4fdd\u8bc1\u66f4\u597d\u7684\u4e00\u81f4\u6027\uff0c\u56e0\u4e3a\u6d88\u606f\u53ef\u4ee5\u4fdd\u8bc1\u5199\u5165\u66f4\u591a\u526f\u672c\uff0c\u4ece\u800c\u964d\u4f4e\u4e22\u5931\u7684\u53ef\u80fd\u6027\u3002\u4f46\u662f\uff0c\u5b83\u4f1a\u964d\u4f4e\u53ef\u7528\u6027\uff0c\u56e0\u4e3a\u5982\u679c\u540c\u6b65\u526f\u672c\u7684\u6570\u91cf\u4f4e\u4e8e\u6700\u5c0f\u9608\u503c\uff0c\u5219\u5206\u533a\u5c06\u65e0\u6cd5\u7528\u4e8e\u5199\u5165\u3002","title":"\u53ef\u7528\u6027\u548c\u8010\u7528\u6027\u4fdd\u8bc1"},{"location":"4/#_12","text":"\u4e0a\u9762\u5173\u4e8e\u590d\u5236\u65e5\u5fd7\u7684\u8ba8\u8bba\u5b9e\u9645\u4e0a\u53ea\u6db5\u76d6\u4e86\u5355\u4e2a\u65e5\u5fd7\uff0c\u5373\u4e00\u4e2a\u4e3b\u9898\u5206\u533a\u3002\u7136\u800c\uff0cKafka \u96c6\u7fa4\u5c06\u7ba1\u7406\u6570\u767e\u6216\u6570\u5343\u4e2a\u8fd9\u6837\u7684\u5206\u533a\u3002\u6211\u4eec\u5c1d\u8bd5\u4ee5\u5faa\u73af\u65b9\u5f0f\u5e73\u8861\u96c6\u7fa4\u5185\u7684\u5206\u533a\uff0c\u4ee5\u907f\u514d\u5c06\u5927\u91cf\u4e3b\u9898\u7684\u6240\u6709\u5206\u533a\u805a\u96c6\u5728\u5c11\u91cf\u8282\u70b9\u4e0a\u3002\u540c\u6837\uff0c\u6211\u4eec\u5c1d\u8bd5\u5e73\u8861\u9886\u5bfc\u529b\uff0c\u4ee5\u4fbf\u6bcf\u4e2a\u8282\u70b9\u90fd\u662f\u5176\u5206\u533a\u4e2d\u4e00\u5b9a\u6bd4\u4f8b\u4efd\u989d\u7684\u9886\u5bfc\u8005\u3002 \u4f18\u5316\u9886\u5bfc\u9009\u4e3e\u6d41\u7a0b\u4e5f\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e0d\u53ef\u7528\u7684\u5173\u952e\u7a97\u53e3\u3002\u9886\u5bfc\u8005\u9009\u4e3e\u7684\u7b80\u5355\u5b9e\u73b0\u6700\u7ec8\u4f1a\u5728\u8be5\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\u4e3a\u8be5\u8282\u70b9\u6258\u7ba1\u7684\u6240\u6709\u5206\u533a\u8fd0\u884c\u6bcf\u4e2a\u5206\u533a\u7684\u9009\u4e3e\u3002 \u6b63\u5982\u4e0a\u9762\u6709\u5173\u590d\u5236\u7684 \u90e8\u5206\u6240\u8ba8\u8bba\u7684 Kafka\u96c6\u7fa4\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u89d2\u8272\uff0c\u79f0\u4e3a\u201c\u63a7\u5236\u5668\u201d\uff0c\u8d1f\u8d23\u7ba1\u7406broker\u7684\u6ce8\u518c\u3002\u5982\u679c\u63a7\u5236\u5668\u68c0\u6d4b\u5230\u4ee3\u7406\u53d1\u751f\u6545\u969c\uff0c\u5219\u5b83\u8d1f\u8d23\u9009\u4e3e ISR \u7684\u5269\u4f59\u6210\u5458\u4e4b\u4e00\u4f5c\u4e3a\u65b0\u7684\u9886\u5bfc\u8005\u3002\u7ed3\u679c\u662f\uff0c\u6211\u4eec\u80fd\u591f\u5c06\u8bb8\u591a\u6240\u9700\u7684\u9886\u5bfc\u5c42\u53d8\u66f4\u901a\u77e5\u6279\u5904\u7406\u5728\u4e00\u8d77\uff0c\u8fd9\u4f7f\u5f97\u5927\u91cf\u5206\u533a\u7684\u9009\u4e3e\u8fc7\u7a0b\u66f4\u52a0\u4fbf\u5b9c\u4e14\u66f4\u5feb\u3002\u5982\u679c\u63a7\u5236\u5668\u672c\u8eab\u53d1\u751f\u6545\u969c\uff0c\u5219\u5c06\u9009\u4e3e\u53e6\u4e00\u4e2a\u63a7\u5236\u5668\u3002","title":"\u526f\u672c\u7ba1\u7406"},{"location":"4/#48","text":"\u65e5\u5fd7\u538b\u7f29\u786e\u4fdd Kafka \u59cb\u7ec8\u81f3\u5c11\u4fdd\u7559\u5355\u4e2a\u4e3b\u9898\u5206\u533a\u7684\u6570\u636e\u65e5\u5fd7\u4e2d\u6bcf\u4e2a\u6d88\u606f\u952e\u7684\u6700\u540e\u4e00\u4e2a\u5df2\u77e5\u503c\u3002\u5b83\u89e3\u51b3\u4e86\u7528\u4f8b\u548c\u573a\u666f\uff0c\u4f8b\u5982\u5e94\u7528\u7a0b\u5e8f\u5d29\u6e83\u6216\u7cfb\u7edf\u6545\u969c\u540e\u6062\u590d\u72b6\u6001\uff0c\u6216\u5728\u64cd\u4f5c\u7ef4\u62a4\u671f\u95f4\u5e94\u7528\u7a0b\u5e8f\u91cd\u65b0\u542f\u52a8\u540e\u91cd\u65b0\u52a0\u8f7d\u7f13\u5b58\u3002\u8ba9\u6211\u4eec\u66f4\u8be6\u7ec6\u5730\u7814\u7a76\u8fd9\u4e9b\u7528\u4f8b\uff0c\u7136\u540e\u63cf\u8ff0\u538b\u7f29\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u4ec5\u63cf\u8ff0\u4e86\u66f4\u7b80\u5355\u7684\u6570\u636e\u4fdd\u7559\u65b9\u6cd5\uff0c\u5176\u4e2d\u65e7\u65e5\u5fd7\u6570\u636e\u5728\u56fa\u5b9a\u65f6\u95f4\u6bb5\u540e\u6216\u5f53\u65e5\u5fd7\u8fbe\u5230\u67d0\u4e2a\u9884\u5b9a\u5927\u5c0f\u65f6\u88ab\u4e22\u5f03\u3002\u8fd9\u5bf9\u4e8e\u65f6\u95f4\u4e8b\u4ef6\u6570\u636e\u975e\u5e38\u6709\u6548\uff0c\u4f8b\u5982\u8bb0\u5f55\u6bcf\u4e2a\u8bb0\u5f55\u72ec\u7acb\u7684\u60c5\u51b5\u3002\u7136\u800c\uff0c\u4e00\u7c7b\u91cd\u8981\u7684\u6570\u636e\u6d41\u662f\u5bf9\u952e\u63a7\u3001\u53ef\u53d8\u6570\u636e\u7684\u66f4\u6539\u7684\u65e5\u5fd7\uff08\u4f8b\u5982\uff0c\u5bf9\u6570\u636e\u5e93\u8868\u7684\u66f4\u6539\uff09\u3002 \u8ba9\u6211\u4eec\u8ba8\u8bba\u8fd9\u6837\u4e00\u4e2a\u6d41\u7684\u5177\u4f53\u793a\u4f8b\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u5305\u542b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7684\u4e3b\u9898\uff1b\u6bcf\u6b21\u7528\u6237\u66f4\u65b0\u5176\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u65f6\uff0c\u6211\u4eec\u90fd\u4f1a\u4f7f\u7528\u5176\u7528\u6237 ID \u4f5c\u4e3a\u4e3b\u952e\u5411\u8be5\u4e3b\u9898\u53d1\u9001\u4e00\u6761\u6d88\u606f\u3002\u73b0\u5728\u5047\u8bbe\u6211\u4eec\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u4e3a id \u4e3a 123 \u7684\u7528\u6237\u53d1\u9001\u4ee5\u4e0b\u6d88\u606f\uff0c\u6bcf\u6761\u6d88\u606f\u5bf9\u5e94\u4e8e\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7684\u66f4\u6539\uff08\u5176\u4ed6 id \u7684\u6d88\u606f\u88ab\u7701\u7565\uff09\uff1a 123 => bill@microsoft.com . . . 123 => bill@gatesfoundation.org . . . 123 => bill@gmail.com \u65e5\u5fd7\u538b\u7f29\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u7ec6\u7c92\u5ea6\u7684\u4fdd\u7559\u673a\u5236\uff0c\u4ee5\u4fbf\u4fdd\u8bc1\u6211\u4eec\u81f3\u5c11\u4fdd\u7559\u6bcf\u4e2a\u4e3b\u952e\u7684\u6700\u540e\u66f4\u65b0\uff08\u4f8b\u5982 bill@gmail.com \uff09\u3002\u901a\u8fc7\u8fd9\u6837\u505a\uff0c\u6211\u4eec\u4fdd\u8bc1\u65e5\u5fd7\u5305\u542b\u6bcf\u4e2a\u952e\u7684\u6700\u7ec8\u503c\u7684\u5b8c\u6574\u5feb\u7167\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6700\u8fd1\u66f4\u6539\u7684\u952e\u3002\u8fd9\u610f\u5473\u7740\u4e0b\u6e38\u6d88\u8d39\u8005\u53ef\u4ee5\u5728\u8be5\u4e3b\u9898\u4e4b\u5916\u6062\u590d\u81ea\u5df1\u7684\u72b6\u6001\uff0c\u800c\u65e0\u9700\u6211\u4eec\u4fdd\u7559\u6240\u6709\u66f4\u6539\u7684\u5b8c\u6574\u65e5\u5fd7\u3002 \u8ba9\u6211\u4eec\u9996\u5148\u770b\u4e00\u4e9b\u6709\u7528\u7684\u7528\u4f8b\uff0c\u7136\u540e\u6211\u4eec\u5c06\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u5b83\u3002 \u6570\u636e\u5e93\u53d8\u66f4\u8ba2\u9605 \u3002\u901a\u5e38\u9700\u8981\u5728\u591a\u4e2a\u6570\u636e\u7cfb\u7edf\u4e2d\u62e5\u6709\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u5e76\u4e14\u901a\u5e38\u8fd9\u4e9b\u7cfb\u7edf\u4e4b\u4e00\u662f\u67d0\u79cd\u6570\u636e\u5e93\uff08RDBMS \u6216\u53ef\u80fd\u662f\u65b0\u578b\u952e\u503c\u5b58\u50a8\uff09\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u6709\u4e00\u4e2a\u6570\u636e\u5e93\u3001\u4e00\u4e2a\u7f13\u5b58\u3001\u4e00\u4e2a\u641c\u7d22\u96c6\u7fa4\u548c\u4e00\u4e2a Hadoop \u96c6\u7fa4\u3002\u5bf9\u6570\u636e\u5e93\u7684\u6bcf\u6b21\u66f4\u6539\u90fd\u9700\u8981\u53cd\u6620\u5728\u7f13\u5b58\u3001\u641c\u7d22\u96c6\u7fa4\u4e2d\uff0c\u5e76\u6700\u7ec8\u53cd\u6620\u5728 Hadoop \u4e2d\u3002\u5982\u679c\u53ea\u5904\u7406\u5b9e\u65f6\u66f4\u65b0\uff0c\u60a8\u53ea\u9700\u8981\u6700\u8fd1\u7684\u65e5\u5fd7\u3002\u4f46\u5982\u679c\u60a8\u5e0c\u671b\u80fd\u591f\u91cd\u65b0\u52a0\u8f7d\u7f13\u5b58\u6216\u6062\u590d\u5931\u8d25\u7684\u641c\u7d22\u8282\u70b9\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u5b8c\u6574\u7684\u6570\u636e\u96c6\u3002 \u4e8b\u4ef6\u6eaf\u6e90 \u3002\u8fd9\u662f\u4e00\u79cd\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u98ce\u683c\uff0c\u5b83\u5c06\u67e5\u8be2\u5904\u7406\u4e0e\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u653e\u5728\u4e00\u8d77\uff0c\u5e76\u4f7f\u7528\u66f4\u6539\u65e5\u5fd7\u4f5c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u7684\u4e3b\u8981\u5b58\u50a8\u3002 \u65e5\u5fd7\u8bb0\u5f55\u4ee5\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027 \u3002\u8fdb\u884c\u672c\u5730\u8ba1\u7b97\u7684\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6ce8\u9500\u5bf9\u5176\u672c\u5730\u72b6\u6001\u6240\u505a\u7684\u66f4\u6539\u6765\u5b9e\u73b0\u5bb9\u9519\uff0c\u4ee5\u4fbf\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u91cd\u65b0\u52a0\u8f7d\u8fd9\u4e9b\u66f4\u6539\u5e76\u5728\u5931\u8d25\u65f6\u7ee7\u7eed\u6267\u884c\u3002\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u662f\u5728\u6d41\u67e5\u8be2\u7cfb\u7edf\u4e2d\u5904\u7406\u8ba1\u6570\u3001\u805a\u5408\u548c\u5176\u4ed6\u7c7b\u4f3c\u201cgroup by\u201d\u7684\u5904\u7406\u3002Samza \u662f\u4e00\u4e2a\u5b9e\u65f6\u6d41\u5904\u7406\u6846\u67b6\uff0c \u6b63\u662f\u5229\u7528\u6b64\u529f\u80fd \u6765\u5b9e\u73b0\u6b64\u76ee\u7684\u3002 \u5728\u6bcf\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e3b\u8981\u9700\u8981\u5904\u7406\u5b9e\u65f6\u7684\u53d8\u5316\uff0c\u4f46\u5076\u5c14\uff0c\u5f53\u673a\u5668\u5d29\u6e83\u6216\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u6216\u91cd\u65b0\u5904\u7406\u6570\u636e\u65f6\uff0c\u5c31\u9700\u8981\u8fdb\u884c\u5b8c\u5168\u52a0\u8f7d\u3002\u65e5\u5fd7\u538b\u7f29\u5141\u8bb8\u5c06\u8fd9\u4e24\u4e2a\u7528\u4f8b\u63d0\u4f9b\u7ed9\u540c\u4e00\u652f\u6301\u4e3b\u9898\u3002 \u8fd9\u7bc7\u535a\u5ba2\u6587\u7ae0 \u66f4\u8be6\u7ec6\u5730\u63cf\u8ff0\u4e86\u65e5\u5fd7\u7684\u8fd9\u79cd\u4f7f\u7528\u65b9\u5f0f\u3002 \u603b\u4f53\u601d\u8def\u975e\u5e38\u7b80\u5355\u3002\u5982\u679c\u6211\u4eec\u6709\u65e0\u9650\u7684\u65e5\u5fd7\u4fdd\u7559\uff0c\u5e76\u4e14\u6211\u4eec\u8bb0\u5f55\u4e86\u4e0a\u8ff0\u60c5\u51b5\u4e0b\u7684\u6bcf\u4e2a\u66f4\u6539\uff0c\u90a3\u4e48\u6211\u4eec\u5c06\u6355\u83b7\u7cfb\u7edf\u4ece\u7b2c\u4e00\u6b21\u5f00\u59cb\u65f6\u7684\u6bcf\u4e2a\u65f6\u95f4\u7684\u72b6\u6001\u3002\u4f7f\u7528\u8fd9\u4e2a\u5b8c\u6574\u7684\u65e5\u5fd7\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u91cd\u653e\u65e5\u5fd7\u4e2d\u7684\u524d N \u200b\u200b\u6761\u8bb0\u5f55\u6765\u6062\u590d\u5230\u4efb\u610f\u65f6\u95f4\u70b9\u3002\u5bf9\u4e8e\u591a\u6b21\u66f4\u65b0\u5355\u4e2a\u8bb0\u5f55\u7684\u7cfb\u7edf\u6765\u8bf4\uff0c\u8fd9\u79cd\u5047\u8bbe\u7684\u5b8c\u6574\u65e5\u5fd7\u4e0d\u592a\u5b9e\u7528\uff0c\u56e0\u4e3a\u5373\u4f7f\u5bf9\u4e8e\u7a33\u5b9a\u7684\u6570\u636e\u96c6\uff0c\u65e5\u5fd7\u4e5f\u4f1a\u65e0\u9650\u5236\u5730\u589e\u957f\u3002\u4e22\u5f03\u65e7\u66f4\u65b0\u7684\u7b80\u5355\u65e5\u5fd7\u4fdd\u7559\u673a\u5236\u4f1a\u9650\u5236\u7a7a\u95f4\uff0c\u4f46\u65e5\u5fd7\u4e0d\u518d\u662f\u6062\u590d\u5f53\u524d\u72b6\u6001\u7684\u65b9\u6cd5 - \u73b0\u5728\u4ece\u65e5\u5fd7\u5f00\u5934\u6062\u590d\u4e0d\u518d\u91cd\u65b0\u521b\u5efa\u5f53\u524d\u72b6\u6001\uff0c\u56e0\u4e3a\u65e7\u66f4\u65b0\u53ef\u80fd\u6839\u672c\u65e0\u6cd5\u6355\u83b7\u3002 \u65e5\u5fd7\u538b\u7f29\u662f\u4e00\u79cd\u63d0\u4f9b\u66f4\u7ec6\u7c92\u5ea6\u7684\u6bcf\u6761\u8bb0\u5f55\u4fdd\u7559\u7684\u673a\u5236\uff0c\u800c\u4e0d\u662f\u63d0\u4f9b\u66f4\u7c97\u7c92\u5ea6\u7684\u57fa\u4e8e\u65f6\u95f4\u7684\u4fdd\u7559\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u6709\u9009\u62e9\u5730\u5220\u9664\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u6700\u65b0\u66f4\u65b0\u7684\u8bb0\u5f55\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u65e5\u5fd7\u81f3\u5c11\u5177\u6709\u6bcf\u4e2a\u952e\u7684\u6700\u540e\u72b6\u6001\u3002 \u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u4e3b\u9898\u8bbe\u7f6e\u6b64\u4fdd\u7559\u7b56\u7565\uff0c\u56e0\u6b64\u5355\u4e2a\u96c6\u7fa4\u53ef\u4ee5\u5177\u6709\u4e00\u4e9b\u901a\u8fc7\u5927\u5c0f\u6216\u65f6\u95f4\u5f3a\u5236\u4fdd\u7559\u7684\u4e3b\u9898\uff0c\u4ee5\u53ca\u901a\u8fc7\u538b\u7f29\u5f3a\u5236\u4fdd\u7559\u7684\u5176\u4ed6\u4e3b\u9898\u3002 \u6b64\u529f\u80fd\u7684\u7075\u611f\u6765\u81ea\u4e8e LinkedIn \u6700\u53e4\u8001\u3001\u6700\u6210\u529f\u7684\u57fa\u7840\u8bbe\u65bd\u4e4b\u4e00\u2014\u2014\u540d\u4e3a Databus \u7684 \u6570\u636e\u5e93\u53d8\u66f4\u65e5\u5fd7\u7f13\u5b58\u670d\u52a1\u3002\u4e0e\u5927\u591a\u6570\u65e5\u5fd7\u7ed3\u6784\u5b58\u50a8\u7cfb\u7edf\u4e0d\u540c\uff0cKafka \u662f\u4e3a\u8ba2\u9605\u800c\u6784\u5efa\u7684\uff0c\u5e76\u7ec4\u7ec7\u6570\u636e\u4ee5\u8fdb\u884c\u5feb\u901f\u7ebf\u6027\u8bfb\u53d6\u548c\u5199\u5165\u3002\u4e0e Databus \u4e0d\u540c\uff0cKafka \u5145\u5f53\u771f\u5b9e\u6765\u6e90\u5b58\u50a8\uff0c\u56e0\u6b64\u5373\u4f7f\u5728\u4e0a\u6e38\u6570\u636e\u6e90\u65e0\u6cd5\u91cd\u653e\u7684\u60c5\u51b5\u4e0b\u5b83\u4e5f\u5f88\u6709\u7528\u3002","title":"4.8 \u65e5\u5fd7\u538b\u7f29"},{"location":"4/#_13","text":"\u8fd9\u662f\u4e00\u5f20\u9ad8\u7ea7\u56fe\u7247\uff0c\u663e\u793a\u4e86 Kafka \u65e5\u5fd7\u7684\u903b\u8f91\u7ed3\u6784\u4ee5\u53ca\u6bcf\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002 \u65e5\u5fd7\u7684\u5934\u90e8\u4e0e\u4f20\u7edf\u7684 Kafka \u65e5\u5fd7\u76f8\u540c\u3002\u5b83\u5177\u6709\u5bc6\u96c6\u3001\u8fde\u7eed\u7684\u504f\u79fb\u91cf\u5e76\u4fdd\u7559\u6240\u6709\u6d88\u606f\u3002\u65e5\u5fd7\u538b\u7f29\u6dfb\u52a0\u4e86\u5904\u7406\u65e5\u5fd7\u5c3e\u90e8\u7684\u9009\u9879\u3002\u4e0a\u56fe\u663e\u793a\u4e86\u4e00\u6839\u5e26\u6709\u538b\u7d27\u5c3e\u90e8\u7684\u539f\u6728\u3002\u8bf7\u6ce8\u610f\uff0c\u65e5\u5fd7\u5c3e\u90e8\u7684\u6d88\u606f\u4fdd\u7559\u9996\u6b21\u5199\u5165\u65f6\u5206\u914d\u7684\u539f\u59cb\u504f\u79fb\u91cf\uff0c\u5e76\u4e14\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\u3002\u53e6\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u5177\u6709\u8be5\u504f\u79fb\u91cf\u7684\u6d88\u606f\u5df2\u88ab\u538b\u7f29\uff0c\u6240\u6709\u504f\u79fb\u91cf\u4ecd\u4fdd\u7559\u5728\u65e5\u5fd7\u4e2d\u7684\u6709\u6548\u4f4d\u7f6e\uff1b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8be5\u4f4d\u7f6e\u4e0e\u65e5\u5fd7\u4e2d\u51fa\u73b0\u7684\u4e0b\u4e00\u4e2a\u6700\u9ad8\u504f\u79fb\u91cf\u65e0\u6cd5\u533a\u5206\u3002\u4f8b\u5982\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0c\u504f\u79fb\u91cf 36\u300137 \u548c 38 \u90fd\u662f\u7b49\u6548\u4f4d\u7f6e\uff0c\u4ece\u8fd9\u4e9b\u504f\u79fb\u91cf\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5f00\u59cb\u8bfb\u53d6\u90fd\u5c06\u8fd4\u56de\u4ee5 38 \u5f00\u5934\u7684\u6d88\u606f\u96c6\u3002 \u538b\u7f29\u8fd8\u5141\u8bb8\u5220\u9664\u3002\u5e26\u6709\u5bc6\u94a5\u548c\u7a7a\u8d1f\u8f7d\u7684\u6d88\u606f\u5c06\u88ab\u89c6\u4e3a\u4ece\u65e5\u5fd7\u4e2d\u5220\u9664\u3002\u8fd9\u6837\u7684\u8bb0\u5f55\u6709\u65f6\u88ab\u79f0\u4e3a \u5893\u7891 \u3002\u6b64\u5220\u9664\u6807\u8bb0\u5c06\u5bfc\u81f4\u4efb\u4f55\u5177\u6709\u8be5\u952e\u7684\u5148\u524d\u6d88\u606f\u88ab\u5220\u9664\uff08\u5c31\u50cf\u5177\u6709\u8be5\u952e\u7684\u4efb\u4f55\u65b0\u6d88\u606f\u4e00\u6837\uff09\uff0c\u4f46\u5220\u9664\u6807\u8bb0\u7684\u7279\u6b8a\u4e4b\u5904\u5728\u4e8e\uff0c\u5b83\u4eec\u672c\u8eab\u4f1a\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u4ece\u65e5\u5fd7\u4e2d\u6e05\u9664\u4ee5\u91ca\u653e\u7a7a\u95f4\u3002\u5220\u9664\u4e0d\u518d\u4fdd\u7559\u7684\u65f6\u95f4\u70b9\u5728\u4e0a\u56fe\u4e2d\u88ab\u6807\u8bb0\u4e3a\u201c\u5220\u9664\u4fdd\u7559\u70b9\u201d\u3002 \u538b\u7f29\u662f\u901a\u8fc7\u5b9a\u671f\u91cd\u65b0\u590d\u5236\u65e5\u5fd7\u6bb5\u5728\u540e\u53f0\u5b8c\u6210\u7684\u3002\u6e05\u7406\u4e0d\u4f1a\u963b\u6b62\u8bfb\u53d6\uff0c\u5e76\u4e14\u53ef\u4ee5\u9650\u5236\u4f7f\u7528\u4e0d\u8d85\u8fc7\u53ef\u914d\u7f6e\u7684 I/O \u541e\u5410\u91cf\uff0c\u4ee5\u907f\u514d\u5f71\u54cd\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u3002\u538b\u7f29\u65e5\u5fd7\u6bb5\u7684\u5b9e\u9645\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a\uff1a","title":"\u65e5\u5fd7\u538b\u7f29\u57fa\u7840\u77e5\u8bc6"},{"location":"4/#_14","text":"\u65e5\u5fd7\u538b\u7f29\u4fdd\u8bc1\u4ee5\u4e0b\u51e0\u70b9\uff1a \u4efb\u4f55\u5173\u6ce8\u65e5\u5fd7\u5934\u90e8\u7684\u6d88\u8d39\u8005\u90fd\u4f1a\u770b\u5230\u5199\u5165\u7684\u6bcf\u6761\u6d88\u606f\uff1b\u8fd9\u4e9b\u6d88\u606f\u5c06\u5177\u6709\u8fde\u7eed\u7684\u504f\u79fb\u91cf\u3002\u4e3b\u9898 min.compaction.lag.ms \u53ef\u7528\u4e8e\u4fdd\u8bc1\u6d88\u606f\u5199\u5165\u540e\u5fc5\u987b\u7ecf\u8fc7\u7684\u6700\u77ed\u65f6\u95f4\u957f\u5ea6\u624d\u80fd\u88ab\u538b\u7f29\u3002\u5373\uff0c\u5b83\u63d0\u4f9b\u4e86\u6bcf\u6761\u6d88\u606f\u5728\uff08\u672a\u538b\u7f29\u7684\uff09\u5934\u90e8\u4e2d\u4fdd\u7559\u591a\u957f\u65f6\u95f4\u7684\u4e0b\u9650\u3002\u4e3b\u9898 max.compaction.lag.ms \u53ef\u7528\u4e8e\u4fdd\u8bc1\u5199\u5165\u6d88\u606f\u7684\u65f6\u95f4\u548c\u6d88\u606f\u9002\u5408\u538b\u7f29\u7684\u65f6\u95f4\u4e4b\u95f4\u7684\u6700\u5927\u5ef6\u8fdf\u3002 \u6d88\u606f\u7684\u987a\u5e8f\u59cb\u7ec8\u4fdd\u6301\u4e0d\u53d8\u3002\u538b\u7f29\u6c38\u8fdc\u4e0d\u4f1a\u91cd\u65b0\u6392\u5e8f\u6d88\u606f\uff0c\u53ea\u662f\u5220\u9664\u4e00\u4e9b\u6d88\u606f\u3002 \u6d88\u606f\u7684\u504f\u79fb\u91cf\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\u3002\u5b83\u662f\u65e5\u5fd7\u4e2d\u67d0\u4e2a\u4f4d\u7f6e\u7684\u6c38\u4e45\u6807\u8bc6\u7b26\u3002 \u4ece\u65e5\u5fd7\u5f00\u59cb\u8fdb\u884c\u7684\u4efb\u4f55\u6d88\u8d39\u8005\u90fd\u5c06\u81f3\u5c11\u6309\u7167\u5199\u5165\u987a\u5e8f\u770b\u5230\u6240\u6709\u8bb0\u5f55\u7684\u6700\u7ec8\u72b6\u6001\u3002\u6b64\u5916\uff0c\u5982\u679c\u6d88\u8d39\u8005\u5728\u5c0f\u4e8e\u4e3b\u9898\u8bbe\u7f6e\u7684\u65f6\u95f4\u6bb5\u5185\u5230\u8fbe\u65e5\u5fd7\u7684\u5934\u90e8 delete.retention.ms \uff08\u9ed8\u8ba4\u4e3a 24\u200b\u200b \u5c0f\u65f6\uff09\uff0c\u5219\u5c06\u770b\u5230\u5df2\u5220\u9664\u8bb0\u5f55\u7684\u6240\u6709\u5220\u9664\u6807\u8bb0\u3002\u6362\u53e5\u8bdd\u8bf4\uff1a\u7531\u4e8e\u5220\u9664\u6807\u8bb0\u7684\u5220\u9664\u4e0e\u8bfb\u53d6\u540c\u65f6\u53d1\u751f\uff0c\u56e0\u6b64\u5982\u679c\u6ede\u540e\u8d85\u8fc7 \uff0c\u6d88\u8d39\u8005\u53ef\u80fd\u4f1a\u9519\u8fc7\u5220\u9664\u6807\u8bb0 delete.retention.ms \u3002","title":"\u65e5\u5fd7\u538b\u7f29\u63d0\u4f9b\u4ec0\u4e48\u4fdd\u8bc1\uff1f"},{"location":"4/#_15","text":"\u65e5\u5fd7\u538b\u7f29\u7531\u65e5\u5fd7\u6e05\u7406\u5668\u5904\u7406\uff0c\u65e5\u5fd7\u6e05\u7406\u5668\u662f\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\u6c60\uff0c\u7528\u4e8e\u91cd\u65b0\u590d\u5236\u65e5\u5fd7\u6bb5\u6587\u4ef6\uff0c\u5220\u9664\u5176\u952e\u51fa\u73b0\u5728\u65e5\u5fd7\u5934\u90e8\u7684\u8bb0\u5f55\u3002\u6bcf\u4e2a\u538b\u7f29\u5668\u7ebf\u7a0b\u7684\u5de5\u4f5c\u539f\u7406\u5982\u4e0b\uff1a \u5b83\u9009\u62e9\u5177\u6709\u6700\u9ad8\u65e5\u5fd7\u5934\u4e0e\u65e5\u5fd7\u5c3e\u6bd4\u7684\u65e5\u5fd7 \u5b83\u4e3a\u65e5\u5fd7\u5934\u90e8\u7684\u6bcf\u4e2a\u952e\u521b\u5efa\u6700\u540e\u4e00\u4e2a\u504f\u79fb\u91cf\u7684\u7b80\u6d01\u6458\u8981 \u5b83\u4ece\u5934\u5230\u5c3e\u91cd\u65b0\u590d\u5236\u65e5\u5fd7\uff0c\u5220\u9664\u65e5\u5fd7\u4e2d\u7a0d\u540e\u51fa\u73b0\u7684\u952e\u3002\u65b0\u7684\u3001\u5e72\u51c0\u7684\u6bb5\u4f1a\u7acb\u5373\u4ea4\u6362\u5230\u65e5\u5fd7\u4e2d\uff0c\u56e0\u6b64\u6240\u9700\u7684\u989d\u5916\u78c1\u76d8\u7a7a\u95f4\u53ea\u662f\u4e00\u4e2a\u989d\u5916\u7684\u65e5\u5fd7\u6bb5\uff08\u800c\u4e0d\u662f\u65e5\u5fd7\u7684\u5b8c\u6574\u526f\u672c\uff09\u3002 \u65e5\u5fd7\u5934\u7684\u6458\u8981\u672c\u8d28\u4e0a\u53ea\u662f\u4e00\u4e2a\u7a7a\u95f4\u7d27\u51d1\u7684\u54c8\u5e0c\u8868\u3002\u6bcf\u4e2a\u6761\u76ee\u6b63\u597d\u4f7f\u7528 24 \u4e2a\u5b57\u8282\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 8GB \u7684\u200b\u200b\u6e05\u7406\u7f13\u51b2\u533a\uff0c\u4e00\u6b21\u6e05\u7406\u8fed\u4ee3\u53ef\u4ee5\u6e05\u7406\u5927\u7ea6 366GB \u7684\u65e5\u5fd7\u5934\uff08\u5047\u8bbe\u6709 1k \u6761\u6d88\u606f\uff09\u3002","title":"\u65e5\u5fd7\u538b\u7f29\u8be6\u7ec6\u4fe1\u606f"},{"location":"4/#_16","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u542f\u7528\u65e5\u5fd7\u6e05\u7406\u5668\u3002\u8fd9\u5c06\u542f\u52a8\u6e05\u7406\u7ebf\u7a0b\u6c60\u3002\u8981\u542f\u7528\u7279\u5b9a\u4e3b\u9898\u7684\u65e5\u5fd7\u6e05\u7406\uff0c\u8bf7\u6dfb\u52a0\u7279\u5b9a\u4e8e\u65e5\u5fd7\u7684\u5c5e\u6027 log.cleanup.policy=compact \u8be5 log.cleanup.policy \u5c5e\u6027\u662f\u4ee3\u7406 server.properties \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u4ee3\u7406\u914d\u7f6e\u8bbe\u7f6e\uff1b\u5b83\u4f1a\u5f71\u54cd\u96c6\u7fa4\u4e2d\u6ca1\u6709\u914d\u7f6e\u8986\u76d6\u7684\u6240\u6709\u4e3b\u9898\uff08\u5982\u6b64\u5904\u6240\u8ff0 \uff09 \u3002\u65e5\u5fd7\u6e05\u7406\u5668\u53ef\u4ee5\u914d\u7f6e\u4e3a\u4fdd\u7559\u6700\u5c11\u91cf\u7684\u672a\u538b\u5b9e\u7684\u65e5\u5fd7\u201c\u5934\u90e8\u201d\u3002\u8fd9\u662f\u901a\u8fc7\u8bbe\u7f6e\u538b\u7f29\u65f6\u95f4\u5ef6\u8fdf\u6765\u542f\u7528\u7684\u3002 log.cleaner.min.compaction.lag.ms \u8fd9\u53ef\u7528\u4e8e\u9632\u6b62\u6bd4\u6700\u5c0f\u6d88\u606f\u5e74\u9f84\u65b0\u7684\u6d88\u606f\u53d7\u5230\u538b\u7f29\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u9664\u6700\u540e\u4e00\u4e2a\u6bb5\uff08\u5373\u5f53\u524d\u6b63\u5728\u5199\u5165\u7684\u6bb5\uff09\u4e4b\u5916\u7684\u6240\u6709\u65e5\u5fd7\u6bb5\u90fd\u9002\u5408\u538b\u7f29\u3002\u5373\u4f7f\u6d3b\u52a8\u6bb5\u7684\u6240\u6709\u6d88\u606f\u90fd\u65e9\u4e8e\u6700\u5c0f\u538b\u7f29\u65f6\u95f4\u5ef6\u8fdf\uff0c\u4e5f\u4e0d\u4f1a\u538b\u7f29\u6d3b\u52a8\u6bb5\u3002\u65e5\u5fd7\u6e05\u7406\u5668\u53ef\u4ee5\u914d\u7f6e\u4e3a\u786e\u4fdd\u6700\u5927\u5ef6\u8fdf\uff0c\u4e4b\u540e\u65e5\u5fd7\u7684\u672a\u538b\u7f29\u201c\u5934\u90e8\u201d\u5c31\u53ef\u4ee5\u8fdb\u884c\u65e5\u5fd7\u538b\u7f29\u3002 log.cleaner.max.compaction.lag.ms \u8fd9\u53ef\u7528\u4e8e\u9632\u6b62\u4f4e\u751f\u4ea7\u7387\u7684\u539f\u6728\u5728\u65e0\u9650\u5236\u7684\u6301\u7eed\u65f6\u95f4\u5185\u4fdd\u6301\u4e0d\u7b26\u5408\u538b\u7f29\u6761\u4ef6\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u4e0d\u4f1a\u538b\u7f29\u4e0d\u8d85\u8fc7 min.cleanable.dirty.ratio \u7684\u65e5\u5fd7\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u538b\u7f29\u671f\u9650\u5e76\u4e0d\u662f\u4e00\u4e2a\u786c\u6027\u4fdd\u8bc1\uff0c\u56e0\u4e3a\u5b83\u4ecd\u7136\u53d7\u5230\u65e5\u5fd7\u6e05\u7406\u7ebf\u7a0b\u7684\u53ef\u7528\u6027\u548c\u5b9e\u9645\u538b\u7f29\u65f6\u95f4\u7684\u5f71\u54cd\u3002\u60a8\u5c06\u9700\u8981\u76d1\u63a7 uncleanable-partitions-count\u3001max-clean-time-secs \u548c max-compaction-delay-secs \u6307\u6807\u3002 \u8fd9\u91cc \u63cf\u8ff0\u4e86\u66f4\u591a\u66f4\u6e05\u6d01\u7684\u914d\u7f6e\u3002","title":"\u914d\u7f6e\u65e5\u5fd7\u6e05\u7406\u5668"},{"location":"4/#49","text":"Kafka \u96c6\u7fa4\u80fd\u591f\u5bf9\u8bf7\u6c42\u5f3a\u5236\u5b9e\u65bd\u914d\u989d\uff0c\u4ee5\u63a7\u5236\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4ee3\u7406\u8d44\u6e90\u3002Kafka \u4ee3\u7406\u53ef\u4ee5\u4e3a\u5171\u4eab\u914d\u989d\u7684\u6bcf\u7ec4\u5ba2\u6237\u7aef\u5f3a\u5236\u6267\u884c\u4e24\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\u914d\u989d\uff1a \u7f51\u7edc\u5e26\u5bbd\u914d\u989d\u5b9a\u4e49\u5b57\u8282\u7387\u9608\u503c\uff08\u81ea 0.9 \u8d77\uff09 \u8bf7\u6c42\u7387\u914d\u989d\u5c06 CPU \u5229\u7528\u7387\u9608\u503c\u5b9a\u4e49\u4e3a\u7f51\u7edc\u548c I/O \u7ebf\u7a0b\u7684\u767e\u5206\u6bd4\uff08\u81ea 0.11 \u8d77\uff09","title":"4.9 \u914d\u989d"},{"location":"4/#_17","text":"\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6709\u53ef\u80fd\u4ea7\u751f/\u6d88\u8017\u975e\u5e38\u5927\u91cf\u7684\u6570\u636e\u6216\u4ee5\u975e\u5e38\u9ad8\u7684\u901f\u7387\u751f\u6210\u8bf7\u6c42\uff0c\u4ece\u800c\u5784\u65ad\u4ee3\u7406\u8d44\u6e90\uff0c\u5bfc\u81f4\u7f51\u7edc\u9971\u548c\uff0c\u5e76\u4e14\u901a\u5e38\u4f1a DOS \u5176\u4ed6\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u672c\u8eab\u3002\u62e5\u6709\u914d\u989d\u53ef\u4ee5\u9632\u6b62\u8fd9\u4e9b\u95ee\u9898\uff0c\u5e76\u4e14\u5728\u5927\u578b\u591a\u79df\u6237\u96c6\u7fa4\u4e2d\u5c24\u4e3a\u91cd\u8981\uff0c\u5176\u4e2d\u4e00\u5c0f\u90e8\u5206\u884c\u4e3a\u4e0d\u826f\u7684\u5ba2\u6237\u7aef\u53ef\u80fd\u4f1a\u964d\u4f4e\u884c\u4e3a\u826f\u597d\u5ba2\u6237\u7aef\u7684\u7528\u6237\u4f53\u9a8c\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5f53\u5c06 Kafka \u4f5c\u4e3a\u670d\u52a1\u8fd0\u884c\u65f6\uff0c\u8fd9\u751a\u81f3\u53ef\u4ee5\u6839\u636e\u5546\u5b9a\u7684\u5408\u540c\u5f3a\u5236\u5b9e\u65bd API \u9650\u5236\u3002","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u914d\u989d\uff1f"},{"location":"4/#_18","text":"Kafka \u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u662f\u7528\u6237\u4e3b\u4f53\uff0c\u5b83\u4ee3\u8868\u5b89\u5168\u96c6\u7fa4\u4e2d\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u3002\u5728\u652f\u6301\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u7684\u5ba2\u6237\u7aef\u7684\u96c6\u7fa4\u4e2d\uff0c\u7528\u6237\u4e3b\u4f53\u662f\u4ee3\u7406\u4f7f\u7528\u53ef\u914d\u7f6e\u7684 PrincipalBuilder . Client-id \u662f\u5ba2\u6237\u7aef\u7684\u903b\u8f91\u5206\u7ec4\uff0c\u5177\u6709\u7531\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u9009\u62e9\u7684\u6709\u610f\u4e49\u7684\u540d\u79f0\u3002\u5143\u7ec4\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u5b9a\u4e49\u5171\u4eab\u7528\u6237\u4e3b\u4f53\u548c\u5ba2\u6237\u7aef ID \u7684\u5b89\u5168\u903b\u8f91\u5ba2\u6237\u7aef\u7ec4\u3002 \u914d\u989d\u53ef\u4ee5\u5e94\u7528\u4e8e\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ec4\u3002\u5bf9\u4e8e\u7ed9\u5b9a\u8fde\u63a5\uff0c\u5c06\u5e94\u7528\u4e0e\u8be5\u8fde\u63a5\u5339\u914d\u7684\u6700\u5177\u4f53\u7684\u914d\u989d\u3002\u914d\u989d\u7ec4\u7684\u6240\u6709\u8fde\u63a5\u5171\u4eab\u4e3a\u8be5\u7ec4\u914d\u7f6e\u7684\u914d\u989d\u3002\u4f8b\u5982\uff0c\u5982\u679c (user=\"test-user\", client-id=\"test-client\") \u7684\u751f\u4ea7\u914d\u989d\u4e3a 10MB/\u79d2\uff0c\u5219\u8be5\u914d\u989d\u5c06\u5728\u7528\u6237\u201ctest-user\u201d\u7684\u6240\u6709\u751f\u4ea7\u8005\u5b9e\u4f8b\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u5171\u4eabid\u201c\u6d4b\u8bd5\u5ba2\u6237\u7aef\u201d\u3002","title":"\u5ba2\u6237\u7fa4\u4f53"},{"location":"4/#_19","text":"\u53ef\u4ee5\u4e3a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u548c\u5ba2\u6237\u7aef ID \u7ec4\u5b9a\u4e49\u914d\u989d\u914d\u7f6e\u3002\u53ef\u4ee5\u5728\u9700\u8981\u66f4\u9ad8\uff08\u751a\u81f3\u66f4\u4f4e\uff09\u914d\u989d\u7684\u4efb\u4f55\u914d\u989d\u7ea7\u522b\u8986\u76d6\u9ed8\u8ba4\u914d\u989d\u3002\u8be5\u673a\u5236\u7c7b\u4f3c\u4e8e\u6bcf\u4e2a\u4e3b\u9898\u7684\u65e5\u5fd7\u914d\u7f6e\u8986\u76d6\u3002\u7528\u6237\u548c\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u914d\u989d\u8986\u76d6\u5199\u5165\u5230 ZooKeeper \u7684 /config/users \u4e0b\uff0c\u5ba2\u6237\u7aef ID \u914d\u989d\u8986\u76d6\u5199\u5165\u5230 /config/clients \u4e0b\u3002\u6240\u6709\u7ecf\u7eaa\u5546\u90fd\u4f1a\u8bfb\u53d6\u8fd9\u4e9b\u8986\u76d6\u5e76\u7acb\u5373\u751f\u6548\u3002\u8fd9\u4f7f\u6211\u4eec\u53ef\u4ee5\u66f4\u6539\u914d\u989d\uff0c\u800c\u65e0\u9700\u6eda\u52a8\u91cd\u65b0\u542f\u52a8\u6574\u4e2a\u96c6\u7fa4\u3002\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 \u6b64\u5904 \u3002\u6bcf\u4e2a\u7ec4\u7684\u9ed8\u8ba4\u914d\u989d\u4e5f\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u673a\u5236\u52a8\u6001\u66f4\u65b0\u3002 \u914d\u989d\u914d\u7f6e\u7684\u4f18\u5148\u987a\u5e8f\u662f\uff1a /config/users/ /clients/ /config/users/ /clients/ /config/users/ /config/users/ /clients/ /config/users/ /clients/ /config/users/ /config/clients/ /config/clients/","title":"\u914d\u989d\u914d\u7f6e"},{"location":"4/#_20","text":"\u7f51\u7edc\u5e26\u5bbd\u914d\u989d\u5b9a\u4e49\u4e3a\u5171\u4eab\u914d\u989d\u7684\u6bcf\u7ec4\u5ba2\u6237\u7aef\u7684\u5b57\u8282\u7387\u9608\u503c\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u552f\u4e00\u7684\u5ba2\u6237\u7aef\u7ec4\u90fd\u4f1a\u6536\u5230\u96c6\u7fa4\u914d\u7f6e\u7684\u56fa\u5b9a\u914d\u989d\uff08\u4ee5\u5b57\u8282/\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u8be5\u914d\u989d\u662f\u6309\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u5b9a\u4e49\u7684\u3002\u5728\u5ba2\u6237\u7aef\u53d7\u5230\u9650\u5236\u4e4b\u524d\uff0c\u6bcf\u7ec4\u5ba2\u6237\u7aef\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u53d1\u5e03/\u83b7\u53d6\u6700\u5927 X \u5b57\u8282/\u79d2\u3002","title":"\u7f51\u7edc\u5e26\u5bbd\u914d\u989d"},{"location":"4/#_21","text":"\u8bf7\u6c42\u901f\u7387\u914d\u989d\u5b9a\u4e49\u4e3a\u5ba2\u6237\u7aef\u5728\u914d\u989d\u7a97\u53e3\u5185\u53ef\u4ee5\u5229\u7528\u6bcf\u4e2a\u4ee3\u7406\u7684\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f I/O \u7ebf\u7a0b\u548c\u7f51\u7edc\u7ebf\u7a0b\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002n%\u7684\u914d\u989d\u8868\u793a \u4e00\u4e2a\u7ebf\u7a0b\u7684n%\uff0c\u56e0\u6b64\u914d\u989d\u8d85\u51fa\u4e86((num.io.threads + num.network.threads) * 100)%\u7684\u603b\u5bb9\u91cf\u3002\u6bcf\u7ec4\u5ba2\u6237\u6700\u591a\u53ef\u4ee5\u4f7f\u7528n%\u7684\u603b\u767e\u5206\u6bd4\u5728\u914d\u989d\u7a97\u53e3\u4e2d\u7684\u6240\u6709 I/O \u548c\u7f51\u7edc\u7ebf\u7a0b\u53d7\u5230\u9650\u5236\u4e4b\u524d\u3002\u7531\u4e8e\u5206\u914d\u7ed9 I/O \u548c\u7f51\u7edc\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u6570\u901a\u5e38\u57fa\u4e8e\u4ee3\u7406\u4e3b\u673a\u4e0a\u53ef\u7528\u7684\u6838\u5fc3\u6570\uff0c\u56e0\u6b64\u8bf7\u6c42\u7387\u914d\u989d\u8868\u793a\u5171\u4eab\u914d\u989d\u7684\u6bcf\u7ec4\u5ba2\u6237\u7aef\u53ef\u80fd\u4f7f\u7528\u7684 CPU \u603b\u767e\u5206\u6bd4\u3002","title":"\u8bf7\u6c42\u901f\u7387\u914d\u989d"},{"location":"4/#_22","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u552f\u4e00\u7684\u5ba2\u6237\u7aef\u7ec4\u90fd\u4f1a\u6536\u5230\u96c6\u7fa4\u914d\u7f6e\u7684\u56fa\u5b9a\u914d\u989d\u3002\u8be5\u914d\u989d\u662f\u6309\u6bcf\u4e2a\u7ecf\u7eaa\u5546\u5b9a\u4e49\u7684\u3002\u5728\u53d7\u5230\u9650\u5236\u4e4b\u524d\uff0c\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u4f7f\u7528\u6bcf\u4e2a\u4ee3\u7406\u7684\u6b64\u914d\u989d\u3002\u6211\u4eec\u8ba4\u4e3a\u4e3a\u6bcf\u4e2a\u4ee3\u7406\u5b9a\u4e49\u8fd9\u4e9b\u914d\u989d\u6bd4\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u62e5\u6709\u56fa\u5b9a\u7684\u96c6\u7fa4\u5bbd\u5e26\u5bbd\u8981\u597d\u5f97\u591a\uff0c\u56e0\u4e3a\u8fd9\u9700\u8981\u4e00\u79cd\u5728\u6240\u6709\u4ee3\u7406\u4e4b\u95f4\u5171\u4eab\u5ba2\u6237\u7aef\u914d\u989d\u4f7f\u7528\u60c5\u51b5\u7684\u673a\u5236\u3002\u8fd9\u53ef\u80fd\u6bd4\u914d\u989d\u5b9e\u65bd\u672c\u8eab\u66f4\u96be\uff01 \u5f53\u7ecf\u7eaa\u5546\u68c0\u6d4b\u5230\u914d\u989d\u8fdd\u89c4\u65f6\u5982\u4f55\u53cd\u5e94\uff1f\u5728\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u4e2d\uff0cbroker\u9996\u5148\u8ba1\u7b97\u4f7f\u8fdd\u89c4\u5ba2\u6237\u7aef\u4f4e\u4e8e\u5176\u914d\u989d\u6240\u9700\u7684\u5ef6\u8fdf\u91cf\uff0c\u5e76\u7acb\u5373\u8fd4\u56de\u5305\u542b\u5ef6\u8fdf\u7684\u54cd\u5e94\u3002\u5982\u679c\u662f\u83b7\u53d6\u8bf7\u6c42\uff0c\u54cd\u5e94\u5c06\u4e0d\u5305\u542b\u4efb\u4f55\u6570\u636e\u3002\u7136\u540e\uff0c\u4ee3\u7406\u5c06\u4e0e\u5ba2\u6237\u7aef\u7684\u901a\u9053\u9759\u97f3\uff0c\u4e0d\u518d\u5904\u7406\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u76f4\u5230\u5ef6\u8fdf\u7ed3\u675f\u3002\u5728\u6536\u5230\u5ef6\u8fdf\u65f6\u95f4\u975e\u96f6\u7684\u54cd\u5e94\u540e\uff0cKafka \u5ba2\u6237\u7aef\u4e5f\u5c06\u5728\u5ef6\u8fdf\u671f\u95f4\u907f\u514d\u5411\u4ee3\u7406\u53d1\u9001\u8fdb\u4e00\u6b65\u7684\u8bf7\u6c42\u3002\u56e0\u6b64\uff0c\u6765\u81ea\u53d7\u9650\u5236\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u4f1a\u88ab\u53cc\u65b9\u6709\u6548\u5730\u963b\u6b62\u3002\u5373\u4f7f\u4f7f\u7528\u4e0d\u5c0a\u91cd\u4ee3\u7406\u5ef6\u8fdf\u54cd\u5e94\u7684\u65e7\u5ba2\u6237\u7aef\u5b9e\u73b0\uff0c\u4ee3\u7406\u901a\u8fc7\u9759\u97f3\u5176\u5957\u63a5\u5b57\u901a\u9053\u65bd\u52a0\u7684\u80cc\u538b\u4ecd\u7136\u53ef\u4ee5\u5904\u7406\u884c\u4e3a\u4e0d\u826f\u7684\u5ba2\u6237\u7aef\u7684\u9650\u5236\u3002\u90a3\u4e9b\u5411\u53d7\u9650\u901a\u9053\u53d1\u9001\u8fdb\u4e00\u6b65\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u53ea\u6709\u5728\u5ef6\u8fdf\u7ed3\u675f\u540e\u624d\u4f1a\u6536\u5230\u54cd\u5e94\u3002 \u5b57\u8282\u7387\u548c\u7ebf\u7a0b\u5229\u7528\u7387\u662f\u5728\u591a\u4e2a\u5c0f\u7a97\u53e3\uff08\u4f8b\u5982 30 \u4e2a\u7a97\u53e3\uff0c\u6bcf\u4e2a\u7a97\u53e3 1 \u79d2\uff09\u4e0a\u6d4b\u91cf\u7684\uff0c\u4ee5\u4fbf\u5feb\u901f\u68c0\u6d4b\u548c\u7ea0\u6b63\u914d\u989d\u8fdd\u89c4\u3002\u901a\u5e38\uff0c\u5177\u6709\u8f83\u5927\u7684\u6d4b\u91cf\u7a97\u53e3\uff08\u4f8b\u5982\uff0c10 \u4e2a\u7a97\u53e3\uff0c\u6bcf\u4e2a\u7a97\u53e3 30 \u79d2\uff09\u4f1a\u5bfc\u81f4\u5927\u91cf\u6d41\u91cf\u7a81\u53d1\uff0c\u7136\u540e\u662f\u8f83\u957f\u7684\u5ef6\u8fdf\uff0c\u8fd9\u5bf9\u4e8e\u7528\u6237\u4f53\u9a8c\u800c\u8a00\u5e76\u4e0d\u662f\u5f88\u597d\u3002","title":"\u6267\u884c"},{"location":"5/","text":"5. \u5b9e\u65bd 5.1 \u7f51\u7edc\u5c42 \u7f51\u7edc\u5c42\u662f\u4e00\u4e2a\u76f8\u5f53\u7b80\u5355\u7684NIO\u670d\u52a1\u5668\uff0c\u4e0d\u4f1a\u8be6\u7ec6\u63cf\u8ff0\u3002sendfile \u7684\u5b9e\u73b0\u662f\u901a\u8fc7\u4e3a TransferableRecords \u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a writeTo \u65b9\u6cd5\u6765\u5b8c\u6210\u7684\u3002\u8fd9\u5141\u8bb8\u6587\u4ef6\u652f\u6301\u7684\u6d88\u606f\u96c6\u4f7f\u7528\u66f4\u6709\u6548\u7684 transferTo \u5b9e\u73b0\u800c\u4e0d\u662f\u8fdb\u7a0b\u5185\u7f13\u51b2\u5199\u5165\u3002\u7ebf\u7a0b\u6a21\u578b\u662f\u5355\u4e2a\u63a5\u53d7\u5668\u7ebf\u7a0b\u548c N \u4e2a \u5904\u7406\u5668\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u5904\u7406\u56fa\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\u3002\u8be5\u8bbe\u8ba1\u5df2 \u5728\u5176\u4ed6\u5730\u65b9 \u8fdb\u884c\u4e86\u76f8\u5f53\u5f7b\u5e95\u7684\u6d4b\u8bd5\uff0c\u53d1\u73b0\u5b9e\u65bd\u7b80\u5355\u4e14\u901f\u5ea6\u5feb\u3002\u8be5\u534f\u8bae\u4fdd\u6301\u975e\u5e38\u7b80\u5355\uff0c\u4ee5\u5141\u8bb8\u5c06\u6765\u4ee5\u5176\u4ed6\u8bed\u8a00\u5b9e\u73b0\u5ba2\u6237\u7aef\u3002 5.2 \u6d88\u606f \u6d88\u606f\u7531\u53ef\u53d8\u957f\u5ea6\u6807\u5934\u3001\u53ef\u53d8\u957f\u5ea6\u4e0d\u900f\u660e\u5bc6\u94a5\u5b57\u8282\u6570\u7ec4\u548c\u53ef\u53d8\u957f\u5ea6\u4e0d\u900f\u660e\u503c\u5b57\u8282\u6570\u7ec4\u7ec4\u6210\u3002\u6807\u5934\u7684\u683c\u5f0f\u5c06\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\u63cf\u8ff0\u3002\u8ba9\u952e\u548c\u503c\u4e0d\u900f\u660e\u662f\u6b63\u786e\u7684\u51b3\u5b9a\uff1a\u76ee\u524d\u5e8f\u5217\u5316\u5e93\u6b63\u5728\u53d6\u5f97\u5f88\u5927\u8fdb\u5c55\uff0c\u4efb\u4f55\u7279\u5b9a\u7684\u9009\u62e9\u90fd\u4e0d\u53ef\u80fd\u9002\u5408\u6240\u6709\u7528\u9014\u3002\u4e0d\u7528\u8bf4\uff0c\u4f7f\u7528 Kafka \u7684\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5f3a\u5236\u4f7f\u7528\u7279\u5b9a\u7684\u5e8f\u5217\u5316\u7c7b\u578b\u4f5c\u4e3a\u5176\u4f7f\u7528\u7684\u4e00\u90e8\u5206\u3002\u8be5 RecordBatch \u63a5\u53e3\u53ea\u662f\u4e00\u4e2a\u6d88\u606f\u8fed\u4ee3\u5668\uff0c\u5177\u6709\u7528\u4e8e\u6279\u91cf\u8bfb\u53d6\u548c\u5199\u5165 NIO \u7684\u4e13\u7528\u65b9\u6cd5 Channel \u3002 5.3 \u6d88\u606f\u683c\u5f0f \u6d88\u606f\uff08\u53c8\u540d\u8bb0\u5f55\uff09\u59cb\u7ec8\u662f\u6279\u91cf\u5199\u5165\u7684\u3002\u4e00\u6279\u6d88\u606f\u7684\u6280\u672f\u672f\u8bed\u662f\u8bb0\u5f55\u6279\u6b21\uff0c\u8bb0\u5f55\u6279\u6b21\u5305\u542b\u4e00\u6761\u6216\u591a\u6761\u8bb0\u5f55\u3002\u5728\u9000\u5316\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u5305\u542b\u5355\u4e2a\u8bb0\u5f55\u7684\u8bb0\u5f55\u6279\u6b21\u3002\u8bb0\u5f55\u6279\u6b21\u548c\u8bb0\u5f55\u6709\u81ea\u5df1\u7684\u6807\u9898\u3002\u6bcf\u4e2a\u7684\u683c\u5f0f\u5982\u4e0b\u6240\u8ff0\u3002 5.3.1 \u8bb0\u5f55\u6279\u6b21 \u4ee5\u4e0b\u662f RecordBatch \u7684\u78c1\u76d8\u683c\u5f0f\u3002 baseOffset: int64 batchLength: int32 partitionLeaderEpoch: int32 magic: int8 (current magic value is 2) crc: int32 attributes: int16 bit 0~2: 0: no compression 1: gzip 2: snappy 3: lz4 4: zstd bit 3: timestampType bit 4: isTransactional (0 means not transactional) bit 5: isControlBatch (0 means not a control batch) bit 6: hasDeleteHorizonMs (0 means baseTimestamp is not set as the delete horizon for compaction) bit 7~15: unused lastOffsetDelta: int32 baseTimestamp: int64 maxTimestamp: int64 producerId: int64 producerEpoch: int16 baseSequence: int32 records: [Record] \u8bf7\u6ce8\u610f\uff0c\u542f\u7528\u538b\u7f29\u540e\uff0c\u538b\u7f29\u7684\u8bb0\u5f55\u6570\u636e\u5c06\u76f4\u63a5\u6309\u7167\u8bb0\u5f55\u6570\u8ba1\u6570\u8fdb\u884c\u5e8f\u5217\u5316\u3002 CRC \u6db5\u76d6\u4ece\u5c5e\u6027\u5230\u6279\u6b21\u7ed3\u675f\u7684\u6570\u636e\uff08\u5373CRC \u540e\u9762\u7684\u6240\u6709\u5b57\u8282\uff09\u3002\u5b83\u4f4d\u4e8e\u9b54\u672f\u5b57\u8282\u4e4b\u540e\uff0c\u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u5fc5\u987b\u5148\u89e3\u6790\u9b54\u672f\u5b57\u8282\uff0c\u7136\u540e\u624d\u80fd\u51b3\u5b9a\u5982\u4f55\u89e3\u91ca\u6279\u91cf\u957f\u5ea6\u548c\u9b54\u672f\u5b57\u8282\u4e4b\u95f4\u7684\u5b57\u8282\u3002\u5206\u533a\u9886\u5bfc\u7eaa\u5143\u5b57\u6bb5\u4e0d\u5305\u542b\u5728 CRC \u8ba1\u7b97\u4e2d\uff0c\u4ee5\u907f\u514d\u5728\u4e3a\u4ee3\u7406\u63a5\u6536\u7684\u6bcf\u4e2a\u6279\u6b21\u5206\u914d\u8be5\u5b57\u6bb5\u65f6\u9700\u8981\u91cd\u65b0\u8ba1\u7b97 CRC\u3002CRC-32C (Castagnoli) \u591a\u9879\u5f0f\u7528\u4e8e\u8ba1\u7b97\u3002 \u5173\u4e8e\u538b\u7f29\uff1a\u4e0e\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u4e0d\u540c\uff0cmagic v2 \u53ca\u66f4\u9ad8\u7248\u672c\u5728\u6e05\u7406\u65e5\u5fd7\u65f6\u4fdd\u7559\u539f\u59cb\u6279\u6b21\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u504f\u79fb\u91cf/\u5e8f\u5217\u53f7\u3002\u8fd9\u662f\u4e3a\u4e86\u80fd\u591f\u5728\u91cd\u65b0\u52a0\u8f7d\u65e5\u5fd7\u65f6\u6062\u590d\u751f\u4ea7\u8005\u7684\u72b6\u6001\u6240\u5fc5\u9700\u7684\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6ca1\u6709\u4fdd\u7559\u6700\u540e\u4e00\u4e2a\u5e8f\u5217\u53f7\uff0c\u90a3\u4e48\u5728\u5206\u533a\u9886\u5bfc\u8005\u5931\u8d25\u540e\uff0c\u751f\u4ea7\u8005\u53ef\u80fd\u4f1a\u770b\u5230 OutOfSequence \u9519\u8bef\u3002\u5fc5\u987b\u4fdd\u7559\u57fa\u672c\u5e8f\u5217\u53f7\u4ee5\u8fdb\u884c\u91cd\u590d\u68c0\u67e5\uff08\u4ee3\u7406\u901a\u8fc7\u9a8c\u8bc1\u4f20\u5165\u6279\u6b21\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5e8f\u5217\u53f7\u662f\u5426\u4e0e\u8be5\u751f\u4ea7\u8005\u7684\u6700\u540e\u4e00\u4e2a\u5e8f\u5217\u53f7\u5339\u914d\u6765\u68c0\u67e5\u4f20\u5165\u7684 Produce \u8bf7\u6c42\u662f\u5426\u6709\u91cd\u590d\uff09\u3002\u56e0\u6b64\uff0c\u5f53\u6279\u6b21\u4e2d\u7684\u6240\u6709\u8bb0\u5f55\u90fd\u88ab\u6e05\u9664\u4f46\u4ecd\u4fdd\u7559\u6279\u6b21\u4ee5\u4fdd\u7559\u751f\u4ea7\u8005\u7684\u6700\u540e\u5e8f\u5217\u53f7\u65f6\uff0c\u65e5\u5fd7\u4e2d\u53ef\u80fd\u4f1a\u6709\u7a7a\u6279\u6b21\u3002 \u5982\u679c\u8bb0\u5f55\u6279\u6b21\u5305\u542b\u5177\u6709\u7a7a\u8d1f\u8f7d\u6216\u4e2d\u6b62\u4e8b\u52a1\u6807\u8bb0\u7684\u8bb0\u5f55\uff0c\u5219\u538b\u7f29\u8fd8\u53ef\u80fd\u4f1a\u4fee\u6539baseTimestamp\u3002baseTimestamp \u5c06\u8bbe\u7f6e\u4e3a\u5e94\u5220\u9664\u8fd9\u4e9b\u8bb0\u5f55\u7684\u65f6\u95f4\u6233\uff0c\u5e76\u8bbe\u7f6e\u5220\u9664\u8303\u56f4\u5c5e\u6027\u4f4d\u3002 5.3.1.1 \u63a7\u5236\u6279\u6b21 \u63a7\u5236\u6279\u6b21\u5305\u542b\u79f0\u4e3a\u63a7\u5236\u8bb0\u5f55\u7684\u5355\u4e2a\u8bb0\u5f55\u3002\u63a7\u5236\u8bb0\u5f55\u4e0d\u5e94\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002\u76f8\u53cd\uff0c\u6d88\u8d39\u8005\u4f7f\u7528\u5b83\u4eec\u6765\u8fc7\u6ee4\u6389\u4e2d\u6b62\u7684\u4e8b\u52a1\u6d88\u606f\u3002 \u63a7\u5236\u8bb0\u5f55\u7684\u952e\u7b26\u5408\u4ee5\u4e0b\u6a21\u5f0f\uff1a version: int16 (current version is 0) type: int16 (0 indicates an abort marker, 1 indicates a commit) \u63a7\u5236\u8bb0\u5f55\u503c\u7684\u67b6\u6784\u53d6\u51b3\u4e8e\u7c7b\u578b\u3002\u8be5\u503c\u5bf9\u5ba2\u6237\u6765\u8bf4\u662f\u4e0d\u900f\u660e\u7684\u3002 5.3.2 \u8bb0\u5f55 \u8bb0\u5f55\u7ea7\u6807\u5934\u662f\u5728 Kafka 0.11.0 \u4e2d\u5f15\u5165\u7684\u3002\u5e26\u6709\u6807\u5934\u7684\u8bb0\u5f55\u7684\u78c1\u76d8\u683c\u5f0f\u5982\u4e0b\u6240\u793a\u3002 length: varint attributes: int8 bit 0~7: unused timestampDelta: varlong offsetDelta: varint keyLength: varint key: byte[] valueLen: varint value: byte[] Headers => [Header] 5.3.2.1 \u8bb0\u5f55\u5934 headerKeyLength: varint headerKey: String headerValueLength: varint Value: byte[] \u6211\u4eec\u4f7f\u7528\u4e0e Protobuf \u76f8\u540c\u7684 varint \u7f16\u7801\u3002 \u6709\u5173\u540e\u8005\u7684\u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728\u8fd9\u91cc \u627e\u5230\u3002\u8bb0\u5f55\u4e2d\u7684\u6807\u5934\u8ba1\u6570\u4e5f\u88ab\u7f16\u7801\u4e3a varint\u3002 5.3.3 \u65e7\u6d88\u606f\u683c\u5f0f \u5728Kafka 0.11\u4e4b\u524d\uff0c\u6d88\u606f\u88ab\u4f20\u8f93\u5e76\u5b58\u50a8\u5728 \u6d88\u606f\u96c6\u4e2d \u3002\u5728\u6d88\u606f\u96c6\u4e2d\uff0c\u6bcf\u6761\u6d88\u606f\u90fd\u6709\u81ea\u5df1\u7684\u5143\u6570\u636e\u3002\u8bf7\u6ce8\u610f\uff0c\u867d\u7136\u6d88\u606f\u96c6\u8868\u793a\u4e3a\u6570\u7ec4\uff0c\u4f46\u5b83\u4eec\u4e0d\u50cf\u534f\u8bae\u4e2d\u7684\u5176\u4ed6\u6570\u7ec4\u5143\u7d20\u90a3\u6837\u524d\u9762\u6709 int32 \u6570\u7ec4\u5927\u5c0f\u3002 \u6d88\u606f\u96c6\uff1a MessageSet (Version: 0) => [offset message_size message] offset => INT64 message_size => INT32 message => crc magic_byte attributes key value crc => INT32 magic_byte => INT8 attributes => INT8 bit 0~2: 0: no compression 1: gzip 2: snappy bit 3~7: unused key => BYTES value => BYTES MessageSet (Version: 1) => [offset message_size message] offset => INT64 message_size => INT32 message => crc magic_byte attributes timestamp key value crc => INT32 magic_byte => INT8 attributes => INT8 bit 0~2: 0: no compression 1: gzip 2: snappy 3: lz4 bit 3: timestampType 0: create time 1: log append time bit 4~7: unused timestamp => INT64 key => BYTES value => BYTES \u5728 Kafka 0.10 \u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0c\u552f\u4e00\u652f\u6301\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff08\u5728\u5e7b\u503c\u4e2d\u6307\u793a\uff09\u662f 0\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c 1 \u5728 0.10 \u7248\u672c\u4e2d\u5f15\u5165\u4e86\u65f6\u95f4\u6233\u652f\u6301\u3002 \u4e0e\u4e0a\u9762\u7684\u7248\u672c 2 \u7c7b\u4f3c\uff0c\u5c5e\u6027\u7684\u6700\u4f4e\u4f4d\u8868\u793a\u538b\u7f29\u7c7b\u578b\u3002 \u5728\u7248\u672c 1 \u4e2d\uff0c\u751f\u4ea7\u8005\u5e94\u59cb\u7ec8\u5c06\u65f6\u95f4\u6233\u7c7b\u578b\u4f4d\u8bbe\u7f6e\u4e3a 0\u3002\u5982\u679c\u4e3b\u9898\u914d\u7f6e\u4e3a\u4f7f\u7528\u65e5\u5fd7\u9644\u52a0\u65f6\u95f4\uff08\u901a\u8fc7\u4ee3\u7406\u7ea7\u522b\u914d\u7f6e log.message.timestamp.type = LogAppendTime \u6216\u4e3b\u9898\u7ea7\u522b\u914d\u7f6e message.timestamp.type = LogAppendTime \uff09\uff0cbroker \u5c06\u8986\u76d6\u65f6\u95f4\u6233\u7c7b\u578b\u548c\u6d88\u606f\u96c6\u4e2d\u7684\u65f6\u95f4\u6233\u3002 \u5c5e\u6027\u7684\u6700\u9ad8\u4f4d\u5fc5\u987b\u8bbe\u7f6e\u4e3a 0\u3002 \u5728\u6d88\u606f\u683c\u5f0f\u7248\u672c 0 \u548c 1 \u4e2d\uff0cKafka \u652f\u6301\u9012\u5f52\u6d88\u606f\u4ee5\u542f\u7528\u538b\u7f29\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5fc5\u987b\u5c06\u6d88\u606f\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u6307\u793a\u5176\u4e2d\u4e00\u79cd\u538b\u7f29\u7c7b\u578b\uff0c\u5e76\u4e14\u503c\u5b57\u6bb5\u5c06\u5305\u542b\u4f7f\u7528\u8be5\u7c7b\u578b\u538b\u7f29\u7684\u6d88\u606f\u96c6\u3002\u6211\u4eec\u7ecf\u5e38\u5c06\u5d4c\u5957\u6d88\u606f\u79f0\u4e3a inner messages \u5185\u90e8\u6d88\u606f\uff0c\u5c06\u5305\u88c5\u6d88\u606f\u79f0\u4e3a outer message \u5916\u90e8\u6d88\u606f\u3002\u8bf7\u6ce8\u610f\uff0c\u5916\u90e8\u6d88\u606f\u7684\u952e\u5e94\u8be5\u4e3a\u7a7a\uff0c\u5e76\u4e14\u5176\u504f\u79fb\u91cf\u5c06\u662f\u6700\u540e\u4e00\u4e2a\u5185\u90e8\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002 \u5f53\u63a5\u6536\u5230\u9012\u5f52\u7248\u672c 0 \u6d88\u606f\u65f6\uff0c\u4ee3\u7406\u4f1a\u89e3\u538b\u7f29\u5b83\u4eec\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5185\u90e8\u6d88\u606f\u5355\u72ec\u5206\u914d\u4e00\u4e2a\u504f\u79fb\u91cf\u3002\u5728\u7248\u672c 1 \u4e2d\uff0c\u4e3a\u4e86\u907f\u514d\u670d\u52a1\u5668\u7aef\u91cd\u65b0\u538b\u7f29\uff0c\u53ea\u4f1a\u4e3a\u5305\u88c5\u5668\u6d88\u606f\u5206\u914d\u504f\u79fb\u91cf\u3002\u5185\u90e8\u6d88\u606f\u5c06\u5177\u6709\u76f8\u5bf9\u504f\u79fb\u3002\u7edd\u5bf9\u504f\u79fb\u91cf\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u6d88\u606f\u7684\u504f\u79fb\u91cf\u6765\u8ba1\u7b97\uff0c\u8be5\u504f\u79fb\u91cf\u5bf9\u5e94\u4e8e\u5206\u914d\u7ed9\u6700\u540e\u4e00\u4e2a\u5185\u90e8\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002 crc \u5b57\u6bb5\u5305\u542b\u540e\u7eed\u6d88\u606f\u5b57\u8282\uff08\u5373\u4ece\u5e7b\u5b57\u8282\u5230\u503c\uff09\u7684 CRC32\uff08\u800c\u975e CRC-32C\uff09\u3002 5.4 \u65e5\u5fd7 \u5177\u6709\u4e24\u4e2a\u5206\u533a\u7684\u540d\u4e3a\u201cmy-topic\u201d\u7684\u4e3b\u9898\u7684\u65e5\u5fd7\u7531\u4e24\u4e2a\u76ee\u5f55\uff08\u5373 my-topic-0 \u548c my-topic-1 \uff09\u7ec4\u6210\uff0c\u5176\u4e2d\u586b\u5145\u4e86\u5305\u542b\u8be5\u4e3b\u9898\u6d88\u606f\u7684\u6570\u636e\u6587\u4ef6\u3002\u65e5\u5fd7\u6587\u4ef6\u7684\u683c\u5f0f\u662f\u4e00\u7cfb\u5217\u201c\u65e5\u5fd7\u6761\u76ee\u201d\uff1b\u6bcf\u4e2a\u65e5\u5fd7\u6761\u76ee\u90fd\u662f\u4e00\u4e2a 4 \u5b57\u8282\u6574\u6570 N\uff0c \u5b58\u50a8\u6d88\u606f\u957f\u5ea6\uff0c\u540e\u8ddf N \u4e2a\u6d88\u606f\u5b57\u8282\u3002 \u6bcf\u6761\u6d88\u606f\u7531 64 \u4f4d\u6574\u6570\u504f\u79fb\u91cf \u552f\u4e00\u6807\u8bc6\u7ed9\u51fa\u8be5\u6d88\u606f\u5728\u66fe\u7ecf\u53d1\u9001\u5230\u8be5\u5206\u533a\u4e0a\u8be5\u4e3b\u9898\u7684\u6240\u6709\u6d88\u606f\u6d41\u4e2d\u5f00\u59cb\u7684\u5b57\u8282\u4f4d\u7f6e\u3002\u4e0b\u9762\u7ed9\u51fa\u4e86\u6bcf\u6761\u6d88\u606f\u7684\u78c1\u76d8\u683c\u5f0f\u3002\u6bcf\u4e2a\u65e5\u5fd7\u6587\u4ef6\u90fd\u4ee5\u5176\u5305\u542b\u7684\u7b2c\u4e00\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\u547d\u540d\u3002\u56e0\u6b64\uff0c\u521b\u5efa\u7684\u7b2c\u4e00\u4e2a\u6587\u4ef6\u5c06\u662f 00000000000000000000.log\uff0c\u6bcf\u4e2a\u9644\u52a0\u6587\u4ef6\u5c06\u6709\u4e00\u4e2a\u4e0e\u524d\u4e00\u4e2a\u6587\u4ef6\u5927\u7ea6 S \u5b57\u8282\u7684\u6574\u6570\u540d\u79f0\uff0c\u5176\u4e2d S \u662f\u914d\u7f6e\u4e2d\u7ed9\u5b9a\u7684\u6700\u5927\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u3002 \u8bb0\u5f55\u7684\u786e\u5207\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f5c\u4e3a\u6807\u51c6\u63a5\u53e3\u8fdb\u884c\u7248\u672c\u63a7\u5236\u548c\u7ef4\u62a4\uff0c\u56e0\u6b64\u8bb0\u5f55\u6279\u6b21\u53ef\u4ee5\u5728\u751f\u4ea7\u8005\u3001\u4ee3\u7406\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u4f20\u8f93\uff0c\u800c\u65e0\u9700\u5728\u9700\u8981\u65f6\u91cd\u65b0\u590d\u5236\u6216\u8f6c\u6362\u3002\u4e0a\u4e00\u8282\u5305\u542b\u6709\u5173\u8bb0\u5f55\u7684\u78c1\u76d8\u683c\u5f0f\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u4f7f\u7528\u6d88\u606f\u504f\u79fb\u91cf\u4f5c\u4e3a\u6d88\u606f ID \u7684\u60c5\u51b5\u5e76\u4e0d\u5e38\u89c1\u3002\u6211\u4eec\u6700\u521d\u7684\u60f3\u6cd5\u662f\u4f7f\u7528\u751f\u4ea7\u8005\u751f\u6210\u7684 GUID\uff0c\u5e76\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7ef4\u62a4\u4ece GUID \u5230\u504f\u79fb\u91cf\u7684\u6620\u5c04\u3002\u4f46\u7531\u4e8e\u6d88\u8d39\u8005\u5fc5\u987b\u4e3a\u6bcf\u53f0\u670d\u52a1\u5668\u7ef4\u62a4\u4e00\u4e2a ID\uff0c\u56e0\u6b64 GUID \u7684\u5168\u5c40\u552f\u4e00\u6027\u6ca1\u6709\u4efb\u4f55\u4ef7\u503c\u3002\u6b64\u5916\uff0c\u7ef4\u62a4\u4ece\u968f\u673a ID \u5230\u504f\u79fb\u91cf\u7684\u6620\u5c04\u7684\u590d\u6742\u6027\u9700\u8981\u4e00\u4e2a\u5fc5\u987b\u4e0e\u78c1\u76d8\u540c\u6b65\u7684\u91cd\u91cf\u7ea7\u7d22\u5f15\u7ed3\u6784\uff0c\u672c\u8d28\u4e0a\u9700\u8981\u4e00\u4e2a\u5b8c\u5168\u6301\u4e45\u7684\u968f\u673a\u8bbf\u95ee\u6570\u636e\u7ed3\u6784\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u7b80\u5316\u67e5\u627e\u200b\u200b\u7ed3\u6784\uff0c\u6211\u4eec\u51b3\u5b9a\u4f7f\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6bcf\u5206\u533a\u539f\u5b50\u8ba1\u6570\u5668\uff0c\u5b83\u53ef\u4ee5\u4e0e\u5206\u533a id \u548c\u8282\u70b9 id \u7ed3\u5408\u8d77\u6765\u552f\u4e00\u5730\u6807\u8bc6\u4e00\u6761\u6d88\u606f\uff1b\u8fd9\u4f7f\u5f97\u67e5\u627e\u7ed3\u6784\u66f4\u7b80\u5355\uff0c\u5c3d\u7ba1\u6bcf\u4e2a\u6d88\u8d39\u8005\u8bf7\u6c42\u4ecd\u53ef\u80fd\u8fdb\u884c\u591a\u6b21\u67e5\u627e\u3002\u7136\u800c\uff0c\u4e00\u65e6\u6211\u4eec\u9009\u5b9a\u4e86\u67dc\u53f0\uff0c\u76f4\u63a5\u4f7f\u7528\u504f\u79fb\u91cf\u7684\u8df3\u8f6c\u4f3c\u4e4e\u5f88\u81ea\u7136\u2014\u2014\u6bd5\u7adf\u4e24\u8005\u90fd\u662f\u5206\u533a\u7279\u6709\u7684\u5355\u8c03\u9012\u589e\u6574\u6570\u3002\u7531\u4e8e\u504f\u79fb\u91cf\u5bf9\u6d88\u8d39\u8005 API \u662f\u9690\u85cf\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u51b3\u5b9a\u6700\u7ec8\u662f\u4e00\u4e2a\u5b9e\u73b0\u7ec6\u8282\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u66f4\u6709\u6548\u7684\u65b9\u6cd5\u3002 \u5199 \u65e5\u5fd7\u5141\u8bb8\u4e32\u884c\u8ffd\u52a0\uff0c\u59cb\u7ec8\u8f6c\u5230\u6700\u540e\u4e00\u4e2a\u6587\u4ef6\u3002\u5f53\u8be5\u6587\u4ef6\u8fbe\u5230\u53ef\u914d\u7f6e\u5927\u5c0f\uff08\u4f8b\u5982 1GB\uff09\u65f6\uff0c\u5b83\u4f1a\u8f6c\u5b58\u4e3a\u65b0\u6587\u4ef6\u3002\u65e5\u5fd7\u91c7\u7528\u4e24\u4e2a\u914d\u7f6e\u53c2\u6570\uff1a M \uff0c\u5b83\u7ed9\u51fa\u5728\u5f3a\u5236\u64cd\u4f5c\u7cfb\u7edf\u5c06\u6587\u4ef6\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u8981\u5199\u5165\u7684\u6d88\u606f\u6570\uff1b\u4ee5\u53ca S \uff0c\u5b83\u7ed9\u51fa\u5f3a\u5236\u5237\u65b0\u4e4b\u524d\u7684\u79d2\u6570\u3002\u8fd9\u63d0\u4f9b\u4e86\u5728\u7cfb\u7edf\u5d29\u6e83\u65f6 \u6700\u591a\u4e22\u5931 M \u6761\u6d88\u606f\u6216 S\u79d2\u6570\u636e\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u3002 \u8bfb \u8bfb\u53d6\u662f\u901a\u8fc7\u7ed9\u51fa\u6d88\u606f\u7684 64 \u4f4d\u903b\u8f91\u504f\u79fb\u91cf\u548c S \u5b57\u8282\u6700\u5927\u5757\u5927\u5c0f\u6765\u5b8c\u6210\u7684\u3002 \u8fd9\u5c06\u8fd4\u56deS \u5b57\u8282\u7f13\u51b2\u533a\u4e2d\u5305\u542b\u7684\u6d88\u606f\u7684\u8fed\u4ee3\u5668\u3002 S \u65e8\u5728\u5927\u4e8e\u4efb\u4f55\u5355\u4e2a\u6d88\u606f\uff0c\u4f46\u5982\u679c\u6d88\u606f\u5f02\u5e38\u5927\uff0c\u5219\u53ef\u4ee5\u91cd\u8bd5\u591a\u6b21\u8bfb\u53d6\uff0c\u6bcf\u6b21\u5c06\u7f13\u51b2\u533a\u5927\u5c0f\u52a0\u500d\uff0c\u76f4\u5230\u6210\u529f\u8bfb\u53d6\u6d88\u606f\u3002\u53ef\u4ee5\u6307\u5b9a\u6700\u5927\u6d88\u606f\u548c\u7f13\u51b2\u533a\u5927\u5c0f\uff0c\u4ee5\u4f7f\u670d\u52a1\u5668\u62d2\u7edd\u5927\u4e8e\u67d0\u4e2a\u5927\u5c0f\u7684\u6d88\u606f\uff0c\u5e76\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u83b7\u53d6\u5b8c\u6574\u6d88\u606f\u6240\u9700\u8bfb\u53d6\u7684\u6700\u5927\u503c\u7684\u9650\u5236\u3002\u8bfb\u53d6\u7f13\u51b2\u533a\u5f88\u53ef\u80fd\u4ee5\u90e8\u5206\u6d88\u606f\u7ed3\u675f\uff0c\u8fd9\u5f88\u5bb9\u6613\u901a\u8fc7\u5927\u5c0f\u5206\u9694\u6765\u68c0\u6d4b\u5230\u3002 \u4ece\u504f\u79fb\u91cf\u8bfb\u53d6\u7684\u5b9e\u9645\u8fc7\u7a0b\u9700\u8981\u9996\u5148\u627e\u5230\u5b58\u50a8\u6570\u636e\u7684\u65e5\u5fd7\u6bb5\u6587\u4ef6\uff0c\u6839\u636e\u5168\u5c40\u504f\u79fb\u503c\u8ba1\u7b97\u6587\u4ef6\u7279\u5b9a\u7684\u504f\u79fb\u91cf\uff0c\u7136\u540e\u4ece\u8be5\u6587\u4ef6\u504f\u79fb\u91cf\u8bfb\u53d6\u3002\u641c\u7d22\u662f\u4f5c\u4e3a\u9488\u5bf9\u6bcf\u4e2a\u6587\u4ef6\u7ef4\u62a4\u7684\u5185\u5b58\u8303\u56f4\u7684\u7b80\u5355\u4e8c\u5206\u641c\u7d22\u53d8\u4f53\u6765\u5b8c\u6210\u7684\u3002 \u8be5\u65e5\u5fd7\u63d0\u4f9b\u4e86\u83b7\u53d6\u6700\u8fd1\u5199\u5165\u7684\u6d88\u606f\u7684\u529f\u80fd\uff0c\u4ee5\u5141\u8bb8\u5ba2\u6237\u7aef\u201c\u7acb\u5373\u201d\u5f00\u59cb\u8ba2\u9605\u3002\u5982\u679c\u6d88\u8d39\u8005\u672a\u80fd\u5728 SLA \u6307\u5b9a\u7684\u5929\u6570\u5185\u4f7f\u7528\u5176\u6570\u636e\uff0c\u8fd9\u4e5f\u5f88\u6709\u7528\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53\u5ba2\u6237\u7aef\u5c1d\u8bd5\u4f7f\u7528\u4e0d\u5b58\u5728\u7684\u504f\u79fb\u91cf\u65f6\uff0c\u5b83\u4f1a\u6536\u5230 OutOfRangeException \u5f02\u5e38\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u6839\u636e\u7528\u4f8b\u81ea\u884c\u91cd\u7f6e\u6216\u5931\u8d25\u3002 \u4ee5\u4e0b\u662f\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u7684\u7ed3\u679c\u7684\u683c\u5f0f\u3002 MessageSetSend (fetch result) total length : 4 bytes error code : 2 bytes message 1 : x bytes ... message n : x bytes MultiMessageSetSend (multiFetch result) total length : 4 bytes error code : 2 bytes messageSetSend 1 ... messageSetSend n \u5220\u9664 \u4e00\u6b21\u5220\u9664\u4e00\u4e2a\u65e5\u5fd7\u6bb5\u7684\u6570\u636e\u3002\u65e5\u5fd7\u7ba1\u7406\u5668\u5e94\u7528\u4e24\u4e2a\u6307\u6807\u6765\u8bc6\u522b\u9002\u5408\u5220\u9664\u7684\u6bb5\uff1a\u65f6\u95f4\u548c\u5927\u5c0f\u3002\u5bf9\u4e8e\u57fa\u4e8e\u65f6\u95f4\u7684\u7b56\u7565\uff0c\u4f1a\u8003\u8651\u8bb0\u5f55\u65f6\u95f4\u6233\uff0c\u5206\u6bb5\u6587\u4ef6\u4e2d\u6700\u5927\u7684\u65f6\u95f4\u6233\uff08\u8bb0\u5f55\u987a\u5e8f\u4e0d\u76f8\u5173\uff09\u5b9a\u4e49\u6574\u4e2a\u5206\u6bb5\u7684\u4fdd\u7559\u65f6\u95f4\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7981\u7528\u57fa\u4e8e\u5927\u5c0f\u7684\u4fdd\u7559\u3002\u542f\u7528\u540e\uff0c\u65e5\u5fd7\u7ba1\u7406\u5668\u5c06\u4e0d\u65ad\u5220\u9664\u6700\u65e7\u7684\u6bb5\u6587\u4ef6\uff0c\u76f4\u5230\u5206\u533a\u7684\u603b\u4f53\u5927\u5c0f\u518d\u6b21\u4f4d\u4e8e\u914d\u7f6e\u7684\u9650\u5236\u5185\u3002\u5982\u679c\u540c\u65f6\u542f\u7528\u8fd9\u4e24\u4e2a\u7b56\u7565\uff0c\u5219\u7531\u4e8e\u4efb\u4e00\u7b56\u7565\u800c\u7b26\u5408\u5220\u9664\u6761\u4ef6\u7684\u6bb5\u5c06\u88ab\u5220\u9664\u3002 \u4fdd\u8bc1 \u65e5\u5fd7\u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u53c2\u6570 M \uff0c\u5b83\u63a7\u5236\u5728\u5f3a\u5236\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u5199\u5165\u7684\u6700\u5927\u6d88\u606f\u6570\u3002\u542f\u52a8\u65f6\uff0c\u8fd0\u884c\u65e5\u5fd7\u6062\u590d\u8fdb\u7a0b\uff0c\u8fed\u4ee3\u6700\u65b0\u65e5\u5fd7\u6bb5\u4e2d\u7684\u6240\u6709\u6d88\u606f\u5e76\u9a8c\u8bc1\u6bcf\u4e2a\u6d88\u606f\u6761\u76ee\u662f\u5426\u6709\u6548\u3002\u5982\u679c\u6d88\u606f\u6761\u76ee\u7684\u5927\u5c0f\u548c\u504f\u79fb\u91cf\u4e4b\u548c\u5c0f\u4e8e\u6587\u4ef6\u7684\u957f\u5ea6\u5e76\u4e14\u6d88\u606f\u6709\u6548\u8d1f\u8f7d\u7684 CRC32 \u4e0e\u6d88\u606f\u4e2d\u5b58\u50a8\u7684 CRC \u5339\u914d\uff0c\u5219\u6d88\u606f\u6761\u76ee\u6709\u6548\u3002\u5982\u679c\u68c0\u6d4b\u5230\u635f\u574f\uff0c\u65e5\u5fd7\u5c06\u88ab\u622a\u65ad\u5230\u6700\u540e\u4e00\u4e2a\u6709\u6548\u504f\u79fb\u91cf\u3002 \u8bf7\u6ce8\u610f\uff0c\u5fc5\u987b\u5904\u7406\u4e24\u79cd\u7c7b\u578b\u7684\u635f\u574f\uff1a\u7531\u4e8e\u5d29\u6e83\u800c\u4e22\u5931\u672a\u5199\u5165\u5757\u7684\u622a\u65ad\uff0c\u4ee5\u53ca\u5c06\u65e0\u610f\u4e49\u5757\u6dfb\u52a0\u5230\u6587\u4ef6\u7684\u635f\u574f\u3002\u8fd9\u6837\u505a\u7684\u539f\u56e0\u662f\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u4fdd\u8bc1\u6587\u4ef6 inode \u548c\u5b9e\u9645\u5757\u6570\u636e\u4e4b\u95f4\u7684\u5199\u5165\u987a\u5e8f\uff0c\u56e0\u6b64\uff0c\u5982\u679c inode \u66f4\u65b0\u4e3a\u65b0\u5927\u5c0f\uff0c\u90a3\u4e48\u9664\u4e86\u4e22\u5931\u5199\u5165\u6570\u636e\u4e4b\u5916\uff0c\u6587\u4ef6\u8fd8\u53ef\u80fd\u83b7\u5f97\u65e0\u610f\u4e49\u7684\u6570\u636e\u3002\u5d29\u6e83\u53d1\u751f\u5728\u5199\u5165\u5305\u542b\u8be5\u6570\u636e\u7684\u5757\u4e4b\u524d\u3002CRC \u68c0\u6d4b\u5230\u8fd9\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5e76\u9632\u6b62\u5176\u635f\u574f\u65e5\u5fd7\uff08\u5c3d\u7ba1\u672a\u5199\u5165\u7684\u6d88\u606f\u5f53\u7136\u4f1a\u4e22\u5931\uff09\u3002 5.5 \u5206\u5e03 \u6d88\u8d39\u8005\u62b5\u6d88\u8ffd\u8e2a Kafka \u6d88\u8d39\u8005\u8ddf\u8e2a\u5b83\u5728\u6bcf\u4e2a\u5206\u533a\u4e2d\u6d88\u8017\u7684\u6700\u5927\u504f\u79fb\u91cf\uff0c\u5e76\u4e14\u80fd\u591f\u63d0\u4ea4\u504f\u79fb\u91cf\uff0c\u4ee5\u4fbf\u5728\u91cd\u65b0\u542f\u52a8\u65f6\u53ef\u4ee5\u4ece\u8fd9\u4e9b\u504f\u79fb\u91cf\u6062\u590d\u3002Kafka \u63d0\u4f9b\u4e86\u5c06\u7ed9\u5b9a\u6d88\u8d39\u8005\u7ec4\u7684\u6240\u6709\u504f\u79fb\u91cf\u5b58\u50a8\u5728\u79f0\u4e3a\u7ec4\u534f\u8c03\u5668\u7684\u6307\u5b9a\u4ee3\u7406\uff08\u9488\u5bf9\u8be5\u7ec4\uff09\u4e2d\u7684\u9009\u9879\u3002\u5373\uff0c\u8be5\u6d88\u8d39\u8005\u7ec4\u4e2d\u7684\u4efb\u4f55\u6d88\u8d39\u8005\u5b9e\u4f8b\u90fd\u5e94\u8be5\u5c06\u5176\u504f\u79fb\u91cf\u63d0\u4ea4\u548c\u83b7\u53d6\u53d1\u9001\u5230\u8be5\u7ec4\u534f\u8c03\u5668\uff08\u4ee3\u7406\uff09\u3002\u6d88\u8d39\u8005\u7ec4\u6839\u636e\u7ec4\u540d\u5206\u914d\u7ed9\u534f\u8c03\u5458\u3002\u6d88\u8d39\u8005\u53ef\u4ee5\u901a\u8fc7\u5411\u4efb\u4f55 Kafka \u4ee3\u7406\u53d1\u51fa FindCoordinatorRequest \u5e76\u8bfb\u53d6\u5305\u542b\u534f\u8c03\u5668\u8be6\u7ec6\u4fe1\u606f\u7684 FindCoordinatorResponse \u6765\u67e5\u627e\u5176\u534f\u8c03\u5668\u3002\u7136\u540e\uff0c\u6d88\u8d39\u8005\u53ef\u4ee5\u7ee7\u7eed\u4ece\u534f\u8c03\u4ee3\u7406\u4e2d\u63d0\u4ea4\u6216\u83b7\u53d6\u504f\u79fb\u91cf\u3002\u5982\u679c\u534f\u8c03\u5668\u79fb\u52a8\uff0c\u6d88\u8d39\u8005\u5c06\u9700\u8981\u91cd\u65b0\u53d1\u73b0\u534f\u8c03\u5668\u3002\u504f\u79fb\u91cf\u63d0\u4ea4\u53ef\u4ee5\u7531\u6d88\u8d39\u8005\u5b9e\u4f8b\u81ea\u52a8\u6216\u624b\u52a8\u5b8c\u6210\u3002 \u5f53\u7ec4\u534f\u8c03\u5668\u6536\u5230 OffsetCommitRequest \u65f6\uff0c\u5b83\u4f1a\u5c06\u8bf7\u6c42\u9644\u52a0\u5230\u540d\u4e3a __consumer_offsets\u7684\u7279\u6b8a \u538b\u7f29 Kafka \u4e3b\u9898\u3002\u4ec5\u5f53\u504f\u79fb\u91cf\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u90fd\u6536\u5230\u504f\u79fb\u91cf\u540e\uff0c\u4ee3\u7406\u624d\u4f1a\u5411\u6d88\u8d39\u8005\u53d1\u9001\u6210\u529f\u7684\u504f\u79fb\u91cf\u63d0\u4ea4\u54cd\u5e94\u3002\u5982\u679c\u504f\u79fb\u91cf\u672a\u80fd\u5728\u53ef\u914d\u7f6e\u7684\u8d85\u65f6\u5185\u590d\u5236\uff0c\u5219\u504f\u79fb\u91cf\u63d0\u4ea4\u5c06\u5931\u8d25\uff0c\u5e76\u4e14\u6d88\u8d39\u8005\u53ef\u4ee5\u5728\u9000\u51fa\u540e\u91cd\u8bd5\u63d0\u4ea4\u3002\u4ee3\u7406\u5b9a\u671f\u538b\u7f29\u504f\u79fb\u91cf\u4e3b\u9898\uff0c\u56e0\u4e3a\u5b83\u53ea\u9700\u8981\u7ef4\u62a4\u6bcf\u4e2a\u5206\u533a\u7684\u6700\u65b0\u504f\u79fb\u91cf\u63d0\u4ea4\u3002\u534f\u8c03\u5668\u8fd8\u5c06\u504f\u79fb\u91cf\u7f13\u5b58\u5728\u5185\u5b58\u8868\u4e2d\uff0c\u4ee5\u4fbf\u5feb\u901f\u63d0\u4f9b\u504f\u79fb\u91cf\u83b7\u53d6\u3002 \u5f53\u534f\u8c03\u5668\u6536\u5230\u504f\u79fb\u91cf\u83b7\u53d6\u8bf7\u6c42\u65f6\uff0c\u5b83\u53ea\u662f\u4ece\u504f\u79fb\u91cf\u7f13\u5b58\u4e2d\u8fd4\u56de\u6700\u540e\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u5411\u91cf\u3002\u5982\u679c\u534f\u8c03\u5668\u521a\u521a\u542f\u52a8\u6216\u8005\u5b83\u521a\u521a\u6210\u4e3a\u4e00\u7ec4\u65b0\u7684\u6d88\u8d39\u8005\u7ec4\u7684\u534f\u8c03\u5668\uff08\u901a\u8fc7\u6210\u4e3a\u504f\u79fb\u4e3b\u9898\u5206\u533a\u7684\u9886\u5bfc\u8005\uff09\uff0c\u5b83\u53ef\u80fd\u9700\u8981\u5c06\u504f\u79fb\u4e3b\u9898\u5206\u533a\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u504f\u79fb\u91cf\u83b7\u53d6\u5c06\u5931\u8d25\u5e76\u51fa\u73b0 CoordinatorLoadInProgressException\uff0c\u5e76\u4e14\u4f7f\u7528\u8005\u53ef\u4ee5\u5728\u9000\u51fa\u540e\u91cd\u8bd5 OffsetFetchRequest\u3002 ZooKeeper \u76ee\u5f55 \u4e0b\u9762\u7ed9\u51fa\u4e86\u7528\u4e8e\u534f\u8c03\u6d88\u8d39\u8005\u548c\u4ee3\u7406\u4e4b\u95f4\u7684 ZooKeeper \u7ed3\u6784\u548c\u7b97\u6cd5\u3002 \u7b26\u53f7 \u5f53\u8def\u5f84\u4e2d\u7684\u5143\u7d20\u88ab\u8868\u793a\u4e3a \u65f6 [xyz] \uff0c\u8fd9\u610f\u5473\u7740 xyz \u7684\u503c\u4e0d\u56fa\u5b9a\uff0c\u5e76\u4e14\u5b9e\u9645\u4e0a xyz \u7684\u6bcf\u4e2a\u53ef\u80fd\u503c\u90fd\u6709\u4e00\u4e2a ZooKeeper znode\u3002\u4f8b\u5982\uff0c /topics/[topic] \u540d\u4e3a /topics \u7684\u76ee\u5f55\u5305\u542b\u6bcf\u4e2a\u4e3b\u9898\u540d\u79f0\u7684\u5b50\u76ee\u5f55\u3002\u8fd8\u7ed9\u51fa\u4e86\u6570\u5b57\u8303\u56f4\uff0c\u4f8b\u5982 [0...5] \u6307\u793a\u5b50\u76ee\u5f55 0\u30011\u30012\u30013\u30014\u3002\u7bad\u5934 -> \u7528\u4e8e\u6307\u793a znode \u7684\u5185\u5bb9\u3002\u4f8b\u5982 /hello -> world \uff0c\u5c06\u6307\u793a\u5305\u542b\u503c\u201cworld\u201d\u7684 znode /hello\u3002 \u7ecf\u7eaa\u5546\u8282\u70b9\u6ce8\u518c\u8868 /brokers/ids/[0...N] --> {\"jmx_port\":...,\"timestamp\":...,\"endpoints\":[...],\"host\":...,\"version\":...,\"port\":...} (ephemeral node) \u8fd9\u662f\u6240\u6709\u73b0\u6709\u4ee3\u7406\u8282\u70b9\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u7684\u903b\u8f91\u4ee3\u7406 ID\uff0c\u7528\u4e8e\u5411\u6d88\u8d39\u8005\u6807\u8bc6\u5b83\uff08\u5fc5\u987b\u4f5c\u4e3a\u5176\u914d\u7f6e\u7684\u4e00\u90e8\u5206\u7ed9\u51fa\uff09\u3002\u542f\u52a8\u65f6\uff0c\u4ee3\u7406\u8282\u70b9\u901a\u8fc7\u5728 /brokers/ids \u4e0b\u521b\u5efa\u5177\u6709\u903b\u8f91\u4ee3\u7406 ID \u7684 znode \u6765\u6ce8\u518c\u81ea\u8eab\u3002\u903b\u8f91broker id\u7684\u76ee\u7684\u662f\u5141\u8bb8broker\u79fb\u52a8\u5230\u4e0d\u540c\u7684\u7269\u7406\u673a\u5668\u800c\u4e0d\u5f71\u54cd\u6d88\u8d39\u8005\u3002\u5c1d\u8bd5\u6ce8\u518c\u5df2\u5728\u4f7f\u7528\u7684\u4ee3\u7406 ID\uff08\u4f8b\u5982\uff0c\u56e0\u4e3a\u4e24\u4e2a\u670d\u52a1\u5668\u914d\u7f6e\u4e86\u76f8\u540c\u7684\u4ee3\u7406 ID\uff09\u4f1a\u5bfc\u81f4\u9519\u8bef\u3002 \u7531\u4e8e\u4ee3\u7406\u4f7f\u7528\u4e34\u65f6 znode \u5728 ZooKeeper \u4e2d\u6ce8\u518c\u81ea\u8eab\uff0c\u56e0\u6b64\u8fd9\u79cd\u6ce8\u518c\u662f\u52a8\u6001\u7684\uff0c\u5e76\u4e14\u5982\u679c\u4ee3\u7406\u5173\u95ed\u6216\u6b7b\u4ea1\uff08\u4ece\u800c\u901a\u77e5\u6d88\u8d39\u8005\u5b83\u4e0d\u518d\u53ef\u7528\uff09\uff0c\u8be5\u6ce8\u518c\u5c31\u4f1a\u6d88\u5931\u3002 \u7ecf\u7eaa\u5546\u4e3b\u9898\u6ce8\u518c\u8868 /brokers/topics/[topic]/partitions/[0...N]/state --> {\"controller_epoch\":...,\"leader\":...,\"version\":...,\"leader_epoch\":...,\"isr\":[...]} (ephemeral node) \u6bcf\u4e2a\u4ee3\u7406\u90fd\u4f1a\u5728\u5176\u7ef4\u62a4\u7684\u4e3b\u9898\u4e0b\u6ce8\u518c\u81ea\u5df1\uff0c\u5e76\u5b58\u50a8\u8be5\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\u3002 \u96c6\u7fa4 ID \u96c6\u7fa4 ID \u662f\u5206\u914d\u7ed9 Kafka \u96c6\u7fa4\u7684\u552f\u4e00\u4e14\u4e0d\u53ef\u53d8\u7684\u6807\u8bc6\u7b26\u3002\u96c6\u7fa4 ID \u6700\u591a\u53ef\u4ee5\u6709 22 \u4e2a\u5b57\u7b26\uff0c\u5141\u8bb8\u7684\u5b57\u7b26\u7531\u6b63\u5219\u8868\u8fbe\u5f0f [a-zA-Z0-9_\\-]+ \u5b9a\u4e49\uff0c\u5b83\u5bf9\u5e94\u4e8e\u4e0d\u5e26\u586b\u5145\u7684 URL \u5b89\u5168 Base64 \u53d8\u4f53\u4f7f\u7528\u7684\u5b57\u7b26\u3002\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u5b83\u662f\u5728\u96c6\u7fa4\u7b2c\u4e00\u6b21\u542f\u52a8\u65f6\u81ea\u52a8\u751f\u6210\u7684\u3002 \u4ece\u5b9e\u73b0\u89d2\u5ea6\u6765\u770b\uff0c\u5b83\u662f\u5728 0.10.1 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u9996\u6b21\u6210\u529f\u542f\u52a8\u65f6\u751f\u6210\u7684\u3002\u4ee3\u7406 /cluster/id \u5728\u542f\u52a8\u671f\u95f4\u5c1d\u8bd5\u4ece znode \u83b7\u53d6\u96c6\u7fa4 ID\u3002\u5982\u679c znode \u4e0d\u5b58\u5728\uff0cbroker \u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4 id\uff0c\u5e76\u4f7f\u7528\u8be5\u96c6\u7fa4 id \u521b\u5efa znode\u3002 \u7ecf\u7eaa\u5546\u8282\u70b9\u6ce8\u518c \u4ee3\u7406\u8282\u70b9\u57fa\u672c\u4e0a\u662f\u72ec\u7acb\u7684\uff0c\u56e0\u6b64\u5b83\u4eec\u53ea\u53d1\u5e03\u6709\u5173\u5176\u62e5\u6709\u7684\u4fe1\u606f\u3002\u5f53\u4ee3\u7406\u52a0\u5165\u65f6\uff0c\u5b83\u4f1a\u5728\u4ee3\u7406\u8282\u70b9\u6ce8\u518c\u8868\u76ee\u5f55\u4e0b\u6ce8\u518c\u81ea\u5df1\uff0c\u5e76\u5199\u5165\u6709\u5173\u5176\u4e3b\u673a\u540d\u548c\u7aef\u53e3\u7684\u4fe1\u606f\u3002\u4ee3\u7406\u8fd8\u5728\u4ee3\u7406\u4e3b\u9898\u6ce8\u518c\u8868\u4e2d\u6ce8\u518c\u73b0\u6709\u4e3b\u9898\u53ca\u5176\u903b\u8f91\u5206\u533a\u7684\u5217\u8868\u3002\u65b0\u4e3b\u9898\u5728\u4ee3\u7406\u4e0a\u521b\u5efa\u65f6\u4f1a\u52a8\u6001\u6ce8\u518c\u3002","title":"5. \u5b9e\u65bd"},{"location":"5/#5","text":"","title":"5. \u5b9e\u65bd"},{"location":"5/#51","text":"\u7f51\u7edc\u5c42\u662f\u4e00\u4e2a\u76f8\u5f53\u7b80\u5355\u7684NIO\u670d\u52a1\u5668\uff0c\u4e0d\u4f1a\u8be6\u7ec6\u63cf\u8ff0\u3002sendfile \u7684\u5b9e\u73b0\u662f\u901a\u8fc7\u4e3a TransferableRecords \u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a writeTo \u65b9\u6cd5\u6765\u5b8c\u6210\u7684\u3002\u8fd9\u5141\u8bb8\u6587\u4ef6\u652f\u6301\u7684\u6d88\u606f\u96c6\u4f7f\u7528\u66f4\u6709\u6548\u7684 transferTo \u5b9e\u73b0\u800c\u4e0d\u662f\u8fdb\u7a0b\u5185\u7f13\u51b2\u5199\u5165\u3002\u7ebf\u7a0b\u6a21\u578b\u662f\u5355\u4e2a\u63a5\u53d7\u5668\u7ebf\u7a0b\u548c N \u4e2a \u5904\u7406\u5668\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u5904\u7406\u56fa\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\u3002\u8be5\u8bbe\u8ba1\u5df2 \u5728\u5176\u4ed6\u5730\u65b9 \u8fdb\u884c\u4e86\u76f8\u5f53\u5f7b\u5e95\u7684\u6d4b\u8bd5\uff0c\u53d1\u73b0\u5b9e\u65bd\u7b80\u5355\u4e14\u901f\u5ea6\u5feb\u3002\u8be5\u534f\u8bae\u4fdd\u6301\u975e\u5e38\u7b80\u5355\uff0c\u4ee5\u5141\u8bb8\u5c06\u6765\u4ee5\u5176\u4ed6\u8bed\u8a00\u5b9e\u73b0\u5ba2\u6237\u7aef\u3002","title":"5.1 \u7f51\u7edc\u5c42"},{"location":"5/#52","text":"\u6d88\u606f\u7531\u53ef\u53d8\u957f\u5ea6\u6807\u5934\u3001\u53ef\u53d8\u957f\u5ea6\u4e0d\u900f\u660e\u5bc6\u94a5\u5b57\u8282\u6570\u7ec4\u548c\u53ef\u53d8\u957f\u5ea6\u4e0d\u900f\u660e\u503c\u5b57\u8282\u6570\u7ec4\u7ec4\u6210\u3002\u6807\u5934\u7684\u683c\u5f0f\u5c06\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\u63cf\u8ff0\u3002\u8ba9\u952e\u548c\u503c\u4e0d\u900f\u660e\u662f\u6b63\u786e\u7684\u51b3\u5b9a\uff1a\u76ee\u524d\u5e8f\u5217\u5316\u5e93\u6b63\u5728\u53d6\u5f97\u5f88\u5927\u8fdb\u5c55\uff0c\u4efb\u4f55\u7279\u5b9a\u7684\u9009\u62e9\u90fd\u4e0d\u53ef\u80fd\u9002\u5408\u6240\u6709\u7528\u9014\u3002\u4e0d\u7528\u8bf4\uff0c\u4f7f\u7528 Kafka \u7684\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5f3a\u5236\u4f7f\u7528\u7279\u5b9a\u7684\u5e8f\u5217\u5316\u7c7b\u578b\u4f5c\u4e3a\u5176\u4f7f\u7528\u7684\u4e00\u90e8\u5206\u3002\u8be5 RecordBatch \u63a5\u53e3\u53ea\u662f\u4e00\u4e2a\u6d88\u606f\u8fed\u4ee3\u5668\uff0c\u5177\u6709\u7528\u4e8e\u6279\u91cf\u8bfb\u53d6\u548c\u5199\u5165 NIO \u7684\u4e13\u7528\u65b9\u6cd5 Channel \u3002","title":"5.2 \u6d88\u606f"},{"location":"5/#53","text":"\u6d88\u606f\uff08\u53c8\u540d\u8bb0\u5f55\uff09\u59cb\u7ec8\u662f\u6279\u91cf\u5199\u5165\u7684\u3002\u4e00\u6279\u6d88\u606f\u7684\u6280\u672f\u672f\u8bed\u662f\u8bb0\u5f55\u6279\u6b21\uff0c\u8bb0\u5f55\u6279\u6b21\u5305\u542b\u4e00\u6761\u6216\u591a\u6761\u8bb0\u5f55\u3002\u5728\u9000\u5316\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u5305\u542b\u5355\u4e2a\u8bb0\u5f55\u7684\u8bb0\u5f55\u6279\u6b21\u3002\u8bb0\u5f55\u6279\u6b21\u548c\u8bb0\u5f55\u6709\u81ea\u5df1\u7684\u6807\u9898\u3002\u6bcf\u4e2a\u7684\u683c\u5f0f\u5982\u4e0b\u6240\u8ff0\u3002","title":"5.3 \u6d88\u606f\u683c\u5f0f"},{"location":"5/#531","text":"\u4ee5\u4e0b\u662f RecordBatch \u7684\u78c1\u76d8\u683c\u5f0f\u3002 baseOffset: int64 batchLength: int32 partitionLeaderEpoch: int32 magic: int8 (current magic value is 2) crc: int32 attributes: int16 bit 0~2: 0: no compression 1: gzip 2: snappy 3: lz4 4: zstd bit 3: timestampType bit 4: isTransactional (0 means not transactional) bit 5: isControlBatch (0 means not a control batch) bit 6: hasDeleteHorizonMs (0 means baseTimestamp is not set as the delete horizon for compaction) bit 7~15: unused lastOffsetDelta: int32 baseTimestamp: int64 maxTimestamp: int64 producerId: int64 producerEpoch: int16 baseSequence: int32 records: [Record] \u8bf7\u6ce8\u610f\uff0c\u542f\u7528\u538b\u7f29\u540e\uff0c\u538b\u7f29\u7684\u8bb0\u5f55\u6570\u636e\u5c06\u76f4\u63a5\u6309\u7167\u8bb0\u5f55\u6570\u8ba1\u6570\u8fdb\u884c\u5e8f\u5217\u5316\u3002 CRC \u6db5\u76d6\u4ece\u5c5e\u6027\u5230\u6279\u6b21\u7ed3\u675f\u7684\u6570\u636e\uff08\u5373CRC \u540e\u9762\u7684\u6240\u6709\u5b57\u8282\uff09\u3002\u5b83\u4f4d\u4e8e\u9b54\u672f\u5b57\u8282\u4e4b\u540e\uff0c\u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u5fc5\u987b\u5148\u89e3\u6790\u9b54\u672f\u5b57\u8282\uff0c\u7136\u540e\u624d\u80fd\u51b3\u5b9a\u5982\u4f55\u89e3\u91ca\u6279\u91cf\u957f\u5ea6\u548c\u9b54\u672f\u5b57\u8282\u4e4b\u95f4\u7684\u5b57\u8282\u3002\u5206\u533a\u9886\u5bfc\u7eaa\u5143\u5b57\u6bb5\u4e0d\u5305\u542b\u5728 CRC \u8ba1\u7b97\u4e2d\uff0c\u4ee5\u907f\u514d\u5728\u4e3a\u4ee3\u7406\u63a5\u6536\u7684\u6bcf\u4e2a\u6279\u6b21\u5206\u914d\u8be5\u5b57\u6bb5\u65f6\u9700\u8981\u91cd\u65b0\u8ba1\u7b97 CRC\u3002CRC-32C (Castagnoli) \u591a\u9879\u5f0f\u7528\u4e8e\u8ba1\u7b97\u3002 \u5173\u4e8e\u538b\u7f29\uff1a\u4e0e\u65e7\u7684\u6d88\u606f\u683c\u5f0f\u4e0d\u540c\uff0cmagic v2 \u53ca\u66f4\u9ad8\u7248\u672c\u5728\u6e05\u7406\u65e5\u5fd7\u65f6\u4fdd\u7559\u539f\u59cb\u6279\u6b21\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u504f\u79fb\u91cf/\u5e8f\u5217\u53f7\u3002\u8fd9\u662f\u4e3a\u4e86\u80fd\u591f\u5728\u91cd\u65b0\u52a0\u8f7d\u65e5\u5fd7\u65f6\u6062\u590d\u751f\u4ea7\u8005\u7684\u72b6\u6001\u6240\u5fc5\u9700\u7684\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6ca1\u6709\u4fdd\u7559\u6700\u540e\u4e00\u4e2a\u5e8f\u5217\u53f7\uff0c\u90a3\u4e48\u5728\u5206\u533a\u9886\u5bfc\u8005\u5931\u8d25\u540e\uff0c\u751f\u4ea7\u8005\u53ef\u80fd\u4f1a\u770b\u5230 OutOfSequence \u9519\u8bef\u3002\u5fc5\u987b\u4fdd\u7559\u57fa\u672c\u5e8f\u5217\u53f7\u4ee5\u8fdb\u884c\u91cd\u590d\u68c0\u67e5\uff08\u4ee3\u7406\u901a\u8fc7\u9a8c\u8bc1\u4f20\u5165\u6279\u6b21\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5e8f\u5217\u53f7\u662f\u5426\u4e0e\u8be5\u751f\u4ea7\u8005\u7684\u6700\u540e\u4e00\u4e2a\u5e8f\u5217\u53f7\u5339\u914d\u6765\u68c0\u67e5\u4f20\u5165\u7684 Produce \u8bf7\u6c42\u662f\u5426\u6709\u91cd\u590d\uff09\u3002\u56e0\u6b64\uff0c\u5f53\u6279\u6b21\u4e2d\u7684\u6240\u6709\u8bb0\u5f55\u90fd\u88ab\u6e05\u9664\u4f46\u4ecd\u4fdd\u7559\u6279\u6b21\u4ee5\u4fdd\u7559\u751f\u4ea7\u8005\u7684\u6700\u540e\u5e8f\u5217\u53f7\u65f6\uff0c\u65e5\u5fd7\u4e2d\u53ef\u80fd\u4f1a\u6709\u7a7a\u6279\u6b21\u3002 \u5982\u679c\u8bb0\u5f55\u6279\u6b21\u5305\u542b\u5177\u6709\u7a7a\u8d1f\u8f7d\u6216\u4e2d\u6b62\u4e8b\u52a1\u6807\u8bb0\u7684\u8bb0\u5f55\uff0c\u5219\u538b\u7f29\u8fd8\u53ef\u80fd\u4f1a\u4fee\u6539baseTimestamp\u3002baseTimestamp \u5c06\u8bbe\u7f6e\u4e3a\u5e94\u5220\u9664\u8fd9\u4e9b\u8bb0\u5f55\u7684\u65f6\u95f4\u6233\uff0c\u5e76\u8bbe\u7f6e\u5220\u9664\u8303\u56f4\u5c5e\u6027\u4f4d\u3002","title":"5.3.1 \u8bb0\u5f55\u6279\u6b21"},{"location":"5/#5311","text":"\u63a7\u5236\u6279\u6b21\u5305\u542b\u79f0\u4e3a\u63a7\u5236\u8bb0\u5f55\u7684\u5355\u4e2a\u8bb0\u5f55\u3002\u63a7\u5236\u8bb0\u5f55\u4e0d\u5e94\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002\u76f8\u53cd\uff0c\u6d88\u8d39\u8005\u4f7f\u7528\u5b83\u4eec\u6765\u8fc7\u6ee4\u6389\u4e2d\u6b62\u7684\u4e8b\u52a1\u6d88\u606f\u3002 \u63a7\u5236\u8bb0\u5f55\u7684\u952e\u7b26\u5408\u4ee5\u4e0b\u6a21\u5f0f\uff1a version: int16 (current version is 0) type: int16 (0 indicates an abort marker, 1 indicates a commit) \u63a7\u5236\u8bb0\u5f55\u503c\u7684\u67b6\u6784\u53d6\u51b3\u4e8e\u7c7b\u578b\u3002\u8be5\u503c\u5bf9\u5ba2\u6237\u6765\u8bf4\u662f\u4e0d\u900f\u660e\u7684\u3002","title":"5.3.1.1 \u63a7\u5236\u6279\u6b21"},{"location":"5/#532","text":"\u8bb0\u5f55\u7ea7\u6807\u5934\u662f\u5728 Kafka 0.11.0 \u4e2d\u5f15\u5165\u7684\u3002\u5e26\u6709\u6807\u5934\u7684\u8bb0\u5f55\u7684\u78c1\u76d8\u683c\u5f0f\u5982\u4e0b\u6240\u793a\u3002 length: varint attributes: int8 bit 0~7: unused timestampDelta: varlong offsetDelta: varint keyLength: varint key: byte[] valueLen: varint value: byte[] Headers => [Header]","title":"5.3.2 \u8bb0\u5f55"},{"location":"5/#5321","text":"headerKeyLength: varint headerKey: String headerValueLength: varint Value: byte[] \u6211\u4eec\u4f7f\u7528\u4e0e Protobuf \u76f8\u540c\u7684 varint \u7f16\u7801\u3002 \u6709\u5173\u540e\u8005\u7684\u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728\u8fd9\u91cc \u627e\u5230\u3002\u8bb0\u5f55\u4e2d\u7684\u6807\u5934\u8ba1\u6570\u4e5f\u88ab\u7f16\u7801\u4e3a varint\u3002","title":"5.3.2.1 \u8bb0\u5f55\u5934"},{"location":"5/#533","text":"\u5728Kafka 0.11\u4e4b\u524d\uff0c\u6d88\u606f\u88ab\u4f20\u8f93\u5e76\u5b58\u50a8\u5728 \u6d88\u606f\u96c6\u4e2d \u3002\u5728\u6d88\u606f\u96c6\u4e2d\uff0c\u6bcf\u6761\u6d88\u606f\u90fd\u6709\u81ea\u5df1\u7684\u5143\u6570\u636e\u3002\u8bf7\u6ce8\u610f\uff0c\u867d\u7136\u6d88\u606f\u96c6\u8868\u793a\u4e3a\u6570\u7ec4\uff0c\u4f46\u5b83\u4eec\u4e0d\u50cf\u534f\u8bae\u4e2d\u7684\u5176\u4ed6\u6570\u7ec4\u5143\u7d20\u90a3\u6837\u524d\u9762\u6709 int32 \u6570\u7ec4\u5927\u5c0f\u3002 \u6d88\u606f\u96c6\uff1a MessageSet (Version: 0) => [offset message_size message] offset => INT64 message_size => INT32 message => crc magic_byte attributes key value crc => INT32 magic_byte => INT8 attributes => INT8 bit 0~2: 0: no compression 1: gzip 2: snappy bit 3~7: unused key => BYTES value => BYTES MessageSet (Version: 1) => [offset message_size message] offset => INT64 message_size => INT32 message => crc magic_byte attributes timestamp key value crc => INT32 magic_byte => INT8 attributes => INT8 bit 0~2: 0: no compression 1: gzip 2: snappy 3: lz4 bit 3: timestampType 0: create time 1: log append time bit 4~7: unused timestamp => INT64 key => BYTES value => BYTES \u5728 Kafka 0.10 \u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0c\u552f\u4e00\u652f\u6301\u7684\u6d88\u606f\u683c\u5f0f\u7248\u672c\uff08\u5728\u5e7b\u503c\u4e2d\u6307\u793a\uff09\u662f 0\u3002\u6d88\u606f\u683c\u5f0f\u7248\u672c 1 \u5728 0.10 \u7248\u672c\u4e2d\u5f15\u5165\u4e86\u65f6\u95f4\u6233\u652f\u6301\u3002 \u4e0e\u4e0a\u9762\u7684\u7248\u672c 2 \u7c7b\u4f3c\uff0c\u5c5e\u6027\u7684\u6700\u4f4e\u4f4d\u8868\u793a\u538b\u7f29\u7c7b\u578b\u3002 \u5728\u7248\u672c 1 \u4e2d\uff0c\u751f\u4ea7\u8005\u5e94\u59cb\u7ec8\u5c06\u65f6\u95f4\u6233\u7c7b\u578b\u4f4d\u8bbe\u7f6e\u4e3a 0\u3002\u5982\u679c\u4e3b\u9898\u914d\u7f6e\u4e3a\u4f7f\u7528\u65e5\u5fd7\u9644\u52a0\u65f6\u95f4\uff08\u901a\u8fc7\u4ee3\u7406\u7ea7\u522b\u914d\u7f6e log.message.timestamp.type = LogAppendTime \u6216\u4e3b\u9898\u7ea7\u522b\u914d\u7f6e message.timestamp.type = LogAppendTime \uff09\uff0cbroker \u5c06\u8986\u76d6\u65f6\u95f4\u6233\u7c7b\u578b\u548c\u6d88\u606f\u96c6\u4e2d\u7684\u65f6\u95f4\u6233\u3002 \u5c5e\u6027\u7684\u6700\u9ad8\u4f4d\u5fc5\u987b\u8bbe\u7f6e\u4e3a 0\u3002 \u5728\u6d88\u606f\u683c\u5f0f\u7248\u672c 0 \u548c 1 \u4e2d\uff0cKafka \u652f\u6301\u9012\u5f52\u6d88\u606f\u4ee5\u542f\u7528\u538b\u7f29\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5fc5\u987b\u5c06\u6d88\u606f\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u6307\u793a\u5176\u4e2d\u4e00\u79cd\u538b\u7f29\u7c7b\u578b\uff0c\u5e76\u4e14\u503c\u5b57\u6bb5\u5c06\u5305\u542b\u4f7f\u7528\u8be5\u7c7b\u578b\u538b\u7f29\u7684\u6d88\u606f\u96c6\u3002\u6211\u4eec\u7ecf\u5e38\u5c06\u5d4c\u5957\u6d88\u606f\u79f0\u4e3a inner messages \u5185\u90e8\u6d88\u606f\uff0c\u5c06\u5305\u88c5\u6d88\u606f\u79f0\u4e3a outer message \u5916\u90e8\u6d88\u606f\u3002\u8bf7\u6ce8\u610f\uff0c\u5916\u90e8\u6d88\u606f\u7684\u952e\u5e94\u8be5\u4e3a\u7a7a\uff0c\u5e76\u4e14\u5176\u504f\u79fb\u91cf\u5c06\u662f\u6700\u540e\u4e00\u4e2a\u5185\u90e8\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002 \u5f53\u63a5\u6536\u5230\u9012\u5f52\u7248\u672c 0 \u6d88\u606f\u65f6\uff0c\u4ee3\u7406\u4f1a\u89e3\u538b\u7f29\u5b83\u4eec\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5185\u90e8\u6d88\u606f\u5355\u72ec\u5206\u914d\u4e00\u4e2a\u504f\u79fb\u91cf\u3002\u5728\u7248\u672c 1 \u4e2d\uff0c\u4e3a\u4e86\u907f\u514d\u670d\u52a1\u5668\u7aef\u91cd\u65b0\u538b\u7f29\uff0c\u53ea\u4f1a\u4e3a\u5305\u88c5\u5668\u6d88\u606f\u5206\u914d\u504f\u79fb\u91cf\u3002\u5185\u90e8\u6d88\u606f\u5c06\u5177\u6709\u76f8\u5bf9\u504f\u79fb\u3002\u7edd\u5bf9\u504f\u79fb\u91cf\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u6d88\u606f\u7684\u504f\u79fb\u91cf\u6765\u8ba1\u7b97\uff0c\u8be5\u504f\u79fb\u91cf\u5bf9\u5e94\u4e8e\u5206\u914d\u7ed9\u6700\u540e\u4e00\u4e2a\u5185\u90e8\u6d88\u606f\u7684\u504f\u79fb\u91cf\u3002 crc \u5b57\u6bb5\u5305\u542b\u540e\u7eed\u6d88\u606f\u5b57\u8282\uff08\u5373\u4ece\u5e7b\u5b57\u8282\u5230\u503c\uff09\u7684 CRC32\uff08\u800c\u975e CRC-32C\uff09\u3002","title":"5.3.3 \u65e7\u6d88\u606f\u683c\u5f0f"},{"location":"5/#54","text":"\u5177\u6709\u4e24\u4e2a\u5206\u533a\u7684\u540d\u4e3a\u201cmy-topic\u201d\u7684\u4e3b\u9898\u7684\u65e5\u5fd7\u7531\u4e24\u4e2a\u76ee\u5f55\uff08\u5373 my-topic-0 \u548c my-topic-1 \uff09\u7ec4\u6210\uff0c\u5176\u4e2d\u586b\u5145\u4e86\u5305\u542b\u8be5\u4e3b\u9898\u6d88\u606f\u7684\u6570\u636e\u6587\u4ef6\u3002\u65e5\u5fd7\u6587\u4ef6\u7684\u683c\u5f0f\u662f\u4e00\u7cfb\u5217\u201c\u65e5\u5fd7\u6761\u76ee\u201d\uff1b\u6bcf\u4e2a\u65e5\u5fd7\u6761\u76ee\u90fd\u662f\u4e00\u4e2a 4 \u5b57\u8282\u6574\u6570 N\uff0c \u5b58\u50a8\u6d88\u606f\u957f\u5ea6\uff0c\u540e\u8ddf N \u4e2a\u6d88\u606f\u5b57\u8282\u3002 \u6bcf\u6761\u6d88\u606f\u7531 64 \u4f4d\u6574\u6570\u504f\u79fb\u91cf \u552f\u4e00\u6807\u8bc6\u7ed9\u51fa\u8be5\u6d88\u606f\u5728\u66fe\u7ecf\u53d1\u9001\u5230\u8be5\u5206\u533a\u4e0a\u8be5\u4e3b\u9898\u7684\u6240\u6709\u6d88\u606f\u6d41\u4e2d\u5f00\u59cb\u7684\u5b57\u8282\u4f4d\u7f6e\u3002\u4e0b\u9762\u7ed9\u51fa\u4e86\u6bcf\u6761\u6d88\u606f\u7684\u78c1\u76d8\u683c\u5f0f\u3002\u6bcf\u4e2a\u65e5\u5fd7\u6587\u4ef6\u90fd\u4ee5\u5176\u5305\u542b\u7684\u7b2c\u4e00\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\u547d\u540d\u3002\u56e0\u6b64\uff0c\u521b\u5efa\u7684\u7b2c\u4e00\u4e2a\u6587\u4ef6\u5c06\u662f 00000000000000000000.log\uff0c\u6bcf\u4e2a\u9644\u52a0\u6587\u4ef6\u5c06\u6709\u4e00\u4e2a\u4e0e\u524d\u4e00\u4e2a\u6587\u4ef6\u5927\u7ea6 S \u5b57\u8282\u7684\u6574\u6570\u540d\u79f0\uff0c\u5176\u4e2d S \u662f\u914d\u7f6e\u4e2d\u7ed9\u5b9a\u7684\u6700\u5927\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u3002 \u8bb0\u5f55\u7684\u786e\u5207\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f5c\u4e3a\u6807\u51c6\u63a5\u53e3\u8fdb\u884c\u7248\u672c\u63a7\u5236\u548c\u7ef4\u62a4\uff0c\u56e0\u6b64\u8bb0\u5f55\u6279\u6b21\u53ef\u4ee5\u5728\u751f\u4ea7\u8005\u3001\u4ee3\u7406\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u4f20\u8f93\uff0c\u800c\u65e0\u9700\u5728\u9700\u8981\u65f6\u91cd\u65b0\u590d\u5236\u6216\u8f6c\u6362\u3002\u4e0a\u4e00\u8282\u5305\u542b\u6709\u5173\u8bb0\u5f55\u7684\u78c1\u76d8\u683c\u5f0f\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u4f7f\u7528\u6d88\u606f\u504f\u79fb\u91cf\u4f5c\u4e3a\u6d88\u606f ID \u7684\u60c5\u51b5\u5e76\u4e0d\u5e38\u89c1\u3002\u6211\u4eec\u6700\u521d\u7684\u60f3\u6cd5\u662f\u4f7f\u7528\u751f\u4ea7\u8005\u751f\u6210\u7684 GUID\uff0c\u5e76\u5728\u6bcf\u4e2a\u4ee3\u7406\u4e0a\u7ef4\u62a4\u4ece GUID \u5230\u504f\u79fb\u91cf\u7684\u6620\u5c04\u3002\u4f46\u7531\u4e8e\u6d88\u8d39\u8005\u5fc5\u987b\u4e3a\u6bcf\u53f0\u670d\u52a1\u5668\u7ef4\u62a4\u4e00\u4e2a ID\uff0c\u56e0\u6b64 GUID \u7684\u5168\u5c40\u552f\u4e00\u6027\u6ca1\u6709\u4efb\u4f55\u4ef7\u503c\u3002\u6b64\u5916\uff0c\u7ef4\u62a4\u4ece\u968f\u673a ID \u5230\u504f\u79fb\u91cf\u7684\u6620\u5c04\u7684\u590d\u6742\u6027\u9700\u8981\u4e00\u4e2a\u5fc5\u987b\u4e0e\u78c1\u76d8\u540c\u6b65\u7684\u91cd\u91cf\u7ea7\u7d22\u5f15\u7ed3\u6784\uff0c\u672c\u8d28\u4e0a\u9700\u8981\u4e00\u4e2a\u5b8c\u5168\u6301\u4e45\u7684\u968f\u673a\u8bbf\u95ee\u6570\u636e\u7ed3\u6784\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u7b80\u5316\u67e5\u627e\u200b\u200b\u7ed3\u6784\uff0c\u6211\u4eec\u51b3\u5b9a\u4f7f\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6bcf\u5206\u533a\u539f\u5b50\u8ba1\u6570\u5668\uff0c\u5b83\u53ef\u4ee5\u4e0e\u5206\u533a id \u548c\u8282\u70b9 id \u7ed3\u5408\u8d77\u6765\u552f\u4e00\u5730\u6807\u8bc6\u4e00\u6761\u6d88\u606f\uff1b\u8fd9\u4f7f\u5f97\u67e5\u627e\u7ed3\u6784\u66f4\u7b80\u5355\uff0c\u5c3d\u7ba1\u6bcf\u4e2a\u6d88\u8d39\u8005\u8bf7\u6c42\u4ecd\u53ef\u80fd\u8fdb\u884c\u591a\u6b21\u67e5\u627e\u3002\u7136\u800c\uff0c\u4e00\u65e6\u6211\u4eec\u9009\u5b9a\u4e86\u67dc\u53f0\uff0c\u76f4\u63a5\u4f7f\u7528\u504f\u79fb\u91cf\u7684\u8df3\u8f6c\u4f3c\u4e4e\u5f88\u81ea\u7136\u2014\u2014\u6bd5\u7adf\u4e24\u8005\u90fd\u662f\u5206\u533a\u7279\u6709\u7684\u5355\u8c03\u9012\u589e\u6574\u6570\u3002\u7531\u4e8e\u504f\u79fb\u91cf\u5bf9\u6d88\u8d39\u8005 API \u662f\u9690\u85cf\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u51b3\u5b9a\u6700\u7ec8\u662f\u4e00\u4e2a\u5b9e\u73b0\u7ec6\u8282\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u66f4\u6709\u6548\u7684\u65b9\u6cd5\u3002","title":"5.4 \u65e5\u5fd7"},{"location":"5/#_1","text":"\u65e5\u5fd7\u5141\u8bb8\u4e32\u884c\u8ffd\u52a0\uff0c\u59cb\u7ec8\u8f6c\u5230\u6700\u540e\u4e00\u4e2a\u6587\u4ef6\u3002\u5f53\u8be5\u6587\u4ef6\u8fbe\u5230\u53ef\u914d\u7f6e\u5927\u5c0f\uff08\u4f8b\u5982 1GB\uff09\u65f6\uff0c\u5b83\u4f1a\u8f6c\u5b58\u4e3a\u65b0\u6587\u4ef6\u3002\u65e5\u5fd7\u91c7\u7528\u4e24\u4e2a\u914d\u7f6e\u53c2\u6570\uff1a M \uff0c\u5b83\u7ed9\u51fa\u5728\u5f3a\u5236\u64cd\u4f5c\u7cfb\u7edf\u5c06\u6587\u4ef6\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u8981\u5199\u5165\u7684\u6d88\u606f\u6570\uff1b\u4ee5\u53ca S \uff0c\u5b83\u7ed9\u51fa\u5f3a\u5236\u5237\u65b0\u4e4b\u524d\u7684\u79d2\u6570\u3002\u8fd9\u63d0\u4f9b\u4e86\u5728\u7cfb\u7edf\u5d29\u6e83\u65f6 \u6700\u591a\u4e22\u5931 M \u6761\u6d88\u606f\u6216 S\u79d2\u6570\u636e\u7684\u6301\u4e45\u6027\u4fdd\u8bc1\u3002","title":"\u5199"},{"location":"5/#_2","text":"\u8bfb\u53d6\u662f\u901a\u8fc7\u7ed9\u51fa\u6d88\u606f\u7684 64 \u4f4d\u903b\u8f91\u504f\u79fb\u91cf\u548c S \u5b57\u8282\u6700\u5927\u5757\u5927\u5c0f\u6765\u5b8c\u6210\u7684\u3002 \u8fd9\u5c06\u8fd4\u56deS \u5b57\u8282\u7f13\u51b2\u533a\u4e2d\u5305\u542b\u7684\u6d88\u606f\u7684\u8fed\u4ee3\u5668\u3002 S \u65e8\u5728\u5927\u4e8e\u4efb\u4f55\u5355\u4e2a\u6d88\u606f\uff0c\u4f46\u5982\u679c\u6d88\u606f\u5f02\u5e38\u5927\uff0c\u5219\u53ef\u4ee5\u91cd\u8bd5\u591a\u6b21\u8bfb\u53d6\uff0c\u6bcf\u6b21\u5c06\u7f13\u51b2\u533a\u5927\u5c0f\u52a0\u500d\uff0c\u76f4\u5230\u6210\u529f\u8bfb\u53d6\u6d88\u606f\u3002\u53ef\u4ee5\u6307\u5b9a\u6700\u5927\u6d88\u606f\u548c\u7f13\u51b2\u533a\u5927\u5c0f\uff0c\u4ee5\u4f7f\u670d\u52a1\u5668\u62d2\u7edd\u5927\u4e8e\u67d0\u4e2a\u5927\u5c0f\u7684\u6d88\u606f\uff0c\u5e76\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u83b7\u53d6\u5b8c\u6574\u6d88\u606f\u6240\u9700\u8bfb\u53d6\u7684\u6700\u5927\u503c\u7684\u9650\u5236\u3002\u8bfb\u53d6\u7f13\u51b2\u533a\u5f88\u53ef\u80fd\u4ee5\u90e8\u5206\u6d88\u606f\u7ed3\u675f\uff0c\u8fd9\u5f88\u5bb9\u6613\u901a\u8fc7\u5927\u5c0f\u5206\u9694\u6765\u68c0\u6d4b\u5230\u3002 \u4ece\u504f\u79fb\u91cf\u8bfb\u53d6\u7684\u5b9e\u9645\u8fc7\u7a0b\u9700\u8981\u9996\u5148\u627e\u5230\u5b58\u50a8\u6570\u636e\u7684\u65e5\u5fd7\u6bb5\u6587\u4ef6\uff0c\u6839\u636e\u5168\u5c40\u504f\u79fb\u503c\u8ba1\u7b97\u6587\u4ef6\u7279\u5b9a\u7684\u504f\u79fb\u91cf\uff0c\u7136\u540e\u4ece\u8be5\u6587\u4ef6\u504f\u79fb\u91cf\u8bfb\u53d6\u3002\u641c\u7d22\u662f\u4f5c\u4e3a\u9488\u5bf9\u6bcf\u4e2a\u6587\u4ef6\u7ef4\u62a4\u7684\u5185\u5b58\u8303\u56f4\u7684\u7b80\u5355\u4e8c\u5206\u641c\u7d22\u53d8\u4f53\u6765\u5b8c\u6210\u7684\u3002 \u8be5\u65e5\u5fd7\u63d0\u4f9b\u4e86\u83b7\u53d6\u6700\u8fd1\u5199\u5165\u7684\u6d88\u606f\u7684\u529f\u80fd\uff0c\u4ee5\u5141\u8bb8\u5ba2\u6237\u7aef\u201c\u7acb\u5373\u201d\u5f00\u59cb\u8ba2\u9605\u3002\u5982\u679c\u6d88\u8d39\u8005\u672a\u80fd\u5728 SLA \u6307\u5b9a\u7684\u5929\u6570\u5185\u4f7f\u7528\u5176\u6570\u636e\uff0c\u8fd9\u4e5f\u5f88\u6709\u7528\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53\u5ba2\u6237\u7aef\u5c1d\u8bd5\u4f7f\u7528\u4e0d\u5b58\u5728\u7684\u504f\u79fb\u91cf\u65f6\uff0c\u5b83\u4f1a\u6536\u5230 OutOfRangeException \u5f02\u5e38\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u6839\u636e\u7528\u4f8b\u81ea\u884c\u91cd\u7f6e\u6216\u5931\u8d25\u3002 \u4ee5\u4e0b\u662f\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u7684\u7ed3\u679c\u7684\u683c\u5f0f\u3002 MessageSetSend (fetch result) total length : 4 bytes error code : 2 bytes message 1 : x bytes ... message n : x bytes MultiMessageSetSend (multiFetch result) total length : 4 bytes error code : 2 bytes messageSetSend 1 ... messageSetSend n","title":"\u8bfb"},{"location":"5/#_3","text":"\u4e00\u6b21\u5220\u9664\u4e00\u4e2a\u65e5\u5fd7\u6bb5\u7684\u6570\u636e\u3002\u65e5\u5fd7\u7ba1\u7406\u5668\u5e94\u7528\u4e24\u4e2a\u6307\u6807\u6765\u8bc6\u522b\u9002\u5408\u5220\u9664\u7684\u6bb5\uff1a\u65f6\u95f4\u548c\u5927\u5c0f\u3002\u5bf9\u4e8e\u57fa\u4e8e\u65f6\u95f4\u7684\u7b56\u7565\uff0c\u4f1a\u8003\u8651\u8bb0\u5f55\u65f6\u95f4\u6233\uff0c\u5206\u6bb5\u6587\u4ef6\u4e2d\u6700\u5927\u7684\u65f6\u95f4\u6233\uff08\u8bb0\u5f55\u987a\u5e8f\u4e0d\u76f8\u5173\uff09\u5b9a\u4e49\u6574\u4e2a\u5206\u6bb5\u7684\u4fdd\u7559\u65f6\u95f4\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7981\u7528\u57fa\u4e8e\u5927\u5c0f\u7684\u4fdd\u7559\u3002\u542f\u7528\u540e\uff0c\u65e5\u5fd7\u7ba1\u7406\u5668\u5c06\u4e0d\u65ad\u5220\u9664\u6700\u65e7\u7684\u6bb5\u6587\u4ef6\uff0c\u76f4\u5230\u5206\u533a\u7684\u603b\u4f53\u5927\u5c0f\u518d\u6b21\u4f4d\u4e8e\u914d\u7f6e\u7684\u9650\u5236\u5185\u3002\u5982\u679c\u540c\u65f6\u542f\u7528\u8fd9\u4e24\u4e2a\u7b56\u7565\uff0c\u5219\u7531\u4e8e\u4efb\u4e00\u7b56\u7565\u800c\u7b26\u5408\u5220\u9664\u6761\u4ef6\u7684\u6bb5\u5c06\u88ab\u5220\u9664\u3002","title":"\u5220\u9664"},{"location":"5/#_4","text":"\u65e5\u5fd7\u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u53c2\u6570 M \uff0c\u5b83\u63a7\u5236\u5728\u5f3a\u5236\u5237\u65b0\u5230\u78c1\u76d8\u4e4b\u524d\u5199\u5165\u7684\u6700\u5927\u6d88\u606f\u6570\u3002\u542f\u52a8\u65f6\uff0c\u8fd0\u884c\u65e5\u5fd7\u6062\u590d\u8fdb\u7a0b\uff0c\u8fed\u4ee3\u6700\u65b0\u65e5\u5fd7\u6bb5\u4e2d\u7684\u6240\u6709\u6d88\u606f\u5e76\u9a8c\u8bc1\u6bcf\u4e2a\u6d88\u606f\u6761\u76ee\u662f\u5426\u6709\u6548\u3002\u5982\u679c\u6d88\u606f\u6761\u76ee\u7684\u5927\u5c0f\u548c\u504f\u79fb\u91cf\u4e4b\u548c\u5c0f\u4e8e\u6587\u4ef6\u7684\u957f\u5ea6\u5e76\u4e14\u6d88\u606f\u6709\u6548\u8d1f\u8f7d\u7684 CRC32 \u4e0e\u6d88\u606f\u4e2d\u5b58\u50a8\u7684 CRC \u5339\u914d\uff0c\u5219\u6d88\u606f\u6761\u76ee\u6709\u6548\u3002\u5982\u679c\u68c0\u6d4b\u5230\u635f\u574f\uff0c\u65e5\u5fd7\u5c06\u88ab\u622a\u65ad\u5230\u6700\u540e\u4e00\u4e2a\u6709\u6548\u504f\u79fb\u91cf\u3002 \u8bf7\u6ce8\u610f\uff0c\u5fc5\u987b\u5904\u7406\u4e24\u79cd\u7c7b\u578b\u7684\u635f\u574f\uff1a\u7531\u4e8e\u5d29\u6e83\u800c\u4e22\u5931\u672a\u5199\u5165\u5757\u7684\u622a\u65ad\uff0c\u4ee5\u53ca\u5c06\u65e0\u610f\u4e49\u5757\u6dfb\u52a0\u5230\u6587\u4ef6\u7684\u635f\u574f\u3002\u8fd9\u6837\u505a\u7684\u539f\u56e0\u662f\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u4fdd\u8bc1\u6587\u4ef6 inode \u548c\u5b9e\u9645\u5757\u6570\u636e\u4e4b\u95f4\u7684\u5199\u5165\u987a\u5e8f\uff0c\u56e0\u6b64\uff0c\u5982\u679c inode \u66f4\u65b0\u4e3a\u65b0\u5927\u5c0f\uff0c\u90a3\u4e48\u9664\u4e86\u4e22\u5931\u5199\u5165\u6570\u636e\u4e4b\u5916\uff0c\u6587\u4ef6\u8fd8\u53ef\u80fd\u83b7\u5f97\u65e0\u610f\u4e49\u7684\u6570\u636e\u3002\u5d29\u6e83\u53d1\u751f\u5728\u5199\u5165\u5305\u542b\u8be5\u6570\u636e\u7684\u5757\u4e4b\u524d\u3002CRC \u68c0\u6d4b\u5230\u8fd9\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5e76\u9632\u6b62\u5176\u635f\u574f\u65e5\u5fd7\uff08\u5c3d\u7ba1\u672a\u5199\u5165\u7684\u6d88\u606f\u5f53\u7136\u4f1a\u4e22\u5931\uff09\u3002","title":"\u4fdd\u8bc1"},{"location":"5/#55","text":"","title":"5.5 \u5206\u5e03"},{"location":"5/#_5","text":"Kafka \u6d88\u8d39\u8005\u8ddf\u8e2a\u5b83\u5728\u6bcf\u4e2a\u5206\u533a\u4e2d\u6d88\u8017\u7684\u6700\u5927\u504f\u79fb\u91cf\uff0c\u5e76\u4e14\u80fd\u591f\u63d0\u4ea4\u504f\u79fb\u91cf\uff0c\u4ee5\u4fbf\u5728\u91cd\u65b0\u542f\u52a8\u65f6\u53ef\u4ee5\u4ece\u8fd9\u4e9b\u504f\u79fb\u91cf\u6062\u590d\u3002Kafka \u63d0\u4f9b\u4e86\u5c06\u7ed9\u5b9a\u6d88\u8d39\u8005\u7ec4\u7684\u6240\u6709\u504f\u79fb\u91cf\u5b58\u50a8\u5728\u79f0\u4e3a\u7ec4\u534f\u8c03\u5668\u7684\u6307\u5b9a\u4ee3\u7406\uff08\u9488\u5bf9\u8be5\u7ec4\uff09\u4e2d\u7684\u9009\u9879\u3002\u5373\uff0c\u8be5\u6d88\u8d39\u8005\u7ec4\u4e2d\u7684\u4efb\u4f55\u6d88\u8d39\u8005\u5b9e\u4f8b\u90fd\u5e94\u8be5\u5c06\u5176\u504f\u79fb\u91cf\u63d0\u4ea4\u548c\u83b7\u53d6\u53d1\u9001\u5230\u8be5\u7ec4\u534f\u8c03\u5668\uff08\u4ee3\u7406\uff09\u3002\u6d88\u8d39\u8005\u7ec4\u6839\u636e\u7ec4\u540d\u5206\u914d\u7ed9\u534f\u8c03\u5458\u3002\u6d88\u8d39\u8005\u53ef\u4ee5\u901a\u8fc7\u5411\u4efb\u4f55 Kafka \u4ee3\u7406\u53d1\u51fa FindCoordinatorRequest \u5e76\u8bfb\u53d6\u5305\u542b\u534f\u8c03\u5668\u8be6\u7ec6\u4fe1\u606f\u7684 FindCoordinatorResponse \u6765\u67e5\u627e\u5176\u534f\u8c03\u5668\u3002\u7136\u540e\uff0c\u6d88\u8d39\u8005\u53ef\u4ee5\u7ee7\u7eed\u4ece\u534f\u8c03\u4ee3\u7406\u4e2d\u63d0\u4ea4\u6216\u83b7\u53d6\u504f\u79fb\u91cf\u3002\u5982\u679c\u534f\u8c03\u5668\u79fb\u52a8\uff0c\u6d88\u8d39\u8005\u5c06\u9700\u8981\u91cd\u65b0\u53d1\u73b0\u534f\u8c03\u5668\u3002\u504f\u79fb\u91cf\u63d0\u4ea4\u53ef\u4ee5\u7531\u6d88\u8d39\u8005\u5b9e\u4f8b\u81ea\u52a8\u6216\u624b\u52a8\u5b8c\u6210\u3002 \u5f53\u7ec4\u534f\u8c03\u5668\u6536\u5230 OffsetCommitRequest \u65f6\uff0c\u5b83\u4f1a\u5c06\u8bf7\u6c42\u9644\u52a0\u5230\u540d\u4e3a __consumer_offsets\u7684\u7279\u6b8a \u538b\u7f29 Kafka \u4e3b\u9898\u3002\u4ec5\u5f53\u504f\u79fb\u91cf\u4e3b\u9898\u7684\u6240\u6709\u526f\u672c\u90fd\u6536\u5230\u504f\u79fb\u91cf\u540e\uff0c\u4ee3\u7406\u624d\u4f1a\u5411\u6d88\u8d39\u8005\u53d1\u9001\u6210\u529f\u7684\u504f\u79fb\u91cf\u63d0\u4ea4\u54cd\u5e94\u3002\u5982\u679c\u504f\u79fb\u91cf\u672a\u80fd\u5728\u53ef\u914d\u7f6e\u7684\u8d85\u65f6\u5185\u590d\u5236\uff0c\u5219\u504f\u79fb\u91cf\u63d0\u4ea4\u5c06\u5931\u8d25\uff0c\u5e76\u4e14\u6d88\u8d39\u8005\u53ef\u4ee5\u5728\u9000\u51fa\u540e\u91cd\u8bd5\u63d0\u4ea4\u3002\u4ee3\u7406\u5b9a\u671f\u538b\u7f29\u504f\u79fb\u91cf\u4e3b\u9898\uff0c\u56e0\u4e3a\u5b83\u53ea\u9700\u8981\u7ef4\u62a4\u6bcf\u4e2a\u5206\u533a\u7684\u6700\u65b0\u504f\u79fb\u91cf\u63d0\u4ea4\u3002\u534f\u8c03\u5668\u8fd8\u5c06\u504f\u79fb\u91cf\u7f13\u5b58\u5728\u5185\u5b58\u8868\u4e2d\uff0c\u4ee5\u4fbf\u5feb\u901f\u63d0\u4f9b\u504f\u79fb\u91cf\u83b7\u53d6\u3002 \u5f53\u534f\u8c03\u5668\u6536\u5230\u504f\u79fb\u91cf\u83b7\u53d6\u8bf7\u6c42\u65f6\uff0c\u5b83\u53ea\u662f\u4ece\u504f\u79fb\u91cf\u7f13\u5b58\u4e2d\u8fd4\u56de\u6700\u540e\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u5411\u91cf\u3002\u5982\u679c\u534f\u8c03\u5668\u521a\u521a\u542f\u52a8\u6216\u8005\u5b83\u521a\u521a\u6210\u4e3a\u4e00\u7ec4\u65b0\u7684\u6d88\u8d39\u8005\u7ec4\u7684\u534f\u8c03\u5668\uff08\u901a\u8fc7\u6210\u4e3a\u504f\u79fb\u4e3b\u9898\u5206\u533a\u7684\u9886\u5bfc\u8005\uff09\uff0c\u5b83\u53ef\u80fd\u9700\u8981\u5c06\u504f\u79fb\u4e3b\u9898\u5206\u533a\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u504f\u79fb\u91cf\u83b7\u53d6\u5c06\u5931\u8d25\u5e76\u51fa\u73b0 CoordinatorLoadInProgressException\uff0c\u5e76\u4e14\u4f7f\u7528\u8005\u53ef\u4ee5\u5728\u9000\u51fa\u540e\u91cd\u8bd5 OffsetFetchRequest\u3002","title":"\u6d88\u8d39\u8005\u62b5\u6d88\u8ffd\u8e2a"},{"location":"5/#zookeeper","text":"\u4e0b\u9762\u7ed9\u51fa\u4e86\u7528\u4e8e\u534f\u8c03\u6d88\u8d39\u8005\u548c\u4ee3\u7406\u4e4b\u95f4\u7684 ZooKeeper \u7ed3\u6784\u548c\u7b97\u6cd5\u3002","title":"ZooKeeper \u76ee\u5f55"},{"location":"5/#_6","text":"\u5f53\u8def\u5f84\u4e2d\u7684\u5143\u7d20\u88ab\u8868\u793a\u4e3a \u65f6 [xyz] \uff0c\u8fd9\u610f\u5473\u7740 xyz \u7684\u503c\u4e0d\u56fa\u5b9a\uff0c\u5e76\u4e14\u5b9e\u9645\u4e0a xyz \u7684\u6bcf\u4e2a\u53ef\u80fd\u503c\u90fd\u6709\u4e00\u4e2a ZooKeeper znode\u3002\u4f8b\u5982\uff0c /topics/[topic] \u540d\u4e3a /topics \u7684\u76ee\u5f55\u5305\u542b\u6bcf\u4e2a\u4e3b\u9898\u540d\u79f0\u7684\u5b50\u76ee\u5f55\u3002\u8fd8\u7ed9\u51fa\u4e86\u6570\u5b57\u8303\u56f4\uff0c\u4f8b\u5982 [0...5] \u6307\u793a\u5b50\u76ee\u5f55 0\u30011\u30012\u30013\u30014\u3002\u7bad\u5934 -> \u7528\u4e8e\u6307\u793a znode \u7684\u5185\u5bb9\u3002\u4f8b\u5982 /hello -> world \uff0c\u5c06\u6307\u793a\u5305\u542b\u503c\u201cworld\u201d\u7684 znode /hello\u3002","title":"\u7b26\u53f7"},{"location":"5/#_7","text":"/brokers/ids/[0...N] --> {\"jmx_port\":...,\"timestamp\":...,\"endpoints\":[...],\"host\":...,\"version\":...,\"port\":...} (ephemeral node) \u8fd9\u662f\u6240\u6709\u73b0\u6709\u4ee3\u7406\u8282\u70b9\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u7684\u903b\u8f91\u4ee3\u7406 ID\uff0c\u7528\u4e8e\u5411\u6d88\u8d39\u8005\u6807\u8bc6\u5b83\uff08\u5fc5\u987b\u4f5c\u4e3a\u5176\u914d\u7f6e\u7684\u4e00\u90e8\u5206\u7ed9\u51fa\uff09\u3002\u542f\u52a8\u65f6\uff0c\u4ee3\u7406\u8282\u70b9\u901a\u8fc7\u5728 /brokers/ids \u4e0b\u521b\u5efa\u5177\u6709\u903b\u8f91\u4ee3\u7406 ID \u7684 znode \u6765\u6ce8\u518c\u81ea\u8eab\u3002\u903b\u8f91broker id\u7684\u76ee\u7684\u662f\u5141\u8bb8broker\u79fb\u52a8\u5230\u4e0d\u540c\u7684\u7269\u7406\u673a\u5668\u800c\u4e0d\u5f71\u54cd\u6d88\u8d39\u8005\u3002\u5c1d\u8bd5\u6ce8\u518c\u5df2\u5728\u4f7f\u7528\u7684\u4ee3\u7406 ID\uff08\u4f8b\u5982\uff0c\u56e0\u4e3a\u4e24\u4e2a\u670d\u52a1\u5668\u914d\u7f6e\u4e86\u76f8\u540c\u7684\u4ee3\u7406 ID\uff09\u4f1a\u5bfc\u81f4\u9519\u8bef\u3002 \u7531\u4e8e\u4ee3\u7406\u4f7f\u7528\u4e34\u65f6 znode \u5728 ZooKeeper \u4e2d\u6ce8\u518c\u81ea\u8eab\uff0c\u56e0\u6b64\u8fd9\u79cd\u6ce8\u518c\u662f\u52a8\u6001\u7684\uff0c\u5e76\u4e14\u5982\u679c\u4ee3\u7406\u5173\u95ed\u6216\u6b7b\u4ea1\uff08\u4ece\u800c\u901a\u77e5\u6d88\u8d39\u8005\u5b83\u4e0d\u518d\u53ef\u7528\uff09\uff0c\u8be5\u6ce8\u518c\u5c31\u4f1a\u6d88\u5931\u3002","title":"\u7ecf\u7eaa\u5546\u8282\u70b9\u6ce8\u518c\u8868"},{"location":"5/#_8","text":"/brokers/topics/[topic]/partitions/[0...N]/state --> {\"controller_epoch\":...,\"leader\":...,\"version\":...,\"leader_epoch\":...,\"isr\":[...]} (ephemeral node) \u6bcf\u4e2a\u4ee3\u7406\u90fd\u4f1a\u5728\u5176\u7ef4\u62a4\u7684\u4e3b\u9898\u4e0b\u6ce8\u518c\u81ea\u5df1\uff0c\u5e76\u5b58\u50a8\u8be5\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\u3002","title":"\u7ecf\u7eaa\u5546\u4e3b\u9898\u6ce8\u518c\u8868"},{"location":"5/#id","text":"\u96c6\u7fa4 ID \u662f\u5206\u914d\u7ed9 Kafka \u96c6\u7fa4\u7684\u552f\u4e00\u4e14\u4e0d\u53ef\u53d8\u7684\u6807\u8bc6\u7b26\u3002\u96c6\u7fa4 ID \u6700\u591a\u53ef\u4ee5\u6709 22 \u4e2a\u5b57\u7b26\uff0c\u5141\u8bb8\u7684\u5b57\u7b26\u7531\u6b63\u5219\u8868\u8fbe\u5f0f [a-zA-Z0-9_\\-]+ \u5b9a\u4e49\uff0c\u5b83\u5bf9\u5e94\u4e8e\u4e0d\u5e26\u586b\u5145\u7684 URL \u5b89\u5168 Base64 \u53d8\u4f53\u4f7f\u7528\u7684\u5b57\u7b26\u3002\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u5b83\u662f\u5728\u96c6\u7fa4\u7b2c\u4e00\u6b21\u542f\u52a8\u65f6\u81ea\u52a8\u751f\u6210\u7684\u3002 \u4ece\u5b9e\u73b0\u89d2\u5ea6\u6765\u770b\uff0c\u5b83\u662f\u5728 0.10.1 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u4ee3\u7406\u9996\u6b21\u6210\u529f\u542f\u52a8\u65f6\u751f\u6210\u7684\u3002\u4ee3\u7406 /cluster/id \u5728\u542f\u52a8\u671f\u95f4\u5c1d\u8bd5\u4ece znode \u83b7\u53d6\u96c6\u7fa4 ID\u3002\u5982\u679c znode \u4e0d\u5b58\u5728\uff0cbroker \u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4 id\uff0c\u5e76\u4f7f\u7528\u8be5\u96c6\u7fa4 id \u521b\u5efa znode\u3002","title":"\u96c6\u7fa4 ID"},{"location":"5/#_9","text":"\u4ee3\u7406\u8282\u70b9\u57fa\u672c\u4e0a\u662f\u72ec\u7acb\u7684\uff0c\u56e0\u6b64\u5b83\u4eec\u53ea\u53d1\u5e03\u6709\u5173\u5176\u62e5\u6709\u7684\u4fe1\u606f\u3002\u5f53\u4ee3\u7406\u52a0\u5165\u65f6\uff0c\u5b83\u4f1a\u5728\u4ee3\u7406\u8282\u70b9\u6ce8\u518c\u8868\u76ee\u5f55\u4e0b\u6ce8\u518c\u81ea\u5df1\uff0c\u5e76\u5199\u5165\u6709\u5173\u5176\u4e3b\u673a\u540d\u548c\u7aef\u53e3\u7684\u4fe1\u606f\u3002\u4ee3\u7406\u8fd8\u5728\u4ee3\u7406\u4e3b\u9898\u6ce8\u518c\u8868\u4e2d\u6ce8\u518c\u73b0\u6709\u4e3b\u9898\u53ca\u5176\u903b\u8f91\u5206\u533a\u7684\u5217\u8868\u3002\u65b0\u4e3b\u9898\u5728\u4ee3\u7406\u4e0a\u521b\u5efa\u65f6\u4f1a\u52a8\u6001\u6ce8\u518c\u3002","title":"\u7ecf\u7eaa\u5546\u8282\u70b9\u6ce8\u518c"},{"location":"6/","text":"6. Operations \u64cd\u4f5c \u4ee5\u4e0b\u662f\u6839\u636e LinkedIn \u7684\u4f7f\u7528\u60c5\u51b5\u548c\u7ecf\u9a8c\u5b9e\u9645\u5c06 Kafka \u4f5c\u4e3a\u751f\u4ea7\u7cfb\u7edf\u8fd0\u884c\u7684\u4e00\u4e9b\u4fe1\u606f\u3002\u8bf7\u5c06\u60a8\u77e5\u9053\u7684\u4efb\u4f55\u5176\u4ed6\u63d0\u793a\u53d1\u9001\u7ed9\u6211\u4eec\u3002 6.1 Kafka\u57fa\u672c\u64cd\u4f5c \u672c\u8282\u5c06\u56de\u987e\u60a8\u5c06\u5728 Kafka \u96c6\u7fa4\u4e0a\u6267\u884c\u7684\u6700\u5e38\u89c1\u64cd\u4f5c\u3002\u672c\u8282\u4e2d\u56de\u987e\u7684\u6240\u6709\u5de5\u5177\u90fd\u53ef\u4ee5\u5728 bin/ Kafka \u53d1\u884c\u7248\u7684\u76ee\u5f55\u4e0b\u627e\u5230\uff0c\u5982\u679c\u4e0d\u5e26\u53c2\u6570\u8fd0\u884c\uff0c\u6bcf\u4e2a\u5de5\u5177\u90fd\u4f1a\u6253\u5370\u6240\u6709\u53ef\u80fd\u7684\u547d\u4ee4\u884c\u9009\u9879\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u6dfb\u52a0\u548c\u5220\u200b\u200b\u9664\u4e3b\u9898 \u60a8\u53ef\u4ee5\u9009\u62e9\u624b\u52a8\u6dfb\u52a0\u4e3b\u9898\uff0c\u4e5f\u53ef\u4ee5\u5728\u6570\u636e\u9996\u6b21\u53d1\u5e03\u5230\u4e0d\u5b58\u5728\u7684\u4e3b\u9898\u65f6\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u3002\u5982\u679c\u4e3b\u9898\u662f\u81ea\u52a8\u521b\u5efa\u7684\uff0c\u90a3\u4e48\u60a8\u53ef\u80fd\u9700\u8981\u8c03\u6574\u7528\u4e8e\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u7684 \u9ed8\u8ba4 \u4e3b\u9898\u914d\u7f6e\u3002 \u4f7f\u7528\u4e3b\u9898\u5de5\u5177\u6dfb\u52a0\u548c\u4fee\u6539\u4e3b\u9898\uff1a > bin/kafka-topics.sh --bootstrap-server broker_host:port --create --topic my_topic_name \\ --partitions 20 --replication-factor 3 --config x=y \u590d\u5236\u56e0\u5b50\u63a7\u5236\u6709\u591a\u5c11\u670d\u52a1\u5668\u5c06\u590d\u5236\u6bcf\u6761\u5199\u5165\u7684\u6d88\u606f\u3002\u5982\u679c\u590d\u5236\u56e0\u5b50\u4e3a 3\uff0c\u5219\u5728\u60a8\u5931\u53bb\u5bf9\u6570\u636e\u7684\u8bbf\u95ee\u6743\u9650\u4e4b\u524d\u6700\u591a 2 \u4e2a\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u53d1\u751f\u6545\u969c\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528 2 \u6216 3 \u7684\u590d\u5236\u56e0\u5b50\uff0c\u4ee5\u4fbf\u60a8\u53ef\u4ee5\u900f\u660e\u5730\u5f39\u8df3\u673a\u5668\u800c\u4e0d\u4e2d\u65ad\u6570\u636e\u6d88\u8017\u3002 \u5206\u533a\u8ba1\u6570\u63a7\u5236\u4e3b\u9898\u5c06\u88ab\u5206\u7247\u4e3a\u591a\u5c11\u4e2a\u65e5\u5fd7\u3002\u5206\u533a\u8ba1\u6570\u6709\u591a\u79cd\u5f71\u54cd\u3002\u9996\u5148\uff0c\u6bcf\u4e2a\u5206\u533a\u5fc5\u987b\u5b8c\u5168\u9002\u5408\u4e00\u53f0\u670d\u52a1\u5668\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u6709 20 \u4e2a\u5206\u533a\uff0c\u5219\u5b8c\u6574\u6570\u636e\u96c6\uff08\u4ee5\u53ca\u8bfb\u5199\u8d1f\u8f7d\uff09\u5c06\u7531\u4e0d\u8d85\u8fc7 20 \u4e2a\u670d\u52a1\u5668\uff08\u4e0d\u5305\u62ec\u526f\u672c\uff09\u5904\u7406\u3002\u6700\u540e\uff0c\u5206\u533a\u8ba1\u6570\u4f1a\u5f71\u54cd\u6d88\u8d39\u8005\u7684\u6700\u5927\u5e76\u884c\u5ea6\u3002 \u6982\u5ff5\u90e8\u5206 \u5bf9\u6b64\u8fdb\u884c\u4e86\u66f4\u8be6\u7ec6\u7684\u8ba8\u8bba\u3002 \u6bcf\u4e2a\u5206\u7247\u5206\u533a\u65e5\u5fd7\u90fd\u653e\u7f6e\u5728 Kafka \u65e5\u5fd7\u76ee\u5f55\u4e0b\u81ea\u5df1\u7684\u6587\u4ef6\u5939\u4e2d\u3002\u6b64\u7c7b\u6587\u4ef6\u5939\u7684\u540d\u79f0\u7531\u4e3b\u9898\u540d\u79f0\u3001\u9644\u52a0\u7834\u6298\u53f7 (-) \u548c\u5206\u533a ID \u7ec4\u6210\u3002\u7531\u4e8e\u5178\u578b\u7684\u6587\u4ef6\u5939\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 255 \u4e2a\u5b57\u7b26\uff0c\u56e0\u6b64\u4e3b\u9898\u540d\u79f0\u7684\u957f\u5ea6\u5c06\u53d7\u5230\u9650\u5236\u3002\u6211\u4eec\u5047\u8bbe\u5206\u533a\u6570\u91cf\u6c38\u8fdc\u4e0d\u4f1a\u8d85\u8fc7 100,000\u3002\u56e0\u6b64\uff0c\u4e3b\u9898\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7 249 \u4e2a\u5b57\u7b26\u3002\u8fd9\u4f1a\u5728\u6587\u4ef6\u5939\u540d\u79f0\u4e2d\u7559\u4e0b\u8db3\u591f\u7684\u7a7a\u95f4\u7528\u4e8e\u77ed\u5212\u7ebf\u548c\u53ef\u80fd\u4e3a 5 \u4f4d\u6570\u957f\u7684\u5206\u533a ID\u3002 \u5728\u547d\u4ee4\u884c\u4e0a\u6dfb\u52a0\u7684\u914d\u7f6e\u4f1a\u8986\u76d6\u670d\u52a1\u5668\u7684\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u4f8b\u5982\u6570\u636e\u5e94\u4fdd\u7559\u7684\u65f6\u95f4\u957f\u5ea6\u3002\u5b8c\u6574\u7684\u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u96c6\u8bb0\u5f55 \u5728\u6b64\u5904 \u3002 \u4fee\u6539\u4e3b\u9898 \u60a8\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e3b\u9898\u5de5\u5177\u66f4\u6539\u4e3b\u9898\u7684\u914d\u7f6e\u6216\u5206\u533a\u3002 \u8981\u6dfb\u52a0\u5206\u533a\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c > bin/kafka-topics.sh --bootstrap-server broker_host:port --alter --topic my_topic_name \\ --partitions 40 \u8bf7\u6ce8\u610f\uff0c\u5206\u533a\u7684\u4e00\u79cd\u7528\u4f8b\u662f\u5bf9\u6570\u636e\u8fdb\u884c\u8bed\u4e49\u5206\u533a\uff0c\u5e76\u4e14\u6dfb\u52a0\u5206\u533a\u4e0d\u4f1a\u66f4\u6539\u73b0\u6709\u6570\u636e\u7684\u5206\u533a\uff0c\u56e0\u6b64\u5982\u679c\u6d88\u8d39\u8005\u4f9d\u8d56\u8be5\u5206\u533a\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5e72\u6270\u4ed6\u4eec\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6570\u636e\u5df2\u5206\u533a hash(key) % number_of_partitions \uff0c\u5219\u8be5\u5206\u533a\u53ef\u80fd\u4f1a\u901a\u8fc7\u6dfb\u52a0\u5206\u533a\u800c\u88ab\u6253\u4e71\uff0c\u4f46 Kafka \u4e0d\u4f1a\u5c1d\u8bd5\u4ee5\u4efb\u4f55\u65b9\u5f0f\u81ea\u52a8\u91cd\u65b0\u5206\u914d\u6570\u636e\u3002 \u6dfb\u52a0\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server broker_host:port --entity-type topics --entity-name my_topic_name --alter --add-config x=y \u8981\u5220\u9664\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server broker_host:port --entity-type topics --entity-name my_topic_name --alter --delete-config x \u6700\u540e\u5220\u9664\u4e00\u4e2a\u4e3b\u9898\uff1a > bin/kafka-topics.sh --bootstrap-server broker_host:port --delete --topic my_topic_name Kafka\u76ee\u524d\u4e0d\u652f\u6301\u51cf\u5c11\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\u3002 \u53ef\u4ee5\u5728\u6b64\u5904 \u627e\u5230\u6709\u5173\u66f4\u6539\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u7684\u8bf4\u660e\u3002 \u4f18\u96c5\u5173\u673a Kafka \u96c6\u7fa4\u5c06\u81ea\u52a8\u68c0\u6d4b\u4efb\u4f55\u4ee3\u7406\u5173\u95ed\u6216\u6545\u969c\uff0c\u5e76\u4e3a\u8be5\u673a\u5668\u4e0a\u7684\u5206\u533a\u9009\u4e3e\u65b0\u7684\u9886\u5bfc\u8005\u3002\u65e0\u8bba\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u8fd8\u662f\u4e3a\u4e86\u7ef4\u62a4\u6216\u914d\u7f6e\u66f4\u6539\u800c\u6545\u610f\u5173\u95ed\u670d\u52a1\u5668\uff0c\u90fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002\u5bf9\u4e8e\u540e\u4e00\u79cd\u60c5\u51b5\uff0cKafka \u652f\u6301\u4e00\u79cd\u66f4\u4f18\u96c5\u7684\u673a\u5236\u6765\u505c\u6b62\u670d\u52a1\u5668\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6740\u6b7b\u5b83\u3002\u5f53\u670d\u52a1\u5668\u6b63\u5e38\u505c\u6b62\u65f6\uff0c\u5b83\u5c06\u5229\u7528\u4e24\u4e2a\u4f18\u5316\uff1a \u5b83\u5c06\u6240\u6709\u65e5\u5fd7\u540c\u6b65\u5230\u78c1\u76d8\uff0c\u4ee5\u907f\u514d\u91cd\u65b0\u542f\u52a8\u65f6\u9700\u8981\u6267\u884c\u4efb\u4f55\u65e5\u5fd7\u6062\u590d\uff08\u5373\u9a8c\u8bc1\u65e5\u5fd7\u5c3e\u90e8\u6240\u6709\u6d88\u606f\u7684\u6821\u9a8c\u548c\uff09\u3002\u65e5\u5fd7\u6062\u590d\u9700\u8981\u65f6\u95f4\uff0c\u56e0\u6b64\u8fd9\u53ef\u4ee5\u52a0\u5feb\u6709\u610f\u91cd\u65b0\u542f\u52a8\u7684\u901f\u5ea6\u3002 \u5b83\u5c06\u5728\u5173\u95ed\u4e4b\u524d\u5c06\u670d\u52a1\u5668\u4f5c\u4e3a\u9886\u5bfc\u8005\u7684\u4efb\u4f55\u5206\u533a\u8fc1\u79fb\u5230\u5176\u4ed6\u526f\u672c\u3002\u8fd9\u5c06\u4f7f\u9886\u5bfc\u6743\u8f6c\u79fb\u66f4\u5feb\uff0c\u5e76\u5c06\u6bcf\u4e2a\u5206\u533a\u4e0d\u53ef\u7528\u7684\u65f6\u95f4\u6700\u5c0f\u5316\u5230\u51e0\u6beb\u79d2\u3002 \u6bcf\u5f53\u670d\u52a1\u5668\u505c\u6b62\uff08\u9664\u4e86\u786c\u7ec8\u6b62\uff09\u65f6\uff0c\u540c\u6b65\u65e5\u5fd7\u90fd\u4f1a\u81ea\u52a8\u53d1\u751f\uff0c\u4f46\u53d7\u63a7\u9886\u5bfc\u8fc1\u79fb\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u8bbe\u7f6e\uff1a controlled.shutdown.enable=true \u8bf7\u6ce8\u610f\uff0c\u53ea\u6709\u5728\u4ee3\u7406\u4e0a\u6258\u7ba1\u7684 \u6240\u6709 \u5206\u533a\u90fd\u6709\u526f\u672c\uff08\u5373\u590d\u5236\u56e0\u5b50\u5927\u4e8e 1 \u5e76\u4e14 \u8fd9\u4e9b\u526f\u672c\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff09\u65f6\uff0c\u53d7\u63a7\u5173\u95ed\u624d\u4f1a\u6210\u529f\u3002\u8fd9\u901a\u5e38\u662f\u60a8\u60f3\u8981\u7684\uff0c\u56e0\u4e3a\u5173\u95ed\u6700\u540e\u4e00\u4e2a\u526f\u672c\u5c06\u4f7f\u8be5\u4e3b\u9898\u5206\u533a\u4e0d\u53ef\u7528\u3002 \u5e73\u8861\u9886\u5bfc\u529b \u6bcf\u5f53\u4ee3\u7406\u505c\u6b62\u6216\u5d29\u6e83\u65f6\uff0c\u8be5\u4ee3\u7406\u7684\u5206\u533a\u7684\u9886\u5bfc\u6743\u5c31\u4f1a\u8f6c\u79fb\u5230\u5176\u4ed6\u526f\u672c\u3002\u5f53\u4ee3\u7406\u91cd\u65b0\u542f\u52a8\u65f6\uff0c\u5b83\u53ea\u4f1a\u6210\u4e3a\u5176\u6240\u6709\u5206\u533a\u7684\u8ffd\u968f\u8005\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4e0d\u4f1a\u7528\u4e8e\u5ba2\u6237\u7aef\u8bfb\u53d6\u548c\u5199\u5165\u3002 \u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u4e0d\u5e73\u8861\uff0cKafka \u6709\u4e00\u4e2a\u9996\u9009\u526f\u672c\u7684\u6982\u5ff5\u3002\u5982\u679c\u5206\u533a\u7684\u526f\u672c\u5217\u8868\u4e3a 1\u30015\u30019\uff0c\u5219\u8282\u70b9 1 \u4f18\u5148\u4f5c\u4e3a\u8282\u70b9 5 \u6216 9 \u7684\u9886\u5bfc\u8005\uff0c\u56e0\u4e3a\u5b83\u5728\u526f\u672c\u5217\u8868\u4e2d\u8f83\u65e9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka \u96c6\u7fa4\u5c06\u5c1d\u8bd5\u6062\u590d\u9996\u9009\u526f\u672c\u7684\u9886\u5bfc\u5730\u4f4d\u3002\u6b64\u884c\u4e3a\u914d\u7f6e\u4e3a\uff1a auto.leader.rebalance.enable=true \u60a8\u4e5f\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a false\uff0c\u4f46\u968f\u540e\u60a8\u9700\u8981\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u6062\u590d\u5df2\u6062\u590d\u526f\u672c\u7684\u9886\u5bfc\u6743\uff1a > bin/kafka-leader-election.sh --bootstrap-server broker_host:port --election-type preferred --all-topic-partitions \u8de8\u673a\u67b6\u5e73\u8861\u526f\u672c \u673a\u67b6\u611f\u77e5\u529f\u80fd\u5c06\u540c\u4e00\u5206\u533a\u7684\u526f\u672c\u5206\u5e03\u5728\u4e0d\u540c\u7684\u673a\u67b6\u4e0a\u3002\u8fd9\u6269\u5c55\u4e86 Kafka \u4e3a\u4ee3\u7406\u6545\u969c\u63d0\u4f9b\u7684\u4fdd\u8bc1\u4ee5\u6db5\u76d6\u673a\u67b6\u6545\u969c\uff0c\u4ece\u800c\u9650\u5236\u4e86\u673a\u67b6\u4e0a\u7684\u6240\u6709\u4ee3\u7406\u540c\u65f6\u53d1\u751f\u6545\u969c\u65f6\u6570\u636e\u4e22\u5931\u7684\u98ce\u9669\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u5e94\u7528\u4e8e\u5176\u4ed6\u4ee3\u7406\u5206\u7ec4\uff0c\u4f8b\u5982 EC2 \u4e2d\u7684\u53ef\u7528\u533a\u57df\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u5411\u4ee3\u7406\u914d\u7f6e\u6dfb\u52a0\u5c5e\u6027\u6765\u6307\u5b9a\u4ee3\u7406\u5c5e\u4e8e\u7279\u5b9a\u673a\u67b6\uff1a broker.rack=my-rack-id \u5f53\u521b\u5efa \u3001 \u4fee\u6539\u4e3b\u9898 \u6216\u91cd\u65b0\u5206\u914d \u526f\u672c \u65f6\uff0c\u5c06\u9075\u5b88\u673a\u67b6\u7ea6\u675f\uff0c\u786e\u4fdd\u526f\u672c\u8de8\u8d8a\u5c3d\u53ef\u80fd\u591a\u7684\u673a\u67b6\uff08\u5206\u533a\u5c06\u8de8\u8d8a min(#racks,replication-factor) \u4e2a\u4e0d\u540c\u7684\u673a\u67b6\uff09\u3002 \u7528\u4e8e\u5c06\u526f\u672c\u5206\u914d\u7ed9\u4ee3\u7406\u7684\u7b97\u6cd5\u53ef\u786e\u4fdd\u6bcf\u4e2a\u4ee3\u7406\u7684\u9886\u5bfc\u8005\u6570\u91cf\u4fdd\u6301\u4e0d\u53d8\uff0c\u65e0\u8bba\u4ee3\u7406\u5982\u4f55\u8de8\u673a\u67b6\u5206\u5e03\u3002\u8fd9\u786e\u4fdd\u4e86\u5e73\u8861\u7684\u541e\u5410\u91cf\u3002 \u4f46\u662f\uff0c\u5982\u679c\u4e3a\u673a\u67b6\u5206\u914d\u4e86\u4e0d\u540c\u6570\u91cf\u7684\u4ee3\u7406\uff0c\u5219\u526f\u672c\u7684\u5206\u914d\u5c06\u4e0d\u5747\u5300\u3002\u5177\u6709\u8f83\u5c11\u4ee3\u7406\u7684\u673a\u67b6\u5c06\u83b7\u5f97\u66f4\u591a\u526f\u672c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5c06\u4f7f\u7528\u66f4\u591a\u5b58\u50a8\u5e76\u5c06\u66f4\u591a\u8d44\u6e90\u7528\u4e8e\u590d\u5236\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u673a\u67b6\u914d\u7f6e\u76f8\u540c\u6570\u91cf\u7684\u4ee3\u7406\u662f\u660e\u667a\u7684\u3002 \u96c6\u7fa4\u4e4b\u95f4\u7684\u6570\u636e\u955c\u50cf\u548c\u5f02\u5730\u590d\u5236 Kafka \u7ba1\u7406\u5458\u53ef\u4ee5\u5b9a\u4e49\u8de8\u8d8a\u5404\u4e2a Kafka \u96c6\u7fa4\u3001\u6570\u636e\u4e2d\u5fc3\u6216\u5730\u7406\u533a\u57df\u8fb9\u754c\u7684\u6570\u636e\u6d41\u3002 \u8bf7\u53c2\u9605\u5f02\u5730\u590d\u5236 \u90e8\u5206\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002 \u68c0\u67e5\u6d88\u8d39\u8005\u4f4d\u7f6e \u6709\u65f6\u4e86\u89e3\u6d88\u8d39\u8005\u7684\u7acb\u573a\u5f88\u6709\u7528\u3002\u6211\u4eec\u6709\u4e00\u4e2a\u5de5\u5177\u53ef\u4ee5\u663e\u793a\u6d88\u8d39\u8005\u7ec4\u4e2d\u6240\u6709\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u4ee5\u53ca\u5b83\u4eec\u8ddd\u79bb\u65e5\u5fd7\u672b\u5c3e\u6709\u591a\u8fdc\u3002 \u8981\u5728\u4f7f\u7528\u540d\u4e3amy-topic \u7684 \u4e3b\u9898\u7684\u540d\u4e3a my-group \u7684 \u6d88\u8d39\u8005\u7ec4\u4e0a\u8fd0\u884c\u6b64\u5de5\u5177\uff0c\u5982\u4e0b\u6240\u793a\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID my-topic 0 2 4 2 consumer-1-029af89c-873c-4751-a720-cefd41a669d6 /127.0.0.1 consumer-1 my-topic 1 2 3 1 consumer-1-029af89c-873c-4751-a720-cefd41a669d6 /127.0.0.1 consumer-1 my-topic 2 2 3 1 consumer-2-42c1abd4-e3b2-425d-a8bb-e1ea49b29bb2 /127.0.0.1 consumer-2 \u7ba1\u7406\u6d88\u8d39\u8005\u7fa4\u4f53 \u4f7f\u7528 ConsumerGroupCommand \u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u5217\u51fa\u3001\u63cf\u8ff0\u6216\u5220\u9664\u6d88\u8d39\u8005\u7ec4\u3002\u53ef\u4ee5\u624b\u52a8\u5220\u9664\u6d88\u8d39\u8005\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u5728\u8be5\u7ec4\u7684\u6700\u540e\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u5230\u671f\u65f6\u81ea\u52a8\u5220\u9664\u8be5\u6d88\u8d39\u8005\u7ec4\u3002\u4ec5\u5f53\u7ec4\u6ca1\u6709\u4efb\u4f55\u6d3b\u52a8\u6210\u5458\u65f6\uff0c\u624b\u52a8\u5220\u9664\u624d\u6709\u6548\u3002\u4f8b\u5982\uff0c\u8981\u5217\u51fa\u6240\u6709\u4e3b\u9898\u7684\u6240\u6709\u6d88\u8d39\u8005\u7ec4\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --list test-consumer-group \u8981\u67e5\u770b\u504f\u79fb\u91cf\uff0c\u5982\u524d\u6240\u8ff0\uff0c\u6211\u4eec\u50cf\u8fd9\u6837\u201c\u63cf\u8ff0\u201d\u6d88\u8d39\u8005\u7ec4\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID topic3 0 241019 395308 154289 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 topic2 1 520678 803288 282610 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 topic3 1 241018 398817 157799 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 topic1 0 854144 855809 1665 consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 topic2 0 460537 803290 342753 consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 topic3 2 243655 398812 155157 consumer4-117fe4d3-c6c1-4178-8ee9-eb4a3954bee0 /127.0.0.1 consumer4 \u6709\u8bb8\u591a\u9644\u52a0\u7684\u201c\u63cf\u8ff0\u201d\u9009\u9879\u53ef\u7528\u4e8e\u63d0\u4f9b\u6709\u5173\u6d88\u8d39\u8005\u7ec4\u7684\u66f4\u8be6\u7ec6\u4fe1\u606f\uff1a --members\uff1a\u6b64\u9009\u9879\u63d0\u4f9b\u6d88\u8d39\u8005\u7ec4\u4e2d\u6240\u6709\u6d3b\u8dc3\u6210\u5458\u7684\u5217\u8868\u3002 > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group --members CONSUMER-ID HOST CLIENT-ID #PARTITIONS consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 2 consumer4-117fe4d3-c6c1-4178-8ee9-eb4a3954bee0 /127.0.0.1 consumer4 1 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 3 consumer3-ecea43e4-1f01-479f-8349-f9130b75d8ee /127.0.0.1 consumer3 0 --members --verbose\uff1a\u9664\u4e86\u4e0a\u9762\u7684\u201c--members\u201d\u9009\u9879\u62a5\u544a\u7684\u4fe1\u606f\u4e4b\u5916\uff0c\u6b64\u9009\u9879\u8fd8\u63d0\u4f9b\u5206\u914d\u7ed9\u6bcf\u4e2a\u6210\u5458\u7684\u5206\u533a\u3002 > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group --members --verbose CONSUMER-ID HOST CLIENT-ID #PARTITIONS ASSIGNMENT consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 2 topic1(0), topic2(0) consumer4-117fe4d3-c6c1-4178-8ee9-eb4a3954bee0 /127.0.0.1 consumer4 1 topic3(2) consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 3 topic2(1), topic3(0,1) consumer3-ecea43e4-1f01-479f-8349-f9130b75d8ee /127.0.0.1 consumer3 0 - --offsets\uff1a\u8fd9\u662f\u9ed8\u8ba4\u7684\u63cf\u8ff0\u9009\u9879\uff0c\u63d0\u4f9b\u4e0e\u201c--describe\u201d\u9009\u9879\u76f8\u540c\u7684\u8f93\u51fa\u3002 --state\uff1a\u6b64\u9009\u9879\u63d0\u4f9b\u6709\u7528\u7684\u7ec4\u7ea7\u522b\u4fe1\u606f\u3002 > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group --state COORDINATOR (ID) ASSIGNMENT-STRATEGY STATE #MEMBERS localhost:9092 (0) range Stable 4 \u8981\u624b\u52a8\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u6d88\u8d39\u8005\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528\u201c--delete\u201d\u9009\u9879\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --delete --group my-group --group my-other-group Deletion of requested consumer groups ('my-group', 'my-other-group') was successful. \u8981\u91cd\u7f6e\u6d88\u8d39\u8005\u7ec4\u7684\u504f\u79fb\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528\u201c--reset-offsets\u201d\u9009\u9879\u3002\u6b64\u9009\u9879\u540c\u65f6\u652f\u6301\u4e00\u4e2a\u6d88\u8d39\u8005\u7ec4\u3002\u5b83\u9700\u8981\u5b9a\u4e49\u4ee5\u4e0b\u8303\u56f4\uff1a--all-topics \u6216--topic\u3002\u9664\u975e\u60a8\u4f7f\u7528\u201c--from-file\u201d\u65b9\u6848\uff0c\u5426\u5219\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u8303\u56f4\u3002\u53e6\u5916\uff0c\u9996\u5148\u786e\u4fdd\u4f7f\u7528\u8005\u5b9e\u4f8b\u5904\u4e8e\u975e\u6d3b\u52a8\u72b6\u6001\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-122 \u3002 \u5b83\u6709 3 \u4e2a\u6267\u884c\u9009\u9879\uff1a \uff08\u9ed8\u8ba4\uff09\u663e\u793a\u8981\u91cd\u7f6e\u7684\u504f\u79fb\u91cf\u3002 --execute : \u6267\u884c --reset-offsets \u8fdb\u7a0b\u3002 --export \uff1a\u5c06\u7ed3\u679c\u5bfc\u51fa\u4e3a CSV \u683c\u5f0f\u3002 --reset-offsets \u8fd8\u6709\u4ee5\u4e0b\u573a\u666f\u53ef\u4f9b\u9009\u62e9\uff08\u81f3\u5c11\u5fc5\u987b\u9009\u62e9\u4e00\u79cd\u573a\u666f\uff09\uff1a --to-datetime \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u65e5\u671f\u65f6\u95f4\u7684\u504f\u79fb\u91cf\u3002\u683c\u5f0f\uff1a'YYYY-MM-DDTHH:mm:SS.sss' --to-earliest \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65e9\u7684\u504f\u79fb\u91cf\u3002 --to-latest \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65b0\u504f\u79fb\u91cf\u3002 --shift-by \uff1a\u91cd\u7f6e\u504f\u79fb\u91cf\uff0c\u5c06\u5f53\u524d\u504f\u79fb\u91cf\u79fb\u52a8\u201cn\u201d\uff0c\u5176\u4e2d\u201cn\u201d\u53ef\u4ee5\u662f\u6b63\u6570\u6216\u8d1f\u6570\u3002 --from-file \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a CSV \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u503c\u3002 --to-current \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u5f53\u524d\u504f\u79fb\u91cf\u3002 --by-duration \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u4ece\u5f53\u524d\u65f6\u95f4\u6233\u5f00\u59cb\u6309\u6301\u7eed\u65f6\u95f4\u504f\u79fb\u3002\u683c\u5f0f\uff1a'PnDTnHnMnS' --to-offset \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u7279\u5b9a\u504f\u79fb\u91cf\u3002 \u8bf7\u6ce8\u610f\uff0c\u8d85\u51fa\u8303\u56f4\u7684\u504f\u79fb\u5c06\u8c03\u6574\u4e3a\u53ef\u7528\u7684\u504f\u79fb\u7aef\u3002\u4f8b\u5982\uff0c\u5982\u679c\u504f\u79fb\u7ed3\u675f\u4e3a10\uff0c\u504f\u79fb\u79fb\u4f4d\u8bf7\u6c42\u4e3a15\uff0c\u5219\u5b9e\u9645\u4e0a\u4f1a\u9009\u62e910\u5904\u7684\u504f\u79fb\u3002 \u4f8b\u5982\uff0c\u5c06\u6d88\u8d39\u8005\u7ec4\u7684\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65b0\u7684\u504f\u79fb\u91cf\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --reset-offsets --group consumergroup1 --topic topic1 --to-latest TOPIC PARTITION NEW-OFFSET topic1 0 0 \u5982\u679c\u60a8\u4f7f\u7528\u65e7\u7684\u9ad8\u7ea7\u4f7f\u7528\u8005\u5e76\u5c06\u7ec4\u5143\u6570\u636e\u5b58\u50a8\u5728 ZooKeeper \u4e2d\uff08\u5373 offsets.storage=zookeeper \uff09\uff0c\u8bf7\u4f20\u9012 --zookeeper \u800c\u4e0d\u662f --bootstrap-server \uff1a > bin/kafka-consumer-groups.sh --zookeeper localhost:2181 --list \u6269\u5c55\u60a8\u7684\u96c6\u7fa4 \u5c06\u670d\u52a1\u5668\u6dfb\u52a0\u5230 Kafka \u96c6\u7fa4\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u4e3a\u5b83\u4eec\u5206\u914d\u4e00\u4e2a\u552f\u4e00\u7684\u4ee3\u7406 ID \u5e76\u5728\u65b0\u670d\u52a1\u5668\u4e0a\u542f\u52a8 Kafka \u5373\u53ef\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u65b0\u670d\u52a1\u5668\u4e0d\u4f1a\u81ea\u52a8\u5206\u914d\u4efb\u4f55\u6570\u636e\u5206\u533a\uff0c\u56e0\u6b64\u9664\u975e\u5c06\u5206\u533a\u79fb\u52a8\u5230\u5b83\u4eec\uff0c\u5426\u5219\u5728\u521b\u5efa\u65b0\u4e3b\u9898\u4e4b\u524d\u5b83\u4eec\u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u5de5\u4f5c\u3002\u56e0\u6b64\uff0c\u901a\u5e38\u5f53\u60a8\u5411\u96c6\u7fa4\u6dfb\u52a0\u673a\u5668\u65f6\uff0c\u60a8\u4f1a\u5e0c\u671b\u5c06\u4e00\u4e9b\u73b0\u6709\u6570\u636e\u8fc1\u79fb\u5230\u8fd9\u4e9b\u673a\u5668\u3002 \u8fc1\u79fb\u6570\u636e\u7684\u8fc7\u7a0b\u662f\u624b\u52a8\u542f\u52a8\u7684\uff0c\u4f46\u5b8c\u5168\u81ea\u52a8\u5316\u3002\u5728\u5e55\u540e\u53d1\u751f\u7684\u4e8b\u60c5\u662f\uff0cKafka \u4f1a\u5c06\u65b0\u670d\u52a1\u5668\u6dfb\u52a0\u4e3a\u5b83\u6b63\u5728\u8fc1\u79fb\u7684\u5206\u533a\u7684\u8ddf\u968f\u8005\uff0c\u5e76\u5141\u8bb8\u5b83\u5b8c\u5168\u590d\u5236\u8be5\u5206\u533a\u4e2d\u7684\u73b0\u6709\u6570\u636e\u3002\u5f53\u65b0\u670d\u52a1\u5668\u5b8c\u5168\u590d\u5236\u8be5\u5206\u533a\u7684\u5185\u5bb9\u5e76\u52a0\u5165\u540c\u6b65\u526f\u672c\u65f6\uff0c\u73b0\u6709\u526f\u672c\u4e4b\u4e00\u5c06\u5220\u9664\u5176\u5206\u533a\u7684\u6570\u636e\u3002 \u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u53ef\u7528\u4e8e\u8de8\u4ee3\u7406\u79fb\u52a8\u5206\u533a\u3002\u7406\u60f3\u7684\u5206\u533a\u5206\u5e03\u5c06\u786e\u4fdd\u6240\u6709\u4ee3\u7406\u7684\u6570\u636e\u8d1f\u8f7d\u548c\u5206\u533a\u5927\u5c0f\u5747\u5300\u3002\u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u65e0\u6cd5\u81ea\u52a8\u7814\u7a76 Kafka \u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u5206\u5e03\u5e76\u79fb\u52a8\u5206\u533a\u4ee5\u83b7\u5f97\u5747\u5300\u7684\u8d1f\u8f7d\u5206\u5e03\u3002\u56e0\u6b64\uff0c\u7ba1\u7406\u5458\u5fc5\u987b\u5f04\u6e05\u695a\u5e94\u8be5\u79fb\u52a8\u54ea\u4e9b\u4e3b\u9898\u6216\u5206\u533a\u3002 \u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u53ef\u4ee5\u5728 3 \u79cd\u4e92\u65a5\u7684\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff1a --generate\uff1a\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u7ed9\u5b9a\u4e3b\u9898\u5217\u8868\u548c\u4ee3\u7406\u5217\u8868\uff0c\u8be5\u5de5\u5177\u4f1a\u751f\u6210\u5019\u9009\u91cd\u65b0\u200b\u200b\u5206\u914d\uff0c\u4ee5\u5c06\u6307\u5b9a\u4e3b\u9898\u7684\u6240\u6709\u5206\u533a\u79fb\u52a8\u5230\u65b0\u4ee3\u7406\u3002\u6b64\u9009\u9879\u4ec5\u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u7ed9\u5b9a\u4e3b\u9898\u548c\u76ee\u6807\u4ee3\u7406\u5217\u8868\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u5206\u533a\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u7684\u4fbf\u6377\u65b9\u6cd5\u3002 --execute\uff1a\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u8be5\u5de5\u5177\u6839\u636e\u7528\u6237\u63d0\u4f9b\u7684\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u542f\u52a8\u5206\u533a\u7684\u91cd\u65b0\u5206\u914d\u3002\uff08\u4f7f\u7528 --reassignment-json-file \u9009\u9879\uff09\u3002\u8fd9\u53ef\u4ee5\u662f\u7531\u7ba1\u7406\u5458\u624b\u5de5\u5236\u4f5c\u7684\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 --generate \u9009\u9879\u63d0\u4f9b --verify\uff1a\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u8be5\u5de5\u5177\u9a8c\u8bc1\u4e0a\u6b21 --execute \u671f\u95f4\u5217\u51fa\u7684\u6240\u6709\u5206\u533a\u7684\u91cd\u65b0\u5206\u914d\u72b6\u6001\u3002\u72b6\u6001\u53ef\u4ee5\u662f\u6210\u529f\u5b8c\u6210\u3001\u5931\u8d25\u6216\u6b63\u5728\u8fdb\u884c \u81ea\u52a8\u5c06\u6570\u636e\u8fc1\u79fb\u5230\u65b0\u673a\u5668 \u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u53ef\u7528\u4e8e\u5c06\u67d0\u4e9b\u4e3b\u9898\u4ece\u5f53\u524d\u4ee3\u7406\u96c6\u4e2d\u79fb\u81f3\u65b0\u6dfb\u52a0\u7684\u4ee3\u7406\u3002\u8fd9\u5728\u6269\u5c55\u73b0\u6709\u96c6\u7fa4\u65f6\u901a\u5e38\u5f88\u6709\u7528\uff0c\u56e0\u4e3a\u5c06\u6574\u4e2a\u4e3b\u9898\u79fb\u52a8\u5230\u4e00\u7ec4\u65b0\u7684\u4ee3\u7406\u6bd4\u4e00\u6b21\u79fb\u52a8\u4e00\u4e2a\u5206\u533a\u66f4\u5bb9\u6613\u3002\u5f53\u7528\u4e8e\u6267\u884c\u6b64\u64cd\u4f5c\u65f6\uff0c\u7528\u6237\u5e94\u63d0\u4f9b\u5e94\u79fb\u52a8\u5230\u65b0\u4ee3\u7406\u96c6\u7684\u4e3b\u9898\u5217\u8868\u4ee5\u53ca\u65b0\u4ee3\u7406\u7684\u76ee\u6807\u5217\u8868\u3002\u7136\u540e\uff0c\u8be5\u5de5\u5177\u5c06\u7ed9\u5b9a\u4e3b\u9898\u5217\u8868\u7684\u6240\u6709\u5206\u533a\u5747\u5300\u5206\u5e03\u5728\u65b0\u7684\u4ee3\u7406\u96c6\u4e0a\u3002\u5728\u6b64\u79fb\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u4fdd\u6301\u4e0d\u53d8\u3002\u5b9e\u9645\u4e0a\uff0c\u4e3b\u9898\u8f93\u5165\u5217\u8868\u7684\u6240\u6709\u5206\u533a\u7684\u526f\u672c\u90fd\u4ece\u65e7\u7684\u4ee3\u7406\u96c6\u79fb\u52a8\u5230\u65b0\u6dfb\u52a0\u7684\u4ee3\u7406\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u793a\u4f8b\u5c06\u4e3b\u9898 foo1,foo2 \u7684\u6240\u6709\u5206\u533a\u79fb\u52a8\u5230\u65b0\u7684\u4ee3\u7406\u96c6 5,6\u3002\u5728\u6b64\u79fb\u52a8\u7ed3\u675f\u65f6\uff0c\u4e3b\u9898 foo1 \u548c foo2 \u7684\u6240\u6709\u5206\u533a\u5c06 \u4ec5\u5b58 \u5728\u4e8e\u4ee3\u7406 5,6 \u4e0a\u3002 \u7531\u4e8e\u8be5\u5de5\u5177\u63a5\u53d7 json \u6587\u4ef6\u5f62\u5f0f\u7684\u4e3b\u9898\u8f93\u5165\u5217\u8868\uff0c\u56e0\u6b64\u60a8\u9996\u5148\u9700\u8981\u786e\u5b9a\u8981\u79fb\u52a8\u7684\u4e3b\u9898\u5e76\u521b\u5efa json \u6587\u4ef6\uff0c\u5982\u4e0b\u6240\u793a\uff1a > cat topics-to-move.json {\"topics\": [{\"topic\": \"foo1\"}, {\"topic\": \"foo2\"}], \"version\":1 } json \u6587\u4ef6\u51c6\u5907\u597d\u540e\uff0c\u4f7f\u7528\u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u751f\u6210\u5019\u9009\u5206\u914d\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --topics-to-move-json-file topics-to-move.json --broker-list \"5,6\" --generate Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[2,1]}, {\"topic\":\"foo1\",\"partition\":1,\"replicas\":[1,3]}, {\"topic\":\"foo1\",\"partition\":2,\"replicas\":[3,4]}, {\"topic\":\"foo2\",\"partition\":0,\"replicas\":[4,2]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[2,1]}, {\"topic\":\"foo2\",\"partition\":2,\"replicas\":[1,3]}] } Proposed partition reassignment configuration {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[6,5]}, {\"topic\":\"foo1\",\"partition\":1,\"replicas\":[5,6]}, {\"topic\":\"foo1\",\"partition\":2,\"replicas\":[6,5]}, {\"topic\":\"foo2\",\"partition\":0,\"replicas\":[5,6]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[6,5]}, {\"topic\":\"foo2\",\"partition\":2,\"replicas\":[5,6]}] } \u8be5\u5de5\u5177\u751f\u6210\u4e00\u4e2a\u5019\u9009\u5206\u914d\uff0c\u5c06\u6240\u6709\u5206\u533a\u4ece\u4e3b\u9898 foo1,foo2 \u79fb\u52a8\u5230\u4ee3\u7406 5,6\u3002\u4f46\u8bf7\u6ce8\u610f\uff0c\u6b64\u65f6\u5206\u533a\u79fb\u52a8\u5c1a\u672a\u5f00\u59cb\uff0c\u5b83\u4ec5\u544a\u8bc9\u60a8\u5f53\u524d\u5206\u914d\u548c\u5efa\u8bae\u7684\u65b0\u5206\u914d\u3002\u5e94\u4fdd\u5b58\u5f53\u524d\u5206\u914d\uff0c\u4ee5\u9632\u60a8\u60f3\u56de\u6eda\u5230\u5f53\u524d\u5206\u914d\u3002\u65b0\u5206\u914d\u5e94\u4fdd\u5b58\u5728 json \u6587\u4ef6\u4e2d\uff08\u4f8b\u5982 Expand-cluster-reassignment.json\uff09\uff0c\u4ee5\u4fbf\u4f7f\u7528 --execute \u9009\u9879\u8f93\u5165\u5230\u5de5\u5177\u4e2d\uff0c\u5982\u4e0b\u6240\u793a\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file expand-cluster-reassignment.json --execute Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[2,1]}, {\"topic\":\"foo1\",\"partition\":1,\"replicas\":[1,3]}, {\"topic\":\"foo1\",\"partition\":2,\"replicas\":[3,4]}, {\"topic\":\"foo2\",\"partition\":0,\"replicas\":[4,2]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[2,1]}, {\"topic\":\"foo2\",\"partition\":2,\"replicas\":[1,3]}] } Save this to use as the --reassignment-json-file option during rollback Successfully started partition reassignments for foo1-0,foo1-1,foo1-2,foo2-0,foo2-1,foo2-2 \u6700\u540e\uff0c--verify \u9009\u9879\u53ef\u4ee5\u4e0e\u8be5\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\u6765\u68c0\u67e5\u5206\u533a\u91cd\u65b0\u5206\u914d\u7684\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u76f8\u540c\u7684 Expand-cluster-reassignment.json\uff08\u4e0e --execute \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff09\u5e94\u4e0e --verify \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file expand-cluster-reassignment.json --verify Status of partition reassignment: Reassignment of partition [foo1,0] is completed Reassignment of partition [foo1,1] is still in progress Reassignment of partition [foo1,2] is still in progress Reassignment of partition [foo2,0] is completed Reassignment of partition [foo2,1] is completed Reassignment of partition [foo2,2] is completed \u81ea\u5b9a\u4e49\u5206\u533a\u5206\u914d\u548c\u8fc1\u79fb \u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u8fd8\u53ef\u7528\u4e8e\u6709\u9009\u62e9\u5730\u5c06\u5206\u533a\u7684\u526f\u672c\u79fb\u52a8\u5230\u4e00\u7ec4\u7279\u5b9a\u7684\u4ee3\u7406\u3002\u5f53\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u4f7f\u7528\u65f6\uff0c\u5047\u8bbe\u7528\u6237\u77e5\u9053\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u5e76\u4e14\u4e0d\u9700\u8981\u8be5\u5de5\u5177\u6765\u751f\u6210\u5019\u9009\u91cd\u65b0\u200b\u200b\u5206\u914d\uff0c\u4ece\u800c\u6709\u6548\u5730\u8df3\u8fc7 --generate \u6b65\u9aa4\u5e76\u76f4\u63a5\u8fdb\u5165 --execute \u6b65\u9aa4 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u793a\u4f8b\u5c06\u4e3b\u9898 foo1 \u7684\u5206\u533a 0 \u79fb\u52a8\u5230\u4ee3\u7406 5,6\uff0c\u5c06\u4e3b\u9898 foo2 \u7684\u5206\u533a 1 \u79fb\u52a8\u5230\u4ee3\u7406 2,3\uff1a \u7b2c\u4e00\u6b65\u662f\u5728 json \u6587\u4ef6\u4e2d\u624b\u5de5\u5236\u5b9a\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff1a > cat custom-reassignment.json {\"version\":1,\"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[5,6]},{\"topic\":\"foo2\",\"partition\":1,\"replicas\":[2,3]}]} \u7136\u540e\uff0c\u4f7f\u7528\u5e26\u6709 --execute \u9009\u9879\u7684 json \u6587\u4ef6\u6765\u542f\u52a8\u91cd\u65b0\u5206\u914d\u8fc7\u7a0b\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file custom-reassignment.json --execute Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[1,2]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[3,4]}] } Save this to use as the --reassignment-json-file option during rollback Successfully started partition reassignments for foo1-0,foo2-1 --verify \u9009\u9879\u53ef\u4ee5\u4e0e\u8be5\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\u6765\u68c0\u67e5\u5206\u533a\u91cd\u65b0\u5206\u914d\u7684\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u76f8\u540c\u7684 custom-reassignment.json \uff08\u4e0e --execute \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff09\u5e94\u4e0e --verify \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file custom-reassignment.json --verify Status of partition reassignment: Reassignment of partition [foo1,0] is completed Reassignment of partition [foo2,1] is completed \u9000\u5f79broker \u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u5c1a\u4e0d\u5177\u5907\u4e3a\u9000\u5f79\u4ee3\u7406\u81ea\u52a8\u751f\u6210\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u7684\u80fd\u529b\u3002\u56e0\u6b64\uff0c\u7ba1\u7406\u5458\u5fc5\u987b\u5236\u5b9a\u4e00\u4e2a\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff0c\u5c06\u8981\u505c\u7528\u7684\u4ee3\u7406\u4e0a\u6258\u7ba1\u7684\u6240\u6709\u5206\u533a\u7684\u526f\u672c\u79fb\u52a8\u5230\u5176\u4f59\u4ee3\u7406\u3002\u8fd9\u53ef\u80fd\u76f8\u5bf9\u7e41\u7410\uff0c\u56e0\u4e3a\u91cd\u65b0\u5206\u914d\u9700\u8981\u786e\u4fdd\u6240\u6709\u526f\u672c\u4e0d\u4f1a\u4ece\u5df2\u505c\u7528\u7684\u4ee3\u7406\u4ec5\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u4ee3\u7406\u3002\u4e3a\u4e86\u4f7f\u8fd9\u4e2a\u8fc7\u7a0b\u53d8\u5f97\u8f7b\u677e\uff0c\u6211\u4eec\u8ba1\u5212\u5728\u672a\u6765\u4e3a\u9000\u5f79broker\u6dfb\u52a0\u5de5\u5177\u652f\u6301\u3002 \u589e\u52a0\u590d\u5236\u56e0\u5b50 \u589e\u52a0\u73b0\u6709\u5206\u533a\u7684\u590d\u5236\u56e0\u5b50\u5f88\u5bb9\u6613\u3002\u53ea\u9700\u5728\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d json \u6587\u4ef6\u4e2d\u6307\u5b9a\u989d\u5916\u7684\u526f\u672c\uff0c\u5e76\u5c06\u5176\u4e0e --execute \u9009\u9879\u4e00\u8d77\u4f7f\u7528\u5373\u53ef\u589e\u52a0\u6307\u5b9a\u5206\u533a\u7684\u590d\u5236\u56e0\u5b50\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u793a\u4f8b\u5c06\u4e3b\u9898 foo \u7684\u5206\u533a 0 \u7684\u590d\u5236\u56e0\u5b50\u4ece 1 \u589e\u52a0\u5230 3\u3002\u5728\u589e\u52a0\u590d\u5236\u56e0\u5b50\u4e4b\u524d\uff0c\u8be5\u5206\u533a\u7684\u552f\u4e00\u526f\u672c\u5b58\u5728\u4e8e\u4ee3\u7406 5 \u4e0a\u3002\u4f5c\u4e3a\u589e\u52a0\u590d\u5236\u56e0\u5b50\u7684\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u5728\u4ee3\u7406 5 \u4e0a\u6dfb\u52a0\u66f4\u591a\u526f\u672cbroker 6 \u548c 7\u3002 \u7b2c\u4e00\u6b65\u662f\u5728 json \u6587\u4ef6\u4e2d\u624b\u5de5\u5236\u5b9a\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff1a > cat increase-replication-factor.json {\"version\":1, \"partitions\":[{\"topic\":\"foo\",\"partition\":0,\"replicas\":[5,6,7]}]} \u7136\u540e\uff0c\u4f7f\u7528\u5e26\u6709 --execute \u9009\u9879\u7684 json \u6587\u4ef6\u6765\u542f\u52a8\u91cd\u65b0\u5206\u914d\u8fc7\u7a0b\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file increase-replication-factor.json --execute Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo\",\"partition\":0,\"replicas\":[5]}]} Save this to use as the --reassignment-json-file option during rollback Successfully started partition reassignment for foo-0 --verify \u9009\u9879\u53ef\u4ee5\u4e0e\u8be5\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\u6765\u68c0\u67e5\u5206\u533a\u91cd\u65b0\u5206\u914d\u7684\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u76f8\u540c\u7684increase-replication-factor.json\uff08\u4e0e--execute\u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff09\u5e94\u4e0e--verify\u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file increase-replication-factor.json --verify Status of partition reassignment: Reassignment of partition [foo,0] is completed \u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528 kafka-topics \u5de5\u5177\u9a8c\u8bc1\u590d\u5236\u56e0\u5b50\u7684\u589e\u52a0\uff1a > bin/kafka-topics.sh --bootstrap-server localhost:9092 --topic foo --describe Topic:foo PartitionCount:1 ReplicationFactor:3 Configs: Topic: foo Partition: 0 Leader: 5 Replicas: 5,6,7 Isr: 5,6,7 \u9650\u5236\u6570\u636e\u8fc1\u79fb\u671f\u95f4\u7684\u5e26\u5bbd\u4f7f\u7528 Kafka \u5141\u8bb8\u60a8\u5bf9\u590d\u5236\u6d41\u91cf\u8fdb\u884c\u9650\u5236\uff0c\u8bbe\u7f6e\u7528\u4e8e\u5728\u673a\u5668\u4e4b\u95f4\u79fb\u52a8\u526f\u672c\u7684\u5e26\u5bbd\u4e0a\u9650\u3002\u8fd9\u5728\u91cd\u65b0\u5e73\u8861\u96c6\u7fa4\u3001\u5f15\u5bfc\u65b0\u4ee3\u7406\u6216\u6dfb\u52a0\u6216\u5220\u9664\u4ee3\u7406\u65f6\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u9650\u5236\u4e86\u8fd9\u4e9b\u6570\u636e\u5bc6\u96c6\u578b\u64cd\u4f5c\u5bf9\u7528\u6237\u4ea7\u751f\u7684\u5f71\u54cd\u3002 \u6709\u4e24\u4e2a\u63a5\u53e3\u53ef\u7528\u4e8e\u63a5\u5408\u6cb9\u95e8\u3002\u6700\u7b80\u5355\u3001\u6700\u5b89\u5168\u7684\u65b9\u6cd5\u662f\u5728\u8c03\u7528 kafka-reassign-partitions.sh \u65f6\u5e94\u7528\u9650\u5236\uff0c\u4f46 kafka-configs.sh \u4e5f\u53ef\u7528\u4e8e\u76f4\u63a5\u67e5\u770b\u548c\u66f4\u6539\u9650\u5236\u503c\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u8981\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6267\u884c\u91cd\u65b0\u5e73\u8861\uff0c\u5b83\u5c06\u4ee5\u4e0d\u8d85\u8fc7 50MB/s \u7684\u901f\u5ea6\u79fb\u52a8\u5206\u533a\u3002 $ bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --execute --reassignment-json-file big-cluster.json --throttle 50000000 \u5f53\u60a8\u6267\u884c\u6b64\u811a\u672c\u65f6\uff0c\u60a8\u5c06\u770b\u5230\u6cb9\u95e8\u63a5\u5408\uff1a The inter-broker throttle limit was set to 50000000 B/s Successfully started partition reassignment for foo1-0 \u5982\u679c\u60a8\u5e0c\u671b\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u6539\u53d8\u6cb9\u95e8\uff0c\u4f8b\u5982\u589e\u52a0\u541e\u5410\u91cf\uff0c\u4ee5\u4fbf\u66f4\u5feb\u5730\u5b8c\u6210\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4f20\u9012\u76f8\u540c\u7684\u91cd\u65b0\u5206\u914d json \u6587\u4ef6\u7684 --additional \u9009\u9879\u91cd\u65b0\u8fd0\u884c\u6267\u884c\u547d\u4ee4\u6765\u5b8c\u6210\u6b64\u64cd\u4f5c\uff1a $ bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --additional --execute --reassignment-json-file bigger-cluster.json --throttle 700000000 The inter-broker throttle limit was set to 700000000 B/s \u91cd\u65b0\u5e73\u8861\u5b8c\u6210\u540e\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u4f7f\u7528 --verify \u9009\u9879\u68c0\u67e5\u91cd\u65b0\u5e73\u8861\u7684\u72b6\u6001\u3002\u5982\u679c\u91cd\u65b0\u5e73\u8861\u5df2\u5b8c\u6210\uff0c\u5219\u5c06\u901a\u8fc7 --verify \u547d\u4ee4\u5220\u9664\u9650\u5236\u3002\u91cd\u8981\u7684\u662f\uff0c\u7ba1\u7406\u5458\u901a\u8fc7\u8fd0\u884c\u5e26\u6709 --verify \u9009\u9879\u7684\u547d\u4ee4\uff0c\u5728\u91cd\u65b0\u5e73\u8861\u5b8c\u6210\u540e\u53ca\u65f6\u53d6\u6d88\u9650\u5236\u3002\u5982\u679c\u4e0d\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e38\u89c4\u590d\u5236\u6d41\u91cf\u53d7\u5230\u9650\u5236\u3002 \u5f53\u6267\u884c --verify \u9009\u9879\u5e76\u4e14\u91cd\u65b0\u5206\u914d\u5b8c\u6210\u65f6\uff0c\u811a\u672c\u5c06\u786e\u8ba4\u9650\u5236\u5df2\u88ab\u5220\u9664\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --verify --reassignment-json-file bigger-cluster.json Status of partition reassignment: Reassignment of partition [my-topic,1] is completed Reassignment of partition [my-topic,0] is completed Clearing broker-level throttles on brokers 1,2,3 Clearing topic-level throttles on topic my-topic \u7ba1\u7406\u5458\u8fd8\u53ef\u4ee5\u4f7f\u7528 kafka-configs.sh \u9a8c\u8bc1\u5206\u914d\u7684\u914d\u7f6e\u3002\u6709\u4e24\u5bf9\u8282\u6d41\u914d\u7f6e\u7528\u4e8e\u7ba1\u7406\u8282\u6d41\u8fc7\u7a0b\u3002\u7b2c\u4e00\u5bf9\u6307\u6cb9\u95e8\u503c\u672c\u8eab\u3002\u8fd9\u662f\u5728\u4ee3\u7406\u7ea7\u522b\u4f7f\u7528\u52a8\u6001\u5c5e\u6027\u8fdb\u884c\u914d\u7f6e\u7684\uff1a leader.replication.throttled.rate follower.replication.throttled.rate \u7136\u540e\u662f\u9650\u5236\u526f\u672c\u7684\u679a\u4e3e\u96c6\u7684\u914d\u7f6e\u5bf9\uff1a leader.replication.throttled.replicas follower.replication.throttled.replicas \u54ea\u4e9b\u662f\u6309\u4e3b\u9898\u914d\u7f6e\u7684\u3002 \u6240\u6709\u56db\u4e2a\u914d\u7f6e\u503c\u5747\u7531 kafka-reassign-partitions.sh \u81ea\u52a8\u5206\u914d\uff08\u5982\u4e0b\u6240\u8ff0\uff09\u3002 \u67e5\u770b\u6cb9\u95e8\u9650\u5236\u914d\u7f6e\uff1a > bin/kafka-configs.sh --describe --bootstrap-server localhost:9092 --entity-type brokers Configs for brokers '2' are leader.replication.throttled.rate=700000000,follower.replication.throttled.rate=700000000 Configs for brokers '1' are leader.replication.throttled.rate=700000000,follower.replication.throttled.rate=700000000 \u8fd9\u663e\u793a\u4e86\u5e94\u7528\u4e8e\u590d\u5236\u534f\u8bae\u7684\u9886\u5bfc\u8005\u548c\u8ddf\u968f\u8005\u7aef\u7684\u9650\u5236\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53cc\u65b9\u90fd\u5206\u914d\u6709\u76f8\u540c\u7684\u9650\u5236\u541e\u5410\u91cf\u503c\u3002 \u8981\u67e5\u770b\u53d7\u9650\u5236\u7684\u526f\u672c\u5217\u8868\uff1a > bin/kafka-configs.sh --describe --bootstrap-server localhost:9092 --entity-type topics Configs for topic 'my-topic' are leader.replication.throttled.replicas=1:102,0:101, follower.replication.throttled.replicas=1:101,0:102 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u770b\u5230\u9886\u5bfc\u8005\u8282\u6d41\u5e94\u7528\u4e8e\u4ee3\u7406 102 \u4e0a\u7684\u5206\u533a 1 \u548c\u4ee3\u7406 101 \u4e0a\u7684\u5206\u533a 0\u3002\u540c\u6837\uff0c\u8ffd\u968f\u8005\u8282\u6d41\u5e94\u7528\u4e8e\u4ee3\u7406 101 \u4e0a\u7684\u5206\u533a 1 \u548c\u4ee3\u7406 102 \u4e0a\u7684\u5206\u533a 0\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ckafka-reassign-partitions.sh \u4f1a\u5c06\u9886\u5bfc\u8005\u9650\u5236\u5e94\u7528\u4e8e\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u5b58\u5728\u7684\u6240\u6709\u526f\u672c\uff0c\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u90fd\u53ef\u80fd\u662f\u9886\u5bfc\u8005\u3002\u5b83\u5c06\u5bf9\u6240\u6709\u79fb\u52a8\u76ee\u7684\u5730\u5e94\u7528\u8ddf\u968f\u6cb9\u95e8\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4ee3\u7406 101,102 \u4e0a\u6709\u4e00\u4e2a\u5177\u6709\u526f\u672c\u7684\u5206\u533a\uff0c\u88ab\u91cd\u65b0\u5206\u914d\u7ed9 102,103\uff0c\u5219\u8be5\u5206\u533a\u7684\u9886\u5bfc\u8005\u9650\u5236\u5c06\u5e94\u7528\u4e8e 101,102\uff0c\u8ffd\u968f\u8005\u9650\u5236\u5c06\u4ec5\u5e94\u7528\u4e8e 103\u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528 kafka-configs.sh \u4e0a\u7684 --alter \u5f00\u5173\u624b\u52a8\u66f4\u6539\u8282\u6d41\u914d\u7f6e\u3002 \u5b89\u5168\u4f7f\u7528\u9650\u5236\u590d\u5236 \u4f7f\u7528\u9650\u5236\u590d\u5236\u65f6\u5e94\u5c0f\u5fc3\u3002\u5c24\u5176\uff1a (1) Throttle Removal: \u91cd\u65b0\u5206\u914d\u5b8c\u6210\u540e\u5e94\u53ca\u65f6\u79fb\u9664\u9650\u5236\uff08\u901a\u8fc7\u8fd0\u884c kafka-reassign-partitions.sh --verify \uff09\u3002 (2) Ensuring Progress: \u5982\u679c\u4e0e\u4f20\u5165\u5199\u5165\u901f\u7387\u76f8\u6bd4\uff0c\u9650\u5236\u8bbe\u7f6e\u5f97\u592a\u4f4e\uff0c\u590d\u5236\u53ef\u80fd\u65e0\u6cd5\u53d6\u5f97\u8fdb\u5c55\u3002\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u65f6\uff1a max(BytesInPerSec) > throttle \u5176\u4e2d BytesInPerSec \u662f\u76d1\u63a7\u751f\u4ea7\u8005\u5199\u5165\u6bcf\u4e2a\u4ee3\u7406\u7684\u541e\u5410\u91cf\u7684\u6307\u6807\u3002 \u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u4f7f\u7528\u4ee5\u4e0b\u6307\u6807\u76d1\u63a7\u590d\u5236\u662f\u5426\u53d6\u5f97\u8fdb\u5c55\uff1a kafka.server:type=FetcherLagMetrics,name=ConsumerLag,clientId=([-.\\w]+),topic=([-.\\w]+),partition=([0-9]+) \u590d\u5236\u8fc7\u7a0b\u4e2d\u6ede\u540e\u5e94\u8be5\u4e0d\u65ad\u51cf\u5c11\u3002\u5982\u679c\u6307\u6807\u6ca1\u6709\u51cf\u5c11\uff0c\u7ba1\u7406\u5458\u5e94\u5982\u4e0a\u6240\u8ff0\u589e\u52a0\u9650\u5236\u541e\u5410\u91cf\u3002 \u8bbe\u7f6e\u914d\u989d \u914d\u989d\u8986\u76d6\u548c\u9ed8\u8ba4\u503c\u53ef\u4ee5\u5728\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ea7\u522b\u8fdb\u884c\u914d\u7f6e\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u7aef\u83b7\u5f97\u65e0\u9650\u914d\u989d\u3002\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ec4\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\u3002 \u914d\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\uff08user=user1\uff0cclient-id=clientA\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-name user1 --entity-type clients --entity-name clientA Updated config for entity: user-principal 'user1', client-id 'clientA'. \u4e3a user=user1 \u914d\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-name user1 Updated config for entity: user-principal 'user1'. \u4e3a client-id=clientA \u914d\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type clients --entity-name clientA Updated config for entity: client-id 'clientA'. \u901a\u8fc7\u6307\u5b9a --entity-default \u9009\u9879\u800c\u4e0d\u662f --entity-name \uff0c \u53ef\u4ee5\u4e3a\u6bcf\u4e2a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ec4\u8bbe\u7f6e \u9ed8\u8ba4 \u914d\u989d\u3002 \u4e3a user=userA \u914d\u7f6e\u9ed8\u8ba4 client-id \u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-name user1 --entity-type clients --entity-default Updated config for entity: user-principal 'user1', default client-id. \u4e3a\u7528\u6237\u914d\u7f6e\u9ed8\u8ba4\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-default Updated config for entity: default user-principal. \u914d\u7f6e client-id \u7684\u9ed8\u8ba4\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type clients --entity-default Updated config for entity: default client-id. \u4ee5\u4e0b\u662f\u63cf\u8ff0\u7ed9\u5b9a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u7684\u914d\u989d\u7684\u65b9\u6cd5\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-name user1 --entity-type clients --entity-name clientA Configs for user-principal 'user1', client-id 'clientA' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u63cf\u8ff0\u7ed9\u5b9a\u7528\u6237\u7684\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-name user1 Configs for user-principal 'user1' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u63cf\u8ff0\u7ed9\u5b9a\u5ba2\u6237\u7aef ID \u7684\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type clients --entity-name clientA Configs for client-id 'clientA' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u5982\u679c\u672a\u6307\u5b9a\u5b9e\u4f53\u540d\u79f0\uff0c\u5219\u63cf\u8ff0\u6307\u5b9a\u7c7b\u578b\u7684\u6240\u6709\u5b9e\u4f53\u3002\u4f8b\u5982\uff0c\u63cf\u8ff0\u6240\u6709\u7528\u6237\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users Configs for user-principal 'user1' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 Configs for default user-principal are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u7c7b\u4f3c\u5730\u5bf9\u4e8e\uff08\u7528\u6237\uff0c\u5ba2\u6237\u7aef\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-type clients Configs for user-principal 'user1', default client-id are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 Configs for user-principal 'user1', client-id 'clientA' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 6.2 \u6570\u636e\u4e2d\u5fc3 \u67d0\u4e9b\u90e8\u7f72\u9700\u8981\u7ba1\u7406\u8de8\u8d8a\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3\u7684\u6570\u636e\u7ba1\u9053\u3002\u6211\u4eec\u63a8\u8350\u7684\u65b9\u6cd5\u662f\u5728\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u90e8\u7f72\u4e00\u4e2a\u672c\u5730 Kafka \u96c6\u7fa4\uff0c\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ec5\u4e0e\u5176\u672c\u5730\u96c6\u7fa4\u4ea4\u4e92\u5e76\u5728\u96c6\u7fa4\u4e4b\u95f4\u955c\u50cf\u6570\u636e\uff08\u6709\u5173\u5982\u4f55\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5f02\u5730\u590d\u5236 \u6587\u6863\uff09\u3002 \u8fd9\u79cd\u90e8\u7f72\u6a21\u5f0f\u5141\u8bb8\u6570\u636e\u4e2d\u5fc3\u5145\u5f53\u72ec\u7acb\u5b9e\u4f53\uff0c\u5e76\u5141\u8bb8\u6211\u4eec\u96c6\u4e2d\u7ba1\u7406\u548c\u8c03\u6574\u6570\u636e\u4e2d\u5fc3\u95f4\u7684\u590d\u5236\u3002\u5373\u4f7f\u6570\u636e\u4e2d\u5fc3\u95f4\u94fe\u8def\u4e0d\u53ef\u7528\uff0c\u8fd9\u4e5f\u5141\u8bb8\u6bcf\u4e2a\u8bbe\u65bd\u72ec\u7acb\u8fd0\u884c\uff1a\u5f53\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u65f6\uff0c\u955c\u50cf\u4f1a\u843d\u540e\uff0c\u76f4\u5230\u94fe\u8def\u6062\u590d\uff0c\u6b64\u65f6\u5b83\u4f1a\u8d76\u4e0a\u3002 \u5bf9\u4e8e\u9700\u8981\u6240\u6709\u6570\u636e\u7684\u5168\u5c40\u89c6\u56fe\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u955c\u50cf\u6765\u63d0\u4f9b\u5177\u6709\u4ece\u6240\u6709 \u6570\u636e \u4e2d\u5fc3\u7684\u672c\u5730\u96c6\u7fa4\u955c\u50cf\u7684\u805a\u5408\u6570\u636e\u7684\u96c6\u7fa4\u3002\u8fd9\u4e9b\u805a\u5408\u96c6\u7fa4\u7528\u4e8e\u7531\u9700\u8981\u5b8c\u6574\u6570\u636e\u96c6\u7684\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u8bfb\u53d6\u3002 \u8fd9\u4e0d\u662f\u552f\u4e00\u53ef\u80fd\u7684\u90e8\u7f72\u6a21\u5f0f\u3002\u53ef\u4ee5\u901a\u8fc7 WAN \u8bfb\u53d6\u6216\u5199\u5165\u8fdc\u7a0b Kafka \u96c6\u7fa4\uff0c\u4f46\u663e\u7136\u8fd9\u4f1a\u589e\u52a0\u83b7\u53d6\u96c6\u7fa4\u6240\u9700\u7684\u5ef6\u8fdf\u3002 Kafka \u81ea\u7136\u5730\u5728\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4e2d\u5bf9\u6570\u636e\u8fdb\u884c\u6279\u5904\u7406\uff0c\u56e0\u6b64\u5373\u4f7f\u5728\u9ad8\u5ef6\u8fdf\u8fde\u63a5\u4e0b\u4e5f\u80fd\u5b9e\u73b0\u9ad8\u541e\u5410\u91cf\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528 socket.send.buffer.bytes \u548c socket.receive.buffer.bytes \u914d\u7f6e\u6765\u589e\u52a0\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u4ee3\u7406\u7684 TCP \u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f\u3002 \u6b64\u5904 \u8bb0\u5f55\u4e86\u8bbe\u7f6e\u6b64\u503c\u7684\u9002\u5f53\u65b9\u6cd5\u3002 \u901a\u5e38 \u4e0d \u5efa\u8bae\u901a\u8fc7\u9ad8\u5ef6\u8fdf\u94fe\u8def\u8fd0\u884c\u8de8\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3\u7684 \u5355\u4e2aKafka \u96c6\u7fa4\u3002 \u8fd9\u5c06\u5bfc\u81f4 Kafka \u5199\u5165\u548c ZooKeeper \u5199\u5165\u4ea7\u751f\u975e\u5e38\u9ad8\u7684\u590d\u5236\u5ef6\u8fdf\uff0c\u5e76\u4e14\u5982\u679c\u4f4d\u7f6e\u4e4b\u95f4\u7684\u7f51\u7edc\u4e0d\u53ef\u7528\uff0cKafka \u548c ZooKeeper \u90fd\u4e0d\u4f1a\u5728\u6240\u6709\u4f4d\u7f6e\u4fdd\u6301\u53ef\u7528\u3002 6.3 \u5f02\u5730\u590d\u5236\uff08\u8de8\u96c6\u7fa4\u6570\u636e\u955c\u50cf\uff09 \u5f02\u5730\u590d\u5236\u6982\u8ff0 Kafka \u7ba1\u7406\u5458\u53ef\u4ee5\u5b9a\u4e49\u8de8\u8d8a\u5404\u4e2a Kafka \u96c6\u7fa4\u3001\u6570\u636e\u4e2d\u5fc3\u6216\u5730\u7406\u533a\u57df\u8fb9\u754c\u7684\u6570\u636e\u6d41\u3002\u7ec4\u7ec7\u3001\u6280\u672f\u6216\u6cd5\u5f8b\u8981\u6c42\u901a\u5e38\u9700\u8981\u6b64\u7c7b\u4e8b\u4ef6\u6d41\u8bbe\u7f6e\u3002\u5e38\u89c1\u573a\u666f\u5305\u62ec\uff1a \u5f02\u5730\u590d\u5236 \u707e\u96be\u6062\u590d \u5c06\u8fb9\u7f18\u96c6\u7fa4\u9988\u9001\u5230\u4e2d\u592e\u805a\u5408\u96c6\u7fa4 \u96c6\u7fa4\u7684\u7269\u7406\u9694\u79bb\uff08\u4f8b\u5982\u751f\u4ea7\u4e0e\u6d4b\u8bd5\uff09 \u4e91\u8fc1\u79fb\u6216\u6df7\u5408\u4e91\u90e8\u7f72 \u6cd5\u5f8b\u548c\u5408\u89c4\u8981\u6c42 \u7ba1\u7406\u5458\u53ef\u4ee5\u4f7f\u7528 Kafka \u7684 MirrorMaker\uff08\u7248\u672c 2\uff09\u8bbe\u7f6e\u6b64\u7c7b\u96c6\u7fa4\u95f4\u6570\u636e\u6d41\uff0c\u8fd9\u662f\u4e00\u79cd\u4ee5\u6d41\u5f0f\u4f20\u8f93\u65b9\u5f0f\u5728\u4e0d\u540c Kafka \u73af\u5883\u4e4b\u95f4\u590d\u5236\u6570\u636e\u7684\u5de5\u5177\u3002MirrorMaker \u6784\u5efa\u5728 Kafka Connect \u6846\u67b6\u4e4b\u4e0a\uff0c\u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a \u590d\u5236\u4e3b\u9898\uff08\u6570\u636e\u52a0\u914d\u7f6e\uff09 \u590d\u5236\u6d88\u8d39\u8005\u7ec4\uff0c\u5305\u62ec\u5728\u96c6\u7fa4\u4e4b\u95f4\u8fc1\u79fb\u5e94\u7528\u7a0b\u5e8f\u7684\u504f\u79fb\u91cf \u590d\u5236 ACL \u4fdd\u7559\u5206\u533a \u81ea\u52a8\u68c0\u6d4b\u65b0\u4e3b\u9898\u548c\u5206\u533a \u63d0\u4f9b\u5e7f\u6cdb\u7684\u6307\u6807\uff0c\u4f8b\u5982\u8de8\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3/\u96c6\u7fa4\u7684\u7aef\u5230\u7aef\u590d\u5236\u5ef6\u8fdf \u5bb9\u9519\u548c\u6c34\u5e73\u53ef\u6269\u5c55\u7684\u64cd\u4f5c \u6ce8\u610f\uff1a\u4f7f\u7528 MirrorMaker \u8fdb\u884c\u5f02\u5730\u590d\u5236\u53ef\u8de8 Kafka \u96c6\u7fa4\u590d\u5236\u6570\u636e\u3002 \u8fd9\u79cd\u96c6\u7fa4\u95f4\u590d\u5236\u4e0e Kafka \u7684\u96c6\u7fa4\u5185\u590d\u5236 \u4e0d\u540c\uff0c\u540e\u8005\u5728\u540c\u4e00\u4e2a Kafka \u96c6\u7fa4\u5185\u590d\u5236\u6570\u636e\u3002 \u4ec0\u4e48\u662f\u590d\u5236\u6d41 \u501f\u52a9 MirrorMaker\uff0cKafka \u7ba1\u7406\u5458\u53ef\u4ee5\u5c06\u4e3b\u9898\u3001\u4e3b\u9898\u914d\u7f6e\u3001\u6d88\u8d39\u8005\u7ec4\u53ca\u5176\u504f\u79fb\u91cf\u4ee5\u53ca ACL \u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90 Kafka \u96c6\u7fa4\u590d\u5236\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u6807 Kafka \u96c6\u7fa4\uff0c\u5373\u8de8\u96c6\u7fa4\u73af\u5883\u3002\u7b80\u800c\u8a00\u4e4b\uff0cMirrorMaker \u4f7f\u7528\u8fde\u63a5\u5668\u4ece\u6e90\u96c6\u7fa4\u8fdb\u884c\u6d88\u8d39\u5e76\u751f\u4ea7\u5230\u76ee\u6807\u96c6\u7fa4\u3002 \u8fd9\u4e9b\u4ece\u6e90\u96c6\u7fa4\u5230\u76ee\u6807\u96c6\u7fa4\u7684\u5b9a\u5411\u6d41\u79f0\u4e3a\u590d\u5236\u6d41\u3002\u5b83\u4eec\u662f\u4f7f\u7528 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u683c\u5f0f\u5b9a\u4e49\u7684\uff0c {source_cluster}->{target_cluster} \u5982\u4e0b\u6240\u8ff0\u3002\u7ba1\u7406\u5458\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u6d41\u7a0b\u521b\u5efa\u590d\u6742\u7684\u590d\u5236\u62d3\u6251\u3002 \u4ee5\u4e0b\u662f\u4e00\u4e9b\u793a\u4f8b\u6a21\u5f0f\uff1a \u4e3b\u52a8/\u4e3b\u52a8\u9ad8\u53ef\u7528\u6027\u90e8\u7f72\uff1a A->B, B->A \u4e3b\u52a8/\u88ab\u52a8\u6216\u4e3b\u52a8/\u5907\u7528\u9ad8\u53ef\u7528\u6027\u90e8\u7f72\uff1a A->B \u805a\u5408\uff08\u4f8b\u5982\uff0c\u4ece\u591a\u4e2a\u96c6\u7fa4\u5230\u4e00\u4e2a\u96c6\u7fa4\uff09\uff1a A->K, B->K, C->K \u6247\u51fa\uff08\u4f8b\u5982\uff0c\u4ece\u4e00\u4e2a\u96c6\u7fa4\u5230\u591a\u4e2a\u96c6\u7fa4\uff09\uff1a K->A, K->B, K->C \u8f6c\u53d1\uff1a A->B, B->C, C->D \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6d41\u4f1a\u590d\u5236\u6240\u6709\u4e3b\u9898\u548c\u6d88\u8d39\u8005\u7ec4\u3002\u4f46\u662f\uff0c\u6bcf\u4e2a\u590d\u5236\u6d41\u90fd\u53ef\u4ee5\u72ec\u7acb\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u4ec5\u5c06\u7279\u5b9a\u4e3b\u9898\u6216\u6d88\u8d39\u8005\u7ec4\u4ece\u6e90\u96c6\u7fa4\u590d\u5236\u5230\u76ee\u6807\u96c6\u7fa4\u3002 \u4ee5\u4e0b\u662f\u6709\u5173\u5982\u4f55\u914d\u7f6e\u4ece primary \u96c6\u7fa4\u5230 secondary \u96c6\u7fa4\u7684\u6570\u636e\u590d\u5236\uff08\u4e3b\u52a8/\u88ab\u52a8\u8bbe\u7f6e\uff09\u7684\u7b2c\u4e00\u4e2a\u793a\u4f8b\uff1a # Basic settings clusters = primary, secondary primary.bootstrap.servers = broker3-primary:9092 secondary.bootstrap.servers = broker5-secondary:9092 # Define replication flows primary->secondary.enabled = true primary->secondary.topics = foobar-topic, quux-.* \u914d\u7f6e\u5f02\u5730\u590d\u5236 \u4ee5\u4e0b\u90e8\u5206\u4ecb\u7ecd\u5982\u4f55\u914d\u7f6e\u548c\u8fd0\u884c\u4e13\u7528 MirrorMaker \u96c6\u7fa4\u3002\u5982\u679c\u60a8\u60f3\u5728\u73b0\u6709 Kafka Connect \u96c6\u7fa4\u6216\u5176\u4ed6\u652f\u6301\u7684\u90e8\u7f72\u8bbe\u7f6e\u4e2d\u8fd0\u884c MirrorMaker\uff0c\u8bf7\u53c2\u9605 KIP-382\uff1aMirrorMaker 2.0 \uff0c\u5e76\u6ce8\u610f\u914d\u7f6e\u8bbe\u7f6e\u7684\u540d\u79f0\u53ef\u80fd\u56e0\u90e8\u7f72\u6a21\u5f0f\u800c\u5f02\u3002 \u9664\u4e86\u4ee5\u4e0b\u90e8\u5206\u4e2d\u4ecb\u7ecd\u7684\u5185\u5bb9\u4e4b\u5916\uff0c\u6709\u5173\u914d\u7f6e\u8bbe\u7f6e\u7684\u66f4\u591a\u793a\u4f8b\u548c\u4fe1\u606f\u53ef\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u627e\u5230\uff1a MirrorMakerConfig , MirrorConnectorConfig DefaultTopicFilter \u7528\u4e8e\u4e3b\u9898\uff0c DefaultGroupFilter \u7528\u4e8e\u6d88\u8d39\u8005\u7ec4 connect-mirror-maker.properties \u4e2d\u7684\u914d\u7f6e\u8bbe\u7f6e\u793a\u4f8b\uff0c KIP-382\uff1aMirrorMaker 2.0 \u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u547d\u540d\u4e3a connect-mirror-maker.properties . \u60a8\u53ef\u4ee5\u5728\u6b64\u6587\u4ef6\u4e2d\u914d\u7f6e\u5404\u79cd\u7ec4\u4ef6\uff1a MirrorMaker \u8bbe\u7f6e\uff1a\u5168\u5c40\u8bbe\u7f6e\uff0c\u5305\u62ec\u96c6\u7fa4\u5b9a\u4e49\uff08\u522b\u540d\uff09\u4ee5\u53ca\u6bcf\u4e2a\u590d\u5236\u6d41\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e Kafka Connect \u548c\u8fde\u63a5\u5668\u8bbe\u7f6e Kafka \u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u7ba1\u7406\u5ba2\u6237\u7aef\u8bbe\u7f6e \u793a\u4f8b\uff1a\u5b9a\u4e49 MirrorMaker \u8bbe\u7f6e\uff08\u7a0d\u540e\u8be6\u7ec6\u8bf4\u660e\uff09\u3002 # Global settings clusters = us-west, us-east # defines cluster aliases us-west.bootstrap.servers = broker3-west:9092 us-east.bootstrap.servers = broker5-east:9092 topics = .* # all topics to be replicated by default # Specific replication flow settings (here: flow from us-west to us-east) us-west->us-east.enabled = true us-west->us.east.topics = foo.*, bar.* # override the default above MirrorMaker \u57fa\u4e8e Kafka Connect \u6846\u67b6\u3002 Kafka Connect \u6587\u6863\u7ae0\u8282 \u4e2d\u63cf\u8ff0\u7684\u4efb\u4f55 Kafka Connect\u3001\u6e90\u8fde\u63a5\u5668\u548c\u63a5\u6536\u5668\u8fde\u63a5\u5668\u8bbe\u7f6e\u90fd\u53ef\u4ee5\u76f4\u63a5\u5728 MirrorMaker \u914d\u7f6e\u4e2d\u4f7f\u7528\uff0c\u800c\u65e0\u9700\u66f4\u6539\u914d\u7f6e\u8bbe\u7f6e\u7684\u540d\u79f0\u6216\u4e3a\u5176\u6dfb\u52a0\u524d\u7f00\u3002 \u793a\u4f8b\uff1a\u5b9a\u4e49 MirrorMaker \u4f7f\u7528\u7684\u81ea\u5b9a\u4e49 Kafka Connect \u8bbe\u7f6e\u3002 # Setting Kafka Connect defaults for MirrorMaker tasks.max = 5 \u5927\u591a\u6570\u9ed8\u8ba4\u7684 Kafka Connect \u8bbe\u7f6e\u5bf9\u4e8e\u5f00\u7bb1\u5373\u7528\u7684 MirrorMaker \u90fd\u80fd\u5f88\u597d\u5730\u5de5\u4f5c\uff0c\u4f46 tasks.max . \u4e3a\u4e86\u5728\u591a\u4e2a MirrorMaker \u8fdb\u7a0b\u4e4b\u95f4\u5747\u5300\u5206\u914d\u5de5\u4f5c\u8d1f\u8f7d\uff0c\u5efa\u8bae\u6839\u636e\u53ef\u7528\u786c\u4ef6\u8d44\u6e90\u548c\u8981\u590d\u5236\u7684\u4e3b\u9898\u5206\u533a\u603b\u6570 \u8bbe\u7f6e tasks.max \u4e3a\u81f3\u5c11\uff08\u6700\u597d\u66f4\u9ad8\uff09\u3002 2 \u60a8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49\u6bcf\u4e2a\u6e90\u6216\u76ee\u6807\u96c6\u7fa4 \u7684 MirrorMaker \u7684 Kafka Connect \u8bbe\u7f6e\uff08\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u60a8\u53ef\u4ee5\u201c\u6bcf\u4e2a\u8fde\u63a5\u5668\u201d\u6307\u5b9a Kafka Connect \u5de5\u4f5c\u7ebf\u7a0b\u7ea7\u522b\u7684\u914d\u7f6e\u8bbe\u7f6e\uff09\u3002 {cluster}.{config_name} \u4f7f\u7528MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d \u7684\u683c\u5f0f\u3002 \u793a\u4f8b\uff1a\u4e3a us-west \u96c6\u7fa4\u5b9a\u4e49\u81ea\u5b9a\u4e49\u8fde\u63a5\u5668\u8bbe\u7f6e\u3002 # us-west custom settings us-west.offset.storage.topic = my-mirrormaker-offsets MirrorMaker \u5185\u90e8\u4f7f\u7528 Kafka \u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u7ba1\u7406\u5ba2\u6237\u7aef\u3002\u901a\u5e38\u9700\u8981\u4e3a\u8fd9\u4e9b\u5ba2\u6237\u7aef\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u3002\u8981\u8986\u76d6\u9ed8\u8ba4\u503c\uff0c\u8bf7\u5728 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a {source}.consumer.{consumer_config_name} {target}.producer.{producer_config_name} {source_or_target}.admin.{admin_config_name} \u793a\u4f8b\uff1a\u5b9a\u4e49\u81ea\u5b9a\u4e49\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u3001\u7ba1\u7406\u5ba2\u6237\u7aef\u8bbe\u7f6e\u3002 # us-west cluster (from which to consume) us-west.consumer.isolation.level = read_committed us-west.admin.bootstrap.servers = broker57-primary:9092 # us-east cluster (to which to produce) us-east.producer.compression.type = gzip us-east.producer.buffer.memory = 32768 us-east.admin.bootstrap.servers = broker8-secondary:9092 Exactly once \u4ece3.5.0\u7248\u672c\u5f00\u59cb\uff0c\u4e13\u7528\u7684MirrorMaker\u96c6\u7fa4\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\u3002 \u5bf9\u4e8e\u65b0\u7684MirrorMaker\u96c6\u7fa4\uff0c\u5c06 exactly.once.source.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u542f\u7528\u6240\u6709\u76ee\u6807Kafka\u96c6\u7fa4\uff0c\u8fd9\u4e9b\u96c6\u7fa4\u5e94\u8be5\u4f7f\u7528\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\u5199\u5165\u3002\u4f8b\u5982\uff0c\u8981\u4e3a\u96c6\u7fa4us-east\u7684\u5199\u5165\u542f\u7528\u7cbe\u786e\u4e00\u6b21\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\uff1a us-east.exactly.once.source.support = enabled \u5bf9\u4e8e\u73b0\u6709\u7684MirrorMaker\u96c6\u7fa4\uff0c\u9700\u8981\u4e24\u6b65\u5347\u7ea7\u3002\u4e0e\u5176\u7acb\u5373\u5c06theexactly exactly.once.source.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u542f\u7528\uff0c\u4e0d\u5982\u9996\u5148\u5c06\u5176\u8bbe\u7f6e\u4e3a\u5728\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u4e0a preparing \u3002\u4e00\u65e6\u5b8c\u6210\uff0c\u53ef\u4ee5\u5728\u7b2c\u4e8c\u8f6e\u91cd\u65b0\u542f\u52a8\u4e2d\u5c06\u5176\u8bbe\u7f6e\u4e3a\u5728\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u4e0a\u542f\u7528\u3002 \u65e0\u8bba\u54ea\u79cd\u60c5\u51b5\uff0c\u90fd\u9700\u8981\u542f\u7528MirrorMaker\u8282\u70b9\u4e4b\u95f4\u7684\u96c6\u7fa4\u5185\u901a\u4fe1\uff0c\u5982 KIP-710 \u6240\u8ff0\u3002\u4e3a\u6b64\uff0c dedicated.mode.enable.internal.rest \u5c5e\u6027\u5fc5\u987b\u8bbe\u7f6e\u4e3a true \u3002\u6b64\u5916\uff0c \u53ef\u7528\u4e8eKafka Connect \u7684\u8bb8\u591aREST\u76f8\u5173 \u914d\u7f6e\u5c5e\u6027 \u53ef\u4ee5\u6307\u5b9aMirrorMaker\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u8981\u542f\u7528MirrorMaker\u96c6\u7fa4\u4e2d\u4e0e\u672c\u5730\u8ba1\u7b97\u673a80\u7aef\u53e380\u4e0a\u76d1\u542c\u7684\u6bcf\u4e2a\u8282\u70b9\u8fdb\u884c\u96c6\u7fa4\u5185\u90e8\u901a\u4fe1\uff0c\u5e94\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230MirrorMaker\u914d\u7f6e\u6587\u4ef6\u4e2d\uff1a dedicated.mode.enable.internal.rest = true listeners = http://localhost:8080 \u8fd0\u884cMirrorMaker\u65f6\uff0c\u8fd8\u5efa\u8bae\u4ece\u5df2\u590d\u5236\u7684\u6570\u636e\u4e2d\u7b5b\u9009\u5df2\u4e2d\u6b62\u4e8b\u52a1\u4e2d\u7684\u8bb0\u5f55\u3002\u4e3a\u6b64\uff0c\u8bf7\u786e\u4fdd\u5c06\u7528\u4e8e\u4ece\u6e90\u96c6\u7fa4\u8bfb\u53d6\u7684\u4f7f\u7528\u8005\u914d\u7f6e\u4e3a\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u4e3aread_committed\u3002\u5982\u679c\u4eceus west\u96c6\u7fa4\u590d\u5236\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230MirrorMaker\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5bf9\u4ece\u8be5\u96c6\u7fa4\u8bfb\u53d6\u7684\u6240\u6709\u590d\u5236\u6d41\u6267\u884c\u6b64\u64cd\u4f5c\uff1a \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u542f\u7528\u96c6\u7fa4\u5185\u90e8\u901a\u4fe1\uff0c\u5f3a\u70c8\u5efa\u8bae\u4fdd\u62a4\u6bcf\u4e2aMirrorMaker\u8282\u70b9\u5e26\u6765\u7684REST\u670d\u52a1\u5668\u3002\u6709\u5173\u5982\u4f55\u5b9e\u73b0\u6b64\u64cd\u4f5c\u7684\u4fe1\u606f \uff0c \u8bf7\u53c2\u9605 Kafka Connect \u7684 \u914d\u7f6e\u5c5e\u6027 \u3002 \u8fd8\u5efa\u8bae\u5728\u8fd0\u884c MirrorMaker \u65f6\u4ece\u590d\u5236\u6570\u636e\u4e2d\u8fc7\u6ee4\u6389\u6765\u81ea\u5df2\u4e2d\u6b62\u4e8b\u52a1\u7684\u8bb0\u5f55\u3002 \u4e3a\u6b64\uff0c\u8bf7\u786e\u4fdd\u7528\u4e8e\u4ece\u6e90\u96c6\u7fa4\u8bfb\u53d6\u7684\u4f7f\u7528\u8005\u914d\u7f6e\u4e3a isolation.level \u8bbe\u7f6e\u4e3a read_committed \u3002 \u5982\u679c\u4ece\u96c6\u7fa4 us-west \u590d\u5236\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u6765\u5bf9\u4ece\u8be5\u96c6\u7fa4\u8bfb\u53d6\u7684\u6240\u6709\u590d\u5236\u6d41\u5b8c\u6210\u6b64\u64cd\u4f5c\uff1a us-west.consumer.isolation.level = read_committed \u6700\u540e\u4e00\u70b9\uff0c\u5728\u5f15\u64ce\u76d6\u4e0b\uff0cMirrorMaker\u4f7f\u7528Kafka Connect\u6e90\u8fde\u63a5\u5668\u6765\u590d\u5236\u6570\u636e\u3002\u6709\u5173\u6b64\u7c7b\u8fde\u63a5\u5668\u7684\u7cbe\u786e\u4e00\u6b21\u652f\u6301\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u76f8\u5173\u6587\u6863\u9875\u9762 \u3002 \u521b\u5efa\u548c\u542f\u7528\u590d\u5236\u6d41 \u8981\u5b9a\u4e49\u590d\u5236\u6d41\uff0c\u60a8\u5fc5\u987b\u9996\u5148\u5728 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u76f8\u5e94\u7684\u6e90\u548c\u76ee\u6807 Kafka \u96c6\u7fa4\u3002 clusters \uff08\u5fc5\u9700\uff09\uff1a\u4ee5\u9017\u53f7\u5206\u9694\u7684 Kafka \u96c6\u7fa4\u201c\u522b\u540d\u201d\u5217\u8868 {clusterAlias}.bootstrap.servers \uff08\u5fc5\u586b\uff09\uff1a\u7279\u5b9a\u96c6\u7fa4\u7684\u8fde\u63a5\u4fe1\u606f\uff1b\u201c\u5f15\u5bfc\u201dKafka broker\u7684\u9017\u53f7\u5206\u9694\u5217\u8868 \u793a\u4f8b\uff1a\u5b9a\u4e49\u4e24\u4e2a\u96c6\u7fa4\u522b\u540d primary \u548c secondary \uff0c\u5305\u62ec\u5b83\u4eec\u7684\u8fde\u63a5\u4fe1\u606f\u3002 clusters = primary, secondary primary.bootstrap.servers = broker10-primary:9092,broker-11-primary:9092 secondary.bootstrap.servers = broker5-secondary:9092,broker6-secondary:9092 {source}->{target}.enabled = true \u5176\u6b21\uff0c\u60a8\u5fc5\u987b\u6839\u636e\u9700\u8981 \u663e\u5f0f\u542f\u7528\u5404\u4e2a\u590d\u5236\u6d41\u3002\u8bf7\u8bb0\u4f4f\uff0c\u6d41\u662f\u5b9a\u5411\u7684\uff1a\u5982\u679c\u9700\u8981\u53cc\u5411\uff08\u53cc\u5411\uff09\u590d\u5236\uff0c\u5219\u5fc5\u987b\u542f\u7528\u4e24\u4e2a\u65b9\u5411\u7684\u6d41\u3002 # Enable replication from primary to secondary primary->secondary.enabled = true \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u590d\u5236\u6d41\u4f1a\u5c06\u9664\u5c11\u6570\u7279\u6b8a\u4e3b\u9898\u548c\u4f7f\u7528\u8005\u7ec4\u4e4b\u5916\u7684\u6240\u6709\u5185\u5bb9\u4ece\u6e90\u96c6\u7fa4\u590d\u5236\u5230\u76ee\u6807\u96c6\u7fa4\uff0c\u5e76\u81ea\u52a8\u68c0\u6d4b\u4efb\u4f55\u65b0\u521b\u5efa\u7684\u4e3b\u9898\u548c\u7ec4\u3002\u76ee\u6807\u96c6\u7fa4\u4e2d\u590d\u5236\u4e3b\u9898\u7684\u540d\u79f0\u5c06\u4ee5\u6e90\u96c6\u7fa4\u7684\u540d\u79f0\u4e3a\u524d\u7f00\uff08\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u8fdb\u4e00\u6b65\u90e8\u5206\uff09\u3002\u4f8b\u5982\uff0c foo \u6e90\u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u5c06\u88ab\u590d\u5236\u5230\u76ee\u6807\u96c6\u7fa4\u4e2d us-west \u547d\u540d\u7684\u4e3b\u9898\u3002 us-west.foo``us-east \u540e\u7eed\u90e8\u5206\u89e3\u91ca\u5982\u4f55\u6839\u636e\u60a8\u7684\u9700\u8981\u81ea\u5b9a\u4e49\u6b64\u57fa\u672c\u8bbe\u7f6e\u3002 \u914d\u7f6e\u590d\u5236\u6d41 \u590d\u5236\u6d41\u7684\u914d\u7f6e\u662f\u9876\u7ea7\u9ed8\u8ba4\u8bbe\u7f6e\uff08\u4f8b\u5982 topics \uff09\u7684\u7ec4\u5408\uff0c\u5728\u5176\u4e4b\u4e0a\u5e94\u7528\u7279\u5b9a\u4e8e\u6d41\u7684\u8bbe\u7f6e\uff08\u5982\u679c\u6709\uff09\uff08\u4f8b\u5982 us-west->us-east.topics \uff09\u3002\u8981\u66f4\u6539\u9876\u7ea7\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u8bf7\u5c06\u76f8\u5e94\u7684\u9876\u7ea7\u8bbe\u7f6e\u6dfb\u52a0\u5230 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u8981\u4ec5\u8986\u76d6\u7279\u5b9a\u590d\u5236\u6d41\u7684\u9ed8\u8ba4\u503c\uff0c\u8bf7\u4f7f\u7528\u8bed\u6cd5 format {source}->{target}.{config.name} \u3002 \u6700\u91cd\u8981\u7684\u8bbe\u7f6e\u662f\uff1a topics \uff1a\u4e3b\u9898\u5217\u8868\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5b9a\u4e49\u6e90\u96c6\u7fa4\u4e2d\u8981\u590d\u5236\u7684\u4e3b\u9898\uff08\u9ed8\u8ba4\u503c topics = .* \uff1a\uff09 topics.exclude \uff1a\u4e3b\u9898\u5217\u8868\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7528\u4e8e\u968f\u540e\u6392\u9664\u4e0e\u8bbe\u7f6e\u5339\u914d\u7684\u4e3b\u9898 topics \uff08\u9ed8\u8ba4\u503c topics.exclude = .*[\\-.]internal, .*.replica, __.* \uff1a\uff09 groups \uff1a\u4e3b\u9898\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\u5217\u8868\uff0c\u5b9a\u4e49\u6e90\u96c6\u7fa4\u4e2d\u8981\u590d\u5236\u7684\u6d88\u8d39\u8005\u7ec4\uff08\u9ed8\u8ba4\u503c groups = .* \uff1a\uff09 groups.exclude \uff1a\u4e3b\u9898\u5217\u8868\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7528\u4e8e\u968f\u540e\u6392\u9664\u4e0e\u8bbe\u7f6e\u5339\u914d\u7684\u6d88\u8d39\u8005\u7ec4 groups \uff08\u9ed8\u8ba4\u503c groups.exclude = console-consumer-.*, connect-.*, __.* \uff1a\uff09 {source}->{target}.enable \uff1a\u8bbe\u7f6e true \u4e3a\u542f\u7528\u590d\u5236\u6d41\uff08\u9ed8\u8ba4\u503c false \uff1a\uff09 \u4f8b\u5b50\uff1a # Custom top-level defaults that apply to all replication flows topics = .* groups = consumer-group1, consumer-group2 # Don't forget to enable a flow! us-west->us-east.enabled = true # Custom settings for specific replication flows us-west->us-east.topics = foo.* us-west->us-east.groups = bar.* us-west->us-east.emit.heartbeats = false \u652f\u6301\u5176\u4ed6\u914d\u7f6e\u8bbe\u7f6e\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u5176\u4e2d\u4e00\u4e9b\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u4fdd\u7559\u4e3a\u9ed8\u8ba4\u503c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 MirrorMakerConfig \u548c MirrorConnectorConfig \u3002 refresh.topics.enabled \uff1a\u662f\u5426\u5b9a\u671f\u68c0\u67e5\u6e90\u96c6\u7fa4\u4e2d\u7684\u65b0\u4e3b\u9898\uff08\u9ed8\u8ba4\uff1atrue\uff09 refresh.topics.interval.seconds \uff1a\u5728\u6e90\u96c6\u7fa4\u4e2d\u68c0\u67e5\u65b0\u4e3b\u9898\u7684\u9891\u7387\uff1b\u4f4e\u4e8e\u9ed8\u8ba4\u503c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff08\u9ed8\u8ba4\u503c\uff1a600\uff0c\u6bcf\u5341\u5206\u949f\uff09 refresh.groups.enabled \uff1a\u662f\u5426\u5b9a\u671f\u68c0\u67e5\u6e90\u96c6\u7fa4\u4e2d\u662f\u5426\u6709\u65b0\u7684\u6d88\u8d39\u8005\u7ec4\uff08\u9ed8\u8ba4\uff1atrue\uff09 refresh.groups.interval.seconds \uff1a\u68c0\u67e5\u6e90\u96c6\u7fa4\u4e2d\u65b0\u6d88\u8d39\u8005\u7ec4\u7684\u9891\u7387\uff1b\u4f4e\u4e8e\u9ed8\u8ba4\u503c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff08\u9ed8\u8ba4\u503c\uff1a600\uff0c\u6bcf\u5341\u5206\u949f\uff09 sync.topic.configs.enabled \uff1a\u662f\u5426\u4ece\u6e90\u96c6\u7fa4\u590d\u5236\u4e3b\u9898\u914d\u7f6e\uff08\u9ed8\u8ba4\uff1atrue\uff09 sync.topic.acls.enabled \uff1a\u662f\u5426\u540c\u6b65\u6e90\u96c6\u7fa4\u7684ACL\uff08\u9ed8\u8ba4\uff1atrue\uff09 emit.heartbeats.enabled \uff1a\u662f\u5426\u5b9a\u671f\u53d1\u51fa\u5fc3\u8df3\uff08\u9ed8\u8ba4\uff1atrue\uff09 emit.heartbeats.interval.seconds \uff1a\u53d1\u51fa\u5fc3\u8df3\u7684\u9891\u7387\uff08\u9ed8\u8ba4\u503c\uff1a1\uff0c\u6bcf\u9694\u4e00\u79d2\uff09 heartbeats.topic.replication.factor \uff1aMirrorMaker\u5185\u90e8\u5fc3\u8df3\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u9ed8\u8ba4\uff1a3\uff09 emit.checkpoints.enabled \uff1a\u662f\u5426\u5b9a\u671f\u53d1\u51fa MirrorMaker \u7684\u6d88\u8d39\u8005\u504f\u79fb\u91cf\uff08\u9ed8\u8ba4\u503c\uff1atrue\uff09 emit.checkpoints.interval.seconds \uff1a\u53d1\u51fa\u68c0\u67e5\u70b9\u7684\u9891\u7387\uff08\u9ed8\u8ba4\u503c\uff1a60\uff0c\u6bcf\u5206\u949f\uff09 checkpoints.topic.replication.factor \uff1aMirrorMaker \u5185\u90e8\u68c0\u67e5\u70b9\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u9ed8\u8ba4\u503c\uff1a3\uff09 sync.group.offsets.enabled``__consumer_offsets \uff1a\u53ea\u8981\u8be5\u7ec4\u4e2d\u6ca1\u6709\u6d3b\u52a8\u6d88\u8d39\u8005\u8fde\u63a5\u5230\u76ee\u6807\u96c6\u7fa4\uff0c\u662f\u5426 \u5b9a\u671f\u5c06\u590d\u5236\u7684\u6d88\u8d39\u8005\u7ec4\uff08\u5728\u6e90\u96c6\u7fa4\u4e2d\uff09\u7684\u7ffb\u8bd1\u504f\u79fb\u91cf\u5199\u5165\u76ee\u6807\u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\uff08\u9ed8\u8ba4\u503c\uff1afalse\uff09 sync.group.offsets.interval.seconds \uff1a\u6d88\u8d39\u8005\u7ec4\u504f\u79fb\u91cf\u540c\u6b65\u7684\u9891\u7387\uff08\u9ed8\u8ba4\u503c\uff1a60\uff0c\u6bcf\u5206\u949f\uff09 offset-syncs.topic.replication.factor \uff1aMirrorMaker\u5185\u90e8\u504f\u79fb\u540c\u6b65\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u9ed8\u8ba4\u503c\uff1a3\uff09 \u4fdd\u62a4\u590d\u5236\u6d41 MirrorMaker \u652f\u6301\u4e0e Kafka Connect \u76f8\u540c\u7684\u5b89\u5168\u8bbe\u7f6e\uff0c\u56e0\u6b64\u8bf7\u53c2\u9605\u94fe\u63a5\u90e8\u5206\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002 \u793a\u4f8b\uff1a\u52a0\u5bc6 MirrorMaker \u4e0e us-east \u96c6\u7fa4\u4e4b\u95f4\u7684\u901a\u4fe1\u3002 us-east.security.protocol=SSL us-east.ssl.truststore.location=/path/to/truststore.jks us-east.ssl.truststore.password=my-secret-password us-east.ssl.keystore.location=/path/to/keystore.jks us-east.ssl.keystore.password=my-secret-password us-east.ssl.key.password=my-secret-password \u76ee\u6807\u96c6\u7fa4\u4e2d\u590d\u5236\u4e3b\u9898\u7684\u81ea\u5b9a\u4e49\u547d\u540d \u76ee\u6807\u96c6\u7fa4\u4e2d\u7684\u590d\u5236\u4e3b\u9898\uff08\u6709\u65f6\u79f0\u4e3a \u8fdc\u7a0b \u4e3b\u9898\uff09\u6839\u636e\u590d\u5236\u7b56\u7565\u8fdb\u884c\u91cd\u547d\u540d\u3002MirrorMaker \u4f7f\u7528\u6b64\u7b56\u7565\u6765\u786e\u4fdd\u6765\u81ea\u4e0d\u540c\u96c6\u7fa4\u7684\u4e8b\u4ef6\uff08\u4e5f\u79f0\u4e3a\u8bb0\u5f55\u3001\u6d88\u606f\uff09\u4e0d\u4f1a\u5199\u5165\u540c\u4e00\u4e3b\u9898\u5206\u533a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6839\u636e DefaultReplicationPolicy \uff0c\u76ee\u6807\u96c6\u7fa4\u4e2d\u590d\u5236\u4e3b\u9898\u7684\u540d\u79f0\u91c7\u7528\u4ee5\u4e0b\u683c\u5f0f {source}.{source_topic_name} \uff1a us-west us-east ========= ================= bar-topic foo-topic --> us-west.foo-topic \u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\uff1a . \uff09 replication.policy.separator \uff1a # Defining a custom separator us-west->us-east.replication.policy.separator = _ \u5982\u679c\u60a8\u9700\u8981\u8fdb\u4e00\u6b65\u63a7\u5236\u590d\u5236\u4e3b\u9898\u7684\u547d\u540d\u65b9\u5f0f\uff0c\u60a8\u53ef\u4ee5\u5728 MirrorMaker \u914d\u7f6e\u4e2d \u5b9e\u73b0\u81ea\u5b9a\u4e49 ReplicationPolicy \u5e76\u8986\u76d6 replication.policy.class \uff08\u9ed8\u8ba4\u4e3a\uff09\u3002 DefaultReplicationPolicy \u9632\u6b62\u914d\u7f6e\u51b2\u7a81 MirrorMaker \u8fdb\u7a0b\u901a\u8fc7\u5176\u76ee\u6807 Kafka \u96c6\u7fa4\u5171\u4eab\u914d\u7f6e\u3002\u5f53\u9488\u5bf9\u540c\u4e00\u76ee\u6807\u96c6\u7fa4\u8fd0\u884c\u7684 MirrorMaker \u8fdb\u7a0b\u4e4b\u95f4\u7684\u914d\u7f6e\u4e0d\u540c\u65f6\uff0c\u6b64\u884c\u4e3a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u51b2\u7a81\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u4e24\u4e2a MirrorMaker \u8fdb\u7a0b\u5c06\u662f\u6d3b\u6cfc\u7684\uff1a # Configuration of process 1 A->B.enabled = true A->B.topics = foo # Configuration of process 2 A->B.enabled = true A->B.topics = bar \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u5c06\u901a\u8fc7 cluster \u5171\u4eab\u914d\u7f6e B \uff0c\u8fd9\u4f1a\u5bfc\u81f4\u51b2\u7a81\u3002\u6839\u636e\u4e24\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u54ea\u4e00\u4e2a\u88ab\u9009\u4e3e\u4e3a\u201c\u9886\u5bfc\u8005\u201d\uff0c\u7ed3\u679c\u5c06\u662f\u4e3b\u9898 foo \u6216\u4e3b\u9898 bar \u88ab\u590d\u5236\uff0c\u4f46\u4e0d\u4f1a\u540c\u65f6\u590d\u5236\u3002 \u56e0\u6b64\uff0c\u5728\u540c\u4e00\u76ee\u6807\u96c6\u7fa4\u7684\u590d\u5236\u6d41\u4e2d\u4fdd\u6301 MirrorMaker \u914d\u7f6e\u4e00\u81f4\u975e\u5e38\u91cd\u8981\u3002\u4f8b\u5982\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u81ea\u52a8\u5316\u5de5\u5177\u6216\u4e3a\u6574\u4e2a\u7ec4\u7ec7\u4f7f\u7528\u5355\u4e2a\u5171\u4eab\u7684 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u6765\u5b9e\u73b0\u3002 \u6700\u4f73\u5b9e\u8df5\uff1a\u4ece\u8fdc\u7a0b\u6d88\u8d39\uff0c\u751f\u4ea7\u5230\u672c\u5730 \u4e3a\u4e86\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u5ef6\u8fdf\uff08\u201c\u751f\u4ea7\u8005\u6ede\u540e\u201d\uff09\uff0c\u5efa\u8bae\u5c06 MirrorMaker \u8fdb\u7a0b\u653e\u7f6e\u5728\u5c3d\u53ef\u80fd\u9760\u8fd1\u5176\u76ee\u6807\u96c6\u7fa4\uff08\u5373\u5b83\u5411\u5176\u751f\u6210\u6570\u636e\u7684\u96c6\u7fa4\uff09\u7684\u4f4d\u7f6e\u3002\u8fd9\u662f\u56e0\u4e3a Kafka \u751f\u4ea7\u8005\u901a\u5e38\u6bd4 Kafka \u6d88\u8d39\u8005\u66f4\u5bb9\u6613\u9047\u5230\u4e0d\u53ef\u9760\u6216\u9ad8\u5ef6\u8fdf\u7684\u7f51\u7edc\u8fde\u63a5\u3002 First DC Second DC ========== ========================= primary --------- MirrorMaker --> secondary (remote) (local) \u8981\u8fd0\u884c\u8fd9\u6837\u7684\u201c\u4ece\u8fdc\u7a0b\u4f7f\u7528\uff0c\u751f\u6210\u5230\u672c\u5730\u201d\u8bbe\u7f6e\uff0c\u8bf7\u5728\u9760\u8fd1\u76ee\u6807\u96c6\u7fa4\u4e14\u6700\u597d\u5728\u4e0e\u76ee\u6807\u96c6\u7fa4\u76f8\u540c\u7684\u4f4d\u7f6e\u8fd0\u884c MirrorMaker \u8fdb\u7a0b\uff0c\u5e76\u5728\u547d\u4ee4\u884c\u53c2\u6570\uff08\u7a7a\u767d\u5206\u9694\u5217\u8868\uff09\u4e2d\u663e\u5f0f\u8bbe\u7f6e\u8fd9\u4e9b\u201c\u672c\u5730\u201d --clusters \u96c6\u7fa4\u96c6\u7fa4\u522b\u540d\uff09\uff1a # Run in secondary's data center, reading from the remote `primary` cluster $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters secondary \u5b83 --clusters secondary \u544a\u8bc9 MirrorMaker \u8fdb\u7a0b\u7ed9\u5b9a\u7684\u96c6\u7fa4\u4f4d\u4e8e\u9644\u8fd1\uff0c\u5e76\u963b\u6b62\u5176\u590d\u5236\u6570\u636e\u6216\u5c06\u914d\u7f6e\u53d1\u9001\u5230\u5176\u4ed6\u8fdc\u7a0b\u4f4d\u7f6e\u7684\u96c6\u7fa4\u3002 \u793a\u4f8b\uff1a\u4e3b\u52a8/\u88ab\u52a8\u9ad8\u53ef\u7528\u6027\u90e8\u7f72 \u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u5c06\u4e3b\u9898\u4ece\u4e3b Kafka \u73af\u5883\u590d\u5236\u5230\u8f85\u52a9 Kafka \u73af\u5883\u7684\u57fa\u672c\u8bbe\u7f6e\uff0c\u4f46\u4e0d\u4ece\u8f85\u52a9 Kafka \u73af\u5883\u590d\u5236\u56de\u4e3b\u73af\u5883\u3002\u8bf7\u6ce8\u610f\uff0c\u5927\u591a\u6570\u751f\u4ea7\u8bbe\u7f6e\u90fd\u9700\u8981\u8fdb\u4e00\u6b65\u914d\u7f6e\uff0c\u4f8b\u5982\u5b89\u5168\u8bbe\u7f6e\u3002 # Unidirectional flow (one-way) from primary to secondary cluster primary.bootstrap.servers = broker1-primary:9092 secondary.bootstrap.servers = broker2-secondary:9092 primary->secondary.enabled = true secondary->primary.enabled = false primary->secondary.topics = foo.* # only replicate some topics \u793a\u4f8b\uff1a\u4e3b\u52a8/\u4e3b\u52a8\u9ad8\u53ef\u7528\u6027\u90e8\u7f72 \u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u4ee5\u4e24\u79cd\u65b9\u5f0f\u5728\u4e24\u4e2a\u96c6\u7fa4\u4e4b\u95f4\u590d\u5236\u4e3b\u9898\u7684\u57fa\u672c\u8bbe\u7f6e\u3002\u8bf7\u6ce8\u610f\uff0c\u5927\u591a\u6570\u751f\u4ea7\u8bbe\u7f6e\u90fd\u9700\u8981\u8fdb\u4e00\u6b65\u914d\u7f6e\uff0c\u4f8b\u5982\u5b89\u5168\u8bbe\u7f6e\u3002 # Bidirectional flow (two-way) between us-west and us-east clusters clusters = us-west, us-east us-west.bootstrap.servers = broker1-west:9092,broker2-west:9092 Us-east.bootstrap.servers = broker3-east:9092,broker4-east:9092 us-west->us-east.enabled = true us-east->us-west.enabled = true \u5173\u4e8e\u9632\u6b62\u590d\u5236\u201c\u5faa\u73af\u201d\u7684\u6ce8\u610f\u4e8b\u9879\uff08\u5176\u4e2d\u4e3b\u9898\u6700\u521d\u4ece A \u590d\u5236\u5230 B\uff0c\u7136\u540e\u590d\u5236\u7684\u4e3b\u9898\u5c06\u518d\u6b21\u4ece B \u590d\u5236\u5230 A\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff09\uff1a\u53ea\u8981\u60a8\u5728\u540c\u4e00\u4e2a MirrorMaker \u4e2d\u5b9a\u4e49\u4e0a\u8ff0 \u6d41\u7a0b\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u60a8\u4e0d\u9700\u8981\u663e\u5f0f\u6dfb\u52a0 topics.exclude \u8bbe\u7f6e\u6765\u9632\u6b62\u4e24\u4e2a\u96c6\u7fa4\u4e4b\u95f4\u7684\u590d\u5236\u5faa\u73af\u3002 \u793a\u4f8b\uff1a\u591a\u96c6\u7fa4\u5f02\u5730\u590d\u5236 \u8ba9\u6211\u4eec\u5c06\u524d\u9762\u90e8\u5206\u4e2d\u7684\u6240\u6709\u4fe1\u606f\u653e\u5728\u4e00\u4e2a\u66f4\u5927\u7684\u793a\u4f8b\u4e2d\u3002\u60f3\u8c61\u4e00\u4e0b\uff0c\u6709\u4e09\u4e2a\u6570\u636e\u4e2d\u5fc3\uff08\u897f\u3001\u4e1c\u3001\u5317\uff09\uff0c\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u6709\u4e24\u4e2a Kafka \u96c6\u7fa4\uff08\u4f8b\u5982 \u3001 west-1 \uff09 west-2 \u3002\u672c\u8282\u4e2d\u7684\u793a\u4f8b\u663e\u793a\u5982\u4f55\u914d\u7f6e MirrorMaker (1) \u4ee5\u5b9e\u73b0\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u5185\u7684\u4e3b\u52a8/\u4e3b\u52a8\u590d\u5236\uff0c\u4ee5\u53ca (2) \u8de8\u6570\u636e\u4e2d\u5fc3\u590d\u5236 (XDCR)\u3002 \u9996\u5148\uff0c\u5728\u914d\u7f6e\u4e2d\u5b9a\u4e49\u6e90\u96c6\u7fa4\u548c\u76ee\u6807\u96c6\u7fa4\u53ca\u5176\u590d\u5236\u6d41\uff1a # Basic settings clusters: west-1, west-2, east-1, east-2, north-1, north-2 west-1.bootstrap.servers = ... west-2.bootstrap.servers = ... east-1.bootstrap.servers = ... east-2.bootstrap.servers = ... north-1.bootstrap.servers = ... north-2.bootstrap.servers = ... # Replication flows for Active/Active in West DC west-1->west-2.enabled = true west-2->west-1.enabled = true # Replication flows for Active/Active in East DC east-1->east-2.enabled = true east-2->east-1.enabled = true # Replication flows for Active/Active in North DC north-1->north-2.enabled = true north-2->north-1.enabled = true # Replication flows for XDCR via west-1, east-1, north-1 west-1->east-1.enabled = true west-1->north-1.enabled = true east-1->west-1.enabled = true east-1->north-1.enabled = true north-1->west-1.enabled = true north-1->east-1.enabled = true \u7136\u540e\uff0c\u5728\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u4e2d\uff0c\u542f\u52a8\u4e00\u4e2a\u6216\u591a\u4e2a MirrorMaker\uff0c\u5982\u4e0b\u6240\u793a\uff1a # In West DC: $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters west-1 west-2 # In East DC: $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters east-1 east-2 # In North DC: $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters north-1 north-2 \u901a\u8fc7\u6b64\u914d\u7f6e\uff0c\u4efb\u4f55\u96c6\u7fa4\u751f\u6210\u7684\u8bb0\u5f55\u90fd\u5c06\u5728\u6570\u636e\u4e2d\u5fc3\u5185\u590d\u5236\uff0c\u5e76\u8de8\u5230\u5176\u4ed6\u6570\u636e\u4e2d\u5fc3\u3002\u901a\u8fc7\u63d0\u4f9b --clusters \u53c2\u6570\uff0c\u6211\u4eec\u786e\u4fdd\u6bcf\u4e2a MirrorMaker \u8fdb\u7a0b\u4ec5\u5411\u9644\u8fd1\u7684\u96c6\u7fa4\u751f\u6210\u6570\u636e\u3002 \u6ce8\u610f\uff1a --clusters \u4ece\u6280\u672f\u4e0a\u8bb2\uff0c\u6b64\u5904\u4e0d\u9700\u8981\u8be5\u53c2\u6570\u3002\u6ca1\u6709\u5b83\uff0cMirrorMaker \u4e5f\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002\u4f46\u662f\uff0c\u541e\u5410\u91cf\u53ef\u80fd\u4f1a\u53d7\u5230\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u201c\u751f\u4ea7\u8005\u6ede\u540e\u201d\u7684\u5f71\u54cd\uff0c\u5e76\u4e14\u60a8\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u4f20\u8f93\u6210\u672c\u3002 \u5f00\u59cb\u5f02\u5730\u590d\u5236 \u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fd0\u884c\u4efb\u610f\u6570\u91cf\u7684 MirrorMaker \u8fdb\u7a0b\uff08\u4f8b\u5982\uff1a\u8282\u70b9\u3001\u670d\u52a1\u5668\uff09\u3002\u7531\u4e8e MirrorMaker \u57fa\u4e8e Kafka Connect\uff0c\u56e0\u6b64\u914d\u7f6e\u4e3a\u590d\u5236\u76f8\u540c Kafka \u96c6\u7fa4\u7684 MirrorMaker \u8fdb\u7a0b\u5728\u5206\u5e03\u5f0f\u8bbe\u7f6e\u4e2d\u8fd0\u884c\uff1a\u5b83\u4eec\u5c06\u627e\u5230\u5f7c\u6b64\u3001\u5171\u4eab\u914d\u7f6e\uff08\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u90e8\u5206\uff09\u3001\u8d1f\u8f7d\u5e73\u8861\u5176\u5de5\u4f5c\u7b49\u7b49\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u8981\u63d0\u9ad8\u590d\u5236\u6d41\u7684\u541e\u5410\u91cf\uff0c\u4e00\u79cd\u9009\u62e9\u662f\u5e76\u884c\u8fd0\u884c\u5176\u4ed6 MirrorMaker \u8fdb\u7a0b\u3002 \u8981\u542f\u52a8 MirrorMaker \u8fdb\u7a0b\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties \u542f\u52a8\u540e\uff0cMirrorMaker \u8fdb\u7a0b\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\u65f6\u95f4\u624d\u5f00\u59cb\u590d\u5236\u6570\u636e\u3002 \u6216\u8005\uff0c\u5982\u524d\u6240\u8ff0\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u53c2\u6570 --clusters \u4ee5\u786e\u4fdd MirrorMaker \u8fdb\u7a0b\u4ec5\u5411\u9644\u8fd1\u7684\u96c6\u7fa4\u751f\u6210\u6570\u636e\u3002 # Note: The cluster alias us-west must be defined in the configuration file $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties \\ --clusters us-west \u6d4b\u8bd5\u4f7f\u7528\u8005\u7ec4\u590d\u5236\u65f6\u8bf7\u6ce8\u610f\uff1a \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMirrorMaker \u4e0d\u4f1a\u590d\u5236\u8be5 kafka-console-consumer.sh \u5de5\u5177\u521b\u5efa\u7684\u4f7f\u7528\u8005\u7ec4\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u5de5\u5177\u5728\u547d\u4ee4\u884c\u4e0a\u6d4b\u8bd5 MirrorMaker \u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u786e\u5b9e\u4e5f\u60f3\u590d\u5236\u8fd9\u4e9b\u4f7f\u7528\u8005\u7ec4\uff0c\u8bf7 groups.exclude \u76f8\u5e94\u5730\u8bbe\u7f6e\u914d\u7f6e\uff08\u9ed8\u8ba4\u503c groups.exclude = console-consumer-.*, connect-.*, __.* \uff1a\uff09\u3002\u8bf7\u8bb0\u4f4f\u5728\u5b8c\u6210\u6d4b\u8bd5\u540e\u518d\u6b21\u66f4\u65b0\u914d\u7f6e\u3002 \u505c\u6b62\u5f02\u5730\u590d\u5236 \u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u53d1\u9001 SIGTERM \u4fe1\u53f7\u6765\u505c\u6b62\u6b63\u5728\u8fd0\u884c\u7684 MirrorMaker \u8fdb\u7a0b\uff1a $ kill <MirrorMaker pid> \u5e94\u7528\u914d\u7f6e\u66f4\u6539 \u8981\u4f7f\u914d\u7f6e\u66f4\u6539\u751f\u6548\uff0c\u5fc5\u987b\u91cd\u65b0\u542f\u52a8 MirrorMaker \u8fdb\u7a0b\u3002 \u76d1\u63a7\u5f02\u5730\u590d\u5236 \u5efa\u8bae\u76d1\u63a7 MirrorMaker \u8fdb\u7a0b\uff0c\u4ee5\u786e\u4fdd\u6240\u6709\u5b9a\u4e49\u7684\u590d\u5236\u6d41\u7a0b\u5747\u6b63\u5e38\u542f\u52a8\u5e76\u8fd0\u884c\u3002MirrorMaker \u57fa\u4e8e Connect \u6846\u67b6\u6784\u5efa\uff0c\u5e76\u7ee7\u627f\u4e86 Connect \u7684\u6240\u6709\u6307\u6807\uff0c\u4f8b\u5982 source-record-poll-rate . \u6b64\u5916\uff0cMirrorMaker \u5728 kafka.connect.mirror \u6307\u6807\u7ec4\u4e0b\u751f\u6210\u81ea\u5df1\u7684\u6307\u6807\u3002\u6307\u6807\u5e26\u6709\u4ee5\u4e0b\u5c5e\u6027\u6807\u8bb0\uff1a source \uff1a\u6e90\u96c6\u7fa4\u7684\u522b\u540d\uff08\u4f8b\u5982\uff0c primary \uff09 target \uff1a\u76ee\u6807\u96c6\u7fa4\u7684\u522b\u540d\uff08\u4f8b\u5982\uff0c secondary \uff09 topic \uff1a\u76ee\u6807\u96c6\u7fa4\u4e0a\u7684\u590d\u5236\u4e3b\u9898 partition \uff1a\u6b63\u5728\u590d\u5236\u7684\u5206\u533a \u8ddf\u8e2a\u6bcf\u4e2a\u590d\u5236\u4e3b\u9898\u7684\u6307\u6807\u3002\u53ef\u4ee5\u4ece\u4e3b\u9898\u540d\u79f0\u63a8\u65ad\u51fa\u6e90\u96c6\u7fa4\u3002\u4f8b\u5982\uff0c\u590d\u5236 topic1 \u5c06 primary->secondary \u4ea7\u751f\u5982\u4e0b\u6307\u6807\uff1a target=secondary topic=primary.topic1 partition=1 \u53d1\u51fa\u4ee5\u4e0b\u6307\u6807\uff1a # MBean: kafka.connect.mirror:type=MirrorSourceConnector,target=([-.w]+),topic=([-.w]+),partition=([0-9]+) record-count # number of records replicated source -> target record-age-ms # age of records when they are replicated record-age-ms-min record-age-ms-max record-age-ms-avg replication-latency-ms # time it takes records to propagate source->target replication-latency-ms-min replication-latency-ms-max replication-latency-ms-avg byte-rate # average number of bytes/sec in replicated records # MBean: kafka.connect.mirror:type=MirrorCheckpointConnector,source=([-.w]+),target=([-.w]+) checkpoint-latency-ms # time it takes to replicate consumer offsets checkpoint-latency-ms-min checkpoint-latency-ms-max checkpoint-latency-ms-avg \u8fd9\u4e9b\u6307\u6807\u4e0d\u533a\u5206\u521b\u5efa\u65f6\u95f4\u548c\u65e5\u5fd7\u8ffd\u52a0\u65f6\u95f4\u6233\u3002 6.4 \u591a\u79df\u6237 \u591a\u79df\u6237\u6982\u8ff0 \u4f5c\u4e3a\u4e00\u4e2a\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684\u4e8b\u4ef6\u6d41\u5e73\u53f0\uff0cKafka \u88ab\u8bb8\u591a\u7528\u6237\u7528\u4f5c\u4ed6\u4eec\u7684\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\uff0c\u5b9e\u65f6\u8fde\u63a5\u6765\u81ea\u4e0d\u540c\u56e2\u961f\u548c\u4e1a\u52a1\u7ebf\u7684\u5404\u79cd\u4e0d\u540c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u79cd\u591a\u79df\u6237\u96c6\u7fa4\u73af\u5883\u9700\u8981\u9002\u5f53\u7684\u63a7\u5236\u548c\u7ba1\u7406\uff0c\u4ee5\u786e\u4fdd\u8fd9\u4e9b\u4e0d\u540c\u9700\u6c42\u7684\u548c\u5e73\u5171\u5b58\u3002\u672c\u8282\u91cd\u70b9\u4ecb\u7ecd\u8bbe\u7f6e\u6b64\u7c7b\u5171\u4eab\u73af\u5883\u7684\u529f\u80fd\u548c\u6700\u4f73\u5b9e\u8df5\uff0c\u8fd9\u5c06\u5e2e\u52a9\u60a8\u64cd\u4f5c\u6ee1\u8db3 SLA/OLA \u7684\u96c6\u7fa4\uff0c\u5e76\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u201c\u5435\u95f9\u7684\u90bb\u5c45\u201d\u9020\u6210\u7684\u6f5c\u5728\u9644\u5e26\u635f\u5bb3\u3002 \u591a\u79df\u6237\u662f\u4e00\u4e2a\u591a\u65b9\u9762\u7684\u4e3b\u9898\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a \u4e3a\u79df\u6237\u521b\u5efa\u7528\u6237\u7a7a\u95f4\uff08\u6709\u65f6\u79f0\u4e3a\u547d\u540d\u7a7a\u95f4\uff09 \u4f7f\u7528\u6570\u636e\u4fdd\u7559\u7b56\u7565\u7b49\u914d\u7f6e\u4e3b\u9898 \u901a\u8fc7\u52a0\u5bc6\u3001\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u6765\u4fdd\u62a4\u4e3b\u9898\u548c\u96c6\u7fa4 \u901a\u8fc7\u914d\u989d\u548c\u8d39\u7387\u9650\u5236\u9694\u79bb\u79df\u6237 \u76d1\u63a7\u4e0e\u8ba1\u91cf \u96c6\u7fa4\u95f4\u6570\u636e\u5171\u4eab\uff08\u53c2\u89c1\u5f02\u5730\u590d\u5236\uff09 \u4f7f\u7528\u4e3b\u9898\u547d\u540d\u4e3a\u79df\u6237\u521b\u5efa\u7528\u6237\u7a7a\u95f4\uff08\u547d\u540d\u7a7a\u95f4\uff09 \u64cd\u4f5c\u591a\u79df\u6237\u96c6\u7fa4\u7684 Kafka \u7ba1\u7406\u5458\u901a\u5e38\u9700\u8981\u4e3a\u6bcf\u4e2a\u79df\u6237\u5b9a\u4e49\u7528\u6237\u7a7a\u95f4\u3002\u5c31\u672c\u8282\u800c\u8a00\uff0c\u201c\u7528\u6237\u7a7a\u95f4\u201d\u662f\u4e3b\u9898\u7684\u96c6\u5408\uff0c\u8fd9\u4e9b\u4e3b\u9898\u5728\u5355\u4e2a\u5b9e\u4f53\u6216\u7528\u6237\u7684\u7ba1\u7406\u4e0b\u7ec4\u5408\u5728\u4e00\u8d77\u3002 \u5728Kafka\u4e2d\uff0c\u6570\u636e\u7684\u4e3b\u8981\u5355\u4f4d\u662f\u4e3b\u9898\u3002\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u5e76\u547d\u540d\u6bcf\u4e2a\u4e3b\u9898\u3002\u4ed6\u4eec\u4e5f\u53ef\u4ee5\u5220\u9664\u5b83\u4eec\uff0c\u4f46\u65e0\u6cd5\u76f4\u63a5\u91cd\u547d\u540d\u4e3b\u9898\u3002\u76f8\u53cd\uff0c\u8981\u91cd\u547d\u540d\u4e3b\u9898\uff0c\u7528\u6237\u5fc5\u987b\u521b\u5efa\u65b0\u4e3b\u9898\uff0c\u5c06\u6d88\u606f\u4ece\u539f\u59cb\u4e3b\u9898\u79fb\u52a8\u5230\u65b0\u4e3b\u9898\uff0c\u7136\u540e\u5220\u9664\u539f\u59cb\u4e3b\u9898\u3002\u8003\u8651\u5230\u8fd9\u4e00\u70b9\uff0c\u5efa\u8bae\u57fa\u4e8e\u5206\u5c42\u4e3b\u9898\u547d\u540d\u7ed3\u6784\u6765\u5b9a\u4e49\u903b\u8f91\u7a7a\u95f4\u3002\u7136\u540e\uff0c\u6b64\u8bbe\u7f6e\u53ef\u4ee5\u4e0e\u5b89\u5168\u529f\u80fd\uff08\u4f8b\u5982\u524d\u7f00 ACL\uff09\u76f8\u7ed3\u5408\uff0c\u4ee5\u9694\u79bb\u4e0d\u540c\u7684\u7a7a\u95f4\u548c\u79df\u6237\uff0c\u540c\u65f6\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u4fdd\u62a4\u96c6\u7fa4\u4e2d\u6570\u636e\u7684\u7ba1\u7406\u5f00\u9500\u3002 \u8fd9\u4e9b\u903b\u8f91\u7528\u6237\u7a7a\u95f4\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u5206\u7ec4\uff0c\u5177\u4f53\u9009\u62e9\u53d6\u51b3\u4e8e\u60a8\u7684\u7ec4\u7ec7\u66f4\u559c\u6b22\u5982\u4f55\u4f7f\u7528 Kafka \u96c6\u7fa4\u3002\u6700\u5e38\u89c1\u7684\u5206\u7ec4\u5982\u4e0b\u3002 \u6309\u56e2\u961f\u6216\u7ec4\u7ec7\u5355\u4f4d\uff1a \u5728\u8fd9\u91cc\uff0c\u56e2\u961f\u662f\u4e3b\u8981\u7684\u805a\u5408\u8005\u3002\u5728\u56e2\u961f\u662f Kafka \u57fa\u7840\u8bbe\u65bd\u4e3b\u8981\u7528\u6237\u7684\u7ec4\u7ec7\u4e2d\uff0c\u8fd9\u53ef\u80fd\u662f\u6700\u597d\u7684\u5206\u7ec4\u3002 \u4e3b\u9898\u547d\u540d\u7ed3\u6784\u793a\u4f8b\uff1a <organization>.<team>.<dataset>.<event-name> (e.g., \"acme.infosec.telemetry.logins\") \u6309\u9879\u76ee\u6216\u4ea7\u54c1\uff1a \u5728\u8fd9\u91cc\uff0c\u4e00\u4e2a\u56e2\u961f\u7ba1\u7406\u591a\u4e2a\u9879\u76ee\u3002\u6bcf\u4e2a\u9879\u76ee\u7684\u51ed\u636e\u90fd\u4e0d\u540c\uff0c\u56e0\u6b64\u6240\u6709\u63a7\u4ef6\u548c\u8bbe\u7f6e\u5c06\u59cb\u7ec8\u4e0e\u9879\u76ee\u76f8\u5173\u3002 \u4e3b\u9898\u547d\u540d\u7ed3\u6784\u793a\u4f8b\uff1a <project>.<product>.<event-name> (e.g., \"mobility.payments.suspicious\") \u67d0\u4e9b\u4fe1\u606f\u901a\u5e38\u4e0d\u5e94\u653e\u5728\u4e3b\u9898\u540d\u79f0\u4e2d\uff0c\u4f8b\u5982\u53ef\u80fd\u968f\u65f6\u95f4\u53d8\u5316\u7684\u4fe1\u606f\uff08\u4f8b\u5982\uff0c\u76ee\u6807\u6d88\u8d39\u8005\u7684\u540d\u79f0\uff09\u6216\u8005\u662f\u5176\u4ed6\u5730\u65b9\u53ef\u7528\u7684\u6280\u672f\u7ec6\u8282\u6216\u5143\u6570\u636e\uff08\u4f8b\u5982\uff0c\u4e3b\u9898\u7684\u5206\u533a\uff09\u8ba1\u6570\u548c\u5176\u4ed6\u914d\u7f6e\u8bbe\u7f6e\uff09\u3002 \u8981\u5f3a\u5236\u5b9e\u65bd\u4e3b\u9898\u547d\u540d\u7ed3\u6784\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u51e0\u4e2a\u9009\u9879\uff1a \u4f7f\u7528 \u524d\u7f00 ACL \uff08\u53c2\u89c1 KIP-290 \uff09\u5f3a\u5236\u4e3b\u9898\u540d\u79f0\u4f7f\u7528\u516c\u5171\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u56e2\u961f A \u53ef\u80fd\u53ea\u88ab\u5141\u8bb8\u521b\u5efa\u540d\u79f0\u4ee5 \u5f00\u5934\u7684\u4e3b\u9898 payments.teamA. \u3002 \u5b9a\u4e49\u81ea\u5b9a\u4e49 CreateTopicPolicy \uff08\u53c2\u89c1 KIP-108 \u548c\u8bbe\u7f6e create.topic.policy.class.name \uff09\u4ee5\u5f3a\u5236\u6267\u884c\u4e25\u683c\u7684\u547d\u540d\u6a21\u5f0f\u3002\u8fd9\u4e9b\u7b56\u7565\u63d0\u4f9b\u4e86\u6700\u5927\u7684\u7075\u6d3b\u6027\uff0c\u5e76\u4e14\u53ef\u4ee5\u6db5\u76d6\u590d\u6742\u7684\u6a21\u5f0f\u548c\u89c4\u5219\u6765\u6ee1\u8db3\u7ec4\u7ec7\u7684\u9700\u6c42\u3002 \u901a\u8fc7\u4f7f\u7528 ACL \u62d2\u7edd\u666e\u901a\u7528\u6237\u7981\u7528\u4e3b\u9898\u521b\u5efa\uff0c\u7136\u540e\u4f9d\u9760\u5916\u90e8\u8fdb\u7a0b\u4ee3\u8868\u7528\u6237\u521b\u5efa\u4e3b\u9898\uff08\u4f8b\u5982\uff0c\u811a\u672c\u6216\u60a8\u6700\u559c\u6b22\u7684\u81ea\u52a8\u5316\u5de5\u5177\u5305\uff09\u3002 auto.create.topics.enable=false \u901a\u8fc7\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d\u8fdb\u884c\u8bbe\u7f6e\u6765\u7981\u7528 Kafka \u529f\u80fd\u4ee5\u6309\u9700\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u4e5f\u53ef\u80fd\u5f88\u6709\u7528\u3002\u8bf7\u6ce8\u610f\uff0c\u60a8\u4e0d\u5e94\u4ec5\u4ec5\u4f9d\u8d56\u6b64\u9009\u9879\u3002 \u914d\u7f6e\u4e3b\u9898\uff1a\u6570\u636e\u4fdd\u7559\u7b49 Kafka \u7684\u914d\u7f6e\u7531\u4e8e\u5176\u7cbe\u7ec6\u7684\u7c92\u5ea6\u800c\u975e\u5e38\u7075\u6d3b\uff0c\u5e76\u4e14\u5b83\u652f\u6301\u5927\u91cf\u7684 \u6309\u4e3b\u9898\u914d\u7f6e\u8bbe\u7f6e \uff0c\u4ee5\u5e2e\u52a9\u7ba1\u7406\u5458\u8bbe\u7f6e\u591a\u79df\u6237\u96c6\u7fa4\u3002\u4f8b\u5982\uff0c\u7ba1\u7406\u5458\u901a\u5e38\u9700\u8981\u5b9a\u4e49\u6570\u636e\u4fdd\u7559\u7b56\u7565\uff0c\u4ee5\u63a7\u5236\u6570\u636e\u5728\u4e3b\u9898\u4e2d\u5b58\u50a8\u7684\u6570\u91cf\u548c/\u6216\u591a\u957f\u65f6\u95f4\uff0c\u5e76\u4f7f\u7528\u8bf8\u5982 retention.bytes \uff08\u5927\u5c0f\uff09\u548c retention.ms \uff08\u65f6\u95f4\uff09\u7b49\u8bbe\u7f6e\u3002\u8fd9\u9650\u5236\u4e86\u96c6\u7fa4\u5185\u7684\u5b58\u50a8\u6d88\u8017\uff0c\u5e76\u6709\u52a9\u4e8e\u9075\u5b88 GDPR \u7b49\u6cd5\u5f8b\u8981\u6c42\u3002 \u4fdd\u62a4\u96c6\u7fa4\u548c\u4e3b\u9898\uff1a\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u3001\u52a0\u5bc6 \u7531\u4e8e\u8be5\u6587\u6863\u6709\u4e13\u95e8\u7684\u4e00\u7ae0\u4ecb\u7ecd\u9002\u7528\u4e8e\u4efb\u4f55 Kafka \u90e8\u7f72\u7684 \u5b89\u5168\u6027 \uff0c\u56e0\u6b64\u672c\u8282\u91cd\u70b9\u4ecb\u7ecd\u591a\u79df\u6237\u73af\u5883\u7684\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879\u3002 Kafka \u7684\u5b89\u5168\u8bbe\u7f6e\u5206\u4e3a\u4e09\u4e2a\u4e3b\u8981\u7c7b\u522b\uff0c\u8fd9\u4e0e\u7ba1\u7406\u5458\u4fdd\u62a4\u5176\u4ed6\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u6570\u636e\u7cfb\u7edf\uff08\u5982\u5173\u7cfb\u6570\u636e\u5e93\u548c\u4f20\u7edf\u6d88\u606f\u7cfb\u7edf\uff09\u7684\u65b9\u5f0f\u7c7b\u4f3c\u3002 \u5bf9 Kafka \u4ee3\u7406\u548c Kafka \u5ba2\u6237\u7aef\u4e4b\u95f4\u3001\u4ee3\u7406\u4e4b\u95f4\u3001\u4ee3\u7406\u548c ZooKeeper \u8282\u70b9\u4e4b\u95f4\u4ee5\u53ca\u4ee3\u7406\u548c\u5176\u4ed6\u53ef\u9009\u5de5\u5177\u4e4b\u95f4\u4f20\u8f93\u7684\u6570\u636e\u8fdb\u884c \u52a0\u5bc6\u3002 \u5bf9\u4ece Kafka \u5ba2\u6237\u7aef\u548c\u5e94\u7528\u7a0b\u5e8f\u5230 Kafka \u4ee3\u7406\u7684\u8fde\u63a5\u4ee5\u53ca\u4ece Kafka \u4ee3\u7406\u5230 ZooKeeper \u8282\u70b9\u7684\u8fde\u63a5\u8fdb\u884c \u8eab\u4efd\u9a8c\u8bc1\u3002 \u5bf9\u4e3b\u9898\u7684\u521b\u5efa\u3001\u5220\u9664\u3001\u66f4\u6539\u914d\u7f6e\u7b49\u5ba2\u6237\u7aef\u64cd\u4f5c \u8fdb\u884c\u6388\u6743\uff1b \u5c06\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898\u6216\u4ece\u4e3b\u9898\u8bfb\u53d6\u4e8b\u4ef6\uff1b\u521b\u5efa\u548c\u5220\u9664 ACL\u3002\u7ba1\u7406\u5458\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49\u7b56\u7565\u4ee5\u5b9e\u65bd\u5176\u4ed6\u9650\u5236\uff0c\u4f8b\u5982 CreateTopicPolicy and AlterConfigPolicy \uff08\u8bf7\u53c2\u9605 KIP-108 \u548c\u8bbe\u7f6e create.topic.policy.class.name \u3001 alter.config.policy.class.name \uff09\u3002 \u5f53\u4fdd\u62a4\u591a\u79df\u6237 Kafka \u73af\u5883\u65f6\uff0c\u6700\u5e38\u89c1\u7684\u7ba1\u7406\u4efb\u52a1\u662f\u7b2c\u4e09\u7c7b\uff08\u6388\u6743\uff09\uff0c\u5373\u7ba1\u7406\u7528\u6237/\u5ba2\u6237\u7aef\u6743\u9650\uff0c\u6388\u4e88\u6216\u62d2\u7edd\u5bf9\u67d0\u4e9b\u4e3b\u9898\u7684\u8bbf\u95ee\uff0c\u4ece\u800c\u6388\u4e88\u6216\u62d2\u7edd\u5bf9\u96c6\u7fa4\u5185\u7528\u6237\u5b58\u50a8\u7684\u6570\u636e\u7684\u8bbf\u95ee\u3002\u8be5\u4efb\u52a1\u4e3b\u8981\u901a\u8fc7 \u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08ACL\uff09\u7684\u8bbe\u7f6e \u6765\u6267\u884c\u3002\u5728\u8fd9\u91cc\uff0c\u591a\u79df\u6237\u73af\u5883\u7684\u7ba1\u7406\u5458\u7279\u522b\u53d7\u76ca\u4e8e\u5c06\u5206\u5c42\u4e3b\u9898\u547d\u540d\u7ed3\u6784\u653e\u5728\u9002\u5f53\u7684\u4f4d\u7f6e\uff08\u5982\u4e0a\u4e00\u8282\u6240\u8ff0\uff09\uff0c\u56e0\u4e3a\u4ed6\u4eec\u53ef\u4ee5\u901a\u8fc7\u524d\u7f00 ACL \u65b9\u4fbf\u5730\u63a7\u5236\u5bf9\u4e3b\u9898\u7684\u8bbf\u95ee\uff08 --resource-pattern-type Prefixed \uff09\u3002\u8fd9\u5927\u5927\u51cf\u5c11\u4e86\u591a\u79df\u6237\u73af\u5883\u4e2d\u4fdd\u62a4\u4e3b\u9898\u7684\u7ba1\u7406\u5f00\u9500\uff1a\u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u66f4\u9ad8\u7684\u5f00\u53d1\u4fbf\u5229\u6027\uff08\u66f4\u5bbd\u677e\u7684\u6743\u9650\uff0c\u4f7f\u7528\u66f4\u5c11\u548c\u66f4\u5e7f\u6cdb\u7684 ACL\uff09\u4e0e\u66f4\u4e25\u683c\u7684\u5b89\u5168\u6027\uff08\u66f4\u4e25\u683c\u7684\u6743\u9650\uff0c\u4f7f\u7528\u66f4\u591a\u548c\u66f4\u5e7f\u6cdb\u7684 ACL\uff09\u4e4b\u95f4\u8fdb\u884c\u6743\u8861\u3002\u66f4\u7a84\u7684 ACL\uff09\u3002 \u5728\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c\u7528\u6237 Alice\uff08ACME \u516c\u53f8 InfoSec \u56e2\u961f\u7684\u65b0\u6210\u5458\uff09\u88ab\u6388\u4e88\u5bf9\u540d\u79f0\u4ee5\u201cacme.infosec.\u201d\u5f00\u5934\u7684\u6240\u6709\u4e3b\u9898\u7684\u5199\u5165\u6743\u9650\uff0c\u4f8b\u5982\u201cacme.infosec.telemetry.logins\u201d\u548c\u201cacme.infosec.logins\u201d\u3002 infosec.syslogs.events\u201d\u3002 # Grant permissions to user Alice $ bin/kafka-acls.sh \\ --bootstrap-server broker1:9092 \\ --add --allow-principal User:Alice \\ --producer \\ --resource-pattern-type prefixed --topic acme.infosec. \u60a8\u53ef\u4ee5\u7c7b\u4f3c\u5730\u4f7f\u7528\u6b64\u65b9\u6cd5\u6765\u9694\u79bb\u540c\u4e00\u5171\u4eab\u96c6\u7fa4\u4e0a\u7684\u4e0d\u540c\u5ba2\u6237\u3002 \u9694\u79bb\u79df\u6237\uff1a\u914d\u989d\u3001\u901f\u7387\u9650\u5236\u3001\u9650\u5236 \u591a\u79df\u6237\u96c6\u7fa4\u901a\u5e38\u5e94\u914d\u7f6e \u914d\u989d \uff0c\u4ee5\u9632\u6b62\u7528\u6237\uff08\u79df\u6237\uff09\u5360\u7528\u8fc7\u591a\u96c6\u7fa4\u8d44\u6e90\uff0c\u4f8b\u5982\u5f53\u4ed6\u4eec\u5c1d\u8bd5\u5199\u5165\u6216\u8bfb\u53d6\u5927\u91cf\u6570\u636e\u65f6\uff0c\u6216\u4ee5\u8fc7\u9ad8\u7684\u901f\u7387\u5411\u4ee3\u7406\u521b\u5efa\u8bf7\u6c42\u65f6\u3002\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7f51\u7edc\u9971\u548c\u3001\u5784\u65ad\u4ee3\u7406\u8d44\u6e90\u5e76\u5f71\u54cd\u5176\u4ed6\u5ba2\u6237\u7aef\u2014\u2014\u6240\u6709\u8fd9\u4e9b\u90fd\u662f\u60a8\u5e0c\u671b\u5728\u5171\u4eab\u73af\u5883\u4e2d\u907f\u514d\u7684\u3002 \u5ba2\u6237\u7aef\u914d\u989d\uff1a Kafka \u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684\uff08\u6bcf\u7528\u6237\u4e3b\u4f53\uff09\u5ba2\u6237\u7aef\u914d\u989d\u3002\u7531\u4e8e\u5ba2\u6237\u7aef\u7684\u914d\u989d\u4e0e\u5ba2\u6237\u7aef\u5199\u5165\u6216\u8bfb\u53d6\u54ea\u4e2a\u4e3b\u9898\u65e0\u5173\uff0c\u56e0\u6b64\u5b83\u4eec\u662f\u5728\u591a\u79df\u6237\u96c6\u7fa4\u4e2d\u5206\u914d\u8d44\u6e90\u7684\u4fbf\u6377\u4e14\u6709\u6548\u7684\u5de5\u5177\u3002 \u4f8b\u5982\uff0c\u8bf7\u6c42\u901f\u7387\u914d\u989d\u901a\u8fc7\u9650\u5236\u4ee3\u7406\u5728 \u8bf7\u6c42\u5904\u7406\u8def\u5f84 \u4e0a\u82b1\u8d39\u7684\u65f6\u95f4\u6765\u5e2e\u52a9\u9650\u5236\u7528\u6237\u5bf9\u4ee3\u7406 CPU \u4f7f\u7528\u7387\u7684\u5f71\u54cd \u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5728\u591a\u79df\u6237\u96c6\u7fa4\u4e2d\uff0c\u4f7f\u7528\u8bf7\u6c42\u901f\u7387\u914d\u989d\u9694\u79bb\u7528\u6237\u6bd4\u8bbe\u7f6e\u4f20\u5165/\u4f20\u51fa\u7f51\u7edc\u5e26\u5bbd\u914d\u989d\u5f71\u54cd\u66f4\u5927\uff0c\u56e0\u4e3a\u7528\u4e8e\u5904\u7406\u8bf7\u6c42\u7684\u4ee3\u7406 CPU \u4f7f\u7528\u7387\u8fc7\u9ad8\u4f1a\u964d\u4f4e\u6709\u6548\u5e26\u5bbdbroker\u53ef\u4ee5\u63d0\u4f9b\u670d\u52a1\u3002\u6b64\u5916\uff0c\u7ba1\u7406\u5458\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u4e3b\u9898\u64cd\u4f5c\u7684\u914d\u989d\uff08\u4f8b\u5982\u521b\u5efa\u3001\u5220\u9664\u548c\u66f4\u6539\uff09\uff0c\u4ee5\u9632\u6b62 Kafka \u96c6\u7fa4\u56e0\u9ad8\u5e76\u53d1\u4e3b\u9898\u64cd\u4f5c\u800c\u4e0d\u582a\u91cd\u8d1f\uff08\u8bf7\u53c2\u9605 KIP-599 \u548c\u914d\u989d\u7c7b\u578b controller_mutation_rate \uff09\u3002 \u670d\u52a1\u5668\u914d\u989d\uff1a Kafka\u8fd8\u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684broker\u7aef\u914d\u989d\u3002 \u4f8b\u5982\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u8bbe\u7f6e\u4ee3\u7406\u63a5\u53d7\u65b0\u8fde\u63a5\u7684 \u901f\u7387\u9650\u5236\u3001\u8bbe\u7f6e \u6bcf\u4e2a\u4ee3\u7406\u7684\u6700\u5927\u8fde\u63a5\u6570\u6216\u8bbe\u7f6e\u5141\u8bb8 \u6765\u81ea\u7279\u5b9a IP \u5730\u5740\u7684 \u6700\u5927\u8fde\u63a5\u6570\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u914d\u989d\u6982\u8ff0 \u548c \u5982\u4f55\u8bbe\u7f6e\u914d\u989d \u3002 \u76d1\u63a7\u4e0e\u8ba1\u91cf \u76d1\u63a7 \u662f\u4e00\u4e2a\u66f4\u5e7f\u6cdb\u7684\u4e3b\u9898\uff0c\u5728\u6587\u6863\u7684 \u5176\u4ed6\u90e8\u5206 \u4e2d\u6709\u4ecb\u7ecd\u3002\u4efb\u4f55 Kafka \u73af\u5883\uff08\u5c24\u5176\u662f\u591a\u79df\u6237\u73af\u5883\uff09\u7684\u7ba1\u7406\u5458\u90fd\u5e94\u6839\u636e\u8fd9\u4e9b\u8bf4\u660e\u8bbe\u7f6e\u76d1\u63a7\u3002Kafka \u652f\u6301\u5e7f\u6cdb\u7684\u6307\u6807\uff0c\u4f8b\u5982\u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\u5931\u8d25\u7387\u3001\u8bf7\u6c42\u5ef6\u8fdf\u3001\u6d88\u8d39\u8005\u6ede\u540e\u3001\u6d88\u8d39\u8005\u7ec4\u603b\u6570\u3001\u4e0a\u4e00\u8282\u4e2d\u63cf\u8ff0\u7684\u914d\u989d\u6307\u6807\u7b49\u7b49\u3002 \u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u76d1\u63a7\u914d\u7f6e\u4e3a\u8ddf\u8e2a\u4e3b\u9898\u5206\u533a\u7684\u5927\u5c0f\uff08\u4f7f\u7528 JMX \u6307\u6807 kafka.log.Log.Size.<TOPIC-NAME> \uff09\uff0c\u4ece\u800c\u8ddf\u8e2a\u4e3b\u9898\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u7684\u603b\u5927\u5c0f\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u5f53\u5171\u4eab\u96c6\u7fa4\u4e0a\u7684\u79df\u6237\u5373\u5c06\u4f7f\u7528\u8fc7\u591a\u5b58\u50a8\u7a7a\u95f4\u65f6\u53d1\u51fa\u7684\u8b66\u62a5\u3002 \u591a\u79df\u6237\u548c\u5730\u7406\u590d\u5236 Kafka \u5141\u8bb8\u60a8\u8de8\u4e0d\u540c\u96c6\u7fa4\u5171\u4eab\u6570\u636e\uff0c\u8fd9\u4e9b\u96c6\u7fa4\u53ef\u80fd\u4f4d\u4e8e\u4e0d\u540c\u7684\u5730\u7406\u533a\u57df\u3001\u6570\u636e\u4e2d\u5fc3\u7b49\u3002\u9664\u4e86\u707e\u96be\u6062\u590d\u7b49\u7528\u4f8b\u4e4b\u5916\uff0c\u5f53\u591a\u79df\u6237\u8bbe\u7f6e\u9700\u8981\u96c6\u7fa4\u95f4\u6570\u636e\u5171\u4eab\u65f6\uff0c\u6b64\u529f\u80fd\u975e\u5e38\u6709\u7528\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5f02\u5730\u590d\u5236\uff08\u8de8\u96c6\u7fa4\u6570\u636e\u955c\u50cf\uff09 \u90e8\u5206\u3002 \u8fdb\u4e00\u6b65\u7684\u8003\u8651 \u6570\u636e\u5408\u7ea6\uff1a \u60a8\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u4e8b\u4ef6\u6a21\u5f0f\u5728\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4e4b\u95f4\u5b9a\u4e49\u6570\u636e\u5951\u7ea6\u3002\u8fd9\u786e\u4fdd\u5199\u5165 Kafka \u7684\u4e8b\u4ef6\u59cb\u7ec8\u53ef\u4ee5\u518d\u6b21\u6b63\u786e\u8bfb\u53d6\uff0c\u5e76\u9632\u6b62\u5199\u5165\u683c\u5f0f\u9519\u8bef\u6216\u635f\u574f\u7684\u4e8b\u4ef6\u3002\u5b9e\u73b0\u6b64\u76ee\u6807\u7684\u6700\u4f73\u65b9\u6cd5\u662f\u4e0e\u96c6\u7fa4\u4e00\u8d77\u90e8\u7f72\u6240\u8c13\u7684\u6a21\u5f0f\u6ce8\u518c\u8868\u3002\uff08Kafka \u4e0d\u5305\u542b\u6a21\u5f0f\u6ce8\u518c\u8868\uff0c\u4f46\u6709\u53ef\u7528\u7684\u7b2c\u4e09\u65b9\u5b9e\u73b0\u3002\uff09\u6a21\u5f0f\u6ce8\u518c\u8868\u7ba1\u7406\u4e8b\u4ef6\u6a21\u5f0f\u5e76\u5c06\u6a21\u5f0f\u6620\u5c04\u5230\u4e3b\u9898\uff0c\u4ee5\u4fbf\u751f\u4ea7\u8005\u77e5\u9053\u54ea\u4e9b\u4e3b\u9898\u6b63\u5728\u63a5\u53d7\u54ea\u4e9b\u7c7b\u578b\uff08\u6a21\u5f0f\uff09\u7684\u4e8b\u4ef6\uff0c\u4ee5\u53ca\u6d88\u8d39\u8005\u77e5\u9053\u5982\u4f55\u8bfb\u53d6\u548c\u89e3\u6790\u4e3b\u9898\u4e2d\u7684\u4e8b\u4ef6\u3002\u4e00\u4e9b\u6ce8\u518c\u8868\u5b9e\u73b0\u63d0\u4f9b\u4e86\u66f4\u591a\u529f\u80fd\uff0c\u4f8b\u5982\u67b6\u6784\u6f14\u53d8\u3001\u5b58\u50a8\u6240\u6709\u67b6\u6784\u7684\u5386\u53f2\u8bb0\u5f55\u4ee5\u53ca\u67b6\u6784\u517c\u5bb9\u6027\u8bbe\u7f6e\u3002 6.5 Kafka\u914d\u7f6e \u91cd\u8981\u7684\u5ba2\u6237\u7aef\u914d\u7f6e \u6700\u91cd\u8981\u7684\u751f\u4ea7\u8005\u914d\u7f6e\u662f\uff1a \u786e\u8ba4 \u538b\u7f29 \u6279\u91cf\u5927\u5c0f \u6700\u91cd\u8981\u7684\u6d88\u8d39\u8005\u914d\u7f6e\u662f\u83b7\u53d6\u5927\u5c0f\u3002 \u6240\u6709\u914d\u7f6e\u90fd\u8bb0\u5f55\u5728 \u914d\u7f6e \u90e8\u5206\u4e2d\u3002 \u751f\u4ea7\u670d\u52a1\u5668\u914d\u7f6e \u4ee5\u4e0b\u662f\u751f\u4ea7\u670d\u52a1\u5668\u914d\u7f6e\u793a\u4f8b\uff1a # ZooKeeper zookeeper.connect=[list of ZooKeeper servers] # Log configuration num.partitions=8 default.replication.factor=3 log.dir=[List of directories. Kafka should have its own dedicated disk(s) or SSD(s).] # Other configurations broker.id=[An integer. Start with 0 and increment by 1 for each new broker.] listeners=[list of listeners] auto.create.topics.enable=false min.insync.replicas=2 queued.max.requests=[number of concurrent requests] \u6211\u4eec\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u5728\u4e0d\u540c\u7684\u7528\u4f8b\u4e4b\u95f4\u5b58\u5728\u5f88\u5927\u5dee\u5f02\u3002 6.6 Java\u7248\u672c \u652f\u6301 Java 8\u3001Java 11 \u548c Java 17\u3002\u8bf7\u6ce8\u610f\uff0c\u81ea Apache Kafka 3.0 \u8d77\uff0cJava 8 \u652f\u6301\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728 Apache Kafka 4.0 \u4e2d\u5220\u9664\u3002\u5982\u679c\u542f\u7528 TLS\uff0cJava 11 \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u6027\u80fd\u4f1a\u663e\u7740\u63d0\u9ad8\uff0c\u56e0\u6b64\u5f3a\u70c8\u63a8\u8350\u5b83\u4eec\uff08\u5b83\u4eec\u8fd8\u5305\u62ec\u8bb8\u591a\u5176\u4ed6\u6027\u80fd\u6539\u8fdb\uff1aG1GC\u3001CRC32C\u3001\u7d27\u51d1\u5b57\u7b26\u4e32\u3001\u7ebf\u7a0b\u672c\u5730\u63e1\u624b\u7b49\uff09\u3002\u4ece\u5b89\u5168\u89d2\u5ea6\u6765\u770b\uff0c\u6211\u4eec\u63a8\u8350\u6700\u65b0\u53d1\u5e03\u7684\u8865\u4e01\u7248\u672c\uff0c\u56e0\u4e3a\u65e7\u7684\u514d\u8d39\u7248\u672c\u5df2\u62ab\u9732\u4e86\u5b89\u5168\u6f0f\u6d1e\u3002\u4f7f\u7528\u57fa\u4e8e OpenJDK \u7684 Java \u5b9e\u73b0\uff08\u5305\u62ec Oracle JDK\uff09\u8fd0\u884c Kafka \u7684\u5178\u578b\u53c2\u6570\u662f\uff1a -Xmx6g -Xms6g -XX:MetaspaceSize=96m -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:G1HeapRegionSize=16M -XX:MinMetaspaceFreeRatio=50 -XX:MaxMetaspaceFreeRatio=80 -XX:+ExplicitGCInvokesConcurrent \u4f5c\u4e3a\u53c2\u8003\uff0c\u4ee5\u4e0b\u662f\u4f7f\u7528\u4e0a\u8ff0 Java \u53c2\u6570\u7684 LinkedIn \u6700\u7e41\u5fd9\u96c6\u7fa4\u4e4b\u4e00\uff08\u9ad8\u5cf0\u671f\uff09\u7684\u7edf\u8ba1\u6570\u636e\uff1a 60 \u540dbroker 50k \u5206\u533a\uff08\u590d\u5236\u56e0\u5b50 2\uff09 800k \u6d88\u606f/\u79d2 \u5165\u7ad9 300 MB/\u79d2\uff0c\u51fa\u7ad9 1 GB/\u79d2\u4ee5\u4e0a \u8be5\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u7684 90% GC \u6682\u505c\u65f6\u95f4\u7ea6\u4e3a 21 \u6beb\u79d2\uff0c\u6bcf\u79d2\u5c11\u4e8e 1 \u6b21\u5e74\u8f7b GC\u3002 6.7 \u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf \u6211\u4eec\u4f7f\u7528\u5177\u6709 24GB \u5185\u5b58\u7684\u53cc\u56db\u6838 Intel Xeon \u673a\u5668\u3002 \u60a8\u9700\u8981\u8db3\u591f\u7684\u5185\u5b58\u6765\u7f13\u51b2\u6d3b\u52a8\u7684\u8bfb\u53d6\u5668\u548c\u5199\u5165\u5668\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5047\u8bbe\u60a8\u5e0c\u671b\u80fd\u591f\u7f13\u51b2 30 \u79d2\u5e76\u5c06\u5185\u5b58\u9700\u6c42\u8ba1\u7b97\u4e3a write_throughput*30 \u6765\u5bf9\u5185\u5b58\u9700\u6c42\u8fdb\u884c\u7c97\u7565\u4f30\u8ba1\u3002 \u78c1\u76d8\u541e\u5410\u91cf\u5f88\u91cd\u8981\u3002\u6211\u4eec\u6709 8x7200 rpm SATA \u9a71\u52a8\u5668\u3002\u4e00\u822c\u6765\u8bf4\u78c1\u76d8\u541e\u5410\u91cf\u662f\u6027\u80fd\u74f6\u9888\uff0c\u78c1\u76d8\u8d8a\u591a\u8d8a\u597d\u3002\u6839\u636e\u60a8\u914d\u7f6e\u5237\u65b0\u884c\u4e3a\u7684\u65b9\u5f0f\uff0c\u60a8\u53ef\u80fd\u4f1a\u4e5f\u53ef\u80fd\u4e0d\u4f1a\u4ece\u66f4\u6602\u8d35\u7684\u78c1\u76d8\u4e2d\u53d7\u76ca\uff08\u5982\u679c\u60a8\u7ecf\u5e38\u5f3a\u5236\u5237\u65b0\uff0c\u90a3\u4e48\u66f4\u9ad8 RPM \u7684 SAS \u9a71\u52a8\u5668\u53ef\u80fd\u4f1a\u66f4\u597d\uff09\u3002 \u64cd\u4f5c\u7cfb\u7edf Kafka\u5e94\u8be5\u53ef\u4ee5\u5728\u4efb\u4f55unix\u7cfb\u7edf\u4e0a\u8fd0\u884c\u826f\u597d\uff0c\u5e76\u4e14\u5df2\u7ecf\u5728Linux\u548cSolaris\u4e0a\u8fdb\u884c\u4e86\u6d4b\u8bd5\u3002 \u6211\u4eec\u53d1\u73b0\u5728 Windows \u4e0a\u8fd0\u884c\u65f6\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u5e76\u4e14 Windows \u76ee\u524d\u4e0d\u662f\u4e00\u4e2a\u5f97\u5230\u826f\u597d\u652f\u6301\u7684\u5e73\u53f0\uff0c\u4f46\u6211\u4eec\u5f88\u4e50\u610f\u5bf9\u6b64\u8fdb\u884c\u66f4\u6539\u3002 \u5b83\u4e0d\u592a\u53ef\u80fd\u9700\u8981\u592a\u591a\u64cd\u4f5c\u7cfb\u7edf\u7ea7\u522b\u7684\u8c03\u6574\uff0c\u4f46\u5b58\u5728\u4e09\u4e2a\u6f5c\u5728\u91cd\u8981\u7684\u64cd\u4f5c\u7cfb\u7edf\u7ea7\u522b\u914d\u7f6e\uff1a \u6587\u4ef6\u63cf\u8ff0\u7b26\u9650\u5236\uff1aKafka \u4f7f\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26\u6765\u8868\u793a\u65e5\u5fd7\u6bb5\u548c\u6253\u5f00\u7684\u8fde\u63a5\u3002\u5982\u679c\u4ee3\u7406\u6258\u7ba1\u8bb8\u591a\u5206\u533a\uff0c\u8bf7\u8003\u8651\u4ee3\u7406\u9664\u4e86\u4ee3\u7406\u5efa\u7acb\u7684\u8fde\u63a5\u6570\u4e4b\u5916\uff0c\u8fd8\u81f3\u5c11\u9700\u8981 (number_of_partitions)*(partition_size/segment_size) \u6765\u8ddf\u8e2a\u6240\u6709\u65e5\u5fd7\u6bb5\u3002\u6211\u4eec\u5efa\u8bae\u4ee3\u7406\u8fdb\u7a0b\u81f3\u5c11\u4f7f\u7528 100000 \u4e2a\u5141\u8bb8\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4f5c\u4e3a\u8d77\u70b9\u3002\u6ce8\u610f\uff1ammap() \u51fd\u6570\u6dfb\u52a0\u5bf9\u4e0e\u6587\u4ef6\u63cf\u8ff0\u7b26 fildes \u5173\u8054\u7684\u6587\u4ef6\u7684\u989d\u5916\u5f15\u7528\uff0c\u8be5\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e0a\u7684\u540e\u7eed close() \u4e0d\u4f1a\u5220\u9664\u8be5\u5f15\u7528\u3002\u5f53\u4e0d\u518d\u6709\u5230\u8be5\u6587\u4ef6\u7684\u6620\u5c04\u65f6\uff0c\u8be5\u5f15\u7528\u5c06\u88ab\u5220\u9664\u3002 \u6700\u5927\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f\uff1a\u53ef\u4ee5\u589e\u52a0\u4ee5\u5b9e\u73b0\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u7684\u9ad8\u6027\u80fd\u6570\u636e\u4f20\u8f93\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002 \u8fdb\u7a0b\u53ef\u4ee5\u62e5\u6709\u7684\u5185\u5b58\u6620\u5c04\u533a\u57df\u7684\u6700\u5927\u6570\u91cf\uff08\u4e5f\u79f0\u4e3a vm.max_map_count\uff09\u3002 \u8bf7\u53c2\u9605 Linux \u5185\u6838\u6587\u6863 \u3002\u5728\u8003\u8651\u4ee3\u7406\u53ef\u80fd\u62e5\u6709\u7684\u6700\u5927\u5206\u533a\u6570\u65f6\uff0c\u60a8\u5e94\u8be5\u7559\u610f\u8fd9\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7ea7\u522b\u7684\u5c5e\u6027\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u8bb8\u591a Linux \u7cfb\u7edf\u4e0a\uff0cvm.max_map_count \u7684\u503c\u7ea6\u4e3a 65535\u3002\u6bcf\u4e2a\u5206\u533a\u5206\u914d\u7684\u6bcf\u4e2a\u65e5\u5fd7\u6bb5\u90fd\u9700\u8981\u4e00\u5bf9\u7d22\u5f15/\u65f6\u95f4\u7d22\u5f15\u6587\u4ef6\uff0c\u5e76\u4e14\u6bcf\u4e2a\u6587\u4ef6\u6d88\u8017 1 \u4e2a\u6620\u5c04\u533a\u57df\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6bcf\u4e2a\u65e5\u5fd7\u6bb5\u4f7f\u75282\u4e2a\u5730\u56fe\u533a\u57df\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u5206\u533a\u81f3\u5c11\u9700\u8981 2 \u4e2a\u6620\u5c04\u533a\u57df\uff0c\u53ea\u8981\u5b83\u6258\u7ba1\u5355\u4e2a\u65e5\u5fd7\u6bb5\u5373\u53ef\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u4ee3\u7406\u4e0a\u521b\u5efa 50000 \u4e2a\u5206\u533a\u5c06\u5bfc\u81f4\u5206\u914d 100000 \u4e2a\u6620\u5c04\u533a\u57df\uff0c\u5e76\u53ef\u80fd\u5728\u5177\u6709\u9ed8\u8ba4 vm.max_map_count \u7684\u7cfb\u7edf\u4e0a\u5bfc\u81f4\u4ee3\u7406\u5d29\u6e83\u5e76\u51fa\u73b0 OutOfMemoryError\uff08\u6620\u5c04\u5931\u8d25\uff09\u3002\u8bf7\u8bb0\u4f4f\uff0c\u6bcf\u4e2a\u5206\u533a\u7684\u65e5\u5fd7\u6bb5\u6570\u6839\u636e\u6bb5\u5927\u5c0f\u3001\u8d1f\u8f7d\u5f3a\u5ea6\u3001\u4fdd\u7559\u7b56\u7565\u4ee5\u53ca\u901a\u5e38\u60c5\u51b5\u4e0b\u7684\u53d8\u5316\u800c\u53d8\u5316 \u78c1\u76d8\u548c\u6587\u4ef6\u7cfb\u7edf \u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u591a\u4e2a\u9a71\u52a8\u5668\u6765\u83b7\u5f97\u826f\u597d\u7684\u541e\u5410\u91cf\uff0c\u5e76\u4e14\u4e0d\u8981\u4e0e\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6216\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u6587\u4ef6\u7cfb\u7edf\u6d3b\u52a8\u5171\u4eab\u7528\u4e8e Kafka \u6570\u636e\u7684\u76f8\u540c\u9a71\u52a8\u5668\uff0c\u4ee5\u786e\u4fdd\u826f\u597d\u7684\u5ef6\u8fdf\u3002\u60a8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u9a71\u52a8\u5668\u4e00\u8d77 RAID \u5230\u5355\u4e2a\u5377\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u9a71\u52a8\u5668\u683c\u5f0f\u5316\u5e76\u5b89\u88c5\u4e3a\u5176\u81ea\u5df1\u7684\u76ee\u5f55\u3002\u7531\u4e8e Kafka \u5177\u6709\u590d\u5236\u529f\u80fd\uff0c\u56e0\u6b64 RAID \u63d0\u4f9b\u7684\u5197\u4f59\u4e5f\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u7ea7\u522b\u63d0\u4f9b\u3002\u8fd9\u79cd\u9009\u62e9\u6709\u51e0\u4e2a\u6743\u8861\u3002 \u5982\u679c\u914d\u7f6e\u591a\u4e2a\u6570\u636e\u76ee\u5f55\uff0c\u5206\u533a\u5c06\u5faa\u73af\u5206\u914d\u7ed9\u6570\u636e\u76ee\u5f55\u3002\u6bcf\u4e2a\u5206\u533a\u5c06\u5b8c\u5168\u4f4d\u4e8e\u4e00\u4e2a\u6570\u636e\u76ee\u5f55\u4e2d\u3002\u5982\u679c\u5206\u533a\u4e4b\u95f4\u7684\u6570\u636e\u6ca1\u6709\u5f88\u597d\u5730\u5e73\u8861\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u78c1\u76d8\u4e4b\u95f4\u7684\u8d1f\u8f7d\u4e0d\u5e73\u8861\u3002 RAID \u5728\u5e73\u8861\u78c1\u76d8\u4e4b\u95f4\u7684\u8d1f\u8f7d\u65b9\u9762\u53ef\u80fd\u4f1a\u505a\u5f97\u66f4\u597d\uff08\u5c3d\u7ba1\u770b\u8d77\u6765\u5e76\u4e0d\u603b\u662f\u5982\u6b64\uff09\uff0c\u56e0\u4e3a\u5b83\u5728\u8f83\u4f4e\u7ea7\u522b\u4e0a\u5e73\u8861\u8d1f\u8f7d\u3002RAID \u7684\u4e3b\u8981\u7f3a\u70b9\u662f\u5b83\u901a\u5e38\u4f1a\u4e25\u91cd\u5f71\u54cd\u5199\u5165\u541e\u5410\u91cf\u5e76\u51cf\u5c11\u53ef\u7528\u78c1\u76d8\u7a7a\u95f4\u3002 RAID \u7684\u53e6\u4e00\u4e2a\u6f5c\u5728\u597d\u5904\u662f\u80fd\u591f\u5bb9\u5fcd\u78c1\u76d8\u6545\u969c\u3002\u7136\u800c\uff0c\u6211\u4eec\u7684\u7ecf\u9a8c\u662f\uff0c\u91cd\u5efa RAID \u9635\u5217\u7684 I/O \u5bc6\u96c6\u7a0b\u5ea6\u5f88\u9ad8\uff0c\u4ee5\u81f3\u4e8e\u5b83\u4f1a\u6709\u6548\u5730\u7981\u7528\u670d\u52a1\u5668\uff0c\u56e0\u6b64\u8fd9\u5e76\u4e0d\u80fd\u63d0\u4f9b\u592a\u591a\u771f\u6b63\u7684\u53ef\u7528\u6027\u6539\u8fdb\u3002 \u5e94\u7528\u7a0b\u5e8f\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5237\u65b0\u7ba1\u7406 Kafka \u603b\u662f\u7acb\u5373\u5c06\u6240\u6709\u6570\u636e\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u652f\u6301\u914d\u7f6e\u5237\u65b0\u7b56\u7565\u7684\u529f\u80fd\uff0c\u8be5\u7b56\u7565\u63a7\u5236\u4f55\u65f6\u4f7f\u7528\u5237\u65b0\u5c06\u6570\u636e\u5f3a\u5236\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\u4e2d\u53d6\u51fa\u5e76\u5199\u5165\u78c1\u76d8\u3002\u53ef\u4ee5\u63a7\u5236\u6b64\u5237\u65b0\u7b56\u7565\uff0c\u4ee5\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u6216\u5728\u5199\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u6d88\u606f\u540e\u5f3a\u5236\u5c06\u6570\u636e\u5199\u5165\u78c1\u76d8\u3002\u6b64\u914d\u7f6e\u6709\u591a\u79cd\u9009\u62e9\u3002 Kafka \u6700\u7ec8\u5fc5\u987b\u8c03\u7528 fsync \u624d\u80fd\u77e5\u9053\u6570\u636e\u5df2\u5237\u65b0\u3002\u5f53\u4ece\u4efb\u4f55\u672a\u77e5\u7684 fsync \u65e5\u5fd7\u6bb5\u7684\u5d29\u6e83\u4e2d\u6062\u590d\u65f6\uff0cKafka \u5c06\u901a\u8fc7\u68c0\u67e5\u5176 CRC \u6765\u68c0\u67e5\u6bcf\u6761\u6d88\u606f\u7684\u5b8c\u6574\u6027\uff0c\u5e76\u91cd\u5efa\u968f\u9644\u7684\u504f\u79fb\u91cf\u7d22\u5f15\u6587\u4ef6\uff0c\u4f5c\u4e3a\u542f\u52a8\u65f6\u6267\u884c\u7684\u6062\u590d\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\u3002 \u8bf7\u6ce8\u610f\uff0cKafka \u4e2d\u7684\u6301\u4e45\u6027\u4e0d\u9700\u8981\u5c06\u6570\u636e\u540c\u6b65\u5230\u78c1\u76d8\uff0c\u56e0\u4e3a\u6545\u969c\u8282\u70b9\u59cb\u7ec8\u4f1a\u4ece\u5176\u526f\u672c\u4e2d\u6062\u590d\u3002 \u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u5237\u65b0\u8bbe\u7f6e\uff0c\u5b8c\u5168\u7981\u7528\u5e94\u7528\u7a0b\u5e8f fsync\u3002\u8fd9\u610f\u5473\u7740\u4f9d\u8d56\u64cd\u4f5c\u7cfb\u7edf\u5b8c\u6210\u7684\u540e\u53f0\u5237\u65b0\u548c Kafka \u81ea\u5df1\u7684\u540e\u53f0\u5237\u65b0\u3002\u8fd9\u4e3a\u5927\u591a\u6570\u7528\u9014\u63d0\u4f9b\u4e86\u6700\u597d\u7684\u7279\u6027\uff1a\u65e0\u9700\u8c03\u8282\u65cb\u94ae\u3001\u51fa\u8272\u7684\u541e\u5410\u91cf\u548c\u5ef6\u8fdf\u4ee5\u53ca\u5b8c\u5168\u6062\u590d\u4fdd\u8bc1\u3002\u6211\u4eec\u901a\u5e38\u8ba4\u4e3a\u590d\u5236\u63d0\u4f9b\u7684\u4fdd\u8bc1\u6bd4\u540c\u6b65\u5230\u672c\u5730\u78c1\u76d8\u66f4\u5f3a\uff0c\u4f46\u662f\u504f\u6267\u8005\u53ef\u80fd\u4ecd\u7136\u66f4\u559c\u6b22\u4e24\u8005\uff0c\u5e76\u4e14\u4ecd\u7136\u652f\u6301\u5e94\u7528\u7a0b\u5e8f\u7ea7 fsync \u7b56\u7565\u3002 \u4f7f\u7528\u5e94\u7528\u7a0b\u5e8f\u7ea7\u522b\u5237\u65b0\u8bbe\u7f6e\u7684\u7f3a\u70b9\u662f\uff0c\u5b83\u7684\u78c1\u76d8\u4f7f\u7528\u6a21\u5f0f\u6548\u7387\u8f83\u4f4e\uff08\u5b83\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u91cd\u65b0\u6392\u5e8f\u5199\u5165\u7684\u4f59\u5730\u8f83\u5c0f\uff09\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u5f15\u5165\u5ef6\u8fdf\uff0c\u56e0\u4e3a\u5927\u591a\u6570 Linux \u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684 fsync \u4f1a\u963b\u6b62\u5199\u5165\u6587\u4ef6\uff0c\u800c\u540e\u53f0\u5237\u65b0\u6267\u884c\u66f4\u7ec6\u7c92\u5ea6\u7684\u9875\u9762\u7ea7\u9501\u5b9a\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u60a8\u4e0d\u9700\u8981\u5bf9\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u4efb\u4f55\u4f4e\u7ea7\u8c03\u6574\uff0c\u4f46\u5728\u63a5\u4e0b\u6765\u7684\u51e0\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u5176\u4e2d\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u4ee5\u9632\u5b83\u6709\u7528\u3002 \u4e86\u89e3 Linux \u64cd\u4f5c\u7cfb\u7edf\u5237\u65b0\u884c\u4e3a \u5728 Linux \u4e2d\uff0c\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u7684\u6570\u636e\u4fdd\u7559\u5728 \u9875\u9762\u7f13\u5b58 \u4e2d\uff0c\u76f4\u5230\u5fc5\u987b\u5c06\u5176\u5199\u51fa\u5230\u78c1\u76d8\uff08\u7531\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7ea7 fsync \u6216\u64cd\u4f5c\u7cfb\u7edf\u81ea\u8eab\u7684\u5237\u65b0\u7b56\u7565\uff09\u3002\u6570\u636e\u7684\u5237\u65b0\u662f\u7531\u4e00\u7ec4\u79f0\u4e3a pdflush \u7684\u540e\u53f0\u7ebf\u7a0b\uff08\u6216\u5728 2.6.32 \u540e\u7684\u5185\u6838\u4e2d\u7684\u201cflusher \u7ebf\u7a0b\u201d\uff09\u5b8c\u6210\u7684\u3002 Pdflush \u6709\u4e00\u4e2a\u53ef\u914d\u7f6e\u7684\u7b56\u7565\uff0c\u53ef\u4ee5\u63a7\u5236\u7f13\u5b58\u4e2d\u53ef\u4ee5\u4fdd\u7559\u591a\u5c11\u810f\u6570\u636e\u4ee5\u53ca\u5fc5\u987b\u5c06\u5176\u5199\u56de\u78c1\u76d8\u4e4b\u524d\u7684\u65f6\u95f4\u3002 \u6b64\u5904 \u63cf\u8ff0\u4e86\u8be5\u7b56\u7565\u3002\u5f53 Pdflush \u65e0\u6cd5\u8ddf\u4e0a\u6570\u636e\u5199\u5165\u7684\u901f\u7387\u65f6\uff0c\u6700\u7ec8\u4f1a\u5bfc\u81f4\u5199\u5165\u8fc7\u7a0b\u963b\u585e\uff0c\u4ece\u800c\u4ea7\u751f\u5199\u5165\u5ef6\u8fdf\uff0c\u4ece\u800c\u51cf\u6162\u6570\u636e\u7684\u79ef\u7d2f\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u67e5\u770b\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u7684\u5f53\u524d\u72b6\u6001 > \u732b /proc/meminfo \u8fd9\u4e9b\u503c\u7684\u542b\u4e49\u5728\u4e0a\u9762\u7684\u94fe\u63a5\u4e2d\u6709\u63cf\u8ff0\u3002 \u4e0e\u8fdb\u7a0b\u5185\u7f13\u5b58\u76f8\u6bd4\uff0c\u4f7f\u7528\u9875\u9762\u7f13\u5b58\u6765\u5b58\u50a8\u5c06\u5199\u51fa\u5230\u78c1\u76d8\u7684\u6570\u636e\u6709\u51e0\u4e2a\u4f18\u70b9\uff1a I/O \u8c03\u5ea6\u7a0b\u5e8f\u4f1a\u5c06\u8fde\u7eed\u7684\u5c0f\u5199\u5165\u6279\u91cf\u5408\u5e76\u4e3a\u66f4\u5927\u7684\u7269\u7406\u5199\u5165\uff0c\u4ece\u800c\u63d0\u9ad8\u541e\u5410\u91cf\u3002 I/O \u8c03\u5ea6\u7a0b\u5e8f\u5c06\u5c1d\u8bd5\u91cd\u65b0\u6392\u5e8f\u5199\u5165\uff0c\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u78c1\u76d8\u5934\u7684\u79fb\u52a8\uff0c\u4ece\u800c\u63d0\u9ad8\u541e\u5410\u91cf\u3002 \u5b83\u4f1a\u81ea\u52a8\u4f7f\u7528\u673a\u5668\u4e0a\u7684\u6240\u6709\u53ef\u7528\u5185\u5b58 \u6587\u4ef6\u7cfb\u7edf\u9009\u62e9 Kafka \u4f7f\u7528\u78c1\u76d8\u4e0a\u7684\u5e38\u89c4\u6587\u4ef6\uff0c\u56e0\u6b64\u5b83\u5bf9\u7279\u5b9a\u6587\u4ef6\u7cfb\u7edf\u6ca1\u6709\u786c\u4f9d\u8d56\u3002\u7136\u800c\uff0c\u4f7f\u7528\u6700\u591a\u7684\u4e24\u4e2a\u6587\u4ef6\u7cfb\u7edf\u662f EXT4 \u548c XFS\u3002\u4ece\u5386\u53f2\u4e0a\u770b\uff0cEXT4 \u7684\u4f7f\u7528\u91cf\u8f83\u591a\uff0c\u4f46\u6700\u8fd1\u5bf9 XFS \u6587\u4ef6\u7cfb\u7edf\u7684\u6539\u8fdb\u8868\u660e\uff0c\u5b83\u5bf9\u4e8e Kafka \u5de5\u4f5c\u8d1f\u8f7d\u5177\u6709\u66f4\u597d\u7684\u6027\u80fd\u7279\u5f81\uff0c\u4e14\u4e0d\u5f71\u54cd\u7a33\u5b9a\u6027\u3002 \u4f7f\u7528\u5404\u79cd\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u548c\u6302\u8f7d\u9009\u9879\uff0c\u5728\u5177\u6709\u5927\u91cf\u6d88\u606f\u8d1f\u8f7d\u7684\u96c6\u7fa4\u4e0a\u6267\u884c\u6bd4\u8f83\u6d4b\u8bd5\u3002Kafka \u4e2d\u53d7\u76d1\u63a7\u7684\u4e3b\u8981\u6307\u6807\u662f\u201c\u8bf7\u6c42\u672c\u5730\u65f6\u95f4\u201d\uff0c\u8868\u793a\u8ffd\u52a0\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002XFS \u5e26\u6765\u4e86\u66f4\u597d\u7684\u672c\u5730\u65f6\u95f4\uff08\u5bf9\u4e8e\u6700\u4f73 EXT4 \u914d\u7f6e\uff0c\u672c\u5730\u65f6\u95f4\u4e3a 160 \u6beb\u79d2\uff0c\u800c 250 \u6beb\u79d2\u4ee5\u4e0a\uff09\uff0c\u5e76\u4e14\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u66f4\u77ed\u3002XFS \u6027\u80fd\u8fd8\u663e\u793a\u78c1\u76d8\u6027\u80fd\u7684\u53d8\u5316\u8f83\u5c0f\u3002 \u4e00\u822c\u6587\u4ef6\u7cfb\u7edf\u6ce8\u91ca \u5bf9\u4e8e\u7528\u4e8e\u6570\u636e\u76ee\u5f55\u7684\u4efb\u4f55\u6587\u4ef6\u7cfb\u7edf\uff0c\u5728 Linux \u7cfb\u7edf\u4e0a\uff0c\u5efa\u8bae\u5728\u6302\u8f7d\u65f6\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\uff1a noatime\uff1a\u6b64\u9009\u9879\u7981\u6b62\u5728\u8bfb\u53d6\u6587\u4ef6\u65f6\u66f4\u65b0\u6587\u4ef6\u7684 atime\uff08\u4e0a\u6b21\u8bbf\u95ee\u65f6\u95f4\uff09\u5c5e\u6027\u3002\u8fd9\u53ef\u4ee5\u6d88\u9664\u5927\u91cf\u7684\u6587\u4ef6\u7cfb\u7edf\u5199\u5165\uff0c\u7279\u522b\u662f\u5728\u5f15\u5bfc\u6d88\u8d39\u8005\u7684\u60c5\u51b5\u4e0b\u3002Kafka \u6839\u672c\u4e0d\u4f9d\u8d56 atime \u5c5e\u6027\uff0c\u56e0\u6b64\u7981\u7528\u5b83\u662f\u5b89\u5168\u7684\u3002 XFS \u6ce8\u91ca XFS \u6587\u4ef6\u7cfb\u7edf\u5177\u6709\u5927\u91cf\u81ea\u52a8\u8c03\u6574\u529f\u80fd\uff0c\u56e0\u6b64\u65e0\u8bba\u662f\u5728\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u65f6\u8fd8\u662f\u5728\u6302\u8f7d\u65f6\uff0c\u90fd\u4e0d\u9700\u8981\u5bf9\u9ed8\u8ba4\u8bbe\u7f6e\u8fdb\u884c\u4efb\u4f55\u66f4\u6539\u3002\u552f\u4e00\u503c\u5f97\u8003\u8651\u7684\u8c03\u6574\u53c2\u6570\u662f\uff1a Largeio\uff1a\u8fd9\u4f1a\u5f71\u54cd stat \u8c03\u7528\u62a5\u544a\u7684\u9996\u9009 I/O \u5927\u5c0f\u3002\u867d\u7136\u8fd9\u53ef\u4ee5\u5728\u8f83\u5927\u7684\u78c1\u76d8\u5199\u5165\u4e0a\u5b9e\u73b0\u66f4\u9ad8\u7684\u6027\u80fd\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u5bf9\u6027\u80fd\u7684\u5f71\u54cd\u5f88\u5c0f\u6216\u6ca1\u6709\u5f71\u54cd\u3002 nobarrier\uff1a\u5bf9\u4e8e\u5177\u6709\u7535\u6c60\u652f\u6301\u7f13\u5b58\u7684\u5e95\u5c42\u8bbe\u5907\uff0c\u6b64\u9009\u9879\u53ef\u4ee5\u901a\u8fc7\u7981\u7528\u5b9a\u671f\u5199\u5165\u5237\u65b0\u6765\u63d0\u4f9b\u66f4\u9ad8\u7684\u6027\u80fd\u3002\u4f46\u662f\uff0c\u5982\u679c\u5e95\u5c42\u8bbe\u5907\u8868\u73b0\u826f\u597d\uff0c\u5b83\u5c06\u5411\u6587\u4ef6\u7cfb\u7edf\u62a5\u544a\u5b83\u4e0d\u9700\u8981\u5237\u65b0\uff0c\u5e76\u4e14\u6b64\u9009\u9879\u5c06\u4e0d\u8d77\u4f5c\u7528\u3002 EXT4\u6ce8\u91ca EXT4 \u662f Kafka \u6570\u636e\u76ee\u5f55\u7684\u4e00\u4e2a\u53ef\u7528\u7684\u6587\u4ef6\u7cfb\u7edf\u9009\u62e9\uff0c\u4f46\u662f\u8981\u5145\u5206\u5229\u7528\u5b83\u7684\u6027\u80fd\u9700\u8981\u8c03\u6574\u591a\u4e2a\u5b89\u88c5\u9009\u9879\u3002\u6b64\u5916\uff0c\u8fd9\u4e9b\u9009\u9879\u5728\u6545\u969c\u60c5\u51b5\u4e0b\u901a\u5e38\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u5e76\u4e14\u4f1a\u5bfc\u81f4\u66f4\u591a\u7684\u6570\u636e\u4e22\u5931\u548c\u635f\u574f\u3002\u5bf9\u4e8e\u5355\u4e2a\u4ee3\u7406\u6545\u969c\uff0c\u8fd9\u5e76\u4e0d\u662f\u4ec0\u4e48\u5927\u95ee\u9898\uff0c\u56e0\u4e3a\u53ef\u4ee5\u64e6\u9664\u78c1\u76d8\u5e76\u4ece\u96c6\u7fa4\u91cd\u5efa\u526f\u672c\u3002\u5728\u591a\u6b21\u6545\u969c\u7684\u60c5\u51b5\u4e0b\uff0c\u4f8b\u5982\u65ad\u7535\uff0c\u8fd9\u53ef\u80fd\u610f\u5473\u7740\u5e95\u5c42\u6587\u4ef6\u7cfb\u7edf\uff08\u4ee5\u53ca\u6570\u636e\uff09\u635f\u574f\u4e14\u96be\u4ee5\u6062\u590d\u3002\u53ef\u4ee5\u8c03\u6574\u4ee5\u4e0b\u9009\u9879\uff1a data=writeback\uff1aExt4 \u9ed8\u8ba4\u4e3a data=ordered\uff0c\u8fd9\u5bf9\u67d0\u4e9b\u5199\u5165\u8bbe\u7f6e\u4e86\u5f3a\u987a\u5e8f\u3002Kafka \u4e0d\u9700\u8981\u8fd9\u79cd\u6392\u5e8f\uff0c\u56e0\u4e3a\u5b83\u5bf9\u6240\u6709\u672a\u5237\u65b0\u7684\u65e5\u5fd7\u8fdb\u884c\u975e\u5e38\u504f\u6267\u7684\u6570\u636e\u6062\u590d\u3002\u6b64\u8bbe\u7f6e\u6d88\u9664\u4e86\u6392\u5e8f\u9650\u5236\uff0c\u5e76\u4e14\u4f3c\u4e4e\u663e\u7740\u51cf\u5c11\u4e86\u5ef6\u8fdf\u3002 \u7981\u7528\u65e5\u5fd7\u8bb0\u5f55\uff1a\u65e5\u5fd7\u8bb0\u5f55\u662f\u4e00\u79cd\u6743\u8861\uff1a\u5b83\u4f7f\u670d\u52a1\u5668\u5d29\u6e83\u540e\u91cd\u65b0\u542f\u52a8\u901f\u5ea6\u66f4\u5feb\uff0c\u4f46\u5b83\u5f15\u5165\u4e86\u5927\u91cf\u989d\u5916\u7684\u9501\u5b9a\uff0c\u4ece\u800c\u589e\u52a0\u4e86\u5199\u5165\u6027\u80fd\u7684\u5dee\u5f02\u3002\u90a3\u4e9b\u4e0d\u5173\u5fc3\u91cd\u65b0\u542f\u52a8\u65f6\u95f4\u5e76\u5e0c\u671b\u51cf\u5c11\u5199\u5165\u5ef6\u8fdf\u5cf0\u503c\u7684\u4e3b\u8981\u6765\u6e90\u7684\u4eba\u53ef\u4ee5\u5b8c\u5168\u5173\u95ed\u65e5\u5fd7\u8bb0\u5f55\u3002 commit=num_secs\uff1a\u8fd9\u4f1a\u8c03\u6574 ext4 \u63d0\u4ea4\u5176\u5143\u6570\u636e\u65e5\u5fd7\u7684\u9891\u7387\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u8f83\u4f4e\u7684\u503c\u53ef\u4ee5\u51cf\u5c11\u5d29\u6e83\u671f\u95f4\u672a\u5237\u65b0\u6570\u636e\u7684\u4e22\u5931\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u66f4\u9ad8\u7684\u503c\u5c06\u63d0\u9ad8\u541e\u5410\u91cf\u3002 nobh\uff1a\u6b64\u8bbe\u7f6e\u63a7\u5236\u4f7f\u7528 data=writeback \u6a21\u5f0f\u65f6\u7684\u9644\u52a0\u6392\u5e8f\u4fdd\u8bc1\u3002\u8fd9\u5bf9\u4e8e Kafka \u6765\u8bf4\u5e94\u8be5\u662f\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u4f9d\u8d56\u4e8e\u5199\u5165\u987a\u5e8f\u5e76\u63d0\u9ad8\u4e86\u541e\u5410\u91cf\u548c\u5ef6\u8fdf\u3002 delalloc\uff1a\u5ef6\u8fdf\u5206\u914d\u610f\u5473\u7740\u6587\u4ef6\u7cfb\u7edf\u5728\u7269\u7406\u5199\u5165\u53d1\u751f\u4e4b\u524d\u907f\u514d\u5206\u914d\u4efb\u4f55\u5757\u3002\u8fd9\u5141\u8bb8 ext4 \u5206\u914d\u8f83\u5927\u7684\u8303\u56f4\u800c\u4e0d\u662f\u8f83\u5c0f\u7684\u9875\u9762\uff0c\u5e76\u6709\u52a9\u4e8e\u786e\u4fdd\u6570\u636e\u6309\u987a\u5e8f\u5199\u5165\u3002\u6b64\u529f\u80fd\u5bf9\u4e8e\u541e\u5410\u91cf\u975e\u5e38\u6709\u7528\u3002\u5b83\u4f3c\u4e4e\u786e\u5b9e\u6d89\u53ca\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e9b\u9501\u5b9a\uff0c\u8fd9\u589e\u52a0\u4e86\u4e00\u4e9b\u5ef6\u8fdf\u5dee\u5f02\u3002 \u66f4\u6362 KRaft \u63a7\u5236\u5668\u78c1\u76d8 metadata.log.dir \u5f53 Kafka \u914d\u7f6e\u4e3a\u4f7f\u7528 KRaft \u65f6\uff0c\u63a7\u5236\u5668\u5c06\u96c6\u7fa4\u5143\u6570\u636e\u5b58\u50a8\u5728-- \u6216\u7b2c\u4e00\u4e2a\u65e5\u5fd7\u76ee\u5f55\uff08\u5982\u679c metadata.log.dir \u672a\u914d\u7f6e\uff09\u4e2d\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u3002 metadata.log.dir \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6587\u6863\u3002 \u5982\u679c\u7531\u4e8e\u786c\u4ef6\u6545\u969c\u6216\u9700\u8981\u66f4\u6362\u786c\u4ef6\u800c\u5bfc\u81f4\u96c6\u7fa4\u5143\u6570\u636e\u76ee\u5f55\u4e2d\u7684\u6570\u636e\u4e22\u5931\uff0c\u5219\u5728\u914d\u7f6e\u65b0\u7684\u63a7\u5236\u5668\u8282\u70b9\u65f6\u5e94\u5c0f\u5fc3\u3002\u5728\u5927\u591a\u6570\u63a7\u5236\u5668\u62e5\u6709\u6240\u6709\u63d0\u4ea4\u7684\u6570\u636e\u4e4b\u524d\uff0c\u4e0d\u5e94\u683c\u5f0f\u5316\u5e76\u542f\u52a8\u65b0\u7684\u63a7\u5236\u5668\u8282\u70b9\u3002\u8981\u786e\u5b9a\u5927\u591a\u6570\u63a7\u5236\u5668\u662f\u5426\u5177\u6709\u5df2\u63d0\u4ea4\u7684\u6570\u636e\uff0c\u8bf7\u8fd0\u884c\u8be5 kafka-metadata-quorum.sh \u5de5\u5177\u6765\u63cf\u8ff0\u590d\u5236\u72b6\u6001\uff1a > bin/kafka-metadata-quorum.sh --bootstrap-server broker_host:port describe --replication NodeId LogEndOffset Lag LastFetchTimestamp LastCaughtUpTimestamp Status 1 25806 0 1662500992757 1662500992757 Leader ... ... ... ... ... ... \u68c0\u67e5\u5e76\u7b49\u5f85\uff0c\u76f4\u5230 Lag \u5bf9\u4e8e\u5927\u591a\u6570\u63a7\u5236\u5668\u6765\u8bf4\u90fd\u5f88\u5c0f\u3002\u5982\u679c\u9886\u5bfc\u8005\u7684\u7ed3\u675f\u504f\u79fb\u91cf\u6ca1\u6709\u589e\u52a0\uff0c\u5219\u53ef\u4ee5\u7b49\u5230\u6ede\u540e\u4e3a 0 \u65f6\u624d\u83b7\u5f97\u591a\u6570\uff1b\u5426\u5219\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u6700\u65b0\u7684\u9886\u5bfc\u8005\u672b\u7aef\u504f\u79fb\u91cf\u5e76\u7b49\u5f85\u6240\u6709\u526f\u672c\u90fd\u5230\u8fbe\u5b83\u3002\u68c0\u67e5\u5e76\u7b49\u5f85\uff0c\u76f4\u5230\u5927\u591a\u6570\u63a7\u5236\u5668\u7684 LastFetchTimestamp \u548c\u5f7c\u6b64\u63a5\u8fd1\u3002 LastCaughtUpTimestamp \u6b64\u65f6\uff0c\u683c\u5f0f\u5316\u63a7\u5236\u5668\u7684\u5143\u6570\u636e\u65e5\u5fd7\u76ee\u5f55\u4f1a\u66f4\u5b89\u5168\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u547d\u4ee4\u6765\u5b8c\u6210 kafka-storage.sh \u3002 > bin/kafka-storage.sh format --cluster-id uuid --config server_properties \u4e0a\u9762\u7684\u547d\u4ee4\u53ef\u80fd bin/kafka-storage.sh format \u4f1a\u5931\u8d25\u5e76\u663e\u793a\u7c7b\u4f3c \u7684\u6d88\u606f Log directory ... is already formatted \u3002\u5f53\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f\u5e76\u4e14\u4ec5\u4e22\u5931\u5143\u6570\u636e\u65e5\u5fd7\u76ee\u5f55\u800c\u4e0d\u4e22\u5931\u5176\u4ed6\u76ee\u5f55\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5e76\u4e14\u53ea\u6709\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u624d\u80fd\u8fd0\u884c kafka-storage.sh format \u5e26\u6709\u8be5 --ignore-formatted \u9009\u9879\u7684\u547d\u4ee4\u3002 \u683c\u5f0f\u5316\u65e5\u5fd7\u76ee\u5f55\u540e\u542f\u52a8 KRaft \u63a7\u5236\u5668\u3002 > /bin/kafka-server-start.sh server_properties 6.8 \u76d1\u63a7 Kafka \u4f7f\u7528 Yammer Metrics \u5728\u670d\u52a1\u5668\u4e2d\u8fdb\u884c\u6307\u6807\u62a5\u544a\u3002Java \u5ba2\u6237\u7aef\u4f7f\u7528 Kafka Metrics\uff0c\u8fd9\u662f\u4e00\u4e2a\u5185\u7f6e\u6307\u6807\u6ce8\u518c\u8868\uff0c\u53ef\u6700\u5927\u7a0b\u5ea6\u5730\u51cf\u5c11\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u4f20\u9012\u4f9d\u8d56\u6027\u3002\u4e24\u8005\u90fd\u901a\u8fc7 JMX \u516c\u5f00\u6307\u6807\uff0c\u5e76\u4e14\u53ef\u4ee5\u914d\u7f6e\u4e3a\u4f7f\u7528\u53ef\u63d2\u5165\u7edf\u8ba1\u62a5\u544a\u5668\u62a5\u544a\u7edf\u8ba1\u4fe1\u606f\u4ee5\u8fde\u63a5\u5230\u60a8\u7684\u76d1\u63a7\u7cfb\u7edf\u3002 \u6240\u6709 Kafka \u901f\u7387\u6307\u6807\u90fd\u6709\u4e00\u4e2a\u76f8\u5e94\u7684\u7d2f\u79ef\u8ba1\u6570\u6307\u6807\uff0c\u540e\u7f00\u4e3a -total \u3002\u4f8b\u5982\uff0c records-consumed-rate \u6709\u4e00\u4e2a\u540d\u4e3a \u7684\u76f8\u5e94\u6307\u6807 records-consumed-total \u3002 \u67e5\u770b\u53ef\u7528\u6307\u6807\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u542f\u52a8 jconsole \u5e76\u5c06\u5176\u6307\u5411\u6b63\u5728\u8fd0\u884c\u7684 kafka \u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\uff1b\u8fd9\u5c06\u5141\u8bb8\u4f7f\u7528 JMX \u6d4f\u89c8\u6240\u6709\u6307\u6807\u3002 \u4f7f\u7528 JMX \u8fdb\u884c\u8fdc\u7a0b\u76d1\u63a7\u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879 Apache Kafka \u9ed8\u8ba4\u7981\u7528\u8fdc\u7a0b JMX\u3002 JMX_PORT \u60a8\u53ef\u4ee5\u901a\u8fc7\u4e3a\u4f7f\u7528 CLI\u542f\u52a8\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u6216\u6807\u51c6 Java \u7cfb\u7edf\u5c5e\u6027\u6765\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u542f\u7528\u8fdc\u7a0b JMX\uff0c\u4ece\u800c\u4f7f\u7528 JMX \u542f\u7528\u8fdc\u7a0b\u76d1\u63a7 \u3002\u5728\u751f\u4ea7\u573a\u666f\u4e2d\u542f\u7528\u8fdc\u7a0b JMX \u65f6\uff0c\u60a8\u5fc5\u987b\u542f\u7528\u5b89\u5168\u6027\uff0c\u4ee5\u786e\u4fdd\u672a\u7ecf\u6388\u6743\u7684\u7528\u6237\u65e0\u6cd5\u76d1\u89c6\u6216\u63a7\u5236\u60a8\u7684\u4ee3\u7406\u6216\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u5b83\u4eec\u8fd0\u884c\u7684\u200b\u200b\u5e73\u53f0\u3002 KAFKA_JMX_OPTS \u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka \u4e2d\u7684 JMX \u8eab\u4efd\u9a8c\u8bc1\u5904\u4e8e\u7981\u7528\u72b6\u6001\uff0c\u5e76\u4e14\u5fc5\u987b\u901a\u8fc7\u4e3a\u4f7f\u7528 CLI \u542f\u52a8\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u6216\u8bbe\u7f6e\u9002\u5f53\u7684 Java \u7cfb\u7edf\u5c5e\u6027\u6765\u8986\u76d6\u751f\u4ea7\u90e8\u7f72\u7684\u5b89\u5168\u914d\u7f6e \u3002\u8bf7\u53c2\u9605 \u4f7f\u7528 JMX \u6280\u672f\u8fdb\u884c\u76d1\u63a7\u548c\u7ba1\u7406 \u6709\u5173\u4fdd\u62a4 JMX \u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u6211\u4eec\u5bf9\u4ee5\u4e0b\u6307\u6807\u8fdb\u884c\u7ed8\u56fe\u548c\u8b66\u62a5\uff1a DESCRIPTION MBEAN NAME NORMAL VALUE Message in rate kafka.server:type=BrokerTopicMetrics,name=MessagesInPerSec,topic=([-.\\w]+) Incoming message rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Byte in rate from clients kafka.server:type=BrokerTopicMetrics,name=BytesInPerSec,topic=([-.\\w]+) Byte in (from the clients) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Byte in rate from other brokers kafka.server:type=BrokerTopicMetrics,name=ReplicationBytesInPerSec Byte in (from the other brokers) rate across all topics. Controller Request rate from Broker kafka.controller:type=ControllerChannelManager,name=RequestRateAndQueueTimeMs,brokerId=([0-9]+) The rate (requests per second) at which the ControllerChannelManager takes requests from the queue of the given broker. And the time it takes for a request to stay in this queue before it is taken from the queue. Controller Event queue size kafka.controller:type=ControllerEventManager,name=EventQueueSize Size of the ControllerEventManager's queue. Controller Event queue time kafka.controller:type=ControllerEventManager,name=EventQueueTimeMs Time that takes for any event (except the Idle event) to wait in the ControllerEventManager's queue before being processed Request rate kafka.network:type=RequestMetrics,name=RequestsPerSec,request={Produce FetchConsumer Error rate kafka.network:type=RequestMetrics,name=ErrorsPerSec,request=([-.\\w]+),error=([-.\\w]+) Number of errors in responses counted per-request-type, per-error-code. If a response contains multiple errors, all are counted. error=NONE indicates successful responses. Produce request rate kafka.server:type=BrokerTopicMetrics,name=TotalProduceRequestsPerSec,topic=([-.\\w]+) Produce request rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Fetch request rate kafka.server:type=BrokerTopicMetrics,name=TotalFetchRequestsPerSec,topic=([-.\\w]+) Fetch request (from clients or followers) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Failed produce request rate kafka.server:type=BrokerTopicMetrics,name=FailedProduceRequestsPerSec,topic=([-.\\w]+) Failed Produce request rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Failed fetch request rate kafka.server:type=BrokerTopicMetrics,name=FailedFetchRequestsPerSec,topic=([-.\\w]+) Failed Fetch request (from clients or followers) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Request size in bytes kafka.network:type=RequestMetrics,name=RequestBytes,request=([-.\\w]+) Size of requests for each request type. Temporary memory size in bytes kafka.network:type=RequestMetrics,name=TemporaryMemoryBytes,request={Produce Fetch} Message conversion time kafka.network:type=RequestMetrics,name=MessageConversionsTimeMs,request={Produce Fetch} Message conversion rate kafka.server:type=BrokerTopicMetrics,name={Produce Fetch}MessageConversionsPerSec,topic=([-.\\w]+) Request Queue Size kafka.network:type=RequestChannel,name=RequestQueueSize Size of the request queue. Byte out rate to clients kafka.server:type=BrokerTopicMetrics,name=BytesOutPerSec,topic=([-.\\w]+) Byte out (to the clients) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Byte out rate to other brokers kafka.server:type=BrokerTopicMetrics,name=ReplicationBytesOutPerSec Byte out (to the other brokers) rate across all topics Rejected byte rate kafka.server:type=BrokerTopicMetrics,name=BytesRejectedPerSec,topic=([-.\\w]+) Rejected byte rate per topic, due to the record batch size being greater than max.message.bytes configuration. Omitting 'topic=(...)' will yield the all-topic rate. Message validation failure rate due to no key specified for compacted topic kafka.server:type=BrokerTopicMetrics,name=NoKeyCompactedTopicRecordsPerSec 0 Message validation failure rate due to invalid magic number kafka.server:type=BrokerTopicMetrics,name=InvalidMagicNumberRecordsPerSec 0 Message validation failure rate due to incorrect crc checksum kafka.server:type=BrokerTopicMetrics,name=InvalidMessageCrcRecordsPerSec 0 Message validation failure rate due to non-continuous offset or sequence number in batch kafka.server:type=BrokerTopicMetrics,name=InvalidOffsetOrSequenceRecordsPerSec 0 Log flush rate and time kafka.log:type=LogFlushStats,name=LogFlushRateAndTimeMs # of offline log directories kafka.log:type=LogManager,name=OfflineLogDirectoryCount 0 Leader election rate kafka.controller:type=ControllerStats,name=LeaderElectionRateAndTimeMs non-zero when there are broker failures Unclean leader election rate kafka.controller:type=ControllerStats,name=UncleanLeaderElectionsPerSec 0 Is controller active on broker kafka.controller:type=KafkaController,name=ActiveControllerCount only one broker in the cluster should have 1 Pending topic deletes kafka.controller:type=KafkaController,name=TopicsToDeleteCount Pending replica deletes kafka.controller:type=KafkaController,name=ReplicasToDeleteCount Ineligible pending topic deletes kafka.controller:type=KafkaController,name=TopicsIneligibleToDeleteCount Ineligible pending replica deletes kafka.controller:type=KafkaController,name=ReplicasIneligibleToDeleteCount # of under replicated partitions ( ISR < # of under minIsr partitions ( ISR < min.insync.replicas) # of at minIsr partitions ( ISR = min.insync.replicas) Producer Id counts kafka.server:type=ReplicaManager,name=ProducerIdCount Count of all producer ids created by transactional and idempotent producers in each replica on the broker Partition counts kafka.server:type=ReplicaManager,name=PartitionCount mostly even across brokers Offline Replica counts kafka.server:type=ReplicaManager,name=OfflineReplicaCount 0 Leader replica counts kafka.server:type=ReplicaManager,name=LeaderCount mostly even across brokers ISR shrink rate kafka.server:type=ReplicaManager,name=IsrShrinksPerSec If a broker goes down, ISR for some of the partitions will shrink. When that broker is up again, ISR will be expanded once the replicas are fully caught up. Other than that, the expected value for both ISR shrink rate and expansion rate is 0. ISR expansion rate kafka.server:type=ReplicaManager,name=IsrExpandsPerSec See above Failed ISR update rate kafka.server:type=ReplicaManager,name=FailedIsrUpdatesPerSec 0 Max lag in messages btw follower and leader replicas kafka.server:type=ReplicaFetcherManager,name=MaxLag,clientId=Replica lag should be proportional to the maximum batch size of a produce request. Lag in messages per follower replica kafka.server:type=FetcherLagMetrics,name=ConsumerLag,clientId=([-.\\w]+),topic=([-.\\w]+),partition=([0-9]+) lag should be proportional to the maximum batch size of a produce request. Requests waiting in the producer purgatory kafka.server:type=DelayedOperationPurgatory,name=PurgatorySize,delayedOperation=Produce non-zero if ack=-1 is used Requests waiting in the fetch purgatory kafka.server:type=DelayedOperationPurgatory,name=PurgatorySize,delayedOperation=Fetch size depends on fetch.wait.max.ms in the consumer Request total time kafka.network:type=RequestMetrics,name=TotalTimeMs,request={Produce FetchConsumer Time the request waits in the request queue kafka.network:type=RequestMetrics,name=RequestQueueTimeMs,request={Produce FetchConsumer Time the request is processed at the leader kafka.network:type=RequestMetrics,name=LocalTimeMs,request={Produce FetchConsumer Time the request waits for the follower kafka.network:type=RequestMetrics,name=RemoteTimeMs,request={Produce FetchConsumer Time the request waits in the response queue kafka.network:type=RequestMetrics,name=ResponseQueueTimeMs,request={Produce FetchConsumer Time to send the response kafka.network:type=RequestMetrics,name=ResponseSendTimeMs,request={Produce FetchConsumer Number of messages the consumer lags behind the producer by. Published by the consumer, not broker. kafka.consumer:type=consumer-fetch-manager-metrics,client-id={client-id} Attribute: records-lag-max The average fraction of time the network processors are idle kafka.network:type=SocketServer,name=NetworkProcessorAvgIdlePercent between 0 and 1, ideally > 0.3 The number of connections disconnected on a processor due to a client not re-authenticating and then using the connection beyond its expiration time for anything other than re-authentication kafka.server:type=socket-server-metrics,listener=[SASL_PLAINTEXT SASL_SSL],networkProcessor=<#>,name=expired-connections-killed-count The total number of connections disconnected, across all processors, due to a client not re-authenticating and then using the connection beyond its expiration time for anything other than re-authentication kafka.network:type=SocketServer,name=ExpiredConnectionsKilledCount ideally 0 when re-authentication is enabled, implying there are no longer any older, pre-2.2.0 clients connecting to this broker The average fraction of time the request handler threads are idle kafka.server:type=KafkaRequestHandlerPool,name=RequestHandlerAvgIdlePercent between 0 and 1, ideally > 0.3 Bandwidth quota metrics per (user, client-id), user or client-id kafka.server:type={Produce Fetch},user=([-.\\w]+),client-id=([-.\\w]+) Request quota metrics per (user, client-id), user or client-id kafka.server:type=Request,user=([-.\\w]+),client-id=([-.\\w]+) Two attributes. throttle-time indicates the amount of time in ms the client was throttled. Ideally = 0. request-time indicates the percentage of time spent in broker network and I/O threads to process requests from client group. For (user, client-id) quotas, both user and client-id are specified. If per-client-id quota is applied to the client, user is not specified. If per-user quota is applied, client-id is not specified. Requests exempt from throttling kafka.server:type=Request exempt-throttle-time indicates the percentage of time spent in broker network and I/O threads to process requests that are exempt from throttling. ZooKeeper client request latency kafka.server:type=ZooKeeperClientMetrics,name=ZooKeeperRequestLatencyMs Latency in milliseconds for ZooKeeper requests from broker. ZooKeeper connection status kafka.server:type=SessionExpireListener,name=SessionState Connection status of broker's ZooKeeper session which may be one of Disconnected Max time to load group metadata kafka.server:type=group-coordinator-metrics,name=partition-load-time-max maximum time, in milliseconds, it took to load offsets and group metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Avg time to load group metadata kafka.server:type=group-coordinator-metrics,name=partition-load-time-avg average time, in milliseconds, it took to load offsets and group metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Max time to load transaction metadata kafka.server:type=transaction-coordinator-metrics,name=partition-load-time-max maximum time, in milliseconds, it took to load transaction metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Avg time to load transaction metadata kafka.server:type=transaction-coordinator-metrics,name=partition-load-time-avg average time, in milliseconds, it took to load transaction metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Rate of transactional verification errors kafka.server:type=AddPartitionsToTxnManager,name=VerificationFailureRate Rate of verifications that returned in failure either from the AddPartitionsToTxn API response or through errors in the AddPartitionsToTxnManager. In steady state 0, but transient errors are expected during rolls and reassignments of the transactional state partition. Time to verify a transactional request kafka.server:type=AddPartitionsToTxnManager,name=VerificationTimeMs The amount of time queueing while a possible previous request is in-flight plus the round trip to the transaction coordinator to verify (or not verify) Consumer Group Offset Count kafka.server:type=GroupMetadataManager,name=NumOffsets Total number of committed offsets for Consumer Groups Consumer Group Count kafka.server:type=GroupMetadataManager,name=NumGroups Total number of Consumer Groups Consumer Group Count, per State kafka.server:type=GroupMetadataManager,name=NumGroups[PreparingRebalance,CompletingRebalance,Empty,Stable,Dead] The number of Consumer Groups in each state: PreparingRebalance, CompletingRebalance, Empty, Stable, Dead Number of reassigning partitions kafka.server:type=ReplicaManager,name=ReassigningPartitions The number of reassigning leader partitions on a broker. Outgoing byte rate of reassignment traffic kafka.server:type=BrokerTopicMetrics,name=ReassignmentBytesOutPerSec 0; non-zero when a partition reassignment is in progress. Incoming byte rate of reassignment traffic kafka.server:type=BrokerTopicMetrics,name=ReassignmentBytesInPerSec 0; non-zero when a partition reassignment is in progress. Size of a partition on disk (in bytes) kafka.log:type=Log,name=Size,topic=([-.\\w]+),partition=([0-9]+) The size of a partition on disk, measured in bytes. Number of log segments in a partition kafka.log:type=Log,name=NumLogSegments,topic=([-.\\w]+),partition=([0-9]+) The number of log segments in a partition. First offset in a partition kafka.log:type=Log,name=LogStartOffset,topic=([-.\\w]+),partition=([0-9]+) The first offset in a partition. Last offset in a partition kafka.log:type=Log,name=LogEndOffset,topic=([-.\\w]+),partition=([0-9]+) The last offset in a partition. Tiered Storage Monitoring \u4ee5\u4e0b\u4e00\u7ec4\u6307\u6807\u53ef\u7528\u4e8e\u76d1\u63a7\u5206\u5c42\u5b58\u50a8\u529f\u80fd\uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Remote Fetch Bytes Per Sec Rate of bytes read from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteFetchBytesPerSec,topic=([-.\\w]+) Remote Fetch Requests Per Sec Rate of read requests from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteFetchRequestsPerSec,topic=([-.\\w]+) Remote Fetch Errors Per Sec Rate of read errors from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteFetchErrorsPerSec,topic=([-.\\w]+) Remote Copy Bytes Per Sec Rate of bytes copied to remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteCopyBytesPerSec,topic=([-.\\w]+) Remote Copy Requests Per Sec Rate of write requests to remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteCopyRequestsPerSec,topic=([-.\\w]+) Remote Copy Errors Per Sec Rate of write errors from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteCopyErrorsPerSec,topic=([-.\\w]+) RemoteLogReader Task Queue Size Size of the queue holding remote storage read tasks org.apache.kafka.storage.internals.log:type=RemoteStorageThreadPool,name=RemoteLogReaderTaskQueueSize RemoteLogReader Avg Idle Percent Average idle percent of thread pool for processing remote storage read tasks org.apache.kafka.storage.internals.log:type=RemoteStorageThreadPool,name=RemoteLogReaderAvgIdlePercent RemoteLogManager Tasks Avg Idle Percent Average idle percent of thread pool for copying data to remote storage kafka.log.remote:type=RemoteLogManager,name=RemoteLogManagerTasksAvgIdlePercent Kraft \u76d1\u63a7\u6307\u6807 \u5141\u8bb8\u76d1\u63a7 KRaft \u4ef2\u88c1\u548c\u5143\u6570\u636e\u65e5\u5fd7\u7684\u6307\u6807\u96c6\u3002 \u8bf7\u6ce8\u610f\uff0c\u4e00\u4e9b\u516c\u5f00\u7684\u6307\u6807\u53d6\u51b3\u4e8e\u8282\u70b9\u7684\u89d2\u8272\uff0c\u5982 process.roles KRaft Quorum Monitoring Metrics \u8fd9\u4e9b\u6307\u6807\u5728 KRaft \u96c6\u7fa4\u4e2d\u7684\u63a7\u5236\u5668\u548c\u4ee3\u7406\u4e0a\u62a5\u544a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Current State The current state of this member; possible values are leader, candidate, voted, follower, unattached, observer. kafka.server:type=raft-metrics,name=current-state Current Leader The current quorum leader's id; -1 indicates unknown. kafka.server:type=raft-metrics,name=current-leader Current Voted The current voted leader's id; -1 indicates not voted for anyone. kafka.server:type=raft-metrics,name=current-vote Current Epoch The current quorum epoch. kafka.server:type=raft-metrics,name=current-epoch High Watermark The high watermark maintained on this member; -1 if it is unknown. kafka.server:type=raft-metrics,name=high-watermark Log End Offset The current raft log end offset. kafka.server:type=raft-metrics,name=log-end-offset Number of Unknown Voter Connections Number of unknown voters whose connection information is not cached. This value of this metric is always 0. kafka.server:type=raft-metrics,name=number-unknown-voter-connections Average Commit Latency The average time in milliseconds to commit an entry in the raft log. kafka.server:type=raft-metrics,name=commit-latency-avg Maximum Commit Latency The maximum time in milliseconds to commit an entry in the raft log. kafka.server:type=raft-metrics,name=commit-latency-max Average Election Latency The average time in milliseconds spent on electing a new leader. kafka.server:type=raft-metrics,name=election-latency-avg Maximum Election Latency The maximum time in milliseconds spent on electing a new leader. kafka.server:type=raft-metrics,name=election-latency-max Fetch Records Rate The average number of records fetched from the leader of the raft quorum. kafka.server:type=raft-metrics,name=fetch-records-rate Append Records Rate The average number of records appended per sec by the leader of the raft quorum. kafka.server:type=raft-metrics,name=append-records-rate Average Poll Idle Ratio The average fraction of time the client's poll() is idle as opposed to waiting for the user code to process records. kafka.server:type=raft-metrics,name=poll-idle-ratio-avg Current Metadata Version Outputs the feature level of the current effective metadata version. kafka.server:type=MetadataLoader,name=CurrentMetadataVersion Metadata Snapshot Load Count The total number of times we have loaded a KRaft snapshot since the process was started. kafka.server:type=MetadataLoader,name=HandleLoadSnapshotCount Latest Metadata Snapshot Size The total size in bytes of the latest snapshot that the node has generated. If none have been generated yet, this is the size of the latest snapshot that was loaded. If no snapshots have been generated or loaded, this is 0. kafka.server:type=SnapshotEmitter,name=LatestSnapshotGeneratedBytes Latest Metadata Snapshot Age The interval in milliseconds since the latest snapshot that the node has generated. If none have been generated yet, this is approximately the time delta since the process was started. kafka.server:type=SnapshotEmitter,name=LatestSnapshotGeneratedAgeMs KRaft Controller Monitoring Metrics METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Active Controller Count The number of Active Controllers on this node. Valid values are '0' or '1'. kafka.controller:type=KafkaController,name=ActiveControllerCount Event Queue Time Ms A Histogram of the time in milliseconds that requests spent waiting in the Controller Event Queue. kafka.controller:type=ControllerEventManager,name=EventQueueTimeMs Event Queue Processing Time Ms A Histogram of the time in milliseconds that requests spent being processed in the Controller Event Queue. kafka.controller:type=ControllerEventManager,name=EventQueueProcessingTimeMs Fenced Broker Count The number of fenced brokers as observed by this Controller. kafka.controller:type=KafkaController,name=FencedBrokerCount Active Broker Count The number of active brokers as observed by this Controller. kafka.controller:type=KafkaController,name=ActiveBrokerCount Global Topic Count The number of global topics as observed by this Controller. kafka.controller:type=KafkaController,name=GlobalTopicCount Global Partition Count The number of global partitions as observed by this Controller. kafka.controller:type=KafkaController,name=GlobalPartitionCount Offline Partition Count The number of offline topic partitions (non-internal) as observed by this Controller. kafka.controller:type=KafkaController,name=OfflinePartitionCount Preferred Replica Imbalance Count The count of topic partitions for which the leader is not the preferred leader. kafka.controller:type=KafkaController,name=PreferredReplicaImbalanceCount Metadata Error Count The number of times this controller node has encountered an error during metadata log processing. kafka.controller:type=KafkaController,name=MetadataErrorCount Last Applied Record Offset The offset of the last record from the cluster metadata partition that was applied by the Controller. kafka.controller:type=KafkaController,name=LastAppliedRecordOffset Last Committed Record Offset The offset of the last record committed to this Controller. kafka.controller:type=KafkaController,name=LastCommittedRecordOffset Last Applied Record Timestamp The timestamp of the last record from the cluster metadata partition that was applied by the Controller. kafka.controller:type=KafkaController,name=LastAppliedRecordTimestamp Last Applied Record Lag Ms The difference between now and the timestamp of the last record from the cluster metadata partition that was applied by the controller. For active Controllers the value of this lag is always zero. kafka.controller:type=KafkaController,name=LastAppliedRecordLagMs ZooKeeper Write Behind Lag The amount of lag in records that ZooKeeper is behind relative to the highest committed record in the metadata log. This metric will only be reported by the active KRaft controller. kafka.controller:type=KafkaController,name=ZkWriteBehindLag ZooKeeper Metadata Snapshot Write Time The number of milliseconds the KRaft controller took reconciling a snapshot into ZooKeeper. kafka.controller:type=KafkaController,name=ZkWriteSnapshotTimeMs ZooKeeper Metadata Delta Write Time The number of milliseconds the KRaft controller took writing a delta into ZK. kafka.controller:type=KafkaController,name=ZkWriteDeltaTimeMs Timed-out Broker Heartbeat Count The number of broker heartbeats that timed out on this controller since the process was started. Note that only active controllers handle heartbeats, so only they will see increases in this metric. kafka.controller:type=KafkaController,name=TimedOutBrokerHeartbeatCount Number Of Operations Started In Event Queue The total number of controller event queue operations that were started. This includes deferred operations. kafka.controller:type=KafkaController,name=EventQueueOperationsStartedCount Number of Operations Timed Out In Event Queue The total number of controller event queue operations that timed out before they could be performed. kafka.controller:type=KafkaController,name=EventQueueOperationsTimedOutCount Number Of New Controller Elections Counts the number of times this node has seen a new controller elected. A transition to the \"no leader\" state is not counted here. If the same controller as before becomes active, that still counts. kafka.controller:type=KafkaController,name=NewActiveControllersCount KRaft Broker Monitoring Metrics METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Last Applied Record Offset The offset of the last record from the cluster metadata partition that was applied by the broker kafka.server:type=broker-metadata-metrics,name=last-applied-record-offset Last Applied Record Timestamp The timestamp of the last record from the cluster metadata partition that was applied by the broker. kafka.server:type=broker-metadata-metrics,name=last-applied-record-timestamp Last Applied Record Lag Ms The difference between now and the timestamp of the last record from the cluster metadata partition that was applied by the broker kafka.server:type=broker-metadata-metrics,name=last-applied-record-lag-ms Metadata Load Error Count The number of errors encountered by the BrokerMetadataListener while loading the metadata log and generating a new MetadataDelta based on it. kafka.server:type=broker-metadata-metrics,name=metadata-load-error-count Metadata Apply Error Count The number of errors encountered by the BrokerMetadataPublisher while applying a new MetadataImage based on the latest MetadataDelta. kafka.server:type=broker-metadata-metrics,name=metadata-apply-error-count Common monitoring metrics for producer/consumer/connect/streams \u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u751f\u4ea7\u8005/\u6d88\u8d39\u8005/\u8fde\u63a5\u5668/\u6d41\u5b9e\u4f8b\u3002\u6709\u5173\u5177\u4f53\u6307\u6807\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u90e8\u5206\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME connection-close-rate Connections closed per second in the window. kafka.[producer connection-close-total Total connections closed in the window. kafka.[producer connection-creation-rate New connections established per second in the window. kafka.[producer connection-creation-total Total new connections established in the window. kafka.[producer network-io-rate The average number of network operations (reads or writes) on all connections per second. kafka.[producer network-io-total The total number of network operations (reads or writes) on all connections. kafka.[producer outgoing-byte-rate The average number of outgoing bytes sent per second to all servers. kafka.[producer outgoing-byte-total The total number of outgoing bytes sent to all servers. kafka.[producer request-rate The average number of requests sent per second. kafka.[producer request-total The total number of requests sent. kafka.[producer request-size-avg The average size of all requests in the window. kafka.[producer request-size-max The maximum size of any request sent in the window. kafka.[producer incoming-byte-rate Bytes/second read off all sockets. kafka.[producer incoming-byte-total Total bytes read off all sockets. kafka.[producer response-rate Responses received per second. kafka.[producer response-total Total responses received. kafka.[producer select-rate Number of times the I/O layer checked for new I/O to perform per second. kafka.[producer select-total Total number of times the I/O layer checked for new I/O to perform. kafka.[producer io-wait-time-ns-avg The average length of time the I/O thread spent waiting for a socket ready for reads or writes in nanoseconds. kafka.[producer io-wait-time-ns-total The total time the I/O thread spent waiting in nanoseconds. kafka.[producer io-waittime-total *Deprecated* The total time the I/O thread spent waiting in nanoseconds. Replacement is io-wait-time-ns-total . kafka.[producer io-wait-ratio The fraction of time the I/O thread spent waiting. kafka.[producer io-time-ns-avg The average length of time for I/O per select call in nanoseconds. kafka.[producer io-time-ns-total The total time the I/O thread spent doing I/O in nanoseconds. kafka.[producer iotime-total *Deprecated* The total time the I/O thread spent doing I/O in nanoseconds. Replacement is io-time-ns-total . kafka.[producer io-ratio The fraction of time the I/O thread spent doing I/O. kafka.[producer connection-count The current number of active connections. kafka.[producer successful-authentication-rate Connections per second that were successfully authenticated using SASL or SSL. kafka.[producer successful-authentication-total Total connections that were successfully authenticated using SASL or SSL. kafka.[producer failed-authentication-rate Connections per second that failed authentication. kafka.[producer failed-authentication-total Total connections that failed authentication. kafka.[producer successful-reauthentication-rate Connections per second that were successfully re-authenticated using SASL. kafka.[producer successful-reauthentication-total Total connections that were successfully re-authenticated using SASL. kafka.[producer reauthentication-latency-max The maximum latency in ms observed due to re-authentication. kafka.[producer reauthentication-latency-avg The average latency in ms observed due to re-authentication. kafka.[producer failed-reauthentication-rate Connections per second that failed re-authentication. kafka.[producer failed-reauthentication-total Total connections that failed re-authentication. kafka.[producer successful-authentication-no-reauth-total Total connections that were successfully authenticated by older, pre-2.2.0 SASL clients that do not support re-authentication. May only be non-zero. kafka.[producer Common Per-broker metrics for producer/consumer/connect/streams \u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u751f\u4ea7\u8005/\u6d88\u8d39\u8005/\u8fde\u63a5\u5668/\u6d41\u5b9e\u4f8b\u3002\u6709\u5173\u5177\u4f53\u6307\u6807\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u90e8\u5206\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME outgoing-byte-rate The average number of outgoing bytes sent per second for a node. kafka.[producer outgoing-byte-total The total number of outgoing bytes sent for a node. kafka.[producer request-rate The average number of requests sent per second for a node. kafka.[producer request-total The total number of requests sent for a node. kafka.[producer request-size-avg The average size of all requests in the window for a node. kafka.[producer request-size-max The maximum size of any request sent in the window for a node. kafka.[producer incoming-byte-rate The average number of bytes received per second for a node. kafka.[producer incoming-byte-total The total number of bytes received for a node. kafka.[producer request-latency-avg The average request latency in ms for a node. kafka.[producer request-latency-max The maximum request latency in ms for a node. kafka.[producer response-rate Responses received per second for a node. kafka.[producer response-total Total responses received for a node. kafka.[producer Producer monitoring \u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u751f\u4ea7\u8005\u5b9e\u4f8b\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME waiting-threads The number of user threads blocked waiting for buffer memory to enqueue their records. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) buffer-total-bytes The maximum amount of buffer memory the client can use (whether or not it is currently used). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) buffer-available-bytes The total amount of buffer memory that is not being used (either unallocated or in the free list). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) bufferpool-wait-time The fraction of time an appender waits for space allocation. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) bufferpool-wait-time-total *Deprecated* The total time an appender waits for space allocation in nanoseconds. Replacement is bufferpool-wait-time-ns-total kafka.producer:type=producer-metrics,client-id=([-.\\w]+) bufferpool-wait-time-ns-total The total time an appender waits for space allocation in nanoseconds. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) flush-time-ns-total The total time the Producer spent in Producer.flush in nanoseconds. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-init-time-ns-total The total time the Producer spent initializing transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-begin-time-ns-total The total time the Producer spent in beginTransaction in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-send-offsets-time-ns-total The total time the Producer spent sending offsets to transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-commit-time-ns-total The total time the Producer spent committing transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-abort-time-ns-total The total time the Producer spent aborting transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) Producer Sender Metrics kafka.producer:type=producer-metrics,client-id=\"{client-id}\" ATTRIBUTE NAME DESCRIPTION batch-size-avg The average number of bytes sent per partition per-request. batch-size-max The max number of bytes sent per partition per-request. batch-split-rate The average number of batch splits per second batch-split-total The total number of batch splits compression-rate-avg The average compression rate of record batches, defined as the average ratio of the compressed batch size over the uncompressed size. metadata-age The age in seconds of the current producer metadata being used. produce-throttle-time-avg The average time in ms a request was throttled by a broker produce-throttle-time-max The maximum time in ms a request was throttled by a broker record-error-rate The average per-second number of record sends that resulted in errors record-error-total The total number of record sends that resulted in errors record-queue-time-avg The average time in ms record batches spent in the send buffer. record-queue-time-max The maximum time in ms record batches spent in the send buffer. record-retry-rate The average per-second number of retried record sends record-retry-total The total number of retried record sends record-send-rate The average number of records sent per second. record-send-total The total number of records sent. record-size-avg The average record size record-size-max The maximum record size records-per-request-avg The average number of records per request. request-latency-avg The average request latency in ms request-latency-max The maximum request latency in ms requests-in-flight The current number of in-flight requests awaiting a response. kafka.producer:type=producer-topic-metrics,client-id=\"{client-id}\",topic=\"{topic}\" ATTRIBUTE NAME DESCRIPTION byte-rate The average number of bytes sent per second for a topic. byte-total The total number of bytes sent for a topic. compression-rate The average compression rate of record batches for a topic, defined as the average ratio of the compressed batch size over the uncompressed size. record-error-rate The average per-second number of record sends that resulted in errors for a topic record-error-total The total number of record sends that resulted in errors for a topic record-retry-rate The average per-second number of retried record sends for a topic record-retry-total The total number of retried record sends for a topic record-send-rate The average number of records sent per second for a topic. record-send-total The total number of records sent for a topic. Consumer monitoring \u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u6d88\u8d39\u8005\u5b9e\u4f8b\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME time-between-poll-avg The average delay between invocations of poll(). kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) time-between-poll-max The max delay between invocations of poll(). kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) last-poll-seconds-ago The number of seconds since the last poll() invocation. kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) poll-idle-ratio-avg The average fraction of time the consumer's poll() is idle as opposed to waiting for the user code to process records. kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) committed-time-ns-total The total time the Consumer spent in committed in nanoseconds. kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) commit-sync-time-ns-total The total time the Consumer spent committing offsets in nanoseconds (for AOS). kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) Consumer Group Metrics METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME commit-latency-avg The average time taken for a commit request kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) commit-latency-max The max time taken for a commit request kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) commit-rate The number of commit calls per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) commit-total The total number of commit calls kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) assigned-partitions The number of partitions currently assigned to this consumer kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) heartbeat-response-time-max The max time taken to receive a response to a heartbeat request kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) heartbeat-rate The average number of heartbeats per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) heartbeat-total The total number of heartbeats kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-time-avg The average time taken for a group rejoin kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-time-max The max time taken for a group rejoin kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-rate The number of group joins per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-total The total number of group joins kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-time-avg The average time taken for a group sync kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-time-max The max time taken for a group sync kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-rate The number of group syncs per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-total The total number of group syncs kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-latency-avg The average time taken for a group rebalance kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-latency-max The max time taken for a group rebalance kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-latency-total The total time taken for group rebalances so far kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-total The total number of group rebalances participated kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-rate-per-hour The number of group rebalance participated per hour kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) failed-rebalance-total The total number of failed group rebalances kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) failed-rebalance-rate-per-hour The number of failed group rebalance event per hour kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) last-rebalance-seconds-ago The number of seconds since the last rebalance event kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) last-heartbeat-seconds-ago The number of seconds since the last controller heartbeat kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-revoked-latency-avg The average time taken by the on-partitions-revoked rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-revoked-latency-max The max time taken by the on-partitions-revoked rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-assigned-latency-avg The average time taken by the on-partitions-assigned rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-assigned-latency-max The max time taken by the on-partitions-assigned rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-lost-latency-avg The average time taken by the on-partitions-lost rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-lost-latency-max The max time taken by the on-partitions-lost rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) Consumer Fetch Metrics kafka.consumer:type=consumer-fetch-manager-metrics,client-id=\"{client-id}\" ATTRIBUTE NAME DESCRIPTION bytes-consumed-rate The average number of bytes consumed per second bytes-consumed-total The total number of bytes consumed fetch-latency-avg The average time taken for a fetch request. fetch-latency-max The max time taken for any fetch request. fetch-rate The number of fetch requests per second. fetch-size-avg The average number of bytes fetched per request fetch-size-max The maximum number of bytes fetched per request fetch-throttle-time-avg The average throttle time in ms fetch-throttle-time-max The maximum throttle time in ms fetch-total The total number of fetch requests. records-consumed-rate The average number of records consumed per second records-consumed-total The total number of records consumed records-lag-max The maximum lag in terms of number of records for any partition in this window. NOTE: This is based on current offset and not committed offset records-lead-min The minimum lead in terms of number of records for any partition in this window records-per-request-avg The average number of records in each request kafka.consumer:type=consumer-fetch-manager-metrics,client-id=\"{client-id}\",topic=\"{topic}\" ATTRIBUTE NAME DESCRIPTION bytes-consumed-rate The average number of bytes consumed per second for a topic bytes-consumed-total The total number of bytes consumed for a topic fetch-size-avg The average number of bytes fetched per request for a topic fetch-size-max The maximum number of bytes fetched per request for a topic records-consumed-rate The average number of records consumed per second for a topic records-consumed-total The total number of records consumed for a topic records-per-request-avg The average number of records in each request for a topic kafka.consumer:type=consumer-fetch-manager-metrics,partition=\"{partition}\",topic=\"{topic}\",client-id=\"{client-id}\" ATTRIBUTE NAME DESCRIPTION preferred-read-replica The current read replica for the partition, or -1 if reading from leader records-lag The latest lag of the partition records-lag-avg The average lag of the partition records-lag-max The max lag of the partition records-lead The latest lead of the partition records-lead-avg The average lead of the partition records-lead-min The min lead of the partition Connect Monitoring Connect \u5de5\u4f5c\u8fdb\u7a0b\u5305\u542b\u6240\u6709\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6307\u6807\u4ee5\u53ca\u7279\u5b9a\u4e8e Connect \u7684\u6307\u6807\u3002\u5de5\u4f5c\u8fdb\u7a0b\u672c\u8eab\u6709\u8bb8\u591a\u6307\u6807\uff0c\u800c\u6bcf\u4e2a\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u90fd\u6709\u5176\u4ed6\u6307\u6807\u3002[2023-05-22 16:22:33,884] INFO Metrics \u8c03\u5ea6\u7a0b\u5e8f\u5173\u95ed\uff08org.apache.kafka.common.metrics.Metrics:693\uff09 [2023-05-22 16:22:33,886] INFO Metrics \u8bb0\u8005\u5173\u95ed\uff08org.apache.kafka.common.metrics.Metrics:693\uff09 apache.kafka.common.metrics.Metrics:703) kafka.connect:type=connect-worker-metrics ATTRIBUTE NAME DESCRIPTION connector-count The number of connectors run in this worker. connector-startup-attempts-total The total number of connector startups that this worker has attempted. connector-startup-failure-percentage The average percentage of this worker's connectors starts that failed. connector-startup-failure-total The total number of connector starts that failed. connector-startup-success-percentage The average percentage of this worker's connectors starts that succeeded. connector-startup-success-total The total number of connector starts that succeeded. task-count The number of tasks run in this worker. task-startup-attempts-total The total number of task startups that this worker has attempted. task-startup-failure-percentage The average percentage of this worker's tasks starts that failed. task-startup-failure-total The total number of task starts that failed. task-startup-success-percentage The average percentage of this worker's tasks starts that succeeded. task-startup-success-total The total number of task starts that succeeded. kafka.connect:type=connect-worker-metrics,connector=\"{connector}\" ATTRIBUTE NAME DESCRIPTION connector-destroyed-task-count The number of destroyed tasks of the connector on the worker. connector-failed-task-count The number of failed tasks of the connector on the worker. connector-paused-task-count The number of paused tasks of the connector on the worker. connector-restarting-task-count The number of restarting tasks of the connector on the worker. connector-running-task-count The number of running tasks of the connector on the worker. connector-total-task-count The number of tasks of the connector on the worker. connector-unassigned-task-count The number of unassigned tasks of the connector on the worker. kafka.connect:type=connect-worker-rebalance-metrics ATTRIBUTE NAME DESCRIPTION completed-rebalances-total The total number of rebalances completed by this worker. connect-protocol The Connect protocol used by this cluster epoch The epoch or generation number of this worker. leader-name The name of the group leader. rebalance-avg-time-ms The average time in milliseconds spent by this worker to rebalance. rebalance-max-time-ms The maximum time in milliseconds spent by this worker to rebalance. rebalancing Whether this worker is currently rebalancing. time-since-last-rebalance-ms The time in milliseconds since this worker completed the most recent rebalance. kafka.connect:type=connector-metrics,connector=\"{connector}\" ATTRIBUTE NAME DESCRIPTION connector-class The name of the connector class. connector-type The type of the connector. One of 'source' or 'sink'. connector-version The version of the connector class, as reported by the connector. status The status of the connector. One of 'unassigned', 'running', 'paused', 'stopped', 'failed', or 'restarting'. kafka.connect:type=connector-task-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION batch-size-avg The average number of records in the batches the task has processed so far. batch-size-max The number of records in the largest batch the task has processed so far. offset-commit-avg-time-ms The average time in milliseconds taken by this task to commit offsets. offset-commit-failure-percentage The average percentage of this task's offset commit attempts that failed. offset-commit-max-time-ms The maximum time in milliseconds taken by this task to commit offsets. offset-commit-success-percentage The average percentage of this task's offset commit attempts that succeeded. pause-ratio The fraction of time this task has spent in the pause state. running-ratio The fraction of time this task has spent in the running state. status The status of the connector task. One of 'unassigned', 'running', 'paused', 'failed', or 'restarting'. kafka.connect:type=sink-task-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION offset-commit-completion-rate The average per-second number of offset commit completions that were completed successfully. offset-commit-completion-total The total number of offset commit completions that were completed successfully. offset-commit-seq-no The current sequence number for offset commits. offset-commit-skip-rate The average per-second number of offset commit completions that were received too late and skipped/ignored. offset-commit-skip-total The total number of offset commit completions that were received too late and skipped/ignored. partition-count The number of topic partitions assigned to this task belonging to the named sink connector in this worker. put-batch-avg-time-ms The average time taken by this task to put a batch of sinks records. put-batch-max-time-ms The maximum time taken by this task to put a batch of sinks records. sink-record-active-count The number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task. sink-record-active-count-avg The average number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task. sink-record-active-count-max The maximum number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task. sink-record-lag-max The maximum lag in terms of number of records that the sink task is behind the consumer's position for any topic partitions. sink-record-read-rate The average per-second number of records read from Kafka for this task belonging to the named sink connector in this worker. This is before transformations are applied. sink-record-read-total The total number of records read from Kafka by this task belonging to the named sink connector in this worker, since the task was last restarted. sink-record-send-rate The average per-second number of records output from the transformations and sent/put to this task belonging to the named sink connector in this worker. This is after transformations are applied and excludes any records filtered out by the transformations. sink-record-send-total The total number of records output from the transformations and sent/put to this task belonging to the named sink connector in this worker, since the task was last restarted. kafka.connect:type=source-task-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION poll-batch-avg-time-ms The average time in milliseconds taken by this task to poll for a batch of source records. poll-batch-max-time-ms The maximum time in milliseconds taken by this task to poll for a batch of source records. source-record-active-count The number of records that have been produced by this task but not yet completely written to Kafka. source-record-active-count-avg The average number of records that have been produced by this task but not yet completely written to Kafka. source-record-active-count-max The maximum number of records that have been produced by this task but not yet completely written to Kafka. source-record-poll-rate The average per-second number of records produced/polled (before transformation) by this task belonging to the named source connector in this worker. source-record-poll-total The total number of records produced/polled (before transformation) by this task belonging to the named source connector in this worker. source-record-write-rate The average per-second number of records written to Kafka for this task belonging to the named source connector in this worker, since the task was last restarted. This is after transformations are applied, and excludes any records filtered out by the transformations. source-record-write-total The number of records output written to Kafka for this task belonging to the named source connector in this worker, since the task was last restarted. This is after transformations are applied, and excludes any records filtered out by the transformations. transaction-size-avg The average number of records in the transactions the task has committed so far. transaction-size-max The number of records in the largest transaction the task has committed so far. transaction-size-min The number of records in the smallest transaction the task has committed so far. kafka.connect:type=task-error-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION deadletterqueue-produce-failures The number of failed writes to the dead letter queue. deadletterqueue-produce-requests The number of attempted writes to the dead letter queue. last-error-timestamp The epoch timestamp when this task last encountered an error. total-errors-logged The number of errors that were logged. total-record-errors The number of record processing errors in this task. total-record-failures The number of record processing failures in this task. total-records-skipped The number of records skipped due to errors. total-retries The number of operations retried. Streams Monitoring Kafka Streams \u5b9e\u4f8b\u5305\u542b\u6240\u6709\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6307\u6807\u4ee5\u53ca\u7279\u5b9a\u4e8e Streams \u7684\u5176\u4ed6\u6307\u6807\u3002\u8fd9\u4e9b\u6307\u6807\u5177\u6709\u4e09\u4e2a\u8bb0\u5f55\u7ea7\u522b\uff1a info \u3001 debug \u548c trace \u3002 \u8bf7\u6ce8\u610f\uff0c\u6307\u6807\u6709 4 \u5c42\u5c42\u6b21\u7ed3\u6784\u3002\u5728\u9876\u5c42\uff0c\u6bcf\u4e2a\u542f\u52a8\u7684 Kafka Streams \u5ba2\u6237\u7aef\u90fd\u6709\u5ba2\u6237\u7aef\u7ea7\u6307\u6807\u3002\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u6709\u6d41\u7ebf\u7a0b\uff0c\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002\u6bcf\u4e2a\u6d41\u7ebf\u7a0b\u90fd\u6709\u4efb\u52a1\uff0c\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002\u6bcf\u4e2a\u4efb\u52a1\u90fd\u6709\u591a\u4e2a\u5904\u7406\u5668\u8282\u70b9\uff0c\u5e76\u5177\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002\u6bcf\u4e2a\u4efb\u52a1\u8fd8\u200b\u200b\u6709\u8bb8\u591a\u72b6\u6001\u5b58\u50a8\u548c\u8bb0\u5f55\u7f13\u5b58\uff0c\u5b83\u4eec\u90fd\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002 \u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\u9009\u9879\u6307\u5b9a\u60a8\u8981\u6536\u96c6\u7684\u6307\u6807\uff1a metrics.recording.level=\"info\" Client Metrics \u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME version The version of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) commit-id The version control commit ID of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) application-id The application ID of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) topology-description The description of the topology executed in the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) state The state of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) failed-stream-threads The number of failed stream threads since the start of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) Thread Metrics \u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME commit-latency-avg The average execution time in ms, for committing, across all running tasks of this thread. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) commit-latency-max The maximum execution time in ms, for committing, across all running tasks of this thread. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-latency-avg The average execution time in ms, for consumer polling. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-latency-max The maximum execution time in ms, for consumer polling. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-latency-avg The average execution time in ms, for processing. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-latency-max The maximum execution time in ms, for processing. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-latency-avg The average execution time in ms, for punctuating. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-latency-max The maximum execution time in ms, for punctuating. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) commit-rate The average number of commits per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) commit-total The total number of commit calls. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-rate The average number of consumer poll calls per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-total The total number of consumer poll calls. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-rate The average number of processed records per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-total The total number of processed records. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-rate The average number of punctuate calls per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-total The total number of punctuate calls. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-created-rate The average number of tasks created per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-created-total The total number of tasks created. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-closed-rate The average number of tasks closed per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-closed-total The total number of tasks closed. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) blocked-time-ns-total The total time the thread spent blocked on kafka. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) thread-start-time The time that the thread was started. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) Task Metrics \u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff0c\u4f46 drop-records-* \u548c active-process-ratio \u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u9664\u5916 info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME process-latency-avg The average execution time in ns, for processing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) process-latency-max The maximum execution time in ns, for processing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) process-rate The average number of processed records per second across all source processor nodes of this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) process-total The total number of processed records across all source processor nodes of this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-latency-avg The average execution time in ns, for committing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-latency-max The maximum execution time in ns, for committing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-rate The average number of commit calls per second. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-total The total number of commit calls. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) record-lateness-avg The average observed lateness of records (stream time - record timestamp). kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) record-lateness-max The max observed lateness of records (stream time - record timestamp). kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) enforced-processing-rate The average number of enforced processings per second. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) enforced-processing-total The total number enforced processings. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) dropped-records-rate The average number of records dropped within this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) dropped-records-total The total number of records dropped within this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) active-process-ratio The fraction of time the stream thread spent on processing this task among all assigned active tasks. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) Processor Node Metrics \u4ee5\u4e0b\u6307\u6807\u4ec5\u5728\u67d0\u4e9b\u7c7b\u578b\u7684\u8282\u70b9\u4e0a\u53ef\u7528\uff0c\u5373 process-* \u6307\u6807\u4ec5\u9002\u7528\u4e8e\u6e90\u5904\u7406\u5668\u8282\u70b9\uff0csuppression-emit-* \u6307\u6807\u4ec5\u9002\u7528\u4e8e\u6291\u5236\u64cd\u4f5c\u8282\u70b9\uff0c\u800c record-e2e-latency- * \u6307\u6807\u4ec5\u9002\u7528\u4e8e\u6e90\u5904\u7406\u5668\u8282\u70b9\u548c\u7ec8\u7aef\u8282\u70b9\uff08\u6ca1\u6709\u540e\u7ee7\u8282\u70b9\u7684\u8282\u70b9\uff09\u3002\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff0c\u4f46 record-e2e-latency-* \u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u9664\u5916 info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME bytes-consumed-total The total number of bytes consumed by a source processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+) bytes-produced-total The total number of bytes produced by a sink processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+) process-rate The average number of records processed by a source processor node per second. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) process-total The total number of records processed by a source processor node per second. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) suppression-emit-rate The rate at which records that have been emitted downstream from suppression operation nodes. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) suppression-emit-total The total number of records that have been emitted downstream from suppression operation nodes. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) record-e2e-latency-avg The average end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) record-e2e-latency-max The maximum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) record-e2e-latency-min The minimum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) records-consumed-total The total number of records consumed by a source processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+) records-produced-total The total number of records produced by a sink processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+) State Store Metrics \u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff0c\u4f46 record-e2e-latency-* \u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u9664\u5916 trace \u3002\u8bf7\u6ce8\u610f\uff0c\u8be5 store-scope \u503c\u662f\u5728 StoreSupplier#metricsScope() \u7528\u6237\u81ea\u5b9a\u4e49\u72b6\u6001\u5b58\u50a8\u4e2d\u6307\u5b9a\u7684\uff1b\u5bf9\u4e8e\u5185\u7f6e\u72b6\u6001\u5b58\u50a8\uff0c\u76ee\u524d\u6211\u4eec\u6709\uff1a in-memory-state in-memory-lru-state in-memory-window-state in-memory-suppression \uff08\u7528\u4e8e\u6291\u5236\u7f13\u51b2\u6db2\uff09 rocksdb-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u952e\u503c\u5b58\u50a8\uff09 rocksdb-window-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u6a71\u7a97\u5546\u5e97\uff09 rocksdb-session-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u4f1a\u8bdd\u5b58\u50a8\uff09 \u6307\u6807suppression-buffer-size-avg\u3001suppression-buffer-size-max\u3001suppression-buffer-count-avg\u548csuppression-buffer-count-max\u4ec5\u9002\u7528\u4e8e\u6291\u5236\u7f13\u51b2\u533a\u3002\u6240\u6709\u5176\u4ed6\u6307\u6807\u5747\u4e0d\u53ef\u7528\u4e8e\u6291\u5236\u7f13\u51b2\u533a\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME put-latency-avg The average put execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-latency-max The maximum put execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-if-absent-latency-avg The average put-if-absent execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-if-absent-latency-max The maximum put-if-absent execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) get-latency-avg The average get execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) get-latency-max The maximum get execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) delete-latency-avg The average delete execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) delete-latency-max The maximum delete execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-all-latency-avg The average put-all execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-all-latency-max The maximum put-all execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) all-latency-avg The average all operation execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) all-latency-max The maximum all operation execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) range-latency-avg The average range execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) range-latency-max The maximum range execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) flush-latency-avg The average flush execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) flush-latency-max The maximum flush execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) restore-latency-avg The average restore execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) restore-latency-max The maximum restore execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-rate The average put rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-if-absent-rate The average put-if-absent rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) get-rate The average get rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) delete-rate The average delete rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-all-rate The average put-all rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) all-rate The average all operation rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) range-rate The average range rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) flush-rate The average flush rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) restore-rate The average restore rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) suppression-buffer-size-avg The average total size, in bytes, of the buffered data over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) suppression-buffer-size-max The maximum total size, in bytes, of the buffered data over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) suppression-buffer-count-avg The average number of records buffered over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) suppression-buffer-count-max The maximum number of records buffered over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) record-e2e-latency-avg The average end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) record-e2e-latency-max The maximum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) record-e2e-latency-min The minimum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) RocksDB Metrics RocksDB \u6307\u6807\u5206\u4e3a\u57fa\u4e8e\u7edf\u8ba1\u7684\u6307\u6807\u548c\u57fa\u4e8e\u5c5e\u6027\u7684\u6307\u6807\u3002\u524d\u8005\u662f\u4ece RocksDB \u72b6\u6001\u5b58\u50a8\u6536\u96c6\u7684\u7edf\u8ba1\u4fe1\u606f\u4e2d\u8bb0\u5f55\u7684\uff0c\u800c\u540e\u8005\u662f\u4ece RocksDB \u516c\u5f00\u7684\u5c5e\u6027\u4e2d\u8bb0\u5f55\u7684\u3002RocksDB \u6536\u96c6\u7684\u7edf\u8ba1\u6570\u636e\u63d0\u4f9b\u4e86\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u7d2f\u79ef\u6d4b\u91cf\u503c\uff0c\u4f8b\u5982\u5199\u5165\u72b6\u6001\u5b58\u50a8\u7684\u5b57\u8282\u6570\u3002RocksDB \u516c\u5f00\u7684\u5c5e\u6027\u63d0\u4f9b\u5f53\u524d\u6d4b\u91cf\u503c\uff0c\u4f8b\u5982\u5f53\u524d\u4f7f\u7528\u7684\u5185\u5b58\u91cf\u3002\u8bf7\u6ce8\u610f\uff0c store-scope \u5185\u7f6e RocksDB \u72b6\u6001\u5b58\u50a8\u5f53\u524d\u5982\u4e0b\uff1a rocksdb-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u952e\u503c\u5b58\u50a8\uff09 rocksdb-window-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u6a71\u7a97\u5546\u5e97\uff09 rocksdb-session-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u4f1a\u8bdd\u5b58\u50a8\uff09 RocksDB \u57fa\u4e8e\u7edf\u8ba1\u7684\u6307\u6807\uff1a \u4ee5\u4e0b\u6240\u6709\u57fa\u4e8e\u7edf\u8ba1\u7684\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u90fd\u662f \uff0c debug \u56e0\u4e3a\u5728 RocksDB \u4e2d\u6536\u96c6\u7edf\u8ba1\u6570\u636e \u53ef\u80fd\u4f1a\u5bf9\u6027\u80fd\u4ea7\u751f\u5f71\u54cd \u3002\u6bcf\u5206\u949f\u4ece RocksDB \u72b6\u6001\u5b58\u50a8\u6536\u96c6\u57fa\u4e8e\u7edf\u8ba1\u6570\u636e\u7684\u6307\u6807\u3002\u5982\u679c\u72b6\u6001\u5b58\u50a8\u7531\u591a\u4e2a RocksDB \u5b9e\u4f8b\u7ec4\u6210\uff08\u5982 WindowStores \u548c SessionStores \u7684\u60c5\u51b5\uff09\uff0c\u5219\u6bcf\u4e2a\u6307\u6807\u90fd\u4f1a\u62a5\u544a\u72b6\u6001\u5b58\u50a8\u7684 RocksDB \u5b9e\u4f8b\u7684\u805a\u5408\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME bytes-written-rate The average number of bytes written per second to the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-written-total The total number of bytes written to the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-read-rate The average number of bytes read per second from the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-read-total The total number of bytes read from the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-bytes-flushed-rate The average number of bytes flushed per second from the memtable to disk. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-bytes-flushed-total The total number of bytes flushed from the memtable to disk. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-hit-ratio The ratio of memtable hits relative to all lookups to the memtable. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-flush-time-avg The average duration of memtable flushes to disc in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-flush-time-min The minimum duration of memtable flushes to disc in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-flush-time-max The maximum duration of memtable flushes to disc in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-data-hit-ratio The ratio of block cache hits for data blocks relative to all lookups for data blocks to the block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-index-hit-ratio The ratio of block cache hits for index blocks relative to all lookups for index blocks to the block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-filter-hit-ratio The ratio of block cache hits for filter blocks relative to all lookups for filter blocks to the block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) write-stall-duration-avg The average duration of write stalls in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) write-stall-duration-total The total duration of write stalls in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-read-compaction-rate The average number of bytes read per second during compaction. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-written-compaction-rate The average number of bytes written per second during compaction. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-time-avg The average duration of disc compactions in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-time-min The minimum duration of disc compactions in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-time-max The maximum duration of disc compactions in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) number-open-files The number of current open files. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) number-file-errors-total The total number of file errors occurred. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) RocksDB \u57fa\u4e8e\u5c5e\u6027\u7684\u6307\u6807\uff1a \u4ee5\u4e0b\u6240\u6709\u57fa\u4e8e\u5c5e\u6027\u7684\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a \uff0c info \u5e76\u5728\u8bbf\u95ee\u6307\u6807\u65f6\u8fdb\u884c\u8bb0\u5f55\u3002\u5982\u679c\u72b6\u6001\u5b58\u50a8\u7531\u591a\u4e2a RocksDB \u5b9e\u4f8b\u7ec4\u6210\uff0c\u5982 WindowStores \u548c SessionStores \u7684\u60c5\u51b5\uff0c\u5219\u6bcf\u4e2a\u6307\u6807\u62a5\u544a\u72b6\u6001\u5b58\u50a8\u7684\u6240\u6709 RocksDB \u5b9e\u4f8b\u7684\u603b\u548c\uff0c\u5757\u7f13\u5b58\u6307\u6807\u9664\u5916 block-cache-* \u3002\u5982\u679c\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u4f7f\u7528\u81ea\u5df1\u7684\u5757\u7f13\u5b58\uff0c\u5219\u5757\u7f13\u5b58\u6307\u6807\u62a5\u544a\u6240\u6709 RocksDB \u5b9e\u4f8b\u7684\u603b\u548c\uff1b\u5982\u679c\u5728\u6240\u6709\u5b9e\u4f8b\u4e4b\u95f4\u5171\u4eab\u5355\u4e2a\u5757\u7f13\u5b58\uff0c\u5219\u5b83\u4eec\u4ec5\u62a5\u544a\u4e00\u4e2a\u5b9e\u4f8b\u7684\u8bb0\u5f55\u503c\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME num-immutable-mem-table The number of immutable memtables that have not yet been flushed. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) cur-size-active-mem-table The approximate size of the active memtable in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) cur-size-all-mem-tables The approximate size of active and unflushed immutable memtables in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) size-all-mem-tables The approximate size of active, unflushed immutable, and pinned immutable memtables in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-entries-active-mem-table The number of entries in the active memtable. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-entries-imm-mem-tables The number of entries in the unflushed immutable memtables. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-deletes-active-mem-table The number of delete entries in the active memtable. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-deletes-imm-mem-tables The number of delete entries in the unflushed immutable memtables. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) mem-table-flush-pending This metric reports 1 if a memtable flush is pending, otherwise it reports 0. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-running-flushes The number of currently running flushes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-pending This metric reports 1 if at least one compaction is pending, otherwise it reports 0. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-running-compactions The number of currently running compactions. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) estimate-pending-compaction-bytes The estimated total number of bytes a compaction needs to rewrite on disk to get all levels down to under target size (only valid for level compaction). kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) total-sst-files-size The total size in bytes of all SST files. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) live-sst-files-size The total size in bytes of all SST files that belong to the latest LSM tree. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-live-versions Number of live versions of the LSM tree. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-capacity The capacity of the block cache in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-usage The memory size of the entries residing in block cache in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-pinned-usage The memory size for the entries being pinned in the block cache in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) estimate-num-keys The estimated number of keys in the active and unflushed immutable memtables and storage. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) estimate-table-readers-mem The estimated memory in bytes used for reading SST tables, excluding memory used in block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) background-errors The total number of background errors. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) Record Cache Metrics \u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME hit-ratio-avg The average cache hit ratio defined as the ratio of cache read hits over the total cache read requests. kafka.streams:type=stream-record-cache-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),record-cache-id=([-.\\w]+) hit-ratio-min The minimum cache hit ratio. kafka.streams:type=stream-record-cache-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),record-cache-id=([-.\\w]+) hit-ratio-max The maximum cache hit ratio. kafka.streams:type=stream-record-cache-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),record-cache-id=([-.\\w]+) Others \u6211\u4eec\u5efa\u8bae\u76d1\u63a7 GC \u65f6\u95f4\u548c\u5176\u4ed6\u7edf\u8ba1\u4fe1\u606f\u4ee5\u53ca\u5404\u79cd\u670d\u52a1\u5668\u7edf\u8ba1\u4fe1\u606f\uff0c\u4f8b\u5982 CPU \u5229\u7528\u7387\u3001I/O \u670d\u52a1\u65f6\u95f4\u7b49\u3002\u5728\u5ba2\u6237\u7aef\uff0c\u6211\u4eec\u5efa\u8bae\u76d1\u63a7\u6d88\u606f/\u5b57\u8282\u7387\uff08\u5168\u5c40\u548c\u6bcf\u4e2a\u4e3b\u9898\uff09\u3001\u8bf7\u6c42\u7387/\u5927\u5c0f/\u65f6\u95f4\uff0c\u5728\u6d88\u8d39\u8005\u65b9\u9762\uff0c\u6240\u6709\u5206\u533a\u4e4b\u95f4\u6d88\u606f\u7684\u6700\u5927\u5ef6\u8fdf\u548c\u6700\u5c0f\u83b7\u53d6\u8bf7\u6c42\u7387\u3002\u4e3a\u4e86\u8ba9\u6d88\u8d39\u8005\u8ddf\u4e0a\uff0c\u6700\u5927\u5ef6\u8fdf\u9700\u8981\u5c0f\u4e8e\u9608\u503c\uff0c\u6700\u5c0f\u83b7\u53d6\u7387\u9700\u8981\u5927\u4e8e 0\u3002 6.9 \u52a8\u7269\u56ed\u7ba1\u7406\u5458 \u7a33\u5b9a\u7248 \u5f53\u524d\u7684\u7a33\u5b9a\u5206\u652f\u662f 3.5\u3002Kafka \u4f1a\u5b9a\u671f\u66f4\u65b0\u4ee5\u5305\u542b 3.5 \u7cfb\u5217\u4e2d\u7684\u6700\u65b0\u7248\u672c\u3002 ZooKeeper \u5f03\u7528 \u968f\u7740 Apache Kafka 3.5 \u7684\u53d1\u5e03\uff0cZookeeper \u73b0\u5df2\u88ab\u6807\u8bb0\u4e3a\u5df2\u5f03\u7528\u3002\u8ba1\u5212\u5728 Apache Kafka \u7684\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\uff08\u7248\u672c 4.0\uff09\u4e2d\u5220\u9664 ZooKeeper\uff0c\u8be5\u7248\u672c\u8ba1\u5212\u6700\u65e9\u4e8e 2024 \u5e74 4 \u6708\u8fdb\u884c\u3002\u5728\u5f03\u7528\u9636\u6bb5\uff0c\u4ecd\u7136\u652f\u6301 ZooKeeper \u8fdb\u884c Kafka \u96c6\u7fa4\u7684\u5143\u6570\u636e\u7ba1\u7406\uff0c\u4f46\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\u7528\u4e8e\u65b0\u7684\u90e8\u7f72\u3002KRaft \u4e2d\u4ecd\u6709\u4e00\u5c0f\u90e8\u5206\u529f\u80fd\u6709\u5f85\u5b9e\u73b0\uff0c\u8bf7\u53c2\u9605 \u5f53\u524d\u7f3a\u5931\u7684\u529f\u80fd \u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002 \u79fb\u6c11 \u5c06\u73b0\u6709\u7684\u57fa\u4e8e ZooKeeper \u7684 Kafka \u96c6\u7fa4\u8fc1\u79fb\u5230 KRaft \u76ee\u524d\u5904\u4e8e\u9884\u89c8\u9636\u6bb5\uff0c\u6211\u4eec\u9884\u8ba1\u5b83\u53ef\u4ee5\u5728 3.6 \u7248\u672c\u4e2d\u6295\u5165\u751f\u4ea7\u4f7f\u7528\u3002\u5efa\u8bae\u7528\u6237\u5f00\u59cb\u8ba1\u5212\u8fc1\u79fb\u5230 KRaft\uff0c\u5e76\u5f00\u59cb\u6d4b\u8bd5\u4ee5\u63d0\u4f9b\u53cd\u9988\u3002\u6709\u5173\u5982\u4f55\u6267\u884c\u4ece ZooKeeper \u5230 KRaft \u5b9e\u65f6\u8fc1\u79fb\u4ee5\u53ca\u5f53\u524d\u9650\u5236\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605ZooKeeper \u5230 KRaft \u8fc1\u79fb\u3002 3.x \u548c ZooKeeper \u652f\u6301 \u652f\u6301 ZooKeeper \u6a21\u5f0f\u7684\u6700\u7ec8 3.x \u5c0f\u7248\u672c\u5c06\u5728\u53d1\u5e03\u540e 12 \u4e2a\u6708\u5185\u83b7\u5f97\u5173\u952e\u9519\u8bef\u4fee\u590d\u548c\u5b89\u5168\u4fee\u590d\u3002 ZooKeeper \u548c KRaft \u65f6\u95f4\u8f74 \u6709\u5173 ZooKeeper \u5220\u9664\u548c\u8ba1\u5212\u7684 KRaft \u529f\u80fd\u53d1\u5e03\u7684\u6682\u5b9a\u65f6\u95f4\u8868\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u66f4\u65b0\uff0c\u8bf7\u53c2\u9605 KIP-833 \u3002 \u8fd0\u884c ZooKeeper \u5728\u64cd\u4f5c\u4e0a\uff0c\u6211\u4eec\u4e3a\u5065\u5eb7\u7684 ZooKeeper \u5b89\u88c5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u7269\u7406/\u786c\u4ef6/\u7f51\u7edc\u5e03\u5c40\u4e2d\u7684\u5197\u4f59\uff1a\u5c3d\u91cf\u4e0d\u8981\u5c06\u5b83\u4eec\u5168\u90e8\u653e\u5728\u540c\u4e00\u4e2a\u673a\u67b6\u4e2d\uff0c\u4f53\u9762\uff08\u4f46\u4e0d\u8981\u75af\u72c2\uff09\u7684\u786c\u4ef6\uff0c\u5c3d\u91cf\u4fdd\u7559\u5197\u4f59\u7535\u6e90\u548c\u7f51\u7edc\u8def\u5f84\u7b49\u3002\u5178\u578b\u7684 ZooKeeper \u6574\u4f53\u6709 5 \u4e2a\u62167 \u53f0\u670d\u52a1\u5668\uff0c\u5206\u522b\u5141\u8bb8 2 \u53f0\u548c 3 \u53f0\u670d\u52a1\u5668\u5b95\u673a\u3002\u5982\u679c\u60a8\u7684\u90e8\u7f72\u89c4\u6a21\u8f83\u5c0f\uff0c\u90a3\u4e48\u4f7f\u7528 3 \u53f0\u670d\u52a1\u5668\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\uff0c\u4f46\u8bf7\u8bb0\u4f4f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u60a8\u53ea\u80fd\u5bb9\u5fcd 1 \u53f0\u670d\u52a1\u5668\u505c\u673a\u3002 I/O \u9694\u79bb\uff1a\u5982\u679c\u60a8\u6267\u884c\u5927\u91cf\u5199\u5165\u7c7b\u578b\u6d41\u91cf\uff0c\u60a8\u51e0\u4e4e\u80af\u5b9a\u5e0c\u671b\u4e8b\u52a1\u65e5\u5fd7\u4f4d\u4e8e\u4e13\u7528\u78c1\u76d8\u7ec4\u4e0a\u3002\u5bf9\u4e8b\u52a1\u65e5\u5fd7\u7684\u5199\u5165\u662f\u540c\u6b65\u7684\uff08\u4f46\u4e3a\u4e86\u6027\u80fd\u800c\u8fdb\u884c\u6279\u5904\u7406\uff09\uff0c\u56e0\u6b64\u5e76\u53d1\u5199\u5165\u4f1a\u663e\u7740\u5f71\u54cd\u6027\u80fd\u3002ZooKeeper \u5feb\u7167\u5c31\u662f\u8fd9\u6837\u4e00\u79cd\u5e76\u53d1\u5199\u5165\u6e90\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b\u5e94\u8be5\u5199\u5165\u4e0e\u4e8b\u52a1\u65e5\u5fd7\u5206\u5f00\u7684\u78c1\u76d8\u7ec4\u4e0a\u3002\u5feb\u7167\u5f02\u6b65\u5199\u5165\u78c1\u76d8\uff0c\u56e0\u6b64\u901a\u5e38\u53ef\u4ee5\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u548c\u6d88\u606f\u65e5\u5fd7\u6587\u4ef6\u5171\u4eab\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 dataLogDir \u53c2\u6570\u5c06\u670d\u52a1\u5668\u914d\u7f6e\u4e3a\u4f7f\u7528\u5355\u72ec\u7684\u78c1\u76d8\u7ec4\u3002 \u5e94\u7528\u7a0b\u5e8f\u9694\u79bb\uff1a\u9664\u975e\u60a8\u771f\u6b63\u4e86\u89e3\u8981\u5b89\u88c5\u5728\u540c\u4e00\u673a\u5668\u4e0a\u7684\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7684\u5e94\u7528\u7a0b\u5e8f\u6a21\u5f0f\uff0c\u5426\u5219\u6700\u597d\u5355\u72ec\u8fd0\u884c ZooKeeper\uff08\u5c3d\u7ba1\u8fd9\u53ef\u80fd\u662f\u4e0e\u786c\u4ef6\u529f\u80fd\u7684\u5e73\u8861\u884c\u4e3a\uff09\u3002 \u8c28\u614e\u4f7f\u7528\u865a\u62df\u5316\uff1a\u5b83\u53ef\u4ee5\u5de5\u4f5c\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u60a8\u7684\u96c6\u7fa4\u5e03\u5c40\u3001\u8bfb/\u5199\u6a21\u5f0f\u548c SLA\uff0c\u4f46\u662f\u865a\u62df\u5316\u5c42\u5f15\u5165\u7684\u5fae\u5c0f\u5f00\u9500\u53ef\u80fd\u4f1a\u7d2f\u79ef\u8d77\u6765\u5e76\u5bfc\u81f4 ZooKeeper \u5931\u6548\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u5bf9\u65f6\u95f4\u975e\u5e38\u654f\u611f ZooKeeper \u914d\u7f6e\uff1a\u5b83\u662f java\uff0c\u8bf7\u786e\u4fdd\u7ed9\u5b83\u201c\u8db3\u591f\u201d\u7684\u5806\u7a7a\u95f4\uff08\u6211\u4eec\u901a\u5e38\u4f7f\u7528 3-5G \u8fd0\u884c\u5b83\u4eec\uff0c\u4f46\u8fd9\u4e3b\u8981\u662f\u7531\u4e8e\u6211\u4eec\u8fd9\u91cc\u7684\u6570\u636e\u96c6\u5927\u5c0f\uff09\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u6211\u4eec\u6ca1\u6709\u4e00\u4e2a\u597d\u7684\u516c\u5f0f\uff0c\u4f46\u8bf7\u8bb0\u4f4f\uff0c\u5141\u8bb8\u66f4\u591a\u7684 ZooKeeper \u72b6\u6001\u610f\u5473\u7740\u5feb\u7167\u53ef\u80fd\u4f1a\u53d8\u5f97\u5f88\u5927\uff0c\u800c\u5927\u5feb\u7167\u4f1a\u5f71\u54cd\u6062\u590d\u65f6\u95f4\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u5feb\u7167\u53d8\u5f97\u592a\u5927\uff08\u51e0 GB\uff09\uff0c\u90a3\u4e48\u60a8\u53ef\u80fd\u9700\u8981\u589e\u52a0 initLimit \u53c2\u6570\uff0c\u4ee5\u4fbf\u4e3a\u670d\u52a1\u5668\u63d0\u4f9b\u8db3\u591f\u7684\u65f6\u95f4\u6765\u6062\u590d\u5e76\u52a0\u5165\u96c6\u5408\u3002 \u76d1\u63a7\uff1aJMX \u548c 4 \u5b57\u6bcd\u5355\u8bcd (4lw) \u547d\u4ee4\u90fd\u975e\u5e38\u6709\u7528\uff0c\u5b83\u4eec\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u786e\u5b9e\u91cd\u53e0\uff08\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u66f4\u559c\u6b22 4 \u5b57\u6bcd\u547d\u4ee4\uff0c\u5b83\u4eec\u770b\u8d77\u6765\u66f4\u53ef\u9884\u6d4b\uff0c\u6216\u8005\u81f3\u5c11\uff0c\u5b83\u4eec\u4e0eLI \u76d1\u63a7\u57fa\u7840\u8bbe\u65bd\uff09 \u4e0d\u8981\u8fc7\u5ea6\u6784\u5efa\u96c6\u7fa4\uff1a\u5927\u578b\u96c6\u7fa4\uff0c\u5c24\u5176\u662f\u5728\u5199\u5165\u5927\u91cf\u4f7f\u7528\u6a21\u5f0f\u4e2d\uff0c\u610f\u5473\u7740\u5927\u91cf\u7684\u96c6\u7fa4\u5185\u901a\u4fe1\uff08\u5199\u5165\u548c\u540e\u7eed\u96c6\u7fa4\u6210\u5458\u66f4\u65b0\u7684\u4ef2\u88c1\uff09\uff0c\u4f46\u4e0d\u8981\u6784\u5efa\u4e0d\u8db3\uff08\u5e76\u6709\u6df9\u6ca1\u96c6\u7fa4\u7684\u98ce\u9669\uff09\u3002\u62e5\u6709\u66f4\u591a\u670d\u52a1\u5668\u4f1a\u589e\u52a0\u60a8\u7684\u8bfb\u53d6\u80fd\u529b\u3002 \u603b\u4f53\u800c\u8a00\uff0c\u6211\u4eec\u5c1d\u8bd5\u4f7f ZooKeeper \u7cfb\u7edf\u5c3d\u53ef\u80fd\u5c0f\uff0c\u4ee5\u5904\u7406\u8d1f\u8f7d\uff08\u52a0\u4e0a\u6807\u51c6\u589e\u957f\u5bb9\u91cf\u89c4\u5212\uff09\u5e76\u5c3d\u53ef\u80fd\u7b80\u5355\u3002\u4e0e\u5b98\u65b9\u7248\u672c\u76f8\u6bd4\uff0c\u6211\u4eec\u5c3d\u91cf\u4e0d\u5bf9\u914d\u7f6e\u6216\u5e94\u7528\u7a0b\u5e8f\u5e03\u5c40\u505a\u4efb\u4f55\u82b1\u54e8\u7684\u4e8b\u60c5\uff0c\u5e76\u5c3d\u53ef\u80fd\u4fdd\u6301\u5176\u72ec\u7acb\u6027\u3002\u7531\u4e8e\u8fd9\u4e9b\u539f\u56e0\uff0c\u6211\u4eec\u503e\u5411\u4e8e\u8df3\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u6253\u5305\u7248\u672c\uff0c\u56e0\u4e3a\u5b83\u503e\u5411\u4e8e\u5c1d\u8bd5\u5c06\u5185\u5bb9\u653e\u5165\u64cd\u4f5c\u7cfb\u7edf\u6807\u51c6\u5c42\u6b21\u7ed3\u6784\u4e2d\uff0c\u8fd9\u53ef\u80fd\u4f1a\u201c\u6df7\u4e71\u201d\uff0c\u56e0\u4e3a\u7f3a\u4e4f\u66f4\u597d\u7684\u63aa\u8f9e\u65b9\u5f0f\u3002 6.10 KRaft \u914d\u7f6e \u6d41\u7a0b\u89d2\u8272 \u5728 KRaft \u6a21\u5f0f\u4e0b\uff0c\u6bcf\u4e2a Kafka \u670d\u52a1\u5668\u90fd\u53ef\u4ee5\u4f7f\u7528\u8be5\u5c5e\u6027\u914d\u7f6e\u4e3a\u63a7\u5236\u5668\u3001\u4ee3\u7406\u6216\u4e24\u8005 process.roles \u3002\u8be5\u5c5e\u6027\u53ef\u4ee5\u5177\u6709\u4ee5\u4e0b\u503c\uff1a \u5982\u679c process.roles \u8bbe\u7f6e\u4e3a broker \uff0c\u5219\u670d\u52a1\u5668\u5145\u5f53\u4ee3\u7406\u3002 \u5982\u679c process.roles \u8bbe\u7f6e\u4e3a controller \uff0c\u5219\u670d\u52a1\u5668\u5145\u5f53\u63a7\u5236\u5668\u3002 \u5982\u679c process.roles \u8bbe\u7f6e\u4e3a broker,controller \uff0c\u5219\u670d\u52a1\u5668\u65e2\u5145\u5f53\u4ee3\u7406\u53c8\u5145\u5f53\u63a7\u5236\u5668\u3002 \u5982\u679c process.roles \u6839\u672c\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5219\u5047\u5b9a\u5904\u4e8e ZooKeeper \u6a21\u5f0f\u3002 \u65e2\u5145\u5f53\u4ee3\u7406\u53c8\u5145\u5f53\u63a7\u5236\u5668\u7684 Kafka \u670d\u52a1\u5668\u88ab\u79f0\u4e3a\u201c\u7ec4\u5408\u201d\u670d\u52a1\u5668\u3002\u5bf9\u4e8e\u5f00\u53d1\u73af\u5883\u7b49\u5c0f\u578b\u7528\u4f8b\uff0c\u7ec4\u5408\u670d\u52a1\u5668\u66f4\u6613\u4e8e\u64cd\u4f5c\u3002\u4e3b\u8981\u7f3a\u70b9\u662f\u63a7\u5236\u5668\u4e0e\u7cfb\u7edf\u5176\u4ed6\u90e8\u5206\u7684\u9694\u79bb\u7a0b\u5ea6\u8f83\u4f4e\u3002\u4f8b\u5982\uff0c\u65e0\u6cd5\u5728\u7ec4\u5408\u6a21\u5f0f\u4e0b\u4e0e\u4ee3\u7406\u5206\u5f00\u6eda\u52a8\u6216\u6269\u5c55\u63a7\u5236\u5668\u3002\u5728\u5173\u952e\u90e8\u7f72\u73af\u5883\u4e2d\u4e0d\u5efa\u8bae\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f\u3002 \u63a7\u5236\u5668 \u5728KRaft\u6a21\u5f0f\u4e0b\uff0c\u9009\u62e9\u7279\u5b9a\u7684Kafka\u670d\u52a1\u5668\u4f5c\u4e3a\u63a7\u5236\u5668\uff08\u4e0e\u57fa\u4e8eZooKeeper\u7684\u6a21\u5f0f\u4e0d\u540c\uff0c\u5728\u8be5\u6a21\u5f0f\u4e2d\u4efb\u4f55\u670d\u52a1\u5668\u90fd\u53ef\u4ee5\u6210\u4e3a\u63a7\u5236\u5668\uff09\u3002\u88ab\u9009\u4e3a\u63a7\u5236\u5668\u7684\u670d\u52a1\u5668\u5c06\u53c2\u4e0e\u5143\u6570\u636e\u4ef2\u88c1\u3002\u6bcf\u4e2a\u63a7\u5236\u5668\u90fd\u662f\u5f53\u524d\u6d3b\u52a8\u63a7\u5236\u5668\u7684\u6d3b\u52a8\u63a7\u5236\u5668\u6216\u70ed\u5907\u7528\u63a7\u5236\u5668\u3002 Kafka \u7ba1\u7406\u5458\u901a\u5e38\u4f1a\u9009\u62e9 3 \u6216 5 \u4e2a\u670d\u52a1\u5668\u6765\u62c5\u4efb\u6b64\u89d2\u8272\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6210\u672c\u548c\u7cfb\u7edf\u5728\u4e0d\u5f71\u54cd\u53ef\u7528\u6027\u7684\u60c5\u51b5\u4e0b\u5e94\u627f\u53d7\u7684\u5e76\u53d1\u6545\u969c\u6570\u91cf\u7b49\u56e0\u7d20\u3002\u5927\u591a\u6570\u63a7\u5236\u5668\u5fc5\u987b\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u624d\u80fd\u4fdd\u6301\u53ef\u7528\u6027\u30023\u4e2a\u63a7\u5236\u5668\u65f6\uff0c\u96c6\u7fa4\u53ef\u4ee5\u5bb9\u5fcd1\u4e2a\u63a7\u5236\u5668\u6545\u969c\uff1b\u5982\u679c\u6709 5 \u4e2a\u63a7\u5236\u5668\uff0c\u96c6\u7fa4\u53ef\u4ee5\u5bb9\u5fcd 2 \u4e2a\u63a7\u5236\u5668\u6545\u969c\u3002 Kafka \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u90fd\u4f7f\u7528\u8be5 controller.quorum.voters \u5c5e\u6027\u53d1\u73b0\u4ef2\u88c1\u6295\u7968\u8005\u3002\u8fd9\u6807\u8bc6\u4e86\u5e94\u4f7f\u7528\u7684\u4ef2\u88c1\u63a7\u5236\u5668\u670d\u52a1\u5668\u3002\u5fc5\u987b\u679a\u4e3e\u6240\u6709\u63a7\u5236\u5668\u3002\u6bcf\u4e2a\u63a7\u5236\u5668\u5747\u901a\u8fc7\u5176 id \u3001 host \u548c port \u4fe1\u606f\u8fdb\u884c\u6807\u8bc6\u3002\u4f8b\u5982\uff1a controller.quorum.voters=id1@host1:port1,id2@host2:port2,id3@host3:port3 \u5982\u679c\u4e00\u4e2aKafka\u96c6\u7fa4\u67093\u4e2a\u63a7\u5236\u5668\uff0c\u5206\u522b\u540d\u4e3acontroller1\u3001controller2\u548ccontroller3\uff0c\u90a3\u4e48controller1\u53ef\u80fd\u6709\u4ee5\u4e0b\u914d\u7f6e\uff1a process.roles=controller node.id=1 listeners=CONTROLLER://controller1.example.com:9093 controller.quorum.voters=1@controller1.example.com:9093,2@controller2.example.com:9093,3@controller3.example.com:9093 \u6bcf\u4e2abroker\u548c\u63a7\u5236\u5668\u90fd\u5fc5\u987b\u8bbe\u7f6e\u8be5 controller.quorum.voters \u5c5e\u6027\u3002\u5c5e\u6027\u4e2d\u63d0\u4f9b\u7684\u8282\u70b9 ID controller.quorum.voters \u5fc5\u987b\u4e0e\u63a7\u5236\u5668\u670d\u52a1\u5668\u4e0a\u7684\u76f8\u5e94 ID \u5339\u914d\u3002\u4f8b\u5982\uff0c\u5728controller1\u4e0a\uff0cnode.id\u5fc5\u987b\u8bbe\u7f6e\u4e3a1\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002\u6bcf\u4e2a\u8282\u70b9 ID \u5728\u7279\u5b9a\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u4efb\u4f55\u4e24\u4e2a\u670d\u52a1\u5668\u90fd\u4e0d\u80fd\u5177\u6709\u76f8\u540c\u7684\u8282\u70b9 ID\uff0c\u65e0\u8bba\u5176 process.roles \u503c\u5982\u4f55\u3002 \u5b58\u50a8\u5de5\u5177 \u8be5 kafka-storage.sh random-uuid \u547d\u4ee4\u53ef\u7528\u4e8e\u4e3a\u65b0\u96c6\u7fa4\u751f\u6210\u96c6\u7fa4 ID\u3002\u4f7f\u7528\u8be5\u547d\u4ee4\u683c\u5f0f\u5316\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u65f6\uff0c\u5fc5\u987b\u4f7f\u7528\u6b64\u96c6\u7fa4 ID kafka-storage.sh format \u3002 \u8fd9\u4e0eKafka\u8fc7\u53bb\u7684\u8fd0\u4f5c\u65b9\u5f0f\u4e0d\u540c\u3002\u6b64\u524d\uff0cKafka\u4f1a\u81ea\u52a8\u683c\u5f0f\u5316\u7a7a\u767d\u5b58\u50a8\u76ee\u5f55\uff0c\u5e76\u81ea\u52a8\u751f\u6210\u65b0\u7684\u96c6\u7fa4ID\u3002\u8fdb\u884c\u66f4\u6539\u7684\u539f\u56e0\u4e4b\u4e00\u662f\u81ea\u52a8\u683c\u5f0f\u5316\u6709\u65f6\u4f1a\u63a9\u76d6\u9519\u8bef\u60c5\u51b5\u3002\u8fd9\u5bf9\u4e8e\u63a7\u5236\u5668\u548c\u4ee3\u7406\u670d\u52a1\u5668\u7ef4\u62a4\u7684\u5143\u6570\u636e\u65e5\u5fd7\u5c24\u5176\u91cd\u8981\u3002\u5982\u679c\u5927\u591a\u6570\u63a7\u5236\u5668\u80fd\u591f\u4ee5\u7a7a\u65e5\u5fd7\u76ee\u5f55\u542f\u52a8\uff0c\u5219\u53ef\u80fd\u4f1a\u5728\u4e22\u5931\u5df2\u63d0\u4ea4\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u9009\u4e3e\u9886\u5bfc\u8005\u3002 \u8c03\u8bd5 \u5143\u6570\u636e\u4ef2\u88c1\u5de5\u5177 \u8be5 kafka-metadata-quorum \u5de5\u5177\u53ef\u7528\u4e8e\u63cf\u8ff0\u96c6\u7fa4\u5143\u6570\u636e\u5206\u533a\u7684\u8fd0\u884c\u65f6\u72b6\u6001\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u663e\u793a\u5143\u6570\u636e\u4ef2\u88c1\u7684\u6458\u8981\uff1a > bin/kafka-metadata-quorum.sh --bootstrap-server broker_host:port describe --status ClusterId: fMCL8kv1SWm87L_Md-I2hg LeaderId: 3002 LeaderEpoch: 2 HighWatermark: 10 MaxFollowerLag: 0 MaxFollowerLagTimeMs: -1 CurrentVoters: [3000,3001,3002] CurrentObservers: [0,1,2] \u8f6c\u50a8\u65e5\u5fd7\u5de5\u5177 \u8be5 kafka-dump-log \u5de5\u5177\u53ef\u7528\u4e8e\u8c03\u8bd5\u96c6\u7fa4\u5143\u6570\u636e\u76ee\u5f55\u7684\u65e5\u5fd7\u6bb5\u548c\u5feb\u7167\u3002\u8be5\u5de5\u5177\u5c06\u626b\u63cf\u63d0\u4f9b\u7684\u6587\u4ef6\u5e76\u89e3\u7801\u5143\u6570\u636e\u8bb0\u5f55\u3002\u4f8b\u5982\uff0c\u6b64\u547d\u4ee4\u89e3\u7801\u5e76\u6253\u5370\u7b2c\u4e00\u4e2a\u65e5\u5fd7\u6bb5\u4e2d\u7684\u8bb0\u5f55\uff1a > bin/kafka-dump-log.sh --cluster-metadata-decoder --files metadata_log_dir/__cluster_metadata-0/00000000000000000000.log \u6b64\u547d\u4ee4\u89e3\u7801\u5e76\u6253\u5370\u96c6\u7fa4\u5143\u6570\u636e\u5feb\u7167\u4e2d\u7684\u8bb0\u5f55\uff1a > bin/kafka-dump-log.sh --cluster-metadata-decoder --files metadata_log_dir/__cluster_metadata-0/00000000000000000100-0000000001.checkpoint \u5143\u6570\u636e\u5916\u58f3 \u8be5 kafka-metadata-shell \u5de5\u5177\u53ef\u7528\u4e8e\u4ea4\u4e92\u5f0f\u68c0\u67e5\u96c6\u7fa4\u5143\u6570\u636e\u5206\u533a\u7684\u72b6\u6001\uff1a > bin/kafka-metadata-shell.sh --snapshot metadata_log_dir/__cluster_metadata-0/00000000000000000000.log >> ls / brokers local metadataQuorum topicIds topics >> ls /topics foo >> cat /topics/foo/0/data { \"partitionId\" : 0, \"topicId\" : \"5zoAlv-xEh9xRANKXt1Lbg\", \"replicas\" : [ 1 ], \"isr\" : [ 1 ], \"removingReplicas\" : null, \"addingReplicas\" : null, \"leader\" : 1, \"leaderEpoch\" : 0, \"partitionEpoch\" : 0 } >> exit \u90e8\u7f72\u6ce8\u610f\u4e8b\u9879 Kafka \u670d\u52a1\u5668 process.role \u5e94\u8bbe\u7f6e\u4e3a\u5176\u4e2d\u4e4b\u4e00 broker \u6216 controller \u4f46\u4e0d\u80fd\u540c\u65f6\u8bbe\u7f6e\u4e24\u8005\u3002\u7ec4\u5408\u6a21\u5f0f\u53ef\u4ee5\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u4f46\u5728\u5173\u952e\u90e8\u7f72\u73af\u5883\u4e2d\u5e94\u907f\u514d\u4f7f\u7528\u3002 \u4e3a\u4e86\u5b9e\u73b0\u5197\u4f59\uff0cKafka \u96c6\u7fa4\u5e94\u4f7f\u7528 3 \u4e2a\u63a7\u5236\u5668\u3002\u5728\u5173\u952e\u73af\u5883\u4e2d\u4e0d\u5efa\u8bae\u4f7f\u7528\u8d85\u8fc7 3 \u4e2a\u63a7\u5236\u5668\u3002\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u51fa\u73b0\u90e8\u5206\u7f51\u7edc\u6545\u969c\u65f6\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u4ef2\u88c1\u53ef\u80fd\u4f1a\u53d8\u5f97\u4e0d\u53ef\u7528\u3002\u6b64\u9650\u5236\u5c06\u5728 Kafka \u7684\u672a\u6765\u7248\u672c\u4e2d\u5f97\u5230\u89e3\u51b3\u3002 Kafka \u63a7\u5236\u5668\u5c06\u96c6\u7fa4\u7684\u6240\u6709\u5143\u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u548c\u78c1\u76d8\u4e0a\u3002\u6211\u4eec\u8ba4\u4e3a\uff0c\u5bf9\u4e8e\u5178\u578b\u7684 Kafka \u96c6\u7fa4\uff0c5GB \u4e3b\u5185\u5b58\u548c\u5143\u6570\u636e\u65e5\u5fd7\u7ba1\u7406\u5668\u4e0a\u7684 5GB \u78c1\u76d8\u7a7a\u95f4\u5c31\u8db3\u591f\u4e86\u3002 \u7f3a\u5c11\u7684\u529f\u80fd KRaft \u6a21\u5f0f\u4e2d\u672a\u5b8c\u5168\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a \u652f\u6301\u5177\u6709\u591a\u4e2a\u5b58\u50a8\u76ee\u5f55\u7684JBOD\u914d\u7f6e \u4fee\u6539\u72ec\u7acb KRaft \u63a7\u5236\u5668\u4e0a\u7684\u67d0\u4e9b\u52a8\u6001\u914d\u7f6e \u59d4\u6258\u4ee3\u5e01 ZooKeeper \u5230 KRaft \u8fc1\u79fb ZooKeeper \u5230 KRaft \u7684\u8fc1\u79fb\u88ab\u89c6\u4e3a\u65e9\u671f\u8bbf\u95ee\u529f\u80fd\uff0c\u4e0d\u5efa\u8bae\u7528\u4e8e\u751f\u4ea7\u96c6\u7fa4\u3002 ZK \u5230 KRaft \u7684\u8fc1\u79fb\u5c1a\u4e0d\u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a \u8fc1\u79fb\u671f\u95f4\u6216\u8fc1\u79fb\u4e4b\u540e\u964d\u7ea7\u5230 ZooKeeper \u6a21\u5f0f KRaft \u5c1a\u4e0d\u652f\u6301\u7684 \u5176\u4ed6\u529f\u80fd \u8bf7\u4f7f\u7528 \u9879\u76ee JIRA \u548c\u201ckraft\u201d\u7ec4\u4ef6\u62a5\u544a ZooKeeper \u5230 KRaft \u8fc1\u79fb\u7684\u95ee\u9898\u3002 \u672f\u8bed \u6211\u4eec\u8fd9\u91cc\u4f7f\u7528\u672f\u8bed\u201c\u8fc1\u79fb\u201d\u6765\u6307\u5c06Kafka\u96c6\u7fa4\u7684\u5143\u6570\u636e\u7cfb\u7edf\u4eceZooKeeper\u66f4\u6539\u4e3aKRaft\u5e76\u8fc1\u79fb\u73b0\u6709\u5143\u6570\u636e\u7684\u8fc7\u7a0b\u3002\u201c\u5347\u7ea7\u201d\u662f\u6307\u5b89\u88c5\u66f4\u65b0\u7248\u672c\u7684 Kafka\u3002\u4e0d\u5efa\u8bae\u5728\u6267\u884c\u5143\u6570\u636e\u8fc1\u79fb\u7684\u540c\u65f6\u5347\u7ea7\u8f6f\u4ef6\u3002 \u6211\u4eec\u8fd8\u4f7f\u7528\u672f\u8bed\u201cZK \u6a21\u5f0f\u201d\u6765\u6307\u4ee3\u4f7f\u7528 ZooKeeper \u4f5c\u4e3a\u5143\u6570\u636e\u7cfb\u7edf\u7684 Kafka \u4ee3\u7406\u3002\u201cKRaft \u6a21\u5f0f\u201d\u662f\u6307\u4f7f\u7528 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u4f5c\u4e3a\u5176\u5143\u6570\u636e\u7cfb\u7edf\u7684 Kafka \u4ee3\u7406\u3002 \u51c6\u5907\u8fc1\u79fb \u5728\u5f00\u59cb\u8fc1\u79fb\u4e4b\u524d\uff0cKafka \u4ee3\u7406\u5fc5\u987b\u5347\u7ea7\u5230\u8f6f\u4ef6\u7248\u672c 3.5.0\uff0c\u5e76\u5c06\u201cinter.broker.protocol.version\u201d\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201c3.5\u201d\u3002\u6709\u5173\u5347\u7ea7\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u5230 3.5.0 \u3002 \u5efa\u8bae\u5728\u8fc1\u79fb\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u65f6\u4e3a\u8fc1\u79fb\u7ec4\u4ef6\u542f\u7528 TRACE \u7ea7\u522b\u65e5\u5fd7\u8bb0\u5f55\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b log4j \u914d\u7f6e\u6dfb\u52a0\u5230\u6bcf\u4e2a KRaft \u63a7\u5236\u5668\u7684\u201clog4j.properties\u201d\u6587\u4ef6\u6765\u5b8c\u6210\u3002 log4j.logger.org.apache.kafka.metadata.migration=TRACE \u5728\u8fc1\u79fb\u671f\u95f4\u5728 KRaft \u63a7\u5236\u5668\u548c ZK \u4ee3\u7406\u4e0a\u542f\u7528 DEBUG \u65e5\u5fd7\u8bb0\u5f55\u901a\u5e38\u5f88\u6709\u7528\u3002 \u914d\u7f6e KRaft \u63a7\u5236\u5668\u4ef2\u88c1 \u5728\u5f00\u59cb\u8fc1\u79fb\u4e4b\u524d\u9700\u8981\u505a\u4e24\u4ef6\u4e8b\u3002\u9996\u5148\uff0c\u5fc5\u987b\u914d\u7f6e\u4ee3\u7406\u4ee5\u652f\u6301\u8fc1\u79fb\uff0c\u5176\u6b21\uff0c\u5fc5\u987b\u90e8\u7f72 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u3002KRaft \u63a7\u5236\u5668\u5e94\u914d\u7f6e\u4e0e\u73b0\u6709 Kafka \u96c6\u7fa4\u76f8\u540c\u7684\u96c6\u7fa4 ID\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u4ee3\u7406\u6570\u636e\u76ee\u5f55\u4e2d\u7684\u201cmeta.properties\u201d\u6587\u4ef6\u4e4b\u4e00\u6216\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u627e\u5230\u3002 ./bin/zookeeper-shell.sh localhost:2181 get /cluster/id KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u8fd8\u5e94\u914d\u7f6e\u6700\u65b0 metadata.version \u7684\u201c3.4\u201d\u3002\u6709\u5173 KRaft \u90e8\u7f72\u7684\u66f4\u591a\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605 \u4e0a\u8ff0\u6587\u6863 \u3002 \u9664\u4e86\u6807\u51c6\u7684 KRaft \u914d\u7f6e\u4e4b\u5916\uff0cKRaft \u63a7\u5236\u5668\u8fd8\u9700\u8981\u542f\u7528\u8fc1\u79fb\u652f\u6301\u5e76\u63d0\u4f9b ZooKeeper \u8fde\u63a5\u914d\u7f6e\u3002 \u4ee5\u4e0b\u662f\u51c6\u5907\u8fc1\u79fb\u7684 KRaft \u63a7\u5236\u5668\u7684\u793a\u4f8b\u914d\u7f6e\uff1a # Sample KRaft cluster controller.properties listening on 9093 process.roles=controller node.id=3000 controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER listeners=CONTROLLER://:9093 # Enable the migration zookeeper.metadata.migration.enable=true # ZooKeeper client configuration zookeeper.connect=localhost:2181 # Other configs ... \u6ce8\u610f\uff1aKRaft \u96c6\u7fa4 node.id \u503c\u5fc5\u987b\u4e0e\u4efb\u4f55\u73b0\u6709\u7684 ZK \u4ee3\u7406\u4e0d\u540c broker.id \u3002\u5728 KRaft \u6a21\u5f0f\u4e2d\uff0c\u4ee3\u7406\u548c\u63a7\u5236\u5668\u5171\u4eab\u76f8\u540c\u7684 Node ID \u547d\u540d\u7a7a\u95f4\u3002 \u5728\u4ee3\u7406\u4e0a\u542f\u7528\u8fc1\u79fb \u4e00\u65e6 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u542f\u52a8\uff0c\u4ee3\u7406\u5c06\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u4ee3\u7406\u53ef\u4ee5\u4ee5\u6eda\u52a8\u65b9\u5f0f\u91cd\u65b0\u542f\u52a8\uff0c\u4ee5\u907f\u514d\u5f71\u54cd\u96c6\u7fa4\u53ef\u7528\u6027\u3002\u6bcf\u4e2a\u4ee3\u7406\u90fd\u9700\u8981\u4ee5\u4e0b\u914d\u7f6e\u624d\u80fd\u4e0e KRaft \u63a7\u5236\u5668\u901a\u4fe1\u5e76\u542f\u7528\u8fc1\u79fb\u3002 controller.quorum.voters controller.listener.names \u8fd8\u5e94\u5c06controller.listener.name\u6dfb\u52a0\u5230 listener.security.property.map zookeeper.metadata.migration.enable \u4ee5\u4e0b\u662f\u51c6\u5907\u8fc1\u79fb\u7684\u4ee3\u7406\u7684\u793a\u4f8b\u914d\u7f6e\uff1a # Sample ZK broker server.properties listening on 9092 broker.id=0 listeners=PLAINTEXT://:9092 advertised.listeners=PLAINTEXT://localhost:9092 listener.security.protocol.map=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT # Set the IBP inter.broker.protocol.version=3.5 # Enable the migration zookeeper.metadata.migration.enable=true # ZooKeeper client configuration zookeeper.connect=localhost:2181 # KRaft controller quorum configuration controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER \u6ce8\u610f\uff1a\u4f7f\u7528\u5fc5\u8981\u7684\u914d\u7f6e\u91cd\u65b0\u542f\u52a8\u6700\u7ec8\u7684 ZK \u4ee3\u7406\u540e\uff0c\u8fc1\u79fb\u5c06\u81ea\u52a8\u5f00\u59cb\u3002 \u8fc1\u79fb\u5b8c\u6210\u540e\uff0c\u5728\u4e3b\u63a7\u4e0a\u53ef\u4ee5\u89c2\u5bdf\u5230\u4e00\u6761INFO\u7ea7\u522b\u7684\u65e5\u5fd7\uff1a Completed migration of metadata from Zookeeper to KRaft \u5c06\u4ee3\u7406\u8fc1\u79fb\u5230 KRaft \u4e00\u65e6 KRaft \u63a7\u5236\u5668\u5b8c\u6210\u5143\u6570\u636e\u8fc1\u79fb\uff0c\u4ee3\u7406\u4ecd\u5c06\u4ee5 ZK \u6a21\u5f0f\u8fd0\u884c\u3002\u5f53 KRaft \u63a7\u5236\u5668\u5904\u4e8e\u8fc1\u79fb\u6a21\u5f0f\u65f6\uff0c\u5b83\u5c06\u7ee7\u7eed\u5411 ZK \u6a21\u5f0f\u4ee3\u7406\u53d1\u9001\u63a7\u5236\u5668 RPC\u3002\u8fd9\u5305\u62ec UpdateMetadata \u548c LeaderAndIsr \u7b49 RPC\u3002 \u8981\u5c06\u4ee3\u7406\u8fc1\u79fb\u5230 KRaft\uff0c\u53ea\u9700\u5c06\u5b83\u4eec\u91cd\u65b0\u914d\u7f6e\u4e3a KRaft \u4ee3\u7406\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u3002\u4ee5\u4e0a\u9762\u7684\u4ee3\u7406\u914d\u7f6e\u4e3a\u4f8b\uff0c\u6211\u4eec\u5c06\u66ff\u6362 broker.id \u4e3a node.id \u5e76\u6dfb\u52a0 process.roles=broker \u3002\u4ee3\u7406\u5728\u91cd\u65b0\u542f\u52a8\u65f6\u4fdd\u6301\u76f8\u540c\u7684\u4ee3\u7406/\u8282\u70b9 ID \u975e\u5e38\u91cd\u8981\u3002\u6b64\u65f6\u5e94\u8be5\u5220\u9664 Zookeeper \u914d\u7f6e\u3002 # Sample KRaft broker server.properties listening on 9092 process.roles=broker node.id=0 listeners=PLAINTEXT://:9092 advertised.listeners=PLAINTEXT://localhost:9092 listener.security.protocol.map=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT # Don't set the IBP, KRaft uses \"metadata.version\" feature flag # inter.broker.protocol.version=3.5 # Remove the migration enabled flag # zookeeper.metadata.migration.enable=true # Remove ZooKeeper client configuration # zookeeper.connect=localhost:2181 # Keep the KRaft controller quorum configuration controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER \u6bcf\u4e2a\u4ee3\u7406\u90fd\u4f1a\u4f7f\u7528 KRaft \u914d\u7f6e\u91cd\u65b0\u542f\u52a8\uff0c\u76f4\u5230\u6574\u4e2a\u96c6\u7fa4\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\u3002 \u5b8c\u6210\u8fc1\u79fb \u5728 KRaft \u6a21\u5f0f\u4e0b\u91cd\u65b0\u542f\u52a8\u6240\u6709\u4ee3\u7406\u540e\uff0c\u5b8c\u6210\u8fc1\u79fb\u7684\u6700\u540e\u4e00\u6b65\u662f\u4f7f KRaft \u63a7\u5236\u5668\u9000\u51fa\u8fc1\u79fb\u6a21\u5f0f\u3002\u8fd9\u662f\u901a\u8fc7\u4ece\u6bcf\u4e2a\u914d\u7f6e\u4e2d\u5220\u9664\u201czookeeper.metadata.migration.enable\u201d\u5c5e\u6027\u5e76\u4e00\u6b21\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u6765\u5b8c\u6210\u7684\u3002 # Sample KRaft cluster controller.properties listening on 9093 process.roles=controller node.id=3000 controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER listeners=CONTROLLER://:9093 # Disable the migration # zookeeper.metadata.migration.enable=true # Remove ZooKeeper client configuration # zookeeper.connect=localhost:2181 # Other configs ... 6.11\u5206\u5c42\u5b58\u50a8 \u5206\u5c42\u5b58\u50a8\u6982\u8ff0 Kafka\u6570\u636e\u4e3b\u8981\u4ee5\u6d41\u5a92\u4f53\u65b9\u5f0f\u4f7f\u7528\u5c3e\u90e8\u8bfb\u53d6\u6765\u6d88\u8d39\u3002Tail\u8bfb\u53d6\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u9762\u7f13\u5b58\u6765\u670d\u52a1\u6570\u636e\uff0c\u800c\u4e0d\u662f\u78c1\u76d8\u8bfb\u53d6\u3002\u65e7\u6570\u636e\u901a\u5e38\u4ece\u78c1\u76d8\u8bfb\u53d6\u4ee5\u8fdb\u884c\u56de\u586b\u6216\u6545\u969c\u6062\u590d\uff0c\u5e76\u4e14\u4e0d\u5e38\u89c1\u3002 \u5728\u5206\u5c42\u5b58\u50a8\u65b9\u6cd5\u4e2d\uff0cKafka\u96c6\u7fa4\u914d\u7f6e\u4e86\u4e24\u5c42\u5b58\u50a8\u2014\u2014\u672c\u5730\u5b58\u50a8\u548c\u8fdc\u7a0b\u3002\u672c\u5730\u5c42\u4e0e\u5f53\u524d\u4f7f\u7528Kafka Broker \u4e0a\u7684\u672c\u5730\u78c1\u76d8\u5b58\u50a8\u65e5\u5fd7\u6bb5\u7684Kafka\u76f8\u540c\u3002\u65b0\u7684\u8fdc\u7a0b\u5c42\u4f7f\u7528\u5916\u90e8\u5b58\u50a8\u7cfb\u7edf\uff0c\u5982HDFS\u6216S3\uff0c\u6765\u5b58\u50a8\u5df2\u5b8c\u6210\u7684\u65e5\u5fd7\u6bb5\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b KIP-405 \u3002 \u6ce8\u610f\uff1a\u5206\u5c42\u5b58\u50a8\u88ab\u89c6\u4e3a\u65e9\u671f\u8bbf\u95ee\u529f\u80fd\uff0c\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 \u914d\u7f6e Broker \u914d\u7f6e \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka\u670d\u52a1\u5668\u4e0d\u4f1a\u542f\u7528\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u3002 remote.log.storage.system.enable \u662f\u63a7\u5236\u662f\u5426\u5728 Broker \u4e2d\u542f\u7528\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u7684\u5c5e\u6027\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u542f\u7528\u6b64\u529f\u80fd\u3002 RemoteStorageManager \u662f\u4e00\u4e2a\u63d0\u4f9b\u8fdc\u7a0b\u65e5\u5fd7\u6bb5\u548c\u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u63a5\u53e3\u3002Kafka\u670d\u52a1\u5668\u4e0d\u63d0\u4f9bRemoteStorageManager\u7684\u5f00\u7bb1\u5373\u7528\u5b9e\u73b0\u3002\u914d\u7f6e remote.log.storage.manager.class.name \u548c remote.log.storage.manager.class.path \uff0c\u4ee5\u6307\u5b9aRemoteStorageManager\u7684\u5b9e\u73b0\u3002 RemoteLogMetadataManager \u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u63d0\u4f9b\u5177\u6709\u5f3a\u70c8\u4e00\u81f4\u7684\u8bed\u4e49\u7684\u8fdc\u7a0b\u65e5\u5fd7\u6bb5\u5143\u6570\u636e\u751f\u547d\u5468\u671f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4ee5\u5b58\u50a8\u4e3a\u5185\u90e8\u4e3b\u9898\u7684\u5b9e\u73b0\u3002\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e remote.log.metadata.manager.class.name \u548c remote.log.metadata.manager.class.path \u6765\u66f4\u6539\u6b64\u5b9e\u73b0\u3002\u5f53\u91c7\u7528\u9ed8\u8ba4\u7684\u57fa\u4e8ekafka\u5185\u90e8\u4e3b\u9898\u7684\u5b9e\u73b0\u65f6\uff0c remote.log.metadata.manager.listener.name \u662f\u4e00\u4e2a\u5f3a\u5236\u6027\u5c5e\u6027\uff0c\u7528\u4e8e\u6307\u5b9a\u9ed8\u8ba4\u7684RemoteLogMetadataManager\u5b9e\u73b0\u521b\u5efa\u7684\u5ba2\u6237\u7aef\u3002 \u4e3b\u9898\u914d\u7f6e \u5728\u6b63\u786e\u914d\u7f6e\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u7684\u4ee3\u7406\u7aef\u914d\u7f6e\u540e\uff0c\u4ecd\u7136\u9700\u8981\u8bbe\u7f6e\u4e3b\u9898\u7ea7\u522b\u7684\u914d\u7f6e\u3002 remote.storage.enable \u662f\u786e\u5b9a\u4e3b\u9898\u662f\u5426\u60f3\u8981\u4f7f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u5f00\u5173\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u88ab\u8bbe\u7f6e\u4e3afalse\u3002\u542f\u7528 remote.storage.enable \u5c5e\u6027\u540e\uff0c\u63a5\u4e0b\u6765\u8981\u8003\u8651\u7684\u662f\u65e5\u5fd7\u4fdd\u7559\u3002\u5f53\u4e3a\u4e3b\u9898\u542f\u7528\u5206\u5c42\u5b58\u50a8\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e2\u4e2a\u989d\u5916\u7684\u65e5\u5fd7\u4fdd\u7559\u914d\u7f6e\uff1a local.retention.ms retention.ms local.retention.bytes retention.bytes The configuration prefixed with local are to specify the time/size the \"local\" log file can accept before moving to remote storage, and then get deleted. If unset, The value in retention.ms and retention.bytes will be used. \u5feb\u901f\u5165\u95e8\u793a\u4f8b Apache Kafka\u4e0d\u63d0\u4f9b\u5f00\u7bb1\u5373\u7528\u7684RemoteStorageManager\u5b9e\u73b0\u3002\u8981\u9884\u89c8\u5206\u5c42\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e3a\u96c6\u6210\u6d4b\u8bd5\u800c\u5b9e\u65bd\u7684 LocalTieredStorage \uff0c\u8fd9\u5c06\u5728\u672c\u5730\u5b58\u50a8\u4e2d\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u76ee\u5f55\u6765\u6a21\u62df\u8fdc\u7a0b\u5b58\u50a8\u3002 \u8981\u91c7\u7528\u201cLocalTieredStorage\u201d\uff0c\u9700\u8981\u5728\u672c\u5730\u6784\u5efa\u6d4b\u8bd5\u5e93 # please checkout to the specific version tag you're using before building it # ex: `git checkout 3.6.0` ./gradlew clean :storage:testJar \u6784\u5efa\u6210\u529f\u540e\uff0c\u5728 storage/build/libs \u4e0b\u5e94\u8be5\u6709\u4e00\u4e2a kafka-storage-x.x.x-test.jar \u6587\u4ef6\u3002\u63a5\u4e0b\u6765\uff0c\u5728\u4ee3\u7406\u7aef\u8bbe\u7f6e\u914d\u7f6e\u4ee5\u542f\u7528\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u3002 # Sample Zookeeper/Kraft broker server.properties listening on PLAINTEXT://:9092 remote.log.storage.system.enable=true # Setting the listener for the clients in RemoteLogMetadataManager to talk to the brokers. remote.log.metadata.manager.listener.name=PLAINTEXT # Please provide the implementation info for remoteStorageManager. # This is the mandatory configuration for tiered storage. # Here, we use the `LocalTieredStorage` built above. remote.log.storage.manager.class.name=org.apache.kafka.server.log.remote.storage.LocalTieredStorage remote.log.storage.manager.class.path=/PATH/TO/kafka-storage-x.x.x-test.jar # These 2 prefix are default values, but customizable remote.log.storage.manager.impl.prefix=rsm.config. remote.log.metadata.manager.impl.prefix=rlmm.config. # Configure the directory used for `LocalTieredStorage` # Note, please make sure the brokers need to have access to this directory rsm.config.dir=/tmp/kafka-remote-storage # This needs to be changed if number of brokers in the cluster is more than 1 rlmm.config.remote.log.metadata.topic.replication.factor=1 # Try to speed up the log retention check interval for testing log.retention.check.interval.ms=1000 \u6309\u7167 \u5feb\u901f\u5165\u95e8\u6307\u5357 \u542f\u52a8\u5361\u592b\u5361\u73af\u5883\u3002\u7136\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u5177\u6709\u914d\u7f6e\u542f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898\uff1a # remote.storage.enable=true -> enables tiered storage on the topic # local.retention.ms=1000 -> The number of milliseconds to keep the local log segment before it gets deleted. Note that a local log segment is eligible for deletion only after it gets uploaded to remote. # retention.ms=3600000 -> when segments exceed this time, the segments in remote storage will be deleted # segment.bytes=1048576 -> for test only, to speed up the log segment rolling interval # file.delete.delay.ms=10000 -> for test only, to speed up the local-log segment file delete delay bin/kafka-topics.sh --create --topic tieredTopic --bootstrap-server localhost:9092 \\ --config remote.storage.enable=true --config local.retention.ms=1000 --config retention.ms=3600000 \\ --config segment.bytes=1048576 --config file.delete.delay.ms=1000 \u5c1d\u8bd5\u5411\u201c\u5206\u5c42\u4e3b\u9898\u201d\u4e3b\u9898\u53d1\u9001\u6d88\u606f\u4ee5\u6eda\u52a8\u65e5\u5fd7\u6bb5\uff1a bin/kafka-producer-perf-test.sh --topic tieredTopic --num-records 1200 --record-size 1024 --throughput -1 --producer-props bootstrap.servers=localhost:9092 \u7136\u540e\uff0c\u6eda\u52a8\u6d3b\u52a8\u6bb5\u540e\uff0c\u65e7\u6bb5\u5e94\u79fb\u52a8\u5230\u8fdc\u7a0b\u5b58\u50a8\u5e76\u5220\u9664\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u4e0a\u9762\u914d\u7f6e\u7684\u8fdc\u7a0b\u65e5\u5fd7\u76ee\u5f55\u6765\u9a8c\u8bc1\u3002\u4f8b\u5982\uff1a > ls /tmp/kafka-remote-storage/kafka-tiered-storage/tieredTopic-0-jF8s79t9SrG_PNqlwv7bAA 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.index 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.snapshot 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.leader_epoch_checkpoint 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.timeindex 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.log \u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4ece\u5934\u5f00\u59cb\u6d88\u8017\u4e00\u4e9b\u6570\u636e\u5e76\u6253\u5370\u504f\u79fb\u6570\uff0c\u4ee5\u786e\u4fdd\u5b83\u80fd\u6210\u529f\u4ece\u8fdc\u7a0b\u5b58\u50a8\u4e2d\u83b7\u53d6\u504f\u79fb0\u3002 bin/kafka-console-consumer.sh --topic tieredTopic --from-beginning --max-messages 1 --bootstrap-server localhost:9092 --property print.offset=true \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u60f3\u5728\u96c6\u7fa4\u7ea7\u522b\u7981\u7528\u5206\u5c42\u5b58\u50a8\uff0c\u60a8\u5e94\u8be5\u660e\u786e\u5220\u9664\u542f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898\u3002\u5c1d\u8bd5\u7981\u7528\u96c6\u7fa4\u7ea7\u522b\u7684\u5206\u5c42\u5b58\u50a8\u800c\u4e0d\u5220\u9664\u4f7f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898\uff0c\u5c06\u5bfc\u81f4\u542f\u52a8\u671f\u95f4\u7684\u5f02\u5e38\u3002 bin/kafka-topics.sh --delete --topic tieredTopic --bootstrap-server localhost:9092 \u5220\u9664\u4e3b\u9898\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d\u5b89\u5168\u5730\u8bbe\u7f6e remote.log.storage.system.enable=false \u3002 \u9650\u5236 \u867d\u7136\u5206\u5c42\u5b58\u50a8\u7684\u65e9\u671f\u8bbf\u95ee\u7248\u672c\u63d0\u4f9b\u4e86\u5c1d\u8bd5\u6b64\u65b0\u529f\u80fd\u7684\u673a\u4f1a\uff0c\u4f46\u91cd\u8981\u7684\u662f\u8981\u610f\u8bc6\u5230\u4ee5\u4e0b\u9650\u5236\uff1a \u4e0d\u652f\u6301\u5177\u6709\u591a\u4e2a\u65e5\u5fd7\u76ee\u5f55\u7684\u96c6\u7fa4\uff08\u5373JBOD\u529f\u80fd\uff09 \u4e0d\u652f\u6301\u538b\u7f29\u4e3b\u9898 \u65e0\u6cd5\u7981\u7528\u4e3b\u9898\u7ea7\u522b\u7684\u5206\u5c42\u5b58\u50a8 \u5728\u4ee3\u7406\u7ea7\u522b\u7981\u7528\u5206\u5c42\u5b58\u50a8\u4e4b\u524d\uff0c\u9700\u8981\u5220\u9664\u542f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898 \u4e0e\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u76f8\u5173\u7684\u7ba1\u7406\u64cd\u4f5c\u4ec5\u57283.0\u7248\u672c\u8d77\u7684\u5ba2\u6237\u7aef\u4e0a\u53d7\u652f\u6301 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u5206\u5c42\u5b58\u50a8\u65e9\u671f\u8bbf\u95ee\u53d1\u5e03\u8bf4\u660e \u3002","title":"6. \u8fd0\u7ef4"},{"location":"6/#6-operations","text":"\u4ee5\u4e0b\u662f\u6839\u636e LinkedIn \u7684\u4f7f\u7528\u60c5\u51b5\u548c\u7ecf\u9a8c\u5b9e\u9645\u5c06 Kafka \u4f5c\u4e3a\u751f\u4ea7\u7cfb\u7edf\u8fd0\u884c\u7684\u4e00\u4e9b\u4fe1\u606f\u3002\u8bf7\u5c06\u60a8\u77e5\u9053\u7684\u4efb\u4f55\u5176\u4ed6\u63d0\u793a\u53d1\u9001\u7ed9\u6211\u4eec\u3002","title":"6. Operations \u64cd\u4f5c"},{"location":"6/#61-kafka","text":"\u672c\u8282\u5c06\u56de\u987e\u60a8\u5c06\u5728 Kafka \u96c6\u7fa4\u4e0a\u6267\u884c\u7684\u6700\u5e38\u89c1\u64cd\u4f5c\u3002\u672c\u8282\u4e2d\u56de\u987e\u7684\u6240\u6709\u5de5\u5177\u90fd\u53ef\u4ee5\u5728 bin/ Kafka \u53d1\u884c\u7248\u7684\u76ee\u5f55\u4e0b\u627e\u5230\uff0c\u5982\u679c\u4e0d\u5e26\u53c2\u6570\u8fd0\u884c\uff0c\u6bcf\u4e2a\u5de5\u5177\u90fd\u4f1a\u6253\u5370\u6240\u6709\u53ef\u80fd\u7684\u547d\u4ee4\u884c\u9009\u9879\u7684\u8be6\u7ec6\u4fe1\u606f\u3002","title":"6.1 Kafka\u57fa\u672c\u64cd\u4f5c"},{"location":"6/#_1","text":"\u60a8\u53ef\u4ee5\u9009\u62e9\u624b\u52a8\u6dfb\u52a0\u4e3b\u9898\uff0c\u4e5f\u53ef\u4ee5\u5728\u6570\u636e\u9996\u6b21\u53d1\u5e03\u5230\u4e0d\u5b58\u5728\u7684\u4e3b\u9898\u65f6\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u3002\u5982\u679c\u4e3b\u9898\u662f\u81ea\u52a8\u521b\u5efa\u7684\uff0c\u90a3\u4e48\u60a8\u53ef\u80fd\u9700\u8981\u8c03\u6574\u7528\u4e8e\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u7684 \u9ed8\u8ba4 \u4e3b\u9898\u914d\u7f6e\u3002 \u4f7f\u7528\u4e3b\u9898\u5de5\u5177\u6dfb\u52a0\u548c\u4fee\u6539\u4e3b\u9898\uff1a > bin/kafka-topics.sh --bootstrap-server broker_host:port --create --topic my_topic_name \\ --partitions 20 --replication-factor 3 --config x=y \u590d\u5236\u56e0\u5b50\u63a7\u5236\u6709\u591a\u5c11\u670d\u52a1\u5668\u5c06\u590d\u5236\u6bcf\u6761\u5199\u5165\u7684\u6d88\u606f\u3002\u5982\u679c\u590d\u5236\u56e0\u5b50\u4e3a 3\uff0c\u5219\u5728\u60a8\u5931\u53bb\u5bf9\u6570\u636e\u7684\u8bbf\u95ee\u6743\u9650\u4e4b\u524d\u6700\u591a 2 \u4e2a\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u53d1\u751f\u6545\u969c\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528 2 \u6216 3 \u7684\u590d\u5236\u56e0\u5b50\uff0c\u4ee5\u4fbf\u60a8\u53ef\u4ee5\u900f\u660e\u5730\u5f39\u8df3\u673a\u5668\u800c\u4e0d\u4e2d\u65ad\u6570\u636e\u6d88\u8017\u3002 \u5206\u533a\u8ba1\u6570\u63a7\u5236\u4e3b\u9898\u5c06\u88ab\u5206\u7247\u4e3a\u591a\u5c11\u4e2a\u65e5\u5fd7\u3002\u5206\u533a\u8ba1\u6570\u6709\u591a\u79cd\u5f71\u54cd\u3002\u9996\u5148\uff0c\u6bcf\u4e2a\u5206\u533a\u5fc5\u987b\u5b8c\u5168\u9002\u5408\u4e00\u53f0\u670d\u52a1\u5668\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u6709 20 \u4e2a\u5206\u533a\uff0c\u5219\u5b8c\u6574\u6570\u636e\u96c6\uff08\u4ee5\u53ca\u8bfb\u5199\u8d1f\u8f7d\uff09\u5c06\u7531\u4e0d\u8d85\u8fc7 20 \u4e2a\u670d\u52a1\u5668\uff08\u4e0d\u5305\u62ec\u526f\u672c\uff09\u5904\u7406\u3002\u6700\u540e\uff0c\u5206\u533a\u8ba1\u6570\u4f1a\u5f71\u54cd\u6d88\u8d39\u8005\u7684\u6700\u5927\u5e76\u884c\u5ea6\u3002 \u6982\u5ff5\u90e8\u5206 \u5bf9\u6b64\u8fdb\u884c\u4e86\u66f4\u8be6\u7ec6\u7684\u8ba8\u8bba\u3002 \u6bcf\u4e2a\u5206\u7247\u5206\u533a\u65e5\u5fd7\u90fd\u653e\u7f6e\u5728 Kafka \u65e5\u5fd7\u76ee\u5f55\u4e0b\u81ea\u5df1\u7684\u6587\u4ef6\u5939\u4e2d\u3002\u6b64\u7c7b\u6587\u4ef6\u5939\u7684\u540d\u79f0\u7531\u4e3b\u9898\u540d\u79f0\u3001\u9644\u52a0\u7834\u6298\u53f7 (-) \u548c\u5206\u533a ID \u7ec4\u6210\u3002\u7531\u4e8e\u5178\u578b\u7684\u6587\u4ef6\u5939\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 255 \u4e2a\u5b57\u7b26\uff0c\u56e0\u6b64\u4e3b\u9898\u540d\u79f0\u7684\u957f\u5ea6\u5c06\u53d7\u5230\u9650\u5236\u3002\u6211\u4eec\u5047\u8bbe\u5206\u533a\u6570\u91cf\u6c38\u8fdc\u4e0d\u4f1a\u8d85\u8fc7 100,000\u3002\u56e0\u6b64\uff0c\u4e3b\u9898\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7 249 \u4e2a\u5b57\u7b26\u3002\u8fd9\u4f1a\u5728\u6587\u4ef6\u5939\u540d\u79f0\u4e2d\u7559\u4e0b\u8db3\u591f\u7684\u7a7a\u95f4\u7528\u4e8e\u77ed\u5212\u7ebf\u548c\u53ef\u80fd\u4e3a 5 \u4f4d\u6570\u957f\u7684\u5206\u533a ID\u3002 \u5728\u547d\u4ee4\u884c\u4e0a\u6dfb\u52a0\u7684\u914d\u7f6e\u4f1a\u8986\u76d6\u670d\u52a1\u5668\u7684\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u4f8b\u5982\u6570\u636e\u5e94\u4fdd\u7559\u7684\u65f6\u95f4\u957f\u5ea6\u3002\u5b8c\u6574\u7684\u6bcf\u4e2a\u4e3b\u9898\u914d\u7f6e\u96c6\u8bb0\u5f55 \u5728\u6b64\u5904 \u3002","title":"\u6dfb\u52a0\u548c\u5220\u200b\u200b\u9664\u4e3b\u9898"},{"location":"6/#_2","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e3b\u9898\u5de5\u5177\u66f4\u6539\u4e3b\u9898\u7684\u914d\u7f6e\u6216\u5206\u533a\u3002 \u8981\u6dfb\u52a0\u5206\u533a\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c > bin/kafka-topics.sh --bootstrap-server broker_host:port --alter --topic my_topic_name \\ --partitions 40 \u8bf7\u6ce8\u610f\uff0c\u5206\u533a\u7684\u4e00\u79cd\u7528\u4f8b\u662f\u5bf9\u6570\u636e\u8fdb\u884c\u8bed\u4e49\u5206\u533a\uff0c\u5e76\u4e14\u6dfb\u52a0\u5206\u533a\u4e0d\u4f1a\u66f4\u6539\u73b0\u6709\u6570\u636e\u7684\u5206\u533a\uff0c\u56e0\u6b64\u5982\u679c\u6d88\u8d39\u8005\u4f9d\u8d56\u8be5\u5206\u533a\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5e72\u6270\u4ed6\u4eec\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6570\u636e\u5df2\u5206\u533a hash(key) % number_of_partitions \uff0c\u5219\u8be5\u5206\u533a\u53ef\u80fd\u4f1a\u901a\u8fc7\u6dfb\u52a0\u5206\u533a\u800c\u88ab\u6253\u4e71\uff0c\u4f46 Kafka \u4e0d\u4f1a\u5c1d\u8bd5\u4ee5\u4efb\u4f55\u65b9\u5f0f\u81ea\u52a8\u91cd\u65b0\u5206\u914d\u6570\u636e\u3002 \u6dfb\u52a0\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server broker_host:port --entity-type topics --entity-name my_topic_name --alter --add-config x=y \u8981\u5220\u9664\u914d\u7f6e\uff1a > bin/kafka-configs.sh --bootstrap-server broker_host:port --entity-type topics --entity-name my_topic_name --alter --delete-config x \u6700\u540e\u5220\u9664\u4e00\u4e2a\u4e3b\u9898\uff1a > bin/kafka-topics.sh --bootstrap-server broker_host:port --delete --topic my_topic_name Kafka\u76ee\u524d\u4e0d\u652f\u6301\u51cf\u5c11\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\u3002 \u53ef\u4ee5\u5728\u6b64\u5904 \u627e\u5230\u6709\u5173\u66f4\u6539\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u7684\u8bf4\u660e\u3002","title":"\u4fee\u6539\u4e3b\u9898"},{"location":"6/#_3","text":"Kafka \u96c6\u7fa4\u5c06\u81ea\u52a8\u68c0\u6d4b\u4efb\u4f55\u4ee3\u7406\u5173\u95ed\u6216\u6545\u969c\uff0c\u5e76\u4e3a\u8be5\u673a\u5668\u4e0a\u7684\u5206\u533a\u9009\u4e3e\u65b0\u7684\u9886\u5bfc\u8005\u3002\u65e0\u8bba\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u8fd8\u662f\u4e3a\u4e86\u7ef4\u62a4\u6216\u914d\u7f6e\u66f4\u6539\u800c\u6545\u610f\u5173\u95ed\u670d\u52a1\u5668\uff0c\u90fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002\u5bf9\u4e8e\u540e\u4e00\u79cd\u60c5\u51b5\uff0cKafka \u652f\u6301\u4e00\u79cd\u66f4\u4f18\u96c5\u7684\u673a\u5236\u6765\u505c\u6b62\u670d\u52a1\u5668\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6740\u6b7b\u5b83\u3002\u5f53\u670d\u52a1\u5668\u6b63\u5e38\u505c\u6b62\u65f6\uff0c\u5b83\u5c06\u5229\u7528\u4e24\u4e2a\u4f18\u5316\uff1a \u5b83\u5c06\u6240\u6709\u65e5\u5fd7\u540c\u6b65\u5230\u78c1\u76d8\uff0c\u4ee5\u907f\u514d\u91cd\u65b0\u542f\u52a8\u65f6\u9700\u8981\u6267\u884c\u4efb\u4f55\u65e5\u5fd7\u6062\u590d\uff08\u5373\u9a8c\u8bc1\u65e5\u5fd7\u5c3e\u90e8\u6240\u6709\u6d88\u606f\u7684\u6821\u9a8c\u548c\uff09\u3002\u65e5\u5fd7\u6062\u590d\u9700\u8981\u65f6\u95f4\uff0c\u56e0\u6b64\u8fd9\u53ef\u4ee5\u52a0\u5feb\u6709\u610f\u91cd\u65b0\u542f\u52a8\u7684\u901f\u5ea6\u3002 \u5b83\u5c06\u5728\u5173\u95ed\u4e4b\u524d\u5c06\u670d\u52a1\u5668\u4f5c\u4e3a\u9886\u5bfc\u8005\u7684\u4efb\u4f55\u5206\u533a\u8fc1\u79fb\u5230\u5176\u4ed6\u526f\u672c\u3002\u8fd9\u5c06\u4f7f\u9886\u5bfc\u6743\u8f6c\u79fb\u66f4\u5feb\uff0c\u5e76\u5c06\u6bcf\u4e2a\u5206\u533a\u4e0d\u53ef\u7528\u7684\u65f6\u95f4\u6700\u5c0f\u5316\u5230\u51e0\u6beb\u79d2\u3002 \u6bcf\u5f53\u670d\u52a1\u5668\u505c\u6b62\uff08\u9664\u4e86\u786c\u7ec8\u6b62\uff09\u65f6\uff0c\u540c\u6b65\u65e5\u5fd7\u90fd\u4f1a\u81ea\u52a8\u53d1\u751f\uff0c\u4f46\u53d7\u63a7\u9886\u5bfc\u8fc1\u79fb\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u8bbe\u7f6e\uff1a controlled.shutdown.enable=true \u8bf7\u6ce8\u610f\uff0c\u53ea\u6709\u5728\u4ee3\u7406\u4e0a\u6258\u7ba1\u7684 \u6240\u6709 \u5206\u533a\u90fd\u6709\u526f\u672c\uff08\u5373\u590d\u5236\u56e0\u5b50\u5927\u4e8e 1 \u5e76\u4e14 \u8fd9\u4e9b\u526f\u672c\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff09\u65f6\uff0c\u53d7\u63a7\u5173\u95ed\u624d\u4f1a\u6210\u529f\u3002\u8fd9\u901a\u5e38\u662f\u60a8\u60f3\u8981\u7684\uff0c\u56e0\u4e3a\u5173\u95ed\u6700\u540e\u4e00\u4e2a\u526f\u672c\u5c06\u4f7f\u8be5\u4e3b\u9898\u5206\u533a\u4e0d\u53ef\u7528\u3002","title":"\u4f18\u96c5\u5173\u673a"},{"location":"6/#_4","text":"\u6bcf\u5f53\u4ee3\u7406\u505c\u6b62\u6216\u5d29\u6e83\u65f6\uff0c\u8be5\u4ee3\u7406\u7684\u5206\u533a\u7684\u9886\u5bfc\u6743\u5c31\u4f1a\u8f6c\u79fb\u5230\u5176\u4ed6\u526f\u672c\u3002\u5f53\u4ee3\u7406\u91cd\u65b0\u542f\u52a8\u65f6\uff0c\u5b83\u53ea\u4f1a\u6210\u4e3a\u5176\u6240\u6709\u5206\u533a\u7684\u8ffd\u968f\u8005\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4e0d\u4f1a\u7528\u4e8e\u5ba2\u6237\u7aef\u8bfb\u53d6\u548c\u5199\u5165\u3002 \u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u4e0d\u5e73\u8861\uff0cKafka \u6709\u4e00\u4e2a\u9996\u9009\u526f\u672c\u7684\u6982\u5ff5\u3002\u5982\u679c\u5206\u533a\u7684\u526f\u672c\u5217\u8868\u4e3a 1\u30015\u30019\uff0c\u5219\u8282\u70b9 1 \u4f18\u5148\u4f5c\u4e3a\u8282\u70b9 5 \u6216 9 \u7684\u9886\u5bfc\u8005\uff0c\u56e0\u4e3a\u5b83\u5728\u526f\u672c\u5217\u8868\u4e2d\u8f83\u65e9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka \u96c6\u7fa4\u5c06\u5c1d\u8bd5\u6062\u590d\u9996\u9009\u526f\u672c\u7684\u9886\u5bfc\u5730\u4f4d\u3002\u6b64\u884c\u4e3a\u914d\u7f6e\u4e3a\uff1a auto.leader.rebalance.enable=true \u60a8\u4e5f\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a false\uff0c\u4f46\u968f\u540e\u60a8\u9700\u8981\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u6062\u590d\u5df2\u6062\u590d\u526f\u672c\u7684\u9886\u5bfc\u6743\uff1a > bin/kafka-leader-election.sh --bootstrap-server broker_host:port --election-type preferred --all-topic-partitions","title":"\u5e73\u8861\u9886\u5bfc\u529b"},{"location":"6/#_5","text":"\u673a\u67b6\u611f\u77e5\u529f\u80fd\u5c06\u540c\u4e00\u5206\u533a\u7684\u526f\u672c\u5206\u5e03\u5728\u4e0d\u540c\u7684\u673a\u67b6\u4e0a\u3002\u8fd9\u6269\u5c55\u4e86 Kafka \u4e3a\u4ee3\u7406\u6545\u969c\u63d0\u4f9b\u7684\u4fdd\u8bc1\u4ee5\u6db5\u76d6\u673a\u67b6\u6545\u969c\uff0c\u4ece\u800c\u9650\u5236\u4e86\u673a\u67b6\u4e0a\u7684\u6240\u6709\u4ee3\u7406\u540c\u65f6\u53d1\u751f\u6545\u969c\u65f6\u6570\u636e\u4e22\u5931\u7684\u98ce\u9669\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u5e94\u7528\u4e8e\u5176\u4ed6\u4ee3\u7406\u5206\u7ec4\uff0c\u4f8b\u5982 EC2 \u4e2d\u7684\u53ef\u7528\u533a\u57df\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u5411\u4ee3\u7406\u914d\u7f6e\u6dfb\u52a0\u5c5e\u6027\u6765\u6307\u5b9a\u4ee3\u7406\u5c5e\u4e8e\u7279\u5b9a\u673a\u67b6\uff1a broker.rack=my-rack-id \u5f53\u521b\u5efa \u3001 \u4fee\u6539\u4e3b\u9898 \u6216\u91cd\u65b0\u5206\u914d \u526f\u672c \u65f6\uff0c\u5c06\u9075\u5b88\u673a\u67b6\u7ea6\u675f\uff0c\u786e\u4fdd\u526f\u672c\u8de8\u8d8a\u5c3d\u53ef\u80fd\u591a\u7684\u673a\u67b6\uff08\u5206\u533a\u5c06\u8de8\u8d8a min(#racks,replication-factor) \u4e2a\u4e0d\u540c\u7684\u673a\u67b6\uff09\u3002 \u7528\u4e8e\u5c06\u526f\u672c\u5206\u914d\u7ed9\u4ee3\u7406\u7684\u7b97\u6cd5\u53ef\u786e\u4fdd\u6bcf\u4e2a\u4ee3\u7406\u7684\u9886\u5bfc\u8005\u6570\u91cf\u4fdd\u6301\u4e0d\u53d8\uff0c\u65e0\u8bba\u4ee3\u7406\u5982\u4f55\u8de8\u673a\u67b6\u5206\u5e03\u3002\u8fd9\u786e\u4fdd\u4e86\u5e73\u8861\u7684\u541e\u5410\u91cf\u3002 \u4f46\u662f\uff0c\u5982\u679c\u4e3a\u673a\u67b6\u5206\u914d\u4e86\u4e0d\u540c\u6570\u91cf\u7684\u4ee3\u7406\uff0c\u5219\u526f\u672c\u7684\u5206\u914d\u5c06\u4e0d\u5747\u5300\u3002\u5177\u6709\u8f83\u5c11\u4ee3\u7406\u7684\u673a\u67b6\u5c06\u83b7\u5f97\u66f4\u591a\u526f\u672c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5c06\u4f7f\u7528\u66f4\u591a\u5b58\u50a8\u5e76\u5c06\u66f4\u591a\u8d44\u6e90\u7528\u4e8e\u590d\u5236\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u673a\u67b6\u914d\u7f6e\u76f8\u540c\u6570\u91cf\u7684\u4ee3\u7406\u662f\u660e\u667a\u7684\u3002","title":"\u8de8\u673a\u67b6\u5e73\u8861\u526f\u672c"},{"location":"6/#_6","text":"Kafka \u7ba1\u7406\u5458\u53ef\u4ee5\u5b9a\u4e49\u8de8\u8d8a\u5404\u4e2a Kafka \u96c6\u7fa4\u3001\u6570\u636e\u4e2d\u5fc3\u6216\u5730\u7406\u533a\u57df\u8fb9\u754c\u7684\u6570\u636e\u6d41\u3002 \u8bf7\u53c2\u9605\u5f02\u5730\u590d\u5236 \u90e8\u5206\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002","title":"\u96c6\u7fa4\u4e4b\u95f4\u7684\u6570\u636e\u955c\u50cf\u548c\u5f02\u5730\u590d\u5236"},{"location":"6/#_7","text":"\u6709\u65f6\u4e86\u89e3\u6d88\u8d39\u8005\u7684\u7acb\u573a\u5f88\u6709\u7528\u3002\u6211\u4eec\u6709\u4e00\u4e2a\u5de5\u5177\u53ef\u4ee5\u663e\u793a\u6d88\u8d39\u8005\u7ec4\u4e2d\u6240\u6709\u6d88\u8d39\u8005\u7684\u4f4d\u7f6e\u4ee5\u53ca\u5b83\u4eec\u8ddd\u79bb\u65e5\u5fd7\u672b\u5c3e\u6709\u591a\u8fdc\u3002 \u8981\u5728\u4f7f\u7528\u540d\u4e3amy-topic \u7684 \u4e3b\u9898\u7684\u540d\u4e3a my-group \u7684 \u6d88\u8d39\u8005\u7ec4\u4e0a\u8fd0\u884c\u6b64\u5de5\u5177\uff0c\u5982\u4e0b\u6240\u793a\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID my-topic 0 2 4 2 consumer-1-029af89c-873c-4751-a720-cefd41a669d6 /127.0.0.1 consumer-1 my-topic 1 2 3 1 consumer-1-029af89c-873c-4751-a720-cefd41a669d6 /127.0.0.1 consumer-1 my-topic 2 2 3 1 consumer-2-42c1abd4-e3b2-425d-a8bb-e1ea49b29bb2 /127.0.0.1 consumer-2","title":"\u68c0\u67e5\u6d88\u8d39\u8005\u4f4d\u7f6e"},{"location":"6/#_8","text":"\u4f7f\u7528 ConsumerGroupCommand \u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u5217\u51fa\u3001\u63cf\u8ff0\u6216\u5220\u9664\u6d88\u8d39\u8005\u7ec4\u3002\u53ef\u4ee5\u624b\u52a8\u5220\u9664\u6d88\u8d39\u8005\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u5728\u8be5\u7ec4\u7684\u6700\u540e\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u5230\u671f\u65f6\u81ea\u52a8\u5220\u9664\u8be5\u6d88\u8d39\u8005\u7ec4\u3002\u4ec5\u5f53\u7ec4\u6ca1\u6709\u4efb\u4f55\u6d3b\u52a8\u6210\u5458\u65f6\uff0c\u624b\u52a8\u5220\u9664\u624d\u6709\u6548\u3002\u4f8b\u5982\uff0c\u8981\u5217\u51fa\u6240\u6709\u4e3b\u9898\u7684\u6240\u6709\u6d88\u8d39\u8005\u7ec4\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --list test-consumer-group \u8981\u67e5\u770b\u504f\u79fb\u91cf\uff0c\u5982\u524d\u6240\u8ff0\uff0c\u6211\u4eec\u50cf\u8fd9\u6837\u201c\u63cf\u8ff0\u201d\u6d88\u8d39\u8005\u7ec4\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENT-ID topic3 0 241019 395308 154289 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 topic2 1 520678 803288 282610 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 topic3 1 241018 398817 157799 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 topic1 0 854144 855809 1665 consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 topic2 0 460537 803290 342753 consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 topic3 2 243655 398812 155157 consumer4-117fe4d3-c6c1-4178-8ee9-eb4a3954bee0 /127.0.0.1 consumer4 \u6709\u8bb8\u591a\u9644\u52a0\u7684\u201c\u63cf\u8ff0\u201d\u9009\u9879\u53ef\u7528\u4e8e\u63d0\u4f9b\u6709\u5173\u6d88\u8d39\u8005\u7ec4\u7684\u66f4\u8be6\u7ec6\u4fe1\u606f\uff1a --members\uff1a\u6b64\u9009\u9879\u63d0\u4f9b\u6d88\u8d39\u8005\u7ec4\u4e2d\u6240\u6709\u6d3b\u8dc3\u6210\u5458\u7684\u5217\u8868\u3002 > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group --members CONSUMER-ID HOST CLIENT-ID #PARTITIONS consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 2 consumer4-117fe4d3-c6c1-4178-8ee9-eb4a3954bee0 /127.0.0.1 consumer4 1 consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 3 consumer3-ecea43e4-1f01-479f-8349-f9130b75d8ee /127.0.0.1 consumer3 0 --members --verbose\uff1a\u9664\u4e86\u4e0a\u9762\u7684\u201c--members\u201d\u9009\u9879\u62a5\u544a\u7684\u4fe1\u606f\u4e4b\u5916\uff0c\u6b64\u9009\u9879\u8fd8\u63d0\u4f9b\u5206\u914d\u7ed9\u6bcf\u4e2a\u6210\u5458\u7684\u5206\u533a\u3002 > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group --members --verbose CONSUMER-ID HOST CLIENT-ID #PARTITIONS ASSIGNMENT consumer1-3fc8d6f1-581a-4472-bdf3-3515b4aee8c1 /127.0.0.1 consumer1 2 topic1(0), topic2(0) consumer4-117fe4d3-c6c1-4178-8ee9-eb4a3954bee0 /127.0.0.1 consumer4 1 topic3(2) consumer2-e76ea8c3-5d30-4299-9005-47eb41f3d3c4 /127.0.0.1 consumer2 3 topic2(1), topic3(0,1) consumer3-ecea43e4-1f01-479f-8349-f9130b75d8ee /127.0.0.1 consumer3 0 - --offsets\uff1a\u8fd9\u662f\u9ed8\u8ba4\u7684\u63cf\u8ff0\u9009\u9879\uff0c\u63d0\u4f9b\u4e0e\u201c--describe\u201d\u9009\u9879\u76f8\u540c\u7684\u8f93\u51fa\u3002 --state\uff1a\u6b64\u9009\u9879\u63d0\u4f9b\u6709\u7528\u7684\u7ec4\u7ea7\u522b\u4fe1\u606f\u3002 > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group --state COORDINATOR (ID) ASSIGNMENT-STRATEGY STATE #MEMBERS localhost:9092 (0) range Stable 4 \u8981\u624b\u52a8\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u6d88\u8d39\u8005\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528\u201c--delete\u201d\u9009\u9879\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --delete --group my-group --group my-other-group Deletion of requested consumer groups ('my-group', 'my-other-group') was successful. \u8981\u91cd\u7f6e\u6d88\u8d39\u8005\u7ec4\u7684\u504f\u79fb\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528\u201c--reset-offsets\u201d\u9009\u9879\u3002\u6b64\u9009\u9879\u540c\u65f6\u652f\u6301\u4e00\u4e2a\u6d88\u8d39\u8005\u7ec4\u3002\u5b83\u9700\u8981\u5b9a\u4e49\u4ee5\u4e0b\u8303\u56f4\uff1a--all-topics \u6216--topic\u3002\u9664\u975e\u60a8\u4f7f\u7528\u201c--from-file\u201d\u65b9\u6848\uff0c\u5426\u5219\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u8303\u56f4\u3002\u53e6\u5916\uff0c\u9996\u5148\u786e\u4fdd\u4f7f\u7528\u8005\u5b9e\u4f8b\u5904\u4e8e\u975e\u6d3b\u52a8\u72b6\u6001\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-122 \u3002 \u5b83\u6709 3 \u4e2a\u6267\u884c\u9009\u9879\uff1a \uff08\u9ed8\u8ba4\uff09\u663e\u793a\u8981\u91cd\u7f6e\u7684\u504f\u79fb\u91cf\u3002 --execute : \u6267\u884c --reset-offsets \u8fdb\u7a0b\u3002 --export \uff1a\u5c06\u7ed3\u679c\u5bfc\u51fa\u4e3a CSV \u683c\u5f0f\u3002 --reset-offsets \u8fd8\u6709\u4ee5\u4e0b\u573a\u666f\u53ef\u4f9b\u9009\u62e9\uff08\u81f3\u5c11\u5fc5\u987b\u9009\u62e9\u4e00\u79cd\u573a\u666f\uff09\uff1a --to-datetime \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u65e5\u671f\u65f6\u95f4\u7684\u504f\u79fb\u91cf\u3002\u683c\u5f0f\uff1a'YYYY-MM-DDTHH:mm:SS.sss' --to-earliest \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65e9\u7684\u504f\u79fb\u91cf\u3002 --to-latest \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65b0\u504f\u79fb\u91cf\u3002 --shift-by \uff1a\u91cd\u7f6e\u504f\u79fb\u91cf\uff0c\u5c06\u5f53\u524d\u504f\u79fb\u91cf\u79fb\u52a8\u201cn\u201d\uff0c\u5176\u4e2d\u201cn\u201d\u53ef\u4ee5\u662f\u6b63\u6570\u6216\u8d1f\u6570\u3002 --from-file \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a CSV \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u503c\u3002 --to-current \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u5f53\u524d\u504f\u79fb\u91cf\u3002 --by-duration \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u4ece\u5f53\u524d\u65f6\u95f4\u6233\u5f00\u59cb\u6309\u6301\u7eed\u65f6\u95f4\u504f\u79fb\u3002\u683c\u5f0f\uff1a'PnDTnHnMnS' --to-offset \uff1a\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u7279\u5b9a\u504f\u79fb\u91cf\u3002 \u8bf7\u6ce8\u610f\uff0c\u8d85\u51fa\u8303\u56f4\u7684\u504f\u79fb\u5c06\u8c03\u6574\u4e3a\u53ef\u7528\u7684\u504f\u79fb\u7aef\u3002\u4f8b\u5982\uff0c\u5982\u679c\u504f\u79fb\u7ed3\u675f\u4e3a10\uff0c\u504f\u79fb\u79fb\u4f4d\u8bf7\u6c42\u4e3a15\uff0c\u5219\u5b9e\u9645\u4e0a\u4f1a\u9009\u62e910\u5904\u7684\u504f\u79fb\u3002 \u4f8b\u5982\uff0c\u5c06\u6d88\u8d39\u8005\u7ec4\u7684\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65b0\u7684\u504f\u79fb\u91cf\uff1a > bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --reset-offsets --group consumergroup1 --topic topic1 --to-latest TOPIC PARTITION NEW-OFFSET topic1 0 0 \u5982\u679c\u60a8\u4f7f\u7528\u65e7\u7684\u9ad8\u7ea7\u4f7f\u7528\u8005\u5e76\u5c06\u7ec4\u5143\u6570\u636e\u5b58\u50a8\u5728 ZooKeeper \u4e2d\uff08\u5373 offsets.storage=zookeeper \uff09\uff0c\u8bf7\u4f20\u9012 --zookeeper \u800c\u4e0d\u662f --bootstrap-server \uff1a > bin/kafka-consumer-groups.sh --zookeeper localhost:2181 --list","title":"\u7ba1\u7406\u6d88\u8d39\u8005\u7fa4\u4f53"},{"location":"6/#_9","text":"\u5c06\u670d\u52a1\u5668\u6dfb\u52a0\u5230 Kafka \u96c6\u7fa4\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u4e3a\u5b83\u4eec\u5206\u914d\u4e00\u4e2a\u552f\u4e00\u7684\u4ee3\u7406 ID \u5e76\u5728\u65b0\u670d\u52a1\u5668\u4e0a\u542f\u52a8 Kafka \u5373\u53ef\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u65b0\u670d\u52a1\u5668\u4e0d\u4f1a\u81ea\u52a8\u5206\u914d\u4efb\u4f55\u6570\u636e\u5206\u533a\uff0c\u56e0\u6b64\u9664\u975e\u5c06\u5206\u533a\u79fb\u52a8\u5230\u5b83\u4eec\uff0c\u5426\u5219\u5728\u521b\u5efa\u65b0\u4e3b\u9898\u4e4b\u524d\u5b83\u4eec\u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u5de5\u4f5c\u3002\u56e0\u6b64\uff0c\u901a\u5e38\u5f53\u60a8\u5411\u96c6\u7fa4\u6dfb\u52a0\u673a\u5668\u65f6\uff0c\u60a8\u4f1a\u5e0c\u671b\u5c06\u4e00\u4e9b\u73b0\u6709\u6570\u636e\u8fc1\u79fb\u5230\u8fd9\u4e9b\u673a\u5668\u3002 \u8fc1\u79fb\u6570\u636e\u7684\u8fc7\u7a0b\u662f\u624b\u52a8\u542f\u52a8\u7684\uff0c\u4f46\u5b8c\u5168\u81ea\u52a8\u5316\u3002\u5728\u5e55\u540e\u53d1\u751f\u7684\u4e8b\u60c5\u662f\uff0cKafka \u4f1a\u5c06\u65b0\u670d\u52a1\u5668\u6dfb\u52a0\u4e3a\u5b83\u6b63\u5728\u8fc1\u79fb\u7684\u5206\u533a\u7684\u8ddf\u968f\u8005\uff0c\u5e76\u5141\u8bb8\u5b83\u5b8c\u5168\u590d\u5236\u8be5\u5206\u533a\u4e2d\u7684\u73b0\u6709\u6570\u636e\u3002\u5f53\u65b0\u670d\u52a1\u5668\u5b8c\u5168\u590d\u5236\u8be5\u5206\u533a\u7684\u5185\u5bb9\u5e76\u52a0\u5165\u540c\u6b65\u526f\u672c\u65f6\uff0c\u73b0\u6709\u526f\u672c\u4e4b\u4e00\u5c06\u5220\u9664\u5176\u5206\u533a\u7684\u6570\u636e\u3002 \u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u53ef\u7528\u4e8e\u8de8\u4ee3\u7406\u79fb\u52a8\u5206\u533a\u3002\u7406\u60f3\u7684\u5206\u533a\u5206\u5e03\u5c06\u786e\u4fdd\u6240\u6709\u4ee3\u7406\u7684\u6570\u636e\u8d1f\u8f7d\u548c\u5206\u533a\u5927\u5c0f\u5747\u5300\u3002\u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u65e0\u6cd5\u81ea\u52a8\u7814\u7a76 Kafka \u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u5206\u5e03\u5e76\u79fb\u52a8\u5206\u533a\u4ee5\u83b7\u5f97\u5747\u5300\u7684\u8d1f\u8f7d\u5206\u5e03\u3002\u56e0\u6b64\uff0c\u7ba1\u7406\u5458\u5fc5\u987b\u5f04\u6e05\u695a\u5e94\u8be5\u79fb\u52a8\u54ea\u4e9b\u4e3b\u9898\u6216\u5206\u533a\u3002 \u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u53ef\u4ee5\u5728 3 \u79cd\u4e92\u65a5\u7684\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff1a --generate\uff1a\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u7ed9\u5b9a\u4e3b\u9898\u5217\u8868\u548c\u4ee3\u7406\u5217\u8868\uff0c\u8be5\u5de5\u5177\u4f1a\u751f\u6210\u5019\u9009\u91cd\u65b0\u200b\u200b\u5206\u914d\uff0c\u4ee5\u5c06\u6307\u5b9a\u4e3b\u9898\u7684\u6240\u6709\u5206\u533a\u79fb\u52a8\u5230\u65b0\u4ee3\u7406\u3002\u6b64\u9009\u9879\u4ec5\u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u7ed9\u5b9a\u4e3b\u9898\u548c\u76ee\u6807\u4ee3\u7406\u5217\u8868\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u5206\u533a\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u7684\u4fbf\u6377\u65b9\u6cd5\u3002 --execute\uff1a\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u8be5\u5de5\u5177\u6839\u636e\u7528\u6237\u63d0\u4f9b\u7684\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u542f\u52a8\u5206\u533a\u7684\u91cd\u65b0\u5206\u914d\u3002\uff08\u4f7f\u7528 --reassignment-json-file \u9009\u9879\uff09\u3002\u8fd9\u53ef\u4ee5\u662f\u7531\u7ba1\u7406\u5458\u624b\u5de5\u5236\u4f5c\u7684\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 --generate \u9009\u9879\u63d0\u4f9b --verify\uff1a\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u8be5\u5de5\u5177\u9a8c\u8bc1\u4e0a\u6b21 --execute \u671f\u95f4\u5217\u51fa\u7684\u6240\u6709\u5206\u533a\u7684\u91cd\u65b0\u5206\u914d\u72b6\u6001\u3002\u72b6\u6001\u53ef\u4ee5\u662f\u6210\u529f\u5b8c\u6210\u3001\u5931\u8d25\u6216\u6b63\u5728\u8fdb\u884c","title":"\u6269\u5c55\u60a8\u7684\u96c6\u7fa4"},{"location":"6/#_10","text":"\u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u53ef\u7528\u4e8e\u5c06\u67d0\u4e9b\u4e3b\u9898\u4ece\u5f53\u524d\u4ee3\u7406\u96c6\u4e2d\u79fb\u81f3\u65b0\u6dfb\u52a0\u7684\u4ee3\u7406\u3002\u8fd9\u5728\u6269\u5c55\u73b0\u6709\u96c6\u7fa4\u65f6\u901a\u5e38\u5f88\u6709\u7528\uff0c\u56e0\u4e3a\u5c06\u6574\u4e2a\u4e3b\u9898\u79fb\u52a8\u5230\u4e00\u7ec4\u65b0\u7684\u4ee3\u7406\u6bd4\u4e00\u6b21\u79fb\u52a8\u4e00\u4e2a\u5206\u533a\u66f4\u5bb9\u6613\u3002\u5f53\u7528\u4e8e\u6267\u884c\u6b64\u64cd\u4f5c\u65f6\uff0c\u7528\u6237\u5e94\u63d0\u4f9b\u5e94\u79fb\u52a8\u5230\u65b0\u4ee3\u7406\u96c6\u7684\u4e3b\u9898\u5217\u8868\u4ee5\u53ca\u65b0\u4ee3\u7406\u7684\u76ee\u6807\u5217\u8868\u3002\u7136\u540e\uff0c\u8be5\u5de5\u5177\u5c06\u7ed9\u5b9a\u4e3b\u9898\u5217\u8868\u7684\u6240\u6709\u5206\u533a\u5747\u5300\u5206\u5e03\u5728\u65b0\u7684\u4ee3\u7406\u96c6\u4e0a\u3002\u5728\u6b64\u79fb\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\u4fdd\u6301\u4e0d\u53d8\u3002\u5b9e\u9645\u4e0a\uff0c\u4e3b\u9898\u8f93\u5165\u5217\u8868\u7684\u6240\u6709\u5206\u533a\u7684\u526f\u672c\u90fd\u4ece\u65e7\u7684\u4ee3\u7406\u96c6\u79fb\u52a8\u5230\u65b0\u6dfb\u52a0\u7684\u4ee3\u7406\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u793a\u4f8b\u5c06\u4e3b\u9898 foo1,foo2 \u7684\u6240\u6709\u5206\u533a\u79fb\u52a8\u5230\u65b0\u7684\u4ee3\u7406\u96c6 5,6\u3002\u5728\u6b64\u79fb\u52a8\u7ed3\u675f\u65f6\uff0c\u4e3b\u9898 foo1 \u548c foo2 \u7684\u6240\u6709\u5206\u533a\u5c06 \u4ec5\u5b58 \u5728\u4e8e\u4ee3\u7406 5,6 \u4e0a\u3002 \u7531\u4e8e\u8be5\u5de5\u5177\u63a5\u53d7 json \u6587\u4ef6\u5f62\u5f0f\u7684\u4e3b\u9898\u8f93\u5165\u5217\u8868\uff0c\u56e0\u6b64\u60a8\u9996\u5148\u9700\u8981\u786e\u5b9a\u8981\u79fb\u52a8\u7684\u4e3b\u9898\u5e76\u521b\u5efa json \u6587\u4ef6\uff0c\u5982\u4e0b\u6240\u793a\uff1a > cat topics-to-move.json {\"topics\": [{\"topic\": \"foo1\"}, {\"topic\": \"foo2\"}], \"version\":1 } json \u6587\u4ef6\u51c6\u5907\u597d\u540e\uff0c\u4f7f\u7528\u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u751f\u6210\u5019\u9009\u5206\u914d\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --topics-to-move-json-file topics-to-move.json --broker-list \"5,6\" --generate Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[2,1]}, {\"topic\":\"foo1\",\"partition\":1,\"replicas\":[1,3]}, {\"topic\":\"foo1\",\"partition\":2,\"replicas\":[3,4]}, {\"topic\":\"foo2\",\"partition\":0,\"replicas\":[4,2]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[2,1]}, {\"topic\":\"foo2\",\"partition\":2,\"replicas\":[1,3]}] } Proposed partition reassignment configuration {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[6,5]}, {\"topic\":\"foo1\",\"partition\":1,\"replicas\":[5,6]}, {\"topic\":\"foo1\",\"partition\":2,\"replicas\":[6,5]}, {\"topic\":\"foo2\",\"partition\":0,\"replicas\":[5,6]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[6,5]}, {\"topic\":\"foo2\",\"partition\":2,\"replicas\":[5,6]}] } \u8be5\u5de5\u5177\u751f\u6210\u4e00\u4e2a\u5019\u9009\u5206\u914d\uff0c\u5c06\u6240\u6709\u5206\u533a\u4ece\u4e3b\u9898 foo1,foo2 \u79fb\u52a8\u5230\u4ee3\u7406 5,6\u3002\u4f46\u8bf7\u6ce8\u610f\uff0c\u6b64\u65f6\u5206\u533a\u79fb\u52a8\u5c1a\u672a\u5f00\u59cb\uff0c\u5b83\u4ec5\u544a\u8bc9\u60a8\u5f53\u524d\u5206\u914d\u548c\u5efa\u8bae\u7684\u65b0\u5206\u914d\u3002\u5e94\u4fdd\u5b58\u5f53\u524d\u5206\u914d\uff0c\u4ee5\u9632\u60a8\u60f3\u56de\u6eda\u5230\u5f53\u524d\u5206\u914d\u3002\u65b0\u5206\u914d\u5e94\u4fdd\u5b58\u5728 json \u6587\u4ef6\u4e2d\uff08\u4f8b\u5982 Expand-cluster-reassignment.json\uff09\uff0c\u4ee5\u4fbf\u4f7f\u7528 --execute \u9009\u9879\u8f93\u5165\u5230\u5de5\u5177\u4e2d\uff0c\u5982\u4e0b\u6240\u793a\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file expand-cluster-reassignment.json --execute Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[2,1]}, {\"topic\":\"foo1\",\"partition\":1,\"replicas\":[1,3]}, {\"topic\":\"foo1\",\"partition\":2,\"replicas\":[3,4]}, {\"topic\":\"foo2\",\"partition\":0,\"replicas\":[4,2]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[2,1]}, {\"topic\":\"foo2\",\"partition\":2,\"replicas\":[1,3]}] } Save this to use as the --reassignment-json-file option during rollback Successfully started partition reassignments for foo1-0,foo1-1,foo1-2,foo2-0,foo2-1,foo2-2 \u6700\u540e\uff0c--verify \u9009\u9879\u53ef\u4ee5\u4e0e\u8be5\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\u6765\u68c0\u67e5\u5206\u533a\u91cd\u65b0\u5206\u914d\u7684\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u76f8\u540c\u7684 Expand-cluster-reassignment.json\uff08\u4e0e --execute \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff09\u5e94\u4e0e --verify \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file expand-cluster-reassignment.json --verify Status of partition reassignment: Reassignment of partition [foo1,0] is completed Reassignment of partition [foo1,1] is still in progress Reassignment of partition [foo1,2] is still in progress Reassignment of partition [foo2,0] is completed Reassignment of partition [foo2,1] is completed Reassignment of partition [foo2,2] is completed","title":"\u81ea\u52a8\u5c06\u6570\u636e\u8fc1\u79fb\u5230\u65b0\u673a\u5668"},{"location":"6/#_11","text":"\u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u8fd8\u53ef\u7528\u4e8e\u6709\u9009\u62e9\u5730\u5c06\u5206\u533a\u7684\u526f\u672c\u79fb\u52a8\u5230\u4e00\u7ec4\u7279\u5b9a\u7684\u4ee3\u7406\u3002\u5f53\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u4f7f\u7528\u65f6\uff0c\u5047\u8bbe\u7528\u6237\u77e5\u9053\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u5e76\u4e14\u4e0d\u9700\u8981\u8be5\u5de5\u5177\u6765\u751f\u6210\u5019\u9009\u91cd\u65b0\u200b\u200b\u5206\u914d\uff0c\u4ece\u800c\u6709\u6548\u5730\u8df3\u8fc7 --generate \u6b65\u9aa4\u5e76\u76f4\u63a5\u8fdb\u5165 --execute \u6b65\u9aa4 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u793a\u4f8b\u5c06\u4e3b\u9898 foo1 \u7684\u5206\u533a 0 \u79fb\u52a8\u5230\u4ee3\u7406 5,6\uff0c\u5c06\u4e3b\u9898 foo2 \u7684\u5206\u533a 1 \u79fb\u52a8\u5230\u4ee3\u7406 2,3\uff1a \u7b2c\u4e00\u6b65\u662f\u5728 json \u6587\u4ef6\u4e2d\u624b\u5de5\u5236\u5b9a\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff1a > cat custom-reassignment.json {\"version\":1,\"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[5,6]},{\"topic\":\"foo2\",\"partition\":1,\"replicas\":[2,3]}]} \u7136\u540e\uff0c\u4f7f\u7528\u5e26\u6709 --execute \u9009\u9879\u7684 json \u6587\u4ef6\u6765\u542f\u52a8\u91cd\u65b0\u5206\u914d\u8fc7\u7a0b\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file custom-reassignment.json --execute Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo1\",\"partition\":0,\"replicas\":[1,2]}, {\"topic\":\"foo2\",\"partition\":1,\"replicas\":[3,4]}] } Save this to use as the --reassignment-json-file option during rollback Successfully started partition reassignments for foo1-0,foo2-1 --verify \u9009\u9879\u53ef\u4ee5\u4e0e\u8be5\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\u6765\u68c0\u67e5\u5206\u533a\u91cd\u65b0\u5206\u914d\u7684\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u76f8\u540c\u7684 custom-reassignment.json \uff08\u4e0e --execute \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff09\u5e94\u4e0e --verify \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file custom-reassignment.json --verify Status of partition reassignment: Reassignment of partition [foo1,0] is completed Reassignment of partition [foo2,1] is completed","title":"\u81ea\u5b9a\u4e49\u5206\u533a\u5206\u914d\u548c\u8fc1\u79fb"},{"location":"6/#broker","text":"\u5206\u533a\u91cd\u65b0\u5206\u914d\u5de5\u5177\u5c1a\u4e0d\u5177\u5907\u4e3a\u9000\u5f79\u4ee3\u7406\u81ea\u52a8\u751f\u6210\u91cd\u65b0\u5206\u914d\u8ba1\u5212\u7684\u80fd\u529b\u3002\u56e0\u6b64\uff0c\u7ba1\u7406\u5458\u5fc5\u987b\u5236\u5b9a\u4e00\u4e2a\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff0c\u5c06\u8981\u505c\u7528\u7684\u4ee3\u7406\u4e0a\u6258\u7ba1\u7684\u6240\u6709\u5206\u533a\u7684\u526f\u672c\u79fb\u52a8\u5230\u5176\u4f59\u4ee3\u7406\u3002\u8fd9\u53ef\u80fd\u76f8\u5bf9\u7e41\u7410\uff0c\u56e0\u4e3a\u91cd\u65b0\u5206\u914d\u9700\u8981\u786e\u4fdd\u6240\u6709\u526f\u672c\u4e0d\u4f1a\u4ece\u5df2\u505c\u7528\u7684\u4ee3\u7406\u4ec5\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u4ee3\u7406\u3002\u4e3a\u4e86\u4f7f\u8fd9\u4e2a\u8fc7\u7a0b\u53d8\u5f97\u8f7b\u677e\uff0c\u6211\u4eec\u8ba1\u5212\u5728\u672a\u6765\u4e3a\u9000\u5f79broker\u6dfb\u52a0\u5de5\u5177\u652f\u6301\u3002","title":"\u9000\u5f79broker"},{"location":"6/#_12","text":"\u589e\u52a0\u73b0\u6709\u5206\u533a\u7684\u590d\u5236\u56e0\u5b50\u5f88\u5bb9\u6613\u3002\u53ea\u9700\u5728\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d json \u6587\u4ef6\u4e2d\u6307\u5b9a\u989d\u5916\u7684\u526f\u672c\uff0c\u5e76\u5c06\u5176\u4e0e --execute \u9009\u9879\u4e00\u8d77\u4f7f\u7528\u5373\u53ef\u589e\u52a0\u6307\u5b9a\u5206\u533a\u7684\u590d\u5236\u56e0\u5b50\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u793a\u4f8b\u5c06\u4e3b\u9898 foo \u7684\u5206\u533a 0 \u7684\u590d\u5236\u56e0\u5b50\u4ece 1 \u589e\u52a0\u5230 3\u3002\u5728\u589e\u52a0\u590d\u5236\u56e0\u5b50\u4e4b\u524d\uff0c\u8be5\u5206\u533a\u7684\u552f\u4e00\u526f\u672c\u5b58\u5728\u4e8e\u4ee3\u7406 5 \u4e0a\u3002\u4f5c\u4e3a\u589e\u52a0\u590d\u5236\u56e0\u5b50\u7684\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u5728\u4ee3\u7406 5 \u4e0a\u6dfb\u52a0\u66f4\u591a\u526f\u672cbroker 6 \u548c 7\u3002 \u7b2c\u4e00\u6b65\u662f\u5728 json \u6587\u4ef6\u4e2d\u624b\u5de5\u5236\u5b9a\u81ea\u5b9a\u4e49\u91cd\u65b0\u5206\u914d\u8ba1\u5212\uff1a > cat increase-replication-factor.json {\"version\":1, \"partitions\":[{\"topic\":\"foo\",\"partition\":0,\"replicas\":[5,6,7]}]} \u7136\u540e\uff0c\u4f7f\u7528\u5e26\u6709 --execute \u9009\u9879\u7684 json \u6587\u4ef6\u6765\u542f\u52a8\u91cd\u65b0\u5206\u914d\u8fc7\u7a0b\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file increase-replication-factor.json --execute Current partition replica assignment {\"version\":1, \"partitions\":[{\"topic\":\"foo\",\"partition\":0,\"replicas\":[5]}]} Save this to use as the --reassignment-json-file option during rollback Successfully started partition reassignment for foo-0 --verify \u9009\u9879\u53ef\u4ee5\u4e0e\u8be5\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\u6765\u68c0\u67e5\u5206\u533a\u91cd\u65b0\u5206\u914d\u7684\u72b6\u6001\u3002\u8bf7\u6ce8\u610f\uff0c\u76f8\u540c\u7684increase-replication-factor.json\uff08\u4e0e--execute\u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff09\u5e94\u4e0e--verify\u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --reassignment-json-file increase-replication-factor.json --verify Status of partition reassignment: Reassignment of partition [foo,0] is completed \u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528 kafka-topics \u5de5\u5177\u9a8c\u8bc1\u590d\u5236\u56e0\u5b50\u7684\u589e\u52a0\uff1a > bin/kafka-topics.sh --bootstrap-server localhost:9092 --topic foo --describe Topic:foo PartitionCount:1 ReplicationFactor:3 Configs: Topic: foo Partition: 0 Leader: 5 Replicas: 5,6,7 Isr: 5,6,7","title":"\u589e\u52a0\u590d\u5236\u56e0\u5b50"},{"location":"6/#_13","text":"Kafka \u5141\u8bb8\u60a8\u5bf9\u590d\u5236\u6d41\u91cf\u8fdb\u884c\u9650\u5236\uff0c\u8bbe\u7f6e\u7528\u4e8e\u5728\u673a\u5668\u4e4b\u95f4\u79fb\u52a8\u526f\u672c\u7684\u5e26\u5bbd\u4e0a\u9650\u3002\u8fd9\u5728\u91cd\u65b0\u5e73\u8861\u96c6\u7fa4\u3001\u5f15\u5bfc\u65b0\u4ee3\u7406\u6216\u6dfb\u52a0\u6216\u5220\u9664\u4ee3\u7406\u65f6\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u9650\u5236\u4e86\u8fd9\u4e9b\u6570\u636e\u5bc6\u96c6\u578b\u64cd\u4f5c\u5bf9\u7528\u6237\u4ea7\u751f\u7684\u5f71\u54cd\u3002 \u6709\u4e24\u4e2a\u63a5\u53e3\u53ef\u7528\u4e8e\u63a5\u5408\u6cb9\u95e8\u3002\u6700\u7b80\u5355\u3001\u6700\u5b89\u5168\u7684\u65b9\u6cd5\u662f\u5728\u8c03\u7528 kafka-reassign-partitions.sh \u65f6\u5e94\u7528\u9650\u5236\uff0c\u4f46 kafka-configs.sh \u4e5f\u53ef\u7528\u4e8e\u76f4\u63a5\u67e5\u770b\u548c\u66f4\u6539\u9650\u5236\u503c\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u8981\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6267\u884c\u91cd\u65b0\u5e73\u8861\uff0c\u5b83\u5c06\u4ee5\u4e0d\u8d85\u8fc7 50MB/s \u7684\u901f\u5ea6\u79fb\u52a8\u5206\u533a\u3002 $ bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --execute --reassignment-json-file big-cluster.json --throttle 50000000 \u5f53\u60a8\u6267\u884c\u6b64\u811a\u672c\u65f6\uff0c\u60a8\u5c06\u770b\u5230\u6cb9\u95e8\u63a5\u5408\uff1a The inter-broker throttle limit was set to 50000000 B/s Successfully started partition reassignment for foo1-0 \u5982\u679c\u60a8\u5e0c\u671b\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u6539\u53d8\u6cb9\u95e8\uff0c\u4f8b\u5982\u589e\u52a0\u541e\u5410\u91cf\uff0c\u4ee5\u4fbf\u66f4\u5feb\u5730\u5b8c\u6210\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4f20\u9012\u76f8\u540c\u7684\u91cd\u65b0\u5206\u914d json \u6587\u4ef6\u7684 --additional \u9009\u9879\u91cd\u65b0\u8fd0\u884c\u6267\u884c\u547d\u4ee4\u6765\u5b8c\u6210\u6b64\u64cd\u4f5c\uff1a $ bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --additional --execute --reassignment-json-file bigger-cluster.json --throttle 700000000 The inter-broker throttle limit was set to 700000000 B/s \u91cd\u65b0\u5e73\u8861\u5b8c\u6210\u540e\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u4f7f\u7528 --verify \u9009\u9879\u68c0\u67e5\u91cd\u65b0\u5e73\u8861\u7684\u72b6\u6001\u3002\u5982\u679c\u91cd\u65b0\u5e73\u8861\u5df2\u5b8c\u6210\uff0c\u5219\u5c06\u901a\u8fc7 --verify \u547d\u4ee4\u5220\u9664\u9650\u5236\u3002\u91cd\u8981\u7684\u662f\uff0c\u7ba1\u7406\u5458\u901a\u8fc7\u8fd0\u884c\u5e26\u6709 --verify \u9009\u9879\u7684\u547d\u4ee4\uff0c\u5728\u91cd\u65b0\u5e73\u8861\u5b8c\u6210\u540e\u53ca\u65f6\u53d6\u6d88\u9650\u5236\u3002\u5982\u679c\u4e0d\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e38\u89c4\u590d\u5236\u6d41\u91cf\u53d7\u5230\u9650\u5236\u3002 \u5f53\u6267\u884c --verify \u9009\u9879\u5e76\u4e14\u91cd\u65b0\u5206\u914d\u5b8c\u6210\u65f6\uff0c\u811a\u672c\u5c06\u786e\u8ba4\u9650\u5236\u5df2\u88ab\u5220\u9664\uff1a > bin/kafka-reassign-partitions.sh --bootstrap-server localhost:9092 --verify --reassignment-json-file bigger-cluster.json Status of partition reassignment: Reassignment of partition [my-topic,1] is completed Reassignment of partition [my-topic,0] is completed Clearing broker-level throttles on brokers 1,2,3 Clearing topic-level throttles on topic my-topic \u7ba1\u7406\u5458\u8fd8\u53ef\u4ee5\u4f7f\u7528 kafka-configs.sh \u9a8c\u8bc1\u5206\u914d\u7684\u914d\u7f6e\u3002\u6709\u4e24\u5bf9\u8282\u6d41\u914d\u7f6e\u7528\u4e8e\u7ba1\u7406\u8282\u6d41\u8fc7\u7a0b\u3002\u7b2c\u4e00\u5bf9\u6307\u6cb9\u95e8\u503c\u672c\u8eab\u3002\u8fd9\u662f\u5728\u4ee3\u7406\u7ea7\u522b\u4f7f\u7528\u52a8\u6001\u5c5e\u6027\u8fdb\u884c\u914d\u7f6e\u7684\uff1a leader.replication.throttled.rate follower.replication.throttled.rate \u7136\u540e\u662f\u9650\u5236\u526f\u672c\u7684\u679a\u4e3e\u96c6\u7684\u914d\u7f6e\u5bf9\uff1a leader.replication.throttled.replicas follower.replication.throttled.replicas \u54ea\u4e9b\u662f\u6309\u4e3b\u9898\u914d\u7f6e\u7684\u3002 \u6240\u6709\u56db\u4e2a\u914d\u7f6e\u503c\u5747\u7531 kafka-reassign-partitions.sh \u81ea\u52a8\u5206\u914d\uff08\u5982\u4e0b\u6240\u8ff0\uff09\u3002 \u67e5\u770b\u6cb9\u95e8\u9650\u5236\u914d\u7f6e\uff1a > bin/kafka-configs.sh --describe --bootstrap-server localhost:9092 --entity-type brokers Configs for brokers '2' are leader.replication.throttled.rate=700000000,follower.replication.throttled.rate=700000000 Configs for brokers '1' are leader.replication.throttled.rate=700000000,follower.replication.throttled.rate=700000000 \u8fd9\u663e\u793a\u4e86\u5e94\u7528\u4e8e\u590d\u5236\u534f\u8bae\u7684\u9886\u5bfc\u8005\u548c\u8ddf\u968f\u8005\u7aef\u7684\u9650\u5236\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53cc\u65b9\u90fd\u5206\u914d\u6709\u76f8\u540c\u7684\u9650\u5236\u541e\u5410\u91cf\u503c\u3002 \u8981\u67e5\u770b\u53d7\u9650\u5236\u7684\u526f\u672c\u5217\u8868\uff1a > bin/kafka-configs.sh --describe --bootstrap-server localhost:9092 --entity-type topics Configs for topic 'my-topic' are leader.replication.throttled.replicas=1:102,0:101, follower.replication.throttled.replicas=1:101,0:102 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u770b\u5230\u9886\u5bfc\u8005\u8282\u6d41\u5e94\u7528\u4e8e\u4ee3\u7406 102 \u4e0a\u7684\u5206\u533a 1 \u548c\u4ee3\u7406 101 \u4e0a\u7684\u5206\u533a 0\u3002\u540c\u6837\uff0c\u8ffd\u968f\u8005\u8282\u6d41\u5e94\u7528\u4e8e\u4ee3\u7406 101 \u4e0a\u7684\u5206\u533a 1 \u548c\u4ee3\u7406 102 \u4e0a\u7684\u5206\u533a 0\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ckafka-reassign-partitions.sh \u4f1a\u5c06\u9886\u5bfc\u8005\u9650\u5236\u5e94\u7528\u4e8e\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u5b58\u5728\u7684\u6240\u6709\u526f\u672c\uff0c\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u90fd\u53ef\u80fd\u662f\u9886\u5bfc\u8005\u3002\u5b83\u5c06\u5bf9\u6240\u6709\u79fb\u52a8\u76ee\u7684\u5730\u5e94\u7528\u8ddf\u968f\u6cb9\u95e8\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4ee3\u7406 101,102 \u4e0a\u6709\u4e00\u4e2a\u5177\u6709\u526f\u672c\u7684\u5206\u533a\uff0c\u88ab\u91cd\u65b0\u5206\u914d\u7ed9 102,103\uff0c\u5219\u8be5\u5206\u533a\u7684\u9886\u5bfc\u8005\u9650\u5236\u5c06\u5e94\u7528\u4e8e 101,102\uff0c\u8ffd\u968f\u8005\u9650\u5236\u5c06\u4ec5\u5e94\u7528\u4e8e 103\u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528 kafka-configs.sh \u4e0a\u7684 --alter \u5f00\u5173\u624b\u52a8\u66f4\u6539\u8282\u6d41\u914d\u7f6e\u3002","title":"\u9650\u5236\u6570\u636e\u8fc1\u79fb\u671f\u95f4\u7684\u5e26\u5bbd\u4f7f\u7528"},{"location":"6/#_14","text":"\u4f7f\u7528\u9650\u5236\u590d\u5236\u65f6\u5e94\u5c0f\u5fc3\u3002\u5c24\u5176\uff1a (1) Throttle Removal: \u91cd\u65b0\u5206\u914d\u5b8c\u6210\u540e\u5e94\u53ca\u65f6\u79fb\u9664\u9650\u5236\uff08\u901a\u8fc7\u8fd0\u884c kafka-reassign-partitions.sh --verify \uff09\u3002 (2) Ensuring Progress: \u5982\u679c\u4e0e\u4f20\u5165\u5199\u5165\u901f\u7387\u76f8\u6bd4\uff0c\u9650\u5236\u8bbe\u7f6e\u5f97\u592a\u4f4e\uff0c\u590d\u5236\u53ef\u80fd\u65e0\u6cd5\u53d6\u5f97\u8fdb\u5c55\u3002\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u65f6\uff1a max(BytesInPerSec) > throttle \u5176\u4e2d BytesInPerSec \u662f\u76d1\u63a7\u751f\u4ea7\u8005\u5199\u5165\u6bcf\u4e2a\u4ee3\u7406\u7684\u541e\u5410\u91cf\u7684\u6307\u6807\u3002 \u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u4f7f\u7528\u4ee5\u4e0b\u6307\u6807\u76d1\u63a7\u590d\u5236\u662f\u5426\u53d6\u5f97\u8fdb\u5c55\uff1a kafka.server:type=FetcherLagMetrics,name=ConsumerLag,clientId=([-.\\w]+),topic=([-.\\w]+),partition=([0-9]+) \u590d\u5236\u8fc7\u7a0b\u4e2d\u6ede\u540e\u5e94\u8be5\u4e0d\u65ad\u51cf\u5c11\u3002\u5982\u679c\u6307\u6807\u6ca1\u6709\u51cf\u5c11\uff0c\u7ba1\u7406\u5458\u5e94\u5982\u4e0a\u6240\u8ff0\u589e\u52a0\u9650\u5236\u541e\u5410\u91cf\u3002","title":"\u5b89\u5168\u4f7f\u7528\u9650\u5236\u590d\u5236"},{"location":"6/#_15","text":"\u914d\u989d\u8986\u76d6\u548c\u9ed8\u8ba4\u503c\u53ef\u4ee5\u5728\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ea7\u522b\u8fdb\u884c\u914d\u7f6e\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u7aef\u83b7\u5f97\u65e0\u9650\u914d\u989d\u3002\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ec4\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\u3002 \u914d\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\uff08user=user1\uff0cclient-id=clientA\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-name user1 --entity-type clients --entity-name clientA Updated config for entity: user-principal 'user1', client-id 'clientA'. \u4e3a user=user1 \u914d\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-name user1 Updated config for entity: user-principal 'user1'. \u4e3a client-id=clientA \u914d\u7f6e\u81ea\u5b9a\u4e49\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type clients --entity-name clientA Updated config for entity: client-id 'clientA'. \u901a\u8fc7\u6307\u5b9a --entity-default \u9009\u9879\u800c\u4e0d\u662f --entity-name \uff0c \u53ef\u4ee5\u4e3a\u6bcf\u4e2a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u3001\u7528\u6237\u6216\u5ba2\u6237\u7aef ID \u7ec4\u8bbe\u7f6e \u9ed8\u8ba4 \u914d\u989d\u3002 \u4e3a user=userA \u914d\u7f6e\u9ed8\u8ba4 client-id \u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-name user1 --entity-type clients --entity-default Updated config for entity: user-principal 'user1', default client-id. \u4e3a\u7528\u6237\u914d\u7f6e\u9ed8\u8ba4\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type users --entity-default Updated config for entity: default user-principal. \u914d\u7f6e client-id \u7684\u9ed8\u8ba4\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200' --entity-type clients --entity-default Updated config for entity: default client-id. \u4ee5\u4e0b\u662f\u63cf\u8ff0\u7ed9\u5b9a\uff08\u7528\u6237\u3001\u5ba2\u6237\u7aef ID\uff09\u7684\u914d\u989d\u7684\u65b9\u6cd5\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-name user1 --entity-type clients --entity-name clientA Configs for user-principal 'user1', client-id 'clientA' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u63cf\u8ff0\u7ed9\u5b9a\u7528\u6237\u7684\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-name user1 Configs for user-principal 'user1' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u63cf\u8ff0\u7ed9\u5b9a\u5ba2\u6237\u7aef ID \u7684\u914d\u989d\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type clients --entity-name clientA Configs for client-id 'clientA' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u5982\u679c\u672a\u6307\u5b9a\u5b9e\u4f53\u540d\u79f0\uff0c\u5219\u63cf\u8ff0\u6307\u5b9a\u7c7b\u578b\u7684\u6240\u6709\u5b9e\u4f53\u3002\u4f8b\u5982\uff0c\u63cf\u8ff0\u6240\u6709\u7528\u6237\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users Configs for user-principal 'user1' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 Configs for default user-principal are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 \u7c7b\u4f3c\u5730\u5bf9\u4e8e\uff08\u7528\u6237\uff0c\u5ba2\u6237\u7aef\uff09\uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-type clients Configs for user-principal 'user1', default client-id are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200 Configs for user-principal 'user1', client-id 'clientA' are producer_byte_rate=1024,consumer_byte_rate=2048,request_percentage=200","title":"\u8bbe\u7f6e\u914d\u989d"},{"location":"6/#62","text":"\u67d0\u4e9b\u90e8\u7f72\u9700\u8981\u7ba1\u7406\u8de8\u8d8a\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3\u7684\u6570\u636e\u7ba1\u9053\u3002\u6211\u4eec\u63a8\u8350\u7684\u65b9\u6cd5\u662f\u5728\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u90e8\u7f72\u4e00\u4e2a\u672c\u5730 Kafka \u96c6\u7fa4\uff0c\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u5b9e\u4f8b\u4ec5\u4e0e\u5176\u672c\u5730\u96c6\u7fa4\u4ea4\u4e92\u5e76\u5728\u96c6\u7fa4\u4e4b\u95f4\u955c\u50cf\u6570\u636e\uff08\u6709\u5173\u5982\u4f55\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5f02\u5730\u590d\u5236 \u6587\u6863\uff09\u3002 \u8fd9\u79cd\u90e8\u7f72\u6a21\u5f0f\u5141\u8bb8\u6570\u636e\u4e2d\u5fc3\u5145\u5f53\u72ec\u7acb\u5b9e\u4f53\uff0c\u5e76\u5141\u8bb8\u6211\u4eec\u96c6\u4e2d\u7ba1\u7406\u548c\u8c03\u6574\u6570\u636e\u4e2d\u5fc3\u95f4\u7684\u590d\u5236\u3002\u5373\u4f7f\u6570\u636e\u4e2d\u5fc3\u95f4\u94fe\u8def\u4e0d\u53ef\u7528\uff0c\u8fd9\u4e5f\u5141\u8bb8\u6bcf\u4e2a\u8bbe\u65bd\u72ec\u7acb\u8fd0\u884c\uff1a\u5f53\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u65f6\uff0c\u955c\u50cf\u4f1a\u843d\u540e\uff0c\u76f4\u5230\u94fe\u8def\u6062\u590d\uff0c\u6b64\u65f6\u5b83\u4f1a\u8d76\u4e0a\u3002 \u5bf9\u4e8e\u9700\u8981\u6240\u6709\u6570\u636e\u7684\u5168\u5c40\u89c6\u56fe\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u955c\u50cf\u6765\u63d0\u4f9b\u5177\u6709\u4ece\u6240\u6709 \u6570\u636e \u4e2d\u5fc3\u7684\u672c\u5730\u96c6\u7fa4\u955c\u50cf\u7684\u805a\u5408\u6570\u636e\u7684\u96c6\u7fa4\u3002\u8fd9\u4e9b\u805a\u5408\u96c6\u7fa4\u7528\u4e8e\u7531\u9700\u8981\u5b8c\u6574\u6570\u636e\u96c6\u7684\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u8bfb\u53d6\u3002 \u8fd9\u4e0d\u662f\u552f\u4e00\u53ef\u80fd\u7684\u90e8\u7f72\u6a21\u5f0f\u3002\u53ef\u4ee5\u901a\u8fc7 WAN \u8bfb\u53d6\u6216\u5199\u5165\u8fdc\u7a0b Kafka \u96c6\u7fa4\uff0c\u4f46\u663e\u7136\u8fd9\u4f1a\u589e\u52a0\u83b7\u53d6\u96c6\u7fa4\u6240\u9700\u7684\u5ef6\u8fdf\u3002 Kafka \u81ea\u7136\u5730\u5728\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4e2d\u5bf9\u6570\u636e\u8fdb\u884c\u6279\u5904\u7406\uff0c\u56e0\u6b64\u5373\u4f7f\u5728\u9ad8\u5ef6\u8fdf\u8fde\u63a5\u4e0b\u4e5f\u80fd\u5b9e\u73b0\u9ad8\u541e\u5410\u91cf\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528 socket.send.buffer.bytes \u548c socket.receive.buffer.bytes \u914d\u7f6e\u6765\u589e\u52a0\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u4ee3\u7406\u7684 TCP \u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f\u3002 \u6b64\u5904 \u8bb0\u5f55\u4e86\u8bbe\u7f6e\u6b64\u503c\u7684\u9002\u5f53\u65b9\u6cd5\u3002 \u901a\u5e38 \u4e0d \u5efa\u8bae\u901a\u8fc7\u9ad8\u5ef6\u8fdf\u94fe\u8def\u8fd0\u884c\u8de8\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3\u7684 \u5355\u4e2aKafka \u96c6\u7fa4\u3002 \u8fd9\u5c06\u5bfc\u81f4 Kafka \u5199\u5165\u548c ZooKeeper \u5199\u5165\u4ea7\u751f\u975e\u5e38\u9ad8\u7684\u590d\u5236\u5ef6\u8fdf\uff0c\u5e76\u4e14\u5982\u679c\u4f4d\u7f6e\u4e4b\u95f4\u7684\u7f51\u7edc\u4e0d\u53ef\u7528\uff0cKafka \u548c ZooKeeper \u90fd\u4e0d\u4f1a\u5728\u6240\u6709\u4f4d\u7f6e\u4fdd\u6301\u53ef\u7528\u3002","title":"6.2 \u6570\u636e\u4e2d\u5fc3"},{"location":"6/#63","text":"","title":"6.3 \u5f02\u5730\u590d\u5236\uff08\u8de8\u96c6\u7fa4\u6570\u636e\u955c\u50cf\uff09"},{"location":"6/#_16","text":"Kafka \u7ba1\u7406\u5458\u53ef\u4ee5\u5b9a\u4e49\u8de8\u8d8a\u5404\u4e2a Kafka \u96c6\u7fa4\u3001\u6570\u636e\u4e2d\u5fc3\u6216\u5730\u7406\u533a\u57df\u8fb9\u754c\u7684\u6570\u636e\u6d41\u3002\u7ec4\u7ec7\u3001\u6280\u672f\u6216\u6cd5\u5f8b\u8981\u6c42\u901a\u5e38\u9700\u8981\u6b64\u7c7b\u4e8b\u4ef6\u6d41\u8bbe\u7f6e\u3002\u5e38\u89c1\u573a\u666f\u5305\u62ec\uff1a \u5f02\u5730\u590d\u5236 \u707e\u96be\u6062\u590d \u5c06\u8fb9\u7f18\u96c6\u7fa4\u9988\u9001\u5230\u4e2d\u592e\u805a\u5408\u96c6\u7fa4 \u96c6\u7fa4\u7684\u7269\u7406\u9694\u79bb\uff08\u4f8b\u5982\u751f\u4ea7\u4e0e\u6d4b\u8bd5\uff09 \u4e91\u8fc1\u79fb\u6216\u6df7\u5408\u4e91\u90e8\u7f72 \u6cd5\u5f8b\u548c\u5408\u89c4\u8981\u6c42 \u7ba1\u7406\u5458\u53ef\u4ee5\u4f7f\u7528 Kafka \u7684 MirrorMaker\uff08\u7248\u672c 2\uff09\u8bbe\u7f6e\u6b64\u7c7b\u96c6\u7fa4\u95f4\u6570\u636e\u6d41\uff0c\u8fd9\u662f\u4e00\u79cd\u4ee5\u6d41\u5f0f\u4f20\u8f93\u65b9\u5f0f\u5728\u4e0d\u540c Kafka \u73af\u5883\u4e4b\u95f4\u590d\u5236\u6570\u636e\u7684\u5de5\u5177\u3002MirrorMaker \u6784\u5efa\u5728 Kafka Connect \u6846\u67b6\u4e4b\u4e0a\uff0c\u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a \u590d\u5236\u4e3b\u9898\uff08\u6570\u636e\u52a0\u914d\u7f6e\uff09 \u590d\u5236\u6d88\u8d39\u8005\u7ec4\uff0c\u5305\u62ec\u5728\u96c6\u7fa4\u4e4b\u95f4\u8fc1\u79fb\u5e94\u7528\u7a0b\u5e8f\u7684\u504f\u79fb\u91cf \u590d\u5236 ACL \u4fdd\u7559\u5206\u533a \u81ea\u52a8\u68c0\u6d4b\u65b0\u4e3b\u9898\u548c\u5206\u533a \u63d0\u4f9b\u5e7f\u6cdb\u7684\u6307\u6807\uff0c\u4f8b\u5982\u8de8\u591a\u4e2a\u6570\u636e\u4e2d\u5fc3/\u96c6\u7fa4\u7684\u7aef\u5230\u7aef\u590d\u5236\u5ef6\u8fdf \u5bb9\u9519\u548c\u6c34\u5e73\u53ef\u6269\u5c55\u7684\u64cd\u4f5c \u6ce8\u610f\uff1a\u4f7f\u7528 MirrorMaker \u8fdb\u884c\u5f02\u5730\u590d\u5236\u53ef\u8de8 Kafka \u96c6\u7fa4\u590d\u5236\u6570\u636e\u3002 \u8fd9\u79cd\u96c6\u7fa4\u95f4\u590d\u5236\u4e0e Kafka \u7684\u96c6\u7fa4\u5185\u590d\u5236 \u4e0d\u540c\uff0c\u540e\u8005\u5728\u540c\u4e00\u4e2a Kafka \u96c6\u7fa4\u5185\u590d\u5236\u6570\u636e\u3002","title":"\u5f02\u5730\u590d\u5236\u6982\u8ff0"},{"location":"6/#_17","text":"\u501f\u52a9 MirrorMaker\uff0cKafka \u7ba1\u7406\u5458\u53ef\u4ee5\u5c06\u4e3b\u9898\u3001\u4e3b\u9898\u914d\u7f6e\u3001\u6d88\u8d39\u8005\u7ec4\u53ca\u5176\u504f\u79fb\u91cf\u4ee5\u53ca ACL \u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90 Kafka \u96c6\u7fa4\u590d\u5236\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u6807 Kafka \u96c6\u7fa4\uff0c\u5373\u8de8\u96c6\u7fa4\u73af\u5883\u3002\u7b80\u800c\u8a00\u4e4b\uff0cMirrorMaker \u4f7f\u7528\u8fde\u63a5\u5668\u4ece\u6e90\u96c6\u7fa4\u8fdb\u884c\u6d88\u8d39\u5e76\u751f\u4ea7\u5230\u76ee\u6807\u96c6\u7fa4\u3002 \u8fd9\u4e9b\u4ece\u6e90\u96c6\u7fa4\u5230\u76ee\u6807\u96c6\u7fa4\u7684\u5b9a\u5411\u6d41\u79f0\u4e3a\u590d\u5236\u6d41\u3002\u5b83\u4eec\u662f\u4f7f\u7528 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u683c\u5f0f\u5b9a\u4e49\u7684\uff0c {source_cluster}->{target_cluster} \u5982\u4e0b\u6240\u8ff0\u3002\u7ba1\u7406\u5458\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u6d41\u7a0b\u521b\u5efa\u590d\u6742\u7684\u590d\u5236\u62d3\u6251\u3002 \u4ee5\u4e0b\u662f\u4e00\u4e9b\u793a\u4f8b\u6a21\u5f0f\uff1a \u4e3b\u52a8/\u4e3b\u52a8\u9ad8\u53ef\u7528\u6027\u90e8\u7f72\uff1a A->B, B->A \u4e3b\u52a8/\u88ab\u52a8\u6216\u4e3b\u52a8/\u5907\u7528\u9ad8\u53ef\u7528\u6027\u90e8\u7f72\uff1a A->B \u805a\u5408\uff08\u4f8b\u5982\uff0c\u4ece\u591a\u4e2a\u96c6\u7fa4\u5230\u4e00\u4e2a\u96c6\u7fa4\uff09\uff1a A->K, B->K, C->K \u6247\u51fa\uff08\u4f8b\u5982\uff0c\u4ece\u4e00\u4e2a\u96c6\u7fa4\u5230\u591a\u4e2a\u96c6\u7fa4\uff09\uff1a K->A, K->B, K->C \u8f6c\u53d1\uff1a A->B, B->C, C->D \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6d41\u4f1a\u590d\u5236\u6240\u6709\u4e3b\u9898\u548c\u6d88\u8d39\u8005\u7ec4\u3002\u4f46\u662f\uff0c\u6bcf\u4e2a\u590d\u5236\u6d41\u90fd\u53ef\u4ee5\u72ec\u7acb\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u4ec5\u5c06\u7279\u5b9a\u4e3b\u9898\u6216\u6d88\u8d39\u8005\u7ec4\u4ece\u6e90\u96c6\u7fa4\u590d\u5236\u5230\u76ee\u6807\u96c6\u7fa4\u3002 \u4ee5\u4e0b\u662f\u6709\u5173\u5982\u4f55\u914d\u7f6e\u4ece primary \u96c6\u7fa4\u5230 secondary \u96c6\u7fa4\u7684\u6570\u636e\u590d\u5236\uff08\u4e3b\u52a8/\u88ab\u52a8\u8bbe\u7f6e\uff09\u7684\u7b2c\u4e00\u4e2a\u793a\u4f8b\uff1a # Basic settings clusters = primary, secondary primary.bootstrap.servers = broker3-primary:9092 secondary.bootstrap.servers = broker5-secondary:9092 # Define replication flows primary->secondary.enabled = true primary->secondary.topics = foobar-topic, quux-.*","title":"\u4ec0\u4e48\u662f\u590d\u5236\u6d41"},{"location":"6/#_18","text":"\u4ee5\u4e0b\u90e8\u5206\u4ecb\u7ecd\u5982\u4f55\u914d\u7f6e\u548c\u8fd0\u884c\u4e13\u7528 MirrorMaker \u96c6\u7fa4\u3002\u5982\u679c\u60a8\u60f3\u5728\u73b0\u6709 Kafka Connect \u96c6\u7fa4\u6216\u5176\u4ed6\u652f\u6301\u7684\u90e8\u7f72\u8bbe\u7f6e\u4e2d\u8fd0\u884c MirrorMaker\uff0c\u8bf7\u53c2\u9605 KIP-382\uff1aMirrorMaker 2.0 \uff0c\u5e76\u6ce8\u610f\u914d\u7f6e\u8bbe\u7f6e\u7684\u540d\u79f0\u53ef\u80fd\u56e0\u90e8\u7f72\u6a21\u5f0f\u800c\u5f02\u3002 \u9664\u4e86\u4ee5\u4e0b\u90e8\u5206\u4e2d\u4ecb\u7ecd\u7684\u5185\u5bb9\u4e4b\u5916\uff0c\u6709\u5173\u914d\u7f6e\u8bbe\u7f6e\u7684\u66f4\u591a\u793a\u4f8b\u548c\u4fe1\u606f\u53ef\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u627e\u5230\uff1a MirrorMakerConfig , MirrorConnectorConfig DefaultTopicFilter \u7528\u4e8e\u4e3b\u9898\uff0c DefaultGroupFilter \u7528\u4e8e\u6d88\u8d39\u8005\u7ec4 connect-mirror-maker.properties \u4e2d\u7684\u914d\u7f6e\u8bbe\u7f6e\u793a\u4f8b\uff0c KIP-382\uff1aMirrorMaker 2.0","title":"\u914d\u7f6e\u5f02\u5730\u590d\u5236"},{"location":"6/#_19","text":"MirrorMaker \u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u547d\u540d\u4e3a connect-mirror-maker.properties . \u60a8\u53ef\u4ee5\u5728\u6b64\u6587\u4ef6\u4e2d\u914d\u7f6e\u5404\u79cd\u7ec4\u4ef6\uff1a MirrorMaker \u8bbe\u7f6e\uff1a\u5168\u5c40\u8bbe\u7f6e\uff0c\u5305\u62ec\u96c6\u7fa4\u5b9a\u4e49\uff08\u522b\u540d\uff09\u4ee5\u53ca\u6bcf\u4e2a\u590d\u5236\u6d41\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e Kafka Connect \u548c\u8fde\u63a5\u5668\u8bbe\u7f6e Kafka \u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u7ba1\u7406\u5ba2\u6237\u7aef\u8bbe\u7f6e \u793a\u4f8b\uff1a\u5b9a\u4e49 MirrorMaker \u8bbe\u7f6e\uff08\u7a0d\u540e\u8be6\u7ec6\u8bf4\u660e\uff09\u3002 # Global settings clusters = us-west, us-east # defines cluster aliases us-west.bootstrap.servers = broker3-west:9092 us-east.bootstrap.servers = broker5-east:9092 topics = .* # all topics to be replicated by default # Specific replication flow settings (here: flow from us-west to us-east) us-west->us-east.enabled = true us-west->us.east.topics = foo.*, bar.* # override the default above MirrorMaker \u57fa\u4e8e Kafka Connect \u6846\u67b6\u3002 Kafka Connect \u6587\u6863\u7ae0\u8282 \u4e2d\u63cf\u8ff0\u7684\u4efb\u4f55 Kafka Connect\u3001\u6e90\u8fde\u63a5\u5668\u548c\u63a5\u6536\u5668\u8fde\u63a5\u5668\u8bbe\u7f6e\u90fd\u53ef\u4ee5\u76f4\u63a5\u5728 MirrorMaker \u914d\u7f6e\u4e2d\u4f7f\u7528\uff0c\u800c\u65e0\u9700\u66f4\u6539\u914d\u7f6e\u8bbe\u7f6e\u7684\u540d\u79f0\u6216\u4e3a\u5176\u6dfb\u52a0\u524d\u7f00\u3002 \u793a\u4f8b\uff1a\u5b9a\u4e49 MirrorMaker \u4f7f\u7528\u7684\u81ea\u5b9a\u4e49 Kafka Connect \u8bbe\u7f6e\u3002 # Setting Kafka Connect defaults for MirrorMaker tasks.max = 5 \u5927\u591a\u6570\u9ed8\u8ba4\u7684 Kafka Connect \u8bbe\u7f6e\u5bf9\u4e8e\u5f00\u7bb1\u5373\u7528\u7684 MirrorMaker \u90fd\u80fd\u5f88\u597d\u5730\u5de5\u4f5c\uff0c\u4f46 tasks.max . \u4e3a\u4e86\u5728\u591a\u4e2a MirrorMaker \u8fdb\u7a0b\u4e4b\u95f4\u5747\u5300\u5206\u914d\u5de5\u4f5c\u8d1f\u8f7d\uff0c\u5efa\u8bae\u6839\u636e\u53ef\u7528\u786c\u4ef6\u8d44\u6e90\u548c\u8981\u590d\u5236\u7684\u4e3b\u9898\u5206\u533a\u603b\u6570 \u8bbe\u7f6e tasks.max \u4e3a\u81f3\u5c11\uff08\u6700\u597d\u66f4\u9ad8\uff09\u3002 2 \u60a8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49\u6bcf\u4e2a\u6e90\u6216\u76ee\u6807\u96c6\u7fa4 \u7684 MirrorMaker \u7684 Kafka Connect \u8bbe\u7f6e\uff08\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u60a8\u53ef\u4ee5\u201c\u6bcf\u4e2a\u8fde\u63a5\u5668\u201d\u6307\u5b9a Kafka Connect \u5de5\u4f5c\u7ebf\u7a0b\u7ea7\u522b\u7684\u914d\u7f6e\u8bbe\u7f6e\uff09\u3002 {cluster}.{config_name} \u4f7f\u7528MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d \u7684\u683c\u5f0f\u3002 \u793a\u4f8b\uff1a\u4e3a us-west \u96c6\u7fa4\u5b9a\u4e49\u81ea\u5b9a\u4e49\u8fde\u63a5\u5668\u8bbe\u7f6e\u3002 # us-west custom settings us-west.offset.storage.topic = my-mirrormaker-offsets MirrorMaker \u5185\u90e8\u4f7f\u7528 Kafka \u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u7ba1\u7406\u5ba2\u6237\u7aef\u3002\u901a\u5e38\u9700\u8981\u4e3a\u8fd9\u4e9b\u5ba2\u6237\u7aef\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u3002\u8981\u8986\u76d6\u9ed8\u8ba4\u503c\uff0c\u8bf7\u5728 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a {source}.consumer.{consumer_config_name} {target}.producer.{producer_config_name} {source_or_target}.admin.{admin_config_name} \u793a\u4f8b\uff1a\u5b9a\u4e49\u81ea\u5b9a\u4e49\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u3001\u7ba1\u7406\u5ba2\u6237\u7aef\u8bbe\u7f6e\u3002 # us-west cluster (from which to consume) us-west.consumer.isolation.level = read_committed us-west.admin.bootstrap.servers = broker57-primary:9092 # us-east cluster (to which to produce) us-east.producer.compression.type = gzip us-east.producer.buffer.memory = 32768 us-east.admin.bootstrap.servers = broker8-secondary:9092","title":"\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5"},{"location":"6/#exactly-once","text":"\u4ece3.5.0\u7248\u672c\u5f00\u59cb\uff0c\u4e13\u7528\u7684MirrorMaker\u96c6\u7fa4\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\u3002 \u5bf9\u4e8e\u65b0\u7684MirrorMaker\u96c6\u7fa4\uff0c\u5c06 exactly.once.source.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u542f\u7528\u6240\u6709\u76ee\u6807Kafka\u96c6\u7fa4\uff0c\u8fd9\u4e9b\u96c6\u7fa4\u5e94\u8be5\u4f7f\u7528\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\u5199\u5165\u3002\u4f8b\u5982\uff0c\u8981\u4e3a\u96c6\u7fa4us-east\u7684\u5199\u5165\u542f\u7528\u7cbe\u786e\u4e00\u6b21\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\uff1a us-east.exactly.once.source.support = enabled \u5bf9\u4e8e\u73b0\u6709\u7684MirrorMaker\u96c6\u7fa4\uff0c\u9700\u8981\u4e24\u6b65\u5347\u7ea7\u3002\u4e0e\u5176\u7acb\u5373\u5c06theexactly exactly.once.source.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u542f\u7528\uff0c\u4e0d\u5982\u9996\u5148\u5c06\u5176\u8bbe\u7f6e\u4e3a\u5728\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u4e0a preparing \u3002\u4e00\u65e6\u5b8c\u6210\uff0c\u53ef\u4ee5\u5728\u7b2c\u4e8c\u8f6e\u91cd\u65b0\u542f\u52a8\u4e2d\u5c06\u5176\u8bbe\u7f6e\u4e3a\u5728\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u4e0a\u542f\u7528\u3002 \u65e0\u8bba\u54ea\u79cd\u60c5\u51b5\uff0c\u90fd\u9700\u8981\u542f\u7528MirrorMaker\u8282\u70b9\u4e4b\u95f4\u7684\u96c6\u7fa4\u5185\u901a\u4fe1\uff0c\u5982 KIP-710 \u6240\u8ff0\u3002\u4e3a\u6b64\uff0c dedicated.mode.enable.internal.rest \u5c5e\u6027\u5fc5\u987b\u8bbe\u7f6e\u4e3a true \u3002\u6b64\u5916\uff0c \u53ef\u7528\u4e8eKafka Connect \u7684\u8bb8\u591aREST\u76f8\u5173 \u914d\u7f6e\u5c5e\u6027 \u53ef\u4ee5\u6307\u5b9aMirrorMaker\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u8981\u542f\u7528MirrorMaker\u96c6\u7fa4\u4e2d\u4e0e\u672c\u5730\u8ba1\u7b97\u673a80\u7aef\u53e380\u4e0a\u76d1\u542c\u7684\u6bcf\u4e2a\u8282\u70b9\u8fdb\u884c\u96c6\u7fa4\u5185\u90e8\u901a\u4fe1\uff0c\u5e94\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230MirrorMaker\u914d\u7f6e\u6587\u4ef6\u4e2d\uff1a dedicated.mode.enable.internal.rest = true listeners = http://localhost:8080 \u8fd0\u884cMirrorMaker\u65f6\uff0c\u8fd8\u5efa\u8bae\u4ece\u5df2\u590d\u5236\u7684\u6570\u636e\u4e2d\u7b5b\u9009\u5df2\u4e2d\u6b62\u4e8b\u52a1\u4e2d\u7684\u8bb0\u5f55\u3002\u4e3a\u6b64\uff0c\u8bf7\u786e\u4fdd\u5c06\u7528\u4e8e\u4ece\u6e90\u96c6\u7fa4\u8bfb\u53d6\u7684\u4f7f\u7528\u8005\u914d\u7f6e\u4e3a\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u4e3aread_committed\u3002\u5982\u679c\u4eceus west\u96c6\u7fa4\u590d\u5236\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230MirrorMaker\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5bf9\u4ece\u8be5\u96c6\u7fa4\u8bfb\u53d6\u7684\u6240\u6709\u590d\u5236\u6d41\u6267\u884c\u6b64\u64cd\u4f5c\uff1a \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u542f\u7528\u96c6\u7fa4\u5185\u90e8\u901a\u4fe1\uff0c\u5f3a\u70c8\u5efa\u8bae\u4fdd\u62a4\u6bcf\u4e2aMirrorMaker\u8282\u70b9\u5e26\u6765\u7684REST\u670d\u52a1\u5668\u3002\u6709\u5173\u5982\u4f55\u5b9e\u73b0\u6b64\u64cd\u4f5c\u7684\u4fe1\u606f \uff0c \u8bf7\u53c2\u9605 Kafka Connect \u7684 \u914d\u7f6e\u5c5e\u6027 \u3002 \u8fd8\u5efa\u8bae\u5728\u8fd0\u884c MirrorMaker \u65f6\u4ece\u590d\u5236\u6570\u636e\u4e2d\u8fc7\u6ee4\u6389\u6765\u81ea\u5df2\u4e2d\u6b62\u4e8b\u52a1\u7684\u8bb0\u5f55\u3002 \u4e3a\u6b64\uff0c\u8bf7\u786e\u4fdd\u7528\u4e8e\u4ece\u6e90\u96c6\u7fa4\u8bfb\u53d6\u7684\u4f7f\u7528\u8005\u914d\u7f6e\u4e3a isolation.level \u8bbe\u7f6e\u4e3a read_committed \u3002 \u5982\u679c\u4ece\u96c6\u7fa4 us-west \u590d\u5236\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u6765\u5bf9\u4ece\u8be5\u96c6\u7fa4\u8bfb\u53d6\u7684\u6240\u6709\u590d\u5236\u6d41\u5b8c\u6210\u6b64\u64cd\u4f5c\uff1a us-west.consumer.isolation.level = read_committed \u6700\u540e\u4e00\u70b9\uff0c\u5728\u5f15\u64ce\u76d6\u4e0b\uff0cMirrorMaker\u4f7f\u7528Kafka Connect\u6e90\u8fde\u63a5\u5668\u6765\u590d\u5236\u6570\u636e\u3002\u6709\u5173\u6b64\u7c7b\u8fde\u63a5\u5668\u7684\u7cbe\u786e\u4e00\u6b21\u652f\u6301\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u76f8\u5173\u6587\u6863\u9875\u9762 \u3002","title":"Exactly once"},{"location":"6/#_20","text":"\u8981\u5b9a\u4e49\u590d\u5236\u6d41\uff0c\u60a8\u5fc5\u987b\u9996\u5148\u5728 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u76f8\u5e94\u7684\u6e90\u548c\u76ee\u6807 Kafka \u96c6\u7fa4\u3002 clusters \uff08\u5fc5\u9700\uff09\uff1a\u4ee5\u9017\u53f7\u5206\u9694\u7684 Kafka \u96c6\u7fa4\u201c\u522b\u540d\u201d\u5217\u8868 {clusterAlias}.bootstrap.servers \uff08\u5fc5\u586b\uff09\uff1a\u7279\u5b9a\u96c6\u7fa4\u7684\u8fde\u63a5\u4fe1\u606f\uff1b\u201c\u5f15\u5bfc\u201dKafka broker\u7684\u9017\u53f7\u5206\u9694\u5217\u8868 \u793a\u4f8b\uff1a\u5b9a\u4e49\u4e24\u4e2a\u96c6\u7fa4\u522b\u540d primary \u548c secondary \uff0c\u5305\u62ec\u5b83\u4eec\u7684\u8fde\u63a5\u4fe1\u606f\u3002 clusters = primary, secondary primary.bootstrap.servers = broker10-primary:9092,broker-11-primary:9092 secondary.bootstrap.servers = broker5-secondary:9092,broker6-secondary:9092 {source}->{target}.enabled = true \u5176\u6b21\uff0c\u60a8\u5fc5\u987b\u6839\u636e\u9700\u8981 \u663e\u5f0f\u542f\u7528\u5404\u4e2a\u590d\u5236\u6d41\u3002\u8bf7\u8bb0\u4f4f\uff0c\u6d41\u662f\u5b9a\u5411\u7684\uff1a\u5982\u679c\u9700\u8981\u53cc\u5411\uff08\u53cc\u5411\uff09\u590d\u5236\uff0c\u5219\u5fc5\u987b\u542f\u7528\u4e24\u4e2a\u65b9\u5411\u7684\u6d41\u3002 # Enable replication from primary to secondary primary->secondary.enabled = true \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u590d\u5236\u6d41\u4f1a\u5c06\u9664\u5c11\u6570\u7279\u6b8a\u4e3b\u9898\u548c\u4f7f\u7528\u8005\u7ec4\u4e4b\u5916\u7684\u6240\u6709\u5185\u5bb9\u4ece\u6e90\u96c6\u7fa4\u590d\u5236\u5230\u76ee\u6807\u96c6\u7fa4\uff0c\u5e76\u81ea\u52a8\u68c0\u6d4b\u4efb\u4f55\u65b0\u521b\u5efa\u7684\u4e3b\u9898\u548c\u7ec4\u3002\u76ee\u6807\u96c6\u7fa4\u4e2d\u590d\u5236\u4e3b\u9898\u7684\u540d\u79f0\u5c06\u4ee5\u6e90\u96c6\u7fa4\u7684\u540d\u79f0\u4e3a\u524d\u7f00\uff08\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u8fdb\u4e00\u6b65\u90e8\u5206\uff09\u3002\u4f8b\u5982\uff0c foo \u6e90\u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\u5c06\u88ab\u590d\u5236\u5230\u76ee\u6807\u96c6\u7fa4\u4e2d us-west \u547d\u540d\u7684\u4e3b\u9898\u3002 us-west.foo``us-east \u540e\u7eed\u90e8\u5206\u89e3\u91ca\u5982\u4f55\u6839\u636e\u60a8\u7684\u9700\u8981\u81ea\u5b9a\u4e49\u6b64\u57fa\u672c\u8bbe\u7f6e\u3002","title":"\u521b\u5efa\u548c\u542f\u7528\u590d\u5236\u6d41"},{"location":"6/#_21","text":"\u590d\u5236\u6d41\u7684\u914d\u7f6e\u662f\u9876\u7ea7\u9ed8\u8ba4\u8bbe\u7f6e\uff08\u4f8b\u5982 topics \uff09\u7684\u7ec4\u5408\uff0c\u5728\u5176\u4e4b\u4e0a\u5e94\u7528\u7279\u5b9a\u4e8e\u6d41\u7684\u8bbe\u7f6e\uff08\u5982\u679c\u6709\uff09\uff08\u4f8b\u5982 us-west->us-east.topics \uff09\u3002\u8981\u66f4\u6539\u9876\u7ea7\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u8bf7\u5c06\u76f8\u5e94\u7684\u9876\u7ea7\u8bbe\u7f6e\u6dfb\u52a0\u5230 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u8981\u4ec5\u8986\u76d6\u7279\u5b9a\u590d\u5236\u6d41\u7684\u9ed8\u8ba4\u503c\uff0c\u8bf7\u4f7f\u7528\u8bed\u6cd5 format {source}->{target}.{config.name} \u3002 \u6700\u91cd\u8981\u7684\u8bbe\u7f6e\u662f\uff1a topics \uff1a\u4e3b\u9898\u5217\u8868\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5b9a\u4e49\u6e90\u96c6\u7fa4\u4e2d\u8981\u590d\u5236\u7684\u4e3b\u9898\uff08\u9ed8\u8ba4\u503c topics = .* \uff1a\uff09 topics.exclude \uff1a\u4e3b\u9898\u5217\u8868\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7528\u4e8e\u968f\u540e\u6392\u9664\u4e0e\u8bbe\u7f6e\u5339\u914d\u7684\u4e3b\u9898 topics \uff08\u9ed8\u8ba4\u503c topics.exclude = .*[\\-.]internal, .*.replica, __.* \uff1a\uff09 groups \uff1a\u4e3b\u9898\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\u5217\u8868\uff0c\u5b9a\u4e49\u6e90\u96c6\u7fa4\u4e2d\u8981\u590d\u5236\u7684\u6d88\u8d39\u8005\u7ec4\uff08\u9ed8\u8ba4\u503c groups = .* \uff1a\uff09 groups.exclude \uff1a\u4e3b\u9898\u5217\u8868\u6216\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7528\u4e8e\u968f\u540e\u6392\u9664\u4e0e\u8bbe\u7f6e\u5339\u914d\u7684\u6d88\u8d39\u8005\u7ec4 groups \uff08\u9ed8\u8ba4\u503c groups.exclude = console-consumer-.*, connect-.*, __.* \uff1a\uff09 {source}->{target}.enable \uff1a\u8bbe\u7f6e true \u4e3a\u542f\u7528\u590d\u5236\u6d41\uff08\u9ed8\u8ba4\u503c false \uff1a\uff09 \u4f8b\u5b50\uff1a # Custom top-level defaults that apply to all replication flows topics = .* groups = consumer-group1, consumer-group2 # Don't forget to enable a flow! us-west->us-east.enabled = true # Custom settings for specific replication flows us-west->us-east.topics = foo.* us-west->us-east.groups = bar.* us-west->us-east.emit.heartbeats = false \u652f\u6301\u5176\u4ed6\u914d\u7f6e\u8bbe\u7f6e\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u5176\u4e2d\u4e00\u4e9b\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u4fdd\u7559\u4e3a\u9ed8\u8ba4\u503c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 MirrorMakerConfig \u548c MirrorConnectorConfig \u3002 refresh.topics.enabled \uff1a\u662f\u5426\u5b9a\u671f\u68c0\u67e5\u6e90\u96c6\u7fa4\u4e2d\u7684\u65b0\u4e3b\u9898\uff08\u9ed8\u8ba4\uff1atrue\uff09 refresh.topics.interval.seconds \uff1a\u5728\u6e90\u96c6\u7fa4\u4e2d\u68c0\u67e5\u65b0\u4e3b\u9898\u7684\u9891\u7387\uff1b\u4f4e\u4e8e\u9ed8\u8ba4\u503c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff08\u9ed8\u8ba4\u503c\uff1a600\uff0c\u6bcf\u5341\u5206\u949f\uff09 refresh.groups.enabled \uff1a\u662f\u5426\u5b9a\u671f\u68c0\u67e5\u6e90\u96c6\u7fa4\u4e2d\u662f\u5426\u6709\u65b0\u7684\u6d88\u8d39\u8005\u7ec4\uff08\u9ed8\u8ba4\uff1atrue\uff09 refresh.groups.interval.seconds \uff1a\u68c0\u67e5\u6e90\u96c6\u7fa4\u4e2d\u65b0\u6d88\u8d39\u8005\u7ec4\u7684\u9891\u7387\uff1b\u4f4e\u4e8e\u9ed8\u8ba4\u503c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff08\u9ed8\u8ba4\u503c\uff1a600\uff0c\u6bcf\u5341\u5206\u949f\uff09 sync.topic.configs.enabled \uff1a\u662f\u5426\u4ece\u6e90\u96c6\u7fa4\u590d\u5236\u4e3b\u9898\u914d\u7f6e\uff08\u9ed8\u8ba4\uff1atrue\uff09 sync.topic.acls.enabled \uff1a\u662f\u5426\u540c\u6b65\u6e90\u96c6\u7fa4\u7684ACL\uff08\u9ed8\u8ba4\uff1atrue\uff09 emit.heartbeats.enabled \uff1a\u662f\u5426\u5b9a\u671f\u53d1\u51fa\u5fc3\u8df3\uff08\u9ed8\u8ba4\uff1atrue\uff09 emit.heartbeats.interval.seconds \uff1a\u53d1\u51fa\u5fc3\u8df3\u7684\u9891\u7387\uff08\u9ed8\u8ba4\u503c\uff1a1\uff0c\u6bcf\u9694\u4e00\u79d2\uff09 heartbeats.topic.replication.factor \uff1aMirrorMaker\u5185\u90e8\u5fc3\u8df3\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u9ed8\u8ba4\uff1a3\uff09 emit.checkpoints.enabled \uff1a\u662f\u5426\u5b9a\u671f\u53d1\u51fa MirrorMaker \u7684\u6d88\u8d39\u8005\u504f\u79fb\u91cf\uff08\u9ed8\u8ba4\u503c\uff1atrue\uff09 emit.checkpoints.interval.seconds \uff1a\u53d1\u51fa\u68c0\u67e5\u70b9\u7684\u9891\u7387\uff08\u9ed8\u8ba4\u503c\uff1a60\uff0c\u6bcf\u5206\u949f\uff09 checkpoints.topic.replication.factor \uff1aMirrorMaker \u5185\u90e8\u68c0\u67e5\u70b9\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u9ed8\u8ba4\u503c\uff1a3\uff09 sync.group.offsets.enabled``__consumer_offsets \uff1a\u53ea\u8981\u8be5\u7ec4\u4e2d\u6ca1\u6709\u6d3b\u52a8\u6d88\u8d39\u8005\u8fde\u63a5\u5230\u76ee\u6807\u96c6\u7fa4\uff0c\u662f\u5426 \u5b9a\u671f\u5c06\u590d\u5236\u7684\u6d88\u8d39\u8005\u7ec4\uff08\u5728\u6e90\u96c6\u7fa4\u4e2d\uff09\u7684\u7ffb\u8bd1\u504f\u79fb\u91cf\u5199\u5165\u76ee\u6807\u96c6\u7fa4\u4e2d\u7684\u4e3b\u9898\uff08\u9ed8\u8ba4\u503c\uff1afalse\uff09 sync.group.offsets.interval.seconds \uff1a\u6d88\u8d39\u8005\u7ec4\u504f\u79fb\u91cf\u540c\u6b65\u7684\u9891\u7387\uff08\u9ed8\u8ba4\u503c\uff1a60\uff0c\u6bcf\u5206\u949f\uff09 offset-syncs.topic.replication.factor \uff1aMirrorMaker\u5185\u90e8\u504f\u79fb\u540c\u6b65\u4e3b\u9898\u7684\u590d\u5236\u56e0\u5b50\uff08\u9ed8\u8ba4\u503c\uff1a3\uff09","title":"\u914d\u7f6e\u590d\u5236\u6d41"},{"location":"6/#_22","text":"MirrorMaker \u652f\u6301\u4e0e Kafka Connect \u76f8\u540c\u7684\u5b89\u5168\u8bbe\u7f6e\uff0c\u56e0\u6b64\u8bf7\u53c2\u9605\u94fe\u63a5\u90e8\u5206\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002 \u793a\u4f8b\uff1a\u52a0\u5bc6 MirrorMaker \u4e0e us-east \u96c6\u7fa4\u4e4b\u95f4\u7684\u901a\u4fe1\u3002 us-east.security.protocol=SSL us-east.ssl.truststore.location=/path/to/truststore.jks us-east.ssl.truststore.password=my-secret-password us-east.ssl.keystore.location=/path/to/keystore.jks us-east.ssl.keystore.password=my-secret-password us-east.ssl.key.password=my-secret-password","title":"\u4fdd\u62a4\u590d\u5236\u6d41"},{"location":"6/#_23","text":"\u76ee\u6807\u96c6\u7fa4\u4e2d\u7684\u590d\u5236\u4e3b\u9898\uff08\u6709\u65f6\u79f0\u4e3a \u8fdc\u7a0b \u4e3b\u9898\uff09\u6839\u636e\u590d\u5236\u7b56\u7565\u8fdb\u884c\u91cd\u547d\u540d\u3002MirrorMaker \u4f7f\u7528\u6b64\u7b56\u7565\u6765\u786e\u4fdd\u6765\u81ea\u4e0d\u540c\u96c6\u7fa4\u7684\u4e8b\u4ef6\uff08\u4e5f\u79f0\u4e3a\u8bb0\u5f55\u3001\u6d88\u606f\uff09\u4e0d\u4f1a\u5199\u5165\u540c\u4e00\u4e3b\u9898\u5206\u533a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6839\u636e DefaultReplicationPolicy \uff0c\u76ee\u6807\u96c6\u7fa4\u4e2d\u590d\u5236\u4e3b\u9898\u7684\u540d\u79f0\u91c7\u7528\u4ee5\u4e0b\u683c\u5f0f {source}.{source_topic_name} \uff1a us-west us-east ========= ================= bar-topic foo-topic --> us-west.foo-topic \u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\uff1a . \uff09 replication.policy.separator \uff1a # Defining a custom separator us-west->us-east.replication.policy.separator = _ \u5982\u679c\u60a8\u9700\u8981\u8fdb\u4e00\u6b65\u63a7\u5236\u590d\u5236\u4e3b\u9898\u7684\u547d\u540d\u65b9\u5f0f\uff0c\u60a8\u53ef\u4ee5\u5728 MirrorMaker \u914d\u7f6e\u4e2d \u5b9e\u73b0\u81ea\u5b9a\u4e49 ReplicationPolicy \u5e76\u8986\u76d6 replication.policy.class \uff08\u9ed8\u8ba4\u4e3a\uff09\u3002 DefaultReplicationPolicy","title":"\u76ee\u6807\u96c6\u7fa4\u4e2d\u590d\u5236\u4e3b\u9898\u7684\u81ea\u5b9a\u4e49\u547d\u540d"},{"location":"6/#_24","text":"MirrorMaker \u8fdb\u7a0b\u901a\u8fc7\u5176\u76ee\u6807 Kafka \u96c6\u7fa4\u5171\u4eab\u914d\u7f6e\u3002\u5f53\u9488\u5bf9\u540c\u4e00\u76ee\u6807\u96c6\u7fa4\u8fd0\u884c\u7684 MirrorMaker \u8fdb\u7a0b\u4e4b\u95f4\u7684\u914d\u7f6e\u4e0d\u540c\u65f6\uff0c\u6b64\u884c\u4e3a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u51b2\u7a81\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u4e24\u4e2a MirrorMaker \u8fdb\u7a0b\u5c06\u662f\u6d3b\u6cfc\u7684\uff1a # Configuration of process 1 A->B.enabled = true A->B.topics = foo # Configuration of process 2 A->B.enabled = true A->B.topics = bar \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u5c06\u901a\u8fc7 cluster \u5171\u4eab\u914d\u7f6e B \uff0c\u8fd9\u4f1a\u5bfc\u81f4\u51b2\u7a81\u3002\u6839\u636e\u4e24\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u54ea\u4e00\u4e2a\u88ab\u9009\u4e3e\u4e3a\u201c\u9886\u5bfc\u8005\u201d\uff0c\u7ed3\u679c\u5c06\u662f\u4e3b\u9898 foo \u6216\u4e3b\u9898 bar \u88ab\u590d\u5236\uff0c\u4f46\u4e0d\u4f1a\u540c\u65f6\u590d\u5236\u3002 \u56e0\u6b64\uff0c\u5728\u540c\u4e00\u76ee\u6807\u96c6\u7fa4\u7684\u590d\u5236\u6d41\u4e2d\u4fdd\u6301 MirrorMaker \u914d\u7f6e\u4e00\u81f4\u975e\u5e38\u91cd\u8981\u3002\u4f8b\u5982\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u81ea\u52a8\u5316\u5de5\u5177\u6216\u4e3a\u6574\u4e2a\u7ec4\u7ec7\u4f7f\u7528\u5355\u4e2a\u5171\u4eab\u7684 MirrorMaker \u914d\u7f6e\u6587\u4ef6\u6765\u5b9e\u73b0\u3002","title":"\u9632\u6b62\u914d\u7f6e\u51b2\u7a81"},{"location":"6/#_25","text":"\u4e3a\u4e86\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u5ef6\u8fdf\uff08\u201c\u751f\u4ea7\u8005\u6ede\u540e\u201d\uff09\uff0c\u5efa\u8bae\u5c06 MirrorMaker \u8fdb\u7a0b\u653e\u7f6e\u5728\u5c3d\u53ef\u80fd\u9760\u8fd1\u5176\u76ee\u6807\u96c6\u7fa4\uff08\u5373\u5b83\u5411\u5176\u751f\u6210\u6570\u636e\u7684\u96c6\u7fa4\uff09\u7684\u4f4d\u7f6e\u3002\u8fd9\u662f\u56e0\u4e3a Kafka \u751f\u4ea7\u8005\u901a\u5e38\u6bd4 Kafka \u6d88\u8d39\u8005\u66f4\u5bb9\u6613\u9047\u5230\u4e0d\u53ef\u9760\u6216\u9ad8\u5ef6\u8fdf\u7684\u7f51\u7edc\u8fde\u63a5\u3002 First DC Second DC ========== ========================= primary --------- MirrorMaker --> secondary (remote) (local) \u8981\u8fd0\u884c\u8fd9\u6837\u7684\u201c\u4ece\u8fdc\u7a0b\u4f7f\u7528\uff0c\u751f\u6210\u5230\u672c\u5730\u201d\u8bbe\u7f6e\uff0c\u8bf7\u5728\u9760\u8fd1\u76ee\u6807\u96c6\u7fa4\u4e14\u6700\u597d\u5728\u4e0e\u76ee\u6807\u96c6\u7fa4\u76f8\u540c\u7684\u4f4d\u7f6e\u8fd0\u884c MirrorMaker \u8fdb\u7a0b\uff0c\u5e76\u5728\u547d\u4ee4\u884c\u53c2\u6570\uff08\u7a7a\u767d\u5206\u9694\u5217\u8868\uff09\u4e2d\u663e\u5f0f\u8bbe\u7f6e\u8fd9\u4e9b\u201c\u672c\u5730\u201d --clusters \u96c6\u7fa4\u96c6\u7fa4\u522b\u540d\uff09\uff1a # Run in secondary's data center, reading from the remote `primary` cluster $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters secondary \u5b83 --clusters secondary \u544a\u8bc9 MirrorMaker \u8fdb\u7a0b\u7ed9\u5b9a\u7684\u96c6\u7fa4\u4f4d\u4e8e\u9644\u8fd1\uff0c\u5e76\u963b\u6b62\u5176\u590d\u5236\u6570\u636e\u6216\u5c06\u914d\u7f6e\u53d1\u9001\u5230\u5176\u4ed6\u8fdc\u7a0b\u4f4d\u7f6e\u7684\u96c6\u7fa4\u3002","title":"\u6700\u4f73\u5b9e\u8df5\uff1a\u4ece\u8fdc\u7a0b\u6d88\u8d39\uff0c\u751f\u4ea7\u5230\u672c\u5730"},{"location":"6/#_26","text":"\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u5c06\u4e3b\u9898\u4ece\u4e3b Kafka \u73af\u5883\u590d\u5236\u5230\u8f85\u52a9 Kafka \u73af\u5883\u7684\u57fa\u672c\u8bbe\u7f6e\uff0c\u4f46\u4e0d\u4ece\u8f85\u52a9 Kafka \u73af\u5883\u590d\u5236\u56de\u4e3b\u73af\u5883\u3002\u8bf7\u6ce8\u610f\uff0c\u5927\u591a\u6570\u751f\u4ea7\u8bbe\u7f6e\u90fd\u9700\u8981\u8fdb\u4e00\u6b65\u914d\u7f6e\uff0c\u4f8b\u5982\u5b89\u5168\u8bbe\u7f6e\u3002 # Unidirectional flow (one-way) from primary to secondary cluster primary.bootstrap.servers = broker1-primary:9092 secondary.bootstrap.servers = broker2-secondary:9092 primary->secondary.enabled = true secondary->primary.enabled = false primary->secondary.topics = foo.* # only replicate some topics","title":"\u793a\u4f8b\uff1a\u4e3b\u52a8/\u88ab\u52a8\u9ad8\u53ef\u7528\u6027\u90e8\u7f72"},{"location":"6/#_27","text":"\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u4ee5\u4e24\u79cd\u65b9\u5f0f\u5728\u4e24\u4e2a\u96c6\u7fa4\u4e4b\u95f4\u590d\u5236\u4e3b\u9898\u7684\u57fa\u672c\u8bbe\u7f6e\u3002\u8bf7\u6ce8\u610f\uff0c\u5927\u591a\u6570\u751f\u4ea7\u8bbe\u7f6e\u90fd\u9700\u8981\u8fdb\u4e00\u6b65\u914d\u7f6e\uff0c\u4f8b\u5982\u5b89\u5168\u8bbe\u7f6e\u3002 # Bidirectional flow (two-way) between us-west and us-east clusters clusters = us-west, us-east us-west.bootstrap.servers = broker1-west:9092,broker2-west:9092 Us-east.bootstrap.servers = broker3-east:9092,broker4-east:9092 us-west->us-east.enabled = true us-east->us-west.enabled = true \u5173\u4e8e\u9632\u6b62\u590d\u5236\u201c\u5faa\u73af\u201d\u7684\u6ce8\u610f\u4e8b\u9879\uff08\u5176\u4e2d\u4e3b\u9898\u6700\u521d\u4ece A \u590d\u5236\u5230 B\uff0c\u7136\u540e\u590d\u5236\u7684\u4e3b\u9898\u5c06\u518d\u6b21\u4ece B \u590d\u5236\u5230 A\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff09\uff1a\u53ea\u8981\u60a8\u5728\u540c\u4e00\u4e2a MirrorMaker \u4e2d\u5b9a\u4e49\u4e0a\u8ff0 \u6d41\u7a0b\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u60a8\u4e0d\u9700\u8981\u663e\u5f0f\u6dfb\u52a0 topics.exclude \u8bbe\u7f6e\u6765\u9632\u6b62\u4e24\u4e2a\u96c6\u7fa4\u4e4b\u95f4\u7684\u590d\u5236\u5faa\u73af\u3002","title":"\u793a\u4f8b\uff1a\u4e3b\u52a8/\u4e3b\u52a8\u9ad8\u53ef\u7528\u6027\u90e8\u7f72"},{"location":"6/#_28","text":"\u8ba9\u6211\u4eec\u5c06\u524d\u9762\u90e8\u5206\u4e2d\u7684\u6240\u6709\u4fe1\u606f\u653e\u5728\u4e00\u4e2a\u66f4\u5927\u7684\u793a\u4f8b\u4e2d\u3002\u60f3\u8c61\u4e00\u4e0b\uff0c\u6709\u4e09\u4e2a\u6570\u636e\u4e2d\u5fc3\uff08\u897f\u3001\u4e1c\u3001\u5317\uff09\uff0c\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u6709\u4e24\u4e2a Kafka \u96c6\u7fa4\uff08\u4f8b\u5982 \u3001 west-1 \uff09 west-2 \u3002\u672c\u8282\u4e2d\u7684\u793a\u4f8b\u663e\u793a\u5982\u4f55\u914d\u7f6e MirrorMaker (1) \u4ee5\u5b9e\u73b0\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u5185\u7684\u4e3b\u52a8/\u4e3b\u52a8\u590d\u5236\uff0c\u4ee5\u53ca (2) \u8de8\u6570\u636e\u4e2d\u5fc3\u590d\u5236 (XDCR)\u3002 \u9996\u5148\uff0c\u5728\u914d\u7f6e\u4e2d\u5b9a\u4e49\u6e90\u96c6\u7fa4\u548c\u76ee\u6807\u96c6\u7fa4\u53ca\u5176\u590d\u5236\u6d41\uff1a # Basic settings clusters: west-1, west-2, east-1, east-2, north-1, north-2 west-1.bootstrap.servers = ... west-2.bootstrap.servers = ... east-1.bootstrap.servers = ... east-2.bootstrap.servers = ... north-1.bootstrap.servers = ... north-2.bootstrap.servers = ... # Replication flows for Active/Active in West DC west-1->west-2.enabled = true west-2->west-1.enabled = true # Replication flows for Active/Active in East DC east-1->east-2.enabled = true east-2->east-1.enabled = true # Replication flows for Active/Active in North DC north-1->north-2.enabled = true north-2->north-1.enabled = true # Replication flows for XDCR via west-1, east-1, north-1 west-1->east-1.enabled = true west-1->north-1.enabled = true east-1->west-1.enabled = true east-1->north-1.enabled = true north-1->west-1.enabled = true north-1->east-1.enabled = true \u7136\u540e\uff0c\u5728\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u4e2d\uff0c\u542f\u52a8\u4e00\u4e2a\u6216\u591a\u4e2a MirrorMaker\uff0c\u5982\u4e0b\u6240\u793a\uff1a # In West DC: $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters west-1 west-2 # In East DC: $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters east-1 east-2 # In North DC: $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters north-1 north-2 \u901a\u8fc7\u6b64\u914d\u7f6e\uff0c\u4efb\u4f55\u96c6\u7fa4\u751f\u6210\u7684\u8bb0\u5f55\u90fd\u5c06\u5728\u6570\u636e\u4e2d\u5fc3\u5185\u590d\u5236\uff0c\u5e76\u8de8\u5230\u5176\u4ed6\u6570\u636e\u4e2d\u5fc3\u3002\u901a\u8fc7\u63d0\u4f9b --clusters \u53c2\u6570\uff0c\u6211\u4eec\u786e\u4fdd\u6bcf\u4e2a MirrorMaker \u8fdb\u7a0b\u4ec5\u5411\u9644\u8fd1\u7684\u96c6\u7fa4\u751f\u6210\u6570\u636e\u3002 \u6ce8\u610f\uff1a --clusters \u4ece\u6280\u672f\u4e0a\u8bb2\uff0c\u6b64\u5904\u4e0d\u9700\u8981\u8be5\u53c2\u6570\u3002\u6ca1\u6709\u5b83\uff0cMirrorMaker \u4e5f\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002\u4f46\u662f\uff0c\u541e\u5410\u91cf\u53ef\u80fd\u4f1a\u53d7\u5230\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u201c\u751f\u4ea7\u8005\u6ede\u540e\u201d\u7684\u5f71\u54cd\uff0c\u5e76\u4e14\u60a8\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u4f20\u8f93\u6210\u672c\u3002","title":"\u793a\u4f8b\uff1a\u591a\u96c6\u7fa4\u5f02\u5730\u590d\u5236"},{"location":"6/#_29","text":"\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fd0\u884c\u4efb\u610f\u6570\u91cf\u7684 MirrorMaker \u8fdb\u7a0b\uff08\u4f8b\u5982\uff1a\u8282\u70b9\u3001\u670d\u52a1\u5668\uff09\u3002\u7531\u4e8e MirrorMaker \u57fa\u4e8e Kafka Connect\uff0c\u56e0\u6b64\u914d\u7f6e\u4e3a\u590d\u5236\u76f8\u540c Kafka \u96c6\u7fa4\u7684 MirrorMaker \u8fdb\u7a0b\u5728\u5206\u5e03\u5f0f\u8bbe\u7f6e\u4e2d\u8fd0\u884c\uff1a\u5b83\u4eec\u5c06\u627e\u5230\u5f7c\u6b64\u3001\u5171\u4eab\u914d\u7f6e\uff08\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u90e8\u5206\uff09\u3001\u8d1f\u8f7d\u5e73\u8861\u5176\u5de5\u4f5c\u7b49\u7b49\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u8981\u63d0\u9ad8\u590d\u5236\u6d41\u7684\u541e\u5410\u91cf\uff0c\u4e00\u79cd\u9009\u62e9\u662f\u5e76\u884c\u8fd0\u884c\u5176\u4ed6 MirrorMaker \u8fdb\u7a0b\u3002 \u8981\u542f\u52a8 MirrorMaker \u8fdb\u7a0b\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties \u542f\u52a8\u540e\uff0cMirrorMaker \u8fdb\u7a0b\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\u65f6\u95f4\u624d\u5f00\u59cb\u590d\u5236\u6570\u636e\u3002 \u6216\u8005\uff0c\u5982\u524d\u6240\u8ff0\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u53c2\u6570 --clusters \u4ee5\u786e\u4fdd MirrorMaker \u8fdb\u7a0b\u4ec5\u5411\u9644\u8fd1\u7684\u96c6\u7fa4\u751f\u6210\u6570\u636e\u3002 # Note: The cluster alias us-west must be defined in the configuration file $ ./bin/connect-mirror-maker.sh connect-mirror-maker.properties \\ --clusters us-west \u6d4b\u8bd5\u4f7f\u7528\u8005\u7ec4\u590d\u5236\u65f6\u8bf7\u6ce8\u610f\uff1a \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMirrorMaker \u4e0d\u4f1a\u590d\u5236\u8be5 kafka-console-consumer.sh \u5de5\u5177\u521b\u5efa\u7684\u4f7f\u7528\u8005\u7ec4\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u5de5\u5177\u5728\u547d\u4ee4\u884c\u4e0a\u6d4b\u8bd5 MirrorMaker \u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u786e\u5b9e\u4e5f\u60f3\u590d\u5236\u8fd9\u4e9b\u4f7f\u7528\u8005\u7ec4\uff0c\u8bf7 groups.exclude \u76f8\u5e94\u5730\u8bbe\u7f6e\u914d\u7f6e\uff08\u9ed8\u8ba4\u503c groups.exclude = console-consumer-.*, connect-.*, __.* \uff1a\uff09\u3002\u8bf7\u8bb0\u4f4f\u5728\u5b8c\u6210\u6d4b\u8bd5\u540e\u518d\u6b21\u66f4\u65b0\u914d\u7f6e\u3002","title":"\u5f00\u59cb\u5f02\u5730\u590d\u5236"},{"location":"6/#_30","text":"\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u53d1\u9001 SIGTERM \u4fe1\u53f7\u6765\u505c\u6b62\u6b63\u5728\u8fd0\u884c\u7684 MirrorMaker \u8fdb\u7a0b\uff1a $ kill <MirrorMaker pid>","title":"\u505c\u6b62\u5f02\u5730\u590d\u5236"},{"location":"6/#_31","text":"\u8981\u4f7f\u914d\u7f6e\u66f4\u6539\u751f\u6548\uff0c\u5fc5\u987b\u91cd\u65b0\u542f\u52a8 MirrorMaker \u8fdb\u7a0b\u3002","title":"\u5e94\u7528\u914d\u7f6e\u66f4\u6539"},{"location":"6/#_32","text":"\u5efa\u8bae\u76d1\u63a7 MirrorMaker \u8fdb\u7a0b\uff0c\u4ee5\u786e\u4fdd\u6240\u6709\u5b9a\u4e49\u7684\u590d\u5236\u6d41\u7a0b\u5747\u6b63\u5e38\u542f\u52a8\u5e76\u8fd0\u884c\u3002MirrorMaker \u57fa\u4e8e Connect \u6846\u67b6\u6784\u5efa\uff0c\u5e76\u7ee7\u627f\u4e86 Connect \u7684\u6240\u6709\u6307\u6807\uff0c\u4f8b\u5982 source-record-poll-rate . \u6b64\u5916\uff0cMirrorMaker \u5728 kafka.connect.mirror \u6307\u6807\u7ec4\u4e0b\u751f\u6210\u81ea\u5df1\u7684\u6307\u6807\u3002\u6307\u6807\u5e26\u6709\u4ee5\u4e0b\u5c5e\u6027\u6807\u8bb0\uff1a source \uff1a\u6e90\u96c6\u7fa4\u7684\u522b\u540d\uff08\u4f8b\u5982\uff0c primary \uff09 target \uff1a\u76ee\u6807\u96c6\u7fa4\u7684\u522b\u540d\uff08\u4f8b\u5982\uff0c secondary \uff09 topic \uff1a\u76ee\u6807\u96c6\u7fa4\u4e0a\u7684\u590d\u5236\u4e3b\u9898 partition \uff1a\u6b63\u5728\u590d\u5236\u7684\u5206\u533a \u8ddf\u8e2a\u6bcf\u4e2a\u590d\u5236\u4e3b\u9898\u7684\u6307\u6807\u3002\u53ef\u4ee5\u4ece\u4e3b\u9898\u540d\u79f0\u63a8\u65ad\u51fa\u6e90\u96c6\u7fa4\u3002\u4f8b\u5982\uff0c\u590d\u5236 topic1 \u5c06 primary->secondary \u4ea7\u751f\u5982\u4e0b\u6307\u6807\uff1a target=secondary topic=primary.topic1 partition=1 \u53d1\u51fa\u4ee5\u4e0b\u6307\u6807\uff1a # MBean: kafka.connect.mirror:type=MirrorSourceConnector,target=([-.w]+),topic=([-.w]+),partition=([0-9]+) record-count # number of records replicated source -> target record-age-ms # age of records when they are replicated record-age-ms-min record-age-ms-max record-age-ms-avg replication-latency-ms # time it takes records to propagate source->target replication-latency-ms-min replication-latency-ms-max replication-latency-ms-avg byte-rate # average number of bytes/sec in replicated records # MBean: kafka.connect.mirror:type=MirrorCheckpointConnector,source=([-.w]+),target=([-.w]+) checkpoint-latency-ms # time it takes to replicate consumer offsets checkpoint-latency-ms-min checkpoint-latency-ms-max checkpoint-latency-ms-avg \u8fd9\u4e9b\u6307\u6807\u4e0d\u533a\u5206\u521b\u5efa\u65f6\u95f4\u548c\u65e5\u5fd7\u8ffd\u52a0\u65f6\u95f4\u6233\u3002","title":"\u76d1\u63a7\u5f02\u5730\u590d\u5236"},{"location":"6/#64","text":"","title":"6.4 \u591a\u79df\u6237"},{"location":"6/#_33","text":"\u4f5c\u4e3a\u4e00\u4e2a\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684\u4e8b\u4ef6\u6d41\u5e73\u53f0\uff0cKafka \u88ab\u8bb8\u591a\u7528\u6237\u7528\u4f5c\u4ed6\u4eec\u7684\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\uff0c\u5b9e\u65f6\u8fde\u63a5\u6765\u81ea\u4e0d\u540c\u56e2\u961f\u548c\u4e1a\u52a1\u7ebf\u7684\u5404\u79cd\u4e0d\u540c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u79cd\u591a\u79df\u6237\u96c6\u7fa4\u73af\u5883\u9700\u8981\u9002\u5f53\u7684\u63a7\u5236\u548c\u7ba1\u7406\uff0c\u4ee5\u786e\u4fdd\u8fd9\u4e9b\u4e0d\u540c\u9700\u6c42\u7684\u548c\u5e73\u5171\u5b58\u3002\u672c\u8282\u91cd\u70b9\u4ecb\u7ecd\u8bbe\u7f6e\u6b64\u7c7b\u5171\u4eab\u73af\u5883\u7684\u529f\u80fd\u548c\u6700\u4f73\u5b9e\u8df5\uff0c\u8fd9\u5c06\u5e2e\u52a9\u60a8\u64cd\u4f5c\u6ee1\u8db3 SLA/OLA \u7684\u96c6\u7fa4\uff0c\u5e76\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u201c\u5435\u95f9\u7684\u90bb\u5c45\u201d\u9020\u6210\u7684\u6f5c\u5728\u9644\u5e26\u635f\u5bb3\u3002 \u591a\u79df\u6237\u662f\u4e00\u4e2a\u591a\u65b9\u9762\u7684\u4e3b\u9898\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a \u4e3a\u79df\u6237\u521b\u5efa\u7528\u6237\u7a7a\u95f4\uff08\u6709\u65f6\u79f0\u4e3a\u547d\u540d\u7a7a\u95f4\uff09 \u4f7f\u7528\u6570\u636e\u4fdd\u7559\u7b56\u7565\u7b49\u914d\u7f6e\u4e3b\u9898 \u901a\u8fc7\u52a0\u5bc6\u3001\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u6765\u4fdd\u62a4\u4e3b\u9898\u548c\u96c6\u7fa4 \u901a\u8fc7\u914d\u989d\u548c\u8d39\u7387\u9650\u5236\u9694\u79bb\u79df\u6237 \u76d1\u63a7\u4e0e\u8ba1\u91cf \u96c6\u7fa4\u95f4\u6570\u636e\u5171\u4eab\uff08\u53c2\u89c1\u5f02\u5730\u590d\u5236\uff09","title":"\u591a\u79df\u6237\u6982\u8ff0"},{"location":"6/#_34","text":"\u64cd\u4f5c\u591a\u79df\u6237\u96c6\u7fa4\u7684 Kafka \u7ba1\u7406\u5458\u901a\u5e38\u9700\u8981\u4e3a\u6bcf\u4e2a\u79df\u6237\u5b9a\u4e49\u7528\u6237\u7a7a\u95f4\u3002\u5c31\u672c\u8282\u800c\u8a00\uff0c\u201c\u7528\u6237\u7a7a\u95f4\u201d\u662f\u4e3b\u9898\u7684\u96c6\u5408\uff0c\u8fd9\u4e9b\u4e3b\u9898\u5728\u5355\u4e2a\u5b9e\u4f53\u6216\u7528\u6237\u7684\u7ba1\u7406\u4e0b\u7ec4\u5408\u5728\u4e00\u8d77\u3002 \u5728Kafka\u4e2d\uff0c\u6570\u636e\u7684\u4e3b\u8981\u5355\u4f4d\u662f\u4e3b\u9898\u3002\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u5e76\u547d\u540d\u6bcf\u4e2a\u4e3b\u9898\u3002\u4ed6\u4eec\u4e5f\u53ef\u4ee5\u5220\u9664\u5b83\u4eec\uff0c\u4f46\u65e0\u6cd5\u76f4\u63a5\u91cd\u547d\u540d\u4e3b\u9898\u3002\u76f8\u53cd\uff0c\u8981\u91cd\u547d\u540d\u4e3b\u9898\uff0c\u7528\u6237\u5fc5\u987b\u521b\u5efa\u65b0\u4e3b\u9898\uff0c\u5c06\u6d88\u606f\u4ece\u539f\u59cb\u4e3b\u9898\u79fb\u52a8\u5230\u65b0\u4e3b\u9898\uff0c\u7136\u540e\u5220\u9664\u539f\u59cb\u4e3b\u9898\u3002\u8003\u8651\u5230\u8fd9\u4e00\u70b9\uff0c\u5efa\u8bae\u57fa\u4e8e\u5206\u5c42\u4e3b\u9898\u547d\u540d\u7ed3\u6784\u6765\u5b9a\u4e49\u903b\u8f91\u7a7a\u95f4\u3002\u7136\u540e\uff0c\u6b64\u8bbe\u7f6e\u53ef\u4ee5\u4e0e\u5b89\u5168\u529f\u80fd\uff08\u4f8b\u5982\u524d\u7f00 ACL\uff09\u76f8\u7ed3\u5408\uff0c\u4ee5\u9694\u79bb\u4e0d\u540c\u7684\u7a7a\u95f4\u548c\u79df\u6237\uff0c\u540c\u65f6\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u4fdd\u62a4\u96c6\u7fa4\u4e2d\u6570\u636e\u7684\u7ba1\u7406\u5f00\u9500\u3002 \u8fd9\u4e9b\u903b\u8f91\u7528\u6237\u7a7a\u95f4\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u5206\u7ec4\uff0c\u5177\u4f53\u9009\u62e9\u53d6\u51b3\u4e8e\u60a8\u7684\u7ec4\u7ec7\u66f4\u559c\u6b22\u5982\u4f55\u4f7f\u7528 Kafka \u96c6\u7fa4\u3002\u6700\u5e38\u89c1\u7684\u5206\u7ec4\u5982\u4e0b\u3002 \u6309\u56e2\u961f\u6216\u7ec4\u7ec7\u5355\u4f4d\uff1a \u5728\u8fd9\u91cc\uff0c\u56e2\u961f\u662f\u4e3b\u8981\u7684\u805a\u5408\u8005\u3002\u5728\u56e2\u961f\u662f Kafka \u57fa\u7840\u8bbe\u65bd\u4e3b\u8981\u7528\u6237\u7684\u7ec4\u7ec7\u4e2d\uff0c\u8fd9\u53ef\u80fd\u662f\u6700\u597d\u7684\u5206\u7ec4\u3002 \u4e3b\u9898\u547d\u540d\u7ed3\u6784\u793a\u4f8b\uff1a <organization>.<team>.<dataset>.<event-name> (e.g., \"acme.infosec.telemetry.logins\") \u6309\u9879\u76ee\u6216\u4ea7\u54c1\uff1a \u5728\u8fd9\u91cc\uff0c\u4e00\u4e2a\u56e2\u961f\u7ba1\u7406\u591a\u4e2a\u9879\u76ee\u3002\u6bcf\u4e2a\u9879\u76ee\u7684\u51ed\u636e\u90fd\u4e0d\u540c\uff0c\u56e0\u6b64\u6240\u6709\u63a7\u4ef6\u548c\u8bbe\u7f6e\u5c06\u59cb\u7ec8\u4e0e\u9879\u76ee\u76f8\u5173\u3002 \u4e3b\u9898\u547d\u540d\u7ed3\u6784\u793a\u4f8b\uff1a <project>.<product>.<event-name> (e.g., \"mobility.payments.suspicious\") \u67d0\u4e9b\u4fe1\u606f\u901a\u5e38\u4e0d\u5e94\u653e\u5728\u4e3b\u9898\u540d\u79f0\u4e2d\uff0c\u4f8b\u5982\u53ef\u80fd\u968f\u65f6\u95f4\u53d8\u5316\u7684\u4fe1\u606f\uff08\u4f8b\u5982\uff0c\u76ee\u6807\u6d88\u8d39\u8005\u7684\u540d\u79f0\uff09\u6216\u8005\u662f\u5176\u4ed6\u5730\u65b9\u53ef\u7528\u7684\u6280\u672f\u7ec6\u8282\u6216\u5143\u6570\u636e\uff08\u4f8b\u5982\uff0c\u4e3b\u9898\u7684\u5206\u533a\uff09\u8ba1\u6570\u548c\u5176\u4ed6\u914d\u7f6e\u8bbe\u7f6e\uff09\u3002 \u8981\u5f3a\u5236\u5b9e\u65bd\u4e3b\u9898\u547d\u540d\u7ed3\u6784\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u51e0\u4e2a\u9009\u9879\uff1a \u4f7f\u7528 \u524d\u7f00 ACL \uff08\u53c2\u89c1 KIP-290 \uff09\u5f3a\u5236\u4e3b\u9898\u540d\u79f0\u4f7f\u7528\u516c\u5171\u524d\u7f00\u3002\u4f8b\u5982\uff0c\u56e2\u961f A \u53ef\u80fd\u53ea\u88ab\u5141\u8bb8\u521b\u5efa\u540d\u79f0\u4ee5 \u5f00\u5934\u7684\u4e3b\u9898 payments.teamA. \u3002 \u5b9a\u4e49\u81ea\u5b9a\u4e49 CreateTopicPolicy \uff08\u53c2\u89c1 KIP-108 \u548c\u8bbe\u7f6e create.topic.policy.class.name \uff09\u4ee5\u5f3a\u5236\u6267\u884c\u4e25\u683c\u7684\u547d\u540d\u6a21\u5f0f\u3002\u8fd9\u4e9b\u7b56\u7565\u63d0\u4f9b\u4e86\u6700\u5927\u7684\u7075\u6d3b\u6027\uff0c\u5e76\u4e14\u53ef\u4ee5\u6db5\u76d6\u590d\u6742\u7684\u6a21\u5f0f\u548c\u89c4\u5219\u6765\u6ee1\u8db3\u7ec4\u7ec7\u7684\u9700\u6c42\u3002 \u901a\u8fc7\u4f7f\u7528 ACL \u62d2\u7edd\u666e\u901a\u7528\u6237\u7981\u7528\u4e3b\u9898\u521b\u5efa\uff0c\u7136\u540e\u4f9d\u9760\u5916\u90e8\u8fdb\u7a0b\u4ee3\u8868\u7528\u6237\u521b\u5efa\u4e3b\u9898\uff08\u4f8b\u5982\uff0c\u811a\u672c\u6216\u60a8\u6700\u559c\u6b22\u7684\u81ea\u52a8\u5316\u5de5\u5177\u5305\uff09\u3002 auto.create.topics.enable=false \u901a\u8fc7\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d\u8fdb\u884c\u8bbe\u7f6e\u6765\u7981\u7528 Kafka \u529f\u80fd\u4ee5\u6309\u9700\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\u4e5f\u53ef\u80fd\u5f88\u6709\u7528\u3002\u8bf7\u6ce8\u610f\uff0c\u60a8\u4e0d\u5e94\u4ec5\u4ec5\u4f9d\u8d56\u6b64\u9009\u9879\u3002","title":"\u4f7f\u7528\u4e3b\u9898\u547d\u540d\u4e3a\u79df\u6237\u521b\u5efa\u7528\u6237\u7a7a\u95f4\uff08\u547d\u540d\u7a7a\u95f4\uff09"},{"location":"6/#_35","text":"Kafka \u7684\u914d\u7f6e\u7531\u4e8e\u5176\u7cbe\u7ec6\u7684\u7c92\u5ea6\u800c\u975e\u5e38\u7075\u6d3b\uff0c\u5e76\u4e14\u5b83\u652f\u6301\u5927\u91cf\u7684 \u6309\u4e3b\u9898\u914d\u7f6e\u8bbe\u7f6e \uff0c\u4ee5\u5e2e\u52a9\u7ba1\u7406\u5458\u8bbe\u7f6e\u591a\u79df\u6237\u96c6\u7fa4\u3002\u4f8b\u5982\uff0c\u7ba1\u7406\u5458\u901a\u5e38\u9700\u8981\u5b9a\u4e49\u6570\u636e\u4fdd\u7559\u7b56\u7565\uff0c\u4ee5\u63a7\u5236\u6570\u636e\u5728\u4e3b\u9898\u4e2d\u5b58\u50a8\u7684\u6570\u91cf\u548c/\u6216\u591a\u957f\u65f6\u95f4\uff0c\u5e76\u4f7f\u7528\u8bf8\u5982 retention.bytes \uff08\u5927\u5c0f\uff09\u548c retention.ms \uff08\u65f6\u95f4\uff09\u7b49\u8bbe\u7f6e\u3002\u8fd9\u9650\u5236\u4e86\u96c6\u7fa4\u5185\u7684\u5b58\u50a8\u6d88\u8017\uff0c\u5e76\u6709\u52a9\u4e8e\u9075\u5b88 GDPR \u7b49\u6cd5\u5f8b\u8981\u6c42\u3002","title":"\u914d\u7f6e\u4e3b\u9898\uff1a\u6570\u636e\u4fdd\u7559\u7b49"},{"location":"6/#_36","text":"\u7531\u4e8e\u8be5\u6587\u6863\u6709\u4e13\u95e8\u7684\u4e00\u7ae0\u4ecb\u7ecd\u9002\u7528\u4e8e\u4efb\u4f55 Kafka \u90e8\u7f72\u7684 \u5b89\u5168\u6027 \uff0c\u56e0\u6b64\u672c\u8282\u91cd\u70b9\u4ecb\u7ecd\u591a\u79df\u6237\u73af\u5883\u7684\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879\u3002 Kafka \u7684\u5b89\u5168\u8bbe\u7f6e\u5206\u4e3a\u4e09\u4e2a\u4e3b\u8981\u7c7b\u522b\uff0c\u8fd9\u4e0e\u7ba1\u7406\u5458\u4fdd\u62a4\u5176\u4ed6\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u6570\u636e\u7cfb\u7edf\uff08\u5982\u5173\u7cfb\u6570\u636e\u5e93\u548c\u4f20\u7edf\u6d88\u606f\u7cfb\u7edf\uff09\u7684\u65b9\u5f0f\u7c7b\u4f3c\u3002 \u5bf9 Kafka \u4ee3\u7406\u548c Kafka \u5ba2\u6237\u7aef\u4e4b\u95f4\u3001\u4ee3\u7406\u4e4b\u95f4\u3001\u4ee3\u7406\u548c ZooKeeper \u8282\u70b9\u4e4b\u95f4\u4ee5\u53ca\u4ee3\u7406\u548c\u5176\u4ed6\u53ef\u9009\u5de5\u5177\u4e4b\u95f4\u4f20\u8f93\u7684\u6570\u636e\u8fdb\u884c \u52a0\u5bc6\u3002 \u5bf9\u4ece Kafka \u5ba2\u6237\u7aef\u548c\u5e94\u7528\u7a0b\u5e8f\u5230 Kafka \u4ee3\u7406\u7684\u8fde\u63a5\u4ee5\u53ca\u4ece Kafka \u4ee3\u7406\u5230 ZooKeeper \u8282\u70b9\u7684\u8fde\u63a5\u8fdb\u884c \u8eab\u4efd\u9a8c\u8bc1\u3002 \u5bf9\u4e3b\u9898\u7684\u521b\u5efa\u3001\u5220\u9664\u3001\u66f4\u6539\u914d\u7f6e\u7b49\u5ba2\u6237\u7aef\u64cd\u4f5c \u8fdb\u884c\u6388\u6743\uff1b \u5c06\u4e8b\u4ef6\u5199\u5165\u4e3b\u9898\u6216\u4ece\u4e3b\u9898\u8bfb\u53d6\u4e8b\u4ef6\uff1b\u521b\u5efa\u548c\u5220\u9664 ACL\u3002\u7ba1\u7406\u5458\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49\u7b56\u7565\u4ee5\u5b9e\u65bd\u5176\u4ed6\u9650\u5236\uff0c\u4f8b\u5982 CreateTopicPolicy and AlterConfigPolicy \uff08\u8bf7\u53c2\u9605 KIP-108 \u548c\u8bbe\u7f6e create.topic.policy.class.name \u3001 alter.config.policy.class.name \uff09\u3002 \u5f53\u4fdd\u62a4\u591a\u79df\u6237 Kafka \u73af\u5883\u65f6\uff0c\u6700\u5e38\u89c1\u7684\u7ba1\u7406\u4efb\u52a1\u662f\u7b2c\u4e09\u7c7b\uff08\u6388\u6743\uff09\uff0c\u5373\u7ba1\u7406\u7528\u6237/\u5ba2\u6237\u7aef\u6743\u9650\uff0c\u6388\u4e88\u6216\u62d2\u7edd\u5bf9\u67d0\u4e9b\u4e3b\u9898\u7684\u8bbf\u95ee\uff0c\u4ece\u800c\u6388\u4e88\u6216\u62d2\u7edd\u5bf9\u96c6\u7fa4\u5185\u7528\u6237\u5b58\u50a8\u7684\u6570\u636e\u7684\u8bbf\u95ee\u3002\u8be5\u4efb\u52a1\u4e3b\u8981\u901a\u8fc7 \u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08ACL\uff09\u7684\u8bbe\u7f6e \u6765\u6267\u884c\u3002\u5728\u8fd9\u91cc\uff0c\u591a\u79df\u6237\u73af\u5883\u7684\u7ba1\u7406\u5458\u7279\u522b\u53d7\u76ca\u4e8e\u5c06\u5206\u5c42\u4e3b\u9898\u547d\u540d\u7ed3\u6784\u653e\u5728\u9002\u5f53\u7684\u4f4d\u7f6e\uff08\u5982\u4e0a\u4e00\u8282\u6240\u8ff0\uff09\uff0c\u56e0\u4e3a\u4ed6\u4eec\u53ef\u4ee5\u901a\u8fc7\u524d\u7f00 ACL \u65b9\u4fbf\u5730\u63a7\u5236\u5bf9\u4e3b\u9898\u7684\u8bbf\u95ee\uff08 --resource-pattern-type Prefixed \uff09\u3002\u8fd9\u5927\u5927\u51cf\u5c11\u4e86\u591a\u79df\u6237\u73af\u5883\u4e2d\u4fdd\u62a4\u4e3b\u9898\u7684\u7ba1\u7406\u5f00\u9500\uff1a\u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u66f4\u9ad8\u7684\u5f00\u53d1\u4fbf\u5229\u6027\uff08\u66f4\u5bbd\u677e\u7684\u6743\u9650\uff0c\u4f7f\u7528\u66f4\u5c11\u548c\u66f4\u5e7f\u6cdb\u7684 ACL\uff09\u4e0e\u66f4\u4e25\u683c\u7684\u5b89\u5168\u6027\uff08\u66f4\u4e25\u683c\u7684\u6743\u9650\uff0c\u4f7f\u7528\u66f4\u591a\u548c\u66f4\u5e7f\u6cdb\u7684 ACL\uff09\u4e4b\u95f4\u8fdb\u884c\u6743\u8861\u3002\u66f4\u7a84\u7684 ACL\uff09\u3002 \u5728\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c\u7528\u6237 Alice\uff08ACME \u516c\u53f8 InfoSec \u56e2\u961f\u7684\u65b0\u6210\u5458\uff09\u88ab\u6388\u4e88\u5bf9\u540d\u79f0\u4ee5\u201cacme.infosec.\u201d\u5f00\u5934\u7684\u6240\u6709\u4e3b\u9898\u7684\u5199\u5165\u6743\u9650\uff0c\u4f8b\u5982\u201cacme.infosec.telemetry.logins\u201d\u548c\u201cacme.infosec.logins\u201d\u3002 infosec.syslogs.events\u201d\u3002 # Grant permissions to user Alice $ bin/kafka-acls.sh \\ --bootstrap-server broker1:9092 \\ --add --allow-principal User:Alice \\ --producer \\ --resource-pattern-type prefixed --topic acme.infosec. \u60a8\u53ef\u4ee5\u7c7b\u4f3c\u5730\u4f7f\u7528\u6b64\u65b9\u6cd5\u6765\u9694\u79bb\u540c\u4e00\u5171\u4eab\u96c6\u7fa4\u4e0a\u7684\u4e0d\u540c\u5ba2\u6237\u3002","title":"\u4fdd\u62a4\u96c6\u7fa4\u548c\u4e3b\u9898\uff1a\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u3001\u52a0\u5bc6"},{"location":"6/#_37","text":"\u591a\u79df\u6237\u96c6\u7fa4\u901a\u5e38\u5e94\u914d\u7f6e \u914d\u989d \uff0c\u4ee5\u9632\u6b62\u7528\u6237\uff08\u79df\u6237\uff09\u5360\u7528\u8fc7\u591a\u96c6\u7fa4\u8d44\u6e90\uff0c\u4f8b\u5982\u5f53\u4ed6\u4eec\u5c1d\u8bd5\u5199\u5165\u6216\u8bfb\u53d6\u5927\u91cf\u6570\u636e\u65f6\uff0c\u6216\u4ee5\u8fc7\u9ad8\u7684\u901f\u7387\u5411\u4ee3\u7406\u521b\u5efa\u8bf7\u6c42\u65f6\u3002\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7f51\u7edc\u9971\u548c\u3001\u5784\u65ad\u4ee3\u7406\u8d44\u6e90\u5e76\u5f71\u54cd\u5176\u4ed6\u5ba2\u6237\u7aef\u2014\u2014\u6240\u6709\u8fd9\u4e9b\u90fd\u662f\u60a8\u5e0c\u671b\u5728\u5171\u4eab\u73af\u5883\u4e2d\u907f\u514d\u7684\u3002 \u5ba2\u6237\u7aef\u914d\u989d\uff1a Kafka \u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684\uff08\u6bcf\u7528\u6237\u4e3b\u4f53\uff09\u5ba2\u6237\u7aef\u914d\u989d\u3002\u7531\u4e8e\u5ba2\u6237\u7aef\u7684\u914d\u989d\u4e0e\u5ba2\u6237\u7aef\u5199\u5165\u6216\u8bfb\u53d6\u54ea\u4e2a\u4e3b\u9898\u65e0\u5173\uff0c\u56e0\u6b64\u5b83\u4eec\u662f\u5728\u591a\u79df\u6237\u96c6\u7fa4\u4e2d\u5206\u914d\u8d44\u6e90\u7684\u4fbf\u6377\u4e14\u6709\u6548\u7684\u5de5\u5177\u3002 \u4f8b\u5982\uff0c\u8bf7\u6c42\u901f\u7387\u914d\u989d\u901a\u8fc7\u9650\u5236\u4ee3\u7406\u5728 \u8bf7\u6c42\u5904\u7406\u8def\u5f84 \u4e0a\u82b1\u8d39\u7684\u65f6\u95f4\u6765\u5e2e\u52a9\u9650\u5236\u7528\u6237\u5bf9\u4ee3\u7406 CPU \u4f7f\u7528\u7387\u7684\u5f71\u54cd \u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5728\u591a\u79df\u6237\u96c6\u7fa4\u4e2d\uff0c\u4f7f\u7528\u8bf7\u6c42\u901f\u7387\u914d\u989d\u9694\u79bb\u7528\u6237\u6bd4\u8bbe\u7f6e\u4f20\u5165/\u4f20\u51fa\u7f51\u7edc\u5e26\u5bbd\u914d\u989d\u5f71\u54cd\u66f4\u5927\uff0c\u56e0\u4e3a\u7528\u4e8e\u5904\u7406\u8bf7\u6c42\u7684\u4ee3\u7406 CPU \u4f7f\u7528\u7387\u8fc7\u9ad8\u4f1a\u964d\u4f4e\u6709\u6548\u5e26\u5bbdbroker\u53ef\u4ee5\u63d0\u4f9b\u670d\u52a1\u3002\u6b64\u5916\uff0c\u7ba1\u7406\u5458\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u4e3b\u9898\u64cd\u4f5c\u7684\u914d\u989d\uff08\u4f8b\u5982\u521b\u5efa\u3001\u5220\u9664\u548c\u66f4\u6539\uff09\uff0c\u4ee5\u9632\u6b62 Kafka \u96c6\u7fa4\u56e0\u9ad8\u5e76\u53d1\u4e3b\u9898\u64cd\u4f5c\u800c\u4e0d\u582a\u91cd\u8d1f\uff08\u8bf7\u53c2\u9605 KIP-599 \u548c\u914d\u989d\u7c7b\u578b controller_mutation_rate \uff09\u3002 \u670d\u52a1\u5668\u914d\u989d\uff1a Kafka\u8fd8\u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684broker\u7aef\u914d\u989d\u3002 \u4f8b\u5982\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u8bbe\u7f6e\u4ee3\u7406\u63a5\u53d7\u65b0\u8fde\u63a5\u7684 \u901f\u7387\u9650\u5236\u3001\u8bbe\u7f6e \u6bcf\u4e2a\u4ee3\u7406\u7684\u6700\u5927\u8fde\u63a5\u6570\u6216\u8bbe\u7f6e\u5141\u8bb8 \u6765\u81ea\u7279\u5b9a IP \u5730\u5740\u7684 \u6700\u5927\u8fde\u63a5\u6570\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u914d\u989d\u6982\u8ff0 \u548c \u5982\u4f55\u8bbe\u7f6e\u914d\u989d \u3002","title":"\u9694\u79bb\u79df\u6237\uff1a\u914d\u989d\u3001\u901f\u7387\u9650\u5236\u3001\u9650\u5236"},{"location":"6/#_38","text":"\u76d1\u63a7 \u662f\u4e00\u4e2a\u66f4\u5e7f\u6cdb\u7684\u4e3b\u9898\uff0c\u5728\u6587\u6863\u7684 \u5176\u4ed6\u90e8\u5206 \u4e2d\u6709\u4ecb\u7ecd\u3002\u4efb\u4f55 Kafka \u73af\u5883\uff08\u5c24\u5176\u662f\u591a\u79df\u6237\u73af\u5883\uff09\u7684\u7ba1\u7406\u5458\u90fd\u5e94\u6839\u636e\u8fd9\u4e9b\u8bf4\u660e\u8bbe\u7f6e\u76d1\u63a7\u3002Kafka \u652f\u6301\u5e7f\u6cdb\u7684\u6307\u6807\uff0c\u4f8b\u5982\u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\u5931\u8d25\u7387\u3001\u8bf7\u6c42\u5ef6\u8fdf\u3001\u6d88\u8d39\u8005\u6ede\u540e\u3001\u6d88\u8d39\u8005\u7ec4\u603b\u6570\u3001\u4e0a\u4e00\u8282\u4e2d\u63cf\u8ff0\u7684\u914d\u989d\u6307\u6807\u7b49\u7b49\u3002 \u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u76d1\u63a7\u914d\u7f6e\u4e3a\u8ddf\u8e2a\u4e3b\u9898\u5206\u533a\u7684\u5927\u5c0f\uff08\u4f7f\u7528 JMX \u6307\u6807 kafka.log.Log.Size.<TOPIC-NAME> \uff09\uff0c\u4ece\u800c\u8ddf\u8e2a\u4e3b\u9898\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u7684\u603b\u5927\u5c0f\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u5f53\u5171\u4eab\u96c6\u7fa4\u4e0a\u7684\u79df\u6237\u5373\u5c06\u4f7f\u7528\u8fc7\u591a\u5b58\u50a8\u7a7a\u95f4\u65f6\u53d1\u51fa\u7684\u8b66\u62a5\u3002","title":"\u76d1\u63a7\u4e0e\u8ba1\u91cf"},{"location":"6/#_39","text":"Kafka \u5141\u8bb8\u60a8\u8de8\u4e0d\u540c\u96c6\u7fa4\u5171\u4eab\u6570\u636e\uff0c\u8fd9\u4e9b\u96c6\u7fa4\u53ef\u80fd\u4f4d\u4e8e\u4e0d\u540c\u7684\u5730\u7406\u533a\u57df\u3001\u6570\u636e\u4e2d\u5fc3\u7b49\u3002\u9664\u4e86\u707e\u96be\u6062\u590d\u7b49\u7528\u4f8b\u4e4b\u5916\uff0c\u5f53\u591a\u79df\u6237\u8bbe\u7f6e\u9700\u8981\u96c6\u7fa4\u95f4\u6570\u636e\u5171\u4eab\u65f6\uff0c\u6b64\u529f\u80fd\u975e\u5e38\u6709\u7528\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u5f02\u5730\u590d\u5236\uff08\u8de8\u96c6\u7fa4\u6570\u636e\u955c\u50cf\uff09 \u90e8\u5206\u3002","title":"\u591a\u79df\u6237\u548c\u5730\u7406\u590d\u5236"},{"location":"6/#_40","text":"\u6570\u636e\u5408\u7ea6\uff1a \u60a8\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u4e8b\u4ef6\u6a21\u5f0f\u5728\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u4e4b\u95f4\u5b9a\u4e49\u6570\u636e\u5951\u7ea6\u3002\u8fd9\u786e\u4fdd\u5199\u5165 Kafka \u7684\u4e8b\u4ef6\u59cb\u7ec8\u53ef\u4ee5\u518d\u6b21\u6b63\u786e\u8bfb\u53d6\uff0c\u5e76\u9632\u6b62\u5199\u5165\u683c\u5f0f\u9519\u8bef\u6216\u635f\u574f\u7684\u4e8b\u4ef6\u3002\u5b9e\u73b0\u6b64\u76ee\u6807\u7684\u6700\u4f73\u65b9\u6cd5\u662f\u4e0e\u96c6\u7fa4\u4e00\u8d77\u90e8\u7f72\u6240\u8c13\u7684\u6a21\u5f0f\u6ce8\u518c\u8868\u3002\uff08Kafka \u4e0d\u5305\u542b\u6a21\u5f0f\u6ce8\u518c\u8868\uff0c\u4f46\u6709\u53ef\u7528\u7684\u7b2c\u4e09\u65b9\u5b9e\u73b0\u3002\uff09\u6a21\u5f0f\u6ce8\u518c\u8868\u7ba1\u7406\u4e8b\u4ef6\u6a21\u5f0f\u5e76\u5c06\u6a21\u5f0f\u6620\u5c04\u5230\u4e3b\u9898\uff0c\u4ee5\u4fbf\u751f\u4ea7\u8005\u77e5\u9053\u54ea\u4e9b\u4e3b\u9898\u6b63\u5728\u63a5\u53d7\u54ea\u4e9b\u7c7b\u578b\uff08\u6a21\u5f0f\uff09\u7684\u4e8b\u4ef6\uff0c\u4ee5\u53ca\u6d88\u8d39\u8005\u77e5\u9053\u5982\u4f55\u8bfb\u53d6\u548c\u89e3\u6790\u4e3b\u9898\u4e2d\u7684\u4e8b\u4ef6\u3002\u4e00\u4e9b\u6ce8\u518c\u8868\u5b9e\u73b0\u63d0\u4f9b\u4e86\u66f4\u591a\u529f\u80fd\uff0c\u4f8b\u5982\u67b6\u6784\u6f14\u53d8\u3001\u5b58\u50a8\u6240\u6709\u67b6\u6784\u7684\u5386\u53f2\u8bb0\u5f55\u4ee5\u53ca\u67b6\u6784\u517c\u5bb9\u6027\u8bbe\u7f6e\u3002","title":"\u8fdb\u4e00\u6b65\u7684\u8003\u8651"},{"location":"6/#65-kafka","text":"","title":"6.5 Kafka\u914d\u7f6e"},{"location":"6/#_41","text":"\u6700\u91cd\u8981\u7684\u751f\u4ea7\u8005\u914d\u7f6e\u662f\uff1a \u786e\u8ba4 \u538b\u7f29 \u6279\u91cf\u5927\u5c0f \u6700\u91cd\u8981\u7684\u6d88\u8d39\u8005\u914d\u7f6e\u662f\u83b7\u53d6\u5927\u5c0f\u3002 \u6240\u6709\u914d\u7f6e\u90fd\u8bb0\u5f55\u5728 \u914d\u7f6e \u90e8\u5206\u4e2d\u3002","title":"\u91cd\u8981\u7684\u5ba2\u6237\u7aef\u914d\u7f6e"},{"location":"6/#_42","text":"\u4ee5\u4e0b\u662f\u751f\u4ea7\u670d\u52a1\u5668\u914d\u7f6e\u793a\u4f8b\uff1a # ZooKeeper zookeeper.connect=[list of ZooKeeper servers] # Log configuration num.partitions=8 default.replication.factor=3 log.dir=[List of directories. Kafka should have its own dedicated disk(s) or SSD(s).] # Other configurations broker.id=[An integer. Start with 0 and increment by 1 for each new broker.] listeners=[list of listeners] auto.create.topics.enable=false min.insync.replicas=2 queued.max.requests=[number of concurrent requests] \u6211\u4eec\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u5728\u4e0d\u540c\u7684\u7528\u4f8b\u4e4b\u95f4\u5b58\u5728\u5f88\u5927\u5dee\u5f02\u3002","title":"\u751f\u4ea7\u670d\u52a1\u5668\u914d\u7f6e"},{"location":"6/#66-java","text":"\u652f\u6301 Java 8\u3001Java 11 \u548c Java 17\u3002\u8bf7\u6ce8\u610f\uff0c\u81ea Apache Kafka 3.0 \u8d77\uff0cJava 8 \u652f\u6301\u5df2\u88ab\u5f03\u7528\uff0c\u5e76\u5c06\u5728 Apache Kafka 4.0 \u4e2d\u5220\u9664\u3002\u5982\u679c\u542f\u7528 TLS\uff0cJava 11 \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u6027\u80fd\u4f1a\u663e\u7740\u63d0\u9ad8\uff0c\u56e0\u6b64\u5f3a\u70c8\u63a8\u8350\u5b83\u4eec\uff08\u5b83\u4eec\u8fd8\u5305\u62ec\u8bb8\u591a\u5176\u4ed6\u6027\u80fd\u6539\u8fdb\uff1aG1GC\u3001CRC32C\u3001\u7d27\u51d1\u5b57\u7b26\u4e32\u3001\u7ebf\u7a0b\u672c\u5730\u63e1\u624b\u7b49\uff09\u3002\u4ece\u5b89\u5168\u89d2\u5ea6\u6765\u770b\uff0c\u6211\u4eec\u63a8\u8350\u6700\u65b0\u53d1\u5e03\u7684\u8865\u4e01\u7248\u672c\uff0c\u56e0\u4e3a\u65e7\u7684\u514d\u8d39\u7248\u672c\u5df2\u62ab\u9732\u4e86\u5b89\u5168\u6f0f\u6d1e\u3002\u4f7f\u7528\u57fa\u4e8e OpenJDK \u7684 Java \u5b9e\u73b0\uff08\u5305\u62ec Oracle JDK\uff09\u8fd0\u884c Kafka \u7684\u5178\u578b\u53c2\u6570\u662f\uff1a -Xmx6g -Xms6g -XX:MetaspaceSize=96m -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:G1HeapRegionSize=16M -XX:MinMetaspaceFreeRatio=50 -XX:MaxMetaspaceFreeRatio=80 -XX:+ExplicitGCInvokesConcurrent \u4f5c\u4e3a\u53c2\u8003\uff0c\u4ee5\u4e0b\u662f\u4f7f\u7528\u4e0a\u8ff0 Java \u53c2\u6570\u7684 LinkedIn \u6700\u7e41\u5fd9\u96c6\u7fa4\u4e4b\u4e00\uff08\u9ad8\u5cf0\u671f\uff09\u7684\u7edf\u8ba1\u6570\u636e\uff1a 60 \u540dbroker 50k \u5206\u533a\uff08\u590d\u5236\u56e0\u5b50 2\uff09 800k \u6d88\u606f/\u79d2 \u5165\u7ad9 300 MB/\u79d2\uff0c\u51fa\u7ad9 1 GB/\u79d2\u4ee5\u4e0a \u8be5\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u4ee3\u7406\u7684 90% GC \u6682\u505c\u65f6\u95f4\u7ea6\u4e3a 21 \u6beb\u79d2\uff0c\u6bcf\u79d2\u5c11\u4e8e 1 \u6b21\u5e74\u8f7b GC\u3002","title":"6.6 Java\u7248\u672c"},{"location":"6/#67","text":"\u6211\u4eec\u4f7f\u7528\u5177\u6709 24GB \u5185\u5b58\u7684\u53cc\u56db\u6838 Intel Xeon \u673a\u5668\u3002 \u60a8\u9700\u8981\u8db3\u591f\u7684\u5185\u5b58\u6765\u7f13\u51b2\u6d3b\u52a8\u7684\u8bfb\u53d6\u5668\u548c\u5199\u5165\u5668\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5047\u8bbe\u60a8\u5e0c\u671b\u80fd\u591f\u7f13\u51b2 30 \u79d2\u5e76\u5c06\u5185\u5b58\u9700\u6c42\u8ba1\u7b97\u4e3a write_throughput*30 \u6765\u5bf9\u5185\u5b58\u9700\u6c42\u8fdb\u884c\u7c97\u7565\u4f30\u8ba1\u3002 \u78c1\u76d8\u541e\u5410\u91cf\u5f88\u91cd\u8981\u3002\u6211\u4eec\u6709 8x7200 rpm SATA \u9a71\u52a8\u5668\u3002\u4e00\u822c\u6765\u8bf4\u78c1\u76d8\u541e\u5410\u91cf\u662f\u6027\u80fd\u74f6\u9888\uff0c\u78c1\u76d8\u8d8a\u591a\u8d8a\u597d\u3002\u6839\u636e\u60a8\u914d\u7f6e\u5237\u65b0\u884c\u4e3a\u7684\u65b9\u5f0f\uff0c\u60a8\u53ef\u80fd\u4f1a\u4e5f\u53ef\u80fd\u4e0d\u4f1a\u4ece\u66f4\u6602\u8d35\u7684\u78c1\u76d8\u4e2d\u53d7\u76ca\uff08\u5982\u679c\u60a8\u7ecf\u5e38\u5f3a\u5236\u5237\u65b0\uff0c\u90a3\u4e48\u66f4\u9ad8 RPM \u7684 SAS \u9a71\u52a8\u5668\u53ef\u80fd\u4f1a\u66f4\u597d\uff09\u3002","title":"6.7 \u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf"},{"location":"6/#_43","text":"Kafka\u5e94\u8be5\u53ef\u4ee5\u5728\u4efb\u4f55unix\u7cfb\u7edf\u4e0a\u8fd0\u884c\u826f\u597d\uff0c\u5e76\u4e14\u5df2\u7ecf\u5728Linux\u548cSolaris\u4e0a\u8fdb\u884c\u4e86\u6d4b\u8bd5\u3002 \u6211\u4eec\u53d1\u73b0\u5728 Windows \u4e0a\u8fd0\u884c\u65f6\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u5e76\u4e14 Windows \u76ee\u524d\u4e0d\u662f\u4e00\u4e2a\u5f97\u5230\u826f\u597d\u652f\u6301\u7684\u5e73\u53f0\uff0c\u4f46\u6211\u4eec\u5f88\u4e50\u610f\u5bf9\u6b64\u8fdb\u884c\u66f4\u6539\u3002 \u5b83\u4e0d\u592a\u53ef\u80fd\u9700\u8981\u592a\u591a\u64cd\u4f5c\u7cfb\u7edf\u7ea7\u522b\u7684\u8c03\u6574\uff0c\u4f46\u5b58\u5728\u4e09\u4e2a\u6f5c\u5728\u91cd\u8981\u7684\u64cd\u4f5c\u7cfb\u7edf\u7ea7\u522b\u914d\u7f6e\uff1a \u6587\u4ef6\u63cf\u8ff0\u7b26\u9650\u5236\uff1aKafka \u4f7f\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26\u6765\u8868\u793a\u65e5\u5fd7\u6bb5\u548c\u6253\u5f00\u7684\u8fde\u63a5\u3002\u5982\u679c\u4ee3\u7406\u6258\u7ba1\u8bb8\u591a\u5206\u533a\uff0c\u8bf7\u8003\u8651\u4ee3\u7406\u9664\u4e86\u4ee3\u7406\u5efa\u7acb\u7684\u8fde\u63a5\u6570\u4e4b\u5916\uff0c\u8fd8\u81f3\u5c11\u9700\u8981 (number_of_partitions)*(partition_size/segment_size) \u6765\u8ddf\u8e2a\u6240\u6709\u65e5\u5fd7\u6bb5\u3002\u6211\u4eec\u5efa\u8bae\u4ee3\u7406\u8fdb\u7a0b\u81f3\u5c11\u4f7f\u7528 100000 \u4e2a\u5141\u8bb8\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4f5c\u4e3a\u8d77\u70b9\u3002\u6ce8\u610f\uff1ammap() \u51fd\u6570\u6dfb\u52a0\u5bf9\u4e0e\u6587\u4ef6\u63cf\u8ff0\u7b26 fildes \u5173\u8054\u7684\u6587\u4ef6\u7684\u989d\u5916\u5f15\u7528\uff0c\u8be5\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e0a\u7684\u540e\u7eed close() \u4e0d\u4f1a\u5220\u9664\u8be5\u5f15\u7528\u3002\u5f53\u4e0d\u518d\u6709\u5230\u8be5\u6587\u4ef6\u7684\u6620\u5c04\u65f6\uff0c\u8be5\u5f15\u7528\u5c06\u88ab\u5220\u9664\u3002 \u6700\u5927\u5957\u63a5\u5b57\u7f13\u51b2\u533a\u5927\u5c0f\uff1a\u53ef\u4ee5\u589e\u52a0\u4ee5\u5b9e\u73b0\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u7684\u9ad8\u6027\u80fd\u6570\u636e\u4f20\u8f93\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002 \u8fdb\u7a0b\u53ef\u4ee5\u62e5\u6709\u7684\u5185\u5b58\u6620\u5c04\u533a\u57df\u7684\u6700\u5927\u6570\u91cf\uff08\u4e5f\u79f0\u4e3a vm.max_map_count\uff09\u3002 \u8bf7\u53c2\u9605 Linux \u5185\u6838\u6587\u6863 \u3002\u5728\u8003\u8651\u4ee3\u7406\u53ef\u80fd\u62e5\u6709\u7684\u6700\u5927\u5206\u533a\u6570\u65f6\uff0c\u60a8\u5e94\u8be5\u7559\u610f\u8fd9\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7ea7\u522b\u7684\u5c5e\u6027\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u8bb8\u591a Linux \u7cfb\u7edf\u4e0a\uff0cvm.max_map_count \u7684\u503c\u7ea6\u4e3a 65535\u3002\u6bcf\u4e2a\u5206\u533a\u5206\u914d\u7684\u6bcf\u4e2a\u65e5\u5fd7\u6bb5\u90fd\u9700\u8981\u4e00\u5bf9\u7d22\u5f15/\u65f6\u95f4\u7d22\u5f15\u6587\u4ef6\uff0c\u5e76\u4e14\u6bcf\u4e2a\u6587\u4ef6\u6d88\u8017 1 \u4e2a\u6620\u5c04\u533a\u57df\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6bcf\u4e2a\u65e5\u5fd7\u6bb5\u4f7f\u75282\u4e2a\u5730\u56fe\u533a\u57df\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u5206\u533a\u81f3\u5c11\u9700\u8981 2 \u4e2a\u6620\u5c04\u533a\u57df\uff0c\u53ea\u8981\u5b83\u6258\u7ba1\u5355\u4e2a\u65e5\u5fd7\u6bb5\u5373\u53ef\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u4ee3\u7406\u4e0a\u521b\u5efa 50000 \u4e2a\u5206\u533a\u5c06\u5bfc\u81f4\u5206\u914d 100000 \u4e2a\u6620\u5c04\u533a\u57df\uff0c\u5e76\u53ef\u80fd\u5728\u5177\u6709\u9ed8\u8ba4 vm.max_map_count \u7684\u7cfb\u7edf\u4e0a\u5bfc\u81f4\u4ee3\u7406\u5d29\u6e83\u5e76\u51fa\u73b0 OutOfMemoryError\uff08\u6620\u5c04\u5931\u8d25\uff09\u3002\u8bf7\u8bb0\u4f4f\uff0c\u6bcf\u4e2a\u5206\u533a\u7684\u65e5\u5fd7\u6bb5\u6570\u6839\u636e\u6bb5\u5927\u5c0f\u3001\u8d1f\u8f7d\u5f3a\u5ea6\u3001\u4fdd\u7559\u7b56\u7565\u4ee5\u53ca\u901a\u5e38\u60c5\u51b5\u4e0b\u7684\u53d8\u5316\u800c\u53d8\u5316","title":"\u64cd\u4f5c\u7cfb\u7edf"},{"location":"6/#_44","text":"\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u591a\u4e2a\u9a71\u52a8\u5668\u6765\u83b7\u5f97\u826f\u597d\u7684\u541e\u5410\u91cf\uff0c\u5e76\u4e14\u4e0d\u8981\u4e0e\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6216\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u6587\u4ef6\u7cfb\u7edf\u6d3b\u52a8\u5171\u4eab\u7528\u4e8e Kafka \u6570\u636e\u7684\u76f8\u540c\u9a71\u52a8\u5668\uff0c\u4ee5\u786e\u4fdd\u826f\u597d\u7684\u5ef6\u8fdf\u3002\u60a8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u9a71\u52a8\u5668\u4e00\u8d77 RAID \u5230\u5355\u4e2a\u5377\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u9a71\u52a8\u5668\u683c\u5f0f\u5316\u5e76\u5b89\u88c5\u4e3a\u5176\u81ea\u5df1\u7684\u76ee\u5f55\u3002\u7531\u4e8e Kafka \u5177\u6709\u590d\u5236\u529f\u80fd\uff0c\u56e0\u6b64 RAID \u63d0\u4f9b\u7684\u5197\u4f59\u4e5f\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u7ea7\u522b\u63d0\u4f9b\u3002\u8fd9\u79cd\u9009\u62e9\u6709\u51e0\u4e2a\u6743\u8861\u3002 \u5982\u679c\u914d\u7f6e\u591a\u4e2a\u6570\u636e\u76ee\u5f55\uff0c\u5206\u533a\u5c06\u5faa\u73af\u5206\u914d\u7ed9\u6570\u636e\u76ee\u5f55\u3002\u6bcf\u4e2a\u5206\u533a\u5c06\u5b8c\u5168\u4f4d\u4e8e\u4e00\u4e2a\u6570\u636e\u76ee\u5f55\u4e2d\u3002\u5982\u679c\u5206\u533a\u4e4b\u95f4\u7684\u6570\u636e\u6ca1\u6709\u5f88\u597d\u5730\u5e73\u8861\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u78c1\u76d8\u4e4b\u95f4\u7684\u8d1f\u8f7d\u4e0d\u5e73\u8861\u3002 RAID \u5728\u5e73\u8861\u78c1\u76d8\u4e4b\u95f4\u7684\u8d1f\u8f7d\u65b9\u9762\u53ef\u80fd\u4f1a\u505a\u5f97\u66f4\u597d\uff08\u5c3d\u7ba1\u770b\u8d77\u6765\u5e76\u4e0d\u603b\u662f\u5982\u6b64\uff09\uff0c\u56e0\u4e3a\u5b83\u5728\u8f83\u4f4e\u7ea7\u522b\u4e0a\u5e73\u8861\u8d1f\u8f7d\u3002RAID \u7684\u4e3b\u8981\u7f3a\u70b9\u662f\u5b83\u901a\u5e38\u4f1a\u4e25\u91cd\u5f71\u54cd\u5199\u5165\u541e\u5410\u91cf\u5e76\u51cf\u5c11\u53ef\u7528\u78c1\u76d8\u7a7a\u95f4\u3002 RAID \u7684\u53e6\u4e00\u4e2a\u6f5c\u5728\u597d\u5904\u662f\u80fd\u591f\u5bb9\u5fcd\u78c1\u76d8\u6545\u969c\u3002\u7136\u800c\uff0c\u6211\u4eec\u7684\u7ecf\u9a8c\u662f\uff0c\u91cd\u5efa RAID \u9635\u5217\u7684 I/O \u5bc6\u96c6\u7a0b\u5ea6\u5f88\u9ad8\uff0c\u4ee5\u81f3\u4e8e\u5b83\u4f1a\u6709\u6548\u5730\u7981\u7528\u670d\u52a1\u5668\uff0c\u56e0\u6b64\u8fd9\u5e76\u4e0d\u80fd\u63d0\u4f9b\u592a\u591a\u771f\u6b63\u7684\u53ef\u7528\u6027\u6539\u8fdb\u3002","title":"\u78c1\u76d8\u548c\u6587\u4ef6\u7cfb\u7edf"},{"location":"6/#_45","text":"Kafka \u603b\u662f\u7acb\u5373\u5c06\u6240\u6709\u6570\u636e\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u652f\u6301\u914d\u7f6e\u5237\u65b0\u7b56\u7565\u7684\u529f\u80fd\uff0c\u8be5\u7b56\u7565\u63a7\u5236\u4f55\u65f6\u4f7f\u7528\u5237\u65b0\u5c06\u6570\u636e\u5f3a\u5236\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\u4e2d\u53d6\u51fa\u5e76\u5199\u5165\u78c1\u76d8\u3002\u53ef\u4ee5\u63a7\u5236\u6b64\u5237\u65b0\u7b56\u7565\uff0c\u4ee5\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u6216\u5728\u5199\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u6d88\u606f\u540e\u5f3a\u5236\u5c06\u6570\u636e\u5199\u5165\u78c1\u76d8\u3002\u6b64\u914d\u7f6e\u6709\u591a\u79cd\u9009\u62e9\u3002 Kafka \u6700\u7ec8\u5fc5\u987b\u8c03\u7528 fsync \u624d\u80fd\u77e5\u9053\u6570\u636e\u5df2\u5237\u65b0\u3002\u5f53\u4ece\u4efb\u4f55\u672a\u77e5\u7684 fsync \u65e5\u5fd7\u6bb5\u7684\u5d29\u6e83\u4e2d\u6062\u590d\u65f6\uff0cKafka \u5c06\u901a\u8fc7\u68c0\u67e5\u5176 CRC \u6765\u68c0\u67e5\u6bcf\u6761\u6d88\u606f\u7684\u5b8c\u6574\u6027\uff0c\u5e76\u91cd\u5efa\u968f\u9644\u7684\u504f\u79fb\u91cf\u7d22\u5f15\u6587\u4ef6\uff0c\u4f5c\u4e3a\u542f\u52a8\u65f6\u6267\u884c\u7684\u6062\u590d\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\u3002 \u8bf7\u6ce8\u610f\uff0cKafka \u4e2d\u7684\u6301\u4e45\u6027\u4e0d\u9700\u8981\u5c06\u6570\u636e\u540c\u6b65\u5230\u78c1\u76d8\uff0c\u56e0\u4e3a\u6545\u969c\u8282\u70b9\u59cb\u7ec8\u4f1a\u4ece\u5176\u526f\u672c\u4e2d\u6062\u590d\u3002 \u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u5237\u65b0\u8bbe\u7f6e\uff0c\u5b8c\u5168\u7981\u7528\u5e94\u7528\u7a0b\u5e8f fsync\u3002\u8fd9\u610f\u5473\u7740\u4f9d\u8d56\u64cd\u4f5c\u7cfb\u7edf\u5b8c\u6210\u7684\u540e\u53f0\u5237\u65b0\u548c Kafka \u81ea\u5df1\u7684\u540e\u53f0\u5237\u65b0\u3002\u8fd9\u4e3a\u5927\u591a\u6570\u7528\u9014\u63d0\u4f9b\u4e86\u6700\u597d\u7684\u7279\u6027\uff1a\u65e0\u9700\u8c03\u8282\u65cb\u94ae\u3001\u51fa\u8272\u7684\u541e\u5410\u91cf\u548c\u5ef6\u8fdf\u4ee5\u53ca\u5b8c\u5168\u6062\u590d\u4fdd\u8bc1\u3002\u6211\u4eec\u901a\u5e38\u8ba4\u4e3a\u590d\u5236\u63d0\u4f9b\u7684\u4fdd\u8bc1\u6bd4\u540c\u6b65\u5230\u672c\u5730\u78c1\u76d8\u66f4\u5f3a\uff0c\u4f46\u662f\u504f\u6267\u8005\u53ef\u80fd\u4ecd\u7136\u66f4\u559c\u6b22\u4e24\u8005\uff0c\u5e76\u4e14\u4ecd\u7136\u652f\u6301\u5e94\u7528\u7a0b\u5e8f\u7ea7 fsync \u7b56\u7565\u3002 \u4f7f\u7528\u5e94\u7528\u7a0b\u5e8f\u7ea7\u522b\u5237\u65b0\u8bbe\u7f6e\u7684\u7f3a\u70b9\u662f\uff0c\u5b83\u7684\u78c1\u76d8\u4f7f\u7528\u6a21\u5f0f\u6548\u7387\u8f83\u4f4e\uff08\u5b83\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u91cd\u65b0\u6392\u5e8f\u5199\u5165\u7684\u4f59\u5730\u8f83\u5c0f\uff09\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u5f15\u5165\u5ef6\u8fdf\uff0c\u56e0\u4e3a\u5927\u591a\u6570 Linux \u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684 fsync \u4f1a\u963b\u6b62\u5199\u5165\u6587\u4ef6\uff0c\u800c\u540e\u53f0\u5237\u65b0\u6267\u884c\u66f4\u7ec6\u7c92\u5ea6\u7684\u9875\u9762\u7ea7\u9501\u5b9a\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u60a8\u4e0d\u9700\u8981\u5bf9\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u4efb\u4f55\u4f4e\u7ea7\u8c03\u6574\uff0c\u4f46\u5728\u63a5\u4e0b\u6765\u7684\u51e0\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u5176\u4e2d\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u4ee5\u9632\u5b83\u6709\u7528\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5237\u65b0\u7ba1\u7406"},{"location":"6/#linux","text":"\u5728 Linux \u4e2d\uff0c\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u7684\u6570\u636e\u4fdd\u7559\u5728 \u9875\u9762\u7f13\u5b58 \u4e2d\uff0c\u76f4\u5230\u5fc5\u987b\u5c06\u5176\u5199\u51fa\u5230\u78c1\u76d8\uff08\u7531\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7ea7 fsync \u6216\u64cd\u4f5c\u7cfb\u7edf\u81ea\u8eab\u7684\u5237\u65b0\u7b56\u7565\uff09\u3002\u6570\u636e\u7684\u5237\u65b0\u662f\u7531\u4e00\u7ec4\u79f0\u4e3a pdflush \u7684\u540e\u53f0\u7ebf\u7a0b\uff08\u6216\u5728 2.6.32 \u540e\u7684\u5185\u6838\u4e2d\u7684\u201cflusher \u7ebf\u7a0b\u201d\uff09\u5b8c\u6210\u7684\u3002 Pdflush \u6709\u4e00\u4e2a\u53ef\u914d\u7f6e\u7684\u7b56\u7565\uff0c\u53ef\u4ee5\u63a7\u5236\u7f13\u5b58\u4e2d\u53ef\u4ee5\u4fdd\u7559\u591a\u5c11\u810f\u6570\u636e\u4ee5\u53ca\u5fc5\u987b\u5c06\u5176\u5199\u56de\u78c1\u76d8\u4e4b\u524d\u7684\u65f6\u95f4\u3002 \u6b64\u5904 \u63cf\u8ff0\u4e86\u8be5\u7b56\u7565\u3002\u5f53 Pdflush \u65e0\u6cd5\u8ddf\u4e0a\u6570\u636e\u5199\u5165\u7684\u901f\u7387\u65f6\uff0c\u6700\u7ec8\u4f1a\u5bfc\u81f4\u5199\u5165\u8fc7\u7a0b\u963b\u585e\uff0c\u4ece\u800c\u4ea7\u751f\u5199\u5165\u5ef6\u8fdf\uff0c\u4ece\u800c\u51cf\u6162\u6570\u636e\u7684\u79ef\u7d2f\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u67e5\u770b\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u7684\u5f53\u524d\u72b6\u6001 > \u732b /proc/meminfo \u8fd9\u4e9b\u503c\u7684\u542b\u4e49\u5728\u4e0a\u9762\u7684\u94fe\u63a5\u4e2d\u6709\u63cf\u8ff0\u3002 \u4e0e\u8fdb\u7a0b\u5185\u7f13\u5b58\u76f8\u6bd4\uff0c\u4f7f\u7528\u9875\u9762\u7f13\u5b58\u6765\u5b58\u50a8\u5c06\u5199\u51fa\u5230\u78c1\u76d8\u7684\u6570\u636e\u6709\u51e0\u4e2a\u4f18\u70b9\uff1a I/O \u8c03\u5ea6\u7a0b\u5e8f\u4f1a\u5c06\u8fde\u7eed\u7684\u5c0f\u5199\u5165\u6279\u91cf\u5408\u5e76\u4e3a\u66f4\u5927\u7684\u7269\u7406\u5199\u5165\uff0c\u4ece\u800c\u63d0\u9ad8\u541e\u5410\u91cf\u3002 I/O \u8c03\u5ea6\u7a0b\u5e8f\u5c06\u5c1d\u8bd5\u91cd\u65b0\u6392\u5e8f\u5199\u5165\uff0c\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u78c1\u76d8\u5934\u7684\u79fb\u52a8\uff0c\u4ece\u800c\u63d0\u9ad8\u541e\u5410\u91cf\u3002 \u5b83\u4f1a\u81ea\u52a8\u4f7f\u7528\u673a\u5668\u4e0a\u7684\u6240\u6709\u53ef\u7528\u5185\u5b58","title":"\u4e86\u89e3 Linux \u64cd\u4f5c\u7cfb\u7edf\u5237\u65b0\u884c\u4e3a"},{"location":"6/#_46","text":"Kafka \u4f7f\u7528\u78c1\u76d8\u4e0a\u7684\u5e38\u89c4\u6587\u4ef6\uff0c\u56e0\u6b64\u5b83\u5bf9\u7279\u5b9a\u6587\u4ef6\u7cfb\u7edf\u6ca1\u6709\u786c\u4f9d\u8d56\u3002\u7136\u800c\uff0c\u4f7f\u7528\u6700\u591a\u7684\u4e24\u4e2a\u6587\u4ef6\u7cfb\u7edf\u662f EXT4 \u548c XFS\u3002\u4ece\u5386\u53f2\u4e0a\u770b\uff0cEXT4 \u7684\u4f7f\u7528\u91cf\u8f83\u591a\uff0c\u4f46\u6700\u8fd1\u5bf9 XFS \u6587\u4ef6\u7cfb\u7edf\u7684\u6539\u8fdb\u8868\u660e\uff0c\u5b83\u5bf9\u4e8e Kafka \u5de5\u4f5c\u8d1f\u8f7d\u5177\u6709\u66f4\u597d\u7684\u6027\u80fd\u7279\u5f81\uff0c\u4e14\u4e0d\u5f71\u54cd\u7a33\u5b9a\u6027\u3002 \u4f7f\u7528\u5404\u79cd\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u548c\u6302\u8f7d\u9009\u9879\uff0c\u5728\u5177\u6709\u5927\u91cf\u6d88\u606f\u8d1f\u8f7d\u7684\u96c6\u7fa4\u4e0a\u6267\u884c\u6bd4\u8f83\u6d4b\u8bd5\u3002Kafka \u4e2d\u53d7\u76d1\u63a7\u7684\u4e3b\u8981\u6307\u6807\u662f\u201c\u8bf7\u6c42\u672c\u5730\u65f6\u95f4\u201d\uff0c\u8868\u793a\u8ffd\u52a0\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002XFS \u5e26\u6765\u4e86\u66f4\u597d\u7684\u672c\u5730\u65f6\u95f4\uff08\u5bf9\u4e8e\u6700\u4f73 EXT4 \u914d\u7f6e\uff0c\u672c\u5730\u65f6\u95f4\u4e3a 160 \u6beb\u79d2\uff0c\u800c 250 \u6beb\u79d2\u4ee5\u4e0a\uff09\uff0c\u5e76\u4e14\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u66f4\u77ed\u3002XFS \u6027\u80fd\u8fd8\u663e\u793a\u78c1\u76d8\u6027\u80fd\u7684\u53d8\u5316\u8f83\u5c0f\u3002","title":"\u6587\u4ef6\u7cfb\u7edf\u9009\u62e9"},{"location":"6/#_47","text":"\u5bf9\u4e8e\u7528\u4e8e\u6570\u636e\u76ee\u5f55\u7684\u4efb\u4f55\u6587\u4ef6\u7cfb\u7edf\uff0c\u5728 Linux \u7cfb\u7edf\u4e0a\uff0c\u5efa\u8bae\u5728\u6302\u8f7d\u65f6\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\uff1a noatime\uff1a\u6b64\u9009\u9879\u7981\u6b62\u5728\u8bfb\u53d6\u6587\u4ef6\u65f6\u66f4\u65b0\u6587\u4ef6\u7684 atime\uff08\u4e0a\u6b21\u8bbf\u95ee\u65f6\u95f4\uff09\u5c5e\u6027\u3002\u8fd9\u53ef\u4ee5\u6d88\u9664\u5927\u91cf\u7684\u6587\u4ef6\u7cfb\u7edf\u5199\u5165\uff0c\u7279\u522b\u662f\u5728\u5f15\u5bfc\u6d88\u8d39\u8005\u7684\u60c5\u51b5\u4e0b\u3002Kafka \u6839\u672c\u4e0d\u4f9d\u8d56 atime \u5c5e\u6027\uff0c\u56e0\u6b64\u7981\u7528\u5b83\u662f\u5b89\u5168\u7684\u3002","title":"\u4e00\u822c\u6587\u4ef6\u7cfb\u7edf\u6ce8\u91ca"},{"location":"6/#xfs","text":"XFS \u6587\u4ef6\u7cfb\u7edf\u5177\u6709\u5927\u91cf\u81ea\u52a8\u8c03\u6574\u529f\u80fd\uff0c\u56e0\u6b64\u65e0\u8bba\u662f\u5728\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u65f6\u8fd8\u662f\u5728\u6302\u8f7d\u65f6\uff0c\u90fd\u4e0d\u9700\u8981\u5bf9\u9ed8\u8ba4\u8bbe\u7f6e\u8fdb\u884c\u4efb\u4f55\u66f4\u6539\u3002\u552f\u4e00\u503c\u5f97\u8003\u8651\u7684\u8c03\u6574\u53c2\u6570\u662f\uff1a Largeio\uff1a\u8fd9\u4f1a\u5f71\u54cd stat \u8c03\u7528\u62a5\u544a\u7684\u9996\u9009 I/O \u5927\u5c0f\u3002\u867d\u7136\u8fd9\u53ef\u4ee5\u5728\u8f83\u5927\u7684\u78c1\u76d8\u5199\u5165\u4e0a\u5b9e\u73b0\u66f4\u9ad8\u7684\u6027\u80fd\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u5bf9\u6027\u80fd\u7684\u5f71\u54cd\u5f88\u5c0f\u6216\u6ca1\u6709\u5f71\u54cd\u3002 nobarrier\uff1a\u5bf9\u4e8e\u5177\u6709\u7535\u6c60\u652f\u6301\u7f13\u5b58\u7684\u5e95\u5c42\u8bbe\u5907\uff0c\u6b64\u9009\u9879\u53ef\u4ee5\u901a\u8fc7\u7981\u7528\u5b9a\u671f\u5199\u5165\u5237\u65b0\u6765\u63d0\u4f9b\u66f4\u9ad8\u7684\u6027\u80fd\u3002\u4f46\u662f\uff0c\u5982\u679c\u5e95\u5c42\u8bbe\u5907\u8868\u73b0\u826f\u597d\uff0c\u5b83\u5c06\u5411\u6587\u4ef6\u7cfb\u7edf\u62a5\u544a\u5b83\u4e0d\u9700\u8981\u5237\u65b0\uff0c\u5e76\u4e14\u6b64\u9009\u9879\u5c06\u4e0d\u8d77\u4f5c\u7528\u3002","title":"XFS \u6ce8\u91ca"},{"location":"6/#ext4","text":"EXT4 \u662f Kafka \u6570\u636e\u76ee\u5f55\u7684\u4e00\u4e2a\u53ef\u7528\u7684\u6587\u4ef6\u7cfb\u7edf\u9009\u62e9\uff0c\u4f46\u662f\u8981\u5145\u5206\u5229\u7528\u5b83\u7684\u6027\u80fd\u9700\u8981\u8c03\u6574\u591a\u4e2a\u5b89\u88c5\u9009\u9879\u3002\u6b64\u5916\uff0c\u8fd9\u4e9b\u9009\u9879\u5728\u6545\u969c\u60c5\u51b5\u4e0b\u901a\u5e38\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u5e76\u4e14\u4f1a\u5bfc\u81f4\u66f4\u591a\u7684\u6570\u636e\u4e22\u5931\u548c\u635f\u574f\u3002\u5bf9\u4e8e\u5355\u4e2a\u4ee3\u7406\u6545\u969c\uff0c\u8fd9\u5e76\u4e0d\u662f\u4ec0\u4e48\u5927\u95ee\u9898\uff0c\u56e0\u4e3a\u53ef\u4ee5\u64e6\u9664\u78c1\u76d8\u5e76\u4ece\u96c6\u7fa4\u91cd\u5efa\u526f\u672c\u3002\u5728\u591a\u6b21\u6545\u969c\u7684\u60c5\u51b5\u4e0b\uff0c\u4f8b\u5982\u65ad\u7535\uff0c\u8fd9\u53ef\u80fd\u610f\u5473\u7740\u5e95\u5c42\u6587\u4ef6\u7cfb\u7edf\uff08\u4ee5\u53ca\u6570\u636e\uff09\u635f\u574f\u4e14\u96be\u4ee5\u6062\u590d\u3002\u53ef\u4ee5\u8c03\u6574\u4ee5\u4e0b\u9009\u9879\uff1a data=writeback\uff1aExt4 \u9ed8\u8ba4\u4e3a data=ordered\uff0c\u8fd9\u5bf9\u67d0\u4e9b\u5199\u5165\u8bbe\u7f6e\u4e86\u5f3a\u987a\u5e8f\u3002Kafka \u4e0d\u9700\u8981\u8fd9\u79cd\u6392\u5e8f\uff0c\u56e0\u4e3a\u5b83\u5bf9\u6240\u6709\u672a\u5237\u65b0\u7684\u65e5\u5fd7\u8fdb\u884c\u975e\u5e38\u504f\u6267\u7684\u6570\u636e\u6062\u590d\u3002\u6b64\u8bbe\u7f6e\u6d88\u9664\u4e86\u6392\u5e8f\u9650\u5236\uff0c\u5e76\u4e14\u4f3c\u4e4e\u663e\u7740\u51cf\u5c11\u4e86\u5ef6\u8fdf\u3002 \u7981\u7528\u65e5\u5fd7\u8bb0\u5f55\uff1a\u65e5\u5fd7\u8bb0\u5f55\u662f\u4e00\u79cd\u6743\u8861\uff1a\u5b83\u4f7f\u670d\u52a1\u5668\u5d29\u6e83\u540e\u91cd\u65b0\u542f\u52a8\u901f\u5ea6\u66f4\u5feb\uff0c\u4f46\u5b83\u5f15\u5165\u4e86\u5927\u91cf\u989d\u5916\u7684\u9501\u5b9a\uff0c\u4ece\u800c\u589e\u52a0\u4e86\u5199\u5165\u6027\u80fd\u7684\u5dee\u5f02\u3002\u90a3\u4e9b\u4e0d\u5173\u5fc3\u91cd\u65b0\u542f\u52a8\u65f6\u95f4\u5e76\u5e0c\u671b\u51cf\u5c11\u5199\u5165\u5ef6\u8fdf\u5cf0\u503c\u7684\u4e3b\u8981\u6765\u6e90\u7684\u4eba\u53ef\u4ee5\u5b8c\u5168\u5173\u95ed\u65e5\u5fd7\u8bb0\u5f55\u3002 commit=num_secs\uff1a\u8fd9\u4f1a\u8c03\u6574 ext4 \u63d0\u4ea4\u5176\u5143\u6570\u636e\u65e5\u5fd7\u7684\u9891\u7387\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u8f83\u4f4e\u7684\u503c\u53ef\u4ee5\u51cf\u5c11\u5d29\u6e83\u671f\u95f4\u672a\u5237\u65b0\u6570\u636e\u7684\u4e22\u5931\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u66f4\u9ad8\u7684\u503c\u5c06\u63d0\u9ad8\u541e\u5410\u91cf\u3002 nobh\uff1a\u6b64\u8bbe\u7f6e\u63a7\u5236\u4f7f\u7528 data=writeback \u6a21\u5f0f\u65f6\u7684\u9644\u52a0\u6392\u5e8f\u4fdd\u8bc1\u3002\u8fd9\u5bf9\u4e8e Kafka \u6765\u8bf4\u5e94\u8be5\u662f\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u4f9d\u8d56\u4e8e\u5199\u5165\u987a\u5e8f\u5e76\u63d0\u9ad8\u4e86\u541e\u5410\u91cf\u548c\u5ef6\u8fdf\u3002 delalloc\uff1a\u5ef6\u8fdf\u5206\u914d\u610f\u5473\u7740\u6587\u4ef6\u7cfb\u7edf\u5728\u7269\u7406\u5199\u5165\u53d1\u751f\u4e4b\u524d\u907f\u514d\u5206\u914d\u4efb\u4f55\u5757\u3002\u8fd9\u5141\u8bb8 ext4 \u5206\u914d\u8f83\u5927\u7684\u8303\u56f4\u800c\u4e0d\u662f\u8f83\u5c0f\u7684\u9875\u9762\uff0c\u5e76\u6709\u52a9\u4e8e\u786e\u4fdd\u6570\u636e\u6309\u987a\u5e8f\u5199\u5165\u3002\u6b64\u529f\u80fd\u5bf9\u4e8e\u541e\u5410\u91cf\u975e\u5e38\u6709\u7528\u3002\u5b83\u4f3c\u4e4e\u786e\u5b9e\u6d89\u53ca\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e9b\u9501\u5b9a\uff0c\u8fd9\u589e\u52a0\u4e86\u4e00\u4e9b\u5ef6\u8fdf\u5dee\u5f02\u3002","title":"EXT4\u6ce8\u91ca"},{"location":"6/#kraft","text":"metadata.log.dir \u5f53 Kafka \u914d\u7f6e\u4e3a\u4f7f\u7528 KRaft \u65f6\uff0c\u63a7\u5236\u5668\u5c06\u96c6\u7fa4\u5143\u6570\u636e\u5b58\u50a8\u5728-- \u6216\u7b2c\u4e00\u4e2a\u65e5\u5fd7\u76ee\u5f55\uff08\u5982\u679c metadata.log.dir \u672a\u914d\u7f6e\uff09\u4e2d\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u3002 metadata.log.dir \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6587\u6863\u3002 \u5982\u679c\u7531\u4e8e\u786c\u4ef6\u6545\u969c\u6216\u9700\u8981\u66f4\u6362\u786c\u4ef6\u800c\u5bfc\u81f4\u96c6\u7fa4\u5143\u6570\u636e\u76ee\u5f55\u4e2d\u7684\u6570\u636e\u4e22\u5931\uff0c\u5219\u5728\u914d\u7f6e\u65b0\u7684\u63a7\u5236\u5668\u8282\u70b9\u65f6\u5e94\u5c0f\u5fc3\u3002\u5728\u5927\u591a\u6570\u63a7\u5236\u5668\u62e5\u6709\u6240\u6709\u63d0\u4ea4\u7684\u6570\u636e\u4e4b\u524d\uff0c\u4e0d\u5e94\u683c\u5f0f\u5316\u5e76\u542f\u52a8\u65b0\u7684\u63a7\u5236\u5668\u8282\u70b9\u3002\u8981\u786e\u5b9a\u5927\u591a\u6570\u63a7\u5236\u5668\u662f\u5426\u5177\u6709\u5df2\u63d0\u4ea4\u7684\u6570\u636e\uff0c\u8bf7\u8fd0\u884c\u8be5 kafka-metadata-quorum.sh \u5de5\u5177\u6765\u63cf\u8ff0\u590d\u5236\u72b6\u6001\uff1a > bin/kafka-metadata-quorum.sh --bootstrap-server broker_host:port describe --replication NodeId LogEndOffset Lag LastFetchTimestamp LastCaughtUpTimestamp Status 1 25806 0 1662500992757 1662500992757 Leader ... ... ... ... ... ... \u68c0\u67e5\u5e76\u7b49\u5f85\uff0c\u76f4\u5230 Lag \u5bf9\u4e8e\u5927\u591a\u6570\u63a7\u5236\u5668\u6765\u8bf4\u90fd\u5f88\u5c0f\u3002\u5982\u679c\u9886\u5bfc\u8005\u7684\u7ed3\u675f\u504f\u79fb\u91cf\u6ca1\u6709\u589e\u52a0\uff0c\u5219\u53ef\u4ee5\u7b49\u5230\u6ede\u540e\u4e3a 0 \u65f6\u624d\u83b7\u5f97\u591a\u6570\uff1b\u5426\u5219\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u6700\u65b0\u7684\u9886\u5bfc\u8005\u672b\u7aef\u504f\u79fb\u91cf\u5e76\u7b49\u5f85\u6240\u6709\u526f\u672c\u90fd\u5230\u8fbe\u5b83\u3002\u68c0\u67e5\u5e76\u7b49\u5f85\uff0c\u76f4\u5230\u5927\u591a\u6570\u63a7\u5236\u5668\u7684 LastFetchTimestamp \u548c\u5f7c\u6b64\u63a5\u8fd1\u3002 LastCaughtUpTimestamp \u6b64\u65f6\uff0c\u683c\u5f0f\u5316\u63a7\u5236\u5668\u7684\u5143\u6570\u636e\u65e5\u5fd7\u76ee\u5f55\u4f1a\u66f4\u5b89\u5168\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u547d\u4ee4\u6765\u5b8c\u6210 kafka-storage.sh \u3002 > bin/kafka-storage.sh format --cluster-id uuid --config server_properties \u4e0a\u9762\u7684\u547d\u4ee4\u53ef\u80fd bin/kafka-storage.sh format \u4f1a\u5931\u8d25\u5e76\u663e\u793a\u7c7b\u4f3c \u7684\u6d88\u606f Log directory ... is already formatted \u3002\u5f53\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f\u5e76\u4e14\u4ec5\u4e22\u5931\u5143\u6570\u636e\u65e5\u5fd7\u76ee\u5f55\u800c\u4e0d\u4e22\u5931\u5176\u4ed6\u76ee\u5f55\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5e76\u4e14\u53ea\u6709\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u624d\u80fd\u8fd0\u884c kafka-storage.sh format \u5e26\u6709\u8be5 --ignore-formatted \u9009\u9879\u7684\u547d\u4ee4\u3002 \u683c\u5f0f\u5316\u65e5\u5fd7\u76ee\u5f55\u540e\u542f\u52a8 KRaft \u63a7\u5236\u5668\u3002 > /bin/kafka-server-start.sh server_properties","title":"\u66f4\u6362 KRaft \u63a7\u5236\u5668\u78c1\u76d8"},{"location":"6/#68","text":"Kafka \u4f7f\u7528 Yammer Metrics \u5728\u670d\u52a1\u5668\u4e2d\u8fdb\u884c\u6307\u6807\u62a5\u544a\u3002Java \u5ba2\u6237\u7aef\u4f7f\u7528 Kafka Metrics\uff0c\u8fd9\u662f\u4e00\u4e2a\u5185\u7f6e\u6307\u6807\u6ce8\u518c\u8868\uff0c\u53ef\u6700\u5927\u7a0b\u5ea6\u5730\u51cf\u5c11\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u4f20\u9012\u4f9d\u8d56\u6027\u3002\u4e24\u8005\u90fd\u901a\u8fc7 JMX \u516c\u5f00\u6307\u6807\uff0c\u5e76\u4e14\u53ef\u4ee5\u914d\u7f6e\u4e3a\u4f7f\u7528\u53ef\u63d2\u5165\u7edf\u8ba1\u62a5\u544a\u5668\u62a5\u544a\u7edf\u8ba1\u4fe1\u606f\u4ee5\u8fde\u63a5\u5230\u60a8\u7684\u76d1\u63a7\u7cfb\u7edf\u3002 \u6240\u6709 Kafka \u901f\u7387\u6307\u6807\u90fd\u6709\u4e00\u4e2a\u76f8\u5e94\u7684\u7d2f\u79ef\u8ba1\u6570\u6307\u6807\uff0c\u540e\u7f00\u4e3a -total \u3002\u4f8b\u5982\uff0c records-consumed-rate \u6709\u4e00\u4e2a\u540d\u4e3a \u7684\u76f8\u5e94\u6307\u6807 records-consumed-total \u3002 \u67e5\u770b\u53ef\u7528\u6307\u6807\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u542f\u52a8 jconsole \u5e76\u5c06\u5176\u6307\u5411\u6b63\u5728\u8fd0\u884c\u7684 kafka \u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\uff1b\u8fd9\u5c06\u5141\u8bb8\u4f7f\u7528 JMX \u6d4f\u89c8\u6240\u6709\u6307\u6807\u3002","title":"6.8 \u76d1\u63a7"},{"location":"6/#jmx","text":"Apache Kafka \u9ed8\u8ba4\u7981\u7528\u8fdc\u7a0b JMX\u3002 JMX_PORT \u60a8\u53ef\u4ee5\u901a\u8fc7\u4e3a\u4f7f\u7528 CLI\u542f\u52a8\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u6216\u6807\u51c6 Java \u7cfb\u7edf\u5c5e\u6027\u6765\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u542f\u7528\u8fdc\u7a0b JMX\uff0c\u4ece\u800c\u4f7f\u7528 JMX \u542f\u7528\u8fdc\u7a0b\u76d1\u63a7 \u3002\u5728\u751f\u4ea7\u573a\u666f\u4e2d\u542f\u7528\u8fdc\u7a0b JMX \u65f6\uff0c\u60a8\u5fc5\u987b\u542f\u7528\u5b89\u5168\u6027\uff0c\u4ee5\u786e\u4fdd\u672a\u7ecf\u6388\u6743\u7684\u7528\u6237\u65e0\u6cd5\u76d1\u89c6\u6216\u63a7\u5236\u60a8\u7684\u4ee3\u7406\u6216\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u5b83\u4eec\u8fd0\u884c\u7684\u200b\u200b\u5e73\u53f0\u3002 KAFKA_JMX_OPTS \u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka \u4e2d\u7684 JMX \u8eab\u4efd\u9a8c\u8bc1\u5904\u4e8e\u7981\u7528\u72b6\u6001\uff0c\u5e76\u4e14\u5fc5\u987b\u901a\u8fc7\u4e3a\u4f7f\u7528 CLI \u542f\u52a8\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u6216\u8bbe\u7f6e\u9002\u5f53\u7684 Java \u7cfb\u7edf\u5c5e\u6027\u6765\u8986\u76d6\u751f\u4ea7\u90e8\u7f72\u7684\u5b89\u5168\u914d\u7f6e \u3002\u8bf7\u53c2\u9605 \u4f7f\u7528 JMX \u6280\u672f\u8fdb\u884c\u76d1\u63a7\u548c\u7ba1\u7406 \u6709\u5173\u4fdd\u62a4 JMX \u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u6211\u4eec\u5bf9\u4ee5\u4e0b\u6307\u6807\u8fdb\u884c\u7ed8\u56fe\u548c\u8b66\u62a5\uff1a DESCRIPTION MBEAN NAME NORMAL VALUE Message in rate kafka.server:type=BrokerTopicMetrics,name=MessagesInPerSec,topic=([-.\\w]+) Incoming message rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Byte in rate from clients kafka.server:type=BrokerTopicMetrics,name=BytesInPerSec,topic=([-.\\w]+) Byte in (from the clients) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Byte in rate from other brokers kafka.server:type=BrokerTopicMetrics,name=ReplicationBytesInPerSec Byte in (from the other brokers) rate across all topics. Controller Request rate from Broker kafka.controller:type=ControllerChannelManager,name=RequestRateAndQueueTimeMs,brokerId=([0-9]+) The rate (requests per second) at which the ControllerChannelManager takes requests from the queue of the given broker. And the time it takes for a request to stay in this queue before it is taken from the queue. Controller Event queue size kafka.controller:type=ControllerEventManager,name=EventQueueSize Size of the ControllerEventManager's queue. Controller Event queue time kafka.controller:type=ControllerEventManager,name=EventQueueTimeMs Time that takes for any event (except the Idle event) to wait in the ControllerEventManager's queue before being processed Request rate kafka.network:type=RequestMetrics,name=RequestsPerSec,request={Produce FetchConsumer Error rate kafka.network:type=RequestMetrics,name=ErrorsPerSec,request=([-.\\w]+),error=([-.\\w]+) Number of errors in responses counted per-request-type, per-error-code. If a response contains multiple errors, all are counted. error=NONE indicates successful responses. Produce request rate kafka.server:type=BrokerTopicMetrics,name=TotalProduceRequestsPerSec,topic=([-.\\w]+) Produce request rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Fetch request rate kafka.server:type=BrokerTopicMetrics,name=TotalFetchRequestsPerSec,topic=([-.\\w]+) Fetch request (from clients or followers) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Failed produce request rate kafka.server:type=BrokerTopicMetrics,name=FailedProduceRequestsPerSec,topic=([-.\\w]+) Failed Produce request rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Failed fetch request rate kafka.server:type=BrokerTopicMetrics,name=FailedFetchRequestsPerSec,topic=([-.\\w]+) Failed Fetch request (from clients or followers) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Request size in bytes kafka.network:type=RequestMetrics,name=RequestBytes,request=([-.\\w]+) Size of requests for each request type. Temporary memory size in bytes kafka.network:type=RequestMetrics,name=TemporaryMemoryBytes,request={Produce Fetch} Message conversion time kafka.network:type=RequestMetrics,name=MessageConversionsTimeMs,request={Produce Fetch} Message conversion rate kafka.server:type=BrokerTopicMetrics,name={Produce Fetch}MessageConversionsPerSec,topic=([-.\\w]+) Request Queue Size kafka.network:type=RequestChannel,name=RequestQueueSize Size of the request queue. Byte out rate to clients kafka.server:type=BrokerTopicMetrics,name=BytesOutPerSec,topic=([-.\\w]+) Byte out (to the clients) rate per topic. Omitting 'topic=(...)' will yield the all-topic rate. Byte out rate to other brokers kafka.server:type=BrokerTopicMetrics,name=ReplicationBytesOutPerSec Byte out (to the other brokers) rate across all topics Rejected byte rate kafka.server:type=BrokerTopicMetrics,name=BytesRejectedPerSec,topic=([-.\\w]+) Rejected byte rate per topic, due to the record batch size being greater than max.message.bytes configuration. Omitting 'topic=(...)' will yield the all-topic rate. Message validation failure rate due to no key specified for compacted topic kafka.server:type=BrokerTopicMetrics,name=NoKeyCompactedTopicRecordsPerSec 0 Message validation failure rate due to invalid magic number kafka.server:type=BrokerTopicMetrics,name=InvalidMagicNumberRecordsPerSec 0 Message validation failure rate due to incorrect crc checksum kafka.server:type=BrokerTopicMetrics,name=InvalidMessageCrcRecordsPerSec 0 Message validation failure rate due to non-continuous offset or sequence number in batch kafka.server:type=BrokerTopicMetrics,name=InvalidOffsetOrSequenceRecordsPerSec 0 Log flush rate and time kafka.log:type=LogFlushStats,name=LogFlushRateAndTimeMs # of offline log directories kafka.log:type=LogManager,name=OfflineLogDirectoryCount 0 Leader election rate kafka.controller:type=ControllerStats,name=LeaderElectionRateAndTimeMs non-zero when there are broker failures Unclean leader election rate kafka.controller:type=ControllerStats,name=UncleanLeaderElectionsPerSec 0 Is controller active on broker kafka.controller:type=KafkaController,name=ActiveControllerCount only one broker in the cluster should have 1 Pending topic deletes kafka.controller:type=KafkaController,name=TopicsToDeleteCount Pending replica deletes kafka.controller:type=KafkaController,name=ReplicasToDeleteCount Ineligible pending topic deletes kafka.controller:type=KafkaController,name=TopicsIneligibleToDeleteCount Ineligible pending replica deletes kafka.controller:type=KafkaController,name=ReplicasIneligibleToDeleteCount # of under replicated partitions ( ISR < # of under minIsr partitions ( ISR < min.insync.replicas) # of at minIsr partitions ( ISR = min.insync.replicas) Producer Id counts kafka.server:type=ReplicaManager,name=ProducerIdCount Count of all producer ids created by transactional and idempotent producers in each replica on the broker Partition counts kafka.server:type=ReplicaManager,name=PartitionCount mostly even across brokers Offline Replica counts kafka.server:type=ReplicaManager,name=OfflineReplicaCount 0 Leader replica counts kafka.server:type=ReplicaManager,name=LeaderCount mostly even across brokers ISR shrink rate kafka.server:type=ReplicaManager,name=IsrShrinksPerSec If a broker goes down, ISR for some of the partitions will shrink. When that broker is up again, ISR will be expanded once the replicas are fully caught up. Other than that, the expected value for both ISR shrink rate and expansion rate is 0. ISR expansion rate kafka.server:type=ReplicaManager,name=IsrExpandsPerSec See above Failed ISR update rate kafka.server:type=ReplicaManager,name=FailedIsrUpdatesPerSec 0 Max lag in messages btw follower and leader replicas kafka.server:type=ReplicaFetcherManager,name=MaxLag,clientId=Replica lag should be proportional to the maximum batch size of a produce request. Lag in messages per follower replica kafka.server:type=FetcherLagMetrics,name=ConsumerLag,clientId=([-.\\w]+),topic=([-.\\w]+),partition=([0-9]+) lag should be proportional to the maximum batch size of a produce request. Requests waiting in the producer purgatory kafka.server:type=DelayedOperationPurgatory,name=PurgatorySize,delayedOperation=Produce non-zero if ack=-1 is used Requests waiting in the fetch purgatory kafka.server:type=DelayedOperationPurgatory,name=PurgatorySize,delayedOperation=Fetch size depends on fetch.wait.max.ms in the consumer Request total time kafka.network:type=RequestMetrics,name=TotalTimeMs,request={Produce FetchConsumer Time the request waits in the request queue kafka.network:type=RequestMetrics,name=RequestQueueTimeMs,request={Produce FetchConsumer Time the request is processed at the leader kafka.network:type=RequestMetrics,name=LocalTimeMs,request={Produce FetchConsumer Time the request waits for the follower kafka.network:type=RequestMetrics,name=RemoteTimeMs,request={Produce FetchConsumer Time the request waits in the response queue kafka.network:type=RequestMetrics,name=ResponseQueueTimeMs,request={Produce FetchConsumer Time to send the response kafka.network:type=RequestMetrics,name=ResponseSendTimeMs,request={Produce FetchConsumer Number of messages the consumer lags behind the producer by. Published by the consumer, not broker. kafka.consumer:type=consumer-fetch-manager-metrics,client-id={client-id} Attribute: records-lag-max The average fraction of time the network processors are idle kafka.network:type=SocketServer,name=NetworkProcessorAvgIdlePercent between 0 and 1, ideally > 0.3 The number of connections disconnected on a processor due to a client not re-authenticating and then using the connection beyond its expiration time for anything other than re-authentication kafka.server:type=socket-server-metrics,listener=[SASL_PLAINTEXT SASL_SSL],networkProcessor=<#>,name=expired-connections-killed-count The total number of connections disconnected, across all processors, due to a client not re-authenticating and then using the connection beyond its expiration time for anything other than re-authentication kafka.network:type=SocketServer,name=ExpiredConnectionsKilledCount ideally 0 when re-authentication is enabled, implying there are no longer any older, pre-2.2.0 clients connecting to this broker The average fraction of time the request handler threads are idle kafka.server:type=KafkaRequestHandlerPool,name=RequestHandlerAvgIdlePercent between 0 and 1, ideally > 0.3 Bandwidth quota metrics per (user, client-id), user or client-id kafka.server:type={Produce Fetch},user=([-.\\w]+),client-id=([-.\\w]+) Request quota metrics per (user, client-id), user or client-id kafka.server:type=Request,user=([-.\\w]+),client-id=([-.\\w]+) Two attributes. throttle-time indicates the amount of time in ms the client was throttled. Ideally = 0. request-time indicates the percentage of time spent in broker network and I/O threads to process requests from client group. For (user, client-id) quotas, both user and client-id are specified. If per-client-id quota is applied to the client, user is not specified. If per-user quota is applied, client-id is not specified. Requests exempt from throttling kafka.server:type=Request exempt-throttle-time indicates the percentage of time spent in broker network and I/O threads to process requests that are exempt from throttling. ZooKeeper client request latency kafka.server:type=ZooKeeperClientMetrics,name=ZooKeeperRequestLatencyMs Latency in milliseconds for ZooKeeper requests from broker. ZooKeeper connection status kafka.server:type=SessionExpireListener,name=SessionState Connection status of broker's ZooKeeper session which may be one of Disconnected Max time to load group metadata kafka.server:type=group-coordinator-metrics,name=partition-load-time-max maximum time, in milliseconds, it took to load offsets and group metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Avg time to load group metadata kafka.server:type=group-coordinator-metrics,name=partition-load-time-avg average time, in milliseconds, it took to load offsets and group metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Max time to load transaction metadata kafka.server:type=transaction-coordinator-metrics,name=partition-load-time-max maximum time, in milliseconds, it took to load transaction metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Avg time to load transaction metadata kafka.server:type=transaction-coordinator-metrics,name=partition-load-time-avg average time, in milliseconds, it took to load transaction metadata from the consumer offset partitions loaded in the last 30 seconds (including time spent waiting for the loading task to be scheduled) Rate of transactional verification errors kafka.server:type=AddPartitionsToTxnManager,name=VerificationFailureRate Rate of verifications that returned in failure either from the AddPartitionsToTxn API response or through errors in the AddPartitionsToTxnManager. In steady state 0, but transient errors are expected during rolls and reassignments of the transactional state partition. Time to verify a transactional request kafka.server:type=AddPartitionsToTxnManager,name=VerificationTimeMs The amount of time queueing while a possible previous request is in-flight plus the round trip to the transaction coordinator to verify (or not verify) Consumer Group Offset Count kafka.server:type=GroupMetadataManager,name=NumOffsets Total number of committed offsets for Consumer Groups Consumer Group Count kafka.server:type=GroupMetadataManager,name=NumGroups Total number of Consumer Groups Consumer Group Count, per State kafka.server:type=GroupMetadataManager,name=NumGroups[PreparingRebalance,CompletingRebalance,Empty,Stable,Dead] The number of Consumer Groups in each state: PreparingRebalance, CompletingRebalance, Empty, Stable, Dead Number of reassigning partitions kafka.server:type=ReplicaManager,name=ReassigningPartitions The number of reassigning leader partitions on a broker. Outgoing byte rate of reassignment traffic kafka.server:type=BrokerTopicMetrics,name=ReassignmentBytesOutPerSec 0; non-zero when a partition reassignment is in progress. Incoming byte rate of reassignment traffic kafka.server:type=BrokerTopicMetrics,name=ReassignmentBytesInPerSec 0; non-zero when a partition reassignment is in progress. Size of a partition on disk (in bytes) kafka.log:type=Log,name=Size,topic=([-.\\w]+),partition=([0-9]+) The size of a partition on disk, measured in bytes. Number of log segments in a partition kafka.log:type=Log,name=NumLogSegments,topic=([-.\\w]+),partition=([0-9]+) The number of log segments in a partition. First offset in a partition kafka.log:type=Log,name=LogStartOffset,topic=([-.\\w]+),partition=([0-9]+) The first offset in a partition. Last offset in a partition kafka.log:type=Log,name=LogEndOffset,topic=([-.\\w]+),partition=([0-9]+) The last offset in a partition.","title":"\u4f7f\u7528 JMX \u8fdb\u884c\u8fdc\u7a0b\u76d1\u63a7\u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879"},{"location":"6/#tiered-storage-monitoring","text":"\u4ee5\u4e0b\u4e00\u7ec4\u6307\u6807\u53ef\u7528\u4e8e\u76d1\u63a7\u5206\u5c42\u5b58\u50a8\u529f\u80fd\uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Remote Fetch Bytes Per Sec Rate of bytes read from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteFetchBytesPerSec,topic=([-.\\w]+) Remote Fetch Requests Per Sec Rate of read requests from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteFetchRequestsPerSec,topic=([-.\\w]+) Remote Fetch Errors Per Sec Rate of read errors from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteFetchErrorsPerSec,topic=([-.\\w]+) Remote Copy Bytes Per Sec Rate of bytes copied to remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteCopyBytesPerSec,topic=([-.\\w]+) Remote Copy Requests Per Sec Rate of write requests to remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteCopyRequestsPerSec,topic=([-.\\w]+) Remote Copy Errors Per Sec Rate of write errors from remote storage per topic. Omitting 'topic=(...)' will yield the all-topic rate kafka.server:type=BrokerTopicMetrics,name=RemoteCopyErrorsPerSec,topic=([-.\\w]+) RemoteLogReader Task Queue Size Size of the queue holding remote storage read tasks org.apache.kafka.storage.internals.log:type=RemoteStorageThreadPool,name=RemoteLogReaderTaskQueueSize RemoteLogReader Avg Idle Percent Average idle percent of thread pool for processing remote storage read tasks org.apache.kafka.storage.internals.log:type=RemoteStorageThreadPool,name=RemoteLogReaderAvgIdlePercent RemoteLogManager Tasks Avg Idle Percent Average idle percent of thread pool for copying data to remote storage kafka.log.remote:type=RemoteLogManager,name=RemoteLogManagerTasksAvgIdlePercent","title":"Tiered Storage Monitoring"},{"location":"6/#kraft_1","text":"\u5141\u8bb8\u76d1\u63a7 KRaft \u4ef2\u88c1\u548c\u5143\u6570\u636e\u65e5\u5fd7\u7684\u6307\u6807\u96c6\u3002 \u8bf7\u6ce8\u610f\uff0c\u4e00\u4e9b\u516c\u5f00\u7684\u6307\u6807\u53d6\u51b3\u4e8e\u8282\u70b9\u7684\u89d2\u8272\uff0c\u5982 process.roles","title":"Kraft \u76d1\u63a7\u6307\u6807"},{"location":"6/#kraft-quorum-monitoring-metrics","text":"\u8fd9\u4e9b\u6307\u6807\u5728 KRaft \u96c6\u7fa4\u4e2d\u7684\u63a7\u5236\u5668\u548c\u4ee3\u7406\u4e0a\u62a5\u544a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Current State The current state of this member; possible values are leader, candidate, voted, follower, unattached, observer. kafka.server:type=raft-metrics,name=current-state Current Leader The current quorum leader's id; -1 indicates unknown. kafka.server:type=raft-metrics,name=current-leader Current Voted The current voted leader's id; -1 indicates not voted for anyone. kafka.server:type=raft-metrics,name=current-vote Current Epoch The current quorum epoch. kafka.server:type=raft-metrics,name=current-epoch High Watermark The high watermark maintained on this member; -1 if it is unknown. kafka.server:type=raft-metrics,name=high-watermark Log End Offset The current raft log end offset. kafka.server:type=raft-metrics,name=log-end-offset Number of Unknown Voter Connections Number of unknown voters whose connection information is not cached. This value of this metric is always 0. kafka.server:type=raft-metrics,name=number-unknown-voter-connections Average Commit Latency The average time in milliseconds to commit an entry in the raft log. kafka.server:type=raft-metrics,name=commit-latency-avg Maximum Commit Latency The maximum time in milliseconds to commit an entry in the raft log. kafka.server:type=raft-metrics,name=commit-latency-max Average Election Latency The average time in milliseconds spent on electing a new leader. kafka.server:type=raft-metrics,name=election-latency-avg Maximum Election Latency The maximum time in milliseconds spent on electing a new leader. kafka.server:type=raft-metrics,name=election-latency-max Fetch Records Rate The average number of records fetched from the leader of the raft quorum. kafka.server:type=raft-metrics,name=fetch-records-rate Append Records Rate The average number of records appended per sec by the leader of the raft quorum. kafka.server:type=raft-metrics,name=append-records-rate Average Poll Idle Ratio The average fraction of time the client's poll() is idle as opposed to waiting for the user code to process records. kafka.server:type=raft-metrics,name=poll-idle-ratio-avg Current Metadata Version Outputs the feature level of the current effective metadata version. kafka.server:type=MetadataLoader,name=CurrentMetadataVersion Metadata Snapshot Load Count The total number of times we have loaded a KRaft snapshot since the process was started. kafka.server:type=MetadataLoader,name=HandleLoadSnapshotCount Latest Metadata Snapshot Size The total size in bytes of the latest snapshot that the node has generated. If none have been generated yet, this is the size of the latest snapshot that was loaded. If no snapshots have been generated or loaded, this is 0. kafka.server:type=SnapshotEmitter,name=LatestSnapshotGeneratedBytes Latest Metadata Snapshot Age The interval in milliseconds since the latest snapshot that the node has generated. If none have been generated yet, this is approximately the time delta since the process was started. kafka.server:type=SnapshotEmitter,name=LatestSnapshotGeneratedAgeMs","title":"KRaft Quorum Monitoring Metrics"},{"location":"6/#kraft-controller-monitoring-metrics","text":"METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Active Controller Count The number of Active Controllers on this node. Valid values are '0' or '1'. kafka.controller:type=KafkaController,name=ActiveControllerCount Event Queue Time Ms A Histogram of the time in milliseconds that requests spent waiting in the Controller Event Queue. kafka.controller:type=ControllerEventManager,name=EventQueueTimeMs Event Queue Processing Time Ms A Histogram of the time in milliseconds that requests spent being processed in the Controller Event Queue. kafka.controller:type=ControllerEventManager,name=EventQueueProcessingTimeMs Fenced Broker Count The number of fenced brokers as observed by this Controller. kafka.controller:type=KafkaController,name=FencedBrokerCount Active Broker Count The number of active brokers as observed by this Controller. kafka.controller:type=KafkaController,name=ActiveBrokerCount Global Topic Count The number of global topics as observed by this Controller. kafka.controller:type=KafkaController,name=GlobalTopicCount Global Partition Count The number of global partitions as observed by this Controller. kafka.controller:type=KafkaController,name=GlobalPartitionCount Offline Partition Count The number of offline topic partitions (non-internal) as observed by this Controller. kafka.controller:type=KafkaController,name=OfflinePartitionCount Preferred Replica Imbalance Count The count of topic partitions for which the leader is not the preferred leader. kafka.controller:type=KafkaController,name=PreferredReplicaImbalanceCount Metadata Error Count The number of times this controller node has encountered an error during metadata log processing. kafka.controller:type=KafkaController,name=MetadataErrorCount Last Applied Record Offset The offset of the last record from the cluster metadata partition that was applied by the Controller. kafka.controller:type=KafkaController,name=LastAppliedRecordOffset Last Committed Record Offset The offset of the last record committed to this Controller. kafka.controller:type=KafkaController,name=LastCommittedRecordOffset Last Applied Record Timestamp The timestamp of the last record from the cluster metadata partition that was applied by the Controller. kafka.controller:type=KafkaController,name=LastAppliedRecordTimestamp Last Applied Record Lag Ms The difference between now and the timestamp of the last record from the cluster metadata partition that was applied by the controller. For active Controllers the value of this lag is always zero. kafka.controller:type=KafkaController,name=LastAppliedRecordLagMs ZooKeeper Write Behind Lag The amount of lag in records that ZooKeeper is behind relative to the highest committed record in the metadata log. This metric will only be reported by the active KRaft controller. kafka.controller:type=KafkaController,name=ZkWriteBehindLag ZooKeeper Metadata Snapshot Write Time The number of milliseconds the KRaft controller took reconciling a snapshot into ZooKeeper. kafka.controller:type=KafkaController,name=ZkWriteSnapshotTimeMs ZooKeeper Metadata Delta Write Time The number of milliseconds the KRaft controller took writing a delta into ZK. kafka.controller:type=KafkaController,name=ZkWriteDeltaTimeMs Timed-out Broker Heartbeat Count The number of broker heartbeats that timed out on this controller since the process was started. Note that only active controllers handle heartbeats, so only they will see increases in this metric. kafka.controller:type=KafkaController,name=TimedOutBrokerHeartbeatCount Number Of Operations Started In Event Queue The total number of controller event queue operations that were started. This includes deferred operations. kafka.controller:type=KafkaController,name=EventQueueOperationsStartedCount Number of Operations Timed Out In Event Queue The total number of controller event queue operations that timed out before they could be performed. kafka.controller:type=KafkaController,name=EventQueueOperationsTimedOutCount Number Of New Controller Elections Counts the number of times this node has seen a new controller elected. A transition to the \"no leader\" state is not counted here. If the same controller as before becomes active, that still counts. kafka.controller:type=KafkaController,name=NewActiveControllersCount","title":"KRaft Controller Monitoring Metrics"},{"location":"6/#kraft-broker-monitoring-metrics","text":"METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME Last Applied Record Offset The offset of the last record from the cluster metadata partition that was applied by the broker kafka.server:type=broker-metadata-metrics,name=last-applied-record-offset Last Applied Record Timestamp The timestamp of the last record from the cluster metadata partition that was applied by the broker. kafka.server:type=broker-metadata-metrics,name=last-applied-record-timestamp Last Applied Record Lag Ms The difference between now and the timestamp of the last record from the cluster metadata partition that was applied by the broker kafka.server:type=broker-metadata-metrics,name=last-applied-record-lag-ms Metadata Load Error Count The number of errors encountered by the BrokerMetadataListener while loading the metadata log and generating a new MetadataDelta based on it. kafka.server:type=broker-metadata-metrics,name=metadata-load-error-count Metadata Apply Error Count The number of errors encountered by the BrokerMetadataPublisher while applying a new MetadataImage based on the latest MetadataDelta. kafka.server:type=broker-metadata-metrics,name=metadata-apply-error-count","title":"KRaft Broker Monitoring Metrics"},{"location":"6/#common-monitoring-metrics-for-producerconsumerconnectstreams","text":"\u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u751f\u4ea7\u8005/\u6d88\u8d39\u8005/\u8fde\u63a5\u5668/\u6d41\u5b9e\u4f8b\u3002\u6709\u5173\u5177\u4f53\u6307\u6807\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u90e8\u5206\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME connection-close-rate Connections closed per second in the window. kafka.[producer connection-close-total Total connections closed in the window. kafka.[producer connection-creation-rate New connections established per second in the window. kafka.[producer connection-creation-total Total new connections established in the window. kafka.[producer network-io-rate The average number of network operations (reads or writes) on all connections per second. kafka.[producer network-io-total The total number of network operations (reads or writes) on all connections. kafka.[producer outgoing-byte-rate The average number of outgoing bytes sent per second to all servers. kafka.[producer outgoing-byte-total The total number of outgoing bytes sent to all servers. kafka.[producer request-rate The average number of requests sent per second. kafka.[producer request-total The total number of requests sent. kafka.[producer request-size-avg The average size of all requests in the window. kafka.[producer request-size-max The maximum size of any request sent in the window. kafka.[producer incoming-byte-rate Bytes/second read off all sockets. kafka.[producer incoming-byte-total Total bytes read off all sockets. kafka.[producer response-rate Responses received per second. kafka.[producer response-total Total responses received. kafka.[producer select-rate Number of times the I/O layer checked for new I/O to perform per second. kafka.[producer select-total Total number of times the I/O layer checked for new I/O to perform. kafka.[producer io-wait-time-ns-avg The average length of time the I/O thread spent waiting for a socket ready for reads or writes in nanoseconds. kafka.[producer io-wait-time-ns-total The total time the I/O thread spent waiting in nanoseconds. kafka.[producer io-waittime-total *Deprecated* The total time the I/O thread spent waiting in nanoseconds. Replacement is io-wait-time-ns-total . kafka.[producer io-wait-ratio The fraction of time the I/O thread spent waiting. kafka.[producer io-time-ns-avg The average length of time for I/O per select call in nanoseconds. kafka.[producer io-time-ns-total The total time the I/O thread spent doing I/O in nanoseconds. kafka.[producer iotime-total *Deprecated* The total time the I/O thread spent doing I/O in nanoseconds. Replacement is io-time-ns-total . kafka.[producer io-ratio The fraction of time the I/O thread spent doing I/O. kafka.[producer connection-count The current number of active connections. kafka.[producer successful-authentication-rate Connections per second that were successfully authenticated using SASL or SSL. kafka.[producer successful-authentication-total Total connections that were successfully authenticated using SASL or SSL. kafka.[producer failed-authentication-rate Connections per second that failed authentication. kafka.[producer failed-authentication-total Total connections that failed authentication. kafka.[producer successful-reauthentication-rate Connections per second that were successfully re-authenticated using SASL. kafka.[producer successful-reauthentication-total Total connections that were successfully re-authenticated using SASL. kafka.[producer reauthentication-latency-max The maximum latency in ms observed due to re-authentication. kafka.[producer reauthentication-latency-avg The average latency in ms observed due to re-authentication. kafka.[producer failed-reauthentication-rate Connections per second that failed re-authentication. kafka.[producer failed-reauthentication-total Total connections that failed re-authentication. kafka.[producer successful-authentication-no-reauth-total Total connections that were successfully authenticated by older, pre-2.2.0 SASL clients that do not support re-authentication. May only be non-zero. kafka.[producer","title":"Common monitoring metrics for producer/consumer/connect/streams"},{"location":"6/#common-per-broker-metrics-for-producerconsumerconnectstreams","text":"\u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u751f\u4ea7\u8005/\u6d88\u8d39\u8005/\u8fde\u63a5\u5668/\u6d41\u5b9e\u4f8b\u3002\u6709\u5173\u5177\u4f53\u6307\u6807\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u90e8\u5206\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME outgoing-byte-rate The average number of outgoing bytes sent per second for a node. kafka.[producer outgoing-byte-total The total number of outgoing bytes sent for a node. kafka.[producer request-rate The average number of requests sent per second for a node. kafka.[producer request-total The total number of requests sent for a node. kafka.[producer request-size-avg The average size of all requests in the window for a node. kafka.[producer request-size-max The maximum size of any request sent in the window for a node. kafka.[producer incoming-byte-rate The average number of bytes received per second for a node. kafka.[producer incoming-byte-total The total number of bytes received for a node. kafka.[producer request-latency-avg The average request latency in ms for a node. kafka.[producer request-latency-max The maximum request latency in ms for a node. kafka.[producer response-rate Responses received per second for a node. kafka.[producer response-total Total responses received for a node. kafka.[producer","title":"Common Per-broker metrics for producer/consumer/connect/streams"},{"location":"6/#producer-monitoring","text":"\u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u751f\u4ea7\u8005\u5b9e\u4f8b\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME waiting-threads The number of user threads blocked waiting for buffer memory to enqueue their records. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) buffer-total-bytes The maximum amount of buffer memory the client can use (whether or not it is currently used). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) buffer-available-bytes The total amount of buffer memory that is not being used (either unallocated or in the free list). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) bufferpool-wait-time The fraction of time an appender waits for space allocation. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) bufferpool-wait-time-total *Deprecated* The total time an appender waits for space allocation in nanoseconds. Replacement is bufferpool-wait-time-ns-total kafka.producer:type=producer-metrics,client-id=([-.\\w]+) bufferpool-wait-time-ns-total The total time an appender waits for space allocation in nanoseconds. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) flush-time-ns-total The total time the Producer spent in Producer.flush in nanoseconds. kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-init-time-ns-total The total time the Producer spent initializing transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-begin-time-ns-total The total time the Producer spent in beginTransaction in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-send-offsets-time-ns-total The total time the Producer spent sending offsets to transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-commit-time-ns-total The total time the Producer spent committing transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+) txn-abort-time-ns-total The total time the Producer spent aborting transactions in nanoseconds (for EOS). kafka.producer:type=producer-metrics,client-id=([-.\\w]+)","title":"Producer monitoring"},{"location":"6/#producer-sender-metrics","text":"kafka.producer:type=producer-metrics,client-id=\"{client-id}\" ATTRIBUTE NAME DESCRIPTION batch-size-avg The average number of bytes sent per partition per-request. batch-size-max The max number of bytes sent per partition per-request. batch-split-rate The average number of batch splits per second batch-split-total The total number of batch splits compression-rate-avg The average compression rate of record batches, defined as the average ratio of the compressed batch size over the uncompressed size. metadata-age The age in seconds of the current producer metadata being used. produce-throttle-time-avg The average time in ms a request was throttled by a broker produce-throttle-time-max The maximum time in ms a request was throttled by a broker record-error-rate The average per-second number of record sends that resulted in errors record-error-total The total number of record sends that resulted in errors record-queue-time-avg The average time in ms record batches spent in the send buffer. record-queue-time-max The maximum time in ms record batches spent in the send buffer. record-retry-rate The average per-second number of retried record sends record-retry-total The total number of retried record sends record-send-rate The average number of records sent per second. record-send-total The total number of records sent. record-size-avg The average record size record-size-max The maximum record size records-per-request-avg The average number of records per request. request-latency-avg The average request latency in ms request-latency-max The maximum request latency in ms requests-in-flight The current number of in-flight requests awaiting a response. kafka.producer:type=producer-topic-metrics,client-id=\"{client-id}\",topic=\"{topic}\" ATTRIBUTE NAME DESCRIPTION byte-rate The average number of bytes sent per second for a topic. byte-total The total number of bytes sent for a topic. compression-rate The average compression rate of record batches for a topic, defined as the average ratio of the compressed batch size over the uncompressed size. record-error-rate The average per-second number of record sends that resulted in errors for a topic record-error-total The total number of record sends that resulted in errors for a topic record-retry-rate The average per-second number of retried record sends for a topic record-retry-total The total number of retried record sends for a topic record-send-rate The average number of records sent per second for a topic. record-send-total The total number of records sent for a topic.","title":"Producer Sender Metrics"},{"location":"6/#consumer-monitoring","text":"\u4ee5\u4e0b\u6307\u6807\u53ef\u7528\u4e8e\u6d88\u8d39\u8005\u5b9e\u4f8b\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME time-between-poll-avg The average delay between invocations of poll(). kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) time-between-poll-max The max delay between invocations of poll(). kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) last-poll-seconds-ago The number of seconds since the last poll() invocation. kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) poll-idle-ratio-avg The average fraction of time the consumer's poll() is idle as opposed to waiting for the user code to process records. kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) committed-time-ns-total The total time the Consumer spent in committed in nanoseconds. kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+) commit-sync-time-ns-total The total time the Consumer spent committing offsets in nanoseconds (for AOS). kafka.consumer:type=consumer-metrics,client-id=([-.\\w]+)","title":"Consumer monitoring"},{"location":"6/#consumer-group-metrics","text":"METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME commit-latency-avg The average time taken for a commit request kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) commit-latency-max The max time taken for a commit request kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) commit-rate The number of commit calls per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) commit-total The total number of commit calls kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) assigned-partitions The number of partitions currently assigned to this consumer kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) heartbeat-response-time-max The max time taken to receive a response to a heartbeat request kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) heartbeat-rate The average number of heartbeats per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) heartbeat-total The total number of heartbeats kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-time-avg The average time taken for a group rejoin kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-time-max The max time taken for a group rejoin kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-rate The number of group joins per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) join-total The total number of group joins kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-time-avg The average time taken for a group sync kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-time-max The max time taken for a group sync kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-rate The number of group syncs per second kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) sync-total The total number of group syncs kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-latency-avg The average time taken for a group rebalance kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-latency-max The max time taken for a group rebalance kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-latency-total The total time taken for group rebalances so far kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-total The total number of group rebalances participated kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) rebalance-rate-per-hour The number of group rebalance participated per hour kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) failed-rebalance-total The total number of failed group rebalances kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) failed-rebalance-rate-per-hour The number of failed group rebalance event per hour kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) last-rebalance-seconds-ago The number of seconds since the last rebalance event kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) last-heartbeat-seconds-ago The number of seconds since the last controller heartbeat kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-revoked-latency-avg The average time taken by the on-partitions-revoked rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-revoked-latency-max The max time taken by the on-partitions-revoked rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-assigned-latency-avg The average time taken by the on-partitions-assigned rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-assigned-latency-max The max time taken by the on-partitions-assigned rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-lost-latency-avg The average time taken by the on-partitions-lost rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+) partitions-lost-latency-max The max time taken by the on-partitions-lost rebalance listener callback kafka.consumer:type=consumer-coordinator-metrics,client-id=([-.\\w]+)","title":"Consumer Group Metrics"},{"location":"6/#consumer-fetch-metrics","text":"kafka.consumer:type=consumer-fetch-manager-metrics,client-id=\"{client-id}\" ATTRIBUTE NAME DESCRIPTION bytes-consumed-rate The average number of bytes consumed per second bytes-consumed-total The total number of bytes consumed fetch-latency-avg The average time taken for a fetch request. fetch-latency-max The max time taken for any fetch request. fetch-rate The number of fetch requests per second. fetch-size-avg The average number of bytes fetched per request fetch-size-max The maximum number of bytes fetched per request fetch-throttle-time-avg The average throttle time in ms fetch-throttle-time-max The maximum throttle time in ms fetch-total The total number of fetch requests. records-consumed-rate The average number of records consumed per second records-consumed-total The total number of records consumed records-lag-max The maximum lag in terms of number of records for any partition in this window. NOTE: This is based on current offset and not committed offset records-lead-min The minimum lead in terms of number of records for any partition in this window records-per-request-avg The average number of records in each request kafka.consumer:type=consumer-fetch-manager-metrics,client-id=\"{client-id}\",topic=\"{topic}\" ATTRIBUTE NAME DESCRIPTION bytes-consumed-rate The average number of bytes consumed per second for a topic bytes-consumed-total The total number of bytes consumed for a topic fetch-size-avg The average number of bytes fetched per request for a topic fetch-size-max The maximum number of bytes fetched per request for a topic records-consumed-rate The average number of records consumed per second for a topic records-consumed-total The total number of records consumed for a topic records-per-request-avg The average number of records in each request for a topic kafka.consumer:type=consumer-fetch-manager-metrics,partition=\"{partition}\",topic=\"{topic}\",client-id=\"{client-id}\" ATTRIBUTE NAME DESCRIPTION preferred-read-replica The current read replica for the partition, or -1 if reading from leader records-lag The latest lag of the partition records-lag-avg The average lag of the partition records-lag-max The max lag of the partition records-lead The latest lead of the partition records-lead-avg The average lead of the partition records-lead-min The min lead of the partition","title":"Consumer Fetch Metrics"},{"location":"6/#connect-monitoring","text":"Connect \u5de5\u4f5c\u8fdb\u7a0b\u5305\u542b\u6240\u6709\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6307\u6807\u4ee5\u53ca\u7279\u5b9a\u4e8e Connect \u7684\u6307\u6807\u3002\u5de5\u4f5c\u8fdb\u7a0b\u672c\u8eab\u6709\u8bb8\u591a\u6307\u6807\uff0c\u800c\u6bcf\u4e2a\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u90fd\u6709\u5176\u4ed6\u6307\u6807\u3002[2023-05-22 16:22:33,884] INFO Metrics \u8c03\u5ea6\u7a0b\u5e8f\u5173\u95ed\uff08org.apache.kafka.common.metrics.Metrics:693\uff09 [2023-05-22 16:22:33,886] INFO Metrics \u8bb0\u8005\u5173\u95ed\uff08org.apache.kafka.common.metrics.Metrics:693\uff09 apache.kafka.common.metrics.Metrics:703) kafka.connect:type=connect-worker-metrics ATTRIBUTE NAME DESCRIPTION connector-count The number of connectors run in this worker. connector-startup-attempts-total The total number of connector startups that this worker has attempted. connector-startup-failure-percentage The average percentage of this worker's connectors starts that failed. connector-startup-failure-total The total number of connector starts that failed. connector-startup-success-percentage The average percentage of this worker's connectors starts that succeeded. connector-startup-success-total The total number of connector starts that succeeded. task-count The number of tasks run in this worker. task-startup-attempts-total The total number of task startups that this worker has attempted. task-startup-failure-percentage The average percentage of this worker's tasks starts that failed. task-startup-failure-total The total number of task starts that failed. task-startup-success-percentage The average percentage of this worker's tasks starts that succeeded. task-startup-success-total The total number of task starts that succeeded. kafka.connect:type=connect-worker-metrics,connector=\"{connector}\" ATTRIBUTE NAME DESCRIPTION connector-destroyed-task-count The number of destroyed tasks of the connector on the worker. connector-failed-task-count The number of failed tasks of the connector on the worker. connector-paused-task-count The number of paused tasks of the connector on the worker. connector-restarting-task-count The number of restarting tasks of the connector on the worker. connector-running-task-count The number of running tasks of the connector on the worker. connector-total-task-count The number of tasks of the connector on the worker. connector-unassigned-task-count The number of unassigned tasks of the connector on the worker. kafka.connect:type=connect-worker-rebalance-metrics ATTRIBUTE NAME DESCRIPTION completed-rebalances-total The total number of rebalances completed by this worker. connect-protocol The Connect protocol used by this cluster epoch The epoch or generation number of this worker. leader-name The name of the group leader. rebalance-avg-time-ms The average time in milliseconds spent by this worker to rebalance. rebalance-max-time-ms The maximum time in milliseconds spent by this worker to rebalance. rebalancing Whether this worker is currently rebalancing. time-since-last-rebalance-ms The time in milliseconds since this worker completed the most recent rebalance. kafka.connect:type=connector-metrics,connector=\"{connector}\" ATTRIBUTE NAME DESCRIPTION connector-class The name of the connector class. connector-type The type of the connector. One of 'source' or 'sink'. connector-version The version of the connector class, as reported by the connector. status The status of the connector. One of 'unassigned', 'running', 'paused', 'stopped', 'failed', or 'restarting'. kafka.connect:type=connector-task-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION batch-size-avg The average number of records in the batches the task has processed so far. batch-size-max The number of records in the largest batch the task has processed so far. offset-commit-avg-time-ms The average time in milliseconds taken by this task to commit offsets. offset-commit-failure-percentage The average percentage of this task's offset commit attempts that failed. offset-commit-max-time-ms The maximum time in milliseconds taken by this task to commit offsets. offset-commit-success-percentage The average percentage of this task's offset commit attempts that succeeded. pause-ratio The fraction of time this task has spent in the pause state. running-ratio The fraction of time this task has spent in the running state. status The status of the connector task. One of 'unassigned', 'running', 'paused', 'failed', or 'restarting'. kafka.connect:type=sink-task-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION offset-commit-completion-rate The average per-second number of offset commit completions that were completed successfully. offset-commit-completion-total The total number of offset commit completions that were completed successfully. offset-commit-seq-no The current sequence number for offset commits. offset-commit-skip-rate The average per-second number of offset commit completions that were received too late and skipped/ignored. offset-commit-skip-total The total number of offset commit completions that were received too late and skipped/ignored. partition-count The number of topic partitions assigned to this task belonging to the named sink connector in this worker. put-batch-avg-time-ms The average time taken by this task to put a batch of sinks records. put-batch-max-time-ms The maximum time taken by this task to put a batch of sinks records. sink-record-active-count The number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task. sink-record-active-count-avg The average number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task. sink-record-active-count-max The maximum number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task. sink-record-lag-max The maximum lag in terms of number of records that the sink task is behind the consumer's position for any topic partitions. sink-record-read-rate The average per-second number of records read from Kafka for this task belonging to the named sink connector in this worker. This is before transformations are applied. sink-record-read-total The total number of records read from Kafka by this task belonging to the named sink connector in this worker, since the task was last restarted. sink-record-send-rate The average per-second number of records output from the transformations and sent/put to this task belonging to the named sink connector in this worker. This is after transformations are applied and excludes any records filtered out by the transformations. sink-record-send-total The total number of records output from the transformations and sent/put to this task belonging to the named sink connector in this worker, since the task was last restarted. kafka.connect:type=source-task-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION poll-batch-avg-time-ms The average time in milliseconds taken by this task to poll for a batch of source records. poll-batch-max-time-ms The maximum time in milliseconds taken by this task to poll for a batch of source records. source-record-active-count The number of records that have been produced by this task but not yet completely written to Kafka. source-record-active-count-avg The average number of records that have been produced by this task but not yet completely written to Kafka. source-record-active-count-max The maximum number of records that have been produced by this task but not yet completely written to Kafka. source-record-poll-rate The average per-second number of records produced/polled (before transformation) by this task belonging to the named source connector in this worker. source-record-poll-total The total number of records produced/polled (before transformation) by this task belonging to the named source connector in this worker. source-record-write-rate The average per-second number of records written to Kafka for this task belonging to the named source connector in this worker, since the task was last restarted. This is after transformations are applied, and excludes any records filtered out by the transformations. source-record-write-total The number of records output written to Kafka for this task belonging to the named source connector in this worker, since the task was last restarted. This is after transformations are applied, and excludes any records filtered out by the transformations. transaction-size-avg The average number of records in the transactions the task has committed so far. transaction-size-max The number of records in the largest transaction the task has committed so far. transaction-size-min The number of records in the smallest transaction the task has committed so far. kafka.connect:type=task-error-metrics,connector=\"{connector}\",task=\"{task}\" ATTRIBUTE NAME DESCRIPTION deadletterqueue-produce-failures The number of failed writes to the dead letter queue. deadletterqueue-produce-requests The number of attempted writes to the dead letter queue. last-error-timestamp The epoch timestamp when this task last encountered an error. total-errors-logged The number of errors that were logged. total-record-errors The number of record processing errors in this task. total-record-failures The number of record processing failures in this task. total-records-skipped The number of records skipped due to errors. total-retries The number of operations retried.","title":"Connect Monitoring"},{"location":"6/#streams-monitoring","text":"Kafka Streams \u5b9e\u4f8b\u5305\u542b\u6240\u6709\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6307\u6807\u4ee5\u53ca\u7279\u5b9a\u4e8e Streams \u7684\u5176\u4ed6\u6307\u6807\u3002\u8fd9\u4e9b\u6307\u6807\u5177\u6709\u4e09\u4e2a\u8bb0\u5f55\u7ea7\u522b\uff1a info \u3001 debug \u548c trace \u3002 \u8bf7\u6ce8\u610f\uff0c\u6307\u6807\u6709 4 \u5c42\u5c42\u6b21\u7ed3\u6784\u3002\u5728\u9876\u5c42\uff0c\u6bcf\u4e2a\u542f\u52a8\u7684 Kafka Streams \u5ba2\u6237\u7aef\u90fd\u6709\u5ba2\u6237\u7aef\u7ea7\u6307\u6807\u3002\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u6709\u6d41\u7ebf\u7a0b\uff0c\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002\u6bcf\u4e2a\u6d41\u7ebf\u7a0b\u90fd\u6709\u4efb\u52a1\uff0c\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002\u6bcf\u4e2a\u4efb\u52a1\u90fd\u6709\u591a\u4e2a\u5904\u7406\u5668\u8282\u70b9\uff0c\u5e76\u5177\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002\u6bcf\u4e2a\u4efb\u52a1\u8fd8\u200b\u200b\u6709\u8bb8\u591a\u72b6\u6001\u5b58\u50a8\u548c\u8bb0\u5f55\u7f13\u5b58\uff0c\u5b83\u4eec\u90fd\u6709\u81ea\u5df1\u7684\u6307\u6807\u3002 \u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\u9009\u9879\u6307\u5b9a\u60a8\u8981\u6536\u96c6\u7684\u6307\u6807\uff1a metrics.recording.level=\"info\"","title":"Streams Monitoring"},{"location":"6/#client-metrics","text":"\u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME version The version of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) commit-id The version control commit ID of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) application-id The application ID of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) topology-description The description of the topology executed in the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) state The state of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+) failed-stream-threads The number of failed stream threads since the start of the Kafka Streams client. kafka.streams:type=stream-metrics,client-id=([-.\\w]+)","title":"Client Metrics"},{"location":"6/#thread-metrics","text":"\u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME commit-latency-avg The average execution time in ms, for committing, across all running tasks of this thread. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) commit-latency-max The maximum execution time in ms, for committing, across all running tasks of this thread. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-latency-avg The average execution time in ms, for consumer polling. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-latency-max The maximum execution time in ms, for consumer polling. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-latency-avg The average execution time in ms, for processing. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-latency-max The maximum execution time in ms, for processing. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-latency-avg The average execution time in ms, for punctuating. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-latency-max The maximum execution time in ms, for punctuating. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) commit-rate The average number of commits per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) commit-total The total number of commit calls. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-rate The average number of consumer poll calls per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) poll-total The total number of consumer poll calls. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-rate The average number of processed records per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) process-total The total number of processed records. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-rate The average number of punctuate calls per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) punctuate-total The total number of punctuate calls. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-created-rate The average number of tasks created per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-created-total The total number of tasks created. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-closed-rate The average number of tasks closed per second. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) task-closed-total The total number of tasks closed. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) blocked-time-ns-total The total time the thread spent blocked on kafka. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+) thread-start-time The time that the thread was started. kafka.streams:type=stream-thread-metrics,thread-id=([-.\\w]+)","title":"Thread Metrics"},{"location":"6/#task-metrics","text":"\u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff0c\u4f46 drop-records-* \u548c active-process-ratio \u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u9664\u5916 info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME process-latency-avg The average execution time in ns, for processing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) process-latency-max The maximum execution time in ns, for processing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) process-rate The average number of processed records per second across all source processor nodes of this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) process-total The total number of processed records across all source processor nodes of this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-latency-avg The average execution time in ns, for committing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-latency-max The maximum execution time in ns, for committing. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-rate The average number of commit calls per second. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) commit-total The total number of commit calls. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) record-lateness-avg The average observed lateness of records (stream time - record timestamp). kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) record-lateness-max The max observed lateness of records (stream time - record timestamp). kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) enforced-processing-rate The average number of enforced processings per second. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) enforced-processing-total The total number enforced processings. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) dropped-records-rate The average number of records dropped within this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) dropped-records-total The total number of records dropped within this task. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+) active-process-ratio The fraction of time the stream thread spent on processing this task among all assigned active tasks. kafka.streams:type=stream-task-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+)","title":"Task Metrics"},{"location":"6/#processor-node-metrics","text":"\u4ee5\u4e0b\u6307\u6807\u4ec5\u5728\u67d0\u4e9b\u7c7b\u578b\u7684\u8282\u70b9\u4e0a\u53ef\u7528\uff0c\u5373 process-* \u6307\u6807\u4ec5\u9002\u7528\u4e8e\u6e90\u5904\u7406\u5668\u8282\u70b9\uff0csuppression-emit-* \u6307\u6807\u4ec5\u9002\u7528\u4e8e\u6291\u5236\u64cd\u4f5c\u8282\u70b9\uff0c\u800c record-e2e-latency- * \u6307\u6807\u4ec5\u9002\u7528\u4e8e\u6e90\u5904\u7406\u5668\u8282\u70b9\u548c\u7ec8\u7aef\u8282\u70b9\uff08\u6ca1\u6709\u540e\u7ee7\u8282\u70b9\u7684\u8282\u70b9\uff09\u3002\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff0c\u4f46 record-e2e-latency-* \u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u9664\u5916 info \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME bytes-consumed-total The total number of bytes consumed by a source processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+) bytes-produced-total The total number of bytes produced by a sink processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+) process-rate The average number of records processed by a source processor node per second. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) process-total The total number of records processed by a source processor node per second. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) suppression-emit-rate The rate at which records that have been emitted downstream from suppression operation nodes. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) suppression-emit-total The total number of records that have been emitted downstream from suppression operation nodes. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) record-e2e-latency-avg The average end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) record-e2e-latency-max The maximum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) record-e2e-latency-min The minimum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-processor-node-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+) records-consumed-total The total number of records consumed by a source processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+) records-produced-total The total number of records produced by a sink processor node. kafka.streams:type=stream-topic-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),processor-node-id=([-.\\w]+),topic=([-.\\w]+)","title":"Processor Node Metrics"},{"location":"6/#state-store-metrics","text":"\u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff0c\u4f46 record-e2e-latency-* \u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u9664\u5916 trace \u3002\u8bf7\u6ce8\u610f\uff0c\u8be5 store-scope \u503c\u662f\u5728 StoreSupplier#metricsScope() \u7528\u6237\u81ea\u5b9a\u4e49\u72b6\u6001\u5b58\u50a8\u4e2d\u6307\u5b9a\u7684\uff1b\u5bf9\u4e8e\u5185\u7f6e\u72b6\u6001\u5b58\u50a8\uff0c\u76ee\u524d\u6211\u4eec\u6709\uff1a in-memory-state in-memory-lru-state in-memory-window-state in-memory-suppression \uff08\u7528\u4e8e\u6291\u5236\u7f13\u51b2\u6db2\uff09 rocksdb-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u952e\u503c\u5b58\u50a8\uff09 rocksdb-window-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u6a71\u7a97\u5546\u5e97\uff09 rocksdb-session-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u4f1a\u8bdd\u5b58\u50a8\uff09 \u6307\u6807suppression-buffer-size-avg\u3001suppression-buffer-size-max\u3001suppression-buffer-count-avg\u548csuppression-buffer-count-max\u4ec5\u9002\u7528\u4e8e\u6291\u5236\u7f13\u51b2\u533a\u3002\u6240\u6709\u5176\u4ed6\u6307\u6807\u5747\u4e0d\u53ef\u7528\u4e8e\u6291\u5236\u7f13\u51b2\u533a\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME put-latency-avg The average put execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-latency-max The maximum put execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-if-absent-latency-avg The average put-if-absent execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-if-absent-latency-max The maximum put-if-absent execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) get-latency-avg The average get execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) get-latency-max The maximum get execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) delete-latency-avg The average delete execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) delete-latency-max The maximum delete execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-all-latency-avg The average put-all execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-all-latency-max The maximum put-all execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) all-latency-avg The average all operation execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) all-latency-max The maximum all operation execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) range-latency-avg The average range execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) range-latency-max The maximum range execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) flush-latency-avg The average flush execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) flush-latency-max The maximum flush execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) restore-latency-avg The average restore execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) restore-latency-max The maximum restore execution time in ns. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-rate The average put rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-if-absent-rate The average put-if-absent rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) get-rate The average get rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) delete-rate The average delete rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) put-all-rate The average put-all rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) all-rate The average all operation rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) range-rate The average range rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) flush-rate The average flush rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) restore-rate The average restore rate for this store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) suppression-buffer-size-avg The average total size, in bytes, of the buffered data over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) suppression-buffer-size-max The maximum total size, in bytes, of the buffered data over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) suppression-buffer-count-avg The average number of records buffered over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) suppression-buffer-count-max The maximum number of records buffered over the sampling window. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),in-memory-suppression-id=([-.\\w]+) record-e2e-latency-avg The average end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) record-e2e-latency-max The maximum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) record-e2e-latency-min The minimum end-to-end latency of a record, measured by comparing the record timestamp with the system time when it has been fully processed by the node. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+)","title":"State Store Metrics"},{"location":"6/#rocksdb-metrics","text":"RocksDB \u6307\u6807\u5206\u4e3a\u57fa\u4e8e\u7edf\u8ba1\u7684\u6307\u6807\u548c\u57fa\u4e8e\u5c5e\u6027\u7684\u6307\u6807\u3002\u524d\u8005\u662f\u4ece RocksDB \u72b6\u6001\u5b58\u50a8\u6536\u96c6\u7684\u7edf\u8ba1\u4fe1\u606f\u4e2d\u8bb0\u5f55\u7684\uff0c\u800c\u540e\u8005\u662f\u4ece RocksDB \u516c\u5f00\u7684\u5c5e\u6027\u4e2d\u8bb0\u5f55\u7684\u3002RocksDB \u6536\u96c6\u7684\u7edf\u8ba1\u6570\u636e\u63d0\u4f9b\u4e86\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u7d2f\u79ef\u6d4b\u91cf\u503c\uff0c\u4f8b\u5982\u5199\u5165\u72b6\u6001\u5b58\u50a8\u7684\u5b57\u8282\u6570\u3002RocksDB \u516c\u5f00\u7684\u5c5e\u6027\u63d0\u4f9b\u5f53\u524d\u6d4b\u91cf\u503c\uff0c\u4f8b\u5982\u5f53\u524d\u4f7f\u7528\u7684\u5185\u5b58\u91cf\u3002\u8bf7\u6ce8\u610f\uff0c store-scope \u5185\u7f6e RocksDB \u72b6\u6001\u5b58\u50a8\u5f53\u524d\u5982\u4e0b\uff1a rocksdb-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u952e\u503c\u5b58\u50a8\uff09 rocksdb-window-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u6a71\u7a97\u5546\u5e97\uff09 rocksdb-session-state \uff08\u5bf9\u4e8e RocksDB \u652f\u6301\u7684\u4f1a\u8bdd\u5b58\u50a8\uff09 RocksDB \u57fa\u4e8e\u7edf\u8ba1\u7684\u6307\u6807\uff1a \u4ee5\u4e0b\u6240\u6709\u57fa\u4e8e\u7edf\u8ba1\u7684\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u90fd\u662f \uff0c debug \u56e0\u4e3a\u5728 RocksDB \u4e2d\u6536\u96c6\u7edf\u8ba1\u6570\u636e \u53ef\u80fd\u4f1a\u5bf9\u6027\u80fd\u4ea7\u751f\u5f71\u54cd \u3002\u6bcf\u5206\u949f\u4ece RocksDB \u72b6\u6001\u5b58\u50a8\u6536\u96c6\u57fa\u4e8e\u7edf\u8ba1\u6570\u636e\u7684\u6307\u6807\u3002\u5982\u679c\u72b6\u6001\u5b58\u50a8\u7531\u591a\u4e2a RocksDB \u5b9e\u4f8b\u7ec4\u6210\uff08\u5982 WindowStores \u548c SessionStores \u7684\u60c5\u51b5\uff09\uff0c\u5219\u6bcf\u4e2a\u6307\u6807\u90fd\u4f1a\u62a5\u544a\u72b6\u6001\u5b58\u50a8\u7684 RocksDB \u5b9e\u4f8b\u7684\u805a\u5408\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME bytes-written-rate The average number of bytes written per second to the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-written-total The total number of bytes written to the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-read-rate The average number of bytes read per second from the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-read-total The total number of bytes read from the RocksDB state store. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-bytes-flushed-rate The average number of bytes flushed per second from the memtable to disk. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-bytes-flushed-total The total number of bytes flushed from the memtable to disk. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-hit-ratio The ratio of memtable hits relative to all lookups to the memtable. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-flush-time-avg The average duration of memtable flushes to disc in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-flush-time-min The minimum duration of memtable flushes to disc in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) memtable-flush-time-max The maximum duration of memtable flushes to disc in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-data-hit-ratio The ratio of block cache hits for data blocks relative to all lookups for data blocks to the block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-index-hit-ratio The ratio of block cache hits for index blocks relative to all lookups for index blocks to the block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-filter-hit-ratio The ratio of block cache hits for filter blocks relative to all lookups for filter blocks to the block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) write-stall-duration-avg The average duration of write stalls in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) write-stall-duration-total The total duration of write stalls in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-read-compaction-rate The average number of bytes read per second during compaction. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) bytes-written-compaction-rate The average number of bytes written per second during compaction. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-time-avg The average duration of disc compactions in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-time-min The minimum duration of disc compactions in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-time-max The maximum duration of disc compactions in ms. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) number-open-files The number of current open files. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) number-file-errors-total The total number of file errors occurred. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) RocksDB \u57fa\u4e8e\u5c5e\u6027\u7684\u6307\u6807\uff1a \u4ee5\u4e0b\u6240\u6709\u57fa\u4e8e\u5c5e\u6027\u7684\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a \uff0c info \u5e76\u5728\u8bbf\u95ee\u6307\u6807\u65f6\u8fdb\u884c\u8bb0\u5f55\u3002\u5982\u679c\u72b6\u6001\u5b58\u50a8\u7531\u591a\u4e2a RocksDB \u5b9e\u4f8b\u7ec4\u6210\uff0c\u5982 WindowStores \u548c SessionStores \u7684\u60c5\u51b5\uff0c\u5219\u6bcf\u4e2a\u6307\u6807\u62a5\u544a\u72b6\u6001\u5b58\u50a8\u7684\u6240\u6709 RocksDB \u5b9e\u4f8b\u7684\u603b\u548c\uff0c\u5757\u7f13\u5b58\u6307\u6807\u9664\u5916 block-cache-* \u3002\u5982\u679c\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u4f7f\u7528\u81ea\u5df1\u7684\u5757\u7f13\u5b58\uff0c\u5219\u5757\u7f13\u5b58\u6307\u6807\u62a5\u544a\u6240\u6709 RocksDB \u5b9e\u4f8b\u7684\u603b\u548c\uff1b\u5982\u679c\u5728\u6240\u6709\u5b9e\u4f8b\u4e4b\u95f4\u5171\u4eab\u5355\u4e2a\u5757\u7f13\u5b58\uff0c\u5219\u5b83\u4eec\u4ec5\u62a5\u544a\u4e00\u4e2a\u5b9e\u4f8b\u7684\u8bb0\u5f55\u503c\u3002 METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME num-immutable-mem-table The number of immutable memtables that have not yet been flushed. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) cur-size-active-mem-table The approximate size of the active memtable in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) cur-size-all-mem-tables The approximate size of active and unflushed immutable memtables in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) size-all-mem-tables The approximate size of active, unflushed immutable, and pinned immutable memtables in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-entries-active-mem-table The number of entries in the active memtable. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-entries-imm-mem-tables The number of entries in the unflushed immutable memtables. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-deletes-active-mem-table The number of delete entries in the active memtable. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-deletes-imm-mem-tables The number of delete entries in the unflushed immutable memtables. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) mem-table-flush-pending This metric reports 1 if a memtable flush is pending, otherwise it reports 0. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-running-flushes The number of currently running flushes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) compaction-pending This metric reports 1 if at least one compaction is pending, otherwise it reports 0. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-running-compactions The number of currently running compactions. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) estimate-pending-compaction-bytes The estimated total number of bytes a compaction needs to rewrite on disk to get all levels down to under target size (only valid for level compaction). kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) total-sst-files-size The total size in bytes of all SST files. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) live-sst-files-size The total size in bytes of all SST files that belong to the latest LSM tree. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) num-live-versions Number of live versions of the LSM tree. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-capacity The capacity of the block cache in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-usage The memory size of the entries residing in block cache in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) block-cache-pinned-usage The memory size for the entries being pinned in the block cache in bytes. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) estimate-num-keys The estimated number of keys in the active and unflushed immutable memtables and storage. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) estimate-table-readers-mem The estimated memory in bytes used for reading SST tables, excluding memory used in block cache. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+) background-errors The total number of background errors. kafka.streams:type=stream-state-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),[store-scope]-id=([-.\\w]+)","title":"RocksDB Metrics"},{"location":"6/#record-cache-metrics","text":"\u4ee5\u4e0b\u6240\u6709\u6307\u6807\u7684\u8bb0\u5f55\u7ea7\u522b\u5747\u4e3a debug \uff1a METRIC/ATTRIBUTE NAME DESCRIPTION MBEAN NAME hit-ratio-avg The average cache hit ratio defined as the ratio of cache read hits over the total cache read requests. kafka.streams:type=stream-record-cache-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),record-cache-id=([-.\\w]+) hit-ratio-min The minimum cache hit ratio. kafka.streams:type=stream-record-cache-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),record-cache-id=([-.\\w]+) hit-ratio-max The maximum cache hit ratio. kafka.streams:type=stream-record-cache-metrics,thread-id=([-.\\w]+),task-id=([-.\\w]+),record-cache-id=([-.\\w]+)","title":"Record Cache Metrics"},{"location":"6/#others","text":"\u6211\u4eec\u5efa\u8bae\u76d1\u63a7 GC \u65f6\u95f4\u548c\u5176\u4ed6\u7edf\u8ba1\u4fe1\u606f\u4ee5\u53ca\u5404\u79cd\u670d\u52a1\u5668\u7edf\u8ba1\u4fe1\u606f\uff0c\u4f8b\u5982 CPU \u5229\u7528\u7387\u3001I/O \u670d\u52a1\u65f6\u95f4\u7b49\u3002\u5728\u5ba2\u6237\u7aef\uff0c\u6211\u4eec\u5efa\u8bae\u76d1\u63a7\u6d88\u606f/\u5b57\u8282\u7387\uff08\u5168\u5c40\u548c\u6bcf\u4e2a\u4e3b\u9898\uff09\u3001\u8bf7\u6c42\u7387/\u5927\u5c0f/\u65f6\u95f4\uff0c\u5728\u6d88\u8d39\u8005\u65b9\u9762\uff0c\u6240\u6709\u5206\u533a\u4e4b\u95f4\u6d88\u606f\u7684\u6700\u5927\u5ef6\u8fdf\u548c\u6700\u5c0f\u83b7\u53d6\u8bf7\u6c42\u7387\u3002\u4e3a\u4e86\u8ba9\u6d88\u8d39\u8005\u8ddf\u4e0a\uff0c\u6700\u5927\u5ef6\u8fdf\u9700\u8981\u5c0f\u4e8e\u9608\u503c\uff0c\u6700\u5c0f\u83b7\u53d6\u7387\u9700\u8981\u5927\u4e8e 0\u3002","title":"Others"},{"location":"6/#69","text":"","title":"6.9 \u52a8\u7269\u56ed\u7ba1\u7406\u5458"},{"location":"6/#_48","text":"\u5f53\u524d\u7684\u7a33\u5b9a\u5206\u652f\u662f 3.5\u3002Kafka \u4f1a\u5b9a\u671f\u66f4\u65b0\u4ee5\u5305\u542b 3.5 \u7cfb\u5217\u4e2d\u7684\u6700\u65b0\u7248\u672c\u3002","title":"\u7a33\u5b9a\u7248"},{"location":"6/#zookeeper","text":"\u968f\u7740 Apache Kafka 3.5 \u7684\u53d1\u5e03\uff0cZookeeper \u73b0\u5df2\u88ab\u6807\u8bb0\u4e3a\u5df2\u5f03\u7528\u3002\u8ba1\u5212\u5728 Apache Kafka \u7684\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\uff08\u7248\u672c 4.0\uff09\u4e2d\u5220\u9664 ZooKeeper\uff0c\u8be5\u7248\u672c\u8ba1\u5212\u6700\u65e9\u4e8e 2024 \u5e74 4 \u6708\u8fdb\u884c\u3002\u5728\u5f03\u7528\u9636\u6bb5\uff0c\u4ecd\u7136\u652f\u6301 ZooKeeper \u8fdb\u884c Kafka \u96c6\u7fa4\u7684\u5143\u6570\u636e\u7ba1\u7406\uff0c\u4f46\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\u7528\u4e8e\u65b0\u7684\u90e8\u7f72\u3002KRaft \u4e2d\u4ecd\u6709\u4e00\u5c0f\u90e8\u5206\u529f\u80fd\u6709\u5f85\u5b9e\u73b0\uff0c\u8bf7\u53c2\u9605 \u5f53\u524d\u7f3a\u5931\u7684\u529f\u80fd \u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002","title":"ZooKeeper \u5f03\u7528"},{"location":"6/#_49","text":"\u5c06\u73b0\u6709\u7684\u57fa\u4e8e ZooKeeper \u7684 Kafka \u96c6\u7fa4\u8fc1\u79fb\u5230 KRaft \u76ee\u524d\u5904\u4e8e\u9884\u89c8\u9636\u6bb5\uff0c\u6211\u4eec\u9884\u8ba1\u5b83\u53ef\u4ee5\u5728 3.6 \u7248\u672c\u4e2d\u6295\u5165\u751f\u4ea7\u4f7f\u7528\u3002\u5efa\u8bae\u7528\u6237\u5f00\u59cb\u8ba1\u5212\u8fc1\u79fb\u5230 KRaft\uff0c\u5e76\u5f00\u59cb\u6d4b\u8bd5\u4ee5\u63d0\u4f9b\u53cd\u9988\u3002\u6709\u5173\u5982\u4f55\u6267\u884c\u4ece ZooKeeper \u5230 KRaft \u5b9e\u65f6\u8fc1\u79fb\u4ee5\u53ca\u5f53\u524d\u9650\u5236\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605ZooKeeper \u5230 KRaft \u8fc1\u79fb\u3002","title":"\u79fb\u6c11"},{"location":"6/#3x-zookeeper","text":"\u652f\u6301 ZooKeeper \u6a21\u5f0f\u7684\u6700\u7ec8 3.x \u5c0f\u7248\u672c\u5c06\u5728\u53d1\u5e03\u540e 12 \u4e2a\u6708\u5185\u83b7\u5f97\u5173\u952e\u9519\u8bef\u4fee\u590d\u548c\u5b89\u5168\u4fee\u590d\u3002","title":"3.x \u548c ZooKeeper \u652f\u6301"},{"location":"6/#zookeeper-kraft","text":"\u6709\u5173 ZooKeeper \u5220\u9664\u548c\u8ba1\u5212\u7684 KRaft \u529f\u80fd\u53d1\u5e03\u7684\u6682\u5b9a\u65f6\u95f4\u8868\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u66f4\u65b0\uff0c\u8bf7\u53c2\u9605 KIP-833 \u3002","title":"ZooKeeper \u548c KRaft \u65f6\u95f4\u8f74"},{"location":"6/#zookeeper_1","text":"\u5728\u64cd\u4f5c\u4e0a\uff0c\u6211\u4eec\u4e3a\u5065\u5eb7\u7684 ZooKeeper \u5b89\u88c5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u7269\u7406/\u786c\u4ef6/\u7f51\u7edc\u5e03\u5c40\u4e2d\u7684\u5197\u4f59\uff1a\u5c3d\u91cf\u4e0d\u8981\u5c06\u5b83\u4eec\u5168\u90e8\u653e\u5728\u540c\u4e00\u4e2a\u673a\u67b6\u4e2d\uff0c\u4f53\u9762\uff08\u4f46\u4e0d\u8981\u75af\u72c2\uff09\u7684\u786c\u4ef6\uff0c\u5c3d\u91cf\u4fdd\u7559\u5197\u4f59\u7535\u6e90\u548c\u7f51\u7edc\u8def\u5f84\u7b49\u3002\u5178\u578b\u7684 ZooKeeper \u6574\u4f53\u6709 5 \u4e2a\u62167 \u53f0\u670d\u52a1\u5668\uff0c\u5206\u522b\u5141\u8bb8 2 \u53f0\u548c 3 \u53f0\u670d\u52a1\u5668\u5b95\u673a\u3002\u5982\u679c\u60a8\u7684\u90e8\u7f72\u89c4\u6a21\u8f83\u5c0f\uff0c\u90a3\u4e48\u4f7f\u7528 3 \u53f0\u670d\u52a1\u5668\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\uff0c\u4f46\u8bf7\u8bb0\u4f4f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u60a8\u53ea\u80fd\u5bb9\u5fcd 1 \u53f0\u670d\u52a1\u5668\u505c\u673a\u3002 I/O \u9694\u79bb\uff1a\u5982\u679c\u60a8\u6267\u884c\u5927\u91cf\u5199\u5165\u7c7b\u578b\u6d41\u91cf\uff0c\u60a8\u51e0\u4e4e\u80af\u5b9a\u5e0c\u671b\u4e8b\u52a1\u65e5\u5fd7\u4f4d\u4e8e\u4e13\u7528\u78c1\u76d8\u7ec4\u4e0a\u3002\u5bf9\u4e8b\u52a1\u65e5\u5fd7\u7684\u5199\u5165\u662f\u540c\u6b65\u7684\uff08\u4f46\u4e3a\u4e86\u6027\u80fd\u800c\u8fdb\u884c\u6279\u5904\u7406\uff09\uff0c\u56e0\u6b64\u5e76\u53d1\u5199\u5165\u4f1a\u663e\u7740\u5f71\u54cd\u6027\u80fd\u3002ZooKeeper \u5feb\u7167\u5c31\u662f\u8fd9\u6837\u4e00\u79cd\u5e76\u53d1\u5199\u5165\u6e90\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b\u5e94\u8be5\u5199\u5165\u4e0e\u4e8b\u52a1\u65e5\u5fd7\u5206\u5f00\u7684\u78c1\u76d8\u7ec4\u4e0a\u3002\u5feb\u7167\u5f02\u6b65\u5199\u5165\u78c1\u76d8\uff0c\u56e0\u6b64\u901a\u5e38\u53ef\u4ee5\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u548c\u6d88\u606f\u65e5\u5fd7\u6587\u4ef6\u5171\u4eab\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 dataLogDir \u53c2\u6570\u5c06\u670d\u52a1\u5668\u914d\u7f6e\u4e3a\u4f7f\u7528\u5355\u72ec\u7684\u78c1\u76d8\u7ec4\u3002 \u5e94\u7528\u7a0b\u5e8f\u9694\u79bb\uff1a\u9664\u975e\u60a8\u771f\u6b63\u4e86\u89e3\u8981\u5b89\u88c5\u5728\u540c\u4e00\u673a\u5668\u4e0a\u7684\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7684\u5e94\u7528\u7a0b\u5e8f\u6a21\u5f0f\uff0c\u5426\u5219\u6700\u597d\u5355\u72ec\u8fd0\u884c ZooKeeper\uff08\u5c3d\u7ba1\u8fd9\u53ef\u80fd\u662f\u4e0e\u786c\u4ef6\u529f\u80fd\u7684\u5e73\u8861\u884c\u4e3a\uff09\u3002 \u8c28\u614e\u4f7f\u7528\u865a\u62df\u5316\uff1a\u5b83\u53ef\u4ee5\u5de5\u4f5c\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u60a8\u7684\u96c6\u7fa4\u5e03\u5c40\u3001\u8bfb/\u5199\u6a21\u5f0f\u548c SLA\uff0c\u4f46\u662f\u865a\u62df\u5316\u5c42\u5f15\u5165\u7684\u5fae\u5c0f\u5f00\u9500\u53ef\u80fd\u4f1a\u7d2f\u79ef\u8d77\u6765\u5e76\u5bfc\u81f4 ZooKeeper \u5931\u6548\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u5bf9\u65f6\u95f4\u975e\u5e38\u654f\u611f ZooKeeper \u914d\u7f6e\uff1a\u5b83\u662f java\uff0c\u8bf7\u786e\u4fdd\u7ed9\u5b83\u201c\u8db3\u591f\u201d\u7684\u5806\u7a7a\u95f4\uff08\u6211\u4eec\u901a\u5e38\u4f7f\u7528 3-5G \u8fd0\u884c\u5b83\u4eec\uff0c\u4f46\u8fd9\u4e3b\u8981\u662f\u7531\u4e8e\u6211\u4eec\u8fd9\u91cc\u7684\u6570\u636e\u96c6\u5927\u5c0f\uff09\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u6211\u4eec\u6ca1\u6709\u4e00\u4e2a\u597d\u7684\u516c\u5f0f\uff0c\u4f46\u8bf7\u8bb0\u4f4f\uff0c\u5141\u8bb8\u66f4\u591a\u7684 ZooKeeper \u72b6\u6001\u610f\u5473\u7740\u5feb\u7167\u53ef\u80fd\u4f1a\u53d8\u5f97\u5f88\u5927\uff0c\u800c\u5927\u5feb\u7167\u4f1a\u5f71\u54cd\u6062\u590d\u65f6\u95f4\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u5feb\u7167\u53d8\u5f97\u592a\u5927\uff08\u51e0 GB\uff09\uff0c\u90a3\u4e48\u60a8\u53ef\u80fd\u9700\u8981\u589e\u52a0 initLimit \u53c2\u6570\uff0c\u4ee5\u4fbf\u4e3a\u670d\u52a1\u5668\u63d0\u4f9b\u8db3\u591f\u7684\u65f6\u95f4\u6765\u6062\u590d\u5e76\u52a0\u5165\u96c6\u5408\u3002 \u76d1\u63a7\uff1aJMX \u548c 4 \u5b57\u6bcd\u5355\u8bcd (4lw) \u547d\u4ee4\u90fd\u975e\u5e38\u6709\u7528\uff0c\u5b83\u4eec\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u786e\u5b9e\u91cd\u53e0\uff08\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u66f4\u559c\u6b22 4 \u5b57\u6bcd\u547d\u4ee4\uff0c\u5b83\u4eec\u770b\u8d77\u6765\u66f4\u53ef\u9884\u6d4b\uff0c\u6216\u8005\u81f3\u5c11\uff0c\u5b83\u4eec\u4e0eLI \u76d1\u63a7\u57fa\u7840\u8bbe\u65bd\uff09 \u4e0d\u8981\u8fc7\u5ea6\u6784\u5efa\u96c6\u7fa4\uff1a\u5927\u578b\u96c6\u7fa4\uff0c\u5c24\u5176\u662f\u5728\u5199\u5165\u5927\u91cf\u4f7f\u7528\u6a21\u5f0f\u4e2d\uff0c\u610f\u5473\u7740\u5927\u91cf\u7684\u96c6\u7fa4\u5185\u901a\u4fe1\uff08\u5199\u5165\u548c\u540e\u7eed\u96c6\u7fa4\u6210\u5458\u66f4\u65b0\u7684\u4ef2\u88c1\uff09\uff0c\u4f46\u4e0d\u8981\u6784\u5efa\u4e0d\u8db3\uff08\u5e76\u6709\u6df9\u6ca1\u96c6\u7fa4\u7684\u98ce\u9669\uff09\u3002\u62e5\u6709\u66f4\u591a\u670d\u52a1\u5668\u4f1a\u589e\u52a0\u60a8\u7684\u8bfb\u53d6\u80fd\u529b\u3002 \u603b\u4f53\u800c\u8a00\uff0c\u6211\u4eec\u5c1d\u8bd5\u4f7f ZooKeeper \u7cfb\u7edf\u5c3d\u53ef\u80fd\u5c0f\uff0c\u4ee5\u5904\u7406\u8d1f\u8f7d\uff08\u52a0\u4e0a\u6807\u51c6\u589e\u957f\u5bb9\u91cf\u89c4\u5212\uff09\u5e76\u5c3d\u53ef\u80fd\u7b80\u5355\u3002\u4e0e\u5b98\u65b9\u7248\u672c\u76f8\u6bd4\uff0c\u6211\u4eec\u5c3d\u91cf\u4e0d\u5bf9\u914d\u7f6e\u6216\u5e94\u7528\u7a0b\u5e8f\u5e03\u5c40\u505a\u4efb\u4f55\u82b1\u54e8\u7684\u4e8b\u60c5\uff0c\u5e76\u5c3d\u53ef\u80fd\u4fdd\u6301\u5176\u72ec\u7acb\u6027\u3002\u7531\u4e8e\u8fd9\u4e9b\u539f\u56e0\uff0c\u6211\u4eec\u503e\u5411\u4e8e\u8df3\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u6253\u5305\u7248\u672c\uff0c\u56e0\u4e3a\u5b83\u503e\u5411\u4e8e\u5c1d\u8bd5\u5c06\u5185\u5bb9\u653e\u5165\u64cd\u4f5c\u7cfb\u7edf\u6807\u51c6\u5c42\u6b21\u7ed3\u6784\u4e2d\uff0c\u8fd9\u53ef\u80fd\u4f1a\u201c\u6df7\u4e71\u201d\uff0c\u56e0\u4e3a\u7f3a\u4e4f\u66f4\u597d\u7684\u63aa\u8f9e\u65b9\u5f0f\u3002","title":"\u8fd0\u884c ZooKeeper"},{"location":"6/#610-kraft","text":"","title":"6.10 KRaft"},{"location":"6/#_50","text":"","title":"\u914d\u7f6e"},{"location":"6/#_51","text":"\u5728 KRaft \u6a21\u5f0f\u4e0b\uff0c\u6bcf\u4e2a Kafka \u670d\u52a1\u5668\u90fd\u53ef\u4ee5\u4f7f\u7528\u8be5\u5c5e\u6027\u914d\u7f6e\u4e3a\u63a7\u5236\u5668\u3001\u4ee3\u7406\u6216\u4e24\u8005 process.roles \u3002\u8be5\u5c5e\u6027\u53ef\u4ee5\u5177\u6709\u4ee5\u4e0b\u503c\uff1a \u5982\u679c process.roles \u8bbe\u7f6e\u4e3a broker \uff0c\u5219\u670d\u52a1\u5668\u5145\u5f53\u4ee3\u7406\u3002 \u5982\u679c process.roles \u8bbe\u7f6e\u4e3a controller \uff0c\u5219\u670d\u52a1\u5668\u5145\u5f53\u63a7\u5236\u5668\u3002 \u5982\u679c process.roles \u8bbe\u7f6e\u4e3a broker,controller \uff0c\u5219\u670d\u52a1\u5668\u65e2\u5145\u5f53\u4ee3\u7406\u53c8\u5145\u5f53\u63a7\u5236\u5668\u3002 \u5982\u679c process.roles \u6839\u672c\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5219\u5047\u5b9a\u5904\u4e8e ZooKeeper \u6a21\u5f0f\u3002 \u65e2\u5145\u5f53\u4ee3\u7406\u53c8\u5145\u5f53\u63a7\u5236\u5668\u7684 Kafka \u670d\u52a1\u5668\u88ab\u79f0\u4e3a\u201c\u7ec4\u5408\u201d\u670d\u52a1\u5668\u3002\u5bf9\u4e8e\u5f00\u53d1\u73af\u5883\u7b49\u5c0f\u578b\u7528\u4f8b\uff0c\u7ec4\u5408\u670d\u52a1\u5668\u66f4\u6613\u4e8e\u64cd\u4f5c\u3002\u4e3b\u8981\u7f3a\u70b9\u662f\u63a7\u5236\u5668\u4e0e\u7cfb\u7edf\u5176\u4ed6\u90e8\u5206\u7684\u9694\u79bb\u7a0b\u5ea6\u8f83\u4f4e\u3002\u4f8b\u5982\uff0c\u65e0\u6cd5\u5728\u7ec4\u5408\u6a21\u5f0f\u4e0b\u4e0e\u4ee3\u7406\u5206\u5f00\u6eda\u52a8\u6216\u6269\u5c55\u63a7\u5236\u5668\u3002\u5728\u5173\u952e\u90e8\u7f72\u73af\u5883\u4e2d\u4e0d\u5efa\u8bae\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f\u3002","title":"\u6d41\u7a0b\u89d2\u8272"},{"location":"6/#_52","text":"\u5728KRaft\u6a21\u5f0f\u4e0b\uff0c\u9009\u62e9\u7279\u5b9a\u7684Kafka\u670d\u52a1\u5668\u4f5c\u4e3a\u63a7\u5236\u5668\uff08\u4e0e\u57fa\u4e8eZooKeeper\u7684\u6a21\u5f0f\u4e0d\u540c\uff0c\u5728\u8be5\u6a21\u5f0f\u4e2d\u4efb\u4f55\u670d\u52a1\u5668\u90fd\u53ef\u4ee5\u6210\u4e3a\u63a7\u5236\u5668\uff09\u3002\u88ab\u9009\u4e3a\u63a7\u5236\u5668\u7684\u670d\u52a1\u5668\u5c06\u53c2\u4e0e\u5143\u6570\u636e\u4ef2\u88c1\u3002\u6bcf\u4e2a\u63a7\u5236\u5668\u90fd\u662f\u5f53\u524d\u6d3b\u52a8\u63a7\u5236\u5668\u7684\u6d3b\u52a8\u63a7\u5236\u5668\u6216\u70ed\u5907\u7528\u63a7\u5236\u5668\u3002 Kafka \u7ba1\u7406\u5458\u901a\u5e38\u4f1a\u9009\u62e9 3 \u6216 5 \u4e2a\u670d\u52a1\u5668\u6765\u62c5\u4efb\u6b64\u89d2\u8272\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6210\u672c\u548c\u7cfb\u7edf\u5728\u4e0d\u5f71\u54cd\u53ef\u7528\u6027\u7684\u60c5\u51b5\u4e0b\u5e94\u627f\u53d7\u7684\u5e76\u53d1\u6545\u969c\u6570\u91cf\u7b49\u56e0\u7d20\u3002\u5927\u591a\u6570\u63a7\u5236\u5668\u5fc5\u987b\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u624d\u80fd\u4fdd\u6301\u53ef\u7528\u6027\u30023\u4e2a\u63a7\u5236\u5668\u65f6\uff0c\u96c6\u7fa4\u53ef\u4ee5\u5bb9\u5fcd1\u4e2a\u63a7\u5236\u5668\u6545\u969c\uff1b\u5982\u679c\u6709 5 \u4e2a\u63a7\u5236\u5668\uff0c\u96c6\u7fa4\u53ef\u4ee5\u5bb9\u5fcd 2 \u4e2a\u63a7\u5236\u5668\u6545\u969c\u3002 Kafka \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u90fd\u4f7f\u7528\u8be5 controller.quorum.voters \u5c5e\u6027\u53d1\u73b0\u4ef2\u88c1\u6295\u7968\u8005\u3002\u8fd9\u6807\u8bc6\u4e86\u5e94\u4f7f\u7528\u7684\u4ef2\u88c1\u63a7\u5236\u5668\u670d\u52a1\u5668\u3002\u5fc5\u987b\u679a\u4e3e\u6240\u6709\u63a7\u5236\u5668\u3002\u6bcf\u4e2a\u63a7\u5236\u5668\u5747\u901a\u8fc7\u5176 id \u3001 host \u548c port \u4fe1\u606f\u8fdb\u884c\u6807\u8bc6\u3002\u4f8b\u5982\uff1a controller.quorum.voters=id1@host1:port1,id2@host2:port2,id3@host3:port3 \u5982\u679c\u4e00\u4e2aKafka\u96c6\u7fa4\u67093\u4e2a\u63a7\u5236\u5668\uff0c\u5206\u522b\u540d\u4e3acontroller1\u3001controller2\u548ccontroller3\uff0c\u90a3\u4e48controller1\u53ef\u80fd\u6709\u4ee5\u4e0b\u914d\u7f6e\uff1a process.roles=controller node.id=1 listeners=CONTROLLER://controller1.example.com:9093 controller.quorum.voters=1@controller1.example.com:9093,2@controller2.example.com:9093,3@controller3.example.com:9093 \u6bcf\u4e2abroker\u548c\u63a7\u5236\u5668\u90fd\u5fc5\u987b\u8bbe\u7f6e\u8be5 controller.quorum.voters \u5c5e\u6027\u3002\u5c5e\u6027\u4e2d\u63d0\u4f9b\u7684\u8282\u70b9 ID controller.quorum.voters \u5fc5\u987b\u4e0e\u63a7\u5236\u5668\u670d\u52a1\u5668\u4e0a\u7684\u76f8\u5e94 ID \u5339\u914d\u3002\u4f8b\u5982\uff0c\u5728controller1\u4e0a\uff0cnode.id\u5fc5\u987b\u8bbe\u7f6e\u4e3a1\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002\u6bcf\u4e2a\u8282\u70b9 ID \u5728\u7279\u5b9a\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u4efb\u4f55\u4e24\u4e2a\u670d\u52a1\u5668\u90fd\u4e0d\u80fd\u5177\u6709\u76f8\u540c\u7684\u8282\u70b9 ID\uff0c\u65e0\u8bba\u5176 process.roles \u503c\u5982\u4f55\u3002","title":"\u63a7\u5236\u5668"},{"location":"6/#_53","text":"\u8be5 kafka-storage.sh random-uuid \u547d\u4ee4\u53ef\u7528\u4e8e\u4e3a\u65b0\u96c6\u7fa4\u751f\u6210\u96c6\u7fa4 ID\u3002\u4f7f\u7528\u8be5\u547d\u4ee4\u683c\u5f0f\u5316\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u65f6\uff0c\u5fc5\u987b\u4f7f\u7528\u6b64\u96c6\u7fa4 ID kafka-storage.sh format \u3002 \u8fd9\u4e0eKafka\u8fc7\u53bb\u7684\u8fd0\u4f5c\u65b9\u5f0f\u4e0d\u540c\u3002\u6b64\u524d\uff0cKafka\u4f1a\u81ea\u52a8\u683c\u5f0f\u5316\u7a7a\u767d\u5b58\u50a8\u76ee\u5f55\uff0c\u5e76\u81ea\u52a8\u751f\u6210\u65b0\u7684\u96c6\u7fa4ID\u3002\u8fdb\u884c\u66f4\u6539\u7684\u539f\u56e0\u4e4b\u4e00\u662f\u81ea\u52a8\u683c\u5f0f\u5316\u6709\u65f6\u4f1a\u63a9\u76d6\u9519\u8bef\u60c5\u51b5\u3002\u8fd9\u5bf9\u4e8e\u63a7\u5236\u5668\u548c\u4ee3\u7406\u670d\u52a1\u5668\u7ef4\u62a4\u7684\u5143\u6570\u636e\u65e5\u5fd7\u5c24\u5176\u91cd\u8981\u3002\u5982\u679c\u5927\u591a\u6570\u63a7\u5236\u5668\u80fd\u591f\u4ee5\u7a7a\u65e5\u5fd7\u76ee\u5f55\u542f\u52a8\uff0c\u5219\u53ef\u80fd\u4f1a\u5728\u4e22\u5931\u5df2\u63d0\u4ea4\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u9009\u4e3e\u9886\u5bfc\u8005\u3002","title":"\u5b58\u50a8\u5de5\u5177"},{"location":"6/#_54","text":"","title":"\u8c03\u8bd5"},{"location":"6/#_55","text":"\u8be5 kafka-metadata-quorum \u5de5\u5177\u53ef\u7528\u4e8e\u63cf\u8ff0\u96c6\u7fa4\u5143\u6570\u636e\u5206\u533a\u7684\u8fd0\u884c\u65f6\u72b6\u6001\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u663e\u793a\u5143\u6570\u636e\u4ef2\u88c1\u7684\u6458\u8981\uff1a > bin/kafka-metadata-quorum.sh --bootstrap-server broker_host:port describe --status ClusterId: fMCL8kv1SWm87L_Md-I2hg LeaderId: 3002 LeaderEpoch: 2 HighWatermark: 10 MaxFollowerLag: 0 MaxFollowerLagTimeMs: -1 CurrentVoters: [3000,3001,3002] CurrentObservers: [0,1,2]","title":"\u5143\u6570\u636e\u4ef2\u88c1\u5de5\u5177"},{"location":"6/#_56","text":"\u8be5 kafka-dump-log \u5de5\u5177\u53ef\u7528\u4e8e\u8c03\u8bd5\u96c6\u7fa4\u5143\u6570\u636e\u76ee\u5f55\u7684\u65e5\u5fd7\u6bb5\u548c\u5feb\u7167\u3002\u8be5\u5de5\u5177\u5c06\u626b\u63cf\u63d0\u4f9b\u7684\u6587\u4ef6\u5e76\u89e3\u7801\u5143\u6570\u636e\u8bb0\u5f55\u3002\u4f8b\u5982\uff0c\u6b64\u547d\u4ee4\u89e3\u7801\u5e76\u6253\u5370\u7b2c\u4e00\u4e2a\u65e5\u5fd7\u6bb5\u4e2d\u7684\u8bb0\u5f55\uff1a > bin/kafka-dump-log.sh --cluster-metadata-decoder --files metadata_log_dir/__cluster_metadata-0/00000000000000000000.log \u6b64\u547d\u4ee4\u89e3\u7801\u5e76\u6253\u5370\u96c6\u7fa4\u5143\u6570\u636e\u5feb\u7167\u4e2d\u7684\u8bb0\u5f55\uff1a > bin/kafka-dump-log.sh --cluster-metadata-decoder --files metadata_log_dir/__cluster_metadata-0/00000000000000000100-0000000001.checkpoint","title":"\u8f6c\u50a8\u65e5\u5fd7\u5de5\u5177"},{"location":"6/#_57","text":"\u8be5 kafka-metadata-shell \u5de5\u5177\u53ef\u7528\u4e8e\u4ea4\u4e92\u5f0f\u68c0\u67e5\u96c6\u7fa4\u5143\u6570\u636e\u5206\u533a\u7684\u72b6\u6001\uff1a > bin/kafka-metadata-shell.sh --snapshot metadata_log_dir/__cluster_metadata-0/00000000000000000000.log >> ls / brokers local metadataQuorum topicIds topics >> ls /topics foo >> cat /topics/foo/0/data { \"partitionId\" : 0, \"topicId\" : \"5zoAlv-xEh9xRANKXt1Lbg\", \"replicas\" : [ 1 ], \"isr\" : [ 1 ], \"removingReplicas\" : null, \"addingReplicas\" : null, \"leader\" : 1, \"leaderEpoch\" : 0, \"partitionEpoch\" : 0 } >> exit","title":"\u5143\u6570\u636e\u5916\u58f3"},{"location":"6/#_58","text":"Kafka \u670d\u52a1\u5668 process.role \u5e94\u8bbe\u7f6e\u4e3a\u5176\u4e2d\u4e4b\u4e00 broker \u6216 controller \u4f46\u4e0d\u80fd\u540c\u65f6\u8bbe\u7f6e\u4e24\u8005\u3002\u7ec4\u5408\u6a21\u5f0f\u53ef\u4ee5\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u4f46\u5728\u5173\u952e\u90e8\u7f72\u73af\u5883\u4e2d\u5e94\u907f\u514d\u4f7f\u7528\u3002 \u4e3a\u4e86\u5b9e\u73b0\u5197\u4f59\uff0cKafka \u96c6\u7fa4\u5e94\u4f7f\u7528 3 \u4e2a\u63a7\u5236\u5668\u3002\u5728\u5173\u952e\u73af\u5883\u4e2d\u4e0d\u5efa\u8bae\u4f7f\u7528\u8d85\u8fc7 3 \u4e2a\u63a7\u5236\u5668\u3002\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u51fa\u73b0\u90e8\u5206\u7f51\u7edc\u6545\u969c\u65f6\uff0c\u96c6\u7fa4\u5143\u6570\u636e\u4ef2\u88c1\u53ef\u80fd\u4f1a\u53d8\u5f97\u4e0d\u53ef\u7528\u3002\u6b64\u9650\u5236\u5c06\u5728 Kafka \u7684\u672a\u6765\u7248\u672c\u4e2d\u5f97\u5230\u89e3\u51b3\u3002 Kafka \u63a7\u5236\u5668\u5c06\u96c6\u7fa4\u7684\u6240\u6709\u5143\u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u548c\u78c1\u76d8\u4e0a\u3002\u6211\u4eec\u8ba4\u4e3a\uff0c\u5bf9\u4e8e\u5178\u578b\u7684 Kafka \u96c6\u7fa4\uff0c5GB \u4e3b\u5185\u5b58\u548c\u5143\u6570\u636e\u65e5\u5fd7\u7ba1\u7406\u5668\u4e0a\u7684 5GB \u78c1\u76d8\u7a7a\u95f4\u5c31\u8db3\u591f\u4e86\u3002","title":"\u90e8\u7f72\u6ce8\u610f\u4e8b\u9879"},{"location":"6/#_59","text":"KRaft \u6a21\u5f0f\u4e2d\u672a\u5b8c\u5168\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a \u652f\u6301\u5177\u6709\u591a\u4e2a\u5b58\u50a8\u76ee\u5f55\u7684JBOD\u914d\u7f6e \u4fee\u6539\u72ec\u7acb KRaft \u63a7\u5236\u5668\u4e0a\u7684\u67d0\u4e9b\u52a8\u6001\u914d\u7f6e \u59d4\u6258\u4ee3\u5e01","title":"\u7f3a\u5c11\u7684\u529f\u80fd"},{"location":"6/#zookeeper-kraft_1","text":"ZooKeeper \u5230 KRaft \u7684\u8fc1\u79fb\u88ab\u89c6\u4e3a\u65e9\u671f\u8bbf\u95ee\u529f\u80fd\uff0c\u4e0d\u5efa\u8bae\u7528\u4e8e\u751f\u4ea7\u96c6\u7fa4\u3002 ZK \u5230 KRaft \u7684\u8fc1\u79fb\u5c1a\u4e0d\u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a \u8fc1\u79fb\u671f\u95f4\u6216\u8fc1\u79fb\u4e4b\u540e\u964d\u7ea7\u5230 ZooKeeper \u6a21\u5f0f KRaft \u5c1a\u4e0d\u652f\u6301\u7684 \u5176\u4ed6\u529f\u80fd \u8bf7\u4f7f\u7528 \u9879\u76ee JIRA \u548c\u201ckraft\u201d\u7ec4\u4ef6\u62a5\u544a ZooKeeper \u5230 KRaft \u8fc1\u79fb\u7684\u95ee\u9898\u3002","title":"ZooKeeper \u5230 KRaft \u8fc1\u79fb"},{"location":"6/#_60","text":"\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528\u672f\u8bed\u201c\u8fc1\u79fb\u201d\u6765\u6307\u5c06Kafka\u96c6\u7fa4\u7684\u5143\u6570\u636e\u7cfb\u7edf\u4eceZooKeeper\u66f4\u6539\u4e3aKRaft\u5e76\u8fc1\u79fb\u73b0\u6709\u5143\u6570\u636e\u7684\u8fc7\u7a0b\u3002\u201c\u5347\u7ea7\u201d\u662f\u6307\u5b89\u88c5\u66f4\u65b0\u7248\u672c\u7684 Kafka\u3002\u4e0d\u5efa\u8bae\u5728\u6267\u884c\u5143\u6570\u636e\u8fc1\u79fb\u7684\u540c\u65f6\u5347\u7ea7\u8f6f\u4ef6\u3002 \u6211\u4eec\u8fd8\u4f7f\u7528\u672f\u8bed\u201cZK \u6a21\u5f0f\u201d\u6765\u6307\u4ee3\u4f7f\u7528 ZooKeeper \u4f5c\u4e3a\u5143\u6570\u636e\u7cfb\u7edf\u7684 Kafka \u4ee3\u7406\u3002\u201cKRaft \u6a21\u5f0f\u201d\u662f\u6307\u4f7f\u7528 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u4f5c\u4e3a\u5176\u5143\u6570\u636e\u7cfb\u7edf\u7684 Kafka \u4ee3\u7406\u3002","title":"\u672f\u8bed"},{"location":"6/#_61","text":"\u5728\u5f00\u59cb\u8fc1\u79fb\u4e4b\u524d\uff0cKafka \u4ee3\u7406\u5fc5\u987b\u5347\u7ea7\u5230\u8f6f\u4ef6\u7248\u672c 3.5.0\uff0c\u5e76\u5c06\u201cinter.broker.protocol.version\u201d\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u201c3.5\u201d\u3002\u6709\u5173\u5347\u7ea7\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605 \u5347\u7ea7\u5230 3.5.0 \u3002 \u5efa\u8bae\u5728\u8fc1\u79fb\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u65f6\u4e3a\u8fc1\u79fb\u7ec4\u4ef6\u542f\u7528 TRACE \u7ea7\u522b\u65e5\u5fd7\u8bb0\u5f55\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5c06\u4ee5\u4e0b log4j \u914d\u7f6e\u6dfb\u52a0\u5230\u6bcf\u4e2a KRaft \u63a7\u5236\u5668\u7684\u201clog4j.properties\u201d\u6587\u4ef6\u6765\u5b8c\u6210\u3002 log4j.logger.org.apache.kafka.metadata.migration=TRACE \u5728\u8fc1\u79fb\u671f\u95f4\u5728 KRaft \u63a7\u5236\u5668\u548c ZK \u4ee3\u7406\u4e0a\u542f\u7528 DEBUG \u65e5\u5fd7\u8bb0\u5f55\u901a\u5e38\u5f88\u6709\u7528\u3002","title":"\u51c6\u5907\u8fc1\u79fb"},{"location":"6/#kraft_2","text":"\u5728\u5f00\u59cb\u8fc1\u79fb\u4e4b\u524d\u9700\u8981\u505a\u4e24\u4ef6\u4e8b\u3002\u9996\u5148\uff0c\u5fc5\u987b\u914d\u7f6e\u4ee3\u7406\u4ee5\u652f\u6301\u8fc1\u79fb\uff0c\u5176\u6b21\uff0c\u5fc5\u987b\u90e8\u7f72 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u3002KRaft \u63a7\u5236\u5668\u5e94\u914d\u7f6e\u4e0e\u73b0\u6709 Kafka \u96c6\u7fa4\u76f8\u540c\u7684\u96c6\u7fa4 ID\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u4ee3\u7406\u6570\u636e\u76ee\u5f55\u4e2d\u7684\u201cmeta.properties\u201d\u6587\u4ef6\u4e4b\u4e00\u6216\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u627e\u5230\u3002 ./bin/zookeeper-shell.sh localhost:2181 get /cluster/id KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u8fd8\u5e94\u914d\u7f6e\u6700\u65b0 metadata.version \u7684\u201c3.4\u201d\u3002\u6709\u5173 KRaft \u90e8\u7f72\u7684\u66f4\u591a\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605 \u4e0a\u8ff0\u6587\u6863 \u3002 \u9664\u4e86\u6807\u51c6\u7684 KRaft \u914d\u7f6e\u4e4b\u5916\uff0cKRaft \u63a7\u5236\u5668\u8fd8\u9700\u8981\u542f\u7528\u8fc1\u79fb\u652f\u6301\u5e76\u63d0\u4f9b ZooKeeper \u8fde\u63a5\u914d\u7f6e\u3002 \u4ee5\u4e0b\u662f\u51c6\u5907\u8fc1\u79fb\u7684 KRaft \u63a7\u5236\u5668\u7684\u793a\u4f8b\u914d\u7f6e\uff1a # Sample KRaft cluster controller.properties listening on 9093 process.roles=controller node.id=3000 controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER listeners=CONTROLLER://:9093 # Enable the migration zookeeper.metadata.migration.enable=true # ZooKeeper client configuration zookeeper.connect=localhost:2181 # Other configs ... \u6ce8\u610f\uff1aKRaft \u96c6\u7fa4 node.id \u503c\u5fc5\u987b\u4e0e\u4efb\u4f55\u73b0\u6709\u7684 ZK \u4ee3\u7406\u4e0d\u540c broker.id \u3002\u5728 KRaft \u6a21\u5f0f\u4e2d\uff0c\u4ee3\u7406\u548c\u63a7\u5236\u5668\u5171\u4eab\u76f8\u540c\u7684 Node ID \u547d\u540d\u7a7a\u95f4\u3002","title":"\u914d\u7f6e KRaft \u63a7\u5236\u5668\u4ef2\u88c1"},{"location":"6/#_62","text":"\u4e00\u65e6 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u542f\u52a8\uff0c\u4ee3\u7406\u5c06\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u5e76\u91cd\u65b0\u542f\u52a8\u3002\u4ee3\u7406\u53ef\u4ee5\u4ee5\u6eda\u52a8\u65b9\u5f0f\u91cd\u65b0\u542f\u52a8\uff0c\u4ee5\u907f\u514d\u5f71\u54cd\u96c6\u7fa4\u53ef\u7528\u6027\u3002\u6bcf\u4e2a\u4ee3\u7406\u90fd\u9700\u8981\u4ee5\u4e0b\u914d\u7f6e\u624d\u80fd\u4e0e KRaft \u63a7\u5236\u5668\u901a\u4fe1\u5e76\u542f\u7528\u8fc1\u79fb\u3002 controller.quorum.voters controller.listener.names \u8fd8\u5e94\u5c06controller.listener.name\u6dfb\u52a0\u5230 listener.security.property.map zookeeper.metadata.migration.enable \u4ee5\u4e0b\u662f\u51c6\u5907\u8fc1\u79fb\u7684\u4ee3\u7406\u7684\u793a\u4f8b\u914d\u7f6e\uff1a # Sample ZK broker server.properties listening on 9092 broker.id=0 listeners=PLAINTEXT://:9092 advertised.listeners=PLAINTEXT://localhost:9092 listener.security.protocol.map=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT # Set the IBP inter.broker.protocol.version=3.5 # Enable the migration zookeeper.metadata.migration.enable=true # ZooKeeper client configuration zookeeper.connect=localhost:2181 # KRaft controller quorum configuration controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER \u6ce8\u610f\uff1a\u4f7f\u7528\u5fc5\u8981\u7684\u914d\u7f6e\u91cd\u65b0\u542f\u52a8\u6700\u7ec8\u7684 ZK \u4ee3\u7406\u540e\uff0c\u8fc1\u79fb\u5c06\u81ea\u52a8\u5f00\u59cb\u3002 \u8fc1\u79fb\u5b8c\u6210\u540e\uff0c\u5728\u4e3b\u63a7\u4e0a\u53ef\u4ee5\u89c2\u5bdf\u5230\u4e00\u6761INFO\u7ea7\u522b\u7684\u65e5\u5fd7\uff1a Completed migration of metadata from Zookeeper to KRaft","title":"\u5728\u4ee3\u7406\u4e0a\u542f\u7528\u8fc1\u79fb"},{"location":"6/#kraft_3","text":"\u4e00\u65e6 KRaft \u63a7\u5236\u5668\u5b8c\u6210\u5143\u6570\u636e\u8fc1\u79fb\uff0c\u4ee3\u7406\u4ecd\u5c06\u4ee5 ZK \u6a21\u5f0f\u8fd0\u884c\u3002\u5f53 KRaft \u63a7\u5236\u5668\u5904\u4e8e\u8fc1\u79fb\u6a21\u5f0f\u65f6\uff0c\u5b83\u5c06\u7ee7\u7eed\u5411 ZK \u6a21\u5f0f\u4ee3\u7406\u53d1\u9001\u63a7\u5236\u5668 RPC\u3002\u8fd9\u5305\u62ec UpdateMetadata \u548c LeaderAndIsr \u7b49 RPC\u3002 \u8981\u5c06\u4ee3\u7406\u8fc1\u79fb\u5230 KRaft\uff0c\u53ea\u9700\u5c06\u5b83\u4eec\u91cd\u65b0\u914d\u7f6e\u4e3a KRaft \u4ee3\u7406\u5e76\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u3002\u4ee5\u4e0a\u9762\u7684\u4ee3\u7406\u914d\u7f6e\u4e3a\u4f8b\uff0c\u6211\u4eec\u5c06\u66ff\u6362 broker.id \u4e3a node.id \u5e76\u6dfb\u52a0 process.roles=broker \u3002\u4ee3\u7406\u5728\u91cd\u65b0\u542f\u52a8\u65f6\u4fdd\u6301\u76f8\u540c\u7684\u4ee3\u7406/\u8282\u70b9 ID \u975e\u5e38\u91cd\u8981\u3002\u6b64\u65f6\u5e94\u8be5\u5220\u9664 Zookeeper \u914d\u7f6e\u3002 # Sample KRaft broker server.properties listening on 9092 process.roles=broker node.id=0 listeners=PLAINTEXT://:9092 advertised.listeners=PLAINTEXT://localhost:9092 listener.security.protocol.map=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT # Don't set the IBP, KRaft uses \"metadata.version\" feature flag # inter.broker.protocol.version=3.5 # Remove the migration enabled flag # zookeeper.metadata.migration.enable=true # Remove ZooKeeper client configuration # zookeeper.connect=localhost:2181 # Keep the KRaft controller quorum configuration controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER \u6bcf\u4e2a\u4ee3\u7406\u90fd\u4f1a\u4f7f\u7528 KRaft \u914d\u7f6e\u91cd\u65b0\u542f\u52a8\uff0c\u76f4\u5230\u6574\u4e2a\u96c6\u7fa4\u5728 KRaft \u6a21\u5f0f\u4e0b\u8fd0\u884c\u3002","title":"\u5c06\u4ee3\u7406\u8fc1\u79fb\u5230 KRaft"},{"location":"6/#_63","text":"\u5728 KRaft \u6a21\u5f0f\u4e0b\u91cd\u65b0\u542f\u52a8\u6240\u6709\u4ee3\u7406\u540e\uff0c\u5b8c\u6210\u8fc1\u79fb\u7684\u6700\u540e\u4e00\u6b65\u662f\u4f7f KRaft \u63a7\u5236\u5668\u9000\u51fa\u8fc1\u79fb\u6a21\u5f0f\u3002\u8fd9\u662f\u901a\u8fc7\u4ece\u6bcf\u4e2a\u914d\u7f6e\u4e2d\u5220\u9664\u201czookeeper.metadata.migration.enable\u201d\u5c5e\u6027\u5e76\u4e00\u6b21\u91cd\u65b0\u542f\u52a8\u5b83\u4eec\u6765\u5b8c\u6210\u7684\u3002 # Sample KRaft cluster controller.properties listening on 9093 process.roles=controller node.id=3000 controller.quorum.voters=3000@localhost:9093 controller.listener.names=CONTROLLER listeners=CONTROLLER://:9093 # Disable the migration # zookeeper.metadata.migration.enable=true # Remove ZooKeeper client configuration # zookeeper.connect=localhost:2181 # Other configs ...","title":"\u5b8c\u6210\u8fc1\u79fb"},{"location":"6/#611","text":"","title":"6.11\u5206\u5c42\u5b58\u50a8"},{"location":"6/#_64","text":"Kafka\u6570\u636e\u4e3b\u8981\u4ee5\u6d41\u5a92\u4f53\u65b9\u5f0f\u4f7f\u7528\u5c3e\u90e8\u8bfb\u53d6\u6765\u6d88\u8d39\u3002Tail\u8bfb\u53d6\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u9762\u7f13\u5b58\u6765\u670d\u52a1\u6570\u636e\uff0c\u800c\u4e0d\u662f\u78c1\u76d8\u8bfb\u53d6\u3002\u65e7\u6570\u636e\u901a\u5e38\u4ece\u78c1\u76d8\u8bfb\u53d6\u4ee5\u8fdb\u884c\u56de\u586b\u6216\u6545\u969c\u6062\u590d\uff0c\u5e76\u4e14\u4e0d\u5e38\u89c1\u3002 \u5728\u5206\u5c42\u5b58\u50a8\u65b9\u6cd5\u4e2d\uff0cKafka\u96c6\u7fa4\u914d\u7f6e\u4e86\u4e24\u5c42\u5b58\u50a8\u2014\u2014\u672c\u5730\u5b58\u50a8\u548c\u8fdc\u7a0b\u3002\u672c\u5730\u5c42\u4e0e\u5f53\u524d\u4f7f\u7528Kafka Broker \u4e0a\u7684\u672c\u5730\u78c1\u76d8\u5b58\u50a8\u65e5\u5fd7\u6bb5\u7684Kafka\u76f8\u540c\u3002\u65b0\u7684\u8fdc\u7a0b\u5c42\u4f7f\u7528\u5916\u90e8\u5b58\u50a8\u7cfb\u7edf\uff0c\u5982HDFS\u6216S3\uff0c\u6765\u5b58\u50a8\u5df2\u5b8c\u6210\u7684\u65e5\u5fd7\u6bb5\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b KIP-405 \u3002 \u6ce8\u610f\uff1a\u5206\u5c42\u5b58\u50a8\u88ab\u89c6\u4e3a\u65e9\u671f\u8bbf\u95ee\u529f\u80fd\uff0c\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528","title":"\u5206\u5c42\u5b58\u50a8\u6982\u8ff0"},{"location":"6/#_65","text":"","title":"\u914d\u7f6e"},{"location":"6/#broker_1","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka\u670d\u52a1\u5668\u4e0d\u4f1a\u542f\u7528\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u3002 remote.log.storage.system.enable \u662f\u63a7\u5236\u662f\u5426\u5728 Broker \u4e2d\u542f\u7528\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u7684\u5c5e\u6027\u3002\u5c06\u5176\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u542f\u7528\u6b64\u529f\u80fd\u3002 RemoteStorageManager \u662f\u4e00\u4e2a\u63d0\u4f9b\u8fdc\u7a0b\u65e5\u5fd7\u6bb5\u548c\u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u63a5\u53e3\u3002Kafka\u670d\u52a1\u5668\u4e0d\u63d0\u4f9bRemoteStorageManager\u7684\u5f00\u7bb1\u5373\u7528\u5b9e\u73b0\u3002\u914d\u7f6e remote.log.storage.manager.class.name \u548c remote.log.storage.manager.class.path \uff0c\u4ee5\u6307\u5b9aRemoteStorageManager\u7684\u5b9e\u73b0\u3002 RemoteLogMetadataManager \u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u63d0\u4f9b\u5177\u6709\u5f3a\u70c8\u4e00\u81f4\u7684\u8bed\u4e49\u7684\u8fdc\u7a0b\u65e5\u5fd7\u6bb5\u5143\u6570\u636e\u751f\u547d\u5468\u671f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4ee5\u5b58\u50a8\u4e3a\u5185\u90e8\u4e3b\u9898\u7684\u5b9e\u73b0\u3002\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e remote.log.metadata.manager.class.name \u548c remote.log.metadata.manager.class.path \u6765\u66f4\u6539\u6b64\u5b9e\u73b0\u3002\u5f53\u91c7\u7528\u9ed8\u8ba4\u7684\u57fa\u4e8ekafka\u5185\u90e8\u4e3b\u9898\u7684\u5b9e\u73b0\u65f6\uff0c remote.log.metadata.manager.listener.name \u662f\u4e00\u4e2a\u5f3a\u5236\u6027\u5c5e\u6027\uff0c\u7528\u4e8e\u6307\u5b9a\u9ed8\u8ba4\u7684RemoteLogMetadataManager\u5b9e\u73b0\u521b\u5efa\u7684\u5ba2\u6237\u7aef\u3002","title":"Broker \u914d\u7f6e"},{"location":"6/#_66","text":"\u5728\u6b63\u786e\u914d\u7f6e\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u7684\u4ee3\u7406\u7aef\u914d\u7f6e\u540e\uff0c\u4ecd\u7136\u9700\u8981\u8bbe\u7f6e\u4e3b\u9898\u7ea7\u522b\u7684\u914d\u7f6e\u3002 remote.storage.enable \u662f\u786e\u5b9a\u4e3b\u9898\u662f\u5426\u60f3\u8981\u4f7f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u5f00\u5173\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u88ab\u8bbe\u7f6e\u4e3afalse\u3002\u542f\u7528 remote.storage.enable \u5c5e\u6027\u540e\uff0c\u63a5\u4e0b\u6765\u8981\u8003\u8651\u7684\u662f\u65e5\u5fd7\u4fdd\u7559\u3002\u5f53\u4e3a\u4e3b\u9898\u542f\u7528\u5206\u5c42\u5b58\u50a8\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e2\u4e2a\u989d\u5916\u7684\u65e5\u5fd7\u4fdd\u7559\u914d\u7f6e\uff1a local.retention.ms retention.ms local.retention.bytes retention.bytes The configuration prefixed with local are to specify the time/size the \"local\" log file can accept before moving to remote storage, and then get deleted. If unset, The value in retention.ms and retention.bytes will be used.","title":"\u4e3b\u9898\u914d\u7f6e"},{"location":"6/#_67","text":"Apache Kafka\u4e0d\u63d0\u4f9b\u5f00\u7bb1\u5373\u7528\u7684RemoteStorageManager\u5b9e\u73b0\u3002\u8981\u9884\u89c8\u5206\u5c42\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e3a\u96c6\u6210\u6d4b\u8bd5\u800c\u5b9e\u65bd\u7684 LocalTieredStorage \uff0c\u8fd9\u5c06\u5728\u672c\u5730\u5b58\u50a8\u4e2d\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u76ee\u5f55\u6765\u6a21\u62df\u8fdc\u7a0b\u5b58\u50a8\u3002 \u8981\u91c7\u7528\u201cLocalTieredStorage\u201d\uff0c\u9700\u8981\u5728\u672c\u5730\u6784\u5efa\u6d4b\u8bd5\u5e93 # please checkout to the specific version tag you're using before building it # ex: `git checkout 3.6.0` ./gradlew clean :storage:testJar \u6784\u5efa\u6210\u529f\u540e\uff0c\u5728 storage/build/libs \u4e0b\u5e94\u8be5\u6709\u4e00\u4e2a kafka-storage-x.x.x-test.jar \u6587\u4ef6\u3002\u63a5\u4e0b\u6765\uff0c\u5728\u4ee3\u7406\u7aef\u8bbe\u7f6e\u914d\u7f6e\u4ee5\u542f\u7528\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u3002 # Sample Zookeeper/Kraft broker server.properties listening on PLAINTEXT://:9092 remote.log.storage.system.enable=true # Setting the listener for the clients in RemoteLogMetadataManager to talk to the brokers. remote.log.metadata.manager.listener.name=PLAINTEXT # Please provide the implementation info for remoteStorageManager. # This is the mandatory configuration for tiered storage. # Here, we use the `LocalTieredStorage` built above. remote.log.storage.manager.class.name=org.apache.kafka.server.log.remote.storage.LocalTieredStorage remote.log.storage.manager.class.path=/PATH/TO/kafka-storage-x.x.x-test.jar # These 2 prefix are default values, but customizable remote.log.storage.manager.impl.prefix=rsm.config. remote.log.metadata.manager.impl.prefix=rlmm.config. # Configure the directory used for `LocalTieredStorage` # Note, please make sure the brokers need to have access to this directory rsm.config.dir=/tmp/kafka-remote-storage # This needs to be changed if number of brokers in the cluster is more than 1 rlmm.config.remote.log.metadata.topic.replication.factor=1 # Try to speed up the log retention check interval for testing log.retention.check.interval.ms=1000 \u6309\u7167 \u5feb\u901f\u5165\u95e8\u6307\u5357 \u542f\u52a8\u5361\u592b\u5361\u73af\u5883\u3002\u7136\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u5177\u6709\u914d\u7f6e\u542f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898\uff1a # remote.storage.enable=true -> enables tiered storage on the topic # local.retention.ms=1000 -> The number of milliseconds to keep the local log segment before it gets deleted. Note that a local log segment is eligible for deletion only after it gets uploaded to remote. # retention.ms=3600000 -> when segments exceed this time, the segments in remote storage will be deleted # segment.bytes=1048576 -> for test only, to speed up the log segment rolling interval # file.delete.delay.ms=10000 -> for test only, to speed up the local-log segment file delete delay bin/kafka-topics.sh --create --topic tieredTopic --bootstrap-server localhost:9092 \\ --config remote.storage.enable=true --config local.retention.ms=1000 --config retention.ms=3600000 \\ --config segment.bytes=1048576 --config file.delete.delay.ms=1000 \u5c1d\u8bd5\u5411\u201c\u5206\u5c42\u4e3b\u9898\u201d\u4e3b\u9898\u53d1\u9001\u6d88\u606f\u4ee5\u6eda\u52a8\u65e5\u5fd7\u6bb5\uff1a bin/kafka-producer-perf-test.sh --topic tieredTopic --num-records 1200 --record-size 1024 --throughput -1 --producer-props bootstrap.servers=localhost:9092 \u7136\u540e\uff0c\u6eda\u52a8\u6d3b\u52a8\u6bb5\u540e\uff0c\u65e7\u6bb5\u5e94\u79fb\u52a8\u5230\u8fdc\u7a0b\u5b58\u50a8\u5e76\u5220\u9664\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u4e0a\u9762\u914d\u7f6e\u7684\u8fdc\u7a0b\u65e5\u5fd7\u76ee\u5f55\u6765\u9a8c\u8bc1\u3002\u4f8b\u5982\uff1a > ls /tmp/kafka-remote-storage/kafka-tiered-storage/tieredTopic-0-jF8s79t9SrG_PNqlwv7bAA 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.index 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.snapshot 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.leader_epoch_checkpoint 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.timeindex 00000000000000000000-knnxbs3FSRyKdPcSAOQC-w.log \u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4ece\u5934\u5f00\u59cb\u6d88\u8017\u4e00\u4e9b\u6570\u636e\u5e76\u6253\u5370\u504f\u79fb\u6570\uff0c\u4ee5\u786e\u4fdd\u5b83\u80fd\u6210\u529f\u4ece\u8fdc\u7a0b\u5b58\u50a8\u4e2d\u83b7\u53d6\u504f\u79fb0\u3002 bin/kafka-console-consumer.sh --topic tieredTopic --from-beginning --max-messages 1 --bootstrap-server localhost:9092 --property print.offset=true \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u60f3\u5728\u96c6\u7fa4\u7ea7\u522b\u7981\u7528\u5206\u5c42\u5b58\u50a8\uff0c\u60a8\u5e94\u8be5\u660e\u786e\u5220\u9664\u542f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898\u3002\u5c1d\u8bd5\u7981\u7528\u96c6\u7fa4\u7ea7\u522b\u7684\u5206\u5c42\u5b58\u50a8\u800c\u4e0d\u5220\u9664\u4f7f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898\uff0c\u5c06\u5bfc\u81f4\u542f\u52a8\u671f\u95f4\u7684\u5f02\u5e38\u3002 bin/kafka-topics.sh --delete --topic tieredTopic --bootstrap-server localhost:9092 \u5220\u9664\u4e3b\u9898\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4ee3\u7406\u914d\u7f6e\u4e2d\u5b89\u5168\u5730\u8bbe\u7f6e remote.log.storage.system.enable=false \u3002","title":"\u5feb\u901f\u5165\u95e8\u793a\u4f8b"},{"location":"6/#_68","text":"\u867d\u7136\u5206\u5c42\u5b58\u50a8\u7684\u65e9\u671f\u8bbf\u95ee\u7248\u672c\u63d0\u4f9b\u4e86\u5c1d\u8bd5\u6b64\u65b0\u529f\u80fd\u7684\u673a\u4f1a\uff0c\u4f46\u91cd\u8981\u7684\u662f\u8981\u610f\u8bc6\u5230\u4ee5\u4e0b\u9650\u5236\uff1a \u4e0d\u652f\u6301\u5177\u6709\u591a\u4e2a\u65e5\u5fd7\u76ee\u5f55\u7684\u96c6\u7fa4\uff08\u5373JBOD\u529f\u80fd\uff09 \u4e0d\u652f\u6301\u538b\u7f29\u4e3b\u9898 \u65e0\u6cd5\u7981\u7528\u4e3b\u9898\u7ea7\u522b\u7684\u5206\u5c42\u5b58\u50a8 \u5728\u4ee3\u7406\u7ea7\u522b\u7981\u7528\u5206\u5c42\u5b58\u50a8\u4e4b\u524d\uff0c\u9700\u8981\u5220\u9664\u542f\u7528\u5206\u5c42\u5b58\u50a8\u7684\u4e3b\u9898 \u4e0e\u5206\u5c42\u5b58\u50a8\u529f\u80fd\u76f8\u5173\u7684\u7ba1\u7406\u64cd\u4f5c\u4ec5\u57283.0\u7248\u672c\u8d77\u7684\u5ba2\u6237\u7aef\u4e0a\u53d7\u652f\u6301 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u5206\u5c42\u5b58\u50a8\u65e9\u671f\u8bbf\u95ee\u53d1\u5e03\u8bf4\u660e \u3002","title":"\u9650\u5236"},{"location":"7/","text":"7. \u5b89\u5168 7.1 \u5b89\u5168\u6982\u8ff0 \u5728\u7248\u672c 0.9.0.0 \u4e2d\uff0cKafka \u793e\u533a\u6dfb\u52a0\u4e86\u8bb8\u591a\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u5355\u72ec\u6216\u4e00\u8d77\u4f7f\u7528\u53ef\u4ee5\u63d0\u9ad8 Kafka \u96c6\u7fa4\u7684\u5b89\u5168\u6027\u3002\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u5b89\u5168\u63aa\u65bd\uff1a \u4f7f\u7528 SSL \u6216 SASL \u5bf9\u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u3001\u5176\u4ed6\u4ee3\u7406\u548c\u5de5\u5177\u4e0e\u4ee3\u7406\u7684\u8fde\u63a5\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002Kafka\u652f\u6301\u4ee5\u4e0bSASL\u673a\u5236\uff1a SASL/GSSAPI (Kerberos) - \u4ece\u7248\u672c 0.9.0.0 \u5f00\u59cb SASL/PLAIN - \u4ece\u7248\u672c 0.10.0.0 \u5f00\u59cb SASL/SCRAM-SHA-256 \u548c SASL/SCRAM-SHA-512 - \u4ece\u7248\u672c 0.10.2.0 \u5f00\u59cb SASL/OAUTHBEARER - \u4ece\u7248\u672c 2.0 \u5f00\u59cb \u4ece\u4ee3\u7406\u5230 ZooKeeper \u7684\u8fde\u63a5\u8eab\u4efd\u9a8c\u8bc1 \u4f7f\u7528 SSL \u5bf9\u4ee3\u7406\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u3001\u4ee3\u7406\u4e4b\u95f4\u6216\u4ee3\u7406\u548c\u5de5\u5177\u4e4b\u95f4\u4f20\u8f93\u7684\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff08\u8bf7\u6ce8\u610f\uff0c\u542f\u7528 SSL \u65f6\u4f1a\u51fa\u73b0\u6027\u80fd\u4e0b\u964d\uff0c\u5176\u7a0b\u5ea6\u53d6\u51b3\u4e8e CPU \u7c7b\u578b\u548c JVM \u5b9e\u73b0\u3002\uff09 \u5ba2\u6237\u7aef\u8bfb/\u5199\u64cd\u4f5c\u7684\u6388\u6743 \u6388\u6743\u53ef\u63d2\u62d4\uff0c\u652f\u6301\u4e0e\u5916\u90e8\u6388\u6743\u670d\u52a1\u96c6\u6210 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5b89\u5168\u6027\u662f\u53ef\u9009\u7684 - \u652f\u6301\u975e\u5b89\u5168\u96c6\u7fa4\uff0c\u4ee5\u53ca\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u3001\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u548c\u975e\u52a0\u5bc6\u5ba2\u6237\u7aef\u7684\u6df7\u5408\u3002\u4ee5\u4e0b\u6307\u5357\u89e3\u91ca\u4e86\u5982\u4f55\u5728\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u4e2d\u914d\u7f6e\u548c\u4f7f\u7528\u5b89\u5168\u529f\u80fd\u3002 7.2 \u76d1\u542c\u5668\u914d\u7f6e \u4e3a\u4e86\u4fdd\u62a4 Kafka \u96c6\u7fa4\u7684\u5b89\u5168\uff0c\u6709\u5fc5\u8981\u4fdd\u62a4\u7528\u4e8e\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\u7684\u901a\u9053\u7684\u5b89\u5168\u3002\u6bcf\u4e2a\u670d\u52a1\u5668\u5fc5\u987b\u5b9a\u4e49\u4e00\u7ec4\u4fa6\u542c\u5668\uff0c\u7528\u4e8e\u63a5\u6536\u6765\u81ea\u5ba2\u6237\u7aef\u4ee5\u53ca\u5176\u4ed6\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u3002\u6bcf\u4e2a\u76d1\u542c\u5668\u53ef\u4ee5\u88ab\u914d\u7f6e\u4e3a\u4f7f\u7528\u5404\u79cd\u673a\u5236\u6765\u9a8c\u8bc1\u5ba2\u6237\u7aef\u5e76\u786e\u4fdd\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u6d41\u91cf\u88ab\u52a0\u5bc6\u3002\u672c\u8282\u63d0\u4f9b\u4fa6\u542c\u5668\u914d\u7f6e\u7684\u5165\u95e8\u77e5\u8bc6\u3002 Kafka \u670d\u52a1\u5668\u652f\u6301\u4fa6\u542c\u591a\u4e2a\u7aef\u53e3\u4e0a\u7684\u8fde\u63a5\u3002\u8fd9\u662f\u901a\u8fc7 listeners \u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u7684\u5c5e\u6027\u8fdb\u884c\u914d\u7f6e\u7684\uff0c\u8be5\u5c5e\u6027\u63a5\u53d7\u8981\u542f\u7528\u7684\u4fa6\u542c\u5668\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u5fc5\u987b\u81f3\u5c11\u5b9a\u4e49\u4e00\u4e2a\u4fa6\u542c\u5668\u3002\u4e2d\u5b9a\u4e49\u7684\u6bcf\u4e2a\u76d1\u542c\u5668\u7684\u683c\u5f0f listeners \u5982\u4e0b\uff1a {LISTENER_NAME}://{hostname}:{port} \u901a\u5e38 LISTENER_NAME \u662f\u4e00\u4e2a\u63cf\u8ff0\u6027\u540d\u79f0\uff0c\u5b9a\u4e49\u4e86\u4fa6\u542c\u5668\u7684\u76ee\u7684\u3002\u4f8b\u5982\uff0c\u8bb8\u591a\u914d\u7f6e\u5bf9\u5ba2\u6237\u7aef\u6d41\u91cf\u4f7f\u7528\u5355\u72ec\u7684\u4fa6\u542c\u5668\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u80fd\u4f1a\u5f15\u7528 CLIENT \u914d\u7f6e\u4e2d\u76f8\u5e94\u7684\u4fa6\u542c\u5668\uff1a listeners=CLIENT://localhost:9092 \u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u5b89\u5168\u534f\u8bae\u5728\u5355\u72ec\u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\uff1a listener.security.protocol.map \u3002\u8be5\u503c\u662f\u6620\u5c04\u5230\u5176\u5b89\u5168\u534f\u8bae\u7684\u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u503c\u914d\u7f6e\u6307\u5b9a CLIENT \u4fa6\u542c\u5668\u5c06\u4f7f\u7528 SSL\uff0c\u800c BROKER \u4fa6\u542c\u5668\u5c06\u4f7f\u7528\u660e\u6587\u3002 listener.security.protocol.map=CLIENT:SSL,BROKER:PLAINTEXT \u4e0b\u9762\u7ed9\u51fa\u4e86\u5b89\u5168\u534f\u8bae\u7684\u53ef\u80fd\u9009\u9879\uff1a PLAINTEXT SSL SASL_PLAINTEXT SASL_SSL \u660e\u6587\u534f\u8bae\u4e0d\u63d0\u4f9b\u5b89\u5168\u6027\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u4efb\u4f55\u989d\u5916\u7684\u914d\u7f6e\u3002\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\uff0c\u672c\u6587\u6863\u4ecb\u7ecd\u4e86\u5982\u4f55\u914d\u7f6e\u5176\u4f59\u534f\u8bae\u3002 \u5982\u679c\u6bcf\u4e2a\u6240\u9700\u7684\u4fa6\u542c\u5668\u4f7f\u7528\u5355\u72ec\u7684\u5b89\u5168\u534f\u8bae\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5b89\u5168\u534f\u8bae\u540d\u79f0\u4f5c\u4e3a \u4e2d\u7684\u4fa6\u542c\u5668\u540d\u79f0 listeners \u3002\u4f7f\u7528\u4e0a\u9762\u7684\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5b9a\u4e49\u8df3\u8fc7 CLIENT \u548c\u4fa6\u542c\u5668\u7684\u5b9a\u4e49\uff1a BROKER listeners=SSL://localhost:9092,PLAINTEXT://localhost:9093 \u4f46\u662f\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u4e3a\u4fa6\u542c\u5668\u63d0\u4f9b\u660e\u786e\u7684\u540d\u79f0\uff0c\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u4f7f\u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u9884\u671f\u7528\u9014\u66f4\u52a0\u6e05\u6670\u3002 inter.broker.listener.name \u5728\u6b64\u5217\u8868\u4e2d\u7684\u4fa6\u542c\u5668\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u5c06\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u4fa6\u542c\u5668\u7684\u540d\u79f0\u6765\u58f0\u660e\u7528\u4e8e\u4ee3\u7406\u95f4\u901a\u4fe1\u7684\u4fa6\u542c\u5668\u3002\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u7684\u4e3b\u8981\u76ee\u7684\u662f\u5206\u533a\u590d\u5236\u3002\u5982\u679c\u672a\u5b9a\u4e49\uff0c\u5219\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u7531 \u5b9a\u4e49\u7684\u5b89\u5168\u534f\u8bae\u786e\u5b9a security.inter.broker.protocol \uff0c\u9ed8\u8ba4\u4e3a PLAINTEXT \u3002 \u5bf9\u4e8e\u4f9d\u8d56 Zookeeper \u5b58\u50a8\u96c6\u7fa4\u5143\u6570\u636e\u7684\u9057\u7559\u96c6\u7fa4\uff0c\u53ef\u4ee5\u58f0\u660e\u4e00\u4e2a\u5355\u72ec\u7684\u4fa6\u542c\u5668\uff0c\u7528\u4e8e\u4ece\u6d3b\u52a8\u63a7\u5236\u5668\u5230\u4ee3\u7406\u7684\u5143\u6570\u636e\u4f20\u64ad\u3002\u8fd9\u662f\u7531 \u5b9a\u4e49\u7684 control.plane.listener.name \u3002\u5f53\u6d3b\u52a8\u63a7\u5236\u5668\u9700\u8981\u5c06\u5143\u6570\u636e\u66f4\u65b0\u63a8\u9001\u5230\u96c6\u7fa4\u4e2d\u7684\u4ee3\u7406\u65f6\uff0c\u5b83\u5c06\u4f7f\u7528\u6b64\u4fa6\u542c\u5668\u3002\u4f7f\u7528\u63a7\u5236\u5e73\u9762\u4fa6\u542c\u5668\u7684\u597d\u5904\u662f\u5b83\u4f7f\u7528\u5355\u72ec\u7684\u5904\u7406\u7ebf\u7a0b\uff0c\u8fd9\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u6d41\u91cf\u4e0d\u592a\u53ef\u80fd\u963b\u788d\u5143\u6570\u636e\u66f4\u6539\uff08\u4f8b\u5982\u5206\u533a\u9886\u5bfc\u8005\u548c ISR \u66f4\u65b0\uff09\u7684\u53ca\u65f6\u4f20\u64ad\u3002\u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u503c\u4e3a null\uff0c\u8fd9\u610f\u5473\u7740\u63a7\u5236\u5668\u5c06\u4f7f\u7528\u7531 inter.broker.listener \u5728 KRaft \u96c6\u7fa4\u4e2d\uff0c\u4ee3\u7406\u662f\u4efb\u4f55 broker \u542f\u7528\u4e86\u89d2\u8272\u7684\u670d\u52a1\u5668 process.roles \uff0c\u63a7\u5236\u5668\u662f\u4efb\u4f55\u542f\u7528\u4e86 controller \u89d2\u8272\u7684\u670d\u52a1\u5668\u3002\u4fa6\u542c\u5668\u914d\u7f6e\u53d6\u51b3\u4e8e\u89d2\u8272\u3002\u5b9a\u4e49\u7684\u4fa6\u542c\u5668 inter.broker.listener.name \u4e13\u95e8\u7528\u4e8e\u4ee3\u7406\u4e4b\u95f4\u7684\u8bf7\u6c42\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u63a7\u5236\u5668\u5fc5\u987b\u4f7f\u7528\u7531 controller.listener.names \u914d\u7f6e\u5b9a\u4e49\u7684\u5355\u72ec\u4fa6\u542c\u5668\u3002\u4e0d\u80fd\u5c06\u5176\u8bbe\u7f6e\u4e3a\u4e0e\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u76f8\u540c\u7684\u503c\u3002 \u63a7\u5236\u5668\u63a5\u6536\u6765\u81ea\u5176\u4ed6\u63a7\u5236\u5668\u548c\u4ee3\u7406\u7684\u8bf7\u6c42\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u670d\u52a1\u5668\u6ca1\u6709 controller \u542f\u7528\u8be5\u89d2\u8272\uff08\u5373\u5b83\u53ea\u662f\u4e00\u4e2a\u4ee3\u7406\uff09\uff0c\u5b83\u4ecd\u7136\u5fc5\u987b\u5b9a\u4e49\u63a7\u5236\u5668\u4fa6\u542c\u5668\u4ee5\u53ca\u914d\u7f6e\u5b83\u6240\u9700\u7684\u4efb\u4f55\u5b89\u5168\u5c5e\u6027\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u72ec\u7acb\u4ee3\u7406\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\uff1a process.roles=broker listeners=BROKER://localhost:9092 inter.broker.listener.name=BROKER controller.quorum.voters=0@localhost:9093 controller.listener.names=CONTROLLER listener.security.protocol.map=BROKER:SASL_SSL,CONTROLLER:SASL_SSL \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u63a7\u5236\u5668\u4fa6\u542c\u5668\u4ecd\u914d\u7f6e\u4e3a\u4f7f\u7528 SASL_SSL \u5b89\u5168\u534f\u8bae\uff0c\u4f46\u5b83\u672a\u5305\u542b\u5728\u5176\u4e2d\uff0c listeners \u56e0\u4e3a\u4ee3\u7406\u4e0d\u516c\u5f00\u63a7\u5236\u5668\u4fa6\u542c\u5668\u672c\u8eab\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5c06\u4f7f\u7528\u7684\u7aef\u53e3\u6765\u81ea controller.quorum.voters \u914d\u7f6e\uff0c\u5b83\u5b9a\u4e49\u4e86\u63a7\u5236\u5668\u7684\u5b8c\u6574\u5217\u8868\u3002 \u5bf9\u4e8e\u540c\u65f6\u542f\u7528\u4ee3\u7406\u548c\u63a7\u5236\u5668\u89d2\u8272\u7684 KRaft \u670d\u52a1\u5668\uff0c\u914d\u7f6e\u7c7b\u4f3c\u3002\u552f\u4e00\u7684\u533a\u522b\u662f\u63a7\u5236\u5668\u4fa6\u542c\u5668\u5fc5\u987b\u5305\u542b\u5728 listeners \uff1a process.roles=broker,controller listeners=BROKER://localhost:9092,CONTROLLER://localhost:9093 inter.broker.listener.name=BROKER controller.quorum.voters=0@localhost:9093 controller.listener.names=CONTROLLER listener.security.protocol.map=BROKER:SASL_SSL,CONTROLLER:SASL_SSL \u8981\u6c42\u5b9a\u4e49\u7684\u7aef\u53e3\u4e0e controller.quorum.voters \u516c\u5f00\u7684\u63a7\u5236\u5668\u4fa6\u542c\u5668\u4e4b\u4e00\u5b8c\u5168\u5339\u914d\u3002\u4f8b\u5982\uff0c\u6b64\u5904 CONTROLLER \u4fa6\u542c\u5668\u7ed1\u5b9a\u5230\u7aef\u53e3 9093\u3002 \u5b9a\u4e49\u7684\u8fde\u63a5\u5b57\u7b26\u4e32 controller.quorum.voters \u4e5f\u5fc5\u987b\u4f7f\u7528\u7aef\u53e3 9093\uff0c\u5982\u6b64\u5904\u6240\u793a\u3002 \u63a7\u5236\u5668\u5c06\u63a5\u53d7\u7531 \u5b9a\u4e49\u7684\u6240\u6709\u4fa6\u542c\u5668\u4e0a\u7684\u8bf7\u6c42 controller.listener.names \u3002\u901a\u5e38\u53ea\u6709\u4e00\u4e2a\u63a7\u5236\u5668\u4fa6\u542c\u5668\uff0c\u4f46\u4e5f\u53ef\u4ee5\u6709\u66f4\u591a\u3002\u4f8b\u5982\uff0c\u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u901a\u8fc7\u96c6\u7fa4\u6eda\u52a8\uff08\u4e00\u6b21\u6eda\u52a8\u516c\u5f00\u65b0\u76d1\u542c\u5668\uff0c\u4e00\u6b21\u6eda\u52a8\u5220\u9664\u65e7\u76d1\u542c\u5668\uff09\u5c06\u6d3b\u52a8\u4fa6\u542c\u5668\u4ece\u4e00\u4e2a\u7aef\u53e3\u6216\u5b89\u5168\u534f\u8bae\u66f4\u6539\u4e3a\u53e6\u4e00\u4e2a\u7aef\u53e3\u6216\u5b89\u5168\u534f\u8bae\u7684\u65b9\u6cd5\u3002\u5f53\u5b9a\u4e49\u4e86\u591a\u4e2a\u63a7\u5236\u5668\u4fa6\u542c\u5668\u65f6\uff0c\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u4fa6\u542c\u5668\u5c06\u7528\u4e8e\u51fa\u7ad9\u8bf7\u6c42\u3002 \u5728 Kafka \u4e2d\uff0c\u901a\u5e38\u4e3a\u5ba2\u6237\u7aef\u4f7f\u7528\u5355\u72ec\u7684\u4fa6\u542c\u5668\u3002\u8fd9\u5141\u8bb8\u96c6\u7fa4\u95f4\u4fa6\u542c\u5668\u5728\u7f51\u7edc\u7ea7\u522b\u8fdb\u884c\u9694\u79bb\u3002\u5bf9\u4e8e KRaft \u4e2d\u7684\u63a7\u5236\u5668\u4fa6\u542c\u5668\uff0c\u4fa6\u542c\u5668\u5e94\u8be5\u88ab\u9694\u79bb\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u65e0\u8bba\u5982\u4f55\u90fd\u4e0d\u4f7f\u7528\u5b83\u3002\u5ba2\u6237\u7aef\u5e94\u8be5\u8fde\u63a5\u5230\u4ee3\u7406\u4e0a\u914d\u7f6e\u7684\u4efb\u4f55\u5176\u4ed6\u4fa6\u542c\u5668\u3002\u4efb\u4f55\u7ed1\u5b9a\u5230\u63a7\u5236\u5668\u7684\u8bf7\u6c42\u90fd\u5c06\u6309 \u5982\u4e0b\u6240\u8ff0\u8f6c\u53d1 \u5728\u4ee5\u4e0b \u90e8\u5206 \u4e2d\uff0c\u672c\u6587\u6863\u4ecb\u7ecd\u5982\u4f55\u5728\u4fa6\u542c\u5668\u4e0a\u542f\u7528 SSL \u8fdb\u884c\u52a0\u5bc6\u548c\u8eab\u4efd\u9a8c\u8bc1\u3002\u540e\u7eed \u90e8\u5206 \u5c06\u4ecb\u7ecd\u4f7f\u7528 SASL \u7684\u5176\u4ed6\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u3002 7.3 \u4f7f\u7528 SSL \u52a0\u5bc6\u548c\u9a8c\u8bc1 Apache Kafka \u5141\u8bb8\u5ba2\u6237\u7aef\u4f7f\u7528 SSL \u8fdb\u884c\u6d41\u91cf\u52a0\u5bc6\u548c\u8eab\u4efd\u9a8c\u8bc1\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSSL \u5904\u4e8e\u7981\u7528\u72b6\u6001\uff0c\u4f46\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6253\u5f00\u3002\u4ee5\u4e0b\u6bb5\u843d\u8be6\u7ec6\u89e3\u91ca\u4e86\u5982\u4f55\u8bbe\u7f6e\u60a8\u81ea\u5df1\u7684 PKI \u57fa\u7840\u8bbe\u65bd\u3001\u4f7f\u7528\u5b83\u6765\u521b\u5efa\u8bc1\u4e66\u4ee5\u53ca\u914d\u7f6e Kafka \u4ee5\u4f7f\u7528\u8fd9\u4e9b\u8bc1\u4e66\u3002 \u4e3a\u6bcf\u4e2a Kafka \u4ee3\u7406\u751f\u6210 SSL \u5bc6\u94a5\u548c\u8bc1\u4e66 \u90e8\u7f72\u4e00\u4e2a\u6216\u591a\u4e2a\u652f\u6301 SSL \u7684\u4ee3\u7406\u7684\u7b2c\u4e00\u6b65\u662f\u4e3a\u6bcf\u53f0\u670d\u52a1\u5668\u751f\u6210\u516c\u94a5/\u79c1\u94a5\u5bf9\u3002\u7531\u4e8e Kafka \u5e0c\u671b\u6240\u6709\u5bc6\u94a5\u548c\u8bc1\u4e66\u90fd\u5b58\u50a8\u5728\u5bc6\u94a5\u5e93\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u4f7f\u7528 Java \u7684 keytool \u547d\u4ee4\u6765\u5b8c\u6210\u6b64\u4efb\u52a1\u3002\u8be5\u5de5\u5177\u652f\u6301\u4e24\u79cd\u4e0d\u540c\u7684\u5bc6\u94a5\u5e93\u683c\u5f0f\uff1aJava \u7279\u5b9a\u7684 jks \u683c\u5f0f\uff08\u73b0\u5df2\u5f03\u7528\uff09\u4ee5\u53ca PKCS12\u3002\u4ece Java \u7248\u672c 9 \u5f00\u59cb\uff0cPKCS12 \u662f\u9ed8\u8ba4\u683c\u5f0f\uff0c\u4e3a\u4e86\u786e\u4fdd\u65e0\u8bba\u4f7f\u7528\u54ea\u4e2a Java \u7248\u672c\uff0c\u90fd\u4f7f\u7528\u6b64\u683c\u5f0f\uff0c\u6240\u6709\u4ee5\u4e0b\u547d\u4ee4\u90fd\u663e\u5f0f\u6307\u5b9a PKCS12 \u683c\u5f0f\u3002 > keytool -keystore {keystorefile} -alias localhost -validity {validity} -genkey -keyalg RSA -storetype pkcs12 \u4e0a\u8ff0\u547d\u4ee4\u4e2d\u9700\u8981\u6307\u5b9a\u4e24\u4e2a\u53c2\u6570\uff1a keystorefile\uff1a\u5b58\u50a8\u6b64\u4ee3\u7406\u7684\u5bc6\u94a5\uff08\u4ee5\u53ca\u540e\u6765\u7684\u8bc1\u4e66\uff09\u7684\u5bc6\u94a5\u5e93\u6587\u4ef6\u3002\u5bc6\u94a5\u5e93\u6587\u4ef6\u5305\u542b\u8be5\u4ee3\u7406\u7684\u79c1\u94a5\u548c\u516c\u94a5\uff0c\u56e0\u6b64\u9700\u8981\u4fdd\u8bc1\u5176\u5b89\u5168\u3002\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6b64\u6b65\u9aa4\u5728\u5c06\u4f7f\u7528\u5bc6\u94a5\u7684 Kafka \u4ee3\u7406\u4e0a\u8fd0\u884c\uff0c\u56e0\u4e3a\u8be5\u5bc6\u94a5\u6c38\u8fdc\u4e0d\u5e94\u8be5\u4f20\u8f93/\u79bb\u5f00\u5176\u9884\u671f\u7684\u670d\u52a1\u5668\u3002 \u6709\u6548\u6027\uff1a\u5bc6\u94a5\u7684\u6709\u6548\u65f6\u95f4\uff08\u4ee5\u5929\u4e3a\u5355\u4f4d\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e0e\u8bc1\u4e66\u7684\u6709\u6548\u671f\u4e0d\u540c\uff0c\u8bc1\u4e66\u7684\u6709\u6548\u671f\u5c06\u5728 \u7b7e\u7f72\u8bc1\u4e66 \u4e2d\u786e\u5b9a\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5\u6765\u8bf7\u6c42\u591a\u4e2a\u8bc1\u4e66\uff1a\u5982\u679c\u60a8\u7684\u5bc6\u94a5\u7684\u6709\u6548\u671f\u4e3a 10 \u5e74\uff0c\u4f46\u60a8\u7684 CA \u53ea\u4f1a\u7b7e\u7f72\u6709\u6548\u671f\u4e3a\u4e00\u5e74\u7684\u8bc1\u4e66\uff0c\u90a3\u4e48\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u60a8\u53ef\u4ee5\u5bf9 10 \u4e2a\u8bc1\u4e66\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5\u3002 \u8981\u83b7\u53d6\u53ef\u4e0e\u521a\u521a\u521b\u5efa\u7684\u79c1\u94a5\u4e00\u8d77\u4f7f\u7528\u7684\u8bc1\u4e66\uff0c\u9700\u8981\u521b\u5efa\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\u3002\u6b64\u7b7e\u540d\u8bf7\u6c42\u7531\u53d7\u4fe1\u4efb\u7684 CA \u7b7e\u540d\u540e\u4f1a\u751f\u6210\u5b9e\u9645\u8bc1\u4e66\uff0c\u7136\u540e\u53ef\u4ee5\u5c06\u5176\u5b89\u88c5\u5728\u5bc6\u94a5\u5e93\u4e2d\u5e76\u7528\u4e8e\u8eab\u4efd\u9a8c\u8bc1\u76ee\u7684\u3002 \u8981\u751f\u6210\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\uff0c\u8bf7\u5bf9\u8fc4\u4eca\u4e3a\u6b62\u521b\u5efa\u7684\u6240\u6709\u670d\u52a1\u5668\u5bc6\u94a5\u5e93\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002 > keytool -keystore server.keystore.jks -alias localhost -validity {validity} -genkey -keyalg RSA -destkeystoretype pkcs12 -ext SAN=DNS:{FQDN},IP:{IPADDRESS1} \u8be5\u547d\u4ee4\u5047\u8bbe\u60a8\u60f3\u8981\u5c06\u4e3b\u673a\u540d\u4fe1\u606f\u6dfb\u52a0\u5230\u8bc1\u4e66\u4e2d\uff0c\u5982\u679c\u4e0d\u662f\u8fd9\u79cd\u60c5\u51b5\uff0c\u60a8\u53ef\u4ee5\u7701\u7565\u6269\u5c55\u53c2\u6570 -ext SAN=DNS:{FQDN},IP:{IPADDRESS1} \u3002\u8bf7\u53c2\u9605\u4e0b\u6587\u4e86\u89e3\u66f4\u591a\u76f8\u5173\u4fe1\u606f\u3002 \u4e3b\u673a\u540d\u9a8c\u8bc1 \u542f\u7528\u540e\uff0c\u4e3b\u673a\u540d\u9a8c\u8bc1\u662f\u6839\u636e\u8be5\u670d\u52a1\u5668\u7684\u5b9e\u9645\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u68c0\u67e5\u60a8\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u8bc1\u4e66\u4e2d\u7684\u5c5e\u6027\u7684\u8fc7\u7a0b\uff0c\u4ee5\u786e\u4fdd\u60a8\u786e\u5b9e\u8fde\u63a5\u5230\u6b63\u786e\u7684\u670d\u52a1\u5668\u3002 \u8fdb\u884c\u6b64\u68c0\u67e5\u7684\u4e3b\u8981\u539f\u56e0\u662f\u4e3a\u4e86\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb\u3002\u5bf9\u4e8e Kafka\uff0c\u6b64\u68c0\u67e5\u5df2\u9ed8\u8ba4\u7981\u7528\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f46\u4ece Kafka 2.0.0 \u5f00\u59cb\uff0c\u9ed8\u8ba4\u4e3a\u5ba2\u6237\u7aef\u8fde\u63a5\u4ee5\u53ca\u4ee3\u7406\u95f4\u8fde\u63a5\u542f\u7528\u670d\u52a1\u5668\u4e3b\u673a\u540d\u9a8c\u8bc1\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u6765 \u7981\u7528\u670d\u52a1\u5668\u4e3b\u673a\u540d\u9a8c\u8bc1\u3002 ssl.endpoint.identification.algorithm \u5bf9\u4e8e\u52a8\u6001\u914d\u7f6e\u7684\u4ee3\u7406\u4fa6\u542c\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u7981\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1 kafka-configs.sh \uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9093 --entity-type brokers --entity-name 0 --alter --add-config \"listener.name.internal.ssl.endpoint.identification.algorithm=\" \u7b14\u8bb0\uff1a \u901a\u5e38\uff0c\u9664\u4e86\u201c\u8ba9\u5b83\u6b63\u5e38\u5de5\u4f5c\u201d\u7684\u6700\u5feb\u65b9\u6cd5\u4e4b\u5916\uff0c\u6ca1\u6709\u5145\u5206\u7684\u7406\u7531\u7981\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u7136\u540e\u627f\u8bfa\u201c\u7a0d\u540e\u6709\u66f4\u591a\u65f6\u95f4\u65f6\u4fee\u590d\u5b83\u201d\uff01 \u5982\u679c\u5728\u6b63\u786e\u7684\u65f6\u95f4\u5b8c\u6210\u6b63\u786e\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u5e76\u4e0d\u90a3\u4e48\u56f0\u96be\uff0c\u4f46\u4e00\u65e6\u96c6\u7fa4\u542f\u52a8\u5e76\u8fd0\u884c\u5c31\u4f1a\u53d8\u5f97\u66f4\u52a0\u56f0\u96be - \u5e2e\u81ea\u5df1\u4e00\u4e2a\u5fd9\uff0c\u73b0\u5728\u5c31\u505a\uff01 \u5982\u679c\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u5ba2\u6237\u7aef\u5c06\u6839\u636e\u4ee5\u4e0b\u4e24\u4e2a\u5b57\u6bb5\u4e4b\u4e00\u9a8c\u8bc1\u670d\u52a1\u5668\u7684\u5b8c\u5168\u9650\u5b9a\u57df\u540d (FQDN) \u6216 IP \u5730\u5740\uff1a \u901a\u7528\u540d\uff08\u4e2d\u6587\uff09 \u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN) \u867d\u7136 Kafka \u68c0\u67e5\u8fd9\u4e24\u4e2a\u5b57\u6bb5\uff0c\u4f46\u81ea 2000 \u5e74\u4ee5\u6765\uff0c\u4e0d\u63a8\u8350 \u4f7f\u7528\u901a\u7528\u540d\u79f0\u5b57\u6bb5\u8fdb\u884c\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c \u5e76\u4e14\u5e94\u5c3d\u53ef\u80fd\u907f\u514d\u4f7f\u7528\u3002\u6b64\u5916\uff0cSAN \u5b57\u6bb5\u66f4\u52a0\u7075\u6d3b\uff0c\u5141\u8bb8\u5728\u8bc1\u4e66\u4e2d\u58f0\u660e\u591a\u4e2a DNS \u548c IP \u6761\u76ee\u3002 \u53e6\u4e00\u4e2a\u4f18\u70b9\u662f\uff0c\u5982\u679c SAN \u5b57\u6bb5\u7528\u4e8e\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u5219\u53ef\u4ee5\u5c06\u516c\u7528\u540d\u79f0\u8bbe\u7f6e\u4e3a\u66f4\u6709\u610f\u4e49\u7684\u503c\u4ee5\u7528\u4e8e\u6388\u6743\u76ee\u7684\u3002\u7531\u4e8e\u6211\u4eec\u9700\u8981\u5c06 SAN \u5b57\u6bb5\u5305\u542b\u5728\u7b7e\u540d\u8bc1\u4e66\u4e2d\uff0c\u56e0\u6b64\u5c06\u5728\u751f\u6210\u7b7e\u540d\u8bf7\u6c42\u65f6\u6307\u5b9a\u8be5\u5b57\u6bb5\u3002\u4e5f\u53ef\u4ee5\u5728\u751f\u6210\u5bc6\u94a5\u5bf9\u65f6\u6307\u5b9a\uff0c\u4f46\u8fd9\u4e0d\u4f1a\u81ea\u52a8\u590d\u5236\u5230\u7b7e\u540d\u8bf7\u6c42\u4e2d\u3002 \u8981\u6dfb\u52a0 SAN \u5b57\u6bb5\uff0c\u8bf7\u5c06\u4ee5\u4e0b\u53c2\u6570\u9644\u52a0 -ext SAN=DNS:{FQDN},IP:{IPADDRESS} \u5230 keytool \u547d\u4ee4\uff1a > keytool -keystore server.keystore.jks -alias localhost -validity {validity} -genkey -keyalg RSA -destkeystoretype pkcs12 -ext SAN=DNS:{FQDN},IP:{IPADDRESS1} \u521b\u5efa\u60a8\u81ea\u5df1\u7684 CA \u5728\u6b64\u6b65\u9aa4\u4e4b\u540e\uff0c\u96c6\u7fa4\u4e2d\u7684\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u62e5\u6709\u4e00\u4e2a\u53ef\u7528\u4e8e\u52a0\u5bc6\u6d41\u91cf\u7684\u516c\u94a5/\u79c1\u94a5\u5bf9\u548c\u4e00\u4e2a\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\uff0c\u8fd9\u662f\u521b\u5efa\u8bc1\u4e66\u7684\u57fa\u7840\u3002\u8981\u6dfb\u52a0\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\uff0c\u6b64\u7b7e\u540d\u8bf7\u6c42\u9700\u8981\u7531\u5c06\u5728\u6b64\u6b65\u9aa4\u4e2d\u521b\u5efa\u7684\u53d7\u4fe1\u4efb\u673a\u6784\u8fdb\u884c\u7b7e\u540d\u3002 \u8bc1\u4e66\u9881\u53d1\u673a\u6784 (CA) \u8d1f\u8d23\u7b7e\u7f72\u8bc1\u4e66\u3002CA \u7684\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u9881\u53d1\u62a4\u7167\u7684\u653f\u5e9c - \u653f\u5e9c\u5728\u6bcf\u672c\u62a4\u7167\u4e0a\u76d6\u7ae0\uff08\u7b7e\u540d\uff09\uff0c\u4ee5\u4f7f\u62a4\u7167\u96be\u4ee5\u4f2a\u9020\u3002\u5176\u4ed6\u653f\u5e9c\u4f1a\u9a8c\u8bc1\u5370\u7ae0\u4ee5\u786e\u4fdd\u62a4\u7167\u7684\u771f\u5b9e\u6027\u3002\u7c7b\u4f3c\u5730\uff0cCA \u5bf9\u8bc1\u4e66\u8fdb\u884c\u7b7e\u540d\uff0c\u5e76\u4e14\u5bc6\u7801\u5b66\u4fdd\u8bc1\u7b7e\u540d\u7684\u8bc1\u4e66\u5728\u8ba1\u7b97\u4e0a\u96be\u4ee5\u4f2a\u9020\u3002\u56e0\u6b64\uff0c\u53ea\u8981 CA \u662f\u771f\u6b63\u4e14\u503c\u5f97\u4fe1\u8d56\u7684\u6743\u5a01\u673a\u6784\uff0c\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u5f3a\u6709\u529b\u5730\u4fdd\u8bc1\u4ed6\u4eec\u6b63\u5728\u8fde\u63a5\u5230\u771f\u5b9e\u7684\u673a\u5668\u3002 \u5bf9\u4e8e\u672c\u6307\u5357\uff0c\u6211\u4eec\u5c06\u6210\u4e3a\u6211\u4eec\u81ea\u5df1\u7684\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u3002\u5728\u4f01\u4e1a\u73af\u5883\u4e2d\u8bbe\u7f6e\u751f\u4ea7\u96c6\u7fa4\u65f6\uff0c\u8fd9\u4e9b\u8bc1\u4e66\u901a\u5e38\u7531\u6574\u4e2a\u516c\u53f8\u4fe1\u4efb\u7684\u4f01\u4e1a CA \u7b7e\u540d\u3002\u8bf7\u53c2\u9605 \u751f\u4ea7\u4e2d\u7684\u5e38\u89c1\u9677\u9631\uff0c \u4e86\u89e3\u8fd9\u79cd\u60c5\u51b5\u4e0b\u9700\u8981\u8003\u8651\u7684\u4e00\u4e9b\u4e8b\u9879\u3002 \u7531\u4e8eOpenSSL \u4e2d\u7684 \u9519\u8bef \uff0cx509 \u6a21\u5757\u4e0d\u4f1a\u5c06\u8bf7\u6c42\u7684\u6269\u5c55\u5b57\u6bb5\u4ece CSR \u590d\u5236\u5230\u6700\u7ec8\u8bc1\u4e66\u4e2d\u3002\u7531\u4e8e\u6211\u4eec\u5e0c\u671b SAN \u6269\u5c55\u51fa\u73b0\u5728\u6211\u4eec\u7684\u8bc1\u4e66\u4e2d\u4ee5\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u4f7f\u7528 ca\u6a21\u5757\u3002 \u8fd9\u9700\u8981\u5728\u751f\u6210 CA \u5bc6\u94a5\u5bf9\u4e4b\u524d\u8fdb\u884c\u4e00\u4e9b\u989d\u5916\u7684\u914d\u7f6e\u3002 \u5c06\u4ee5\u4e0b\u5217\u8868\u4fdd\u5b58\u5230\u540d\u4e3a openssl-ca.cnf \u7684\u6587\u4ef6\u4e2d\uff0c\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u6709\u6548\u6027\u548c\u901a\u7528\u5c5e\u6027\u7684\u503c\u3002 HOME = . RANDFILE = $ENV::HOME/.rnd #################################################################### [ ca ] default_ca = CA_default # The default ca section [ CA_default ] base_dir = . certificate = $base_dir/cacert.pem # The CA certifcate private_key = $base_dir/cakey.pem # The CA private key new_certs_dir = $base_dir # Location for new certs after signing database = $base_dir/index.txt # Database index file serial = $base_dir/serial.txt # The current serial number default_days = 1000 # How long to certify for default_crl_days = 30 # How long before next CRL default_md = sha256 # Use public key default MD preserve = no # Keep passed DN ordering x509_extensions = ca_extensions # The extensions to add to the cert email_in_dn = no # Don't concat the email in the DN copy_extensions = copy # Required to copy SANs from CSR to cert #################################################################### [ req ] default_bits = 4096 default_keyfile = cakey.pem distinguished_name = ca_distinguished_name x509_extensions = ca_extensions string_mask = utf8only #################################################################### [ ca_distinguished_name ] countryName = Country Name (2 letter code) countryName_default = DE stateOrProvinceName = State or Province Name (full name) stateOrProvinceName_default = Test Province localityName = Locality Name (eg, city) localityName_default = Test Town organizationName = Organization Name (eg, company) organizationName_default = Test Company organizationalUnitName = Organizational Unit (eg, division) organizationalUnitName_default = Test Unit commonName = Common Name (e.g. server FQDN or YOUR name) commonName_default = Test Name emailAddress = Email Address emailAddress_default = test@test.com #################################################################### [ ca_extensions ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always, issuer basicConstraints = critical, CA:true keyUsage = keyCertSign, cRLSign #################################################################### [ signing_policy ] countryName = optional stateOrProvinceName = optional localityName = optional organizationName = optional organizationalUnitName = optional commonName = supplied emailAddress = optional #################################################################### [ signing_req ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer basicConstraints = CA:FALSE keyUsage = digitalSignature, keyEncipherment \u7136\u540e\u521b\u5efa\u6570\u636e\u5e93\u548c\u5e8f\u5217\u53f7\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u5c06\u7528\u4e8e\u8ddf\u8e2a\u4f7f\u7528\u8be5 CA \u7b7e\u7f72\u7684\u8bc1\u4e66\u3002\u8fd9\u4e24\u4e2a\u6587\u4ef6\u90fd\u662f\u7b80\u5355\u7684\u6587\u672c\u6587\u4ef6\uff0c\u4e0e\u60a8\u7684 CA \u5bc6\u94a5\u4f4d\u4e8e\u540c\u4e00\u76ee\u5f55\u4e2d\u3002 > echo 01 > serial.txt > touch index.txt \u5b8c\u6210\u8fd9\u4e9b\u6b65\u9aa4\u540e\uff0c\u60a8\u73b0\u5728\u5c31\u53ef\u4ee5\u751f\u6210 CA\uff0c\u7a0d\u540e\u5c06\u4f7f\u7528\u8be5 CA \u6765\u7b7e\u7f72\u8bc1\u4e66\u3002 > openssl req -x509 -config openssl-ca.cnf -newkey rsa:4096 -sha256 -nodes -out cacert.pem -outform PEM CA \u53ea\u662f\u4e00\u4e2a\u7531\u81ea\u8eab\u7b7e\u540d\u7684\u516c\u94a5/\u79c1\u94a5\u5bf9\u548c\u8bc1\u4e66\uff0c\u4ec5\u7528\u4e8e\u7b7e\u7f72\u5176\u4ed6\u8bc1\u4e66\u3002 \u8be5\u5bc6\u94a5\u5bf9\u5e94\u8be5\u4fdd\u6301\u975e\u5e38\u5b89\u5168\uff0c\u5982\u679c\u6709\u4eba\u8bbf\u95ee\u5b83\uff0c\u4ed6\u4eec\u53ef\u4ee5\u521b\u5efa\u5e76\u7b7e\u7f72\u60a8\u7684\u57fa\u7840\u8bbe\u65bd\u4fe1\u4efb\u7684\u8bc1\u4e66\uff0c\u8fd9\u610f\u5473\u7740\u4ed6\u4eec\u5728\u8fde\u63a5\u5230\u4fe1\u4efb\u8be5 CA \u7684\u4efb\u4f55\u670d\u52a1\u65f6\u5c06\u80fd\u591f\u5192\u5145\u4efb\u4f55\u4eba\u3002 \u4e0b\u4e00\u6b65\u662f\u5c06\u751f\u6210\u7684 CA \u6dfb\u52a0\u5230 **\u5ba2\u6237\u7aef\u7684\u4fe1\u4efb\u5e93**\uff0c\u4ee5\u4fbf\u5ba2\u6237\u7aef\u53ef\u4ee5\u4fe1\u4efb\u6b64 CA\uff1a > keytool -keystore client.truststore.jks -alias CARoot -import -file ca-cert \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u901a\u8fc7\u5728 Kafka \u4ee3\u7406\u914d\u7f6e\u4e2d\u5c06 ssl.client.auth \u8bbe\u7f6e\u4e3a\u201c\u8bf7\u6c42\u201d\u6216\u201c\u5fc5\u9700\u201d\u6765\u5c06 Kafka \u4ee3\u7406\u914d\u7f6e\u4e3a\u9700\u8981\u5ba2\u6237\u7aef \u8eab\u4efd\u9a8c\u8bc1\uff0c\u90a3\u4e48\u60a8\u8fd8\u5fc5\u987b\u4e3a Kafka \u4ee3\u7406\u63d0\u4f9b\u4e00\u4e2a\u4fe1\u4efb\u5e93\uff0c\u5e76\u4e14\u5b83\u5e94\u8be5\u5305\u542b\u6240\u6709\u5185\u5bb9\u7b7e\u7f72\u5ba2\u6237\u7aef\u5bc6\u94a5\u7684 CA \u8bc1\u4e66\u3002 > keytool -keystore server.truststore.jks -alias CARoot -import -file ca-cert \u4e0e\u6b65\u9aa4 1 \u4e2d\u5b58\u50a8\u6bcf\u53f0\u8ba1\u7b97\u673a\u81ea\u5df1\u7684\u8eab\u4efd\u7684\u5bc6\u94a5\u5e93\u4e0d\u540c\uff0c\u5ba2\u6237\u7aef\u7684\u4fe1\u4efb\u5e93\u5b58\u50a8\u5ba2\u6237\u7aef\u5e94\u8be5\u4fe1\u4efb\u7684\u6240\u6709\u8bc1\u4e66\u3002\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230\u4fe1\u4efb\u5e93\u4e2d\u8fd8\u610f\u5473\u7740\u4fe1\u4efb\u7531\u8be5\u8bc1\u4e66\u7b7e\u540d\u7684\u6240\u6709\u8bc1\u4e66\u3002\u6b63\u5982\u4e0a\u9762\u7684\u7c7b\u6bd4\uff0c\u4fe1\u4efb\u653f\u5e9c\uff08CA\uff09\u4e5f\u610f\u5473\u7740\u4fe1\u4efb\u5176\u9881\u53d1\u7684\u6240\u6709\u62a4\u7167\uff08\u8bc1\u4e66\uff09\u3002\u8be5\u5c5e\u6027\u79f0\u4e3a\u4fe1\u4efb\u94fe\uff0c\u5728\u5927\u578b Kafka \u96c6\u7fa4\u4e0a\u90e8\u7f72 SSL \u65f6\u7279\u522b\u6709\u7528\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u5355\u4e2a CA \u7b7e\u7f72\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8bc1\u4e66\uff0c\u5e76\u8ba9\u6240\u6709\u8ba1\u7b97\u673a\u5171\u4eab\u4fe1\u4efb\u8be5 CA \u7684\u540c\u4e00\u4fe1\u4efb\u5e93\u3002\u8fd9\u6837\u6240\u6709\u673a\u5668\u90fd\u53ef\u4ee5\u9a8c\u8bc1\u6240\u6709\u5176\u4ed6\u673a\u5668\u3002 \u7b7e\u7f72\u8bc1\u4e66 \u7136\u540e\u4f7f\u7528 CA \u5bf9\u5176\u8fdb\u884c\u7b7e\u540d\uff1a > openssl ca -config openssl-ca.cnf -policy signing_policy -extensions signing_req -out {server certificate} -infiles {certificate signing request} \u6700\u540e\uff0c\u60a8\u9700\u8981\u5c06 CA \u7684\u8bc1\u4e66\u548c\u7b7e\u540d\u7684\u8bc1\u4e66\u5bfc\u5165\u5bc6\u94a5\u5e93\uff1a > keytool -keystore {keystore} -alias CARoot -import -file {CA certificate} > keytool -keystore {keystore} -alias localhost -import -file cert-signed \u53c2\u6570\u5b9a\u4e49\u5982\u4e0b\uff1a keystore\uff1a\u5bc6\u94a5\u5e93\u7684\u4f4d\u7f6e CA\u8bc1\u4e66\uff1aCA\u7684\u8bc1\u4e66 \u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\uff1a\u4f7f\u7528\u670d\u52a1\u5668\u5bc6\u94a5\u521b\u5efa\u7684 csr \u670d\u52a1\u5668\u8bc1\u4e66\uff1a\u7528\u4e8e\u5199\u5165\u670d\u52a1\u5668\u7b7e\u540d\u8bc1\u4e66\u7684\u6587\u4ef6 \u8fd9\u5c06\u4e3a\u60a8\u7559\u4e0b\u4e00\u4e2a\u540d\u4e3a truststore.jks \u7684\u4fe1\u4efb\u5e93- \u8fd9\u5bf9\u4e8e\u6240\u6709\u5ba2\u6237\u548c\u7ecf\u7eaa\u5546\u6765\u8bf4\u90fd\u662f\u76f8\u540c\u7684\uff0c\u5e76\u4e14\u4e0d\u5305\u542b\u4efb\u4f55\u654f\u611f\u4fe1\u606f\uff0c\u56e0\u6b64\u65e0\u9700\u4fdd\u62a4\u8fd9\u4e00\u70b9\u3002 \u6b64\u5916\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u6709\u4e00\u4e2a server.keystore.jks \u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u8282\u70b9\u5bc6\u94a5\u3001\u8bc1\u4e66\u548c CA \u8bc1\u4e66\uff0c\u8bf7\u53c2\u9605 \u914d\u7f6e Kafka \u4ee3\u7406 \u548c \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u4ee5\u83b7\u53d6\u6709\u5173\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u6587\u4ef6\u7684\u4fe1\u606f\u3002 \u6709\u5173\u6b64\u4e3b\u9898\u7684\u4e00\u4e9b\u5de5\u5177\u5e2e\u52a9\uff0c\u8bf7\u67e5\u770b easyRSA \u9879\u76ee\uff0c\u8be5\u9879\u76ee\u5177\u6709\u4e30\u5bcc\u7684\u811a\u672c\u6765\u5e2e\u52a9\u5b8c\u6210\u8fd9\u4e9b\u6b65\u9aa4\u3002 PEM \u683c\u5f0f\u7684 SSL \u5bc6\u94a5\u548c\u8bc1\u4e66 \u4ece 2.7.0 \u5f00\u59cb\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 PEM \u683c\u5f0f\u7684\u914d\u7f6e\u4e2d\u4e3a Kafka \u4ee3\u7406\u548c\u5ba2\u6237\u7aef\u914d\u7f6e SSL \u5bc6\u94a5\u548c\u4fe1\u4efb\u5b58\u50a8\u3002\u8fd9\u907f\u514d\u4e86\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u5b58\u50a8\u5355\u72ec\u6587\u4ef6\u7684\u9700\u8981\uff0c\u5e76\u53d7\u76ca\u4e8e Kafka \u914d\u7f6e\u7684\u5bc6\u7801\u4fdd\u62a4\u529f\u80fd\u3002\u9664\u4e86 JKS \u548c PKCS12 \u4e4b\u5916\uff0cPEM \u8fd8\u53ef\u4ee5\u7528\u4f5c\u57fa\u4e8e\u6587\u4ef6\u7684\u5bc6\u94a5\u548c\u4fe1\u4efb\u5b58\u50a8\u7684\u5b58\u50a8\u7c7b\u578b\u3002\u8981\u76f4\u63a5\u5728\u4ee3\u7406\u6216\u5ba2\u6237\u7aef\u914d\u7f6e\u4e2d\u914d\u7f6e PEM \u5bc6\u94a5\u5b58\u50a8\uff0c\u5e94\u5728 \u4e2d\u63d0\u4f9b PEM \u683c\u5f0f\u7684\u79c1\u94a5\uff0c ssl.keystore.key \u5e76\u5e94\u5728 \u4e2d\u63d0\u4f9b PEM \u683c\u5f0f\u7684\u8bc1\u4e66\u94fe ssl.keystore.certificate.chain \u3002\u8981\u914d\u7f6e\u4fe1\u4efb\u5b58\u50a8\uff0c\u5e94\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u63d0\u4f9b\u4fe1\u4efb\u8bc1\u4e66\uff0c\u4f8b\u5982 CA \u7684\u516c\u5171\u8bc1\u4e66 ssl.truststore.certificates \u3002\u7531\u4e8e PEM \u901a\u5e38\u5b58\u50a8\u4e3a\u591a\u884c base-64 \u5b57\u7b26\u4e32\uff0c\u56e0\u6b64\u914d\u7f6e\u503c\u53ef\u4ee5\u4f5c\u4e3a\u591a\u884c\u5b57\u7b26\u4e32\u5305\u542b\u5728 Kafka \u914d\u7f6e\u4e2d\uff0c\u5176\u4e2d\u884c\u4ee5\u53cd\u659c\u6760 ('\\') \u7ed3\u5c3e\u4ee5\u7ee7\u7eed\u884c\u3002 \u5b58\u50a8\u5bc6\u7801\u914d\u7f6e ssl.keystore.password \uff0c ssl.truststore.password \u4e0d\u7528\u4e8e PEM\u3002\u5982\u679c\u79c1\u94a5\u4f7f\u7528\u5bc6\u7801\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u5728 \u4e2d\u63d0\u4f9b\u5bc6\u94a5\u5bc6\u7801 ssl.key.password \u3002\u79c1\u94a5\u53ef\u4ee5\u4ee5\u672a\u52a0\u5bc6\u7684\u5f62\u5f0f\u63d0\u4f9b\uff0c\u65e0\u9700\u5bc6\u7801\u3002\u5728\u751f\u4ea7\u90e8\u7f72\u4e2d\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u4f7f\u7528 Kafka \u4e2d\u7684\u5bc6\u7801\u4fdd\u62a4\u529f\u80fd\u5bf9\u914d\u7f6e\u8fdb\u884c\u52a0\u5bc6\u6216\u5916\u90e8\u5316\u3002\u8bf7\u6ce8\u610f\uff0c\u5f53\u4f7f\u7528 OpenSSL \u7b49\u5916\u90e8\u5de5\u5177\u8fdb\u884c\u52a0\u5bc6\u65f6\uff0c\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u5bf9\u52a0\u5bc6\u79c1\u94a5\u7684\u89e3\u5bc6\u529f\u80fd\u6709\u9650\u3002BouncyCastle \u7b49\u7b2c\u4e09\u65b9\u5e93\u53ef\u4ee5\u4e0e\u81ea\u5b9a\u4e49\u96c6\u6210\uff0c SslEngineFactory \u4ee5\u652f\u6301\u66f4\u5e7f\u6cdb\u7684\u52a0\u5bc6\u79c1\u94a5\u3002 \u751f\u4ea7\u4e2d\u5e38\u89c1\u7684\u9677\u9631 \u4e0a\u9762\u7684\u6bb5\u843d\u5c55\u793a\u4e86\u521b\u5efa\u60a8\u81ea\u5df1\u7684 CA \u5e76\u4f7f\u7528\u5b83\u4e3a\u60a8\u7684\u96c6\u7fa4\u7b7e\u7f72\u8bc1\u4e66\u7684\u8fc7\u7a0b\u3002\u867d\u7136\u5bf9\u4e8e\u6c99\u7bb1\u3001\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u7c7b\u4f3c\u7cfb\u7edf\u975e\u5e38\u6709\u7528\uff0c\u4f46\u8fd9\u901a\u5e38\u4e0d\u662f\u5728\u4f01\u4e1a\u73af\u5883\u4e2d\u4e3a\u751f\u4ea7\u96c6\u7fa4\u521b\u5efa\u8bc1\u4e66\u7684\u6b63\u786e\u8fc7\u7a0b\u3002\u4f01\u4e1a\u901a\u5e38\u4f1a\u8fd0\u8425\u81ea\u5df1\u7684CA\uff0c\u7528\u6237\u53ef\u4ee5\u53d1\u9001CSR\u6765\u4e0e\u8be5CA\u7b7e\u7f72\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u7528\u6237\u65e0\u9700\u8d1f\u8d23\u4fdd\u8bc1CA\u7684\u5b89\u5168\uff0c\u5e76\u4e14\u6709\u4e00\u4e2a\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u4fe1\u4efb\u7684\u4e2d\u592e\u6743\u5a01\u3002\u7136\u800c\uff0c\u5b83\u4e5f\u5265\u593a\u4e86\u7528\u6237\u5bf9\u8bc1\u4e66\u7b7e\u540d\u8fc7\u7a0b\u7684\u5f88\u591a\u63a7\u5236\u6743\u3002 1. \u6269\u5c55\u5bc6\u94a5\u4f7f\u7528 \u8bc1\u4e66\u53ef\u80fd\u5305\u542b\u63a7\u5236\u8bc1\u4e66\u4f7f\u7528\u76ee\u7684\u7684\u6269\u5c55\u5b57\u6bb5\u3002\u5982\u679c\u6b64\u5b57\u6bb5\u4e3a\u7a7a\uff0c\u5219\u5bf9\u4f7f\u7528\u6ca1\u6709\u9650\u5236\uff0c\u4f46\u5982\u679c\u6b64\u5904\u6307\u5b9a\u4e86\u4efb\u4f55\u4f7f\u7528\uff0c\u5219\u6709\u6548\u7684 SSL \u5b9e\u73b0\u5fc5\u987b\u5f3a\u5236\u6267\u884c\u8fd9\u4e9b\u4f7f\u7528\u3002 Kafka\u7684\u76f8\u5173\u7528\u6cd5\u6709\uff1a * \u5ba2\u6237\u7aef\u8ba4\u8bc1 * \u670d\u52a1\u5668\u8ba4\u8bc1 Kafka \u4ee3\u7406\u9700\u8981\u5141\u8bb8\u8fd9\u4e24\u79cd\u7528\u6cd5\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u96c6\u7fa4\u5185\u901a\u4fe1\uff0c\u6bcf\u4e2a\u4ee3\u7406\u5c06\u540c\u65f6\u5145\u5f53\u5176\u4ed6\u4ee3\u7406\u7684\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u3002\u4f01\u4e1a CA \u62e5\u6709 Web \u670d\u52a1\u5668\u7684\u7b7e\u540d\u914d\u7f6e\u6587\u4ef6\u5e76\u5c06\u5176\u7528\u4e8e Kafka \u7684\u60c5\u51b5\u5e76\u4e0d\u7f55\u89c1\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4ec5\u5305\u542b serverAuth*\u4f7f\u7528*\u503c\u5e76\u5bfc\u81f4 SSL \u63e1\u624b\u5931\u8d25\u3002 \u51fa\u4e8e\u5b89\u5168\u539f\u56e0\uff0c\u4e2d\u95f4\u8bc1\u4e66 \u4f01\u4e1a\u6839 CA \u901a\u5e38\u4fdd\u6301\u79bb\u7ebf\u72b6\u6001\u3002\u4e3a\u4e86\u5b9e\u73b0\u65e5\u5e38\u4f7f\u7528\uff0c\u521b\u5efa\u4e86\u6240\u8c13\u7684\u4e2d\u95f4 CA\uff0c\u7136\u540e\u4f7f\u7528\u5b83\u4eec\u6765\u7b7e\u7f72\u6700\u7ec8\u8bc1\u4e66\u3002\u5c06\u7531\u4e2d\u95f4 CA \u7b7e\u540d\u7684\u8bc1\u4e66\u5bfc\u5165\u5bc6\u94a5\u5e93\u65f6\uff0c\u6709\u5fc5\u8981\u63d0\u4f9b\u76f4\u81f3\u6839 CA \u7684\u6574\u4e2a\u4fe1\u4efb\u94fe\u3002\u53ea\u9700\u5c06\u8bc1\u4e66\u6587\u4ef6\u5408\u5e76\u5230\u4e00\u4e2a\u7ec4\u5408\u8bc1\u4e66\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u4f7f\u7528 keytool \u5bfc\u5165\u8be5\u6587\u4ef6\u5373\u53ef\u5b8c\u6210\u6b64 \u64cd\u4f5c \u3002 \u65e0\u6cd5\u590d\u5236\u6269\u5c55\u5b57\u6bb5 CA \u8fd0\u8425\u5546\u901a\u5e38\u4e0d\u613f\u610f\u4ece CSR \u590d\u5236\u548c\u8bf7\u6c42\u6269\u5c55\u5b57\u6bb5\uff0c\u800c\u662f\u66f4\u613f\u610f\u81ea\u5df1\u6307\u5b9a\u8fd9\u4e9b\u5b57\u6bb5\uff0c\u56e0\u4e3a\u8fd9\u4f7f\u5f97\u6076\u610f\u65b9\u66f4\u96be\u83b7\u53d6\u5177\u6709\u6f5c\u5728\u8bef\u5bfc\u6027\u6216\u6b3a\u8bc8\u6027\u503c\u7684\u8bc1\u4e66\u3002\u5efa\u8bae\u4ed4\u7ec6\u68c0\u67e5\u7b7e\u540d\u8bc1\u4e66\uff0c\u8fd9\u4e9b\u8bc1\u4e66\u662f\u5426\u5305\u542b\u6240\u6709\u8bf7\u6c42\u7684 SAN \u5b57\u6bb5\u4ee5\u542f\u7528\u6b63\u786e\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u3002\u4ee5\u4e0b\u547d\u4ee4\u53ef\u7528\u4e8e\u5c06\u8bc1\u4e66\u8be6\u7ec6\u4fe1\u606f\u6253\u5370\u5230\u63a7\u5236\u53f0\uff0c\u8be5\u8be6\u7ec6\u4fe1\u606f\u5e94\u4e0e\u6700\u521d\u8bf7\u6c42\u7684\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\uff1a > openssl x509 -in certificate.crt -text -noout \u914d\u7f6e Kafka \u4ee3\u7406 \u5982\u679c\u6ca1\u6709\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u542f\u7528 SSL\uff08\u8bf7\u53c2\u9605\u4e0b\u6587\u4e86\u89e3\u5982\u4f55\u542f\u7528\u5b83\uff09\uff0c\u5219 PLAINTEXT \u548c SSL \u7aef\u53e3\u90fd\u662f\u5fc5\u9700\u7684\u3002 listeners=PLAINTEXT://host.name:port,SSL://host.name:port \u4ee3\u7406\u7aef\u9700\u8981\u4ee5\u4e0b SSL \u914d\u7f6e ssl.keystore.location=/var/private/ssl/server.keystore.jks ssl.keystore.password=test1234 ssl.key.password=test1234 ssl.truststore.location=/var/private/ssl/server.truststore.jks ssl.truststore.password=test1234 \u6ce8\u610f\uff1assl.truststore.password \u5728\u6280\u672f\u4e0a\u662f\u53ef\u9009\u7684\uff0c\u4f46\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u4fe1\u4efb\u5e93\uff0c\u4f46\u5b8c\u6574\u6027\u68c0\u67e5\u5c06\u88ab\u7981\u7528\u3002\u503c\u5f97\u8003\u8651\u7684\u53ef\u9009\u8bbe\u7f6e\uff1a ssl.client.auth=none \uff08\u201crequired\u201d=> \u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u201crequested\u201d=> \u8bf7\u6c42\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6ca1\u6709\u8bc1\u4e66\u7684\u5ba2\u6237\u7aef\u4ecd\u7136\u53ef\u4ee5\u8fde\u63a5\u3002\u4e0d\u9f13\u52b1\u4f7f\u7528\u201crequested\u201d\uff0c\u56e0\u4e3a\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u9519\u8bef\u7684\u611f\u89c9\u5b89\u5168\u6027\u548c\u914d\u7f6e\u9519\u8bef\u7684\u5ba2\u6237\u7aef\u4ecd\u5c06\u6210\u529f\u8fde\u63a5\u3002\uff09 ssl.cipher.suites\uff08\u53ef\u9009\uff09\u3002\u5bc6\u7801\u5957\u4ef6\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u534f\u5546\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u7684\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\uff08\u9ed8\u8ba4\u4e3a\u7a7a\u5217\u8868\uff09 ssl.enabled.protocols=TLSv1.2,TLSv1.1,TLSv1\uff08\u5217\u51fa\u60a8\u8981\u4ece\u5ba2\u6237\u7aef\u63a5\u53d7\u7684 SSL \u534f\u8bae\u3002\u8bf7\u6ce8\u610f\uff0cSSL \u5df2\u88ab\u5f03\u7528\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f TLS\uff0c\u5e76\u4e14\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528 SSL\uff09 ssl.keystore.type=JKS ssl.truststore.type=JKS ssl.secure.random.implementation=SHA1PRNG \u5982\u679c\u8981\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u542f\u7528 SSL\uff0c\u8bf7\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 server.properties \u6587\u4ef6\uff08\u9ed8\u8ba4\u4e3a PLAINTEXT\uff09 security.inter.broker.protocol=SSL \u7531\u4e8e\u67d0\u4e9b\u56fd\u5bb6/\u5730\u533a\u7684\u8fdb\u53e3\u6cd5\u89c4\uff0cOracle \u5b9e\u65bd\u9650\u5236\u4e86\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ef\u7528\u7684\u52a0\u5bc6\u7b97\u6cd5\u7684\u5f3a\u5ea6\u3002\u5982\u679c\u9700\u8981\u66f4\u5f3a\u7684\u7b97\u6cd5\uff08\u4f8b\u5982\uff0c\u5177\u6709 256 \u4f4d\u5bc6\u94a5\u7684 AES\uff09\uff0c\u5219\u5fc5\u987b\u83b7\u53d6 JCE \u65e0\u9650\u5f3a\u5ea6\u7ba1\u8f96\u7b56\u7565\u6587\u4ef6 \u5e76\u5c06\u5176\u5b89\u88c5\u5728 JDK/JRE \u4e2d\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 JCA \u63d0\u4f9b\u5546\u6587\u6863\u3002 JRE/JDK \u5c06\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684\u4f2a\u968f\u673a\u6570\u751f\u6210\u5668 (PRNG)\uff0c\u7528\u4e8e\u52a0\u5bc6\u64cd\u4f5c\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u914d\u7f6e ssl.secure.random.implementation . \u7136\u800c\uff0c\u67d0\u4e9b\u5b9e\u73b0\u5b58\u5728\u6027\u80fd\u95ee\u9898\uff08\u7279\u522b\u662f\uff0cLinux \u7cfb\u7edf\u4e0a\u9ed8\u8ba4\u9009\u62e9\u7684\uff0c NativePRNG \u4f7f\u7528\u5168\u5c40\u9501\uff09\u3002\u5982\u679c SSL \u8fde\u63a5\u7684\u6027\u80fd\u6210\u4e3a\u95ee\u9898\uff0c\u8bf7\u8003\u8651\u663e\u5f0f\u8bbe\u7f6e\u8981\u4f7f\u7528\u7684\u5b9e\u73b0\u3002\u8be5 SHA1PRNG \u5b9e\u73b0\u662f\u975e\u963b\u585e\u7684\uff0c\u5e76\u4e14\u5728\u91cd\u8d1f\u8f7d\uff0850 MB/\u79d2\u751f\u6210\u7684\u6d88\u606f\uff0c\u52a0\u4e0a\u6bcf\u4e2a\u4ee3\u7406\u7684\u590d\u5236\u6d41\u91cf\uff09\u4e0b\u8868\u73b0\u51fa\u4e86\u975e\u5e38\u597d\u7684\u6027\u80fd\u7279\u5f81\u3002 \u542f\u52a8\u4ee3\u7406\u540e\uff0c\u60a8\u5e94\u8be5\u80fd\u591f\u5728 server.log \u4e2d\u770b\u5230 with addresses: PLAINTEXT -> EndPoint(192.168.64.1,9092,PLAINTEXT),SSL -> EndPoint(192.168.64.1,9093,SSL) \u8981\u5feb\u901f\u68c0\u67e5\u670d\u52a1\u5668\u5bc6\u94a5\u5e93\u548c\u4fe1\u4efb\u5e93\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\uff0c\u60a8\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4 > openssl s_client -debug -connect localhost:9093 -tls1 \uff08\u6ce8\u610f\uff1aTLSv1 \u5e94\u5217\u5728 ssl.enabled.protocols \u4e0b\uff09 \u5728\u6b64\u547d\u4ee4\u7684\u8f93\u51fa\u4e2d\uff0c\u60a8\u5e94\u8be5\u770b\u5230\u670d\u52a1\u5668\u7684\u8bc1\u4e66\uff1a -----BEGIN CERTIFICATE----- {variable sized random bytes} -----END CERTIFICATE----- subject=/C=US/ST=CA/L=Santa Clara/O=org/OU=org/CN=Sriharsha Chintalapani issuer=/C=US/ST=CA/L=Santa Clara/O=org/OU=org/CN=kafka/emailAddress=test@test.com \u5982\u679c\u8bc1\u4e66\u672a\u663e\u793a\u6216\u5b58\u5728\u4efb\u4f55\u5176\u4ed6\u9519\u8bef\u6d88\u606f\uff0c\u5219\u8bf4\u660e\u60a8\u7684\u5bc6\u94a5\u5e93\u8bbe\u7f6e\u4e0d\u6b63\u786e\u3002 6. #### \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u4ec5\u65b0\u7684 Kafka Producer \u548c Consumer \u652f\u6301 SSL\uff0c\u4e0d\u652f\u6301\u65e7\u7684 API\u3002SSL \u914d\u7f6e\u5bf9\u4e8e\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6765\u8bf4\u90fd\u662f\u76f8\u540c\u7684\u3002 \u5982\u679c\u4ee3\u7406\u4e2d\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u4ee5\u4e0b\u662f\u6700\u5c0f\u914d\u7f6e\u793a\u4f8b\uff1a security.protocol=SSL ssl.truststore.location=/var/private/ssl/client.truststore.jks ssl.truststore.password=test1234 \u6ce8\u610f\uff1assl.truststore.password \u5728\u6280\u672f\u4e0a\u662f\u53ef\u9009\u7684\uff0c\u4f46\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u4fe1\u4efb\u5e93\uff0c\u4f46\u5b8c\u6574\u6027\u68c0\u67e5\u5c06\u88ab\u7981\u7528\u3002\u5982\u679c\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u5fc5\u987b\u50cf\u6b65\u9aa4 1 \u4e2d\u90a3\u6837\u521b\u5efa\u5bc6\u94a5\u5e93\uff0c\u5e76\u4e14\u8fd8\u5fc5\u987b\u914d\u7f6e\u4ee5\u4e0b\u5185\u5bb9\uff1a ssl.keystore.location=/var/private/ssl/client.keystore.jks ssl.keystore.password=test1234 ssl.key.password=test1234 \u6839\u636e\u6211\u4eec\u7684\u8981\u6c42\u548c\u4ee3\u7406\u914d\u7f6e\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u5176\u4ed6\u914d\u7f6e\u8bbe\u7f6e\uff1a ssl.provider\uff08\u53ef\u9009\uff09\u3002\u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 ssl.cipher.suites\uff08\u53ef\u9009\uff09\u3002\u5bc6\u7801\u5957\u4ef6\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u534f\u5546\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u7684\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002 ssl.enabled.protocols=TLSv1.2\u3001TLSv1.1\u3001TLSv1\u3002\u5b83\u5e94\u8be5\u81f3\u5c11\u5217\u51fa\u4ee3\u7406\u7aef\u914d\u7f6e\u7684\u534f\u8bae\u4e4b\u4e00 ssl.truststore.type=JKS ssl.keystore.type=JKS \u4f7f\u7528\u63a7\u5236\u53f0\u751f\u4ea7\u8005\u548c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u7684\u793a\u4f8b\uff1a > kafka-console-producer.sh --bootstrap-server localhost:9093 --topic test --producer.config client-ssl.properties > kafka-console-consumer.sh --bootstrap-server localhost:9093 --topic test --consumer.config client-ssl.properties 7.4 \u4f7f\u7528 SASL \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 JAAS\u914d\u7f6e Kafka \u4f7f\u7528 Java \u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u670d\u52a1 ( JAAS ) \u8fdb\u884c SASL \u914d\u7f6e\u3002 Kafka \u4ee3\u7406\u7684 JAAS \u914d\u7f6e KafkaServer\u662f\u6bcf\u4e2a KafkaServer/Broker \u4f7f\u7528\u7684 JAAS \u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u540d\u79f0\u3002\u672c\u90e8\u5206\u4e3a\u4ee3\u7406\u63d0\u4f9b SASL \u914d\u7f6e\u9009\u9879\uff0c\u5305\u62ec\u4ee3\u7406\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u800c\u5efa\u7acb\u7684\u4efb\u4f55 SASL \u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u5982\u679c\u5c06\u591a\u4e2a\u4fa6\u542c\u5668\u914d\u7f6e\u4e3a\u4f7f\u7528 SASL\uff0c\u5219\u90e8\u5206\u540d\u79f0\u53ef\u4ee5\u4ee5\u5c0f\u5199\u4fa6\u542c\u5668\u540d\u79f0\u4e3a\u524d\u7f00\uff0c\u540e\u8ddf\u53e5\u70b9\uff0c\u4f8b\u5982sasl_ssl.KafkaServer\u3002 \u5ba2\u6237\u7aef\u90e8\u5206\u7528\u4e8e\u9a8c\u8bc1\u4e0e Zookeeper \u7684 SASL \u8fde\u63a5\u3002\u5b83\u8fd8\u5141\u8bb8\u4ee3\u7406\u5728 Zookeeper \u8282\u70b9\u4e0a\u8bbe\u7f6e SASL ACL\uff0c\u4ece\u800c\u9501\u5b9a\u8fd9\u4e9b\u8282\u70b9\uff0c\u4ee5\u4fbf\u53ea\u6709\u4ee3\u7406\u53ef\u4ee5\u4fee\u6539\u5b83\u3002\u6240\u6709\u7ecf\u7eaa\u5546\u5fc5\u987b\u5177\u6709\u76f8\u540c\u7684\u4e3b\u4f53\u540d\u79f0\u3002\u5982\u679c\u8981\u4f7f\u7528\u9664 Client \u4e4b\u5916\u7684\u8282\u540d\u79f0\uff0c\u8bf7\u5c06\u7cfb\u7edf\u5c5e\u6027Zookeeper.sasl.clientconfig\u8bbe\u7f6e\u4e3a\u9002\u5f53\u7684\u540d\u79f0\uff08 \u4f8b\u5982 -Dzookeeper.sasl.clientconfig=ZkClient\uff09\u3002 ZooKeeper \u9ed8\u8ba4\u4f7f\u7528\u201czookeeper\u201d\u4f5c\u4e3a\u670d\u52a1\u540d\u79f0\u3002\u5982\u679c\u8981\u66f4\u6539\u6b64\u8bbe\u7f6e\uff0c\u8bf7\u5c06\u7cfb\u7edf\u5c5e\u6027 Zookeeper.sasl.client.username\u8bbe\u7f6e\u4e3a\u9002\u5f53\u7684\u540d\u79f0\uff08\u4f8b\u5982 -Dzookeeper.sasl.client.username \\=zk\uff09\u3002 \u4ee3\u7406\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee3\u7406\u914d\u7f6e\u5c5e\u6027\u6765\u914d\u7f6e JAAS sasl.jaas.config \u3002\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\uff08\u5305\u62ec SASL \u673a\u5236\uff09\u4f5c\u4e3a\u524d\u7f00\uff0c\u5373 listener.name.{listenerName}.{saslMechanism}.sasl.jaas.config . \u914d\u7f6e\u503c\u4e2d\u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u767b\u5f55\u6a21\u5757\u3002\u5982\u679c\u5728\u4fa6\u542c\u5668\u4e0a\u914d\u7f6e\u4e86\u591a\u4e2a\u673a\u5236\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u4fa6\u542c\u5668\u548c\u673a\u5236\u524d\u7f00\u4e3a\u6bcf\u4e2a\u673a\u5236\u63d0\u4f9b\u914d\u7f6e\u3002\u4f8b\u5982\uff0c listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \\ username=\"admin\" \\ password=\"admin-secret\"; listener.name.sasl_ssl.plain.sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required \\ username=\"admin\" \\ password=\"admin-secret\" \\ user_admin=\"admin-secret\" \\ user_alice=\"alice-secret\"; \u5982\u679c\u5728\u4e0d\u540c\u7ea7\u522b\u5b9a\u4e49 JAAS \u914d\u7f6e\uff0c\u5219\u4f7f\u7528\u7684\u4f18\u5148\u987a\u5e8f\u4e3a\uff1a \u4ee3\u7406\u914d\u7f6e\u5c5e\u6027 listener.name.{listenerName}.{saslMechanism}.sasl.jaas.config {listenerName}.KafkaServer \u9759\u6001 JAAS \u914d\u7f6e\u90e8\u5206 KafkaServer \u9759\u6001 JAAS \u914d\u7f6e\u90e8\u5206 \u8bf7\u6ce8\u610f\uff0cZooKeeper JAAS \u914d\u7f6e\u53ea\u80fd\u4f7f\u7528\u9759\u6001 JAAS \u914d\u7f6e\u8fdb\u884c\u914d\u7f6e\u3002 \u6709\u5173\u4ee3\u7406\u914d\u7f6e\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605 GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u6216 OAUTHBEARER \u3002 Kafka \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e \u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528\u5ba2\u6237\u7aef\u914d\u7f6e\u5c5e\u6027 sasl.jaas.config \u6216\u4f7f\u7528 \u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 \u9759\u6001 JAAS \u914d\u7f6e\u6587\u4ef6\u6765\u914d\u7f6e JAAS\u3002 \u4f7f\u7528\u5ba2\u6237\u7aef\u914d\u7f6e\u5c5e\u6027\u7684 JAAS \u914d\u7f6e \u5ba2\u6237\u7aef\u53ef\u4ee5\u5c06 JAAS \u914d\u7f6e\u6307\u5b9a\u4e3a\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\u5c5e\u6027\uff0c\u800c\u65e0\u9700\u521b\u5efa\u7269\u7406\u914d\u7f6e\u6587\u4ef6\u3002\u6b64\u6a21\u5f0f\u8fd8\u5141\u8bb8\u540c\u4e00 JVM \u4e2d\u7684\u4e0d\u540c\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u901a\u8fc7\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u6307\u5b9a\u4e0d\u540c\u7684\u5c5e\u6027\u6765\u4f7f\u7528\u4e0d\u540c\u7684\u51ed\u636e\u3002\u5982\u679c\u540c\u65f6\u6307\u5b9a\u4e86\u9759\u6001 JAAS \u914d\u7f6e\u7cfb\u7edf\u5c5e\u6027 java.security.auth.login.config \u548c\u5ba2\u6237\u7aef\u5c5e\u6027 sasl.jaas.config \uff0c\u5219\u5c06\u4f7f\u7528\u5ba2\u6237\u7aef\u5c5e\u6027\u3002 \u6709\u5173\u793a\u4f8b\u914d\u7f6e\uff0c\u8bf7\u53c2\u9605 GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u6216 OAUTHBEARER \u3002 \u4f7f\u7528\u9759\u6001\u914d\u7f6e\u6587\u4ef6\u7684 JAAS \u914d\u7f6e \u8981\u4f7f\u7528\u9759\u6001 JAAS \u914d\u7f6e\u6587\u4ef6\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u6dfb\u52a0\u4e00\u4e2a JAAS \u914d\u7f6e\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u540d\u4e3aKafkaClient\u7684\u5ba2\u6237\u7aef\u767b\u5f55\u90e8\u5206\u3002\u5728KafkaClient\u4e2d\u4e3a\u6240\u9009\u673a\u5236\u914d\u7f6e\u767b\u5f55\u6a21\u5757\uff0c\u5982\u8bbe\u7f6e GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u6216 OAUTHBEARER \u7684\u793a\u4f8b\u4e2d\u6240\u8ff0\u3002\u4f8b\u5982\uff0c GSSAPI \u51ed\u8bc1\u53ef\u4ee5\u914d\u7f6e\u4e3a\uff1a KafkaClient { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_client.keytab\" principal=\"kafka-client-1@EXAMPLE.COM\"; }; \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a\u5ba2\u6237\u7aef JVM\u3002\u4f8b\u5982\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_client_jaas.conf SASL\u914d\u7f6e SASL \u53ef\u4ee5\u4e0e PLAINTEXT \u6216 SSL \u4e00\u8d77\u4f7f\u7528\uff0c\u4f5c\u4e3a\u5206\u522b\u4f7f\u7528\u5b89\u5168\u534f\u8bae SASL_PLAINTEXT \u6216 SASL_SSL \u7684\u4f20\u8f93\u5c42\u3002\u5982\u679c\u4f7f\u7528SASL_SSL\uff0c\u5219 \u8fd8\u5fc5\u987b\u914d\u7f6eSSL \u3002 SASL\u673a\u5236 Kafka\u652f\u6301\u4ee5\u4e0bSASL\u673a\u5236\uff1a * GSSAPI \uff08Kerberos\uff09 * \u6e05\u695a\u7684 * SCRAM-SHA-256 * SCRAM-SHA-512 * \u627f\u8f7d\u8005 Kafka \u4ee3\u7406\u7684 SASL \u914d\u7f6e \u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\uff0c\u65b9\u6cd5\u662f\u5c06 SASL_PLAINTEXT \u6216 SASL_SSL \u81f3\u5c11\u4e4b\u4e00\u6dfb\u52a0\u5230 listeners \u53c2\u6570\uff0c\u8be5\u53c2\u6570\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u9017\u53f7\u5206\u9694\u503c\uff1a listeners=SASL_PLAINTEXT://host.name:port \u5982\u679c\u60a8\u4ec5\u914d\u7f6e SASL \u7aef\u53e3\uff08\u6216\u8005\u5982\u679c\u60a8\u5e0c\u671b Kafka \u4ee3\u7406\u4f7f\u7528 SASL \u76f8\u4e92\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff09\uff0c\u8bf7\u786e\u4fdd\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u8bbe\u7f6e\u76f8\u540c\u7684 SASL \u534f\u8bae\uff1a security.inter.broker.protocol=SASL_PLAINTEXT (or SASL_SSL) \u9009\u62e9 \u8981\u5728\u4ee3\u7406\u4e2d\u542f\u7528\u7684\u4e00\u79cd\u6216\u591a\u79cd \u53d7\u652f\u6301\u7684\u673a\u5236\uff0c\u5e76\u6309\u7167\u6b65\u9aa4\u4e3a\u8be5\u673a\u5236\u914d\u7f6e SASL\u3002 \u8981\u5728\u4ee3\u7406\u4e2d\u542f\u7528\u591a\u79cd\u673a\u5236\uff0c\u8bf7\u6309\u7167\u6b64\u5904\u7684 \u6b65\u9aa4\u64cd\u4f5c \u3002 Kafka \u5ba2\u6237\u7aef\u7684 SASL \u914d\u7f6e \u4ec5\u65b0\u7684 Java Kafka \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u652f\u6301 SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u4e0d\u652f\u6301\u65e7\u7684 API\u3002 \u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u8bf7\u9009\u62e9 \u5728\u4ee3\u7406\u4e2d\u542f\u7528\u7684SASL \u673a\u5236\u4ee5\u8fdb\u884c\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7136\u540e\u6309\u7167\u6b65\u9aa4\u4e3a\u6240\u9009\u673a\u5236\u914d\u7f6e SASL\u3002 \u6ce8\u610f\uff1a\u5f53\u901a\u8fc7 SASL \u5efa\u7acb\u4e0e\u4ee3\u7406\u7684\u8fde\u63a5\u65f6\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u5bf9\u4ee3\u7406\u5730\u5740\u6267\u884c\u53cd\u5411 DNS \u67e5\u627e\u3002\u7531\u4e8e JRE \u5b9e\u73b0\u53cd\u5411 DNS \u67e5\u627e\u7684\u65b9\u5f0f\uff0c\u5982\u679c\u672a\u4f7f\u7528\u5b8c\u5168\u9650\u5b9a\u7684\u57df\u540d\uff08\u5bf9\u4e8e\u5ba2\u6237\u7aef bootstrap.servers \u548c\u4ee3\u7406\u7684 [advertised.listeners](https://kafka.apache.org/documentation/#brokerconfigs_advertised.listeners) . \u4f7f\u7528 SASL/Kerberos \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 \u5148\u51b3\u6761\u4ef6 Kerberos \u5982\u679c\u60a8\u7684\u7ec4\u7ec7\u5df2\u7ecf\u4f7f\u7528 Kerberos \u670d\u52a1\u5668\uff08\u4f8b\u5982\uff0c\u901a\u8fc7\u4f7f\u7528 Active Directory\uff09\uff0c\u5219\u65e0\u9700\u4ec5\u4e3a Kafka \u5b89\u88c5\u65b0\u670d\u52a1\u5668\u3002\u5426\u5219\uff0c\u60a8\u5c06\u9700\u8981\u5b89\u88c5\u4e00\u4e2a\uff0c\u60a8\u7684 Linux \u4f9b\u5e94\u5546\u53ef\u80fd\u6709 Kerberos \u8f6f\u4ef6\u5305\u4ee5\u53ca\u6709\u5173\u5982\u4f55\u5b89\u88c5\u548c\u914d\u7f6e\u5b83\u7684\u7b80\u77ed\u6307\u5357\uff08 Ubuntu \u3001 Redhat \uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u4f7f\u7528 Oracle Java\uff0c\u5219\u9700\u8981\u4e0b\u8f7d\u9002\u5408\u60a8\u7684 Java \u7248\u672c\u7684 JCE \u7b56\u7565\u6587\u4ef6\u5e76\u5c06\u5176\u590d\u5236\u5230 $JAVA_HOME/jre/lib/security\u3002 \u521b\u5efa Kerberos \u4e3b\u4f53 \u5982\u679c\u60a8\u4f7f\u7528\u7ec4\u7ec7\u7684 Kerberos \u6216 Active Directory \u670d\u52a1\u5668\uff0c\u8bf7\u5411 Kerberos \u7ba1\u7406\u5458\u8be2\u95ee\u96c6\u7fa4\u4e2d\u6bcf\u4e2a Kafka \u4ee3\u7406\u4ee5\u53ca\u5c06\u4f7f\u7528 Kerberos \u8eab\u4efd\u9a8c\u8bc1\uff08\u901a\u8fc7\u5ba2\u6237\u7aef\u548c\u5de5\u5177\uff09\u8bbf\u95ee Kafka \u7684\u6bcf\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u7684\u4e3b\u4f53\u3002 \u5982\u679c\u60a8\u5b89\u88c5\u4e86\u81ea\u5df1\u7684 Kerberos\uff0c\u5219\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u81ea\u884c\u521b\u5efa\u8fd9\u4e9b\u4e3b\u4f53\uff1a > sudo /usr/sbin/kadmin.local -q 'addprinc -randkey kafka/{hostname}@{REALM}' > sudo /usr/sbin/kadmin.local -q \"ktadd -k /etc/security/keytabs/{keytabname}.keytab kafka/{hostname}@{REALM}\" \u786e\u4fdd\u53ef\u4ee5\u4f7f\u7528\u4e3b\u673a\u540d\u8bbf\u95ee\u6240\u6709\u4e3b\u673a - Kerberos \u8981\u6c42\u6240\u6709\u4e3b\u673a\u90fd\u53ef\u4ee5\u4f7f\u7528\u5176 FQDN \u8fdb\u884c\u89e3\u6790\u3002 \u914d\u7f6e Kafka \u4ee3\u7406 \u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u672c\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff08\u8bf7\u6ce8\u610f\uff0c\u6bcf\u4e2a\u4ee3\u7406\u5e94\u8be5\u6709\u81ea\u5df1\u7684\u5bc6\u94a5\u8868\uff09\uff1a KafkaServer { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_server.keytab\" principal=\"kafka/kafka1.hostname.com@EXAMPLE.COM\"; }; // Zookeeper client authentication Client { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_server.keytab\" principal=\"kafka/kafka1.hostname.com@EXAMPLE.COM\"; }; JAAS \u6587\u4ef6\u4e2d\u7684KafkaServer\u90e8\u5206\u544a\u8bc9\u4ee3\u7406\u8981\u4f7f\u7528\u54ea\u4e2a\u4e3b\u4f53\u4ee5\u53ca\u5b58\u50a8\u8be5\u4e3b\u4f53\u7684\u5bc6\u94a5\u8868\u7684\u4f4d\u7f6e\u3002\u5b83\u5141\u8bb8\u4ee3\u7406\u4f7f\u7528\u672c\u8282\u4e2d\u6307\u5b9a\u7684\u5bc6\u94a5\u8868\u767b\u5f55\u3002\u6709\u5173 Zookeeper SASL \u914d\u7f6e\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u6ce8\u91ca\u3002 \u5c06 JAAS \u548c\u53ef\u9009\u7684 krb5 \u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff08\u8bf7\u53c2\u9605 \u6b64\u5904 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\uff1a -Djava.security.krb5.conf=/etc/kafka/krb5.conf -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u786e\u4fdd\u542f\u52a8 kafka \u4ee3\u7406\u7684\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u53ef\u4ee5\u8bfb\u53d6 JAAS \u6587\u4ef6\u4e2d\u914d\u7f6e\u7684\u5bc6\u94a5\u8868\u3002 \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_PLAINTEXT://host.name:port security.inter.broker.protocol=SASL_PLAINTEXT sasl.mechanism.inter.broker.protocol=GSSAPI sasl.enabled.mechanisms=GSSAPI \u6211\u4eec\u8fd8\u5fc5\u987b\u5728 server.properties \u4e2d\u914d\u7f6e\u670d\u52a1\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u5e94\u4e0e kafka \u4ee3\u7406\u7684\u4e3b\u4f53\u540d\u79f0\u5339\u914d\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u4e3b\u4f53\u662f\u201ckafka/kafka1.hostname.com@EXAMPLE.com\u201d\uff0c\u56e0\u6b64\uff1a sasl.kerberos.service.name=kafka \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u3001\u8fde\u63a5\u5de5\u4f5c\u4eba\u5458\u7b49\uff09\u5c06\u4f7f\u7528\u81ea\u5df1\u7684\u4e3b\u4f53\uff08\u901a\u5e38\u4e0e\u8fd0\u884c\u5ba2\u6237\u7aef\u7684\u7528\u6237\u540c\u540d\uff09\u5411\u96c6\u7fa4\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u56e0\u6b64\u6839\u636e\u9700\u8981\u83b7\u53d6\u6216\u521b\u5efa\u8fd9\u4e9b\u4e3b\u4f53\u3002\u7136\u540e\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u4e0d\u540c\u7684\u4e3b\u4f53\u4ee5\u4e0d\u540c\u7684\u7528\u6237\u8eab\u4efd\u8fd0\u884c\u3002\u8be5\u7269\u4e1a sasl.jaas.config Producer.properties \u6216 Consumer.properties \u4e2d\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f\u4f7f\u7528\u5bc6\u94a5\u8868\u7684\u5ba2\u6237\u7aef\u7684\u793a\u4f8b\u914d\u7f6e\uff08\u5efa\u8bae\u7528\u4e8e\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u8fdb\u7a0b\uff09\uff1a sasl.jaas.config=com.sun.security.auth.module.Krb5LoginModule required \\ useKeyTab=true \\ storeKey=true \\ keyTab=\"/etc/security/keytabs/kafka_client.keytab\" \\ principal=\"kafka-client-1@EXAMPLE.COM\"; \u5bf9\u4e8e kafka-console-consumer \u6216 kafka-console- Producer \u7b49\u547d\u4ee4\u884c\u5b9e\u7528\u7a0b\u5e8f\uff0ckinit \u53ef\u4ee5\u4e0e\u201cuseTicketCache = true\u201d\u4e00\u8d77\u4f7f\u7528\uff0c\u5982\u4e0b\u6240\u793a\uff1a sasl.jaas.config=com.sun.security.auth.module.Krb5LoginModule required \\ useTicketCache=true; \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 2. \u786e\u4fdd\u542f\u52a8 kafka \u5ba2\u6237\u7aef\u7684\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u53ef\u4ee5\u8bfb\u53d6 JAAS \u914d\u7f6e\u4e2d\u914d\u7f6e\u7684\u5bc6\u94a5\u8868\u3002 3. \uff08\u53ef\u9009\uff09\u5c06 krb5 \u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a\u5ba2\u6237\u7aef JVM\uff08\u8bf7\u53c2\u9605 \u6b64\u5904 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\uff1a -Djava.security.krb5.conf=/etc/kafka/krb5.conf \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_PLAINTEXT (or SASL_SSL) sasl.mechanism=GSSAPI sasl.kerberos.service.name=kafka \u4f7f\u7528 SASL/PLAIN \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 SASL/PLAIN\u662f\u4e00\u79cd\u7b80\u5355\u7684\u7528\u6237\u540d/\u5bc6\u7801\u8ba4\u8bc1\u673a\u5236\uff0c\u901a\u5e38\u4e0eTLS\u7ed3\u5408\u4f7f\u7528\u8fdb\u884c\u52a0\u5bc6\uff0c\u5b9e\u73b0\u5b89\u5168\u8ba4\u8bc1\u3002Kafka \u652f\u6301 SASL/PLAIN \u7684\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5c06\u5176\u6269\u5c55\u5230\u751f\u4ea7\u7528\u9014\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002 \u5728\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0c\u7528\u6237\u540d\u7528\u4f5c Principal ACL \u7b49\u914d\u7f6e\u7684 \u8eab\u4efd\u9a8c\u8bc1\u3002 1. ##### \u914d\u7f6e Kafka \u4ee3\u7406 \u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u6b64\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff1a KafkaServer { org.apache.kafka.common.security.plain.PlainLoginModule required username=\"admin\" password=\"admin-secret\" user_admin=\"admin-secret\" user_alice=\"alice-secret\"; }; \u6b64\u914d\u7f6e\u5b9a\u4e49\u4e86\u4e24\u4e2a\u7528\u6237\uff08 admin \u548c alice \uff09\u3002KafkaServer\u90e8\u5206 \u4e2d\u7684\u5c5e\u6027\u7528\u6237\u540d\u548c\u5bc6\u7801\u7531\u4ee3\u7406\u7528\u6765\u542f\u52a8\u4e0e\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c admin \u662f\u7ecf\u7eaa\u5546\u95f4\u901a\u4fe1\u7684\u7528\u6237\u3002\u5c5e\u6027\u96c6user_ userName \u5b9a\u4e49\u8fde\u63a5\u5230\u4ee3\u7406\u7684\u6240\u6709\u7528\u6237\u7684\u5bc6\u7801\uff0c\u5e76\u4e14\u4ee3\u7406\u4f7f\u7528\u8fd9\u4e9b\u5c5e\u6027\u9a8c\u8bc1\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u5305\u62ec\u6765\u81ea\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u3002 2. \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_SSL://host.name:port security.inter.broker.protocol=SASL_SSL sasl.mechanism.inter.broker.protocol=PLAIN sasl.enabled.mechanisms=PLAIN \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f PLAIN \u673a\u5236\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required \\ username=\"alice\" \\ password=\"alice-secret\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u9009\u9879\u6765\u914d\u7f6e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7528\u6237\u3002 \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4ee5\u7528\u6237alice \u7684\u8eab\u4efd\u8fde\u63a5\u5230\u4ee3\u7406\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 sasl.jaas.config . \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_SSL sasl.mechanism=PLAIN \u5728\u751f\u4ea7\u4e2d\u4f7f\u7528 SASL/PLAIN SASL/PLAIN \u53ea\u80fd\u4e0e SSL \u4e00\u8d77\u4f7f\u7528\u4f5c\u4e3a\u4f20\u8f93\u5c42\uff0c\u4ee5\u786e\u4fdd\u660e\u6587\u5bc6\u7801\u4e0d\u4f1a\u5728\u672a\u7ecf\u52a0\u5bc6\u7684\u60c5\u51b5\u4e0b\u5728\u7ebf\u8def\u4e0a\u4f20\u8f93\u3002 Kafka \u4e2d SASL/PLAIN \u7684\u9ed8\u8ba4\u5b9e\u73b0\u5728 JAAS \u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5982\u4e0b \u6240\u793a \u3002 sasl.server.callback.handler.class \u4ece Kafka 2.0 \u7248\u672c\u5f00\u59cb\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u81ea\u5df1\u7684\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u6765\u907f\u514d\u5728\u78c1\u76d8\u4e0a\u5b58\u50a8\u660e\u6587\u5bc6\u7801\uff0c\u8fd9\u4e9b\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u4f7f\u7528\u914d\u7f6e\u9009\u9879\u548c\u6765\u4ece\u5916\u90e8\u6e90\u83b7\u53d6\u7528\u6237\u540d\u548c\u5bc6\u7801 sasl.client.callback.handler.class \u3002 \u5728\u751f\u4ea7\u7cfb\u7edf\u4e2d\uff0c\u5916\u90e8\u8ba4\u8bc1\u670d\u52a1\u5668\u53ef\u4ee5\u5b9e\u73b0\u5bc6\u7801\u8ba4\u8bc1\u3002\u4ece Kafka 2.0 \u7248\u5f00\u59cb\uff0c\u60a8\u53ef\u4ee5\u63d2\u5165\u81ea\u5df1\u7684\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\uff0c\u901a\u8fc7\u914d\u7f6e sasl.server.callback.handler.class . \u4f7f\u7528 SASL/SCRAM \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 Salted \u8d28\u8be2\u54cd\u5e94\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236 (SCRAM) \u662f\u4e00\u7cfb\u5217 SASL \u673a\u5236\uff0c\u53ef\u89e3\u51b3\u6267\u884c\u7528\u6237\u540d/\u5bc6\u7801\u8eab\u4efd\u9a8c\u8bc1\uff08\u4f8b\u5982 PLAIN \u548c DIGEST-MD5\uff09\u7684\u4f20\u7edf\u673a\u5236\u7684\u5b89\u5168\u95ee\u9898\u3002 \u8be5\u673a\u5236\u5728RFC 5802 \u4e2d\u5b9a\u4e49\u3002Kafka\u652f\u6301 SCRAM-SHA-256 \u548cSCRAM-SHA-512\uff0c\u53ef\u4ee5\u4e0eTLS\u7ed3\u5408\u4f7f\u7528\u6765\u6267\u884c\u5b89\u5168\u8eab\u4efd\u9a8c\u8bc1\u3002\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0c\u4f7f\u7528\u7528\u6237\u540d\u4f5c\u4e3a\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684 Principal \u7528\u4e8e\u914d\u7f6e ACL \u7b49\u3002Kafka \u4e2d\u7684\u9ed8\u8ba4 SCRAM \u5b9e\u73b0\u5c06 SCRAM \u51ed\u8bc1\u5b58\u50a8\u5728 Zookeeper \u4e2d\uff0c\u9002\u5408\u5728 Zookeeper \u4f4d\u4e8e\u4e13\u7528\u7f51\u7edc\u4e0a\u7684 Kafka \u5b89\u88c5\u4e2d\u4f7f\u7528\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u3002 \u521b\u5efa SCRAM \u51ed\u8bc1 Kafka \u4e2d\u7684 SCRAM \u5b9e\u73b0\u4f7f\u7528 Zookeeper \u4f5c\u4e3a\u51ed\u8bc1\u200b\u200b\u5b58\u50a8\u3002\u53ef\u4ee5\u4f7f\u7528kafka-configs.sh\u5728 Zookeeper \u4e2d\u521b\u5efa\u51ed\u8bc1\u3002\u5bf9\u4e8e\u542f\u7528\u7684\u6bcf\u4e2a SCRAM \u673a\u5236\uff0c\u5fc5\u987b\u901a\u8fc7\u6dfb\u52a0\u5177\u6709\u673a\u5236\u540d\u79f0\u7684\u914d\u7f6e\u6765\u521b\u5efa\u51ed\u636e\u3002\u5fc5\u987b\u5728\u542f\u52a8 Kafka \u4ee3\u7406\u4e4b\u524d\u521b\u5efa\u4ee3\u7406\u95f4\u901a\u4fe1\u7684\u51ed\u8bc1\u3002\u53ef\u4ee5\u52a8\u6001\u521b\u5efa\u548c\u66f4\u65b0\u5ba2\u6237\u7aef\u51ed\u8bc1\uff0c\u5e76\u4e14\u66f4\u65b0\u7684\u51ed\u8bc1\u5c06\u7528\u4e8e\u9a8c\u8bc1\u65b0\u8fde\u63a5\u3002 \u4f7f\u7528\u5bc6\u7801 alice-secret\u4e3a\u7528\u6237 alice \u521b\u5efa SCRAM \u51ed\u8bc1\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice \u5982\u679c\u672a\u6307\u5b9a\u8fed\u4ee3\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u8fed\u4ee3\u8ba1\u6570 4096\u3002\u521b\u5efa\u968f\u673a\u76d0\uff0c\u5e76\u5c06\u7531\u76d0\u3001\u8fed\u4ee3\u3001StoredKey \u548c ServerKey \u7ec4\u6210\u7684 SCRAM \u8eab\u4efd\u5b58\u50a8\u5728 Zookeeper \u4e2d\u3002\u6709\u5173 SCRAM \u8eab\u4efd\u548c\u5404\u4e2a\u5b57\u6bb5\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 RFC 5802 \u3002 \u4ee5\u4e0b\u793a\u4f8b\u8fd8\u9700\u8981\u7528\u6237 \u7ba1\u7406\u5458 \u8fdb\u884c\u4ee3\u7406\u95f4\u901a\u4fe1\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin \u53ef\u4ee5\u4f7f\u7528--describe \u9009\u9879\u5217\u51fa\u73b0\u6709\u51ed\u636e\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --describe --entity-type users --entity-name alice \u53ef\u4ee5\u4f7f\u7528--alter --delete-config \u9009\u9879\u5220\u9664\u4e00\u79cd\u6216\u591a\u79cd SCRAM \u673a\u5236\u7684\u51ed\u8bc1\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --alter --delete-config 'SCRAM-SHA-512' --entity-type users --entity-name alice \u914d\u7f6e Kafka \u4ee3\u7406 \u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u6b64\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff1a KafkaServer { org.apache.kafka.common.security.scram.ScramLoginModule required username=\"admin\" password=\"admin-secret\"; }; KafkaServer\u90e8\u5206\u4e2d\u7684 \u5c5e\u6027\u7528\u6237\u540d\u548c\u5bc6\u7801\u7531\u4ee3\u7406\u7528\u6765\u542f\u52a8\u4e0e\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c admin \u662f\u7ecf\u7eaa\u5546\u95f4\u901a\u4fe1\u7684\u7528\u6237\u3002 2. \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_SSL://host.name:port security.inter.broker.protocol=SASL_SSL sasl.mechanism.inter.broker.protocol=SCRAM-SHA-256 (or SCRAM-SHA-512) sasl.enabled.mechanisms=SCRAM-SHA-256 (or SCRAM-SHA-512) \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f SCRAM \u673a\u5236\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \\ username=\"alice\" \\ password=\"alice-secret\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u9009\u9879\u6765\u914d\u7f6e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7528\u6237\u3002 \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4ee5\u7528\u6237alice \u7684\u8eab\u4efd\u8fde\u63a5\u5230\u4ee3\u7406\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 sasl.jaas.config . \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_SSL sasl.mechanism=SCRAM-SHA-256 (or SCRAM-SHA-512) SASL/SCRAM \u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879 Kafka \u4e2d SASL/SCRAM \u7684\u9ed8\u8ba4\u5b9e\u73b0\u5c06 SCRAM \u51ed\u8bc1\u5b58\u50a8\u5728 Zookeeper \u4e2d\u3002\u8fd9\u9002\u7528\u4e8e Zookeeper \u5b89\u5168\u4e14\u4f4d\u4e8e\u4e13\u7528\u7f51\u7edc\u4e0a\u7684\u5b89\u88c5\u4e2d\u7684\u751f\u4ea7\u4f7f\u7528\u3002 Kafka \u4ec5\u652f\u6301\u5f3a\u54c8\u5e0c\u51fd\u6570 SHA-256 \u548c SHA-512\uff0c\u6700\u5c0f\u8fed\u4ee3\u6b21\u6570\u4e3a 4096\u3002\u5f3a\u54c8\u5e0c\u51fd\u6570\u4e0e\u5f3a\u5bc6\u7801\u548c\u9ad8\u8fed\u4ee3\u6b21\u6570\u76f8\u7ed3\u5408\uff0c\u53ef\u4ee5\u5728 Zookeeper \u5b89\u5168\u6027\u53d7\u5230\u635f\u5bb3\u65f6\u9632\u6b62\u66b4\u529b\u653b\u51fb\u3002 SCRAM \u5e94\u4ec5\u4e0e TLS \u52a0\u5bc6\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u9632\u6b62 SCRAM \u4ea4\u6362\u88ab\u62e6\u622a\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u5b57\u5178\u6216\u66b4\u529b\u653b\u51fb\uff0c\u5e76\u5728 Zookeeper \u53d7\u5230\u5a01\u80c1\u65f6\u9632\u6b62\u5047\u5192\u3002 sasl.server.callback.handler.class \u4ece Kafka 2.0 \u7248\u5f00\u59cb\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728 Zookeeper \u4e0d\u5b89\u5168\u7684\u5b89\u88c5\u4e2d\u8fdb\u884c\u914d\u7f6e\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u8986\u76d6\u9ed8\u8ba4 SASL/SCRAM \u51ed\u8bc1\u5b58\u50a8\u3002 \u6709\u5173\u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 RFC 5802 \u3002 \u4f7f\u7528 SASL/OAUTHBEARER \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 OAuth 2 \u6388\u6743\u6846\u67b6 \u201c\u4f7f\u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u4ee3\u8868\u8d44\u6e90\u6240\u6709\u8005\u901a\u8fc7\u534f\u8c03\u8d44\u6e90\u6240\u6709\u8005\u548c HTTP \u670d\u52a1\u4e4b\u95f4\u7684\u6279\u51c6\u4ea4\u4e92\uff0c\u6216\u8005\u901a\u8fc7\u5141\u8bb8\u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f\u83b7\u5f97\u5bf9 HTTP \u670d\u52a1\u7684\u6709\u9650\u8bbf\u95ee\u6743\u9650\u3002\u4ee5\u81ea\u5df1\u7684\u540d\u4e49\u83b7\u5f97\u8bbf\u95ee\u6743\u9650\u3002\u201d SASL OAUTHBEARER \u673a\u5236\u5141\u8bb8\u5728 SASL\uff08\u5373\u975e HTTP\uff09\u4e0a\u4e0b\u6587\u4e2d\u4f7f\u7528\u8be5\u6846\u67b6\uff1b \u5b83\u5728RFC 7628 \u4e2d\u5b9a\u4e49\u3002Kafka \u4e2d\u7684\u9ed8\u8ba4 OAUTHBEARER \u5b9e\u73b0\u521b\u5efa\u5e76\u9a8c\u8bc1 \u4e0d\u5b89\u5168\u7684 JSON Web \u4ee4\u724c \uff0c\u5e76\u4e14\u4ec5\u9002\u5408\u5728\u975e\u751f\u4ea7 Kafka \u5b89\u88c5\u4e2d\u4f7f\u7528\u3002\u8bf7\u53c2\u9605 \u5b89\u5168\u6ce8\u610f\u4e8b\u9879 \u66f4\u591a\u7ec6\u8282\u3002 \u5728\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0cOAuthBearerToken\u7684principalName\u7528\u4f5c Principal ACL\u7b49\u914d\u7f6e\u7684\u8eab\u4efd \u9a8c\u8bc1\u3002 \u914d\u7f6e Kafka \u4ee3\u7406 \u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u6b64\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff1a KafkaServer { org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required unsecuredLoginStringClaim_sub=\"admin\"; }; KafkaServer\u90e8\u5206\u4e2d\u7684 \u5c5e\u6027unsecuredLoginStringClaim_sub\u7531\u4ee3\u7406\u5728\u542f\u52a8\u4e0e\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u65f6\u4f7f\u7528\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c admin \u5c06\u51fa\u73b0\u5728\u4e3b\u9898 ( sub ) \u58f0\u660e\u4e2d\uff0c\u5e76\u5c06\u6210\u4e3abroker\u95f4\u901a\u4fe1\u7684\u7528\u6237\u3002 2. \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_SSL://host.name:port (or SASL_PLAINTEXT if non-production) security.inter.broker.protocol=SASL_SSL (or SASL_PLAINTEXT if non-production) sasl.mechanism.inter.broker.protocol=OAUTHBEARER sasl.enabled.mechanisms=OAUTHBEARER \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f OAUTHBEARER \u673a\u5236\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required \\ unsecuredLoginStringClaim_sub=\"alice\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u9009\u9879unsecuredLoginStringClaim_sub\u6765\u914d\u7f6e\u4e3b\u9898 ( sub ) \u58f0\u660e\uff0c\u8be5\u58f0\u660e\u786e\u5b9a\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7528\u6237\u3002 \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4ee5\u7528\u6237alice \u7684\u8eab\u4efd\u8fde\u63a5\u5230\u4ee3\u7406\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 \u4e2d\u6307\u5b9a\u4e0d\u540c\u7684\u4e3b\u9898 ( sub ) \u58f0\u660e\u6765\u4f5c\u4e3a\u4e0d\u540c\u7528\u6237\u8fdb\u884c\u8fde\u63a5 sasl.jaas.config \u3002 \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_SSL (or SASL_PLAINTEXT if non-production) sasl.mechanism=OAUTHBEARER SASL/OAUTHBEARER \u7684\u9ed8\u8ba4\u5b9e\u73b0\u53d6\u51b3\u4e8e jackson-databind \u5e93\u3002\u7531\u4e8e\u5b83\u662f\u4e00\u4e2a\u53ef\u9009\u4f9d\u8d56\u9879\uff0c\u56e0\u6b64\u7528\u6237\u5fc5\u987b\u901a\u8fc7\u5176\u6784\u5efa\u5de5\u5177\u5c06\u5176\u914d\u7f6e\u4e3a\u4f9d\u8d56\u9879\u3002 SASL/OAUTHBEARER \u7684\u65e0\u62c5\u4fdd\u4ee4\u724c\u521b\u5efa\u9009\u9879 Kafka \u4e2d SASL/OAUTHBEARER \u7684\u9ed8\u8ba4\u5b9e\u73b0\u521b\u5efa\u5e76\u9a8c\u8bc1 \u4e0d\u5b89\u5168\u7684 JSON Web \u4ee4\u724c \u3002\u867d\u7136\u4ec5\u9002\u7528\u4e8e\u975e\u751f\u4ea7\u7528\u9014\uff0c\u4f46\u5b83\u786e\u5b9e\u63d0\u4f9b\u4e86\u5728\u5f00\u53d1\u6216\u6d4b\u8bd5\u73af\u5883\u4e2d\u521b\u5efa\u4efb\u610f\u4ee4\u724c\u7684\u7075\u6d3b\u6027\u3002 \u4ee5\u4e0b\u662f\u5ba2\u6237\u7aef\uff08\u4ee5\u53ca\u4ee3\u7406\u7aef\uff0c\u5982\u679c OAUTHBEARER \u662f\u4ee3\u7406\u95f4\u534f\u8bae\uff09\u652f\u6301\u7684\u5404\u79cd JAAS \u6a21\u5757\u9009\u9879\uff1a JAAS Module Option for Unsecured Token Creation Documentation unsecuredLoginStringClaim_ =\"value\" Creates a String claim with the given name and value. Any valid claim name can be specified except 'iat' and 'exp' (these are automatically generated). unsecuredLoginNumberClaim_ =\"value\" Creates a Number claim with the given name and value. Any valid claim name can be specified except 'iat' and 'exp' (these are automatically generated). unsecuredLoginListClaim_ =\"value\" Creates a String List claim with the given name and values parsed from the given value where the first character is taken as the delimiter. For example: unsecuredLoginListClaim_fubar=\" unsecuredLoginExtension_ =\"value\" Creates a String extension with the given name and value. For example: unsecuredLoginExtension_traceId=\"123\". A valid extension name is any sequence of lowercase or uppercase alphabet characters. In addition, the \"auth\" extension name is reserved. A valid extension value is any combination of characters with ASCII codes 1-127. unsecuredLoginPrincipalClaimName Set to a custom claim name if you wish the name of the String claim holding the principal name to be something other than 'sub'. unsecuredLoginLifetimeSeconds Set to an integer value if the token expiration is to be set to something other than the default value of 3600 seconds (which is 1 hour). The 'exp' claim will be set to reflect the expiration time. unsecuredLoginScopeClaimName Set to a custom claim name if you wish the name of the String or String List claim holding any token scope to be something other than 'scope'. SASL/OAUTHBEARER \u7684\u4e0d\u5b89\u5168\u4ee4\u724c\u9a8c\u8bc1\u9009\u9879 \u4ee5\u4e0b\u662f\u4ee3\u7406\u7aef\u7528\u4e8e \u4e0d\u5b89\u5168 JSON Web \u4ee4\u724c \u9a8c\u8bc1\u7684\u5404\u79cd\u53d7\u652f\u6301\u7684 JAAS \u6a21\u5757\u9009\u9879\uff1a JAAS Module Option for Unsecured Token Validation Documentation unsecuredValidatorPrincipalClaimName=\"value\" Set to a non-empty value if you wish a particular String claim holding a principal name to be checked for existence; the default is to check for the existence of the 'sub' claim. unsecuredValidatorScopeClaimName=\"value\" Set to a custom claim name if you wish the name of the String orString List claim holding any token scope to be something other than 'scope'. unsecuredValidatorRequiredScope=\"value\" Set to a space-delimited list of scope values if you wish theString/String Listclaim holding the token scope to be checked to make sure it contains certain values. unsecuredValidatorAllowableClockSkewMs=\"value\" Set to a positive integer value if you wish to allow up to some number of positive milliseconds of clock skew (the default is 0). \u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u767b\u5f55\u548c SASL \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u6765\u8986\u76d6\u9ed8\u8ba4\u7684\u4e0d\u5b89\u5168 SASL/OAUTHBEARER \u5b9e\u73b0\uff08\u5e76\u4e14\u5fc5\u987b\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8986\u76d6\uff09\u3002 \u6709\u5173\u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 RFC 6749 \u7b2c 10 \u8282 \u3002 SASL/OAUTHBEARER \u7684\u4ee4\u724c\u5237\u65b0 Kafka \u4f1a\u5728\u4ee4\u724c\u8fc7\u671f\u4e4b\u524d\u5b9a\u671f\u5237\u65b0\u4ee4\u724c\uff0c\u4ee5\u4fbf\u5ba2\u200b\u200b\u6237\u7aef\u53ef\u4ee5\u7ee7\u7eed\u4e0e\u4ee3\u7406\u5efa\u7acb\u8fde\u63a5\u3002\u5f71\u54cd\u5237\u65b0\u7b97\u6cd5\u8fd0\u884c\u65b9\u5f0f\u7684\u53c2\u6570\u88ab\u6307\u5b9a\u4e3a\u751f\u4ea7\u8005/\u6d88\u8d39\u8005/\u4ee3\u7406\u914d\u7f6e\u7684\u4e00\u90e8\u5206\uff0c\u5982\u4e0b\u6240\u793a\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5176\u4ed6\u5730\u65b9\u6709\u5173\u8fd9\u4e9b\u5c5e\u6027\u7684\u6587\u6863\u3002\u9ed8\u8ba4\u503c\u901a\u5e38\u662f\u5408\u7406\u7684\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e0d\u9700\u8981\u663e\u5f0f\u8bbe\u7f6e\u8fd9\u4e9b\u914d\u7f6e\u53c2\u6570\u3002 Producer/Consumer/Broker Configuration Property sasl.login.refresh.window.factor sasl.login.refresh.window.jitter sasl.login.refresh.min.period.seconds sasl.login.refresh.min.buffer.seconds SASL/OAUTHBEARER \u7684\u5b89\u5168/\u751f\u4ea7\u4f7f\u7528 \u751f\u4ea7\u7528\u4f8b\u9700\u8981\u7f16\u5199org.apache.kafka.common.security.auth.AuthenticateCallbackHandler \u7684\u5b9e\u73b0 \uff0c\u5b83\u53ef\u4ee5\u5904\u7406org.apache.kafka.common.security.oauthbearer.OAuthBearerTokenCallback\u7684\u5b9e\u4f8b \uff0c\u5e76\u901a\u8fc7sasl.login\u58f0\u660e\u5b83 \u975e\u4ee3\u7406\u5ba2\u6237\u7aef\u7684 .callback.handler.class\u914d\u7f6e\u9009\u9879\u6216\u901a\u8fc7\u4ee3\u7406\u7684listener.name.sasl_ssl.oauthbearer.sasl.login.callback.handler.class \u914d\u7f6e\u9009\u9879\uff08\u5f53 SASL/OAUTHBEARER \u662f\u4ee3\u7406\u95f4\u534f\u8bae\u65f6\uff09 \u3002 \u751f\u4ea7\u7528\u4f8b\u8fd8\u9700\u8981\u7f16\u5199org.apache.kafka.common.security.auth.AuthenticateCallbackHandler \u7684\u5b9e\u73b0 \uff0c\u5b83\u53ef\u4ee5\u5904\u7406org.apache.kafka.common.security.oauthbearer.OAuthBearerValidatorCallback\u7684\u5b9e\u4f8b \uff0c\u5e76\u901a\u8fc7listener.name\u58f0\u660e\u5b83 .sasl_ssl.oauthbearer.sasl.server.callback.handler.class \u4ee3\u7406\u914d\u7f6e\u9009\u9879\u3002 SASL/OAUTHBEARER \u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879 Kafka \u4e2d SASL/OAUTHBEARER \u7684\u9ed8\u8ba4\u5b9e\u73b0\u521b\u5efa\u5e76\u9a8c\u8bc1 \u4e0d\u5b89\u5168\u7684 JSON Web \u4ee4\u724c \u3002\u8fd9\u4ec5\u9002\u7528\u4e8e\u975e\u751f\u4ea7\u7528\u9014\u3002 OAUTHBEARER \u5e94\u4ec5\u5728\u5177\u6709 TLS \u52a0\u5bc6\u7684\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u4ee5\u9632\u6b62\u4ee4\u724c\u88ab\u62e6\u622a\u3002 \u5982\u4e0a\u6240\u8ff0\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u767b\u5f55\u548c SASL \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u6765\u8986\u76d6\u9ed8\u8ba4\u7684\u4e0d\u5b89\u5168 SASL/OAUTHBEARER \u5b9e\u73b0\uff08\u5e76\u4e14\u5fc5\u987b\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8986\u76d6\uff09\u3002 \u6709\u5173 OAuth 2 \u4e00\u822c\u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 RFC 6749\uff0c\u7b2c 10 \u8282 \u3002 \u5728\u4ee3\u7406\u4e2d\u542f\u7528\u591a\u4e2a SASL \u673a\u5236 \u5728JAAS \u914d\u7f6e\u6587\u4ef6\u7684KafkaServer\u90e8\u5206\u4e2d\u6307\u5b9a\u6240\u6709\u542f\u7528\u673a\u5236\u7684\u767b\u5f55\u6a21\u5757\u7684\u914d\u7f6e\u3002\u4f8b\u5982\uff1a KafkaServer { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_server.keytab\" principal=\"kafka/kafka1.hostname.com@EXAMPLE.COM\"; org.apache.kafka.common.security.plain.PlainLoginModule required username=\"admin\" password=\"admin-secret\" user_admin=\"admin-secret\" user_alice=\"alice-secret\"; }; \u5728 server.properties \u4e2d\u542f\u7528 SASL \u673a\u5236\uff1a sasl.enabled.mechanisms=GSSAPI,PLAIN,SCRAM-SHA-256,SCRAM-SHA-512,OAUTHBEARER \u5982\u679c\u9700\u8981\uff0c\u8bf7\u5728 server.properties \u4e2d\u6307\u5b9a\u7528\u4e8e\u4ee3\u7406\u95f4\u901a\u4fe1\u7684 SASL \u5b89\u5168\u534f\u8bae\u548c\u673a\u5236\uff1a security.inter.broker.protocol=SASL_PLAINTEXT (or SASL_SSL) sasl.mechanism.inter.broker.protocol=GSSAPI (or one of the other enabled mechanisms) \u6309\u7167GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u548c OAUTHBEARER \u4e2d\u7279\u5b9a\u4e8e\u673a\u5236\u7684\u6b65\u9aa4 \u4e3a\u542f\u7528\u7684\u673a\u5236\u914d\u7f6e SASL\u3002 \u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u4e2d\u7684SASL\u673a\u5236 \u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u987a\u5e8f\u5728\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u4e2d\u4fee\u6539 SASL \u673a\u5236\uff1a \u901a\u8fc7\u5c06\u673a\u5236\u6dfb\u52a0\u5230\u6bcf\u4e2a\u4ee3\u7406\u7684 server.properties \u4e2d\u7684sasl.enabled.mechanisms\u4e2d\uff0c\u542f\u7528\u65b0\u7684 SASL \u673a\u5236\u3002\u66f4\u65b0 JAAS \u914d\u7f6e\u6587\u4ef6\u4ee5\u5305\u62ec \u6b64\u5904 \u6240\u8ff0\u7684\u4e24\u79cd\u673a\u5236\u3002\u589e\u91cf\u53cd\u5f39\u96c6\u7fa4\u8282\u70b9\u3002 \u4f7f\u7528\u65b0\u673a\u5236\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\u3002 \u8981\u66f4\u6539\u4ee3\u7406\u95f4\u901a\u4fe1\u7684\u673a\u5236\uff08\u5982\u679c\u9700\u8981\uff09\uff0c\u8bf7\u5c06server.properties \u4e2d\u7684sasl.mechanism.inter.broker.protocol\u8bbe\u7f6e\u4e3a\u65b0\u673a\u5236\uff0c\u5e76\u518d\u6b21\u589e\u91cf\u5730\u5f39\u8df3\u96c6\u7fa4\u3002 \u8981\u5220\u9664\u65e7\u673a\u5236\uff08\u5982\u679c\u9700\u8981\uff09\uff0c\u8bf7\u4eceserver.properties \u4e2d\u7684sasl.enabled.mechanisms\u4e2d\u5220\u9664\u65e7\u673a\u5236\uff0c\u5e76\u4ece JAAS \u914d\u7f6e\u6587\u4ef6\u4e2d\u5220\u9664\u65e7\u673a\u5236\u7684\u6761\u76ee\u3002\u518d\u6b21\u589e\u91cf\u5730\u53cd\u5f39\u96c6\u7fa4\u3002 \u4f7f\u7528\u59d4\u6258\u4ee4\u724c\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 \u57fa\u4e8e\u59d4\u6258\u4ee4\u724c\u7684\u8eab\u4efd\u9a8c\u8bc1\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\uff0c\u53ef\u8865\u5145\u73b0\u6709\u7684 SASL/SSL \u65b9\u6cd5\u3002\u59d4\u6258\u4ee4\u724c\u662f kafka broker\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u5171\u4eab\u79d8\u5bc6\u3002\u59d4\u6d3e\u4ee4\u724c\u5c06\u5e2e\u52a9\u5904\u7406\u6846\u67b6\u5c06\u5de5\u4f5c\u8d1f\u8f7d\u5206\u914d\u7ed9\u5b89\u5168\u73af\u5883\u4e2d\u7684\u53ef\u7528\u5de5\u4f5c\u4eba\u5458\uff0c\u800c\u65e0\u9700\u5728\u4f7f\u7528 2 \u5411 SSL \u65f6\u589e\u52a0\u5206\u914d Kerberos TGT/\u5bc6\u94a5\u8868\u6216\u5bc6\u94a5\u5e93\u7684\u6210\u672c\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-48 \u3002 \u5728\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0c\u59d4\u6258\u4ee4\u724c\u7684\u6240\u6709\u8005\u7528\u4f5c Principal ACL \u7b49\u914d\u7f6e\u7684 \u8eab\u4efd\u9a8c\u8bc1\u3002 \u4f7f\u7528\u59d4\u6258\u4ee4\u724c\u7684\u5178\u578b\u6b65\u9aa4\u662f\uff1a \u7528\u6237\u901a\u8fc7 SASL \u6216 SSL \u5411 Kafka \u96c6\u7fa4\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5e76\u83b7\u53d6\u59d4\u6258\u4ee4\u724c\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u7ba1\u7406 API \u6216\u4f7f\u7528kafka-delegation-tokens.sh\u811a\u672c\u6765\u5b8c\u6210\u3002 \u7528\u6237\u5c06\u59d4\u6258\u4ee4\u724c\u5b89\u5168\u5730\u4f20\u9012\u7ed9 Kafka \u5ba2\u6237\u7aef\uff0c\u4ee5\u4fbf\u901a\u8fc7 Kafka \u96c6\u7fa4\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u4ee4\u724c\u6240\u6709\u8005/\u66f4\u65b0\u8005\u53ef\u4ee5\u66f4\u65b0/\u8fc7\u671f\u59d4\u6258\u4ee4\u724c\u3002 \u4ee3\u5e01\u7ba1\u7406 \u79d8\u5bc6\u7528\u4e8e\u751f\u6210\u548c\u9a8c\u8bc1\u59d4\u6258\u4ee4\u724c\u3002\u8fd9\u662f\u4f7f\u7528\u914d\u7f6e\u9009\u9879delegate.token.secret.key\u63d0\u4f9b\u7684\u3002\u5fc5\u987b\u5728\u6240\u6709\u4ee3\u7406\u4e4b\u95f4\u914d\u7f6e\u76f8\u540c\u7684\u5bc6\u94a5\u3002\u5982\u679c\u5bc6\u94a5\u672a\u8bbe\u7f6e\u6216\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u4ee3\u7406\u5c06\u7981\u7528\u59d4\u6258\u4ee4\u724c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5728\u5f53\u524d\u7684\u5b9e\u73b0\u4e2d\uff0c\u4ee4\u724c\u8be6\u7ec6\u4fe1\u606f\u5b58\u50a8\u5728 Zookeeper \u4e2d\uff0c\u9002\u5408\u5728 Zookeeper \u4f4d\u4e8e\u4e13\u7528\u7f51\u7edc\u4e0a\u7684 Kafka \u5b89\u88c5\u4e2d\u4f7f\u7528\u3002\u76ee\u524d\uff0c\u6b64\u673a\u5bc6\u4ee5\u7eaf\u6587\u672c\u5f62\u5f0f\u5b58\u50a8\u5728 server.properties \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u6211\u4eec\u6253\u7b97\u5728\u672a\u6765\u7684 Kafka \u7248\u672c\u4e2d\u5bf9\u8fd9\u4e9b\u8fdb\u884c\u914d\u7f6e\u3002 \u4ee3\u5e01\u5177\u6709\u5f53\u524d\u5bff\u547d\u548c\u6700\u5927\u53ef\u518d\u751f\u5bff\u547d\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ee4\u724c\u5fc5\u987b\u6bcf 24 \u5c0f\u65f6\u66f4\u65b0\u4e00\u6b21\uff0c\u6700\u591a 7 \u5929\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4f7f\u7528delegation.token.expiry.time.ms \u548cdelegation.token.max.lifetime.ms\u914d\u7f6e\u9009\u9879\u8fdb\u884c\u914d\u7f6e\u3002 \u4ee4\u724c\u4e5f\u53ef\u4ee5\u663e\u5f0f\u53d6\u6d88\u3002\u5982\u679c\u4ee4\u724c\u5728\u4ee4\u724c\u8fc7\u671f\u65f6\u95f4\u5185\u672a\u66f4\u65b0\uff0c\u6216\u8005\u4ee4\u724c\u8d85\u51fa\u4e86\u6700\u5927\u751f\u547d\u5468\u671f\uff0c\u5219\u5c06\u4ece\u6240\u6709\u4ee3\u7406\u7f13\u5b58\u4ee5\u53ca Zookeeper \u4e2d\u5220\u9664\u8be5\u4ee4\u724c\u3002 \u521b\u5efa\u59d4\u6258\u4ee4\u724c \u53ef\u4ee5\u4f7f\u7528\u7ba1\u7406 API \u6216\u4f7f\u7528kafka-delegation-tokens.sh\u811a\u672c\u521b\u5efa\u4ee4\u724c\u3002\u59d4\u6258\u4ee4\u724c\u8bf7\u6c42\uff08\u521b\u5efa/\u66f4\u65b0/\u8fc7\u671f/\u63cf\u8ff0\uff09\u5e94\u4ec5\u5728 SASL \u6216 SSL \u8eab\u4efd\u9a8c\u8bc1\u901a\u9053\u4e0a\u53d1\u51fa\u3002\u5982\u679c\u901a\u8fc7\u59d4\u6258\u4ee4\u724c\u5b8c\u6210\u521d\u59cb\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u65e0\u6cd5\u8bf7\u6c42\u4ee4\u724c\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a--owner-principal\u53c2\u6570\u4e3a\u8be5\u7528\u6237\u6216\u5176\u4ed6\u4eba\u521b\u5efa\u4ee4\u724c\u3002\u6240\u6709\u8005/\u66f4\u65b0\u8005\u53ef\u4ee5\u66f4\u65b0\u6216\u8fc7\u671f\u4ee4\u724c\u3002\u6240\u6709\u8005/\u66f4\u65b0\u8005\u59cb\u7ec8\u53ef\u4ee5\u63cf\u8ff0\u81ea\u5df1\u7684\u4ee3\u5e01\u3002\u8981\u63cf\u8ff0\u5176\u4ed6\u4ee4\u724c\uff0c\u9700\u8981\u5728\u4ee3\u8868\u4ee4\u724c\u6240\u6709\u8005\u7684\u7528\u6237\u8d44\u6e90\u4e0a\u6dfb\u52a0 DESCRIBE_TOKEN \u6743\u9650\u3002 \u4e0b\u9762\u7ed9\u51fa\u4e86kafka-delegation-tokens.sh\u811a\u672c\u793a\u4f8b\u3002 \u521b\u5efa\u59d4\u6258\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --create --max-life-time-period -1 --command-config client.properties --renewer-principal User:user1 \u4e3a\u4e0d\u540c\u7684\u6240\u6709\u8005\u521b\u5efa\u59d4\u6258\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --create --max-life-time-period -1 --command-config client.properties --renewer-principal User:user1 --owner-principal User:owner1 \u66f4\u65b0\u59d4\u6258\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --renew --renew-time-period -1 --command-config client.properties --hmac ABCDEFGHIJK \u4f7f\u59d4\u6258\u4ee4\u724c\u8fc7\u671f\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --expire --expiry-time-period -1 --command-config client.properties --hmac ABCDEFGHIJK \u53ef\u4ee5\u4f7f\u7528 --describe \u9009\u9879\u63cf\u8ff0\u73b0\u6709\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --describe --command-config client.properties --owner-principal User:user1 \u4ee4\u724c\u8ba4\u8bc1 \u59d4\u6258\u4ee4\u724c\u8eab\u4efd\u9a8c\u8bc1\u642d\u8f7d\u5f53\u524d SASL/SCRAM \u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u3002\u6211\u4eec\u5fc5\u987b\u5728 Kafka \u96c6\u7fa4\u4e0a\u542f\u7528 SASL/SCRAM \u673a\u5236\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002 \u914d\u7f6e Kafka \u5ba2\u6237\u7aef\uff1a \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f\u7528\u4e8e\u4ee4\u724c\u8eab\u4efd\u9a8c\u8bc1\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \\ username=\"tokenID123\" \\ password=\"lAYYSFmLs4bTjf+lTZ1LCHR/ZZFNA==\" \\ tokenauth=\"true\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u9009\u9879\u6765\u914d\u7f6e\u4ee4\u724c id \u548c\u4ee4\u724c HMAC\u3002tokenauth\u9009\u9879\u7528\u4e8e\u5411\u670d\u52a1\u5668\u6307\u793a\u4ee4\u724c\u8ba4\u8bc1\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528\u4ee4\u724c id \u8fde\u63a5\u5230\u4ee3\u7406\uff1a tokenID123 \u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 \u4e2d\u6307\u5b9a\u4e0d\u540c\u7684\u4ee4\u724c\u8be6\u7ec6\u4fe1\u606f\u6765\u4f7f\u7528\u4e0d\u540c\u7684\u4ee4\u724c\u8fdb\u884c\u8fde\u63a5 sasl.jaas.config \u3002 \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 \u624b\u52a8\u8f6e\u6362\u673a\u5bc6\u7684\u8fc7\u7a0b\uff1a \u5f53\u79d8\u5bc6\u9700\u8981\u8f6e\u6362\u65f6\uff0c\u6211\u4eec\u9700\u8981\u91cd\u65b0\u90e8\u7f72\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u5df2\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002\u4f46\u662f\u4efb\u4f55\u65b0\u7684\u8fde\u63a5\u8bf7\u6c42\u548c\u4f7f\u7528\u65e7\u4ee4\u724c\u7684\u7eed\u8ba2/\u8fc7\u671f\u8bf7\u6c42\u90fd\u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u6b65\u9aa4\u5982\u4e0b\u3002 \u4f7f\u6240\u6709\u73b0\u6709\u4ee4\u724c\u8fc7\u671f\u3002 \u901a\u8fc7\u6eda\u52a8\u5347\u7ea7\u8f6e\u6362\u79d8\u5bc6\uff0c\u5e76\u4e14 \u751f\u6210\u65b0\u7684\u4ee3\u5e01 \u6211\u4eec\u6253\u7b97\u5728\u672a\u6765\u7684 Kafka \u7248\u672c\u4e2d\u5b9e\u73b0\u81ea\u52a8\u5316\u3002 7.5 \u6388\u6743\u548c ACL Kafka \u9644\u5e26\u4e86\u4e00\u4e2a\u53ef\u63d2\u5165\u7684\u6388\u6743\u6846\u67b6\uff0c\u8be5\u6846\u67b6\u5728\u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u4f7f\u7528authorizer.class.name\u5c5e\u6027\u8fdb\u884c\u914d\u7f6e\u3002\u914d\u7f6e\u7684\u5b9e\u73b0\u5fc5\u987b\u6269\u5c55 org.apache.kafka.server.authorizer.Authorizer \u3002Kafka \u63d0\u4f9b\u4e86\u5c06 ACL \u5b58\u50a8\u5728\u96c6\u7fa4\u5143\u6570\u636e\uff08Zookeeper \u6216 KRaft \u5143\u6570\u636e\u65e5\u5fd7\uff09\u4e2d\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002\u5bf9\u4e8e\u57fa\u4e8eZookeeper\u7684\u96c6\u7fa4\uff0c\u63d0\u4f9b\u7684\u5b9e\u73b0\u914d\u7f6e\u5982\u4e0b\uff1a authorizer.class.name=kafka.security.authorizer.AclAuthorizer \u5bf9\u4e8e KRaft \u96c6\u7fa4\uff0c\u5728\u6240\u6709\u8282\u70b9\uff08\u4ee3\u7406\u3001\u63a7\u5236\u5668\u6216\u7ec4\u5408\u4ee3\u7406/\u63a7\u5236\u5668\u8282\u70b9\uff09\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\uff1a authorizer.class.name=org.apache.kafka.metadata.authorizer.StandardAuthorizer Kafka ACL \u7684\u901a\u7528\u683c\u5f0f\u662f\u201c\u4e3b\u4f53 {P} \u662f[\u5141\u8bb8|\u62d2\u7edd]\u6765\u81ea\u4e3b\u673a {H} \u7684\u4efb\u4f55\u4e0e ResourcePattern {RP} \u5339\u914d\u7684\u8d44\u6e90 {R} \u4e0a\u7684\u64cd\u4f5c {O}\u201d\u3002 \u60a8\u53ef\u4ee5\u5728KIP-11 \u4e2d\u9605\u8bfb\u6709\u5173 ACL \u7ed3\u6784\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u5728 KIP-290 \u4e2d\u9605\u8bfb\u6709\u5173\u8d44\u6e90\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\u3002\u8981\u6dfb\u52a0\u3001\u5220\u9664\u6216\u5217\u51fa ACL\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 Kafka ACL CLI kafka-acls.sh \u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709 ResourcePatterns \u4e0e\u7279\u5b9a\u8d44\u6e90 R \u5339\u914d\uff0c\u5219 R \u6ca1\u6709\u5173\u8054\u7684 ACL\uff0c\u56e0\u6b64\u9664\u4e86\u8d85\u7ea7\u7528\u6237\u4e4b\u5916\uff0c\u4efb\u4f55\u4eba\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee R\u3002\u5982\u679c\u8981\u66f4\u6539\u8be5\u884c\u4e3a\uff0c\u53ef\u4ee5\u5728 server.properties \u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u3002 allow.everyone.if.no.acl.found=true \u8fd8\u53ef\u4ee5\u5728 server.properties \u4e2d\u6dfb\u52a0\u8d85\u7ea7\u7528\u6237\uff0c\u5982\u4e0b\u6240\u793a\uff08\u8bf7\u6ce8\u610f\uff0c\u5206\u9694\u7b26\u662f\u5206\u53f7\uff0c\u56e0\u4e3a SSL \u7528\u6237\u540d\u53ef\u80fd\u5305\u542b\u9017\u53f7\uff09\u3002\u9ed8\u8ba4\u7684 PrimaryType \u5b57\u7b26\u4e32\u201cUser\u201d\u533a\u5206\u5927\u5c0f\u5199\u3002 super.users=User:Bob;User:Alice Kraft \u4e3b\u8981\u8f6c\u53d1 \u5728 KRaft \u96c6\u7fa4\u4e2d\uff0c\u8bf8\u5982 CreateTopics \u548c \u4e4b\u7c7b\u7684\u7ba1\u7406\u8bf7\u6c42 DeleteTopics \u7531\u5ba2\u6237\u7aef\u53d1\u9001\u5230\u4ee3\u7406\u4fa6\u542c\u5668\u3002\u7136\u540e\uff0c\u4ee3\u7406\u901a\u8fc7\u5728 \u4e2d\u914d\u7f6e\u7684\u7b2c\u4e00\u4e2a\u4fa6\u542c\u5668\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230\u6d3b\u52a8\u63a7\u5236\u5668 controller.listener.names \u3002\u8fd9\u4e9b\u8bf7\u6c42\u7684\u6388\u6743\u662f\u5728\u63a7\u5236\u5668\u8282\u70b9\u4e0a\u5b8c\u6210\u7684\u3002\u8fd9\u662f\u901a\u8fc7 Envelope \u6253\u5305\u6765\u81ea\u5ba2\u6237\u7aef\u548c\u5ba2\u6237\u7aef\u4e3b\u4f53\u7684\u5e95\u5c42\u8bf7\u6c42\u7684\u8bf7\u6c42\u6765\u5b9e\u73b0\u7684\u3002\u5f53\u63a7\u5236\u5668\u6536\u5230 Envelope \u4ee3\u7406\u8f6c\u53d1\u7684\u8bf7\u6c42\u65f6\uff0c\u5b83\u9996\u5148 Envelope \u4f7f\u7528\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u4ee3\u7406\u4e3b\u4f53\u6765\u6388\u6743\u8be5\u8bf7\u6c42\u3002\u7136\u540e\u5b83\u4f7f\u7528\u8f6c\u53d1\u7684\u4e3b\u4f53\u6388\u6743\u5e95\u5c42\u8bf7\u6c42\u3002 \u6240\u6709\u8fd9\u4e9b\u90fd\u610f\u5473\u7740 Kafka \u5fc5\u987b\u4e86\u89e3\u5982\u4f55\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u5ba2\u6237\u7aef\u4e3b\u4f53\u3002\u8eab\u4efd\u9a8c\u8bc1\u6846\u67b6\u5141\u8bb8\u901a\u8fc7\u8986\u76d6 principal.builder.class \u914d\u7f6e\u6765\u5b9a\u5236\u4e3b\u4f53\u3002\u4e3a\u4e86\u4f7f\u81ea\u5b9a\u4e49\u4e3b\u4f53\u80fd\u591f\u4e0e KRaft \u4e00\u8d77\u4f7f\u7528\uff0c\u914d\u7f6e\u7684\u7c7b\u5fc5\u987b\u5b9e\u73b0\uff0c org.apache.kafka.common.security.auth.KafkaPrincipalSerde \u4ee5\u4fbf Kafka \u77e5\u9053\u5982\u4f55\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u4e3b\u4f53\u3002\u9ed8\u8ba4\u5b9e\u73b0 org.apache.kafka.common.security.authenticator.DefaultKafkaPrincipalBuilder \u4f7f\u7528\u6e90\u4ee3\u7801\u4e2d\u5b9a\u4e49\u7684 Kafka RPC \u683c\u5f0f\uff1a clients/src/main/resources/common/message/DefaultPrincipalData.json \u3002\u6709\u5173 KRaft \u4e2d\u8bf7\u6c42\u8f6c\u53d1\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-590 \u81ea\u5b9a\u4e49 SSL \u7528\u6237\u540d \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSSL \u7528\u6237\u540d\u7684\u683c\u5f0f\u4e3a\u201cCN=writeuser,OU=Unknown,O=Unknown,L=Unknown,ST=Unknown,C=Unknown\u201d\u3002\u4eba\u4eec\u53ef\u4ee5\u901a\u8fc7 ssl.principal.mapping.rules \u5728 server.properties \u4e2d\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u89c4\u5219\u6765\u66f4\u6539\u8fd9\u4e00\u70b9\u3002\u6b64\u914d\u7f6e\u5141\u8bb8\u5c06 X.500 \u53ef\u5206\u8fa8\u540d\u79f0\u6620\u5c04\u5230\u77ed\u540d\u79f0\u7684\u89c4\u5219\u5217\u8868\u3002\u89c4\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u8bc4\u4f30\uff0c\u5e76\u4e14\u4e0e\u4e13\u6709\u540d\u79f0\u5339\u914d\u7684\u7b2c\u4e00\u4e2a\u89c4\u5219\u7528\u4e8e\u5c06\u5176\u6620\u5c04\u5230\u77ed\u540d\u79f0\u3002\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u540e\u7eed\u89c4\u5219\u90fd\u5c06\u88ab\u5ffd\u7565\u3002 \u683c\u5f0f\u4e3a ssl.principal.mapping.rules \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a\u89c4\u5219\u90fd\u4ee5\u201cRULE:\u201d\u5f00\u5934\uff0c\u5e76\u5305\u542b\u4ee5\u4e0b\u683c\u5f0f\u7684\u8868\u8fbe\u5f0f\u3002\u9ed8\u8ba4\u89c4\u5219\u5c06\u8fd4\u56de X.500 \u8bc1\u4e66\u4e13\u6709\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002\u5982\u679c\u4e13\u6709\u540d\u79f0\u4e0e\u6a21\u5f0f\u5339\u914d\uff0c\u5219\u5c06\u5bf9\u8be5\u540d\u79f0\u8fd0\u884c\u66ff\u6362\u547d\u4ee4\u3002\u5b83\u8fd8\u652f\u6301\u5c0f\u5199/\u5927\u5199\u9009\u9879\uff0c\u4ee5\u5f3a\u5236\u7ffb\u8bd1\u7ed3\u679c\u5168\u90e8\u4e3a\u5c0f\u5199/\u5927\u5199\u3002\u8fd9\u662f\u901a\u8fc7\u5728\u89c4\u5219\u672b\u5c3e\u6dfb\u52a0\u201c/L\u201d\u6216\u201c/U\u201d\u6765\u5b8c\u6210\u7684\u3002 RULE:pattern/replacement/ RULE:pattern/replacement/[LU] \u793a\u4f8b ssl.principal.mapping.rules \u503c\u662f\uff1a RULE:^CN=(.*?),OU=ServiceUsers.*$/$1/, RULE:^CN=(.*?),OU=(.*?),O=(.*?),L=(.*?),ST=(.*?),C=(.*?)$/$1@$2/L, RULE:^.*[Cc][Nn]=([a-zA-Z0-9.]*).*$/$1/L, DEFAULT \u4e0a\u8ff0\u89c4\u5219\u5c06\u4e13\u6709\u540d\u79f0\u201cCN=serviceuser,OU=ServiceUsers,O=Unknown,L=Unknown,ST=Unknown,C=Unknown\u201d\u8f6c\u6362\u4e3a\u201cserviceuser\u201d\u548c\u201cCN=adminUser,OU=Admin,O=Unknown,L=\u201d\u672a\u77e5\uff0cST=\u672a\u77e5\uff0cC=\u672a\u77e5\u201d\u5230\u201cadminuser@admin\u201d\u3002 \u5bf9\u4e8e\u9ad8\u7ea7\u7528\u4f8b\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728 server.properties \u4e2d\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u7684 PrimaryBuilder \u6765\u81ea\u5b9a\u4e49\u540d\u79f0\uff0c\u5982\u4e0b\u6240\u793a\u3002 principal.builder.class=CustomizedPrincipalBuilderClass \u81ea\u5b9a\u4e49 SASL \u7528\u6237\u540d \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSASL \u7528\u6237\u540d\u5c06\u662f Kerberos \u4e3b\u4f53\u7684\u4e3b\u8981\u90e8\u5206\u3002\u4eba\u4eec\u53ef\u4ee5\u901a\u8fc7 sasl.kerberos.principal.to.local.rules \u5728 server.properties \u4e2d\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u89c4\u5219\u6765\u66f4\u6539\u8fd9\u4e00\u70b9\u3002\u7684\u683c\u5f0f\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a\u89c4\u5219\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e Kerberos \u914d\u7f6e\u6587\u4ef6 (krb5.conf) sasl.kerberos.principal.to.local.rules \u4e2d\u7684 auth_to_local \u76f8\u540c\u3002\u8fd9\u8fd8\u652f\u6301\u989d\u5916\u7684\u5c0f\u5199/\u5927\u5199\u89c4\u5219\uff0c\u4ee5\u5f3a\u5236\u7ffb\u8bd1\u7ed3\u679c\u5168\u90e8\u4e3a\u5c0f\u5199/\u5927\u5199\u3002\u8fd9\u662f\u901a\u8fc7\u5728\u89c4\u5219\u672b\u5c3e\u6dfb\u52a0\u201c/L\u201d\u6216\u201c/U\u201d\u6765\u5b8c\u6210\u7684\u3002\u68c0\u67e5\u4ee5\u4e0b\u683c\u5f0f\u7684\u8bed\u6cd5\u3002\u6bcf\u6761\u89c4\u5219\u5747\u4ee5 RULE: \u5f00\u5934\uff0c\u5e76\u5305\u542b\u5982\u4e0b\u683c\u5f0f\u7684\u8868\u8fbe\u5f0f\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 kerberos \u6587\u6863\u3002 RULE:[n:string](regexp)s/pattern/replacement/ RULE:[n:string](regexp)s/pattern/replacement/g RULE:[n:string](regexp)s/pattern/replacement//L RULE:[n:string](regexp)s/pattern/replacement/g/L RULE:[n:string](regexp)s/pattern/replacement//U RULE:[n:string](regexp)s/pattern/replacement/g/U \u6dfb\u52a0\u89c4\u5219\u4ee5\u5c06 user@MYDOMAIN.COM \u6b63\u786e\u8f6c\u6362\u4e3a user \u540c\u65f6\u4fdd\u7559\u9ed8\u8ba4\u89c4\u5219\u7684\u793a\u4f8b\u5982\u4e0b\uff1a sasl.kerberos.principal.to.local.rules=RULE:[1:$1@$0](.*@MYDOMAIN.COM)s/@.*//,DEFAULT \u547d\u4ee4\u884c\u754c\u9762 Kafka \u6388\u6743\u7ba1\u7406 CLI \u4e0e\u6240\u6709\u5176\u4ed6 CLI \u90fd\u53ef\u4ee5\u5728 bin \u76ee\u5f55\u4e0b\u627e\u5230\u3002CLI \u811a\u672c\u79f0\u4e3a kafka-acls.sh \u3002\u4ee5\u4e0b\u5217\u51fa\u4e86\u8be5\u811a\u672c\u652f\u6301\u7684\u6240\u6709\u9009\u9879\uff1a OPTION DESCRIPTION DEFAULT OPTION TYPE --add Indicates to the script that user is trying to add an acl. Action --remove Indicates to the script that user is trying to remove an acl. Action --list Indicates to the script that user is trying to list acls. Action --bootstrap-server A list of host/port pairs to use for establishing the connection to the Kafka cluster. Only one of --bootstrap-server or --authorizer option must be specified. Configuration --command-config A property file containing configs to be passed to Admin Client. This option can only be used with --bootstrap-server option. Configuration --cluster Indicates to the script that the user is trying to interact with acls on the singular cluster resource. ResourcePattern --topic [topic-name] Indicates to the script that the user is trying to interact with acls on topic resource pattern(s). ResourcePattern --group [group-name] Indicates to the script that the user is trying to interact with acls on consumer-group resource pattern(s) ResourcePattern --transactional-id [transactional-id] The transactionalId to which ACLs should be added or removed. A value of * indicates the ACLs should apply to all transactionalIds. ResourcePattern --delegation-token [delegation-token] Delegation token to which ACLs should be added or removed. A value of * indicates ACL should apply to all tokens. ResourcePattern --user-principal [user-principal] A user resource to which ACLs should be added or removed. This is currently supported in relation with delegation tokens. A value of * indicates ACL should apply to all users. ResourcePattern --resource-pattern-type [pattern-type] Indicates to the script the type of resource pattern, (for --add), or resource pattern filter, (for --list and --remove), the user wishes to use. \\n When adding acls, this should be a specific pattern type, e.g. 'literal' or 'prefixed'. \\n When listing or removing acls, a specific pattern type filter can be used to list or remove acls from a specific type of resource pattern, or the filter values of 'any' or 'match' can be used, where 'any' will match any pattern type, but will match the resource name exactly, and 'match' will perform pattern matching to list or remove all acls that affect the supplied resource(s). \\n WARNING: 'match', when used in combination with the '--remove' switch, should be used with care. literal Configuration --allow-principal Principal is in PrincipalType:name format that will be added to ACL with Allow permission. Default PrincipalType string \"User\" is case sensitive. \\n You can specify multiple --allow-principal in a single command. Principal --deny-principal Principal is in PrincipalType:name format that will be added to ACL with Deny permission. Default PrincipalType string \"User\" is case sensitive. \\n You can specify multiple --deny-principal in a single command. Principal --principal Principal is in PrincipalType:name format that will be used along with --list option. Default PrincipalType string \"User\" is case sensitive. This will list the ACLs for the specified principal. \\n You can specify multiple --principal in a single command. Principal --allow-host IP address from which principals listed in --allow-principal will have access. if --allow-principal is specified defaults to * which translates to \"all hosts\" Host --deny-host IP address from which principals listed in --deny-principal will be denied access. if --deny-principal is specified defaults to * which translates to \"all hosts\" Host --operation Operation that will be allowed or denied. \\n\u6709\u6548\u503c\u4e3a\uff1a\\n Read\\n Write\\n Create\\n Delete\\n Alter\\n Describe\\n ClusterAction\\n DescribeConfigs\\n AlterConfigs\\n IdempotentWrite\\n CreateTokens\\n DescribeTokens\\n* All All Operation --producer Convenience option to add/remove acls for producer role. This will generate acls that allows WRITE, DESCRIBE and CREATE on topic. Convenience --consumer Convenience option to add/remove acls for consumer role. This will generate acls that allows READ, DESCRIBE on topic and READ on consumer-group. Convenience --idempotent Enable idempotence for the producer. This should be used in combination with the --producer option. \\n Note that idempotence is enabled automatically if the producer is authorized to a particular transactional-id. Convenience --force Convenience option to assume yes to all queries and do not prompt. Convenience --authorizer (DEPRECATED: not supported in KRaft) Fully qualified class name of the authorizer. kafka.security.authorizer.AclAuthorizer Configuration --authorizer-properties (DEPRECATED: not supported in KRaft) key=val pairs that will be passed to authorizer for initialization. For the default authorizer in ZK clsuters, the example values are: zookeeper.connect=localhost:2181 Configuration --zk-tls-config-file (DEPRECATED: not supported in KRaft) Identifies the file where ZooKeeper client TLS connectivity properties for the authorizer are defined. Any properties other than the following (with or without an \"authorizer.\" prefix) are ignored: zookeeper.clientCnxnSocket, zookeeper.ssl.cipher.suites, zookeeper.ssl.client.enable, zookeeper.ssl.crl.enable, zookeeper.ssl.enabled.protocols, zookeeper.ssl.endpoint.identification.algorithm, zookeeper.ssl.keystore.location, zookeeper.ssl.keystore.password, zookeeper.ssl.keystore.type, zookeeper.ssl.ocsp.enable, zookeeper.ssl.protocol, zookeeper.ssl.truststore.location, zookeeper.ssl.truststore.password, zookeeper.ssl.truststore.type Configuration \u4f8b\u5b50 \u6dfb\u52a0ACL \u5047\u8bbe\u60a8\u8981\u6dfb\u52a0\u4e00\u6761ACL\u201c\u5141\u8bb8\u4e3b\u4f53User:Bob \u548cUser:Alice \u5bf9\u6765\u81eaIP 198.51.100.0 \u548cIP 198.51.100.1 \u7684Topic Test-Topic \u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u201d\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI \u6765\u505a\u5230\u8fd9\u4e00\u70b9\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Bob --allow-principal User:Alice --allow-host 198.51.100.0 --allow-host 198.51.100.1 --operation Read --operation Write --topic Test-topic \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u4e0d\u5177\u6709\u5141\u8bb8\u8bbf\u95ee\u8d44\u6e90\u64cd\u4f5c\u7684\u663e\u5f0f acl \u7684\u4e3b\u4f53\u90fd\u4f1a\u88ab\u62d2\u7edd\u3002\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u5b9a\u4e49\u4e86\u5141\u8bb8\u8bbf\u95ee\u9664\u67d0\u4e9b\u4e3b\u4f53\u4e4b\u5916\u7684\u6240\u6709\u4e3b\u4f53\u7684\u5141\u8bb8 acl\uff0c\u6211\u4eec\u5c06\u5fc5\u987b\u4f7f\u7528 --deny-principal \u548c --deny-host \u9009\u9879\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u5141\u8bb8\u6240\u6709\u7528\u6237\u4ece Test-topic \u8bfb\u53d6\uff0c\u4f46\u4ec5\u62d2\u7edd\u6765\u81ea IP 198.51.100.3 \u7684 User:BadBob\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b9e\u73b0\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:'*' --allow-host '*' --deny-principal User:BadBob --deny-host 198.51.100.3 --operation Read --topic Test-topic \u8bf7\u6ce8\u610f\uff0c --allow-host \u548c --deny-host \u4ec5\u652f\u6301 IP \u5730\u5740\uff08\u4e0d\u652f\u6301\u4e3b\u673a\u540d\uff09\u3002\u4e0a\u9762\u7684\u793a\u4f8b\u901a\u8fc7\u6307\u5b9a --topic [topic-name] \u4f5c\u4e3a\u8d44\u6e90\u6a21\u5f0f\u9009\u9879\u5c06 acl \u6dfb\u52a0\u5230\u4e3b\u9898\u3002\u540c\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a --cluster \u5c06 acl \u6dfb\u52a0\u5230\u96c6\u7fa4\uff0c\u5e76\u901a\u8fc7\u6307\u5b9a --group [group-name] \u5c06 acl \u6dfb\u52a0\u5230\u6d88\u8d39\u8005\u7ec4\u3002\u60a8\u53ef\u4ee5\u5728\u67d0\u79cd\u7c7b\u578b\u7684\u4efb\u4f55\u8d44\u6e90\u4e0a\u6dfb\u52a0 acl\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u60f3\u6dfb\u52a0\u4e00\u4e2a acl\u201c\u4e3b\u8981\u7528\u6237\uff1aPeter \u88ab\u5141\u8bb8\u4ece IP 198.51.200.0 \u751f\u6210\u4efb\u4f55\u4e3b\u9898\u201d\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u901a\u914d\u7b26\u8d44\u6e90\u201c*\u201d\u6765\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u4f8b\u5982\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Peter --allow-host 198.51.200.1 --producer --topic '*' \u60a8\u53ef\u4ee5\u5728\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e0a\u6dfb\u52a0 acl\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u8981\u6dfb\u52a0\u4e00\u4e2a acl\u201c\u4e3b\u8981\u7528\u6237\uff1aJane \u88ab\u5141\u8bb8\u4ece\u4efb\u4f55\u4e3b\u673a\u751f\u6210\u540d\u79f0\u4ee5\u201cTest-\u201d\u5f00\u5934\u7684\u4efb\u4f55\u4e3b\u9898\u201d\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI \u6765\u505a\u5230\u8fd9\u4e00\u70b9\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Jane --producer --topic Test- --resource-pattern-type prefixed \u8bf7\u6ce8\u610f\uff0c--resource-pattern-type \u9ed8\u8ba4\u4e3a\u201cliteral\u201d\uff0c\u5b83\u4ec5\u5f71\u54cd\u5177\u6709\u5b8c\u5168\u76f8\u540c\u540d\u79f0\u7684\u8d44\u6e90\uff0c\u6216\u8005\u5728\u901a\u914d\u7b26\u8d44\u6e90\u540d\u79f0\u201c*\u201d\u7684\u60c5\u51b5\u4e0b\uff0c\u5f71\u54cd\u5177\u6709\u4efb\u4f55\u540d\u79f0\u7684\u8d44\u6e90\u3002 * \u5220\u9664 Acl \u5220\u9664 acl \u51e0\u4e4e\u662f\u76f8\u540c\u7684\u3002\u552f\u4e00\u7684\u533a\u522b\u662f\u7528\u6237\u5fc5\u987b\u6307\u5b9a --remove \u9009\u9879\uff0c\u800c\u4e0d\u662f --add \u9009\u9879\u3002\u8981\u5220\u9664\u4e0a\u9762\u7b2c\u4e00\u4e2a\u793a\u4f8b\u6dfb\u52a0\u7684 acl\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --remove --allow-principal User:Bob --allow-principal User:Alice --allow-host 198.51.100.0 --allow-host 198.51.100.1 --operation Read --operation Write --topic Test-topic \u5982\u679c\u60a8\u60f3\u5220\u9664\u6dfb\u52a0\u5230\u4e0a\u9762\u7684\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e2d\u7684 acl\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --remove --allow-principal User:Jane --producer --topic Test- --resource-pattern-type Prefixed \u5217\u51fa ACL \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e3a\u8d44\u6e90\u6307\u5b9a --list \u9009\u9879\u6765\u5217\u51fa\u4efb\u4f55\u8d44\u6e90\u7684 ACL\u3002\u8981\u5217\u51fa\u6587\u5b57\u8d44\u6e90\u6a21\u5f0f Test-topic \u4e0a\u7684\u6240\u6709 acl\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --list --topic Test-topic \u4f46\u662f\uff0c\u8fd9\u53ea\u4f1a\u8fd4\u56de\u5df2\u6dfb\u52a0\u5230\u8be5\u786e\u5207\u8d44\u6e90\u6a21\u5f0f\u7684 acl\u3002\u53ef\u80fd\u5b58\u5728\u5f71\u54cd\u5bf9\u4e3b\u9898\u7684\u8bbf\u95ee\u7684\u5176\u4ed6 acl\uff0c\u4f8b\u5982\u4e3b\u9898\u901a\u914d\u7b26\u201c*\u201d\u4e0a\u7684\u4efb\u4f55 acl\uff0c\u6216\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e0a\u7684\u4efb\u4f55 acl\u3002\u53ef\u4ee5\u663e\u5f0f\u67e5\u8be2\u901a\u914d\u7b26\u8d44\u6e90\u6a21\u5f0f\u4e0a\u7684 ACL\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --list --topic '*' \u4f46\u662f\uff0c\u4e0d\u4e00\u5b9a\u53ef\u4ee5\u5728\u4e0e Test-topic \u5339\u914d\u7684\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e0a\u663e\u5f0f\u67e5\u8be2 acl\uff0c\u56e0\u4e3a\u6b64\u7c7b\u6a21\u5f0f\u7684\u540d\u79f0\u53ef\u80fd\u672a\u77e5\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u201c--resource-pattern-type match\u201d\u5217\u51fa\u5f71\u54cd\u6d4b\u8bd5\u4e3b\u9898\u7684 \u6240\u6709acl\uff0c\u4f8b\u5982 > bin/kafka-acls.sh --bootstrap-server localhost:9092 --list --topic Test-topic --resource-pattern-type match \u8fd9\u5c06\u5217\u51fa\u6240\u6709\u5339\u914d\u6587\u5b57\u3001\u901a\u914d\u7b26\u548c\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u7684 acl\u3002 * \u6dfb\u52a0\u6216\u5220\u9664\u4e3b\u4f53\u4f5c\u4e3a\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005 ACL \u7ba1\u7406\u6700\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u6dfb\u52a0/\u5220\u9664\u4e3b\u4f53\u4f5c\u4e3a\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\uff0c\u56e0\u6b64\u6211\u4eec\u6dfb\u52a0\u4e86\u65b9\u4fbf\u7684\u9009\u9879\u6765\u5904\u7406\u8fd9\u4e9b\u60c5\u51b5\u3002\u4e3a\u4e86\u5c06 User:Bob \u6dfb\u52a0\u4e3a Test-topic \u7684\u751f\u4ea7\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Bob --producer --topic Test-topic \u7c7b\u4f3c\u5730\uff0c\u8981\u5c06 Alice \u6dfb\u52a0\u4e3a\u6d88\u8d39\u8005\u7ec4 Group-1 \u7684 Test-topic \u6d88\u8d39\u8005\uff0c\u6211\u4eec\u53ea\u9700\u4f20\u9012 --consumer \u9009\u9879\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Bob --consumer --topic Test-topic --group Group-1 \u8bf7\u6ce8\u610f\uff0c\u5bf9\u4e8e\u6d88\u8d39\u8005\u9009\u9879\uff0c\u6211\u4eec\u8fd8\u5fc5\u987b\u6307\u5b9a\u6d88\u8d39\u8005\u7ec4\u3002\u4e3a\u4e86\u4ece\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\u89d2\u8272\u4e2d\u5220\u9664\u4e3b\u4f53\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4f20\u9012 --remove \u9009\u9879\u3002 * \u57fa\u4e8eAdmin API\u7684ACL\u7ba1\u7406 \u5bf9 ClusterResource\u62e5\u6709Alter\u6743\u9650\u7684\u7528\u6237\u53ef\u4ee5\u4f7f\u7528Admin API\u8fdb\u884cACL\u7ba1\u7406\u3002kafka-acls.sh \u811a\u672c\u652f\u6301 AdminClient API \u6765\u7ba1\u7406 ACL\uff0c\u800c\u65e0\u9700\u76f4\u63a5\u4e0e Zookeeper/Authorizer \u4ea4\u4e92\u3002 \u4e0a\u8ff0\u6240\u6709\u793a\u4f8b\u90fd\u53ef\u4ee5\u4f7f\u7528--bootstrap-server \u9009\u9879\u6765\u6267\u884c\u3002\u4f8b\u5982\uff1a bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --add --allow-principal User:Bob --producer --topic Test-topic bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --add --allow-principal User:Bob --consumer --topic Test-topic --group Group-1 bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --list --topic Test-topic bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --add --allow-principal User:tokenRequester --operation CreateTokens --user-principal \"owner1\" \u6388\u6743\u539f\u8bed \u534f\u8bae\u8c03\u7528\u901a\u5e38\u662f\u5bf9 Kafka \u4e2d\u7684\u67d0\u4e9b\u8d44\u6e90\u6267\u884c\u4e00\u4e9b\u64cd\u4f5c\u3002\u9700\u8981\u4e86\u89e3\u64cd\u4f5c\u548c\u8d44\u6e90\u624d\u80fd\u5efa\u7acb\u6709\u6548\u7684\u4fdd\u62a4\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u5217\u51fa\u8fd9\u4e9b\u64cd\u4f5c\u548c\u8d44\u6e90\uff0c\u7136\u540e\u5217\u51fa\u8fd9\u4e9b\u64cd\u4f5c\u548c\u8d44\u6e90\u4e0e\u534f\u8bae\u7684\u7ec4\u5408\u4ee5\u67e5\u770b\u6709\u6548\u7684\u573a\u666f\u3002 Kafka\u4e2d\u7684\u64cd\u4f5c \u6709\u4e00\u4e9b\u64cd\u4f5c\u539f\u8bed\u53ef\u7528\u4e8e\u5efa\u7acb\u6743\u9650\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4e0e\u67d0\u4e9b\u8d44\u6e90\u76f8\u5339\u914d\uff0c\u4ee5\u5141\u8bb8\u7ed9\u5b9a\u7528\u6237\u8fdb\u884c\u7279\u5b9a\u534f\u8bae\u8c03\u7528\u3002\u8fd9\u4e9b\u90fd\u662f\uff1a Read Write Create Delete Alter Describe ClusterAction DescribeConfigs AlterConfigs IdempotentWrite CreateTokens DescribeTokens All Kafka\u4e2d\u7684\u8d44\u6e90 \u4e0a\u8ff0\u64cd\u4f5c\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e0b\u9762\u63cf\u8ff0\u7684\u67d0\u4e9b\u8d44\u6e90\u3002 \u4e3b\u9898\uff1a \u8fd9\u4ec5\u4ee3\u8868\u4e00\u4e2a\u4e3b\u9898\u3002\u6240\u6709\u4f5c\u7528\u4e8e\u4e3b\u9898\uff08\u4f8b\u5982\u8bfb\u53d6\u3001\u5199\u5165\u4e3b\u9898\uff09\u7684\u534f\u8bae\u8c03\u7528\u90fd\u9700\u8981\u6dfb\u52a0\u76f8\u5e94\u7684\u6743\u9650\u3002\u5982\u679c\u4e3b\u9898\u8d44\u6e90\u5b58\u5728\u6388\u6743\u9519\u8bef\uff0c\u5219\u4f1a\u8fd4\u56de TOPIC_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a29\uff09\u3002 \u7ec4\uff1a \u4ee3\u8868broker\u4e2d\u7684\u6d88\u8d39\u8005\u7ec4\u3002\u6240\u6709\u4e0e\u6d88\u8d39\u8005\u7ec4\u4e00\u8d77\u4f7f\u7528\u7684\u534f\u8bae\u8c03\u7528\uff08\u4f8b\u5982\u52a0\u5165\u7ec4\uff09\u90fd\u5fc5\u987b\u5177\u6709\u4e3b\u9898\u7ec4\u7684\u6743\u9650\u3002\u5982\u679c\u672a\u6388\u4e88\u6743\u9650\uff0c\u5219\u534f\u8bae\u54cd\u5e94\u4e2d\u5c06\u8fd4\u56de GROUP_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a30\uff09\u3002 \u96c6\u7fa4\uff1a \u8be5\u8d44\u6e90\u4ee3\u8868\u96c6\u7fa4\u3002\u5f71\u54cd\u6574\u4e2a\u96c6\u7fa4\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\u53d7\u63a7\u5173\u95ed\uff09\u53d7\u5230\u96c6\u7fa4\u8d44\u6e90\u7279\u6743\u7684\u4fdd\u62a4\u3002\u5982\u679c\u96c6\u7fa4\u8d44\u6e90\u5b58\u5728\u6388\u6743\u95ee\u9898\uff0c\u5219\u4f1a\u8fd4\u56de CLUSTER_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a31\uff09\u3002 TransactionalId\uff1a \u8be5\u8d44\u6e90\u8868\u793a\u4e0e\u4e8b\u52a1\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u63d0\u4ea4\u3002\u5982\u679c\u53d1\u751f\u4efb\u4f55\u9519\u8bef\uff0c\u7ecf\u7eaa\u5546\u5c06\u8fd4\u56de TRANSACTIONAL_ID_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a53\uff09\u3002 DelegationToken\uff1a \u8fd9\u4ee3\u8868\u96c6\u7fa4\u4e2d\u7684\u59d4\u6258\u4ee4\u724c\u3002\u8bf8\u5982\u63cf\u8ff0\u59d4\u6258\u4ee4\u724c\u4e4b\u7c7b\u7684\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7DelegationToken\u8d44\u6e90\u4e0a\u7684\u7279\u6743\u6765\u4fdd\u62a4\u3002\u7531\u4e8e\u8fd9\u4e9b\u5bf9\u8c61\u5728 Kafka \u4e2d\u5177\u6709\u4e00\u4e9b\u7279\u6b8a\u884c\u4e3a\uff0c\u56e0\u6b64\u5efa\u8bae\u9605\u8bfb KIP-48\u548c \u4f7f\u7528\u59d4\u6258\u4ee4\u724c\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 \u4e2d\u7684\u76f8\u5173\u4e0a\u6e38\u6587\u6863\u3002 \u7528\u6237\uff1a \u53ef\u4ee5\u5c06CreateToken\u548cDescribeToken\u64cd\u4f5c\u6388\u4e88\u7528\u6237\u8d44\u6e90\uff0c\u4ee5\u5141\u8bb8\u4e3a\u5176\u4ed6\u7528\u6237\u521b\u5efa\u548c\u63cf\u8ff0\u4ee4\u724c\u3002 \u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728KIP-373 \u4e2d\u627e\u5230\u3002 \u534f\u8bae\u64cd\u4f5c\u548c\u8d44\u6e90 \u5728\u4e0b\u8868\u4e2d\uff0c\u6211\u4eec\u5c06\u5217\u51fa Kafka API \u534f\u8bae\u5bf9\u8d44\u6e90\u6267\u884c\u7684\u6709\u6548\u64cd\u4f5c\u3002 PROTOCOL (API KEY) OPERATION RESOURCE NOTE PRODUCE (0) Write TransactionalId An transactional producer which has its transactional.id set requires this privilege. PRODUCE (0) IdempotentWrite Cluster An idempotent produce action requires this privilege. PRODUCE (0) Write Topic This applies to a normal produce action. FETCH (1) ClusterAction Cluster A follower must have ClusterAction on the Cluster resource in order to fetch partition data. FETCH (1) Read Topic Regular Kafka consumers need READ permission on each partition they are fetching. LIST_OFFSETS (2) Describe Topic METADATA (3) Describe Topic METADATA (3) Create Cluster If topic auto-creation is enabled, then the broker-side API will check for the existence of a Cluster level privilege. If it's found then it'll allow creating the topic, otherwise it'll iterate through the Topic level privileges (see the next one). METADATA (3) Create Topic This authorizes auto topic creation if enabled but the given user doesn't have a cluster level permission (above). LEADER_AND_ISR (4) ClusterAction Cluster STOP_REPLICA (5) ClusterAction Cluster UPDATE_METADATA (6) ClusterAction Cluster CONTROLLED_SHUTDOWN (7) ClusterAction Cluster OFFSET_COMMIT (8) Read Group An offset can only be committed if it's authorized to the given group and the topic too (see below). Group access is checked first, then Topic access. OFFSET_COMMIT (8) Read Topic Since offset commit is part of the consuming process, it needs privileges for the read action. OFFSET_FETCH (9) Describe Group Similarly to OFFSET_COMMIT, the application must have privileges on group and topic level too to be able to fetch. However in this case it requires describe access instead of read. Group access is checked first, then Topic access. OFFSET_FETCH (9) Describe Topic FIND_COORDINATOR (10) Describe Group The FIND_COORDINATOR request can be of \"Group\" type in which case it is looking for consumergroup coordinators. This privilege would represent the Group mode. FIND_COORDINATOR (10) Describe TransactionalId This applies only on transactional producers and checked when a producer tries to find the transaction coordinator. JOIN_GROUP (11) Read Group HEARTBEAT (12) Read Group LEAVE_GROUP (13) Read Group SYNC_GROUP (14) Read Group DESCRIBE_GROUPS (15) Describe Group LIST_GROUPS (16) Describe Cluster When the broker checks to authorize a list_groups request it first checks for this cluster level authorization. If none found then it proceeds to check the groups individually. This operation doesn't return CLUSTER_AUTHORIZATION_FAILED. LIST_GROUPS (16) Describe Group If none of the groups are authorized, then just an empty response will be sent back instead of an error. This operation doesn't return CLUSTER_AUTHORIZATION_FAILED. This is applicable from the 2.1 release. SASL_HANDSHAKE (17) The SASL handshake is part of the authentication process and therefore it's not possible to apply any kind of authorization here. API_VERSIONS (18) The API_VERSIONS request is part of the Kafka protocol handshake and happens on connection and before any authentication. Therefore it's not possible to control this with authorization. CREATE_TOPICS (19) Create Cluster If there is no cluster level authorization then it won't return CLUSTER_AUTHORIZATION_FAILED but fall back to use topic level, which is just below. That'll throw error if there is a problem. CREATE_TOPICS (19) Create Topic This is applicable from the 2.0 release. DELETE_TOPICS (20) Delete Topic DELETE_RECORDS (21) Delete Topic INIT_PRODUCER_ID (22) Write TransactionalId INIT_PRODUCER_ID (22) IdempotentWrite Cluster OFFSET_FOR_LEADER_EPOCH (23) ClusterAction Cluster If there is no cluster level privilege for this operation, then it'll check for topic level one. OFFSET_FOR_LEADER_EPOCH (23) Describe Topic This is applicable from the 2.1 release. ADD_PARTITIONS_TO_TXN (24) Write TransactionalId This API is only applicable to transactional requests. It first checks for the Write action on the TransactionalId resource, then it checks the Topic in subject (below). ADD_PARTITIONS_TO_TXN (24) Write Topic ADD_OFFSETS_TO_TXN (25) Write TransactionalId Similarly to ADD_PARTITIONS_TO_TXN this is only applicable to transactional request. It first checks for Write action on the TransactionalId resource, then it checks whether it can Read on the given group (below). ADD_OFFSETS_TO_TXN (25) Read Group END_TXN (26) Write TransactionalId WRITE_TXN_MARKERS (27) ClusterAction Cluster TXN_OFFSET_COMMIT (28) Write TransactionalId TXN_OFFSET_COMMIT (28) Read Group TXN_OFFSET_COMMIT (28) Read Topic DESCRIBE_ACLS (29) Describe Cluster CREATE_ACLS (30) Alter Cluster DELETE_ACLS (31) Alter Cluster DESCRIBE_CONFIGS (32) DescribeConfigs Cluster If broker configs are requested, then the broker will check cluster level privileges. DESCRIBE_CONFIGS (32) DescribeConfigs Topic If topic configs are requested, then the broker will check topic level privileges. ALTER_CONFIGS (33) AlterConfigs Cluster If broker configs are altered, then the broker will check cluster level privileges. ALTER_CONFIGS (33) AlterConfigs Topic If topic configs are altered, then the broker will check topic level privileges. ALTER_REPLICA_LOG_DIRS (34) Alter Cluster DESCRIBE_LOG_DIRS (35) Describe Cluster An empty response will be returned on authorization failure. SASL_AUTHENTICATE (36) SASL_AUTHENTICATE is part of the authentication process and therefore it's not possible to apply any kind of authorization here. CREATE_PARTITIONS (37) Alter Topic CREATE_DELEGATION_TOKEN (38) Creating delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. CREATE_DELEGATION_TOKEN (38) CreateTokens User Allows creating delegation tokens for the User resource. RENEW_DELEGATION_TOKEN (39) Renewing delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. EXPIRE_DELEGATION_TOKEN (40) Expiring delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. DESCRIBE_DELEGATION_TOKEN (41) Describe DelegationToken Describing delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. DESCRIBE_DELEGATION_TOKEN (41) DescribeTokens User Allows describing delegation tokens of the User resource. DELETE_GROUPS (42) Delete Group ELECT_PREFERRED_LEADERS (43) ClusterAction Cluster INCREMENTAL_ALTER_CONFIGS (44) AlterConfigs Cluster If broker configs are altered, then the broker will check cluster level privileges. INCREMENTAL_ALTER_CONFIGS (44) AlterConfigs Topic If topic configs are altered, then the broker will check topic level privileges. ALTER_PARTITION_REASSIGNMENTS (45) Alter Cluster LIST_PARTITION_REASSIGNMENTS (46) Describe Cluster OFFSET_DELETE (47) Delete Group OFFSET_DELETE (47) Read Topic DESCRIBE_CLIENT_QUOTAS (48) DescribeConfigs Cluster ALTER_CLIENT_QUOTAS (49) AlterConfigs Cluster DESCRIBE_USER_SCRAM_CREDENTIALS (50) Describe Cluster ALTER_USER_SCRAM_CREDENTIALS (51) Alter Cluster VOTE (52) ClusterAction Cluster BEGIN_QUORUM_EPOCH (53) ClusterAction Cluster END_QUORUM_EPOCH (54) ClusterAction Cluster DESCRIBE_QUORUM (55) Describe Cluster ALTER_PARTITION (56) ClusterAction Cluster UPDATE_FEATURES (57) Alter Cluster ENVELOPE (58) ClusterAction Cluster FETCH_SNAPSHOT (59) ClusterAction Cluster DESCRIBE_CLUSTER (60) Describe Cluster DESCRIBE_PRODUCERS (61) Read Topic BROKER_REGISTRATION (62) ClusterAction Cluster BROKER_HEARTBEAT (63) ClusterAction Cluster UNREGISTER_BROKER (64) Alter Cluster DESCRIBE_TRANSACTIONS (65) Describe TransactionalId LIST_TRANSACTIONS (66) Describe TransactionalId ALLOCATE_PRODUCER_IDS (67) ClusterAction Cluster CONSUMER_GROUP_HEARTBEAT (68) Read Group 7.6 \u5c06\u5b89\u5168\u529f\u80fd\u7eb3\u5165\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u4e2d \u60a8\u53ef\u4ee5\u901a\u8fc7\u524d\u9762\u8ba8\u8bba\u7684\u4e00\u79cd\u6216\u591a\u79cd\u53d7\u652f\u6301\u7684\u534f\u8bae\u6765\u4fdd\u62a4\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u3002\u8fd9\u662f\u5206\u9636\u6bb5\u5b8c\u6210\u7684\uff1a \u589e\u91cf\u53cd\u5f39\u96c6\u7fa4\u8282\u70b9\u4ee5\u6253\u5f00\u5176\u4ed6\u5b89\u5168\u7aef\u53e3\u3002 \u4f7f\u7528\u5b89\u5168\u7aef\u53e3\u800c\u4e0d\u662f PLAINTEXT \u7aef\u53e3\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\uff08\u5047\u8bbe\u60a8\u6b63\u5728\u4fdd\u62a4\u5ba2\u6237\u7aef\u4ee3\u7406\u8fde\u63a5\uff09\u3002 \u518d\u6b21\u589e\u91cf\u5730\u53cd\u5f39\u96c6\u7fa4\u4ee5\u542f\u7528\u4ee3\u7406\u5230\u4ee3\u7406\u7684\u5b89\u5168\u6027\uff08\u5982\u679c\u9700\u8981\uff09 \u6700\u540e\u589e\u91cf\u53cd\u5f39\u4ee5\u5173\u95ed PLAINTEXT \u7aef\u53e3\u3002 \u914d\u7f6eSSL\u548cSASL\u7684\u5177\u4f53\u6b65\u9aa4\u57287.3 \u548c 7.4 \u8282\u4e2d\u63cf\u8ff0\u3002\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4e3a\u60a8\u6240\u9700\u7684\u534f\u8bae\u542f\u7528\u5b89\u5168\u6027\u3002 \u5b89\u5168\u5b9e\u73b0\u5141\u8bb8\u60a8\u4e3a\u4ee3\u7406-\u5ba2\u6237\u7aef\u548c\u4ee3\u7406-\u4ee3\u7406\u901a\u4fe1\u914d\u7f6e\u4e0d\u540c\u7684\u534f\u8bae\u3002\u8fd9\u4e9b\u5fc5\u987b\u5728\u5355\u72ec\u7684\u53cd\u5f39\u4e2d\u542f\u7528\u3002PLAINTEXT \u7aef\u53e3\u5fc5\u987b\u59cb\u7ec8\u4fdd\u6301\u5f00\u653e\u72b6\u6001\uff0c\u4ee5\u4fbf\u4ee3\u7406\u548c/\u6216\u5ba2\u6237\u7aef\u53ef\u4ee5\u7ee7\u7eed\u901a\u4fe1\u3002 \u5f53\u6267\u884c\u589e\u91cf\u53cd\u5f39\u65f6\uff0c\u901a\u8fc7 SIGTERM \u5f7b\u5e95\u505c\u6b62\u4ee3\u7406\u3002\u5728\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u4e4b\u524d\uff0c\u7b49\u5f85\u91cd\u65b0\u542f\u52a8\u7684\u526f\u672c\u8fd4\u56de\u5230 ISR \u5217\u8868\u4e5f\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u505a\u6cd5\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u4f7f\u7528 SSL \u52a0\u5bc6\u4ee3\u7406-\u5ba2\u6237\u7aef\u548c\u4ee3\u7406-\u4ee3\u7406\u901a\u4fe1\u3002\u5728\u7b2c\u4e00\u6b21\u589e\u91cf\u53cd\u5f39\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u90fd\u4f1a\u6253\u5f00\u4e00\u4e2a SSL \u7aef\u53e3\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092 \u7136\u540e\u6211\u4eec\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\uff0c\u66f4\u6539\u5176\u914d\u7f6e\u4ee5\u6307\u5411\u65b0\u6253\u5f00\u7684\u5b89\u5168\u7aef\u53e3\uff1a bootstrap.servers = [broker1:9092,...] security.protocol = SSL ...etc \u5728\u7b2c\u4e8c\u6b21\u589e\u91cf\u670d\u52a1\u5668\u53cd\u5f39\u4e2d\uff0c\u6211\u4eec\u6307\u793a Kafka \u4f7f\u7528 SSL \u4f5c\u4e3a\u4ee3\u7406-\u4ee3\u7406\u534f\u8bae\uff08\u5c06\u4f7f\u7528\u76f8\u540c\u7684 SSL \u7aef\u53e3\uff09\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092 security.inter.broker.protocol=SSL \u5728\u6700\u540e\u7684\u53cd\u5f39\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u5173\u95ed PLAINTEXT \u7aef\u53e3\u6765\u4fdd\u62a4\u96c6\u7fa4\uff1a listeners=SSL://broker1:9092 security.inter.broker.protocol=SSL \u6216\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u6253\u5f00\u591a\u4e2a\u7aef\u53e3\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u534f\u8bae\u8fdb\u884cbroker-broker\u548cbroker-\u5ba2\u6237\u7aef\u901a\u4fe1\u3002\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u5728\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u4f7f\u7528 SSL \u52a0\u5bc6\uff08\u5373\u7528\u4e8e\u4ee3\u7406-\u4ee3\u7406\u548c\u4ee3\u7406-\u5ba2\u6237\u7aef\u901a\u4fe1\uff09\uff0c\u4f46\u6211\u4eec\u8fd8\u5e0c\u671b\u5c06 SASL \u8eab\u4efd\u9a8c\u8bc1\u6dfb\u52a0\u5230\u4ee3\u7406-\u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u6211\u4eec\u5c06\u901a\u8fc7\u5728\u7b2c\u4e00\u6b21\u53cd\u5f39\u671f\u95f4\u6253\u5f00\u4e24\u4e2a\u989d\u5916\u7684\u7aef\u53e3\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092,SASL_SSL://broker1:9093 \u7136\u540e\uff0c\u6211\u4eec\u5c06\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\uff0c\u66f4\u6539\u5176\u914d\u7f6e\u4ee5\u6307\u5411\u65b0\u6253\u5f00\u7684 SASL \u548c SSL \u5b89\u5168\u7aef\u53e3\uff1a bootstrap.servers = [broker1:9093,...] security.protocol = SASL_SSL ...etc \u7b2c\u4e8c\u6b21\u670d\u52a1\u5668\u53cd\u5f39\u4f1a\u5c06\u96c6\u7fa4\u5207\u6362\u4e3a\u901a\u8fc7\u6211\u4eec\u4e4b\u524d\u5728\u7aef\u53e3 9092 \u4e0a\u6253\u5f00\u7684 SSL \u7aef\u53e3\u4f7f\u7528\u52a0\u5bc6\u7684\u4ee3\u7406\u95f4\u901a\u4fe1\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092,SASL_SSL://broker1:9093 security.inter.broker.protocol=SSL \u6700\u540e\u7684\u53cd\u5f39\u901a\u8fc7\u5173\u95ed PLAINTEXT \u7aef\u53e3\u6765\u4fdd\u62a4\u96c6\u7fa4\u3002 listeners=SSL://broker1:9092,SASL_SSL://broker1:9093 security.inter.broker.protocol=SSL ZooKeeper \u7684\u5b89\u5168\u53ef\u4ee5\u72ec\u7acb\u4e8e Kafka \u96c6\u7fa4\u3002 \u7b2c7.7.2 \u8282\u4ecb\u7ecd\u4e86\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u6b65\u9aa4\u3002 7.7 ZooKeeper \u8ba4\u8bc1 ZooKeeper \u4ece 3.5.x \u7248\u672c\u5f00\u59cb\u652f\u6301\u53cc\u5411 TLS (mTLS) \u8eab\u4efd\u9a8c\u8bc1\u3002\u4ece 2.5 \u7248\u672c\u5f00\u59cb\uff0cKafka \u652f\u6301\u4f7f\u7528 SASL \u548c mTLS \u5355\u72ec\u6216\u540c\u65f6\u5411 ZooKeeper \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-515\uff1a\u542f\u7528 ZK \u5ba2\u6237\u7aef\u4f7f\u7528\u65b0\u7684 TLS \u652f\u6301\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5355\u72ec\u4f7f\u7528 mTLS \u65f6\uff0c\u6bcf\u4e2a\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\uff08\u4f8b\u5982 ZooKeeper \u5b89\u5168\u8fc1\u79fb\u5de5\u5177 \uff09\u90fd\u5e94\u4f7f\u7528\u76f8\u540c\u7684\u53ef\u5206\u8fa8\u540d\u79f0 (DN) \u6765\u6807\u8bc6\u81ea\u5df1\uff0c\u56e0\u4e3a\u5b83\u662f\u7ecf\u8fc7 ACL \u5904\u7406\u7684 DN\u3002\u8fd9\u53ef\u4ee5\u6309\u5982\u4e0b\u6240\u8ff0\u8fdb\u884c\u66f4\u6539\uff0c\u4f46\u5b83\u6d89\u53ca\u7f16\u5199\u548c\u90e8\u7f72\u81ea\u5b9a\u4e49 ZooKeeper \u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u3002\u901a\u5e38\uff0c\u6bcf\u4e2a\u8bc1\u4e66\u5e94\u5177\u6709\u76f8\u540c\u7684 DN\uff0c\u4f46\u5177\u6709\u4e0d\u540c\u7684\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN)\uff0c\u4ee5\u4fbf ZooKeeper \u5bf9\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u80fd\u591f\u6210\u529f\u3002 \u5f53\u5c06 SASL \u8eab\u4efd\u9a8c\u8bc1\u4e0e mTLS \u4e00\u8d77\u4f7f\u7528\u5230 ZooKeeper \u65f6\uff0cSASL \u8eab\u4efd\u548c\u521b\u5efa znode \u7684 DN\uff08\u5373\u521b\u5efa\u4ee3\u7406\u7684\u8bc1\u4e66\uff09\u6216\u5b89\u5168\u8fc1\u79fb\u5de5\u5177\u7684 DN\uff08\u5982\u679c\u5728\u521b\u5efa znode \u540e\u6267\u884c\u8fc1\u79fb\uff09\u90fd\u5c06\u88abACL'ed\uff0c\u5e76\u4e14\u6240\u6709\u4ee3\u7406\u548c CLI \u5de5\u5177\u90fd\u5c06\u83b7\u5f97\u6388\u6743\uff0c\u5373\u4f7f\u5b83\u4eec\u90fd\u4f7f\u7528\u4e0d\u540c\u7684 DN\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u5c06\u4f7f\u7528\u76f8\u540c\u7684 ACL'ed SASL \u8eab\u4efd\u3002\u4ec5\u5f53\u5355\u72ec\u4f7f\u7528 mTLS \u8eab\u4efd\u9a8c\u8bc1\u65f6\uff0c\u6240\u6709 DN \u90fd\u5fc5\u987b\u5339\u914d\uff08\u5e76\u4e14 SAN \u53d8\u5f97\u81f3\u5173\u91cd\u8981\u2014\u2014\u540c\u6837\uff0c\u5728\u6ca1\u6709\u7f16\u5199\u548c\u90e8\u7f72\u81ea\u5b9a\u4e49 ZooKeeper \u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u4e0b\u6240\u8ff0\uff09\u3002 \u4f7f\u7528\u4ee3\u7406\u5c5e\u6027\u6587\u4ef6\u4e3a\u4ee3\u7406\u8bbe\u7f6e TLS \u914d\u7f6e\uff0c\u5982\u4e0b\u6240\u8ff0\u3002 \u4f7f\u7528--zk-tls-config-file \u9009\u9879\u5728 Zookeeper \u5b89\u5168\u8fc1\u79fb\u5de5\u5177\u4e2d\u8bbe\u7f6e TLS \u914d\u7f6e\u3002kafka-acls.sh\u548ckafka-configs.sh CLI \u5de5\u5177\u8fd8\u652f\u6301--zk - tls-config-file \u9009\u9879\u3002 \u4f7f\u7528-zk-tls-config-file \u9009\u9879\uff08\u6ce8\u610f\u5355\u7834\u6298\u53f7\u800c\u4e0d\u662f\u53cc\u7834\u6298\u53f7\uff09\u4e3aZookeeper-shell.sh CLI \u5de5\u5177\u8bbe\u7f6e TLS \u914d\u7f6e\u3002 7.7.1 \u65b0\u96c6\u7fa4 7.7.1.1 ZooKeeper SASL \u8eab\u4efd\u9a8c\u8bc1 \u8981\u5728\u4ee3\u7406\u4e0a\u542f\u7528 ZooKeeper SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u6709\u4e24\u4e2a\u5fc5\u8981\u6b65\u9aa4\uff1a \u521b\u5efa JAAS \u767b\u5f55\u6587\u4ef6\u5e76\u8bbe\u7f6e\u76f8\u5e94\u7684\u7cfb\u7edf\u5c5e\u6027\u4ee5\u6307\u5411\u5b83\uff0c\u5982\u4e0a\u6240\u8ff0 \u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e2d\u7684\u914d\u7f6e\u5c5e\u6027zookeeper.set.acl\u8bbe\u7f6e\u4e3atrue Kafka \u96c6\u7fa4\u7684 ZooKeeper \u4e2d\u5b58\u50a8\u7684\u5143\u6570\u636e\u662f\u4e16\u754c\u53ef\u8bfb\u7684\uff0c\u4f46\u53ea\u80fd\u7531\u4ee3\u7406\u4fee\u6539\u3002\u8fd9\u4e00\u51b3\u5b9a\u80cc\u540e\u7684\u7406\u7531\u662f\uff0cZooKeeper \u4e2d\u5b58\u50a8\u7684\u6570\u636e\u5e76\u4e0d\u654f\u611f\uff0c\u4f46\u5bf9\u8be5\u6570\u636e\u7684\u4e0d\u5f53\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u96c6\u7fa4\u4e2d\u65ad\u3002\u6211\u4eec\u8fd8\u5efa\u8bae\u901a\u8fc7\u7f51\u7edc\u5206\u6bb5\u9650\u5236\u5bf9 ZooKeeper \u7684\u8bbf\u95ee\uff08\u53ea\u6709\u4ee3\u7406\u548c\u67d0\u4e9b\u7ba1\u7406\u5de5\u5177\u9700\u8981\u8bbf\u95ee ZooKeeper\uff09\u3002 7.7.1.2 ZooKeeper \u76f8\u4e92 TLS \u8eab\u4efd\u9a8c\u8bc1 ZooKeeper mTLS \u8eab\u4efd\u9a8c\u8bc1\u53ef\u4ee5\u5728\u6709\u6216\u6ca1\u6709 SASL \u8eab\u4efd\u9a8c\u8bc1\u7684\u60c5\u51b5\u4e0b\u542f\u7528\u3002\u5982\u4e0a\u6240\u8ff0\uff0c\u5355\u72ec\u4f7f\u7528 mTLS \u65f6\uff0c\u6bcf\u4e2a\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\uff08\u4f8b\u5982 ZooKeeper \u5b89\u5168\u8fc1\u79fb\u5de5\u5177 \uff09\u901a\u5e38\u5fc5\u987b\u4f7f\u7528\u76f8\u540c\u7684\u53ef\u5206\u8fa8\u540d\u79f0 (DN) \u6765\u6807\u8bc6\u81ea\u5df1\uff0c\u56e0\u4e3a\u5b83\u662f\u7ecf\u8fc7 ACL \u5904\u7406\u7684 DN\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u8bc1\u4e66\u5e94\u5177\u6709\u9002\u5f53\u7684\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN)\uff0c\u4ee5\u4fbf ZooKeeper \u5bf9\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u80fd\u591f\u6210\u529f\u3002 \u901a\u8fc7\u7f16\u5199\u4e00\u4e2a\u6269\u5c55org.apache.zookeeper.server.auth.X509AuthenticationProvider\u7684\u7c7b\u5e76\u8986\u76d6\u65b9\u6cd5 protected String getClientId(X509Certificate clientCert) \uff0c \u53ef\u4ee5\u4f7f\u7528 DN \u4ee5\u5916\u7684\u5176\u4ed6\u5185\u5bb9\u6765\u6807\u8bc6 mTLS \u5ba2\u6237\u7aef\u3002\u9009\u62e9\u4e00\u4e2a\u65b9\u6848\u540d\u79f0\uff0c\u5e76\u5c06ZooKeeper \u4e2d\u7684authProvider.[scheme]\u8bbe\u7f6e\u4e3a\u81ea\u5b9a\u4e49\u5b9e\u73b0\u7684\u5b8c\u5168\u9650\u5b9a\u7c7b\u540d\u79f0\uff1b\u7136\u540e\u8bbe\u7f6essl.authProvider=[scheme]\u6765\u4f7f\u7528\u5b83\u3002 \u4ee5\u4e0b\u662f\u7528\u4e8e\u542f\u7528 TLS \u8eab\u4efd\u9a8c\u8bc1\u7684 ZooKeeper \u914d\u7f6e\u793a\u4f8b\uff08\u90e8\u5206\uff09\u3002 \u8fd9\u4e9b\u914d\u7f6e\u5728ZooKeeper \u7ba1\u7406\u6307\u5357 \u4e2d\u6709\u63cf\u8ff0 \u3002 secureClientPort=2182 serverCnxnFactory=org.apache.zookeeper.server.NettyServerCnxnFactory authProvider.x509=org.apache.zookeeper.server.auth.X509AuthenticationProvider ssl.keyStore.location=/path/to/zk/keystore.jks ssl.keyStore.password=zk-ks-passwd ssl.trustStore.location=/path/to/zk/truststore.jks ssl.trustStore.password=zk-ts-passwd \u91cd\u8981\u63d0\u793a \uff1aZooKeeper \u4e0d\u652f\u6301\u5c06 ZooKeeper \u670d\u52a1\u5668\u5bc6\u94a5\u5e93\u4e2d\u7684\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u672c\u8eab\u4e0d\u540c\u7684\u503c\u3002\u8bf7\u52a1\u5fc5\u5c06\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u76f8\u540c\u3002 \u4ee5\u4e0b\u662f\u4f7f\u7528 mTLS \u8eab\u4efd\u9a8c\u8bc1\u8fde\u63a5\u5230 ZooKeeper \u7684 Kafka Broker \u914d\u7f6e\u793a\u4f8b\uff08\u90e8\u5206\uff09\u3002 \u8fd9\u4e9b\u914d\u7f6e\u5728\u4e0a\u9762\u7684Broker Configs \u4e2d\u6709\u63cf\u8ff0\u3002 # connect to the ZooKeeper port configured for TLS zookeeper.connect=zk1:2182,zk2:2182,zk3:2182 # required to use TLS to ZooKeeper (default is false) zookeeper.ssl.client.enable=true # required to use TLS to ZooKeeper zookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty # define key/trust stores to use TLS to ZooKeeper; ignored unless zookeeper.ssl.client.enable=true zookeeper.ssl.keystore.location=/path/to/kafka/keystore.jks zookeeper.ssl.keystore.password=kafka-ks-passwd zookeeper.ssl.truststore.location=/path/to/kafka/truststore.jks zookeeper.ssl.truststore.password=kafka-ts-passwd # tell broker to create ACLs on znodes zookeeper.set.acl=true \u91cd\u8981\u63d0\u793a \uff1aZooKeeper \u4e0d\u652f\u6301\u5c06 ZooKeeper \u5ba2\u6237\u7aef\uff08\u5373\u4ee3\u7406\uff09\u5bc6\u94a5\u5e93\u4e2d\u7684\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u672c\u8eab\u4e0d\u540c\u7684\u503c\u3002\u8bf7\u52a1\u5fc5\u5c06\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u76f8\u540c\u3002 7.7.2 \u8fc1\u79fb\u96c6\u7fa4 \u5982\u679c\u60a8\u8fd0\u884c\u7684 Kafka \u7248\u672c\u4e0d\u652f\u6301\u5b89\u5168\u6027\u6216\u53ea\u662f\u7981\u7528\u4e86\u5b89\u5168\u6027\uff0c\u5e76\u4e14\u5e0c\u671b\u786e\u4fdd\u96c6\u7fa4\u5b89\u5168\uff0c\u90a3\u4e48\u60a8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\u6765\u542f\u7528 ZooKeeper \u8eab\u4efd\u9a8c\u8bc1\uff0c\u540c\u65f6\u5c06\u5bf9\u60a8\u7684\u64cd\u4f5c\u9020\u6210\u7684\u5e72\u6270\u964d\u81f3\u6700\u4f4e\uff1a \u5728 ZooKeeper \u4e0a\u542f\u7528 SASL \u548c/\u6216 mTLS \u8eab\u4efd\u9a8c\u8bc1\u3002\u5982\u679c\u542f\u7528 mTLS\uff0c\u60a8\u73b0\u5728\u5c06\u540c\u65f6\u62e5\u6709\u975e TLS \u7aef\u53e3\u548c TLS \u7aef\u53e3\uff0c\u5982\u4e0b\u6240\u793a\uff1a clientPort=2181 secureClientPort=2182 serverCnxnFactory=org.apache.zookeeper.server.NettyServerCnxnFactory authProvider.x509=org.apache.zookeeper.server.auth.X509AuthenticationProvider ssl.keyStore.location=/path/to/zk/keystore.jks ssl.keyStore.password=zk-ks-passwd ssl.trustStore.location=/path/to/zk/truststore.jks ssl.trustStore.password=zk-ts-passwd \u6839\u636e\u9700\u8981\u6267\u884c\u4ee3\u7406\u7684\u6eda\u52a8\u91cd\u542f\uff0c\u8bbe\u7f6e JAAS \u767b\u5f55\u6587\u4ef6\u548c/\u6216\u5b9a\u4e49 ZooKeeper \u53cc\u5411 TLS \u914d\u7f6e\uff08\u5305\u62ec\u8fde\u63a5\u5230\u542f\u7528 TLS \u7684 ZooKeeper \u7aef\u53e3\uff09\uff0c\u8fd9\u4f7f\u4ee3\u7406\u80fd\u591f\u5411 ZooKeeper \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5728\u6eda\u52a8\u91cd\u542f\u7ed3\u675f\u65f6\uff0c\u4ee3\u7406\u80fd\u591f\u4f7f\u7528\u4e25\u683c\u7684 ACL \u64cd\u4f5c znode\uff0c\u4f46\u5b83\u4eec\u4e0d\u4f1a\u4f7f\u7528\u8fd9\u4e9b ACL \u521b\u5efa znode \u5982\u679c\u542f\u7528\u4e86 mTLS\uff0c\u8bf7\u5728 ZooKeeper \u4e2d\u7981\u7528\u975e TLS \u7aef\u53e3 \u5bf9\u4ee3\u7406\u6267\u884c\u7b2c\u4e8c\u6b21\u6eda\u52a8\u91cd\u542f\uff0c\u8fd9\u6b21\u5c06\u914d\u7f6e\u53c2\u6570zookeeper.set.acl\u8bbe\u7f6e\u4e3atrue\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728\u521b\u5efaznode\u65f6\u4f7f\u7528\u5b89\u5168ACL \u6267\u884c ZkSecurityMigrator \u5de5\u5177\u3002\u8981\u6267\u884c\u8be5\u5de5\u5177\uff0c\u6709\u4ee5\u4e0b\u811a\u672c\uff1abin/zookeeper-security-migration.sh\uff0c\u5176\u4e2dzookeeper.acl\u8bbe\u7f6e\u4e3asecure\u3002\u8be5\u5de5\u5177\u904d\u5386\u76f8\u5e94\u7684\u5b50\u6811\uff0c\u66f4\u6539 znode \u7684 ACL\u3002 --zk-tls-config-file <file> \u5982\u679c\u542f\u7528 mTLS\uff0c\u8bf7\u4f7f\u7528\u8be5\u9009\u9879\u3002 \u8fd8\u53ef\u4ee5\u5173\u95ed\u5b89\u5168\u96c6\u7fa4\u4e2d\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002\u4e3a\u6b64\uff0c\u8bf7\u6309\u7167\u4e0b\u5217\u6b65\u9aa4\u64cd\u4f5c\uff1a \u5bf9\u4ee3\u7406\u6267\u884c\u6eda\u52a8\u91cd\u542f\uff0c\u8bbe\u7f6e JAAS \u767b\u5f55\u6587\u4ef6\u548c/\u6216\u5b9a\u4e49 ZooKeeper \u53cc\u5411 TLS \u914d\u7f6e\uff0c\u8fd9\u4f7f\u4ee3\u7406\u80fd\u591f\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f46\u5c06Zookeeper.set.acl\u8bbe\u7f6e\u4e3a false\u3002\u5728\u6eda\u52a8\u91cd\u542f\u7ed3\u675f\u65f6\uff0c\u4ee3\u7406\u505c\u6b62\u4f7f\u7528\u5b89\u5168 ACL \u521b\u5efa znode\uff0c\u4f46\u4ecd\u7136\u80fd\u591f\u9a8c\u8bc1\u548c\u64cd\u4f5c\u6240\u6709 znode \u6267\u884c ZkSecurityMigrator \u5de5\u5177\u3002\u8981\u6267\u884c\u8be5\u5de5\u5177\uff0c\u8bf7\u8fd0\u884c\u6b64\u811a\u672cbin/zookeeper-security-migration.sh\uff0c\u5e76\u5c06Zookeeper.acl\u8bbe\u7f6e\u4e3a\u4e0d\u5b89\u5168\u3002\u8be5\u5de5\u5177\u904d\u5386\u76f8\u5e94\u7684\u5b50\u6811\uff0c\u66f4\u6539 znode \u7684 ACL\u3002 --zk-tls-config-file <file> \u5982\u679c\u9700\u8981\u8bbe\u7f6e TLS \u914d\u7f6e\uff0c\u8bf7\u4f7f\u7528\u8be5\u9009\u9879\u3002 \u5982\u679c\u8981\u7981\u7528 mTLS\uff0c\u8bf7\u5728 ZooKeeper \u4e2d\u542f\u7528\u975e TLS \u7aef\u53e3 \u5bf9\u4ee3\u7406\u6267\u884c\u7b2c\u4e8c\u6b21\u6eda\u52a8\u91cd\u542f\uff0c\u8fd9\u6b21\u7701\u7565\u8bbe\u7f6e JAAS \u767b\u5f55\u6587\u4ef6\u7684\u7cfb\u7edf\u5c5e\u6027\u548c/\u6216\u6839\u636e\u9700\u8981\u5220\u9664 ZooKeeper \u53cc\u5411 TLS \u914d\u7f6e\uff08\u5305\u62ec\u8fde\u63a5\u5230\u672a\u542f\u7528 TLS \u7684 ZooKeeper \u7aef\u53e3\uff09 \u5982\u679c\u8981\u7981\u7528 mTLS\uff0c\u8bf7\u5728 ZooKeeper \u4e2d\u7981\u7528 TLS \u7aef\u53e3 \u4ee5\u4e0b\u662f\u5982\u4f55\u8fd0\u884c\u8fc1\u79fb\u5de5\u5177\u7684\u793a\u4f8b\uff1a > bin/zookeeper-security-migration.sh --zookeeper.acl=secure --zookeeper.connect=localhost:2181 \u8fd0\u884c\u6b64\u547d\u4ee4\u4ee5\u67e5\u770b\u5b8c\u6574\u7684\u53c2\u6570\u5217\u8868\uff1a > bin/zookeeper-security-migration.sh --help 7.7.3 \u8fc1\u79fb ZooKeeper \u6574\u4f53 \u8fd8\u9700\u8981\u5728 ZooKeeper \u6574\u4f53\u4e0a\u542f\u7528 SASL \u548c/\u6216 mTLS \u8eab\u4efd\u9a8c\u8bc1\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u9700\u8981\u6267\u884c\u670d\u52a1\u5668\u7684\u6eda\u52a8\u91cd\u65b0\u542f\u52a8\u5e76\u8bbe\u7f6e\u4e00\u4e9b\u5c5e\u6027\u3002\u6709\u5173 mTLS \u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0a\u6587\u3002\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u8003 ZooKeeper \u6587\u6863\uff1a Apache ZooKeeper \u6587\u6863 Apache ZooKeeper \u7ef4\u57fa 7.7.4 ZooKeeper \u4ef2\u88c1\u76f8\u4e92 TLS \u8ba4\u8bc1 \u53ef\u4ee5\u5728 ZooKeeper \u670d\u52a1\u5668\u672c\u8eab\u4e4b\u95f4\u542f\u7528 mTLS \u8eab\u4efd\u9a8c\u8bc1\u3002\u8bf7\u53c2\u9605 ZooKeeper \u6587\u6863 \u4ee5\u83b7\u53d6\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002 7.8 ZooKeeper\u52a0\u5bc6 \u4f7f\u7528\u53cc\u5411 TLS \u7684 ZooKeeper \u8fde\u63a5\u662f\u52a0\u5bc6\u7684\u3002\u4ece ZooKeeper 3.5.7 \u7248\uff08Kafka 2.5 \u7248\u9644\u5e26\u7684\u7248\u672c\uff09\u5f00\u59cb\uff0cZooKeeper \u652f\u6301\u670d\u52a1\u5668\u7aef\u914d\u7f6e ssl.clientAuth\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff1awant / need / none\u662f\u6709\u6548\u9009\u9879\uff0c\u9ed8\u8ba4\u4e3aneed\uff09\uff0c\u5e76\u8bbe\u7f6e\u6b64ZooKeeper \u4e2d\u7684\u503c\u4e3anone\u5141\u8bb8\u5ba2\u6237\u7aef\u901a\u8fc7 TLS \u52a0\u5bc6\u8fde\u63a5\u8fdb\u884c\u8fde\u63a5\uff0c\u800c\u65e0\u9700\u63d0\u4f9b\u81ea\u5df1\u7684\u8bc1\u4e66\u3002\u4ee5\u4e0b\u662f\u4ec5\u4f7f\u7528 TLS \u52a0\u5bc6\u8fde\u63a5\u5230 ZooKeeper \u7684 Kafka Broker \u914d\u7f6e\u793a\u4f8b\uff08\u90e8\u5206\uff09\u3002 \u8fd9\u4e9b\u914d\u7f6e\u5728\u4e0a\u9762\u7684Broker Configs \u4e2d\u6709\u63cf\u8ff0\u3002 # connect to the ZooKeeper port configured for TLS zookeeper.connect=zk1:2182,zk2:2182,zk3:2182 # required to use TLS to ZooKeeper (default is false) zookeeper.ssl.client.enable=true # required to use TLS to ZooKeeper zookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty # define trust stores to use TLS to ZooKeeper; ignored unless zookeeper.ssl.client.enable=true # no need to set keystore information assuming ssl.clientAuth=none on ZooKeeper zookeeper.ssl.truststore.location=/path/to/kafka/truststore.jks zookeeper.ssl.truststore.password=kafka-ts-passwd # tell broker to create ACLs on znodes (if using SASL authentication, otherwise do not set this) zookeeper.set.acl=true","title":"7. \u5b89\u5168"},{"location":"7/#7","text":"","title":"7. \u5b89\u5168"},{"location":"7/#71","text":"\u5728\u7248\u672c 0.9.0.0 \u4e2d\uff0cKafka \u793e\u533a\u6dfb\u52a0\u4e86\u8bb8\u591a\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u5355\u72ec\u6216\u4e00\u8d77\u4f7f\u7528\u53ef\u4ee5\u63d0\u9ad8 Kafka \u96c6\u7fa4\u7684\u5b89\u5168\u6027\u3002\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u5b89\u5168\u63aa\u65bd\uff1a \u4f7f\u7528 SSL \u6216 SASL \u5bf9\u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff09\u3001\u5176\u4ed6\u4ee3\u7406\u548c\u5de5\u5177\u4e0e\u4ee3\u7406\u7684\u8fde\u63a5\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002Kafka\u652f\u6301\u4ee5\u4e0bSASL\u673a\u5236\uff1a SASL/GSSAPI (Kerberos) - \u4ece\u7248\u672c 0.9.0.0 \u5f00\u59cb SASL/PLAIN - \u4ece\u7248\u672c 0.10.0.0 \u5f00\u59cb SASL/SCRAM-SHA-256 \u548c SASL/SCRAM-SHA-512 - \u4ece\u7248\u672c 0.10.2.0 \u5f00\u59cb SASL/OAUTHBEARER - \u4ece\u7248\u672c 2.0 \u5f00\u59cb \u4ece\u4ee3\u7406\u5230 ZooKeeper \u7684\u8fde\u63a5\u8eab\u4efd\u9a8c\u8bc1 \u4f7f\u7528 SSL \u5bf9\u4ee3\u7406\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u3001\u4ee3\u7406\u4e4b\u95f4\u6216\u4ee3\u7406\u548c\u5de5\u5177\u4e4b\u95f4\u4f20\u8f93\u7684\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff08\u8bf7\u6ce8\u610f\uff0c\u542f\u7528 SSL \u65f6\u4f1a\u51fa\u73b0\u6027\u80fd\u4e0b\u964d\uff0c\u5176\u7a0b\u5ea6\u53d6\u51b3\u4e8e CPU \u7c7b\u578b\u548c JVM \u5b9e\u73b0\u3002\uff09 \u5ba2\u6237\u7aef\u8bfb/\u5199\u64cd\u4f5c\u7684\u6388\u6743 \u6388\u6743\u53ef\u63d2\u62d4\uff0c\u652f\u6301\u4e0e\u5916\u90e8\u6388\u6743\u670d\u52a1\u96c6\u6210 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5b89\u5168\u6027\u662f\u53ef\u9009\u7684 - \u652f\u6301\u975e\u5b89\u5168\u96c6\u7fa4\uff0c\u4ee5\u53ca\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u3001\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u548c\u975e\u52a0\u5bc6\u5ba2\u6237\u7aef\u7684\u6df7\u5408\u3002\u4ee5\u4e0b\u6307\u5357\u89e3\u91ca\u4e86\u5982\u4f55\u5728\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u4e2d\u914d\u7f6e\u548c\u4f7f\u7528\u5b89\u5168\u529f\u80fd\u3002","title":"7.1 \u5b89\u5168\u6982\u8ff0"},{"location":"7/#72","text":"\u4e3a\u4e86\u4fdd\u62a4 Kafka \u96c6\u7fa4\u7684\u5b89\u5168\uff0c\u6709\u5fc5\u8981\u4fdd\u62a4\u7528\u4e8e\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\u7684\u901a\u9053\u7684\u5b89\u5168\u3002\u6bcf\u4e2a\u670d\u52a1\u5668\u5fc5\u987b\u5b9a\u4e49\u4e00\u7ec4\u4fa6\u542c\u5668\uff0c\u7528\u4e8e\u63a5\u6536\u6765\u81ea\u5ba2\u6237\u7aef\u4ee5\u53ca\u5176\u4ed6\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u3002\u6bcf\u4e2a\u76d1\u542c\u5668\u53ef\u4ee5\u88ab\u914d\u7f6e\u4e3a\u4f7f\u7528\u5404\u79cd\u673a\u5236\u6765\u9a8c\u8bc1\u5ba2\u6237\u7aef\u5e76\u786e\u4fdd\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u6d41\u91cf\u88ab\u52a0\u5bc6\u3002\u672c\u8282\u63d0\u4f9b\u4fa6\u542c\u5668\u914d\u7f6e\u7684\u5165\u95e8\u77e5\u8bc6\u3002 Kafka \u670d\u52a1\u5668\u652f\u6301\u4fa6\u542c\u591a\u4e2a\u7aef\u53e3\u4e0a\u7684\u8fde\u63a5\u3002\u8fd9\u662f\u901a\u8fc7 listeners \u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u7684\u5c5e\u6027\u8fdb\u884c\u914d\u7f6e\u7684\uff0c\u8be5\u5c5e\u6027\u63a5\u53d7\u8981\u542f\u7528\u7684\u4fa6\u542c\u5668\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u5fc5\u987b\u81f3\u5c11\u5b9a\u4e49\u4e00\u4e2a\u4fa6\u542c\u5668\u3002\u4e2d\u5b9a\u4e49\u7684\u6bcf\u4e2a\u76d1\u542c\u5668\u7684\u683c\u5f0f listeners \u5982\u4e0b\uff1a {LISTENER_NAME}://{hostname}:{port} \u901a\u5e38 LISTENER_NAME \u662f\u4e00\u4e2a\u63cf\u8ff0\u6027\u540d\u79f0\uff0c\u5b9a\u4e49\u4e86\u4fa6\u542c\u5668\u7684\u76ee\u7684\u3002\u4f8b\u5982\uff0c\u8bb8\u591a\u914d\u7f6e\u5bf9\u5ba2\u6237\u7aef\u6d41\u91cf\u4f7f\u7528\u5355\u72ec\u7684\u4fa6\u542c\u5668\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u80fd\u4f1a\u5f15\u7528 CLIENT \u914d\u7f6e\u4e2d\u76f8\u5e94\u7684\u4fa6\u542c\u5668\uff1a listeners=CLIENT://localhost:9092 \u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u5b89\u5168\u534f\u8bae\u5728\u5355\u72ec\u7684\u914d\u7f6e\u4e2d\u5b9a\u4e49\uff1a listener.security.protocol.map \u3002\u8be5\u503c\u662f\u6620\u5c04\u5230\u5176\u5b89\u5168\u534f\u8bae\u7684\u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u503c\u914d\u7f6e\u6307\u5b9a CLIENT \u4fa6\u542c\u5668\u5c06\u4f7f\u7528 SSL\uff0c\u800c BROKER \u4fa6\u542c\u5668\u5c06\u4f7f\u7528\u660e\u6587\u3002 listener.security.protocol.map=CLIENT:SSL,BROKER:PLAINTEXT \u4e0b\u9762\u7ed9\u51fa\u4e86\u5b89\u5168\u534f\u8bae\u7684\u53ef\u80fd\u9009\u9879\uff1a PLAINTEXT SSL SASL_PLAINTEXT SASL_SSL \u660e\u6587\u534f\u8bae\u4e0d\u63d0\u4f9b\u5b89\u5168\u6027\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u4efb\u4f55\u989d\u5916\u7684\u914d\u7f6e\u3002\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\uff0c\u672c\u6587\u6863\u4ecb\u7ecd\u4e86\u5982\u4f55\u914d\u7f6e\u5176\u4f59\u534f\u8bae\u3002 \u5982\u679c\u6bcf\u4e2a\u6240\u9700\u7684\u4fa6\u542c\u5668\u4f7f\u7528\u5355\u72ec\u7684\u5b89\u5168\u534f\u8bae\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5b89\u5168\u534f\u8bae\u540d\u79f0\u4f5c\u4e3a \u4e2d\u7684\u4fa6\u542c\u5668\u540d\u79f0 listeners \u3002\u4f7f\u7528\u4e0a\u9762\u7684\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5b9a\u4e49\u8df3\u8fc7 CLIENT \u548c\u4fa6\u542c\u5668\u7684\u5b9a\u4e49\uff1a BROKER listeners=SSL://localhost:9092,PLAINTEXT://localhost:9093 \u4f46\u662f\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u4e3a\u4fa6\u542c\u5668\u63d0\u4f9b\u660e\u786e\u7684\u540d\u79f0\uff0c\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u4f7f\u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u9884\u671f\u7528\u9014\u66f4\u52a0\u6e05\u6670\u3002 inter.broker.listener.name \u5728\u6b64\u5217\u8868\u4e2d\u7684\u4fa6\u542c\u5668\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u5c06\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u4fa6\u542c\u5668\u7684\u540d\u79f0\u6765\u58f0\u660e\u7528\u4e8e\u4ee3\u7406\u95f4\u901a\u4fe1\u7684\u4fa6\u542c\u5668\u3002\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u7684\u4e3b\u8981\u76ee\u7684\u662f\u5206\u533a\u590d\u5236\u3002\u5982\u679c\u672a\u5b9a\u4e49\uff0c\u5219\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u7531 \u5b9a\u4e49\u7684\u5b89\u5168\u534f\u8bae\u786e\u5b9a security.inter.broker.protocol \uff0c\u9ed8\u8ba4\u4e3a PLAINTEXT \u3002 \u5bf9\u4e8e\u4f9d\u8d56 Zookeeper \u5b58\u50a8\u96c6\u7fa4\u5143\u6570\u636e\u7684\u9057\u7559\u96c6\u7fa4\uff0c\u53ef\u4ee5\u58f0\u660e\u4e00\u4e2a\u5355\u72ec\u7684\u4fa6\u542c\u5668\uff0c\u7528\u4e8e\u4ece\u6d3b\u52a8\u63a7\u5236\u5668\u5230\u4ee3\u7406\u7684\u5143\u6570\u636e\u4f20\u64ad\u3002\u8fd9\u662f\u7531 \u5b9a\u4e49\u7684 control.plane.listener.name \u3002\u5f53\u6d3b\u52a8\u63a7\u5236\u5668\u9700\u8981\u5c06\u5143\u6570\u636e\u66f4\u65b0\u63a8\u9001\u5230\u96c6\u7fa4\u4e2d\u7684\u4ee3\u7406\u65f6\uff0c\u5b83\u5c06\u4f7f\u7528\u6b64\u4fa6\u542c\u5668\u3002\u4f7f\u7528\u63a7\u5236\u5e73\u9762\u4fa6\u542c\u5668\u7684\u597d\u5904\u662f\u5b83\u4f7f\u7528\u5355\u72ec\u7684\u5904\u7406\u7ebf\u7a0b\uff0c\u8fd9\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u6d41\u91cf\u4e0d\u592a\u53ef\u80fd\u963b\u788d\u5143\u6570\u636e\u66f4\u6539\uff08\u4f8b\u5982\u5206\u533a\u9886\u5bfc\u8005\u548c ISR \u66f4\u65b0\uff09\u7684\u53ca\u65f6\u4f20\u64ad\u3002\u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u503c\u4e3a null\uff0c\u8fd9\u610f\u5473\u7740\u63a7\u5236\u5668\u5c06\u4f7f\u7528\u7531 inter.broker.listener \u5728 KRaft \u96c6\u7fa4\u4e2d\uff0c\u4ee3\u7406\u662f\u4efb\u4f55 broker \u542f\u7528\u4e86\u89d2\u8272\u7684\u670d\u52a1\u5668 process.roles \uff0c\u63a7\u5236\u5668\u662f\u4efb\u4f55\u542f\u7528\u4e86 controller \u89d2\u8272\u7684\u670d\u52a1\u5668\u3002\u4fa6\u542c\u5668\u914d\u7f6e\u53d6\u51b3\u4e8e\u89d2\u8272\u3002\u5b9a\u4e49\u7684\u4fa6\u542c\u5668 inter.broker.listener.name \u4e13\u95e8\u7528\u4e8e\u4ee3\u7406\u4e4b\u95f4\u7684\u8bf7\u6c42\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u63a7\u5236\u5668\u5fc5\u987b\u4f7f\u7528\u7531 controller.listener.names \u914d\u7f6e\u5b9a\u4e49\u7684\u5355\u72ec\u4fa6\u542c\u5668\u3002\u4e0d\u80fd\u5c06\u5176\u8bbe\u7f6e\u4e3a\u4e0e\u4ee3\u7406\u95f4\u4fa6\u542c\u5668\u76f8\u540c\u7684\u503c\u3002 \u63a7\u5236\u5668\u63a5\u6536\u6765\u81ea\u5176\u4ed6\u63a7\u5236\u5668\u548c\u4ee3\u7406\u7684\u8bf7\u6c42\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u670d\u52a1\u5668\u6ca1\u6709 controller \u542f\u7528\u8be5\u89d2\u8272\uff08\u5373\u5b83\u53ea\u662f\u4e00\u4e2a\u4ee3\u7406\uff09\uff0c\u5b83\u4ecd\u7136\u5fc5\u987b\u5b9a\u4e49\u63a7\u5236\u5668\u4fa6\u542c\u5668\u4ee5\u53ca\u914d\u7f6e\u5b83\u6240\u9700\u7684\u4efb\u4f55\u5b89\u5168\u5c5e\u6027\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u72ec\u7acb\u4ee3\u7406\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\uff1a process.roles=broker listeners=BROKER://localhost:9092 inter.broker.listener.name=BROKER controller.quorum.voters=0@localhost:9093 controller.listener.names=CONTROLLER listener.security.protocol.map=BROKER:SASL_SSL,CONTROLLER:SASL_SSL \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u63a7\u5236\u5668\u4fa6\u542c\u5668\u4ecd\u914d\u7f6e\u4e3a\u4f7f\u7528 SASL_SSL \u5b89\u5168\u534f\u8bae\uff0c\u4f46\u5b83\u672a\u5305\u542b\u5728\u5176\u4e2d\uff0c listeners \u56e0\u4e3a\u4ee3\u7406\u4e0d\u516c\u5f00\u63a7\u5236\u5668\u4fa6\u542c\u5668\u672c\u8eab\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5c06\u4f7f\u7528\u7684\u7aef\u53e3\u6765\u81ea controller.quorum.voters \u914d\u7f6e\uff0c\u5b83\u5b9a\u4e49\u4e86\u63a7\u5236\u5668\u7684\u5b8c\u6574\u5217\u8868\u3002 \u5bf9\u4e8e\u540c\u65f6\u542f\u7528\u4ee3\u7406\u548c\u63a7\u5236\u5668\u89d2\u8272\u7684 KRaft \u670d\u52a1\u5668\uff0c\u914d\u7f6e\u7c7b\u4f3c\u3002\u552f\u4e00\u7684\u533a\u522b\u662f\u63a7\u5236\u5668\u4fa6\u542c\u5668\u5fc5\u987b\u5305\u542b\u5728 listeners \uff1a process.roles=broker,controller listeners=BROKER://localhost:9092,CONTROLLER://localhost:9093 inter.broker.listener.name=BROKER controller.quorum.voters=0@localhost:9093 controller.listener.names=CONTROLLER listener.security.protocol.map=BROKER:SASL_SSL,CONTROLLER:SASL_SSL \u8981\u6c42\u5b9a\u4e49\u7684\u7aef\u53e3\u4e0e controller.quorum.voters \u516c\u5f00\u7684\u63a7\u5236\u5668\u4fa6\u542c\u5668\u4e4b\u4e00\u5b8c\u5168\u5339\u914d\u3002\u4f8b\u5982\uff0c\u6b64\u5904 CONTROLLER \u4fa6\u542c\u5668\u7ed1\u5b9a\u5230\u7aef\u53e3 9093\u3002 \u5b9a\u4e49\u7684\u8fde\u63a5\u5b57\u7b26\u4e32 controller.quorum.voters \u4e5f\u5fc5\u987b\u4f7f\u7528\u7aef\u53e3 9093\uff0c\u5982\u6b64\u5904\u6240\u793a\u3002 \u63a7\u5236\u5668\u5c06\u63a5\u53d7\u7531 \u5b9a\u4e49\u7684\u6240\u6709\u4fa6\u542c\u5668\u4e0a\u7684\u8bf7\u6c42 controller.listener.names \u3002\u901a\u5e38\u53ea\u6709\u4e00\u4e2a\u63a7\u5236\u5668\u4fa6\u542c\u5668\uff0c\u4f46\u4e5f\u53ef\u4ee5\u6709\u66f4\u591a\u3002\u4f8b\u5982\uff0c\u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u901a\u8fc7\u96c6\u7fa4\u6eda\u52a8\uff08\u4e00\u6b21\u6eda\u52a8\u516c\u5f00\u65b0\u76d1\u542c\u5668\uff0c\u4e00\u6b21\u6eda\u52a8\u5220\u9664\u65e7\u76d1\u542c\u5668\uff09\u5c06\u6d3b\u52a8\u4fa6\u542c\u5668\u4ece\u4e00\u4e2a\u7aef\u53e3\u6216\u5b89\u5168\u534f\u8bae\u66f4\u6539\u4e3a\u53e6\u4e00\u4e2a\u7aef\u53e3\u6216\u5b89\u5168\u534f\u8bae\u7684\u65b9\u6cd5\u3002\u5f53\u5b9a\u4e49\u4e86\u591a\u4e2a\u63a7\u5236\u5668\u4fa6\u542c\u5668\u65f6\uff0c\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u4fa6\u542c\u5668\u5c06\u7528\u4e8e\u51fa\u7ad9\u8bf7\u6c42\u3002 \u5728 Kafka \u4e2d\uff0c\u901a\u5e38\u4e3a\u5ba2\u6237\u7aef\u4f7f\u7528\u5355\u72ec\u7684\u4fa6\u542c\u5668\u3002\u8fd9\u5141\u8bb8\u96c6\u7fa4\u95f4\u4fa6\u542c\u5668\u5728\u7f51\u7edc\u7ea7\u522b\u8fdb\u884c\u9694\u79bb\u3002\u5bf9\u4e8e KRaft \u4e2d\u7684\u63a7\u5236\u5668\u4fa6\u542c\u5668\uff0c\u4fa6\u542c\u5668\u5e94\u8be5\u88ab\u9694\u79bb\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u65e0\u8bba\u5982\u4f55\u90fd\u4e0d\u4f7f\u7528\u5b83\u3002\u5ba2\u6237\u7aef\u5e94\u8be5\u8fde\u63a5\u5230\u4ee3\u7406\u4e0a\u914d\u7f6e\u7684\u4efb\u4f55\u5176\u4ed6\u4fa6\u542c\u5668\u3002\u4efb\u4f55\u7ed1\u5b9a\u5230\u63a7\u5236\u5668\u7684\u8bf7\u6c42\u90fd\u5c06\u6309 \u5982\u4e0b\u6240\u8ff0\u8f6c\u53d1 \u5728\u4ee5\u4e0b \u90e8\u5206 \u4e2d\uff0c\u672c\u6587\u6863\u4ecb\u7ecd\u5982\u4f55\u5728\u4fa6\u542c\u5668\u4e0a\u542f\u7528 SSL \u8fdb\u884c\u52a0\u5bc6\u548c\u8eab\u4efd\u9a8c\u8bc1\u3002\u540e\u7eed \u90e8\u5206 \u5c06\u4ecb\u7ecd\u4f7f\u7528 SASL \u7684\u5176\u4ed6\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u3002","title":"7.2 \u76d1\u542c\u5668\u914d\u7f6e"},{"location":"7/#73-ssl","text":"Apache Kafka \u5141\u8bb8\u5ba2\u6237\u7aef\u4f7f\u7528 SSL \u8fdb\u884c\u6d41\u91cf\u52a0\u5bc6\u548c\u8eab\u4efd\u9a8c\u8bc1\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSSL \u5904\u4e8e\u7981\u7528\u72b6\u6001\uff0c\u4f46\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6253\u5f00\u3002\u4ee5\u4e0b\u6bb5\u843d\u8be6\u7ec6\u89e3\u91ca\u4e86\u5982\u4f55\u8bbe\u7f6e\u60a8\u81ea\u5df1\u7684 PKI \u57fa\u7840\u8bbe\u65bd\u3001\u4f7f\u7528\u5b83\u6765\u521b\u5efa\u8bc1\u4e66\u4ee5\u53ca\u914d\u7f6e Kafka \u4ee5\u4f7f\u7528\u8fd9\u4e9b\u8bc1\u4e66\u3002","title":"7.3 \u4f7f\u7528 SSL \u52a0\u5bc6\u548c\u9a8c\u8bc1"},{"location":"7/#kafka-ssl","text":"\u90e8\u7f72\u4e00\u4e2a\u6216\u591a\u4e2a\u652f\u6301 SSL \u7684\u4ee3\u7406\u7684\u7b2c\u4e00\u6b65\u662f\u4e3a\u6bcf\u53f0\u670d\u52a1\u5668\u751f\u6210\u516c\u94a5/\u79c1\u94a5\u5bf9\u3002\u7531\u4e8e Kafka \u5e0c\u671b\u6240\u6709\u5bc6\u94a5\u548c\u8bc1\u4e66\u90fd\u5b58\u50a8\u5728\u5bc6\u94a5\u5e93\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u4f7f\u7528 Java \u7684 keytool \u547d\u4ee4\u6765\u5b8c\u6210\u6b64\u4efb\u52a1\u3002\u8be5\u5de5\u5177\u652f\u6301\u4e24\u79cd\u4e0d\u540c\u7684\u5bc6\u94a5\u5e93\u683c\u5f0f\uff1aJava \u7279\u5b9a\u7684 jks \u683c\u5f0f\uff08\u73b0\u5df2\u5f03\u7528\uff09\u4ee5\u53ca PKCS12\u3002\u4ece Java \u7248\u672c 9 \u5f00\u59cb\uff0cPKCS12 \u662f\u9ed8\u8ba4\u683c\u5f0f\uff0c\u4e3a\u4e86\u786e\u4fdd\u65e0\u8bba\u4f7f\u7528\u54ea\u4e2a Java \u7248\u672c\uff0c\u90fd\u4f7f\u7528\u6b64\u683c\u5f0f\uff0c\u6240\u6709\u4ee5\u4e0b\u547d\u4ee4\u90fd\u663e\u5f0f\u6307\u5b9a PKCS12 \u683c\u5f0f\u3002 > keytool -keystore {keystorefile} -alias localhost -validity {validity} -genkey -keyalg RSA -storetype pkcs12 \u4e0a\u8ff0\u547d\u4ee4\u4e2d\u9700\u8981\u6307\u5b9a\u4e24\u4e2a\u53c2\u6570\uff1a keystorefile\uff1a\u5b58\u50a8\u6b64\u4ee3\u7406\u7684\u5bc6\u94a5\uff08\u4ee5\u53ca\u540e\u6765\u7684\u8bc1\u4e66\uff09\u7684\u5bc6\u94a5\u5e93\u6587\u4ef6\u3002\u5bc6\u94a5\u5e93\u6587\u4ef6\u5305\u542b\u8be5\u4ee3\u7406\u7684\u79c1\u94a5\u548c\u516c\u94a5\uff0c\u56e0\u6b64\u9700\u8981\u4fdd\u8bc1\u5176\u5b89\u5168\u3002\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6b64\u6b65\u9aa4\u5728\u5c06\u4f7f\u7528\u5bc6\u94a5\u7684 Kafka \u4ee3\u7406\u4e0a\u8fd0\u884c\uff0c\u56e0\u4e3a\u8be5\u5bc6\u94a5\u6c38\u8fdc\u4e0d\u5e94\u8be5\u4f20\u8f93/\u79bb\u5f00\u5176\u9884\u671f\u7684\u670d\u52a1\u5668\u3002 \u6709\u6548\u6027\uff1a\u5bc6\u94a5\u7684\u6709\u6548\u65f6\u95f4\uff08\u4ee5\u5929\u4e3a\u5355\u4f4d\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e0e\u8bc1\u4e66\u7684\u6709\u6548\u671f\u4e0d\u540c\uff0c\u8bc1\u4e66\u7684\u6709\u6548\u671f\u5c06\u5728 \u7b7e\u7f72\u8bc1\u4e66 \u4e2d\u786e\u5b9a\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5\u6765\u8bf7\u6c42\u591a\u4e2a\u8bc1\u4e66\uff1a\u5982\u679c\u60a8\u7684\u5bc6\u94a5\u7684\u6709\u6548\u671f\u4e3a 10 \u5e74\uff0c\u4f46\u60a8\u7684 CA \u53ea\u4f1a\u7b7e\u7f72\u6709\u6548\u671f\u4e3a\u4e00\u5e74\u7684\u8bc1\u4e66\uff0c\u90a3\u4e48\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u60a8\u53ef\u4ee5\u5bf9 10 \u4e2a\u8bc1\u4e66\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5\u3002 \u8981\u83b7\u53d6\u53ef\u4e0e\u521a\u521a\u521b\u5efa\u7684\u79c1\u94a5\u4e00\u8d77\u4f7f\u7528\u7684\u8bc1\u4e66\uff0c\u9700\u8981\u521b\u5efa\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\u3002\u6b64\u7b7e\u540d\u8bf7\u6c42\u7531\u53d7\u4fe1\u4efb\u7684 CA \u7b7e\u540d\u540e\u4f1a\u751f\u6210\u5b9e\u9645\u8bc1\u4e66\uff0c\u7136\u540e\u53ef\u4ee5\u5c06\u5176\u5b89\u88c5\u5728\u5bc6\u94a5\u5e93\u4e2d\u5e76\u7528\u4e8e\u8eab\u4efd\u9a8c\u8bc1\u76ee\u7684\u3002 \u8981\u751f\u6210\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\uff0c\u8bf7\u5bf9\u8fc4\u4eca\u4e3a\u6b62\u521b\u5efa\u7684\u6240\u6709\u670d\u52a1\u5668\u5bc6\u94a5\u5e93\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002 > keytool -keystore server.keystore.jks -alias localhost -validity {validity} -genkey -keyalg RSA -destkeystoretype pkcs12 -ext SAN=DNS:{FQDN},IP:{IPADDRESS1} \u8be5\u547d\u4ee4\u5047\u8bbe\u60a8\u60f3\u8981\u5c06\u4e3b\u673a\u540d\u4fe1\u606f\u6dfb\u52a0\u5230\u8bc1\u4e66\u4e2d\uff0c\u5982\u679c\u4e0d\u662f\u8fd9\u79cd\u60c5\u51b5\uff0c\u60a8\u53ef\u4ee5\u7701\u7565\u6269\u5c55\u53c2\u6570 -ext SAN=DNS:{FQDN},IP:{IPADDRESS1} \u3002\u8bf7\u53c2\u9605\u4e0b\u6587\u4e86\u89e3\u66f4\u591a\u76f8\u5173\u4fe1\u606f\u3002","title":"\u4e3a\u6bcf\u4e2a Kafka \u4ee3\u7406\u751f\u6210 SSL \u5bc6\u94a5\u548c\u8bc1\u4e66"},{"location":"7/#_1","text":"\u542f\u7528\u540e\uff0c\u4e3b\u673a\u540d\u9a8c\u8bc1\u662f\u6839\u636e\u8be5\u670d\u52a1\u5668\u7684\u5b9e\u9645\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\u68c0\u67e5\u60a8\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u8bc1\u4e66\u4e2d\u7684\u5c5e\u6027\u7684\u8fc7\u7a0b\uff0c\u4ee5\u786e\u4fdd\u60a8\u786e\u5b9e\u8fde\u63a5\u5230\u6b63\u786e\u7684\u670d\u52a1\u5668\u3002 \u8fdb\u884c\u6b64\u68c0\u67e5\u7684\u4e3b\u8981\u539f\u56e0\u662f\u4e3a\u4e86\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb\u3002\u5bf9\u4e8e Kafka\uff0c\u6b64\u68c0\u67e5\u5df2\u9ed8\u8ba4\u7981\u7528\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f46\u4ece Kafka 2.0.0 \u5f00\u59cb\uff0c\u9ed8\u8ba4\u4e3a\u5ba2\u6237\u7aef\u8fde\u63a5\u4ee5\u53ca\u4ee3\u7406\u95f4\u8fde\u63a5\u542f\u7528\u670d\u52a1\u5668\u4e3b\u673a\u540d\u9a8c\u8bc1\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u6765 \u7981\u7528\u670d\u52a1\u5668\u4e3b\u673a\u540d\u9a8c\u8bc1\u3002 ssl.endpoint.identification.algorithm \u5bf9\u4e8e\u52a8\u6001\u914d\u7f6e\u7684\u4ee3\u7406\u4fa6\u542c\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u7981\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1 kafka-configs.sh \uff1a > bin/kafka-configs.sh --bootstrap-server localhost:9093 --entity-type brokers --entity-name 0 --alter --add-config \"listener.name.internal.ssl.endpoint.identification.algorithm=\" \u7b14\u8bb0\uff1a \u901a\u5e38\uff0c\u9664\u4e86\u201c\u8ba9\u5b83\u6b63\u5e38\u5de5\u4f5c\u201d\u7684\u6700\u5feb\u65b9\u6cd5\u4e4b\u5916\uff0c\u6ca1\u6709\u5145\u5206\u7684\u7406\u7531\u7981\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u7136\u540e\u627f\u8bfa\u201c\u7a0d\u540e\u6709\u66f4\u591a\u65f6\u95f4\u65f6\u4fee\u590d\u5b83\u201d\uff01 \u5982\u679c\u5728\u6b63\u786e\u7684\u65f6\u95f4\u5b8c\u6210\u6b63\u786e\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u5e76\u4e0d\u90a3\u4e48\u56f0\u96be\uff0c\u4f46\u4e00\u65e6\u96c6\u7fa4\u542f\u52a8\u5e76\u8fd0\u884c\u5c31\u4f1a\u53d8\u5f97\u66f4\u52a0\u56f0\u96be - \u5e2e\u81ea\u5df1\u4e00\u4e2a\u5fd9\uff0c\u73b0\u5728\u5c31\u505a\uff01 \u5982\u679c\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u5ba2\u6237\u7aef\u5c06\u6839\u636e\u4ee5\u4e0b\u4e24\u4e2a\u5b57\u6bb5\u4e4b\u4e00\u9a8c\u8bc1\u670d\u52a1\u5668\u7684\u5b8c\u5168\u9650\u5b9a\u57df\u540d (FQDN) \u6216 IP \u5730\u5740\uff1a \u901a\u7528\u540d\uff08\u4e2d\u6587\uff09 \u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN) \u867d\u7136 Kafka \u68c0\u67e5\u8fd9\u4e24\u4e2a\u5b57\u6bb5\uff0c\u4f46\u81ea 2000 \u5e74\u4ee5\u6765\uff0c\u4e0d\u63a8\u8350 \u4f7f\u7528\u901a\u7528\u540d\u79f0\u5b57\u6bb5\u8fdb\u884c\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c \u5e76\u4e14\u5e94\u5c3d\u53ef\u80fd\u907f\u514d\u4f7f\u7528\u3002\u6b64\u5916\uff0cSAN \u5b57\u6bb5\u66f4\u52a0\u7075\u6d3b\uff0c\u5141\u8bb8\u5728\u8bc1\u4e66\u4e2d\u58f0\u660e\u591a\u4e2a DNS \u548c IP \u6761\u76ee\u3002 \u53e6\u4e00\u4e2a\u4f18\u70b9\u662f\uff0c\u5982\u679c SAN \u5b57\u6bb5\u7528\u4e8e\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u5219\u53ef\u4ee5\u5c06\u516c\u7528\u540d\u79f0\u8bbe\u7f6e\u4e3a\u66f4\u6709\u610f\u4e49\u7684\u503c\u4ee5\u7528\u4e8e\u6388\u6743\u76ee\u7684\u3002\u7531\u4e8e\u6211\u4eec\u9700\u8981\u5c06 SAN \u5b57\u6bb5\u5305\u542b\u5728\u7b7e\u540d\u8bc1\u4e66\u4e2d\uff0c\u56e0\u6b64\u5c06\u5728\u751f\u6210\u7b7e\u540d\u8bf7\u6c42\u65f6\u6307\u5b9a\u8be5\u5b57\u6bb5\u3002\u4e5f\u53ef\u4ee5\u5728\u751f\u6210\u5bc6\u94a5\u5bf9\u65f6\u6307\u5b9a\uff0c\u4f46\u8fd9\u4e0d\u4f1a\u81ea\u52a8\u590d\u5236\u5230\u7b7e\u540d\u8bf7\u6c42\u4e2d\u3002 \u8981\u6dfb\u52a0 SAN \u5b57\u6bb5\uff0c\u8bf7\u5c06\u4ee5\u4e0b\u53c2\u6570\u9644\u52a0 -ext SAN=DNS:{FQDN},IP:{IPADDRESS} \u5230 keytool \u547d\u4ee4\uff1a > keytool -keystore server.keystore.jks -alias localhost -validity {validity} -genkey -keyalg RSA -destkeystoretype pkcs12 -ext SAN=DNS:{FQDN},IP:{IPADDRESS1}","title":"\u4e3b\u673a\u540d\u9a8c\u8bc1"},{"location":"7/#ca","text":"\u5728\u6b64\u6b65\u9aa4\u4e4b\u540e\uff0c\u96c6\u7fa4\u4e2d\u7684\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u62e5\u6709\u4e00\u4e2a\u53ef\u7528\u4e8e\u52a0\u5bc6\u6d41\u91cf\u7684\u516c\u94a5/\u79c1\u94a5\u5bf9\u548c\u4e00\u4e2a\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\uff0c\u8fd9\u662f\u521b\u5efa\u8bc1\u4e66\u7684\u57fa\u7840\u3002\u8981\u6dfb\u52a0\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\uff0c\u6b64\u7b7e\u540d\u8bf7\u6c42\u9700\u8981\u7531\u5c06\u5728\u6b64\u6b65\u9aa4\u4e2d\u521b\u5efa\u7684\u53d7\u4fe1\u4efb\u673a\u6784\u8fdb\u884c\u7b7e\u540d\u3002 \u8bc1\u4e66\u9881\u53d1\u673a\u6784 (CA) \u8d1f\u8d23\u7b7e\u7f72\u8bc1\u4e66\u3002CA \u7684\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u9881\u53d1\u62a4\u7167\u7684\u653f\u5e9c - \u653f\u5e9c\u5728\u6bcf\u672c\u62a4\u7167\u4e0a\u76d6\u7ae0\uff08\u7b7e\u540d\uff09\uff0c\u4ee5\u4f7f\u62a4\u7167\u96be\u4ee5\u4f2a\u9020\u3002\u5176\u4ed6\u653f\u5e9c\u4f1a\u9a8c\u8bc1\u5370\u7ae0\u4ee5\u786e\u4fdd\u62a4\u7167\u7684\u771f\u5b9e\u6027\u3002\u7c7b\u4f3c\u5730\uff0cCA \u5bf9\u8bc1\u4e66\u8fdb\u884c\u7b7e\u540d\uff0c\u5e76\u4e14\u5bc6\u7801\u5b66\u4fdd\u8bc1\u7b7e\u540d\u7684\u8bc1\u4e66\u5728\u8ba1\u7b97\u4e0a\u96be\u4ee5\u4f2a\u9020\u3002\u56e0\u6b64\uff0c\u53ea\u8981 CA \u662f\u771f\u6b63\u4e14\u503c\u5f97\u4fe1\u8d56\u7684\u6743\u5a01\u673a\u6784\uff0c\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u5f3a\u6709\u529b\u5730\u4fdd\u8bc1\u4ed6\u4eec\u6b63\u5728\u8fde\u63a5\u5230\u771f\u5b9e\u7684\u673a\u5668\u3002 \u5bf9\u4e8e\u672c\u6307\u5357\uff0c\u6211\u4eec\u5c06\u6210\u4e3a\u6211\u4eec\u81ea\u5df1\u7684\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u3002\u5728\u4f01\u4e1a\u73af\u5883\u4e2d\u8bbe\u7f6e\u751f\u4ea7\u96c6\u7fa4\u65f6\uff0c\u8fd9\u4e9b\u8bc1\u4e66\u901a\u5e38\u7531\u6574\u4e2a\u516c\u53f8\u4fe1\u4efb\u7684\u4f01\u4e1a CA \u7b7e\u540d\u3002\u8bf7\u53c2\u9605 \u751f\u4ea7\u4e2d\u7684\u5e38\u89c1\u9677\u9631\uff0c \u4e86\u89e3\u8fd9\u79cd\u60c5\u51b5\u4e0b\u9700\u8981\u8003\u8651\u7684\u4e00\u4e9b\u4e8b\u9879\u3002 \u7531\u4e8eOpenSSL \u4e2d\u7684 \u9519\u8bef \uff0cx509 \u6a21\u5757\u4e0d\u4f1a\u5c06\u8bf7\u6c42\u7684\u6269\u5c55\u5b57\u6bb5\u4ece CSR \u590d\u5236\u5230\u6700\u7ec8\u8bc1\u4e66\u4e2d\u3002\u7531\u4e8e\u6211\u4eec\u5e0c\u671b SAN \u6269\u5c55\u51fa\u73b0\u5728\u6211\u4eec\u7684\u8bc1\u4e66\u4e2d\u4ee5\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u4f7f\u7528 ca\u6a21\u5757\u3002 \u8fd9\u9700\u8981\u5728\u751f\u6210 CA \u5bc6\u94a5\u5bf9\u4e4b\u524d\u8fdb\u884c\u4e00\u4e9b\u989d\u5916\u7684\u914d\u7f6e\u3002 \u5c06\u4ee5\u4e0b\u5217\u8868\u4fdd\u5b58\u5230\u540d\u4e3a openssl-ca.cnf \u7684\u6587\u4ef6\u4e2d\uff0c\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u6709\u6548\u6027\u548c\u901a\u7528\u5c5e\u6027\u7684\u503c\u3002 HOME = . RANDFILE = $ENV::HOME/.rnd #################################################################### [ ca ] default_ca = CA_default # The default ca section [ CA_default ] base_dir = . certificate = $base_dir/cacert.pem # The CA certifcate private_key = $base_dir/cakey.pem # The CA private key new_certs_dir = $base_dir # Location for new certs after signing database = $base_dir/index.txt # Database index file serial = $base_dir/serial.txt # The current serial number default_days = 1000 # How long to certify for default_crl_days = 30 # How long before next CRL default_md = sha256 # Use public key default MD preserve = no # Keep passed DN ordering x509_extensions = ca_extensions # The extensions to add to the cert email_in_dn = no # Don't concat the email in the DN copy_extensions = copy # Required to copy SANs from CSR to cert #################################################################### [ req ] default_bits = 4096 default_keyfile = cakey.pem distinguished_name = ca_distinguished_name x509_extensions = ca_extensions string_mask = utf8only #################################################################### [ ca_distinguished_name ] countryName = Country Name (2 letter code) countryName_default = DE stateOrProvinceName = State or Province Name (full name) stateOrProvinceName_default = Test Province localityName = Locality Name (eg, city) localityName_default = Test Town organizationName = Organization Name (eg, company) organizationName_default = Test Company organizationalUnitName = Organizational Unit (eg, division) organizationalUnitName_default = Test Unit commonName = Common Name (e.g. server FQDN or YOUR name) commonName_default = Test Name emailAddress = Email Address emailAddress_default = test@test.com #################################################################### [ ca_extensions ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always, issuer basicConstraints = critical, CA:true keyUsage = keyCertSign, cRLSign #################################################################### [ signing_policy ] countryName = optional stateOrProvinceName = optional localityName = optional organizationName = optional organizationalUnitName = optional commonName = supplied emailAddress = optional #################################################################### [ signing_req ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer basicConstraints = CA:FALSE keyUsage = digitalSignature, keyEncipherment \u7136\u540e\u521b\u5efa\u6570\u636e\u5e93\u548c\u5e8f\u5217\u53f7\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u5c06\u7528\u4e8e\u8ddf\u8e2a\u4f7f\u7528\u8be5 CA \u7b7e\u7f72\u7684\u8bc1\u4e66\u3002\u8fd9\u4e24\u4e2a\u6587\u4ef6\u90fd\u662f\u7b80\u5355\u7684\u6587\u672c\u6587\u4ef6\uff0c\u4e0e\u60a8\u7684 CA \u5bc6\u94a5\u4f4d\u4e8e\u540c\u4e00\u76ee\u5f55\u4e2d\u3002 > echo 01 > serial.txt > touch index.txt \u5b8c\u6210\u8fd9\u4e9b\u6b65\u9aa4\u540e\uff0c\u60a8\u73b0\u5728\u5c31\u53ef\u4ee5\u751f\u6210 CA\uff0c\u7a0d\u540e\u5c06\u4f7f\u7528\u8be5 CA \u6765\u7b7e\u7f72\u8bc1\u4e66\u3002 > openssl req -x509 -config openssl-ca.cnf -newkey rsa:4096 -sha256 -nodes -out cacert.pem -outform PEM CA \u53ea\u662f\u4e00\u4e2a\u7531\u81ea\u8eab\u7b7e\u540d\u7684\u516c\u94a5/\u79c1\u94a5\u5bf9\u548c\u8bc1\u4e66\uff0c\u4ec5\u7528\u4e8e\u7b7e\u7f72\u5176\u4ed6\u8bc1\u4e66\u3002 \u8be5\u5bc6\u94a5\u5bf9\u5e94\u8be5\u4fdd\u6301\u975e\u5e38\u5b89\u5168\uff0c\u5982\u679c\u6709\u4eba\u8bbf\u95ee\u5b83\uff0c\u4ed6\u4eec\u53ef\u4ee5\u521b\u5efa\u5e76\u7b7e\u7f72\u60a8\u7684\u57fa\u7840\u8bbe\u65bd\u4fe1\u4efb\u7684\u8bc1\u4e66\uff0c\u8fd9\u610f\u5473\u7740\u4ed6\u4eec\u5728\u8fde\u63a5\u5230\u4fe1\u4efb\u8be5 CA \u7684\u4efb\u4f55\u670d\u52a1\u65f6\u5c06\u80fd\u591f\u5192\u5145\u4efb\u4f55\u4eba\u3002 \u4e0b\u4e00\u6b65\u662f\u5c06\u751f\u6210\u7684 CA \u6dfb\u52a0\u5230 **\u5ba2\u6237\u7aef\u7684\u4fe1\u4efb\u5e93**\uff0c\u4ee5\u4fbf\u5ba2\u6237\u7aef\u53ef\u4ee5\u4fe1\u4efb\u6b64 CA\uff1a > keytool -keystore client.truststore.jks -alias CARoot -import -file ca-cert \u6ce8\u610f\uff1a \u5982\u679c\u60a8\u901a\u8fc7\u5728 Kafka \u4ee3\u7406\u914d\u7f6e\u4e2d\u5c06 ssl.client.auth \u8bbe\u7f6e\u4e3a\u201c\u8bf7\u6c42\u201d\u6216\u201c\u5fc5\u9700\u201d\u6765\u5c06 Kafka \u4ee3\u7406\u914d\u7f6e\u4e3a\u9700\u8981\u5ba2\u6237\u7aef \u8eab\u4efd\u9a8c\u8bc1\uff0c\u90a3\u4e48\u60a8\u8fd8\u5fc5\u987b\u4e3a Kafka \u4ee3\u7406\u63d0\u4f9b\u4e00\u4e2a\u4fe1\u4efb\u5e93\uff0c\u5e76\u4e14\u5b83\u5e94\u8be5\u5305\u542b\u6240\u6709\u5185\u5bb9\u7b7e\u7f72\u5ba2\u6237\u7aef\u5bc6\u94a5\u7684 CA \u8bc1\u4e66\u3002 > keytool -keystore server.truststore.jks -alias CARoot -import -file ca-cert \u4e0e\u6b65\u9aa4 1 \u4e2d\u5b58\u50a8\u6bcf\u53f0\u8ba1\u7b97\u673a\u81ea\u5df1\u7684\u8eab\u4efd\u7684\u5bc6\u94a5\u5e93\u4e0d\u540c\uff0c\u5ba2\u6237\u7aef\u7684\u4fe1\u4efb\u5e93\u5b58\u50a8\u5ba2\u6237\u7aef\u5e94\u8be5\u4fe1\u4efb\u7684\u6240\u6709\u8bc1\u4e66\u3002\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230\u4fe1\u4efb\u5e93\u4e2d\u8fd8\u610f\u5473\u7740\u4fe1\u4efb\u7531\u8be5\u8bc1\u4e66\u7b7e\u540d\u7684\u6240\u6709\u8bc1\u4e66\u3002\u6b63\u5982\u4e0a\u9762\u7684\u7c7b\u6bd4\uff0c\u4fe1\u4efb\u653f\u5e9c\uff08CA\uff09\u4e5f\u610f\u5473\u7740\u4fe1\u4efb\u5176\u9881\u53d1\u7684\u6240\u6709\u62a4\u7167\uff08\u8bc1\u4e66\uff09\u3002\u8be5\u5c5e\u6027\u79f0\u4e3a\u4fe1\u4efb\u94fe\uff0c\u5728\u5927\u578b Kafka \u96c6\u7fa4\u4e0a\u90e8\u7f72 SSL \u65f6\u7279\u522b\u6709\u7528\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u5355\u4e2a CA \u7b7e\u7f72\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8bc1\u4e66\uff0c\u5e76\u8ba9\u6240\u6709\u8ba1\u7b97\u673a\u5171\u4eab\u4fe1\u4efb\u8be5 CA \u7684\u540c\u4e00\u4fe1\u4efb\u5e93\u3002\u8fd9\u6837\u6240\u6709\u673a\u5668\u90fd\u53ef\u4ee5\u9a8c\u8bc1\u6240\u6709\u5176\u4ed6\u673a\u5668\u3002","title":"\u521b\u5efa\u60a8\u81ea\u5df1\u7684 CA"},{"location":"7/#_2","text":"\u7136\u540e\u4f7f\u7528 CA \u5bf9\u5176\u8fdb\u884c\u7b7e\u540d\uff1a > openssl ca -config openssl-ca.cnf -policy signing_policy -extensions signing_req -out {server certificate} -infiles {certificate signing request} \u6700\u540e\uff0c\u60a8\u9700\u8981\u5c06 CA \u7684\u8bc1\u4e66\u548c\u7b7e\u540d\u7684\u8bc1\u4e66\u5bfc\u5165\u5bc6\u94a5\u5e93\uff1a > keytool -keystore {keystore} -alias CARoot -import -file {CA certificate} > keytool -keystore {keystore} -alias localhost -import -file cert-signed \u53c2\u6570\u5b9a\u4e49\u5982\u4e0b\uff1a keystore\uff1a\u5bc6\u94a5\u5e93\u7684\u4f4d\u7f6e CA\u8bc1\u4e66\uff1aCA\u7684\u8bc1\u4e66 \u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\uff1a\u4f7f\u7528\u670d\u52a1\u5668\u5bc6\u94a5\u521b\u5efa\u7684 csr \u670d\u52a1\u5668\u8bc1\u4e66\uff1a\u7528\u4e8e\u5199\u5165\u670d\u52a1\u5668\u7b7e\u540d\u8bc1\u4e66\u7684\u6587\u4ef6 \u8fd9\u5c06\u4e3a\u60a8\u7559\u4e0b\u4e00\u4e2a\u540d\u4e3a truststore.jks \u7684\u4fe1\u4efb\u5e93- \u8fd9\u5bf9\u4e8e\u6240\u6709\u5ba2\u6237\u548c\u7ecf\u7eaa\u5546\u6765\u8bf4\u90fd\u662f\u76f8\u540c\u7684\uff0c\u5e76\u4e14\u4e0d\u5305\u542b\u4efb\u4f55\u654f\u611f\u4fe1\u606f\uff0c\u56e0\u6b64\u65e0\u9700\u4fdd\u62a4\u8fd9\u4e00\u70b9\u3002 \u6b64\u5916\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u6709\u4e00\u4e2a server.keystore.jks \u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u8282\u70b9\u5bc6\u94a5\u3001\u8bc1\u4e66\u548c CA \u8bc1\u4e66\uff0c\u8bf7\u53c2\u9605 \u914d\u7f6e Kafka \u4ee3\u7406 \u548c \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u4ee5\u83b7\u53d6\u6709\u5173\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u6587\u4ef6\u7684\u4fe1\u606f\u3002 \u6709\u5173\u6b64\u4e3b\u9898\u7684\u4e00\u4e9b\u5de5\u5177\u5e2e\u52a9\uff0c\u8bf7\u67e5\u770b easyRSA \u9879\u76ee\uff0c\u8be5\u9879\u76ee\u5177\u6709\u4e30\u5bcc\u7684\u811a\u672c\u6765\u5e2e\u52a9\u5b8c\u6210\u8fd9\u4e9b\u6b65\u9aa4\u3002","title":"\u7b7e\u7f72\u8bc1\u4e66"},{"location":"7/#pem-ssl","text":"\u4ece 2.7.0 \u5f00\u59cb\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 PEM \u683c\u5f0f\u7684\u914d\u7f6e\u4e2d\u4e3a Kafka \u4ee3\u7406\u548c\u5ba2\u6237\u7aef\u914d\u7f6e SSL \u5bc6\u94a5\u548c\u4fe1\u4efb\u5b58\u50a8\u3002\u8fd9\u907f\u514d\u4e86\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u5b58\u50a8\u5355\u72ec\u6587\u4ef6\u7684\u9700\u8981\uff0c\u5e76\u53d7\u76ca\u4e8e Kafka \u914d\u7f6e\u7684\u5bc6\u7801\u4fdd\u62a4\u529f\u80fd\u3002\u9664\u4e86 JKS \u548c PKCS12 \u4e4b\u5916\uff0cPEM \u8fd8\u53ef\u4ee5\u7528\u4f5c\u57fa\u4e8e\u6587\u4ef6\u7684\u5bc6\u94a5\u548c\u4fe1\u4efb\u5b58\u50a8\u7684\u5b58\u50a8\u7c7b\u578b\u3002\u8981\u76f4\u63a5\u5728\u4ee3\u7406\u6216\u5ba2\u6237\u7aef\u914d\u7f6e\u4e2d\u914d\u7f6e PEM \u5bc6\u94a5\u5b58\u50a8\uff0c\u5e94\u5728 \u4e2d\u63d0\u4f9b PEM \u683c\u5f0f\u7684\u79c1\u94a5\uff0c ssl.keystore.key \u5e76\u5e94\u5728 \u4e2d\u63d0\u4f9b PEM \u683c\u5f0f\u7684\u8bc1\u4e66\u94fe ssl.keystore.certificate.chain \u3002\u8981\u914d\u7f6e\u4fe1\u4efb\u5b58\u50a8\uff0c\u5e94\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u63d0\u4f9b\u4fe1\u4efb\u8bc1\u4e66\uff0c\u4f8b\u5982 CA \u7684\u516c\u5171\u8bc1\u4e66 ssl.truststore.certificates \u3002\u7531\u4e8e PEM \u901a\u5e38\u5b58\u50a8\u4e3a\u591a\u884c base-64 \u5b57\u7b26\u4e32\uff0c\u56e0\u6b64\u914d\u7f6e\u503c\u53ef\u4ee5\u4f5c\u4e3a\u591a\u884c\u5b57\u7b26\u4e32\u5305\u542b\u5728 Kafka \u914d\u7f6e\u4e2d\uff0c\u5176\u4e2d\u884c\u4ee5\u53cd\u659c\u6760 ('\\') \u7ed3\u5c3e\u4ee5\u7ee7\u7eed\u884c\u3002 \u5b58\u50a8\u5bc6\u7801\u914d\u7f6e ssl.keystore.password \uff0c ssl.truststore.password \u4e0d\u7528\u4e8e PEM\u3002\u5982\u679c\u79c1\u94a5\u4f7f\u7528\u5bc6\u7801\u52a0\u5bc6\uff0c\u5219\u5fc5\u987b\u5728 \u4e2d\u63d0\u4f9b\u5bc6\u94a5\u5bc6\u7801 ssl.key.password \u3002\u79c1\u94a5\u53ef\u4ee5\u4ee5\u672a\u52a0\u5bc6\u7684\u5f62\u5f0f\u63d0\u4f9b\uff0c\u65e0\u9700\u5bc6\u7801\u3002\u5728\u751f\u4ea7\u90e8\u7f72\u4e2d\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u4f7f\u7528 Kafka \u4e2d\u7684\u5bc6\u7801\u4fdd\u62a4\u529f\u80fd\u5bf9\u914d\u7f6e\u8fdb\u884c\u52a0\u5bc6\u6216\u5916\u90e8\u5316\u3002\u8bf7\u6ce8\u610f\uff0c\u5f53\u4f7f\u7528 OpenSSL \u7b49\u5916\u90e8\u5de5\u5177\u8fdb\u884c\u52a0\u5bc6\u65f6\uff0c\u9ed8\u8ba4 SSL \u5f15\u64ce\u5de5\u5382\u5bf9\u52a0\u5bc6\u79c1\u94a5\u7684\u89e3\u5bc6\u529f\u80fd\u6709\u9650\u3002BouncyCastle \u7b49\u7b2c\u4e09\u65b9\u5e93\u53ef\u4ee5\u4e0e\u81ea\u5b9a\u4e49\u96c6\u6210\uff0c SslEngineFactory \u4ee5\u652f\u6301\u66f4\u5e7f\u6cdb\u7684\u52a0\u5bc6\u79c1\u94a5\u3002","title":"PEM \u683c\u5f0f\u7684 SSL \u5bc6\u94a5\u548c\u8bc1\u4e66"},{"location":"7/#_3","text":"\u4e0a\u9762\u7684\u6bb5\u843d\u5c55\u793a\u4e86\u521b\u5efa\u60a8\u81ea\u5df1\u7684 CA \u5e76\u4f7f\u7528\u5b83\u4e3a\u60a8\u7684\u96c6\u7fa4\u7b7e\u7f72\u8bc1\u4e66\u7684\u8fc7\u7a0b\u3002\u867d\u7136\u5bf9\u4e8e\u6c99\u7bb1\u3001\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u7c7b\u4f3c\u7cfb\u7edf\u975e\u5e38\u6709\u7528\uff0c\u4f46\u8fd9\u901a\u5e38\u4e0d\u662f\u5728\u4f01\u4e1a\u73af\u5883\u4e2d\u4e3a\u751f\u4ea7\u96c6\u7fa4\u521b\u5efa\u8bc1\u4e66\u7684\u6b63\u786e\u8fc7\u7a0b\u3002\u4f01\u4e1a\u901a\u5e38\u4f1a\u8fd0\u8425\u81ea\u5df1\u7684CA\uff0c\u7528\u6237\u53ef\u4ee5\u53d1\u9001CSR\u6765\u4e0e\u8be5CA\u7b7e\u7f72\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u7528\u6237\u65e0\u9700\u8d1f\u8d23\u4fdd\u8bc1CA\u7684\u5b89\u5168\uff0c\u5e76\u4e14\u6709\u4e00\u4e2a\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u4fe1\u4efb\u7684\u4e2d\u592e\u6743\u5a01\u3002\u7136\u800c\uff0c\u5b83\u4e5f\u5265\u593a\u4e86\u7528\u6237\u5bf9\u8bc1\u4e66\u7b7e\u540d\u8fc7\u7a0b\u7684\u5f88\u591a\u63a7\u5236\u6743\u3002 1. \u6269\u5c55\u5bc6\u94a5\u4f7f\u7528 \u8bc1\u4e66\u53ef\u80fd\u5305\u542b\u63a7\u5236\u8bc1\u4e66\u4f7f\u7528\u76ee\u7684\u7684\u6269\u5c55\u5b57\u6bb5\u3002\u5982\u679c\u6b64\u5b57\u6bb5\u4e3a\u7a7a\uff0c\u5219\u5bf9\u4f7f\u7528\u6ca1\u6709\u9650\u5236\uff0c\u4f46\u5982\u679c\u6b64\u5904\u6307\u5b9a\u4e86\u4efb\u4f55\u4f7f\u7528\uff0c\u5219\u6709\u6548\u7684 SSL \u5b9e\u73b0\u5fc5\u987b\u5f3a\u5236\u6267\u884c\u8fd9\u4e9b\u4f7f\u7528\u3002 Kafka\u7684\u76f8\u5173\u7528\u6cd5\u6709\uff1a * \u5ba2\u6237\u7aef\u8ba4\u8bc1 * \u670d\u52a1\u5668\u8ba4\u8bc1 Kafka \u4ee3\u7406\u9700\u8981\u5141\u8bb8\u8fd9\u4e24\u79cd\u7528\u6cd5\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u96c6\u7fa4\u5185\u901a\u4fe1\uff0c\u6bcf\u4e2a\u4ee3\u7406\u5c06\u540c\u65f6\u5145\u5f53\u5176\u4ed6\u4ee3\u7406\u7684\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u3002\u4f01\u4e1a CA \u62e5\u6709 Web \u670d\u52a1\u5668\u7684\u7b7e\u540d\u914d\u7f6e\u6587\u4ef6\u5e76\u5c06\u5176\u7528\u4e8e Kafka \u7684\u60c5\u51b5\u5e76\u4e0d\u7f55\u89c1\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4ec5\u5305\u542b serverAuth*\u4f7f\u7528*\u503c\u5e76\u5bfc\u81f4 SSL \u63e1\u624b\u5931\u8d25\u3002 \u51fa\u4e8e\u5b89\u5168\u539f\u56e0\uff0c\u4e2d\u95f4\u8bc1\u4e66 \u4f01\u4e1a\u6839 CA \u901a\u5e38\u4fdd\u6301\u79bb\u7ebf\u72b6\u6001\u3002\u4e3a\u4e86\u5b9e\u73b0\u65e5\u5e38\u4f7f\u7528\uff0c\u521b\u5efa\u4e86\u6240\u8c13\u7684\u4e2d\u95f4 CA\uff0c\u7136\u540e\u4f7f\u7528\u5b83\u4eec\u6765\u7b7e\u7f72\u6700\u7ec8\u8bc1\u4e66\u3002\u5c06\u7531\u4e2d\u95f4 CA \u7b7e\u540d\u7684\u8bc1\u4e66\u5bfc\u5165\u5bc6\u94a5\u5e93\u65f6\uff0c\u6709\u5fc5\u8981\u63d0\u4f9b\u76f4\u81f3\u6839 CA \u7684\u6574\u4e2a\u4fe1\u4efb\u94fe\u3002\u53ea\u9700\u5c06\u8bc1\u4e66\u6587\u4ef6\u5408\u5e76\u5230\u4e00\u4e2a\u7ec4\u5408\u8bc1\u4e66\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u4f7f\u7528 keytool \u5bfc\u5165\u8be5\u6587\u4ef6\u5373\u53ef\u5b8c\u6210\u6b64 \u64cd\u4f5c \u3002 \u65e0\u6cd5\u590d\u5236\u6269\u5c55\u5b57\u6bb5 CA \u8fd0\u8425\u5546\u901a\u5e38\u4e0d\u613f\u610f\u4ece CSR \u590d\u5236\u548c\u8bf7\u6c42\u6269\u5c55\u5b57\u6bb5\uff0c\u800c\u662f\u66f4\u613f\u610f\u81ea\u5df1\u6307\u5b9a\u8fd9\u4e9b\u5b57\u6bb5\uff0c\u56e0\u4e3a\u8fd9\u4f7f\u5f97\u6076\u610f\u65b9\u66f4\u96be\u83b7\u53d6\u5177\u6709\u6f5c\u5728\u8bef\u5bfc\u6027\u6216\u6b3a\u8bc8\u6027\u503c\u7684\u8bc1\u4e66\u3002\u5efa\u8bae\u4ed4\u7ec6\u68c0\u67e5\u7b7e\u540d\u8bc1\u4e66\uff0c\u8fd9\u4e9b\u8bc1\u4e66\u662f\u5426\u5305\u542b\u6240\u6709\u8bf7\u6c42\u7684 SAN \u5b57\u6bb5\u4ee5\u542f\u7528\u6b63\u786e\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u3002\u4ee5\u4e0b\u547d\u4ee4\u53ef\u7528\u4e8e\u5c06\u8bc1\u4e66\u8be6\u7ec6\u4fe1\u606f\u6253\u5370\u5230\u63a7\u5236\u53f0\uff0c\u8be5\u8be6\u7ec6\u4fe1\u606f\u5e94\u4e0e\u6700\u521d\u8bf7\u6c42\u7684\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\uff1a > openssl x509 -in certificate.crt -text -noout","title":"\u751f\u4ea7\u4e2d\u5e38\u89c1\u7684\u9677\u9631"},{"location":"7/#kafka","text":"\u5982\u679c\u6ca1\u6709\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u542f\u7528 SSL\uff08\u8bf7\u53c2\u9605\u4e0b\u6587\u4e86\u89e3\u5982\u4f55\u542f\u7528\u5b83\uff09\uff0c\u5219 PLAINTEXT \u548c SSL \u7aef\u53e3\u90fd\u662f\u5fc5\u9700\u7684\u3002 listeners=PLAINTEXT://host.name:port,SSL://host.name:port \u4ee3\u7406\u7aef\u9700\u8981\u4ee5\u4e0b SSL \u914d\u7f6e ssl.keystore.location=/var/private/ssl/server.keystore.jks ssl.keystore.password=test1234 ssl.key.password=test1234 ssl.truststore.location=/var/private/ssl/server.truststore.jks ssl.truststore.password=test1234 \u6ce8\u610f\uff1assl.truststore.password \u5728\u6280\u672f\u4e0a\u662f\u53ef\u9009\u7684\uff0c\u4f46\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u4fe1\u4efb\u5e93\uff0c\u4f46\u5b8c\u6574\u6027\u68c0\u67e5\u5c06\u88ab\u7981\u7528\u3002\u503c\u5f97\u8003\u8651\u7684\u53ef\u9009\u8bbe\u7f6e\uff1a ssl.client.auth=none \uff08\u201crequired\u201d=> \u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u201crequested\u201d=> \u8bf7\u6c42\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6ca1\u6709\u8bc1\u4e66\u7684\u5ba2\u6237\u7aef\u4ecd\u7136\u53ef\u4ee5\u8fde\u63a5\u3002\u4e0d\u9f13\u52b1\u4f7f\u7528\u201crequested\u201d\uff0c\u56e0\u4e3a\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u9519\u8bef\u7684\u611f\u89c9\u5b89\u5168\u6027\u548c\u914d\u7f6e\u9519\u8bef\u7684\u5ba2\u6237\u7aef\u4ecd\u5c06\u6210\u529f\u8fde\u63a5\u3002\uff09 ssl.cipher.suites\uff08\u53ef\u9009\uff09\u3002\u5bc6\u7801\u5957\u4ef6\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u534f\u5546\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u7684\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002\uff08\u9ed8\u8ba4\u4e3a\u7a7a\u5217\u8868\uff09 ssl.enabled.protocols=TLSv1.2,TLSv1.1,TLSv1\uff08\u5217\u51fa\u60a8\u8981\u4ece\u5ba2\u6237\u7aef\u63a5\u53d7\u7684 SSL \u534f\u8bae\u3002\u8bf7\u6ce8\u610f\uff0cSSL \u5df2\u88ab\u5f03\u7528\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f TLS\uff0c\u5e76\u4e14\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528 SSL\uff09 ssl.keystore.type=JKS ssl.truststore.type=JKS ssl.secure.random.implementation=SHA1PRNG \u5982\u679c\u8981\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u542f\u7528 SSL\uff0c\u8bf7\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 server.properties \u6587\u4ef6\uff08\u9ed8\u8ba4\u4e3a PLAINTEXT\uff09 security.inter.broker.protocol=SSL \u7531\u4e8e\u67d0\u4e9b\u56fd\u5bb6/\u5730\u533a\u7684\u8fdb\u53e3\u6cd5\u89c4\uff0cOracle \u5b9e\u65bd\u9650\u5236\u4e86\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ef\u7528\u7684\u52a0\u5bc6\u7b97\u6cd5\u7684\u5f3a\u5ea6\u3002\u5982\u679c\u9700\u8981\u66f4\u5f3a\u7684\u7b97\u6cd5\uff08\u4f8b\u5982\uff0c\u5177\u6709 256 \u4f4d\u5bc6\u94a5\u7684 AES\uff09\uff0c\u5219\u5fc5\u987b\u83b7\u53d6 JCE \u65e0\u9650\u5f3a\u5ea6\u7ba1\u8f96\u7b56\u7565\u6587\u4ef6 \u5e76\u5c06\u5176\u5b89\u88c5\u5728 JDK/JRE \u4e2d\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 JCA \u63d0\u4f9b\u5546\u6587\u6863\u3002 JRE/JDK \u5c06\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684\u4f2a\u968f\u673a\u6570\u751f\u6210\u5668 (PRNG)\uff0c\u7528\u4e8e\u52a0\u5bc6\u64cd\u4f5c\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u914d\u7f6e ssl.secure.random.implementation . \u7136\u800c\uff0c\u67d0\u4e9b\u5b9e\u73b0\u5b58\u5728\u6027\u80fd\u95ee\u9898\uff08\u7279\u522b\u662f\uff0cLinux \u7cfb\u7edf\u4e0a\u9ed8\u8ba4\u9009\u62e9\u7684\uff0c NativePRNG \u4f7f\u7528\u5168\u5c40\u9501\uff09\u3002\u5982\u679c SSL \u8fde\u63a5\u7684\u6027\u80fd\u6210\u4e3a\u95ee\u9898\uff0c\u8bf7\u8003\u8651\u663e\u5f0f\u8bbe\u7f6e\u8981\u4f7f\u7528\u7684\u5b9e\u73b0\u3002\u8be5 SHA1PRNG \u5b9e\u73b0\u662f\u975e\u963b\u585e\u7684\uff0c\u5e76\u4e14\u5728\u91cd\u8d1f\u8f7d\uff0850 MB/\u79d2\u751f\u6210\u7684\u6d88\u606f\uff0c\u52a0\u4e0a\u6bcf\u4e2a\u4ee3\u7406\u7684\u590d\u5236\u6d41\u91cf\uff09\u4e0b\u8868\u73b0\u51fa\u4e86\u975e\u5e38\u597d\u7684\u6027\u80fd\u7279\u5f81\u3002 \u542f\u52a8\u4ee3\u7406\u540e\uff0c\u60a8\u5e94\u8be5\u80fd\u591f\u5728 server.log \u4e2d\u770b\u5230 with addresses: PLAINTEXT -> EndPoint(192.168.64.1,9092,PLAINTEXT),SSL -> EndPoint(192.168.64.1,9093,SSL) \u8981\u5feb\u901f\u68c0\u67e5\u670d\u52a1\u5668\u5bc6\u94a5\u5e93\u548c\u4fe1\u4efb\u5e93\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\uff0c\u60a8\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4 > openssl s_client -debug -connect localhost:9093 -tls1 \uff08\u6ce8\u610f\uff1aTLSv1 \u5e94\u5217\u5728 ssl.enabled.protocols \u4e0b\uff09 \u5728\u6b64\u547d\u4ee4\u7684\u8f93\u51fa\u4e2d\uff0c\u60a8\u5e94\u8be5\u770b\u5230\u670d\u52a1\u5668\u7684\u8bc1\u4e66\uff1a -----BEGIN CERTIFICATE----- {variable sized random bytes} -----END CERTIFICATE----- subject=/C=US/ST=CA/L=Santa Clara/O=org/OU=org/CN=Sriharsha Chintalapani issuer=/C=US/ST=CA/L=Santa Clara/O=org/OU=org/CN=kafka/emailAddress=test@test.com \u5982\u679c\u8bc1\u4e66\u672a\u663e\u793a\u6216\u5b58\u5728\u4efb\u4f55\u5176\u4ed6\u9519\u8bef\u6d88\u606f\uff0c\u5219\u8bf4\u660e\u60a8\u7684\u5bc6\u94a5\u5e93\u8bbe\u7f6e\u4e0d\u6b63\u786e\u3002 6. #### \u914d\u7f6e Kafka \u5ba2\u6237\u7aef \u4ec5\u65b0\u7684 Kafka Producer \u548c Consumer \u652f\u6301 SSL\uff0c\u4e0d\u652f\u6301\u65e7\u7684 API\u3002SSL \u914d\u7f6e\u5bf9\u4e8e\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6765\u8bf4\u90fd\u662f\u76f8\u540c\u7684\u3002 \u5982\u679c\u4ee3\u7406\u4e2d\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u4ee5\u4e0b\u662f\u6700\u5c0f\u914d\u7f6e\u793a\u4f8b\uff1a security.protocol=SSL ssl.truststore.location=/var/private/ssl/client.truststore.jks ssl.truststore.password=test1234 \u6ce8\u610f\uff1assl.truststore.password \u5728\u6280\u672f\u4e0a\u662f\u53ef\u9009\u7684\uff0c\u4f46\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u5bc6\u7801\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u4fe1\u4efb\u5e93\uff0c\u4f46\u5b8c\u6574\u6027\u68c0\u67e5\u5c06\u88ab\u7981\u7528\u3002\u5982\u679c\u9700\u8981\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u5fc5\u987b\u50cf\u6b65\u9aa4 1 \u4e2d\u90a3\u6837\u521b\u5efa\u5bc6\u94a5\u5e93\uff0c\u5e76\u4e14\u8fd8\u5fc5\u987b\u914d\u7f6e\u4ee5\u4e0b\u5185\u5bb9\uff1a ssl.keystore.location=/var/private/ssl/client.keystore.jks ssl.keystore.password=test1234 ssl.key.password=test1234 \u6839\u636e\u6211\u4eec\u7684\u8981\u6c42\u548c\u4ee3\u7406\u914d\u7f6e\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u5176\u4ed6\u914d\u7f6e\u8bbe\u7f6e\uff1a ssl.provider\uff08\u53ef\u9009\uff09\u3002\u7528\u4e8e SSL \u8fde\u63a5\u7684\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u662f JVM \u7684\u9ed8\u8ba4\u5b89\u5168\u63d0\u4f9b\u7a0b\u5e8f\u3002 ssl.cipher.suites\uff08\u53ef\u9009\uff09\u3002\u5bc6\u7801\u5957\u4ef6\u662f\u8eab\u4efd\u9a8c\u8bc1\u3001\u52a0\u5bc6\u3001MAC \u548c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u7684\u547d\u540d\u7ec4\u5408\uff0c\u7528\u4e8e\u534f\u5546\u4f7f\u7528 TLS \u6216 SSL \u7f51\u7edc\u534f\u8bae\u7684\u7f51\u7edc\u8fde\u63a5\u7684\u5b89\u5168\u8bbe\u7f6e\u3002 ssl.enabled.protocols=TLSv1.2\u3001TLSv1.1\u3001TLSv1\u3002\u5b83\u5e94\u8be5\u81f3\u5c11\u5217\u51fa\u4ee3\u7406\u7aef\u914d\u7f6e\u7684\u534f\u8bae\u4e4b\u4e00 ssl.truststore.type=JKS ssl.keystore.type=JKS \u4f7f\u7528\u63a7\u5236\u53f0\u751f\u4ea7\u8005\u548c\u63a7\u5236\u53f0\u6d88\u8d39\u8005\u7684\u793a\u4f8b\uff1a > kafka-console-producer.sh --bootstrap-server localhost:9093 --topic test --producer.config client-ssl.properties > kafka-console-consumer.sh --bootstrap-server localhost:9093 --topic test --consumer.config client-ssl.properties","title":"\u914d\u7f6e Kafka \u4ee3\u7406"},{"location":"7/#74-sasl","text":"","title":"7.4 \u4f7f\u7528 SASL \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#jaas","text":"Kafka \u4f7f\u7528 Java \u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u670d\u52a1 ( JAAS ) \u8fdb\u884c SASL \u914d\u7f6e\u3002","title":"JAAS\u914d\u7f6e"},{"location":"7/#kafka-jaas","text":"KafkaServer\u662f\u6bcf\u4e2a KafkaServer/Broker \u4f7f\u7528\u7684 JAAS \u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u540d\u79f0\u3002\u672c\u90e8\u5206\u4e3a\u4ee3\u7406\u63d0\u4f9b SASL \u914d\u7f6e\u9009\u9879\uff0c\u5305\u62ec\u4ee3\u7406\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u800c\u5efa\u7acb\u7684\u4efb\u4f55 SASL \u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u5982\u679c\u5c06\u591a\u4e2a\u4fa6\u542c\u5668\u914d\u7f6e\u4e3a\u4f7f\u7528 SASL\uff0c\u5219\u90e8\u5206\u540d\u79f0\u53ef\u4ee5\u4ee5\u5c0f\u5199\u4fa6\u542c\u5668\u540d\u79f0\u4e3a\u524d\u7f00\uff0c\u540e\u8ddf\u53e5\u70b9\uff0c\u4f8b\u5982sasl_ssl.KafkaServer\u3002 \u5ba2\u6237\u7aef\u90e8\u5206\u7528\u4e8e\u9a8c\u8bc1\u4e0e Zookeeper \u7684 SASL \u8fde\u63a5\u3002\u5b83\u8fd8\u5141\u8bb8\u4ee3\u7406\u5728 Zookeeper \u8282\u70b9\u4e0a\u8bbe\u7f6e SASL ACL\uff0c\u4ece\u800c\u9501\u5b9a\u8fd9\u4e9b\u8282\u70b9\uff0c\u4ee5\u4fbf\u53ea\u6709\u4ee3\u7406\u53ef\u4ee5\u4fee\u6539\u5b83\u3002\u6240\u6709\u7ecf\u7eaa\u5546\u5fc5\u987b\u5177\u6709\u76f8\u540c\u7684\u4e3b\u4f53\u540d\u79f0\u3002\u5982\u679c\u8981\u4f7f\u7528\u9664 Client \u4e4b\u5916\u7684\u8282\u540d\u79f0\uff0c\u8bf7\u5c06\u7cfb\u7edf\u5c5e\u6027Zookeeper.sasl.clientconfig\u8bbe\u7f6e\u4e3a\u9002\u5f53\u7684\u540d\u79f0\uff08 \u4f8b\u5982 -Dzookeeper.sasl.clientconfig=ZkClient\uff09\u3002 ZooKeeper \u9ed8\u8ba4\u4f7f\u7528\u201czookeeper\u201d\u4f5c\u4e3a\u670d\u52a1\u540d\u79f0\u3002\u5982\u679c\u8981\u66f4\u6539\u6b64\u8bbe\u7f6e\uff0c\u8bf7\u5c06\u7cfb\u7edf\u5c5e\u6027 Zookeeper.sasl.client.username\u8bbe\u7f6e\u4e3a\u9002\u5f53\u7684\u540d\u79f0\uff08\u4f8b\u5982 -Dzookeeper.sasl.client.username \\=zk\uff09\u3002 \u4ee3\u7406\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee3\u7406\u914d\u7f6e\u5c5e\u6027\u6765\u914d\u7f6e JAAS sasl.jaas.config \u3002\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u4ee5\u4fa6\u542c\u5668\u524d\u7f00\uff08\u5305\u62ec SASL \u673a\u5236\uff09\u4f5c\u4e3a\u524d\u7f00\uff0c\u5373 listener.name.{listenerName}.{saslMechanism}.sasl.jaas.config . \u914d\u7f6e\u503c\u4e2d\u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u767b\u5f55\u6a21\u5757\u3002\u5982\u679c\u5728\u4fa6\u542c\u5668\u4e0a\u914d\u7f6e\u4e86\u591a\u4e2a\u673a\u5236\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u4fa6\u542c\u5668\u548c\u673a\u5236\u524d\u7f00\u4e3a\u6bcf\u4e2a\u673a\u5236\u63d0\u4f9b\u914d\u7f6e\u3002\u4f8b\u5982\uff0c listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \\ username=\"admin\" \\ password=\"admin-secret\"; listener.name.sasl_ssl.plain.sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required \\ username=\"admin\" \\ password=\"admin-secret\" \\ user_admin=\"admin-secret\" \\ user_alice=\"alice-secret\"; \u5982\u679c\u5728\u4e0d\u540c\u7ea7\u522b\u5b9a\u4e49 JAAS \u914d\u7f6e\uff0c\u5219\u4f7f\u7528\u7684\u4f18\u5148\u987a\u5e8f\u4e3a\uff1a \u4ee3\u7406\u914d\u7f6e\u5c5e\u6027 listener.name.{listenerName}.{saslMechanism}.sasl.jaas.config {listenerName}.KafkaServer \u9759\u6001 JAAS \u914d\u7f6e\u90e8\u5206 KafkaServer \u9759\u6001 JAAS \u914d\u7f6e\u90e8\u5206 \u8bf7\u6ce8\u610f\uff0cZooKeeper JAAS \u914d\u7f6e\u53ea\u80fd\u4f7f\u7528\u9759\u6001 JAAS \u914d\u7f6e\u8fdb\u884c\u914d\u7f6e\u3002 \u6709\u5173\u4ee3\u7406\u914d\u7f6e\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605 GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u6216 OAUTHBEARER \u3002","title":"Kafka \u4ee3\u7406\u7684 JAAS \u914d\u7f6e"},{"location":"7/#kafka-jaas_1","text":"\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528\u5ba2\u6237\u7aef\u914d\u7f6e\u5c5e\u6027 sasl.jaas.config \u6216\u4f7f\u7528 \u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 \u9759\u6001 JAAS \u914d\u7f6e\u6587\u4ef6\u6765\u914d\u7f6e JAAS\u3002","title":"Kafka \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e"},{"location":"7/#jaas_1","text":"\u5ba2\u6237\u7aef\u53ef\u4ee5\u5c06 JAAS \u914d\u7f6e\u6307\u5b9a\u4e3a\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\u5c5e\u6027\uff0c\u800c\u65e0\u9700\u521b\u5efa\u7269\u7406\u914d\u7f6e\u6587\u4ef6\u3002\u6b64\u6a21\u5f0f\u8fd8\u5141\u8bb8\u540c\u4e00 JVM \u4e2d\u7684\u4e0d\u540c\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u901a\u8fc7\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u6307\u5b9a\u4e0d\u540c\u7684\u5c5e\u6027\u6765\u4f7f\u7528\u4e0d\u540c\u7684\u51ed\u636e\u3002\u5982\u679c\u540c\u65f6\u6307\u5b9a\u4e86\u9759\u6001 JAAS \u914d\u7f6e\u7cfb\u7edf\u5c5e\u6027 java.security.auth.login.config \u548c\u5ba2\u6237\u7aef\u5c5e\u6027 sasl.jaas.config \uff0c\u5219\u5c06\u4f7f\u7528\u5ba2\u6237\u7aef\u5c5e\u6027\u3002 \u6709\u5173\u793a\u4f8b\u914d\u7f6e\uff0c\u8bf7\u53c2\u9605 GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u6216 OAUTHBEARER \u3002","title":"\u4f7f\u7528\u5ba2\u6237\u7aef\u914d\u7f6e\u5c5e\u6027\u7684 JAAS \u914d\u7f6e"},{"location":"7/#jaas_2","text":"\u8981\u4f7f\u7528\u9759\u6001 JAAS \u914d\u7f6e\u6587\u4ef6\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u6dfb\u52a0\u4e00\u4e2a JAAS \u914d\u7f6e\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u540d\u4e3aKafkaClient\u7684\u5ba2\u6237\u7aef\u767b\u5f55\u90e8\u5206\u3002\u5728KafkaClient\u4e2d\u4e3a\u6240\u9009\u673a\u5236\u914d\u7f6e\u767b\u5f55\u6a21\u5757\uff0c\u5982\u8bbe\u7f6e GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u6216 OAUTHBEARER \u7684\u793a\u4f8b\u4e2d\u6240\u8ff0\u3002\u4f8b\u5982\uff0c GSSAPI \u51ed\u8bc1\u53ef\u4ee5\u914d\u7f6e\u4e3a\uff1a KafkaClient { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_client.keytab\" principal=\"kafka-client-1@EXAMPLE.COM\"; }; \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a\u5ba2\u6237\u7aef JVM\u3002\u4f8b\u5982\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_client_jaas.conf","title":"\u4f7f\u7528\u9759\u6001\u914d\u7f6e\u6587\u4ef6\u7684 JAAS \u914d\u7f6e"},{"location":"7/#sasl","text":"SASL \u53ef\u4ee5\u4e0e PLAINTEXT \u6216 SSL \u4e00\u8d77\u4f7f\u7528\uff0c\u4f5c\u4e3a\u5206\u522b\u4f7f\u7528\u5b89\u5168\u534f\u8bae SASL_PLAINTEXT \u6216 SASL_SSL \u7684\u4f20\u8f93\u5c42\u3002\u5982\u679c\u4f7f\u7528SASL_SSL\uff0c\u5219 \u8fd8\u5fc5\u987b\u914d\u7f6eSSL \u3002","title":"SASL\u914d\u7f6e"},{"location":"7/#sasl_1","text":"Kafka\u652f\u6301\u4ee5\u4e0bSASL\u673a\u5236\uff1a * GSSAPI \uff08Kerberos\uff09 * \u6e05\u695a\u7684 * SCRAM-SHA-256 * SCRAM-SHA-512 * \u627f\u8f7d\u8005","title":"SASL\u673a\u5236"},{"location":"7/#kafka-sasl","text":"\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\uff0c\u65b9\u6cd5\u662f\u5c06 SASL_PLAINTEXT \u6216 SASL_SSL \u81f3\u5c11\u4e4b\u4e00\u6dfb\u52a0\u5230 listeners \u53c2\u6570\uff0c\u8be5\u53c2\u6570\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u9017\u53f7\u5206\u9694\u503c\uff1a listeners=SASL_PLAINTEXT://host.name:port \u5982\u679c\u60a8\u4ec5\u914d\u7f6e SASL \u7aef\u53e3\uff08\u6216\u8005\u5982\u679c\u60a8\u5e0c\u671b Kafka \u4ee3\u7406\u4f7f\u7528 SASL \u76f8\u4e92\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff09\uff0c\u8bf7\u786e\u4fdd\u4e3a\u4ee3\u7406\u95f4\u901a\u4fe1\u8bbe\u7f6e\u76f8\u540c\u7684 SASL \u534f\u8bae\uff1a security.inter.broker.protocol=SASL_PLAINTEXT (or SASL_SSL) \u9009\u62e9 \u8981\u5728\u4ee3\u7406\u4e2d\u542f\u7528\u7684\u4e00\u79cd\u6216\u591a\u79cd \u53d7\u652f\u6301\u7684\u673a\u5236\uff0c\u5e76\u6309\u7167\u6b65\u9aa4\u4e3a\u8be5\u673a\u5236\u914d\u7f6e SASL\u3002 \u8981\u5728\u4ee3\u7406\u4e2d\u542f\u7528\u591a\u79cd\u673a\u5236\uff0c\u8bf7\u6309\u7167\u6b64\u5904\u7684 \u6b65\u9aa4\u64cd\u4f5c \u3002","title":"Kafka \u4ee3\u7406\u7684 SASL \u914d\u7f6e"},{"location":"7/#kafka-sasl_1","text":"\u4ec5\u65b0\u7684 Java Kafka \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u652f\u6301 SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u4e0d\u652f\u6301\u65e7\u7684 API\u3002 \u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u8bf7\u9009\u62e9 \u5728\u4ee3\u7406\u4e2d\u542f\u7528\u7684SASL \u673a\u5236\u4ee5\u8fdb\u884c\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7136\u540e\u6309\u7167\u6b65\u9aa4\u4e3a\u6240\u9009\u673a\u5236\u914d\u7f6e SASL\u3002 \u6ce8\u610f\uff1a\u5f53\u901a\u8fc7 SASL \u5efa\u7acb\u4e0e\u4ee3\u7406\u7684\u8fde\u63a5\u65f6\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u5bf9\u4ee3\u7406\u5730\u5740\u6267\u884c\u53cd\u5411 DNS \u67e5\u627e\u3002\u7531\u4e8e JRE \u5b9e\u73b0\u53cd\u5411 DNS \u67e5\u627e\u7684\u65b9\u5f0f\uff0c\u5982\u679c\u672a\u4f7f\u7528\u5b8c\u5168\u9650\u5b9a\u7684\u57df\u540d\uff08\u5bf9\u4e8e\u5ba2\u6237\u7aef bootstrap.servers \u548c\u4ee3\u7406\u7684 [advertised.listeners](https://kafka.apache.org/documentation/#brokerconfigs_advertised.listeners) .","title":"Kafka \u5ba2\u6237\u7aef\u7684 SASL \u914d\u7f6e"},{"location":"7/#saslkerberos","text":"","title":"\u4f7f\u7528 SASL/Kerberos \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#_4","text":"Kerberos \u5982\u679c\u60a8\u7684\u7ec4\u7ec7\u5df2\u7ecf\u4f7f\u7528 Kerberos \u670d\u52a1\u5668\uff08\u4f8b\u5982\uff0c\u901a\u8fc7\u4f7f\u7528 Active Directory\uff09\uff0c\u5219\u65e0\u9700\u4ec5\u4e3a Kafka \u5b89\u88c5\u65b0\u670d\u52a1\u5668\u3002\u5426\u5219\uff0c\u60a8\u5c06\u9700\u8981\u5b89\u88c5\u4e00\u4e2a\uff0c\u60a8\u7684 Linux \u4f9b\u5e94\u5546\u53ef\u80fd\u6709 Kerberos \u8f6f\u4ef6\u5305\u4ee5\u53ca\u6709\u5173\u5982\u4f55\u5b89\u88c5\u548c\u914d\u7f6e\u5b83\u7684\u7b80\u77ed\u6307\u5357\uff08 Ubuntu \u3001 Redhat \uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u4f7f\u7528 Oracle Java\uff0c\u5219\u9700\u8981\u4e0b\u8f7d\u9002\u5408\u60a8\u7684 Java \u7248\u672c\u7684 JCE \u7b56\u7565\u6587\u4ef6\u5e76\u5c06\u5176\u590d\u5236\u5230 $JAVA_HOME/jre/lib/security\u3002 \u521b\u5efa Kerberos \u4e3b\u4f53 \u5982\u679c\u60a8\u4f7f\u7528\u7ec4\u7ec7\u7684 Kerberos \u6216 Active Directory \u670d\u52a1\u5668\uff0c\u8bf7\u5411 Kerberos \u7ba1\u7406\u5458\u8be2\u95ee\u96c6\u7fa4\u4e2d\u6bcf\u4e2a Kafka \u4ee3\u7406\u4ee5\u53ca\u5c06\u4f7f\u7528 Kerberos \u8eab\u4efd\u9a8c\u8bc1\uff08\u901a\u8fc7\u5ba2\u6237\u7aef\u548c\u5de5\u5177\uff09\u8bbf\u95ee Kafka \u7684\u6bcf\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u7684\u4e3b\u4f53\u3002 \u5982\u679c\u60a8\u5b89\u88c5\u4e86\u81ea\u5df1\u7684 Kerberos\uff0c\u5219\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u81ea\u884c\u521b\u5efa\u8fd9\u4e9b\u4e3b\u4f53\uff1a > sudo /usr/sbin/kadmin.local -q 'addprinc -randkey kafka/{hostname}@{REALM}' > sudo /usr/sbin/kadmin.local -q \"ktadd -k /etc/security/keytabs/{keytabname}.keytab kafka/{hostname}@{REALM}\" \u786e\u4fdd\u53ef\u4ee5\u4f7f\u7528\u4e3b\u673a\u540d\u8bbf\u95ee\u6240\u6709\u4e3b\u673a - Kerberos \u8981\u6c42\u6240\u6709\u4e3b\u673a\u90fd\u53ef\u4ee5\u4f7f\u7528\u5176 FQDN \u8fdb\u884c\u89e3\u6790\u3002","title":"\u5148\u51b3\u6761\u4ef6"},{"location":"7/#kafka_1","text":"\u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u672c\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff08\u8bf7\u6ce8\u610f\uff0c\u6bcf\u4e2a\u4ee3\u7406\u5e94\u8be5\u6709\u81ea\u5df1\u7684\u5bc6\u94a5\u8868\uff09\uff1a KafkaServer { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_server.keytab\" principal=\"kafka/kafka1.hostname.com@EXAMPLE.COM\"; }; // Zookeeper client authentication Client { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_server.keytab\" principal=\"kafka/kafka1.hostname.com@EXAMPLE.COM\"; }; JAAS \u6587\u4ef6\u4e2d\u7684KafkaServer\u90e8\u5206\u544a\u8bc9\u4ee3\u7406\u8981\u4f7f\u7528\u54ea\u4e2a\u4e3b\u4f53\u4ee5\u53ca\u5b58\u50a8\u8be5\u4e3b\u4f53\u7684\u5bc6\u94a5\u8868\u7684\u4f4d\u7f6e\u3002\u5b83\u5141\u8bb8\u4ee3\u7406\u4f7f\u7528\u672c\u8282\u4e2d\u6307\u5b9a\u7684\u5bc6\u94a5\u8868\u767b\u5f55\u3002\u6709\u5173 Zookeeper SASL \u914d\u7f6e\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 \u6ce8\u91ca\u3002 \u5c06 JAAS \u548c\u53ef\u9009\u7684 krb5 \u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff08\u8bf7\u53c2\u9605 \u6b64\u5904 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\uff1a -Djava.security.krb5.conf=/etc/kafka/krb5.conf -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u786e\u4fdd\u542f\u52a8 kafka \u4ee3\u7406\u7684\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u53ef\u4ee5\u8bfb\u53d6 JAAS \u6587\u4ef6\u4e2d\u914d\u7f6e\u7684\u5bc6\u94a5\u8868\u3002 \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_PLAINTEXT://host.name:port security.inter.broker.protocol=SASL_PLAINTEXT sasl.mechanism.inter.broker.protocol=GSSAPI sasl.enabled.mechanisms=GSSAPI \u6211\u4eec\u8fd8\u5fc5\u987b\u5728 server.properties \u4e2d\u914d\u7f6e\u670d\u52a1\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u5e94\u4e0e kafka \u4ee3\u7406\u7684\u4e3b\u4f53\u540d\u79f0\u5339\u914d\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u4e3b\u4f53\u662f\u201ckafka/kafka1.hostname.com@EXAMPLE.com\u201d\uff0c\u56e0\u6b64\uff1a sasl.kerberos.service.name=kafka","title":"\u914d\u7f6e Kafka \u4ee3\u7406"},{"location":"7/#kafka_2","text":"\u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5ba2\u6237\u7aef\uff08\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u3001\u8fde\u63a5\u5de5\u4f5c\u4eba\u5458\u7b49\uff09\u5c06\u4f7f\u7528\u81ea\u5df1\u7684\u4e3b\u4f53\uff08\u901a\u5e38\u4e0e\u8fd0\u884c\u5ba2\u6237\u7aef\u7684\u7528\u6237\u540c\u540d\uff09\u5411\u96c6\u7fa4\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u56e0\u6b64\u6839\u636e\u9700\u8981\u83b7\u53d6\u6216\u521b\u5efa\u8fd9\u4e9b\u4e3b\u4f53\u3002\u7136\u540e\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u4e0d\u540c\u7684\u4e3b\u4f53\u4ee5\u4e0d\u540c\u7684\u7528\u6237\u8eab\u4efd\u8fd0\u884c\u3002\u8be5\u7269\u4e1a sasl.jaas.config Producer.properties \u6216 Consumer.properties \u4e2d\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f\u4f7f\u7528\u5bc6\u94a5\u8868\u7684\u5ba2\u6237\u7aef\u7684\u793a\u4f8b\u914d\u7f6e\uff08\u5efa\u8bae\u7528\u4e8e\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u8fdb\u7a0b\uff09\uff1a sasl.jaas.config=com.sun.security.auth.module.Krb5LoginModule required \\ useKeyTab=true \\ storeKey=true \\ keyTab=\"/etc/security/keytabs/kafka_client.keytab\" \\ principal=\"kafka-client-1@EXAMPLE.COM\"; \u5bf9\u4e8e kafka-console-consumer \u6216 kafka-console- Producer \u7b49\u547d\u4ee4\u884c\u5b9e\u7528\u7a0b\u5e8f\uff0ckinit \u53ef\u4ee5\u4e0e\u201cuseTicketCache = true\u201d\u4e00\u8d77\u4f7f\u7528\uff0c\u5982\u4e0b\u6240\u793a\uff1a sasl.jaas.config=com.sun.security.auth.module.Krb5LoginModule required \\ useTicketCache=true; \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 2. \u786e\u4fdd\u542f\u52a8 kafka \u5ba2\u6237\u7aef\u7684\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u53ef\u4ee5\u8bfb\u53d6 JAAS \u914d\u7f6e\u4e2d\u914d\u7f6e\u7684\u5bc6\u94a5\u8868\u3002 3. \uff08\u53ef\u9009\uff09\u5c06 krb5 \u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a\u5ba2\u6237\u7aef JVM\uff08\u8bf7\u53c2\u9605 \u6b64\u5904 \u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff09\uff1a -Djava.security.krb5.conf=/etc/kafka/krb5.conf \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_PLAINTEXT (or SASL_SSL) sasl.mechanism=GSSAPI sasl.kerberos.service.name=kafka","title":"\u914d\u7f6e Kafka \u5ba2\u6237\u7aef"},{"location":"7/#saslplain","text":"SASL/PLAIN\u662f\u4e00\u79cd\u7b80\u5355\u7684\u7528\u6237\u540d/\u5bc6\u7801\u8ba4\u8bc1\u673a\u5236\uff0c\u901a\u5e38\u4e0eTLS\u7ed3\u5408\u4f7f\u7528\u8fdb\u884c\u52a0\u5bc6\uff0c\u5b9e\u73b0\u5b89\u5168\u8ba4\u8bc1\u3002Kafka \u652f\u6301 SASL/PLAIN \u7684\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5c06\u5176\u6269\u5c55\u5230\u751f\u4ea7\u7528\u9014\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002 \u5728\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0c\u7528\u6237\u540d\u7528\u4f5c Principal ACL \u7b49\u914d\u7f6e\u7684 \u8eab\u4efd\u9a8c\u8bc1\u3002 1. ##### \u914d\u7f6e Kafka \u4ee3\u7406 \u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u6b64\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff1a KafkaServer { org.apache.kafka.common.security.plain.PlainLoginModule required username=\"admin\" password=\"admin-secret\" user_admin=\"admin-secret\" user_alice=\"alice-secret\"; }; \u6b64\u914d\u7f6e\u5b9a\u4e49\u4e86\u4e24\u4e2a\u7528\u6237\uff08 admin \u548c alice \uff09\u3002KafkaServer\u90e8\u5206 \u4e2d\u7684\u5c5e\u6027\u7528\u6237\u540d\u548c\u5bc6\u7801\u7531\u4ee3\u7406\u7528\u6765\u542f\u52a8\u4e0e\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c admin \u662f\u7ecf\u7eaa\u5546\u95f4\u901a\u4fe1\u7684\u7528\u6237\u3002\u5c5e\u6027\u96c6user_ userName \u5b9a\u4e49\u8fde\u63a5\u5230\u4ee3\u7406\u7684\u6240\u6709\u7528\u6237\u7684\u5bc6\u7801\uff0c\u5e76\u4e14\u4ee3\u7406\u4f7f\u7528\u8fd9\u4e9b\u5c5e\u6027\u9a8c\u8bc1\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u5305\u62ec\u6765\u81ea\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u3002 2. \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_SSL://host.name:port security.inter.broker.protocol=SASL_SSL sasl.mechanism.inter.broker.protocol=PLAIN sasl.enabled.mechanisms=PLAIN","title":"\u4f7f\u7528 SASL/PLAIN \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#kafka_3","text":"\u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f PLAIN \u673a\u5236\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required \\ username=\"alice\" \\ password=\"alice-secret\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u9009\u9879\u6765\u914d\u7f6e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7528\u6237\u3002 \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4ee5\u7528\u6237alice \u7684\u8eab\u4efd\u8fde\u63a5\u5230\u4ee3\u7406\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 sasl.jaas.config . \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_SSL sasl.mechanism=PLAIN","title":"\u914d\u7f6e Kafka \u5ba2\u6237\u7aef"},{"location":"7/#saslplain_1","text":"SASL/PLAIN \u53ea\u80fd\u4e0e SSL \u4e00\u8d77\u4f7f\u7528\u4f5c\u4e3a\u4f20\u8f93\u5c42\uff0c\u4ee5\u786e\u4fdd\u660e\u6587\u5bc6\u7801\u4e0d\u4f1a\u5728\u672a\u7ecf\u52a0\u5bc6\u7684\u60c5\u51b5\u4e0b\u5728\u7ebf\u8def\u4e0a\u4f20\u8f93\u3002 Kafka \u4e2d SASL/PLAIN \u7684\u9ed8\u8ba4\u5b9e\u73b0\u5728 JAAS \u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5982\u4e0b \u6240\u793a \u3002 sasl.server.callback.handler.class \u4ece Kafka 2.0 \u7248\u672c\u5f00\u59cb\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u81ea\u5df1\u7684\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u6765\u907f\u514d\u5728\u78c1\u76d8\u4e0a\u5b58\u50a8\u660e\u6587\u5bc6\u7801\uff0c\u8fd9\u4e9b\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u4f7f\u7528\u914d\u7f6e\u9009\u9879\u548c\u6765\u4ece\u5916\u90e8\u6e90\u83b7\u53d6\u7528\u6237\u540d\u548c\u5bc6\u7801 sasl.client.callback.handler.class \u3002 \u5728\u751f\u4ea7\u7cfb\u7edf\u4e2d\uff0c\u5916\u90e8\u8ba4\u8bc1\u670d\u52a1\u5668\u53ef\u4ee5\u5b9e\u73b0\u5bc6\u7801\u8ba4\u8bc1\u3002\u4ece Kafka 2.0 \u7248\u5f00\u59cb\uff0c\u60a8\u53ef\u4ee5\u63d2\u5165\u81ea\u5df1\u7684\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\uff0c\u901a\u8fc7\u914d\u7f6e sasl.server.callback.handler.class .","title":"\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528 SASL/PLAIN"},{"location":"7/#saslscram","text":"Salted \u8d28\u8be2\u54cd\u5e94\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236 (SCRAM) \u662f\u4e00\u7cfb\u5217 SASL \u673a\u5236\uff0c\u53ef\u89e3\u51b3\u6267\u884c\u7528\u6237\u540d/\u5bc6\u7801\u8eab\u4efd\u9a8c\u8bc1\uff08\u4f8b\u5982 PLAIN \u548c DIGEST-MD5\uff09\u7684\u4f20\u7edf\u673a\u5236\u7684\u5b89\u5168\u95ee\u9898\u3002 \u8be5\u673a\u5236\u5728RFC 5802 \u4e2d\u5b9a\u4e49\u3002Kafka\u652f\u6301 SCRAM-SHA-256 \u548cSCRAM-SHA-512\uff0c\u53ef\u4ee5\u4e0eTLS\u7ed3\u5408\u4f7f\u7528\u6765\u6267\u884c\u5b89\u5168\u8eab\u4efd\u9a8c\u8bc1\u3002\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0c\u4f7f\u7528\u7528\u6237\u540d\u4f5c\u4e3a\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684 Principal \u7528\u4e8e\u914d\u7f6e ACL \u7b49\u3002Kafka \u4e2d\u7684\u9ed8\u8ba4 SCRAM \u5b9e\u73b0\u5c06 SCRAM \u51ed\u8bc1\u5b58\u50a8\u5728 Zookeeper \u4e2d\uff0c\u9002\u5408\u5728 Zookeeper \u4f4d\u4e8e\u4e13\u7528\u7f51\u7edc\u4e0a\u7684 Kafka \u5b89\u88c5\u4e2d\u4f7f\u7528\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u3002","title":"\u4f7f\u7528 SASL/SCRAM \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#scram","text":"Kafka \u4e2d\u7684 SCRAM \u5b9e\u73b0\u4f7f\u7528 Zookeeper \u4f5c\u4e3a\u51ed\u8bc1\u200b\u200b\u5b58\u50a8\u3002\u53ef\u4ee5\u4f7f\u7528kafka-configs.sh\u5728 Zookeeper \u4e2d\u521b\u5efa\u51ed\u8bc1\u3002\u5bf9\u4e8e\u542f\u7528\u7684\u6bcf\u4e2a SCRAM \u673a\u5236\uff0c\u5fc5\u987b\u901a\u8fc7\u6dfb\u52a0\u5177\u6709\u673a\u5236\u540d\u79f0\u7684\u914d\u7f6e\u6765\u521b\u5efa\u51ed\u636e\u3002\u5fc5\u987b\u5728\u542f\u52a8 Kafka \u4ee3\u7406\u4e4b\u524d\u521b\u5efa\u4ee3\u7406\u95f4\u901a\u4fe1\u7684\u51ed\u8bc1\u3002\u53ef\u4ee5\u52a8\u6001\u521b\u5efa\u548c\u66f4\u65b0\u5ba2\u6237\u7aef\u51ed\u8bc1\uff0c\u5e76\u4e14\u66f4\u65b0\u7684\u51ed\u8bc1\u5c06\u7528\u4e8e\u9a8c\u8bc1\u65b0\u8fde\u63a5\u3002 \u4f7f\u7528\u5bc6\u7801 alice-secret\u4e3a\u7528\u6237 alice \u521b\u5efa SCRAM \u51ed\u8bc1\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice \u5982\u679c\u672a\u6307\u5b9a\u8fed\u4ee3\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u8fed\u4ee3\u8ba1\u6570 4096\u3002\u521b\u5efa\u968f\u673a\u76d0\uff0c\u5e76\u5c06\u7531\u76d0\u3001\u8fed\u4ee3\u3001StoredKey \u548c ServerKey \u7ec4\u6210\u7684 SCRAM \u8eab\u4efd\u5b58\u50a8\u5728 Zookeeper \u4e2d\u3002\u6709\u5173 SCRAM \u8eab\u4efd\u548c\u5404\u4e2a\u5b57\u6bb5\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 RFC 5802 \u3002 \u4ee5\u4e0b\u793a\u4f8b\u8fd8\u9700\u8981\u7528\u6237 \u7ba1\u7406\u5458 \u8fdb\u884c\u4ee3\u7406\u95f4\u901a\u4fe1\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin \u53ef\u4ee5\u4f7f\u7528--describe \u9009\u9879\u5217\u51fa\u73b0\u6709\u51ed\u636e\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --describe --entity-type users --entity-name alice \u53ef\u4ee5\u4f7f\u7528--alter --delete-config \u9009\u9879\u5220\u9664\u4e00\u79cd\u6216\u591a\u79cd SCRAM \u673a\u5236\u7684\u51ed\u8bc1\uff1a > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --alter --delete-config 'SCRAM-SHA-512' --entity-type users --entity-name alice","title":"\u521b\u5efa SCRAM \u51ed\u8bc1"},{"location":"7/#kafka_4","text":"\u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u6b64\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff1a KafkaServer { org.apache.kafka.common.security.scram.ScramLoginModule required username=\"admin\" password=\"admin-secret\"; }; KafkaServer\u90e8\u5206\u4e2d\u7684 \u5c5e\u6027\u7528\u6237\u540d\u548c\u5bc6\u7801\u7531\u4ee3\u7406\u7528\u6765\u542f\u52a8\u4e0e\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c admin \u662f\u7ecf\u7eaa\u5546\u95f4\u901a\u4fe1\u7684\u7528\u6237\u3002 2. \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_SSL://host.name:port security.inter.broker.protocol=SASL_SSL sasl.mechanism.inter.broker.protocol=SCRAM-SHA-256 (or SCRAM-SHA-512) sasl.enabled.mechanisms=SCRAM-SHA-256 (or SCRAM-SHA-512)","title":"\u914d\u7f6e Kafka \u4ee3\u7406"},{"location":"7/#kafka_5","text":"\u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f SCRAM \u673a\u5236\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \\ username=\"alice\" \\ password=\"alice-secret\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u9009\u9879\u6765\u914d\u7f6e\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7528\u6237\u3002 \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4ee5\u7528\u6237alice \u7684\u8eab\u4efd\u8fde\u63a5\u5230\u4ee3\u7406\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 sasl.jaas.config . \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_SSL sasl.mechanism=SCRAM-SHA-256 (or SCRAM-SHA-512)","title":"\u914d\u7f6e Kafka \u5ba2\u6237\u7aef"},{"location":"7/#saslscram_1","text":"Kafka \u4e2d SASL/SCRAM \u7684\u9ed8\u8ba4\u5b9e\u73b0\u5c06 SCRAM \u51ed\u8bc1\u5b58\u50a8\u5728 Zookeeper \u4e2d\u3002\u8fd9\u9002\u7528\u4e8e Zookeeper \u5b89\u5168\u4e14\u4f4d\u4e8e\u4e13\u7528\u7f51\u7edc\u4e0a\u7684\u5b89\u88c5\u4e2d\u7684\u751f\u4ea7\u4f7f\u7528\u3002 Kafka \u4ec5\u652f\u6301\u5f3a\u54c8\u5e0c\u51fd\u6570 SHA-256 \u548c SHA-512\uff0c\u6700\u5c0f\u8fed\u4ee3\u6b21\u6570\u4e3a 4096\u3002\u5f3a\u54c8\u5e0c\u51fd\u6570\u4e0e\u5f3a\u5bc6\u7801\u548c\u9ad8\u8fed\u4ee3\u6b21\u6570\u76f8\u7ed3\u5408\uff0c\u53ef\u4ee5\u5728 Zookeeper \u5b89\u5168\u6027\u53d7\u5230\u635f\u5bb3\u65f6\u9632\u6b62\u66b4\u529b\u653b\u51fb\u3002 SCRAM \u5e94\u4ec5\u4e0e TLS \u52a0\u5bc6\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u9632\u6b62 SCRAM \u4ea4\u6362\u88ab\u62e6\u622a\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u5b57\u5178\u6216\u66b4\u529b\u653b\u51fb\uff0c\u5e76\u5728 Zookeeper \u53d7\u5230\u5a01\u80c1\u65f6\u9632\u6b62\u5047\u5192\u3002 sasl.server.callback.handler.class \u4ece Kafka 2.0 \u7248\u5f00\u59cb\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728 Zookeeper \u4e0d\u5b89\u5168\u7684\u5b89\u88c5\u4e2d\u8fdb\u884c\u914d\u7f6e\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u8986\u76d6\u9ed8\u8ba4 SASL/SCRAM \u51ed\u8bc1\u5b58\u50a8\u3002 \u6709\u5173\u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 RFC 5802 \u3002","title":"SASL/SCRAM \u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879"},{"location":"7/#sasloauthbearer","text":"OAuth 2 \u6388\u6743\u6846\u67b6 \u201c\u4f7f\u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u4ee3\u8868\u8d44\u6e90\u6240\u6709\u8005\u901a\u8fc7\u534f\u8c03\u8d44\u6e90\u6240\u6709\u8005\u548c HTTP \u670d\u52a1\u4e4b\u95f4\u7684\u6279\u51c6\u4ea4\u4e92\uff0c\u6216\u8005\u901a\u8fc7\u5141\u8bb8\u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f\u83b7\u5f97\u5bf9 HTTP \u670d\u52a1\u7684\u6709\u9650\u8bbf\u95ee\u6743\u9650\u3002\u4ee5\u81ea\u5df1\u7684\u540d\u4e49\u83b7\u5f97\u8bbf\u95ee\u6743\u9650\u3002\u201d SASL OAUTHBEARER \u673a\u5236\u5141\u8bb8\u5728 SASL\uff08\u5373\u975e HTTP\uff09\u4e0a\u4e0b\u6587\u4e2d\u4f7f\u7528\u8be5\u6846\u67b6\uff1b \u5b83\u5728RFC 7628 \u4e2d\u5b9a\u4e49\u3002Kafka \u4e2d\u7684\u9ed8\u8ba4 OAUTHBEARER \u5b9e\u73b0\u521b\u5efa\u5e76\u9a8c\u8bc1 \u4e0d\u5b89\u5168\u7684 JSON Web \u4ee4\u724c \uff0c\u5e76\u4e14\u4ec5\u9002\u5408\u5728\u975e\u751f\u4ea7 Kafka \u5b89\u88c5\u4e2d\u4f7f\u7528\u3002\u8bf7\u53c2\u9605 \u5b89\u5168\u6ce8\u610f\u4e8b\u9879 \u66f4\u591a\u7ec6\u8282\u3002 \u5728\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0cOAuthBearerToken\u7684principalName\u7528\u4f5c Principal ACL\u7b49\u914d\u7f6e\u7684\u8eab\u4efd \u9a8c\u8bc1\u3002","title":"\u4f7f\u7528 SASL/OAUTHBEARER \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#kafka_6","text":"\u5c06\u4e00\u4e2a\u7ecf\u8fc7\u9002\u5f53\u4fee\u6539\u7684 JAAS \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6587\u4ef6\uff09\u6dfb\u52a0\u5230\u6bcf\u4e2a Kafka \u4ee3\u7406\u7684\u914d\u7f6e\u76ee\u5f55\u4e2d\uff0c\u5728\u6b64\u793a\u4f8b\u4e2d\u6211\u4eec\u5c06\u5176\u79f0\u4e3a kafka_server_jaas.conf\uff1a KafkaServer { org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required unsecuredLoginStringClaim_sub=\"admin\"; }; KafkaServer\u90e8\u5206\u4e2d\u7684 \u5c5e\u6027unsecuredLoginStringClaim_sub\u7531\u4ee3\u7406\u5728\u542f\u52a8\u4e0e\u5176\u4ed6\u4ee3\u7406\u7684\u8fde\u63a5\u65f6\u4f7f\u7528\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c admin \u5c06\u51fa\u73b0\u5728\u4e3b\u9898 ( sub ) \u58f0\u660e\u4e2d\uff0c\u5e76\u5c06\u6210\u4e3abroker\u95f4\u901a\u4fe1\u7684\u7528\u6237\u3002 2. \u5c06 JAAS \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4f5c\u4e3a JVM \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e2a Kafka \u4ee3\u7406\uff1a -Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf \u6309\u7167\u6b64\u5904 \u6240\u8ff0\u5728 server.properties \u4e2d\u914d\u7f6e SASL \u7aef\u53e3\u548c SASL \u673a\u5236\u3002\u4f8b\u5982\uff1a listeners=SASL_SSL://host.name:port (or SASL_PLAINTEXT if non-production) security.inter.broker.protocol=SASL_SSL (or SASL_PLAINTEXT if non-production) sasl.mechanism.inter.broker.protocol=OAUTHBEARER sasl.enabled.mechanisms=OAUTHBEARER","title":"\u914d\u7f6e Kafka \u4ee3\u7406"},{"location":"7/#kafka_7","text":"\u8981\u5728\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e SASL \u8eab\u4efd\u9a8c\u8bc1\uff1a 1. \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f OAUTHBEARER \u673a\u5236\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required \\ unsecuredLoginStringClaim_sub=\"alice\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u9009\u9879unsecuredLoginStringClaim_sub\u6765\u914d\u7f6e\u4e3b\u9898 ( sub ) \u58f0\u660e\uff0c\u8be5\u58f0\u660e\u786e\u5b9a\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7528\u6237\u3002 \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4ee5\u7528\u6237alice \u7684\u8eab\u4efd\u8fde\u63a5\u5230\u4ee3\u7406\u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 \u4e2d\u6307\u5b9a\u4e0d\u540c\u7684\u4e3b\u9898 ( sub ) \u58f0\u660e\u6765\u4f5c\u4e3a\u4e0d\u540c\u7528\u6237\u8fdb\u884c\u8fde\u63a5 sasl.jaas.config \u3002 \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002 \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\uff1a security.protocol=SASL_SSL (or SASL_PLAINTEXT if non-production) sasl.mechanism=OAUTHBEARER SASL/OAUTHBEARER \u7684\u9ed8\u8ba4\u5b9e\u73b0\u53d6\u51b3\u4e8e jackson-databind \u5e93\u3002\u7531\u4e8e\u5b83\u662f\u4e00\u4e2a\u53ef\u9009\u4f9d\u8d56\u9879\uff0c\u56e0\u6b64\u7528\u6237\u5fc5\u987b\u901a\u8fc7\u5176\u6784\u5efa\u5de5\u5177\u5c06\u5176\u914d\u7f6e\u4e3a\u4f9d\u8d56\u9879\u3002","title":"\u914d\u7f6e Kafka \u5ba2\u6237\u7aef"},{"location":"7/#sasloauthbearer_1","text":"Kafka \u4e2d SASL/OAUTHBEARER \u7684\u9ed8\u8ba4\u5b9e\u73b0\u521b\u5efa\u5e76\u9a8c\u8bc1 \u4e0d\u5b89\u5168\u7684 JSON Web \u4ee4\u724c \u3002\u867d\u7136\u4ec5\u9002\u7528\u4e8e\u975e\u751f\u4ea7\u7528\u9014\uff0c\u4f46\u5b83\u786e\u5b9e\u63d0\u4f9b\u4e86\u5728\u5f00\u53d1\u6216\u6d4b\u8bd5\u73af\u5883\u4e2d\u521b\u5efa\u4efb\u610f\u4ee4\u724c\u7684\u7075\u6d3b\u6027\u3002 \u4ee5\u4e0b\u662f\u5ba2\u6237\u7aef\uff08\u4ee5\u53ca\u4ee3\u7406\u7aef\uff0c\u5982\u679c OAUTHBEARER \u662f\u4ee3\u7406\u95f4\u534f\u8bae\uff09\u652f\u6301\u7684\u5404\u79cd JAAS \u6a21\u5757\u9009\u9879\uff1a JAAS Module Option for Unsecured Token Creation Documentation unsecuredLoginStringClaim_ =\"value\" Creates a String claim with the given name and value. Any valid claim name can be specified except 'iat' and 'exp' (these are automatically generated). unsecuredLoginNumberClaim_ =\"value\" Creates a Number claim with the given name and value. Any valid claim name can be specified except 'iat' and 'exp' (these are automatically generated). unsecuredLoginListClaim_ =\"value\" Creates a String List claim with the given name and values parsed from the given value where the first character is taken as the delimiter. For example: unsecuredLoginListClaim_fubar=\" unsecuredLoginExtension_ =\"value\" Creates a String extension with the given name and value. For example: unsecuredLoginExtension_traceId=\"123\". A valid extension name is any sequence of lowercase or uppercase alphabet characters. In addition, the \"auth\" extension name is reserved. A valid extension value is any combination of characters with ASCII codes 1-127. unsecuredLoginPrincipalClaimName Set to a custom claim name if you wish the name of the String claim holding the principal name to be something other than 'sub'. unsecuredLoginLifetimeSeconds Set to an integer value if the token expiration is to be set to something other than the default value of 3600 seconds (which is 1 hour). The 'exp' claim will be set to reflect the expiration time. unsecuredLoginScopeClaimName Set to a custom claim name if you wish the name of the String or String List claim holding any token scope to be something other than 'scope'.","title":"SASL/OAUTHBEARER \u7684\u65e0\u62c5\u4fdd\u4ee4\u724c\u521b\u5efa\u9009\u9879"},{"location":"7/#sasloauthbearer_2","text":"\u4ee5\u4e0b\u662f\u4ee3\u7406\u7aef\u7528\u4e8e \u4e0d\u5b89\u5168 JSON Web \u4ee4\u724c \u9a8c\u8bc1\u7684\u5404\u79cd\u53d7\u652f\u6301\u7684 JAAS \u6a21\u5757\u9009\u9879\uff1a JAAS Module Option for Unsecured Token Validation Documentation unsecuredValidatorPrincipalClaimName=\"value\" Set to a non-empty value if you wish a particular String claim holding a principal name to be checked for existence; the default is to check for the existence of the 'sub' claim. unsecuredValidatorScopeClaimName=\"value\" Set to a custom claim name if you wish the name of the String orString List claim holding any token scope to be something other than 'scope'. unsecuredValidatorRequiredScope=\"value\" Set to a space-delimited list of scope values if you wish theString/String Listclaim holding the token scope to be checked to make sure it contains certain values. unsecuredValidatorAllowableClockSkewMs=\"value\" Set to a positive integer value if you wish to allow up to some number of positive milliseconds of clock skew (the default is 0). \u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u767b\u5f55\u548c SASL \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u6765\u8986\u76d6\u9ed8\u8ba4\u7684\u4e0d\u5b89\u5168 SASL/OAUTHBEARER \u5b9e\u73b0\uff08\u5e76\u4e14\u5fc5\u987b\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8986\u76d6\uff09\u3002 \u6709\u5173\u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 RFC 6749 \u7b2c 10 \u8282 \u3002","title":"SASL/OAUTHBEARER \u7684\u4e0d\u5b89\u5168\u4ee4\u724c\u9a8c\u8bc1\u9009\u9879"},{"location":"7/#sasloauthbearer_3","text":"Kafka \u4f1a\u5728\u4ee4\u724c\u8fc7\u671f\u4e4b\u524d\u5b9a\u671f\u5237\u65b0\u4ee4\u724c\uff0c\u4ee5\u4fbf\u5ba2\u200b\u200b\u6237\u7aef\u53ef\u4ee5\u7ee7\u7eed\u4e0e\u4ee3\u7406\u5efa\u7acb\u8fde\u63a5\u3002\u5f71\u54cd\u5237\u65b0\u7b97\u6cd5\u8fd0\u884c\u65b9\u5f0f\u7684\u53c2\u6570\u88ab\u6307\u5b9a\u4e3a\u751f\u4ea7\u8005/\u6d88\u8d39\u8005/\u4ee3\u7406\u914d\u7f6e\u7684\u4e00\u90e8\u5206\uff0c\u5982\u4e0b\u6240\u793a\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5176\u4ed6\u5730\u65b9\u6709\u5173\u8fd9\u4e9b\u5c5e\u6027\u7684\u6587\u6863\u3002\u9ed8\u8ba4\u503c\u901a\u5e38\u662f\u5408\u7406\u7684\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e0d\u9700\u8981\u663e\u5f0f\u8bbe\u7f6e\u8fd9\u4e9b\u914d\u7f6e\u53c2\u6570\u3002 Producer/Consumer/Broker Configuration Property sasl.login.refresh.window.factor sasl.login.refresh.window.jitter sasl.login.refresh.min.period.seconds sasl.login.refresh.min.buffer.seconds","title":"SASL/OAUTHBEARER \u7684\u4ee4\u724c\u5237\u65b0"},{"location":"7/#sasloauthbearer_4","text":"\u751f\u4ea7\u7528\u4f8b\u9700\u8981\u7f16\u5199org.apache.kafka.common.security.auth.AuthenticateCallbackHandler \u7684\u5b9e\u73b0 \uff0c\u5b83\u53ef\u4ee5\u5904\u7406org.apache.kafka.common.security.oauthbearer.OAuthBearerTokenCallback\u7684\u5b9e\u4f8b \uff0c\u5e76\u901a\u8fc7sasl.login\u58f0\u660e\u5b83 \u975e\u4ee3\u7406\u5ba2\u6237\u7aef\u7684 .callback.handler.class\u914d\u7f6e\u9009\u9879\u6216\u901a\u8fc7\u4ee3\u7406\u7684listener.name.sasl_ssl.oauthbearer.sasl.login.callback.handler.class \u914d\u7f6e\u9009\u9879\uff08\u5f53 SASL/OAUTHBEARER \u662f\u4ee3\u7406\u95f4\u534f\u8bae\u65f6\uff09 \u3002 \u751f\u4ea7\u7528\u4f8b\u8fd8\u9700\u8981\u7f16\u5199org.apache.kafka.common.security.auth.AuthenticateCallbackHandler \u7684\u5b9e\u73b0 \uff0c\u5b83\u53ef\u4ee5\u5904\u7406org.apache.kafka.common.security.oauthbearer.OAuthBearerValidatorCallback\u7684\u5b9e\u4f8b \uff0c\u5e76\u901a\u8fc7listener.name\u58f0\u660e\u5b83 .sasl_ssl.oauthbearer.sasl.server.callback.handler.class \u4ee3\u7406\u914d\u7f6e\u9009\u9879\u3002","title":"SASL/OAUTHBEARER \u7684\u5b89\u5168/\u751f\u4ea7\u4f7f\u7528"},{"location":"7/#sasloauthbearer_5","text":"Kafka \u4e2d SASL/OAUTHBEARER \u7684\u9ed8\u8ba4\u5b9e\u73b0\u521b\u5efa\u5e76\u9a8c\u8bc1 \u4e0d\u5b89\u5168\u7684 JSON Web \u4ee4\u724c \u3002\u8fd9\u4ec5\u9002\u7528\u4e8e\u975e\u751f\u4ea7\u7528\u9014\u3002 OAUTHBEARER \u5e94\u4ec5\u5728\u5177\u6709 TLS \u52a0\u5bc6\u7684\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u4ee5\u9632\u6b62\u4ee4\u724c\u88ab\u62e6\u622a\u3002 \u5982\u4e0a\u6240\u8ff0\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u767b\u5f55\u548c SASL \u670d\u52a1\u5668\u56de\u8c03\u5904\u7406\u7a0b\u5e8f\u6765\u8986\u76d6\u9ed8\u8ba4\u7684\u4e0d\u5b89\u5168 SASL/OAUTHBEARER \u5b9e\u73b0\uff08\u5e76\u4e14\u5fc5\u987b\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8986\u76d6\uff09\u3002 \u6709\u5173 OAuth 2 \u4e00\u822c\u5b89\u5168\u6ce8\u610f\u4e8b\u9879\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 RFC 6749\uff0c\u7b2c 10 \u8282 \u3002","title":"SASL/OAUTHBEARER \u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879"},{"location":"7/#sasl_2","text":"\u5728JAAS \u914d\u7f6e\u6587\u4ef6\u7684KafkaServer\u90e8\u5206\u4e2d\u6307\u5b9a\u6240\u6709\u542f\u7528\u673a\u5236\u7684\u767b\u5f55\u6a21\u5757\u7684\u914d\u7f6e\u3002\u4f8b\u5982\uff1a KafkaServer { com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true storeKey=true keyTab=\"/etc/security/keytabs/kafka_server.keytab\" principal=\"kafka/kafka1.hostname.com@EXAMPLE.COM\"; org.apache.kafka.common.security.plain.PlainLoginModule required username=\"admin\" password=\"admin-secret\" user_admin=\"admin-secret\" user_alice=\"alice-secret\"; }; \u5728 server.properties \u4e2d\u542f\u7528 SASL \u673a\u5236\uff1a sasl.enabled.mechanisms=GSSAPI,PLAIN,SCRAM-SHA-256,SCRAM-SHA-512,OAUTHBEARER \u5982\u679c\u9700\u8981\uff0c\u8bf7\u5728 server.properties \u4e2d\u6307\u5b9a\u7528\u4e8e\u4ee3\u7406\u95f4\u901a\u4fe1\u7684 SASL \u5b89\u5168\u534f\u8bae\u548c\u673a\u5236\uff1a security.inter.broker.protocol=SASL_PLAINTEXT (or SASL_SSL) sasl.mechanism.inter.broker.protocol=GSSAPI (or one of the other enabled mechanisms) \u6309\u7167GSSAPI (Kerberos) \u3001 PLAIN \u3001 SCRAM \u548c OAUTHBEARER \u4e2d\u7279\u5b9a\u4e8e\u673a\u5236\u7684\u6b65\u9aa4 \u4e3a\u542f\u7528\u7684\u673a\u5236\u914d\u7f6e SASL\u3002","title":"\u5728\u4ee3\u7406\u4e2d\u542f\u7528\u591a\u4e2a SASL \u673a\u5236"},{"location":"7/#sasl_3","text":"\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u987a\u5e8f\u5728\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u4e2d\u4fee\u6539 SASL \u673a\u5236\uff1a \u901a\u8fc7\u5c06\u673a\u5236\u6dfb\u52a0\u5230\u6bcf\u4e2a\u4ee3\u7406\u7684 server.properties \u4e2d\u7684sasl.enabled.mechanisms\u4e2d\uff0c\u542f\u7528\u65b0\u7684 SASL \u673a\u5236\u3002\u66f4\u65b0 JAAS \u914d\u7f6e\u6587\u4ef6\u4ee5\u5305\u62ec \u6b64\u5904 \u6240\u8ff0\u7684\u4e24\u79cd\u673a\u5236\u3002\u589e\u91cf\u53cd\u5f39\u96c6\u7fa4\u8282\u70b9\u3002 \u4f7f\u7528\u65b0\u673a\u5236\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\u3002 \u8981\u66f4\u6539\u4ee3\u7406\u95f4\u901a\u4fe1\u7684\u673a\u5236\uff08\u5982\u679c\u9700\u8981\uff09\uff0c\u8bf7\u5c06server.properties \u4e2d\u7684sasl.mechanism.inter.broker.protocol\u8bbe\u7f6e\u4e3a\u65b0\u673a\u5236\uff0c\u5e76\u518d\u6b21\u589e\u91cf\u5730\u5f39\u8df3\u96c6\u7fa4\u3002 \u8981\u5220\u9664\u65e7\u673a\u5236\uff08\u5982\u679c\u9700\u8981\uff09\uff0c\u8bf7\u4eceserver.properties \u4e2d\u7684sasl.enabled.mechanisms\u4e2d\u5220\u9664\u65e7\u673a\u5236\uff0c\u5e76\u4ece JAAS \u914d\u7f6e\u6587\u4ef6\u4e2d\u5220\u9664\u65e7\u673a\u5236\u7684\u6761\u76ee\u3002\u518d\u6b21\u589e\u91cf\u5730\u53cd\u5f39\u96c6\u7fa4\u3002","title":"\u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u4e2d\u7684SASL\u673a\u5236"},{"location":"7/#_5","text":"\u57fa\u4e8e\u59d4\u6258\u4ee4\u724c\u7684\u8eab\u4efd\u9a8c\u8bc1\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\uff0c\u53ef\u8865\u5145\u73b0\u6709\u7684 SASL/SSL \u65b9\u6cd5\u3002\u59d4\u6258\u4ee4\u724c\u662f kafka broker\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u5171\u4eab\u79d8\u5bc6\u3002\u59d4\u6d3e\u4ee4\u724c\u5c06\u5e2e\u52a9\u5904\u7406\u6846\u67b6\u5c06\u5de5\u4f5c\u8d1f\u8f7d\u5206\u914d\u7ed9\u5b89\u5168\u73af\u5883\u4e2d\u7684\u53ef\u7528\u5de5\u4f5c\u4eba\u5458\uff0c\u800c\u65e0\u9700\u5728\u4f7f\u7528 2 \u5411 SSL \u65f6\u589e\u52a0\u5206\u914d Kerberos TGT/\u5bc6\u94a5\u8868\u6216\u5bc6\u94a5\u5e93\u7684\u6210\u672c\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-48 \u3002 \u5728\u9ed8\u8ba4\u5b9e\u73b0\u4e0b principal.builder.class \uff0c\u59d4\u6258\u4ee4\u724c\u7684\u6240\u6709\u8005\u7528\u4f5c Principal ACL \u7b49\u914d\u7f6e\u7684 \u8eab\u4efd\u9a8c\u8bc1\u3002 \u4f7f\u7528\u59d4\u6258\u4ee4\u724c\u7684\u5178\u578b\u6b65\u9aa4\u662f\uff1a \u7528\u6237\u901a\u8fc7 SASL \u6216 SSL \u5411 Kafka \u96c6\u7fa4\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5e76\u83b7\u53d6\u59d4\u6258\u4ee4\u724c\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u7ba1\u7406 API \u6216\u4f7f\u7528kafka-delegation-tokens.sh\u811a\u672c\u6765\u5b8c\u6210\u3002 \u7528\u6237\u5c06\u59d4\u6258\u4ee4\u724c\u5b89\u5168\u5730\u4f20\u9012\u7ed9 Kafka \u5ba2\u6237\u7aef\uff0c\u4ee5\u4fbf\u901a\u8fc7 Kafka \u96c6\u7fa4\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u4ee4\u724c\u6240\u6709\u8005/\u66f4\u65b0\u8005\u53ef\u4ee5\u66f4\u65b0/\u8fc7\u671f\u59d4\u6258\u4ee4\u724c\u3002","title":"\u4f7f\u7528\u59d4\u6258\u4ee4\u724c\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#_6","text":"\u79d8\u5bc6\u7528\u4e8e\u751f\u6210\u548c\u9a8c\u8bc1\u59d4\u6258\u4ee4\u724c\u3002\u8fd9\u662f\u4f7f\u7528\u914d\u7f6e\u9009\u9879delegate.token.secret.key\u63d0\u4f9b\u7684\u3002\u5fc5\u987b\u5728\u6240\u6709\u4ee3\u7406\u4e4b\u95f4\u914d\u7f6e\u76f8\u540c\u7684\u5bc6\u94a5\u3002\u5982\u679c\u5bc6\u94a5\u672a\u8bbe\u7f6e\u6216\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u4ee3\u7406\u5c06\u7981\u7528\u59d4\u6258\u4ee4\u724c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5728\u5f53\u524d\u7684\u5b9e\u73b0\u4e2d\uff0c\u4ee4\u724c\u8be6\u7ec6\u4fe1\u606f\u5b58\u50a8\u5728 Zookeeper \u4e2d\uff0c\u9002\u5408\u5728 Zookeeper \u4f4d\u4e8e\u4e13\u7528\u7f51\u7edc\u4e0a\u7684 Kafka \u5b89\u88c5\u4e2d\u4f7f\u7528\u3002\u76ee\u524d\uff0c\u6b64\u673a\u5bc6\u4ee5\u7eaf\u6587\u672c\u5f62\u5f0f\u5b58\u50a8\u5728 server.properties \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u6211\u4eec\u6253\u7b97\u5728\u672a\u6765\u7684 Kafka \u7248\u672c\u4e2d\u5bf9\u8fd9\u4e9b\u8fdb\u884c\u914d\u7f6e\u3002 \u4ee3\u5e01\u5177\u6709\u5f53\u524d\u5bff\u547d\u548c\u6700\u5927\u53ef\u518d\u751f\u5bff\u547d\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ee4\u724c\u5fc5\u987b\u6bcf 24 \u5c0f\u65f6\u66f4\u65b0\u4e00\u6b21\uff0c\u6700\u591a 7 \u5929\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4f7f\u7528delegation.token.expiry.time.ms \u548cdelegation.token.max.lifetime.ms\u914d\u7f6e\u9009\u9879\u8fdb\u884c\u914d\u7f6e\u3002 \u4ee4\u724c\u4e5f\u53ef\u4ee5\u663e\u5f0f\u53d6\u6d88\u3002\u5982\u679c\u4ee4\u724c\u5728\u4ee4\u724c\u8fc7\u671f\u65f6\u95f4\u5185\u672a\u66f4\u65b0\uff0c\u6216\u8005\u4ee4\u724c\u8d85\u51fa\u4e86\u6700\u5927\u751f\u547d\u5468\u671f\uff0c\u5219\u5c06\u4ece\u6240\u6709\u4ee3\u7406\u7f13\u5b58\u4ee5\u53ca Zookeeper \u4e2d\u5220\u9664\u8be5\u4ee4\u724c\u3002","title":"\u4ee3\u5e01\u7ba1\u7406"},{"location":"7/#_7","text":"\u53ef\u4ee5\u4f7f\u7528\u7ba1\u7406 API \u6216\u4f7f\u7528kafka-delegation-tokens.sh\u811a\u672c\u521b\u5efa\u4ee4\u724c\u3002\u59d4\u6258\u4ee4\u724c\u8bf7\u6c42\uff08\u521b\u5efa/\u66f4\u65b0/\u8fc7\u671f/\u63cf\u8ff0\uff09\u5e94\u4ec5\u5728 SASL \u6216 SSL \u8eab\u4efd\u9a8c\u8bc1\u901a\u9053\u4e0a\u53d1\u51fa\u3002\u5982\u679c\u901a\u8fc7\u59d4\u6258\u4ee4\u724c\u5b8c\u6210\u521d\u59cb\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u65e0\u6cd5\u8bf7\u6c42\u4ee4\u724c\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a--owner-principal\u53c2\u6570\u4e3a\u8be5\u7528\u6237\u6216\u5176\u4ed6\u4eba\u521b\u5efa\u4ee4\u724c\u3002\u6240\u6709\u8005/\u66f4\u65b0\u8005\u53ef\u4ee5\u66f4\u65b0\u6216\u8fc7\u671f\u4ee4\u724c\u3002\u6240\u6709\u8005/\u66f4\u65b0\u8005\u59cb\u7ec8\u53ef\u4ee5\u63cf\u8ff0\u81ea\u5df1\u7684\u4ee3\u5e01\u3002\u8981\u63cf\u8ff0\u5176\u4ed6\u4ee4\u724c\uff0c\u9700\u8981\u5728\u4ee3\u8868\u4ee4\u724c\u6240\u6709\u8005\u7684\u7528\u6237\u8d44\u6e90\u4e0a\u6dfb\u52a0 DESCRIBE_TOKEN \u6743\u9650\u3002 \u4e0b\u9762\u7ed9\u51fa\u4e86kafka-delegation-tokens.sh\u811a\u672c\u793a\u4f8b\u3002 \u521b\u5efa\u59d4\u6258\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --create --max-life-time-period -1 --command-config client.properties --renewer-principal User:user1 \u4e3a\u4e0d\u540c\u7684\u6240\u6709\u8005\u521b\u5efa\u59d4\u6258\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --create --max-life-time-period -1 --command-config client.properties --renewer-principal User:user1 --owner-principal User:owner1 \u66f4\u65b0\u59d4\u6258\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --renew --renew-time-period -1 --command-config client.properties --hmac ABCDEFGHIJK \u4f7f\u59d4\u6258\u4ee4\u724c\u8fc7\u671f\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --expire --expiry-time-period -1 --command-config client.properties --hmac ABCDEFGHIJK \u53ef\u4ee5\u4f7f\u7528 --describe \u9009\u9879\u63cf\u8ff0\u73b0\u6709\u4ee4\u724c\uff1a > bin/kafka-delegation-tokens.sh --bootstrap-server localhost:9092 --describe --command-config client.properties --owner-principal User:user1","title":"\u521b\u5efa\u59d4\u6258\u4ee4\u724c"},{"location":"7/#_8","text":"\u59d4\u6258\u4ee4\u724c\u8eab\u4efd\u9a8c\u8bc1\u642d\u8f7d\u5f53\u524d SASL/SCRAM \u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u3002\u6211\u4eec\u5fc5\u987b\u5728 Kafka \u96c6\u7fa4\u4e0a\u542f\u7528 SASL/SCRAM \u673a\u5236\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002 \u914d\u7f6e Kafka \u5ba2\u6237\u7aef\uff1a \u5728 Producer.properties \u6216 Consumer.properties \u4e2d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u914d\u7f6e JAAS \u914d\u7f6e\u5c5e\u6027\u3002\u767b\u5f55\u6a21\u5757\u63cf\u8ff0\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7b49\u5ba2\u6237\u7aef\u5982\u4f55\u8fde\u63a5\u5230 Kafka Broker\u3002\u4ee5\u4e0b\u662f\u7528\u4e8e\u4ee4\u724c\u8eab\u4efd\u9a8c\u8bc1\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u793a\u4f8b\uff1a sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \\ username=\"tokenID123\" \\ password=\"lAYYSFmLs4bTjf+lTZ1LCHR/ZZFNA==\" \\ tokenauth=\"true\"; \u5ba2\u6237\u7aef\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u9009\u9879\u6765\u914d\u7f6e\u4ee4\u724c id \u548c\u4ee4\u724c HMAC\u3002tokenauth\u9009\u9879\u7528\u4e8e\u5411\u670d\u52a1\u5668\u6307\u793a\u4ee4\u724c\u8ba4\u8bc1\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528\u4ee4\u724c id \u8fde\u63a5\u5230\u4ee3\u7406\uff1a tokenID123 \u3002JVM \u4e2d\u7684\u4e0d\u540c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728 \u4e2d\u6307\u5b9a\u4e0d\u540c\u7684\u4ee4\u724c\u8be6\u7ec6\u4fe1\u606f\u6765\u4f7f\u7528\u4e0d\u540c\u7684\u4ee4\u724c\u8fdb\u884c\u8fde\u63a5 sasl.jaas.config \u3002 \u5ba2\u6237\u7aef\u7684 JAAS \u914d\u7f6e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\u7684 JVM \u53c2\u6570\uff0c\u5982\u6b64\u5904 \u6240\u8ff0 \u3002\u5ba2\u6237\u7aef\u4f7f\u7528\u540d\u4e3aKafkaClient\u7684\u767b\u5f55\u90e8\u5206 \u3002\u6b64\u9009\u9879\u4ec5\u5141\u8bb8\u4e00\u540d\u7528\u6237\u8fdb\u884c\u6765\u81ea JVM \u7684\u6240\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u3002","title":"\u4ee4\u724c\u8ba4\u8bc1"},{"location":"7/#_9","text":"\u5f53\u79d8\u5bc6\u9700\u8981\u8f6e\u6362\u65f6\uff0c\u6211\u4eec\u9700\u8981\u91cd\u65b0\u90e8\u7f72\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u5df2\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002\u4f46\u662f\u4efb\u4f55\u65b0\u7684\u8fde\u63a5\u8bf7\u6c42\u548c\u4f7f\u7528\u65e7\u4ee4\u724c\u7684\u7eed\u8ba2/\u8fc7\u671f\u8bf7\u6c42\u90fd\u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u6b65\u9aa4\u5982\u4e0b\u3002 \u4f7f\u6240\u6709\u73b0\u6709\u4ee4\u724c\u8fc7\u671f\u3002 \u901a\u8fc7\u6eda\u52a8\u5347\u7ea7\u8f6e\u6362\u79d8\u5bc6\uff0c\u5e76\u4e14 \u751f\u6210\u65b0\u7684\u4ee3\u5e01 \u6211\u4eec\u6253\u7b97\u5728\u672a\u6765\u7684 Kafka \u7248\u672c\u4e2d\u5b9e\u73b0\u81ea\u52a8\u5316\u3002","title":"\u624b\u52a8\u8f6e\u6362\u673a\u5bc6\u7684\u8fc7\u7a0b\uff1a"},{"location":"7/#75-acl","text":"Kafka \u9644\u5e26\u4e86\u4e00\u4e2a\u53ef\u63d2\u5165\u7684\u6388\u6743\u6846\u67b6\uff0c\u8be5\u6846\u67b6\u5728\u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u4f7f\u7528authorizer.class.name\u5c5e\u6027\u8fdb\u884c\u914d\u7f6e\u3002\u914d\u7f6e\u7684\u5b9e\u73b0\u5fc5\u987b\u6269\u5c55 org.apache.kafka.server.authorizer.Authorizer \u3002Kafka \u63d0\u4f9b\u4e86\u5c06 ACL \u5b58\u50a8\u5728\u96c6\u7fa4\u5143\u6570\u636e\uff08Zookeeper \u6216 KRaft \u5143\u6570\u636e\u65e5\u5fd7\uff09\u4e2d\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002\u5bf9\u4e8e\u57fa\u4e8eZookeeper\u7684\u96c6\u7fa4\uff0c\u63d0\u4f9b\u7684\u5b9e\u73b0\u914d\u7f6e\u5982\u4e0b\uff1a authorizer.class.name=kafka.security.authorizer.AclAuthorizer \u5bf9\u4e8e KRaft \u96c6\u7fa4\uff0c\u5728\u6240\u6709\u8282\u70b9\uff08\u4ee3\u7406\u3001\u63a7\u5236\u5668\u6216\u7ec4\u5408\u4ee3\u7406/\u63a7\u5236\u5668\u8282\u70b9\uff09\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\uff1a authorizer.class.name=org.apache.kafka.metadata.authorizer.StandardAuthorizer Kafka ACL \u7684\u901a\u7528\u683c\u5f0f\u662f\u201c\u4e3b\u4f53 {P} \u662f[\u5141\u8bb8|\u62d2\u7edd]\u6765\u81ea\u4e3b\u673a {H} \u7684\u4efb\u4f55\u4e0e ResourcePattern {RP} \u5339\u914d\u7684\u8d44\u6e90 {R} \u4e0a\u7684\u64cd\u4f5c {O}\u201d\u3002 \u60a8\u53ef\u4ee5\u5728KIP-11 \u4e2d\u9605\u8bfb\u6709\u5173 ACL \u7ed3\u6784\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u5728 KIP-290 \u4e2d\u9605\u8bfb\u6709\u5173\u8d44\u6e90\u6a21\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\u3002\u8981\u6dfb\u52a0\u3001\u5220\u9664\u6216\u5217\u51fa ACL\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 Kafka ACL CLI kafka-acls.sh \u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709 ResourcePatterns \u4e0e\u7279\u5b9a\u8d44\u6e90 R \u5339\u914d\uff0c\u5219 R \u6ca1\u6709\u5173\u8054\u7684 ACL\uff0c\u56e0\u6b64\u9664\u4e86\u8d85\u7ea7\u7528\u6237\u4e4b\u5916\uff0c\u4efb\u4f55\u4eba\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee R\u3002\u5982\u679c\u8981\u66f4\u6539\u8be5\u884c\u4e3a\uff0c\u53ef\u4ee5\u5728 server.properties \u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u3002 allow.everyone.if.no.acl.found=true \u8fd8\u53ef\u4ee5\u5728 server.properties \u4e2d\u6dfb\u52a0\u8d85\u7ea7\u7528\u6237\uff0c\u5982\u4e0b\u6240\u793a\uff08\u8bf7\u6ce8\u610f\uff0c\u5206\u9694\u7b26\u662f\u5206\u53f7\uff0c\u56e0\u4e3a SSL \u7528\u6237\u540d\u53ef\u80fd\u5305\u542b\u9017\u53f7\uff09\u3002\u9ed8\u8ba4\u7684 PrimaryType \u5b57\u7b26\u4e32\u201cUser\u201d\u533a\u5206\u5927\u5c0f\u5199\u3002 super.users=User:Bob;User:Alice","title":"7.5 \u6388\u6743\u548c ACL"},{"location":"7/#kraft","text":"\u5728 KRaft \u96c6\u7fa4\u4e2d\uff0c\u8bf8\u5982 CreateTopics \u548c \u4e4b\u7c7b\u7684\u7ba1\u7406\u8bf7\u6c42 DeleteTopics \u7531\u5ba2\u6237\u7aef\u53d1\u9001\u5230\u4ee3\u7406\u4fa6\u542c\u5668\u3002\u7136\u540e\uff0c\u4ee3\u7406\u901a\u8fc7\u5728 \u4e2d\u914d\u7f6e\u7684\u7b2c\u4e00\u4e2a\u4fa6\u542c\u5668\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230\u6d3b\u52a8\u63a7\u5236\u5668 controller.listener.names \u3002\u8fd9\u4e9b\u8bf7\u6c42\u7684\u6388\u6743\u662f\u5728\u63a7\u5236\u5668\u8282\u70b9\u4e0a\u5b8c\u6210\u7684\u3002\u8fd9\u662f\u901a\u8fc7 Envelope \u6253\u5305\u6765\u81ea\u5ba2\u6237\u7aef\u548c\u5ba2\u6237\u7aef\u4e3b\u4f53\u7684\u5e95\u5c42\u8bf7\u6c42\u7684\u8bf7\u6c42\u6765\u5b9e\u73b0\u7684\u3002\u5f53\u63a7\u5236\u5668\u6536\u5230 Envelope \u4ee3\u7406\u8f6c\u53d1\u7684\u8bf7\u6c42\u65f6\uff0c\u5b83\u9996\u5148 Envelope \u4f7f\u7528\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u4ee3\u7406\u4e3b\u4f53\u6765\u6388\u6743\u8be5\u8bf7\u6c42\u3002\u7136\u540e\u5b83\u4f7f\u7528\u8f6c\u53d1\u7684\u4e3b\u4f53\u6388\u6743\u5e95\u5c42\u8bf7\u6c42\u3002 \u6240\u6709\u8fd9\u4e9b\u90fd\u610f\u5473\u7740 Kafka \u5fc5\u987b\u4e86\u89e3\u5982\u4f55\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u5ba2\u6237\u7aef\u4e3b\u4f53\u3002\u8eab\u4efd\u9a8c\u8bc1\u6846\u67b6\u5141\u8bb8\u901a\u8fc7\u8986\u76d6 principal.builder.class \u914d\u7f6e\u6765\u5b9a\u5236\u4e3b\u4f53\u3002\u4e3a\u4e86\u4f7f\u81ea\u5b9a\u4e49\u4e3b\u4f53\u80fd\u591f\u4e0e KRaft \u4e00\u8d77\u4f7f\u7528\uff0c\u914d\u7f6e\u7684\u7c7b\u5fc5\u987b\u5b9e\u73b0\uff0c org.apache.kafka.common.security.auth.KafkaPrincipalSerde \u4ee5\u4fbf Kafka \u77e5\u9053\u5982\u4f55\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u4e3b\u4f53\u3002\u9ed8\u8ba4\u5b9e\u73b0 org.apache.kafka.common.security.authenticator.DefaultKafkaPrincipalBuilder \u4f7f\u7528\u6e90\u4ee3\u7801\u4e2d\u5b9a\u4e49\u7684 Kafka RPC \u683c\u5f0f\uff1a clients/src/main/resources/common/message/DefaultPrincipalData.json \u3002\u6709\u5173 KRaft \u4e2d\u8bf7\u6c42\u8f6c\u53d1\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-590","title":"Kraft \u4e3b\u8981\u8f6c\u53d1"},{"location":"7/#ssl","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSSL \u7528\u6237\u540d\u7684\u683c\u5f0f\u4e3a\u201cCN=writeuser,OU=Unknown,O=Unknown,L=Unknown,ST=Unknown,C=Unknown\u201d\u3002\u4eba\u4eec\u53ef\u4ee5\u901a\u8fc7 ssl.principal.mapping.rules \u5728 server.properties \u4e2d\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u89c4\u5219\u6765\u66f4\u6539\u8fd9\u4e00\u70b9\u3002\u6b64\u914d\u7f6e\u5141\u8bb8\u5c06 X.500 \u53ef\u5206\u8fa8\u540d\u79f0\u6620\u5c04\u5230\u77ed\u540d\u79f0\u7684\u89c4\u5219\u5217\u8868\u3002\u89c4\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u8bc4\u4f30\uff0c\u5e76\u4e14\u4e0e\u4e13\u6709\u540d\u79f0\u5339\u914d\u7684\u7b2c\u4e00\u4e2a\u89c4\u5219\u7528\u4e8e\u5c06\u5176\u6620\u5c04\u5230\u77ed\u540d\u79f0\u3002\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u540e\u7eed\u89c4\u5219\u90fd\u5c06\u88ab\u5ffd\u7565\u3002 \u683c\u5f0f\u4e3a ssl.principal.mapping.rules \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a\u89c4\u5219\u90fd\u4ee5\u201cRULE:\u201d\u5f00\u5934\uff0c\u5e76\u5305\u542b\u4ee5\u4e0b\u683c\u5f0f\u7684\u8868\u8fbe\u5f0f\u3002\u9ed8\u8ba4\u89c4\u5219\u5c06\u8fd4\u56de X.500 \u8bc1\u4e66\u4e13\u6709\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002\u5982\u679c\u4e13\u6709\u540d\u79f0\u4e0e\u6a21\u5f0f\u5339\u914d\uff0c\u5219\u5c06\u5bf9\u8be5\u540d\u79f0\u8fd0\u884c\u66ff\u6362\u547d\u4ee4\u3002\u5b83\u8fd8\u652f\u6301\u5c0f\u5199/\u5927\u5199\u9009\u9879\uff0c\u4ee5\u5f3a\u5236\u7ffb\u8bd1\u7ed3\u679c\u5168\u90e8\u4e3a\u5c0f\u5199/\u5927\u5199\u3002\u8fd9\u662f\u901a\u8fc7\u5728\u89c4\u5219\u672b\u5c3e\u6dfb\u52a0\u201c/L\u201d\u6216\u201c/U\u201d\u6765\u5b8c\u6210\u7684\u3002 RULE:pattern/replacement/ RULE:pattern/replacement/[LU] \u793a\u4f8b ssl.principal.mapping.rules \u503c\u662f\uff1a RULE:^CN=(.*?),OU=ServiceUsers.*$/$1/, RULE:^CN=(.*?),OU=(.*?),O=(.*?),L=(.*?),ST=(.*?),C=(.*?)$/$1@$2/L, RULE:^.*[Cc][Nn]=([a-zA-Z0-9.]*).*$/$1/L, DEFAULT \u4e0a\u8ff0\u89c4\u5219\u5c06\u4e13\u6709\u540d\u79f0\u201cCN=serviceuser,OU=ServiceUsers,O=Unknown,L=Unknown,ST=Unknown,C=Unknown\u201d\u8f6c\u6362\u4e3a\u201cserviceuser\u201d\u548c\u201cCN=adminUser,OU=Admin,O=Unknown,L=\u201d\u672a\u77e5\uff0cST=\u672a\u77e5\uff0cC=\u672a\u77e5\u201d\u5230\u201cadminuser@admin\u201d\u3002 \u5bf9\u4e8e\u9ad8\u7ea7\u7528\u4f8b\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728 server.properties \u4e2d\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u7684 PrimaryBuilder \u6765\u81ea\u5b9a\u4e49\u540d\u79f0\uff0c\u5982\u4e0b\u6240\u793a\u3002 principal.builder.class=CustomizedPrincipalBuilderClass","title":"\u81ea\u5b9a\u4e49 SSL \u7528\u6237\u540d"},{"location":"7/#sasl_4","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSASL \u7528\u6237\u540d\u5c06\u662f Kerberos \u4e3b\u4f53\u7684\u4e3b\u8981\u90e8\u5206\u3002\u4eba\u4eec\u53ef\u4ee5\u901a\u8fc7 sasl.kerberos.principal.to.local.rules \u5728 server.properties \u4e2d\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u89c4\u5219\u6765\u66f4\u6539\u8fd9\u4e00\u70b9\u3002\u7684\u683c\u5f0f\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a\u89c4\u5219\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e Kerberos \u914d\u7f6e\u6587\u4ef6 (krb5.conf) sasl.kerberos.principal.to.local.rules \u4e2d\u7684 auth_to_local \u76f8\u540c\u3002\u8fd9\u8fd8\u652f\u6301\u989d\u5916\u7684\u5c0f\u5199/\u5927\u5199\u89c4\u5219\uff0c\u4ee5\u5f3a\u5236\u7ffb\u8bd1\u7ed3\u679c\u5168\u90e8\u4e3a\u5c0f\u5199/\u5927\u5199\u3002\u8fd9\u662f\u901a\u8fc7\u5728\u89c4\u5219\u672b\u5c3e\u6dfb\u52a0\u201c/L\u201d\u6216\u201c/U\u201d\u6765\u5b8c\u6210\u7684\u3002\u68c0\u67e5\u4ee5\u4e0b\u683c\u5f0f\u7684\u8bed\u6cd5\u3002\u6bcf\u6761\u89c4\u5219\u5747\u4ee5 RULE: \u5f00\u5934\uff0c\u5e76\u5305\u542b\u5982\u4e0b\u683c\u5f0f\u7684\u8868\u8fbe\u5f0f\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 kerberos \u6587\u6863\u3002 RULE:[n:string](regexp)s/pattern/replacement/ RULE:[n:string](regexp)s/pattern/replacement/g RULE:[n:string](regexp)s/pattern/replacement//L RULE:[n:string](regexp)s/pattern/replacement/g/L RULE:[n:string](regexp)s/pattern/replacement//U RULE:[n:string](regexp)s/pattern/replacement/g/U \u6dfb\u52a0\u89c4\u5219\u4ee5\u5c06 user@MYDOMAIN.COM \u6b63\u786e\u8f6c\u6362\u4e3a user \u540c\u65f6\u4fdd\u7559\u9ed8\u8ba4\u89c4\u5219\u7684\u793a\u4f8b\u5982\u4e0b\uff1a sasl.kerberos.principal.to.local.rules=RULE:[1:$1@$0](.*@MYDOMAIN.COM)s/@.*//,DEFAULT","title":"\u81ea\u5b9a\u4e49 SASL \u7528\u6237\u540d"},{"location":"7/#_10","text":"Kafka \u6388\u6743\u7ba1\u7406 CLI \u4e0e\u6240\u6709\u5176\u4ed6 CLI \u90fd\u53ef\u4ee5\u5728 bin \u76ee\u5f55\u4e0b\u627e\u5230\u3002CLI \u811a\u672c\u79f0\u4e3a kafka-acls.sh \u3002\u4ee5\u4e0b\u5217\u51fa\u4e86\u8be5\u811a\u672c\u652f\u6301\u7684\u6240\u6709\u9009\u9879\uff1a OPTION DESCRIPTION DEFAULT OPTION TYPE --add Indicates to the script that user is trying to add an acl. Action --remove Indicates to the script that user is trying to remove an acl. Action --list Indicates to the script that user is trying to list acls. Action --bootstrap-server A list of host/port pairs to use for establishing the connection to the Kafka cluster. Only one of --bootstrap-server or --authorizer option must be specified. Configuration --command-config A property file containing configs to be passed to Admin Client. This option can only be used with --bootstrap-server option. Configuration --cluster Indicates to the script that the user is trying to interact with acls on the singular cluster resource. ResourcePattern --topic [topic-name] Indicates to the script that the user is trying to interact with acls on topic resource pattern(s). ResourcePattern --group [group-name] Indicates to the script that the user is trying to interact with acls on consumer-group resource pattern(s) ResourcePattern --transactional-id [transactional-id] The transactionalId to which ACLs should be added or removed. A value of * indicates the ACLs should apply to all transactionalIds. ResourcePattern --delegation-token [delegation-token] Delegation token to which ACLs should be added or removed. A value of * indicates ACL should apply to all tokens. ResourcePattern --user-principal [user-principal] A user resource to which ACLs should be added or removed. This is currently supported in relation with delegation tokens. A value of * indicates ACL should apply to all users. ResourcePattern --resource-pattern-type [pattern-type] Indicates to the script the type of resource pattern, (for --add), or resource pattern filter, (for --list and --remove), the user wishes to use. \\n When adding acls, this should be a specific pattern type, e.g. 'literal' or 'prefixed'. \\n When listing or removing acls, a specific pattern type filter can be used to list or remove acls from a specific type of resource pattern, or the filter values of 'any' or 'match' can be used, where 'any' will match any pattern type, but will match the resource name exactly, and 'match' will perform pattern matching to list or remove all acls that affect the supplied resource(s). \\n WARNING: 'match', when used in combination with the '--remove' switch, should be used with care. literal Configuration --allow-principal Principal is in PrincipalType:name format that will be added to ACL with Allow permission. Default PrincipalType string \"User\" is case sensitive. \\n You can specify multiple --allow-principal in a single command. Principal --deny-principal Principal is in PrincipalType:name format that will be added to ACL with Deny permission. Default PrincipalType string \"User\" is case sensitive. \\n You can specify multiple --deny-principal in a single command. Principal --principal Principal is in PrincipalType:name format that will be used along with --list option. Default PrincipalType string \"User\" is case sensitive. This will list the ACLs for the specified principal. \\n You can specify multiple --principal in a single command. Principal --allow-host IP address from which principals listed in --allow-principal will have access. if --allow-principal is specified defaults to * which translates to \"all hosts\" Host --deny-host IP address from which principals listed in --deny-principal will be denied access. if --deny-principal is specified defaults to * which translates to \"all hosts\" Host --operation Operation that will be allowed or denied. \\n\u6709\u6548\u503c\u4e3a\uff1a\\n Read\\n Write\\n Create\\n Delete\\n Alter\\n Describe\\n ClusterAction\\n DescribeConfigs\\n AlterConfigs\\n IdempotentWrite\\n CreateTokens\\n DescribeTokens\\n* All All Operation --producer Convenience option to add/remove acls for producer role. This will generate acls that allows WRITE, DESCRIBE and CREATE on topic. Convenience --consumer Convenience option to add/remove acls for consumer role. This will generate acls that allows READ, DESCRIBE on topic and READ on consumer-group. Convenience --idempotent Enable idempotence for the producer. This should be used in combination with the --producer option. \\n Note that idempotence is enabled automatically if the producer is authorized to a particular transactional-id. Convenience --force Convenience option to assume yes to all queries and do not prompt. Convenience --authorizer (DEPRECATED: not supported in KRaft) Fully qualified class name of the authorizer. kafka.security.authorizer.AclAuthorizer Configuration --authorizer-properties (DEPRECATED: not supported in KRaft) key=val pairs that will be passed to authorizer for initialization. For the default authorizer in ZK clsuters, the example values are: zookeeper.connect=localhost:2181 Configuration --zk-tls-config-file (DEPRECATED: not supported in KRaft) Identifies the file where ZooKeeper client TLS connectivity properties for the authorizer are defined. Any properties other than the following (with or without an \"authorizer.\" prefix) are ignored: zookeeper.clientCnxnSocket, zookeeper.ssl.cipher.suites, zookeeper.ssl.client.enable, zookeeper.ssl.crl.enable, zookeeper.ssl.enabled.protocols, zookeeper.ssl.endpoint.identification.algorithm, zookeeper.ssl.keystore.location, zookeeper.ssl.keystore.password, zookeeper.ssl.keystore.type, zookeeper.ssl.ocsp.enable, zookeeper.ssl.protocol, zookeeper.ssl.truststore.location, zookeeper.ssl.truststore.password, zookeeper.ssl.truststore.type Configuration","title":"\u547d\u4ee4\u884c\u754c\u9762"},{"location":"7/#_11","text":"\u6dfb\u52a0ACL \u5047\u8bbe\u60a8\u8981\u6dfb\u52a0\u4e00\u6761ACL\u201c\u5141\u8bb8\u4e3b\u4f53User:Bob \u548cUser:Alice \u5bf9\u6765\u81eaIP 198.51.100.0 \u548cIP 198.51.100.1 \u7684Topic Test-Topic \u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u201d\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI \u6765\u505a\u5230\u8fd9\u4e00\u70b9\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Bob --allow-principal User:Alice --allow-host 198.51.100.0 --allow-host 198.51.100.1 --operation Read --operation Write --topic Test-topic \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u4e0d\u5177\u6709\u5141\u8bb8\u8bbf\u95ee\u8d44\u6e90\u64cd\u4f5c\u7684\u663e\u5f0f acl \u7684\u4e3b\u4f53\u90fd\u4f1a\u88ab\u62d2\u7edd\u3002\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u5b9a\u4e49\u4e86\u5141\u8bb8\u8bbf\u95ee\u9664\u67d0\u4e9b\u4e3b\u4f53\u4e4b\u5916\u7684\u6240\u6709\u4e3b\u4f53\u7684\u5141\u8bb8 acl\uff0c\u6211\u4eec\u5c06\u5fc5\u987b\u4f7f\u7528 --deny-principal \u548c --deny-host \u9009\u9879\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u5141\u8bb8\u6240\u6709\u7528\u6237\u4ece Test-topic \u8bfb\u53d6\uff0c\u4f46\u4ec5\u62d2\u7edd\u6765\u81ea IP 198.51.100.3 \u7684 User:BadBob\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b9e\u73b0\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:'*' --allow-host '*' --deny-principal User:BadBob --deny-host 198.51.100.3 --operation Read --topic Test-topic \u8bf7\u6ce8\u610f\uff0c --allow-host \u548c --deny-host \u4ec5\u652f\u6301 IP \u5730\u5740\uff08\u4e0d\u652f\u6301\u4e3b\u673a\u540d\uff09\u3002\u4e0a\u9762\u7684\u793a\u4f8b\u901a\u8fc7\u6307\u5b9a --topic [topic-name] \u4f5c\u4e3a\u8d44\u6e90\u6a21\u5f0f\u9009\u9879\u5c06 acl \u6dfb\u52a0\u5230\u4e3b\u9898\u3002\u540c\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a --cluster \u5c06 acl \u6dfb\u52a0\u5230\u96c6\u7fa4\uff0c\u5e76\u901a\u8fc7\u6307\u5b9a --group [group-name] \u5c06 acl \u6dfb\u52a0\u5230\u6d88\u8d39\u8005\u7ec4\u3002\u60a8\u53ef\u4ee5\u5728\u67d0\u79cd\u7c7b\u578b\u7684\u4efb\u4f55\u8d44\u6e90\u4e0a\u6dfb\u52a0 acl\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u60f3\u6dfb\u52a0\u4e00\u4e2a acl\u201c\u4e3b\u8981\u7528\u6237\uff1aPeter \u88ab\u5141\u8bb8\u4ece IP 198.51.200.0 \u751f\u6210\u4efb\u4f55\u4e3b\u9898\u201d\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u901a\u914d\u7b26\u8d44\u6e90\u201c*\u201d\u6765\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u4f8b\u5982\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Peter --allow-host 198.51.200.1 --producer --topic '*' \u60a8\u53ef\u4ee5\u5728\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e0a\u6dfb\u52a0 acl\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u8981\u6dfb\u52a0\u4e00\u4e2a acl\u201c\u4e3b\u8981\u7528\u6237\uff1aJane \u88ab\u5141\u8bb8\u4ece\u4efb\u4f55\u4e3b\u673a\u751f\u6210\u540d\u79f0\u4ee5\u201cTest-\u201d\u5f00\u5934\u7684\u4efb\u4f55\u4e3b\u9898\u201d\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI \u6765\u505a\u5230\u8fd9\u4e00\u70b9\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Jane --producer --topic Test- --resource-pattern-type prefixed \u8bf7\u6ce8\u610f\uff0c--resource-pattern-type \u9ed8\u8ba4\u4e3a\u201cliteral\u201d\uff0c\u5b83\u4ec5\u5f71\u54cd\u5177\u6709\u5b8c\u5168\u76f8\u540c\u540d\u79f0\u7684\u8d44\u6e90\uff0c\u6216\u8005\u5728\u901a\u914d\u7b26\u8d44\u6e90\u540d\u79f0\u201c*\u201d\u7684\u60c5\u51b5\u4e0b\uff0c\u5f71\u54cd\u5177\u6709\u4efb\u4f55\u540d\u79f0\u7684\u8d44\u6e90\u3002 * \u5220\u9664 Acl \u5220\u9664 acl \u51e0\u4e4e\u662f\u76f8\u540c\u7684\u3002\u552f\u4e00\u7684\u533a\u522b\u662f\u7528\u6237\u5fc5\u987b\u6307\u5b9a --remove \u9009\u9879\uff0c\u800c\u4e0d\u662f --add \u9009\u9879\u3002\u8981\u5220\u9664\u4e0a\u9762\u7b2c\u4e00\u4e2a\u793a\u4f8b\u6dfb\u52a0\u7684 acl\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --remove --allow-principal User:Bob --allow-principal User:Alice --allow-host 198.51.100.0 --allow-host 198.51.100.1 --operation Read --operation Write --topic Test-topic \u5982\u679c\u60a8\u60f3\u5220\u9664\u6dfb\u52a0\u5230\u4e0a\u9762\u7684\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e2d\u7684 acl\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --remove --allow-principal User:Jane --producer --topic Test- --resource-pattern-type Prefixed \u5217\u51fa ACL \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e3a\u8d44\u6e90\u6307\u5b9a --list \u9009\u9879\u6765\u5217\u51fa\u4efb\u4f55\u8d44\u6e90\u7684 ACL\u3002\u8981\u5217\u51fa\u6587\u5b57\u8d44\u6e90\u6a21\u5f0f Test-topic \u4e0a\u7684\u6240\u6709 acl\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u9009\u9879\u6267\u884c CLI\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --list --topic Test-topic \u4f46\u662f\uff0c\u8fd9\u53ea\u4f1a\u8fd4\u56de\u5df2\u6dfb\u52a0\u5230\u8be5\u786e\u5207\u8d44\u6e90\u6a21\u5f0f\u7684 acl\u3002\u53ef\u80fd\u5b58\u5728\u5f71\u54cd\u5bf9\u4e3b\u9898\u7684\u8bbf\u95ee\u7684\u5176\u4ed6 acl\uff0c\u4f8b\u5982\u4e3b\u9898\u901a\u914d\u7b26\u201c*\u201d\u4e0a\u7684\u4efb\u4f55 acl\uff0c\u6216\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e0a\u7684\u4efb\u4f55 acl\u3002\u53ef\u4ee5\u663e\u5f0f\u67e5\u8be2\u901a\u914d\u7b26\u8d44\u6e90\u6a21\u5f0f\u4e0a\u7684 ACL\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --list --topic '*' \u4f46\u662f\uff0c\u4e0d\u4e00\u5b9a\u53ef\u4ee5\u5728\u4e0e Test-topic \u5339\u914d\u7684\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u4e0a\u663e\u5f0f\u67e5\u8be2 acl\uff0c\u56e0\u4e3a\u6b64\u7c7b\u6a21\u5f0f\u7684\u540d\u79f0\u53ef\u80fd\u672a\u77e5\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u201c--resource-pattern-type match\u201d\u5217\u51fa\u5f71\u54cd\u6d4b\u8bd5\u4e3b\u9898\u7684 \u6240\u6709acl\uff0c\u4f8b\u5982 > bin/kafka-acls.sh --bootstrap-server localhost:9092 --list --topic Test-topic --resource-pattern-type match \u8fd9\u5c06\u5217\u51fa\u6240\u6709\u5339\u914d\u6587\u5b57\u3001\u901a\u914d\u7b26\u548c\u524d\u7f00\u8d44\u6e90\u6a21\u5f0f\u7684 acl\u3002 * \u6dfb\u52a0\u6216\u5220\u9664\u4e3b\u4f53\u4f5c\u4e3a\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005 ACL \u7ba1\u7406\u6700\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u6dfb\u52a0/\u5220\u9664\u4e3b\u4f53\u4f5c\u4e3a\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\uff0c\u56e0\u6b64\u6211\u4eec\u6dfb\u52a0\u4e86\u65b9\u4fbf\u7684\u9009\u9879\u6765\u5904\u7406\u8fd9\u4e9b\u60c5\u51b5\u3002\u4e3a\u4e86\u5c06 User:Bob \u6dfb\u52a0\u4e3a Test-topic \u7684\u751f\u4ea7\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Bob --producer --topic Test-topic \u7c7b\u4f3c\u5730\uff0c\u8981\u5c06 Alice \u6dfb\u52a0\u4e3a\u6d88\u8d39\u8005\u7ec4 Group-1 \u7684 Test-topic \u6d88\u8d39\u8005\uff0c\u6211\u4eec\u53ea\u9700\u4f20\u9012 --consumer \u9009\u9879\uff1a > bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:Bob --consumer --topic Test-topic --group Group-1 \u8bf7\u6ce8\u610f\uff0c\u5bf9\u4e8e\u6d88\u8d39\u8005\u9009\u9879\uff0c\u6211\u4eec\u8fd8\u5fc5\u987b\u6307\u5b9a\u6d88\u8d39\u8005\u7ec4\u3002\u4e3a\u4e86\u4ece\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\u89d2\u8272\u4e2d\u5220\u9664\u4e3b\u4f53\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4f20\u9012 --remove \u9009\u9879\u3002 * \u57fa\u4e8eAdmin API\u7684ACL\u7ba1\u7406 \u5bf9 ClusterResource\u62e5\u6709Alter\u6743\u9650\u7684\u7528\u6237\u53ef\u4ee5\u4f7f\u7528Admin API\u8fdb\u884cACL\u7ba1\u7406\u3002kafka-acls.sh \u811a\u672c\u652f\u6301 AdminClient API \u6765\u7ba1\u7406 ACL\uff0c\u800c\u65e0\u9700\u76f4\u63a5\u4e0e Zookeeper/Authorizer \u4ea4\u4e92\u3002 \u4e0a\u8ff0\u6240\u6709\u793a\u4f8b\u90fd\u53ef\u4ee5\u4f7f\u7528--bootstrap-server \u9009\u9879\u6765\u6267\u884c\u3002\u4f8b\u5982\uff1a bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --add --allow-principal User:Bob --producer --topic Test-topic bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --add --allow-principal User:Bob --consumer --topic Test-topic --group Group-1 bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --list --topic Test-topic bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /tmp/adminclient-configs.conf --add --allow-principal User:tokenRequester --operation CreateTokens --user-principal \"owner1\"","title":"\u4f8b\u5b50"},{"location":"7/#_12","text":"\u534f\u8bae\u8c03\u7528\u901a\u5e38\u662f\u5bf9 Kafka \u4e2d\u7684\u67d0\u4e9b\u8d44\u6e90\u6267\u884c\u4e00\u4e9b\u64cd\u4f5c\u3002\u9700\u8981\u4e86\u89e3\u64cd\u4f5c\u548c\u8d44\u6e90\u624d\u80fd\u5efa\u7acb\u6709\u6548\u7684\u4fdd\u62a4\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u5217\u51fa\u8fd9\u4e9b\u64cd\u4f5c\u548c\u8d44\u6e90\uff0c\u7136\u540e\u5217\u51fa\u8fd9\u4e9b\u64cd\u4f5c\u548c\u8d44\u6e90\u4e0e\u534f\u8bae\u7684\u7ec4\u5408\u4ee5\u67e5\u770b\u6709\u6548\u7684\u573a\u666f\u3002","title":"\u6388\u6743\u539f\u8bed"},{"location":"7/#kafka_8","text":"\u6709\u4e00\u4e9b\u64cd\u4f5c\u539f\u8bed\u53ef\u7528\u4e8e\u5efa\u7acb\u6743\u9650\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4e0e\u67d0\u4e9b\u8d44\u6e90\u76f8\u5339\u914d\uff0c\u4ee5\u5141\u8bb8\u7ed9\u5b9a\u7528\u6237\u8fdb\u884c\u7279\u5b9a\u534f\u8bae\u8c03\u7528\u3002\u8fd9\u4e9b\u90fd\u662f\uff1a Read Write Create Delete Alter Describe ClusterAction DescribeConfigs AlterConfigs IdempotentWrite CreateTokens DescribeTokens All","title":"Kafka\u4e2d\u7684\u64cd\u4f5c"},{"location":"7/#kafka_9","text":"\u4e0a\u8ff0\u64cd\u4f5c\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e0b\u9762\u63cf\u8ff0\u7684\u67d0\u4e9b\u8d44\u6e90\u3002 \u4e3b\u9898\uff1a \u8fd9\u4ec5\u4ee3\u8868\u4e00\u4e2a\u4e3b\u9898\u3002\u6240\u6709\u4f5c\u7528\u4e8e\u4e3b\u9898\uff08\u4f8b\u5982\u8bfb\u53d6\u3001\u5199\u5165\u4e3b\u9898\uff09\u7684\u534f\u8bae\u8c03\u7528\u90fd\u9700\u8981\u6dfb\u52a0\u76f8\u5e94\u7684\u6743\u9650\u3002\u5982\u679c\u4e3b\u9898\u8d44\u6e90\u5b58\u5728\u6388\u6743\u9519\u8bef\uff0c\u5219\u4f1a\u8fd4\u56de TOPIC_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a29\uff09\u3002 \u7ec4\uff1a \u4ee3\u8868broker\u4e2d\u7684\u6d88\u8d39\u8005\u7ec4\u3002\u6240\u6709\u4e0e\u6d88\u8d39\u8005\u7ec4\u4e00\u8d77\u4f7f\u7528\u7684\u534f\u8bae\u8c03\u7528\uff08\u4f8b\u5982\u52a0\u5165\u7ec4\uff09\u90fd\u5fc5\u987b\u5177\u6709\u4e3b\u9898\u7ec4\u7684\u6743\u9650\u3002\u5982\u679c\u672a\u6388\u4e88\u6743\u9650\uff0c\u5219\u534f\u8bae\u54cd\u5e94\u4e2d\u5c06\u8fd4\u56de GROUP_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a30\uff09\u3002 \u96c6\u7fa4\uff1a \u8be5\u8d44\u6e90\u4ee3\u8868\u96c6\u7fa4\u3002\u5f71\u54cd\u6574\u4e2a\u96c6\u7fa4\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\u53d7\u63a7\u5173\u95ed\uff09\u53d7\u5230\u96c6\u7fa4\u8d44\u6e90\u7279\u6743\u7684\u4fdd\u62a4\u3002\u5982\u679c\u96c6\u7fa4\u8d44\u6e90\u5b58\u5728\u6388\u6743\u95ee\u9898\uff0c\u5219\u4f1a\u8fd4\u56de CLUSTER_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a31\uff09\u3002 TransactionalId\uff1a \u8be5\u8d44\u6e90\u8868\u793a\u4e0e\u4e8b\u52a1\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u63d0\u4ea4\u3002\u5982\u679c\u53d1\u751f\u4efb\u4f55\u9519\u8bef\uff0c\u7ecf\u7eaa\u5546\u5c06\u8fd4\u56de TRANSACTIONAL_ID_AUTHORIZATION_FAILED\uff08\u9519\u8bef\u4ee3\u7801\uff1a53\uff09\u3002 DelegationToken\uff1a \u8fd9\u4ee3\u8868\u96c6\u7fa4\u4e2d\u7684\u59d4\u6258\u4ee4\u724c\u3002\u8bf8\u5982\u63cf\u8ff0\u59d4\u6258\u4ee4\u724c\u4e4b\u7c7b\u7684\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7DelegationToken\u8d44\u6e90\u4e0a\u7684\u7279\u6743\u6765\u4fdd\u62a4\u3002\u7531\u4e8e\u8fd9\u4e9b\u5bf9\u8c61\u5728 Kafka \u4e2d\u5177\u6709\u4e00\u4e9b\u7279\u6b8a\u884c\u4e3a\uff0c\u56e0\u6b64\u5efa\u8bae\u9605\u8bfb KIP-48\u548c \u4f7f\u7528\u59d4\u6258\u4ee4\u724c\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1 \u4e2d\u7684\u76f8\u5173\u4e0a\u6e38\u6587\u6863\u3002 \u7528\u6237\uff1a \u53ef\u4ee5\u5c06CreateToken\u548cDescribeToken\u64cd\u4f5c\u6388\u4e88\u7528\u6237\u8d44\u6e90\uff0c\u4ee5\u5141\u8bb8\u4e3a\u5176\u4ed6\u7528\u6237\u521b\u5efa\u548c\u63cf\u8ff0\u4ee4\u724c\u3002 \u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728KIP-373 \u4e2d\u627e\u5230\u3002","title":"Kafka\u4e2d\u7684\u8d44\u6e90"},{"location":"7/#_13","text":"\u5728\u4e0b\u8868\u4e2d\uff0c\u6211\u4eec\u5c06\u5217\u51fa Kafka API \u534f\u8bae\u5bf9\u8d44\u6e90\u6267\u884c\u7684\u6709\u6548\u64cd\u4f5c\u3002 PROTOCOL (API KEY) OPERATION RESOURCE NOTE PRODUCE (0) Write TransactionalId An transactional producer which has its transactional.id set requires this privilege. PRODUCE (0) IdempotentWrite Cluster An idempotent produce action requires this privilege. PRODUCE (0) Write Topic This applies to a normal produce action. FETCH (1) ClusterAction Cluster A follower must have ClusterAction on the Cluster resource in order to fetch partition data. FETCH (1) Read Topic Regular Kafka consumers need READ permission on each partition they are fetching. LIST_OFFSETS (2) Describe Topic METADATA (3) Describe Topic METADATA (3) Create Cluster If topic auto-creation is enabled, then the broker-side API will check for the existence of a Cluster level privilege. If it's found then it'll allow creating the topic, otherwise it'll iterate through the Topic level privileges (see the next one). METADATA (3) Create Topic This authorizes auto topic creation if enabled but the given user doesn't have a cluster level permission (above). LEADER_AND_ISR (4) ClusterAction Cluster STOP_REPLICA (5) ClusterAction Cluster UPDATE_METADATA (6) ClusterAction Cluster CONTROLLED_SHUTDOWN (7) ClusterAction Cluster OFFSET_COMMIT (8) Read Group An offset can only be committed if it's authorized to the given group and the topic too (see below). Group access is checked first, then Topic access. OFFSET_COMMIT (8) Read Topic Since offset commit is part of the consuming process, it needs privileges for the read action. OFFSET_FETCH (9) Describe Group Similarly to OFFSET_COMMIT, the application must have privileges on group and topic level too to be able to fetch. However in this case it requires describe access instead of read. Group access is checked first, then Topic access. OFFSET_FETCH (9) Describe Topic FIND_COORDINATOR (10) Describe Group The FIND_COORDINATOR request can be of \"Group\" type in which case it is looking for consumergroup coordinators. This privilege would represent the Group mode. FIND_COORDINATOR (10) Describe TransactionalId This applies only on transactional producers and checked when a producer tries to find the transaction coordinator. JOIN_GROUP (11) Read Group HEARTBEAT (12) Read Group LEAVE_GROUP (13) Read Group SYNC_GROUP (14) Read Group DESCRIBE_GROUPS (15) Describe Group LIST_GROUPS (16) Describe Cluster When the broker checks to authorize a list_groups request it first checks for this cluster level authorization. If none found then it proceeds to check the groups individually. This operation doesn't return CLUSTER_AUTHORIZATION_FAILED. LIST_GROUPS (16) Describe Group If none of the groups are authorized, then just an empty response will be sent back instead of an error. This operation doesn't return CLUSTER_AUTHORIZATION_FAILED. This is applicable from the 2.1 release. SASL_HANDSHAKE (17) The SASL handshake is part of the authentication process and therefore it's not possible to apply any kind of authorization here. API_VERSIONS (18) The API_VERSIONS request is part of the Kafka protocol handshake and happens on connection and before any authentication. Therefore it's not possible to control this with authorization. CREATE_TOPICS (19) Create Cluster If there is no cluster level authorization then it won't return CLUSTER_AUTHORIZATION_FAILED but fall back to use topic level, which is just below. That'll throw error if there is a problem. CREATE_TOPICS (19) Create Topic This is applicable from the 2.0 release. DELETE_TOPICS (20) Delete Topic DELETE_RECORDS (21) Delete Topic INIT_PRODUCER_ID (22) Write TransactionalId INIT_PRODUCER_ID (22) IdempotentWrite Cluster OFFSET_FOR_LEADER_EPOCH (23) ClusterAction Cluster If there is no cluster level privilege for this operation, then it'll check for topic level one. OFFSET_FOR_LEADER_EPOCH (23) Describe Topic This is applicable from the 2.1 release. ADD_PARTITIONS_TO_TXN (24) Write TransactionalId This API is only applicable to transactional requests. It first checks for the Write action on the TransactionalId resource, then it checks the Topic in subject (below). ADD_PARTITIONS_TO_TXN (24) Write Topic ADD_OFFSETS_TO_TXN (25) Write TransactionalId Similarly to ADD_PARTITIONS_TO_TXN this is only applicable to transactional request. It first checks for Write action on the TransactionalId resource, then it checks whether it can Read on the given group (below). ADD_OFFSETS_TO_TXN (25) Read Group END_TXN (26) Write TransactionalId WRITE_TXN_MARKERS (27) ClusterAction Cluster TXN_OFFSET_COMMIT (28) Write TransactionalId TXN_OFFSET_COMMIT (28) Read Group TXN_OFFSET_COMMIT (28) Read Topic DESCRIBE_ACLS (29) Describe Cluster CREATE_ACLS (30) Alter Cluster DELETE_ACLS (31) Alter Cluster DESCRIBE_CONFIGS (32) DescribeConfigs Cluster If broker configs are requested, then the broker will check cluster level privileges. DESCRIBE_CONFIGS (32) DescribeConfigs Topic If topic configs are requested, then the broker will check topic level privileges. ALTER_CONFIGS (33) AlterConfigs Cluster If broker configs are altered, then the broker will check cluster level privileges. ALTER_CONFIGS (33) AlterConfigs Topic If topic configs are altered, then the broker will check topic level privileges. ALTER_REPLICA_LOG_DIRS (34) Alter Cluster DESCRIBE_LOG_DIRS (35) Describe Cluster An empty response will be returned on authorization failure. SASL_AUTHENTICATE (36) SASL_AUTHENTICATE is part of the authentication process and therefore it's not possible to apply any kind of authorization here. CREATE_PARTITIONS (37) Alter Topic CREATE_DELEGATION_TOKEN (38) Creating delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. CREATE_DELEGATION_TOKEN (38) CreateTokens User Allows creating delegation tokens for the User resource. RENEW_DELEGATION_TOKEN (39) Renewing delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. EXPIRE_DELEGATION_TOKEN (40) Expiring delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. DESCRIBE_DELEGATION_TOKEN (41) Describe DelegationToken Describing delegation tokens has special rules, for this please see the Authentication using Delegation Tokens section. DESCRIBE_DELEGATION_TOKEN (41) DescribeTokens User Allows describing delegation tokens of the User resource. DELETE_GROUPS (42) Delete Group ELECT_PREFERRED_LEADERS (43) ClusterAction Cluster INCREMENTAL_ALTER_CONFIGS (44) AlterConfigs Cluster If broker configs are altered, then the broker will check cluster level privileges. INCREMENTAL_ALTER_CONFIGS (44) AlterConfigs Topic If topic configs are altered, then the broker will check topic level privileges. ALTER_PARTITION_REASSIGNMENTS (45) Alter Cluster LIST_PARTITION_REASSIGNMENTS (46) Describe Cluster OFFSET_DELETE (47) Delete Group OFFSET_DELETE (47) Read Topic DESCRIBE_CLIENT_QUOTAS (48) DescribeConfigs Cluster ALTER_CLIENT_QUOTAS (49) AlterConfigs Cluster DESCRIBE_USER_SCRAM_CREDENTIALS (50) Describe Cluster ALTER_USER_SCRAM_CREDENTIALS (51) Alter Cluster VOTE (52) ClusterAction Cluster BEGIN_QUORUM_EPOCH (53) ClusterAction Cluster END_QUORUM_EPOCH (54) ClusterAction Cluster DESCRIBE_QUORUM (55) Describe Cluster ALTER_PARTITION (56) ClusterAction Cluster UPDATE_FEATURES (57) Alter Cluster ENVELOPE (58) ClusterAction Cluster FETCH_SNAPSHOT (59) ClusterAction Cluster DESCRIBE_CLUSTER (60) Describe Cluster DESCRIBE_PRODUCERS (61) Read Topic BROKER_REGISTRATION (62) ClusterAction Cluster BROKER_HEARTBEAT (63) ClusterAction Cluster UNREGISTER_BROKER (64) Alter Cluster DESCRIBE_TRANSACTIONS (65) Describe TransactionalId LIST_TRANSACTIONS (66) Describe TransactionalId ALLOCATE_PRODUCER_IDS (67) ClusterAction Cluster CONSUMER_GROUP_HEARTBEAT (68) Read Group","title":"\u534f\u8bae\u64cd\u4f5c\u548c\u8d44\u6e90"},{"location":"7/#76","text":"\u60a8\u53ef\u4ee5\u901a\u8fc7\u524d\u9762\u8ba8\u8bba\u7684\u4e00\u79cd\u6216\u591a\u79cd\u53d7\u652f\u6301\u7684\u534f\u8bae\u6765\u4fdd\u62a4\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u3002\u8fd9\u662f\u5206\u9636\u6bb5\u5b8c\u6210\u7684\uff1a \u589e\u91cf\u53cd\u5f39\u96c6\u7fa4\u8282\u70b9\u4ee5\u6253\u5f00\u5176\u4ed6\u5b89\u5168\u7aef\u53e3\u3002 \u4f7f\u7528\u5b89\u5168\u7aef\u53e3\u800c\u4e0d\u662f PLAINTEXT \u7aef\u53e3\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\uff08\u5047\u8bbe\u60a8\u6b63\u5728\u4fdd\u62a4\u5ba2\u6237\u7aef\u4ee3\u7406\u8fde\u63a5\uff09\u3002 \u518d\u6b21\u589e\u91cf\u5730\u53cd\u5f39\u96c6\u7fa4\u4ee5\u542f\u7528\u4ee3\u7406\u5230\u4ee3\u7406\u7684\u5b89\u5168\u6027\uff08\u5982\u679c\u9700\u8981\uff09 \u6700\u540e\u589e\u91cf\u53cd\u5f39\u4ee5\u5173\u95ed PLAINTEXT \u7aef\u53e3\u3002 \u914d\u7f6eSSL\u548cSASL\u7684\u5177\u4f53\u6b65\u9aa4\u57287.3 \u548c 7.4 \u8282\u4e2d\u63cf\u8ff0\u3002\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4e3a\u60a8\u6240\u9700\u7684\u534f\u8bae\u542f\u7528\u5b89\u5168\u6027\u3002 \u5b89\u5168\u5b9e\u73b0\u5141\u8bb8\u60a8\u4e3a\u4ee3\u7406-\u5ba2\u6237\u7aef\u548c\u4ee3\u7406-\u4ee3\u7406\u901a\u4fe1\u914d\u7f6e\u4e0d\u540c\u7684\u534f\u8bae\u3002\u8fd9\u4e9b\u5fc5\u987b\u5728\u5355\u72ec\u7684\u53cd\u5f39\u4e2d\u542f\u7528\u3002PLAINTEXT \u7aef\u53e3\u5fc5\u987b\u59cb\u7ec8\u4fdd\u6301\u5f00\u653e\u72b6\u6001\uff0c\u4ee5\u4fbf\u4ee3\u7406\u548c/\u6216\u5ba2\u6237\u7aef\u53ef\u4ee5\u7ee7\u7eed\u901a\u4fe1\u3002 \u5f53\u6267\u884c\u589e\u91cf\u53cd\u5f39\u65f6\uff0c\u901a\u8fc7 SIGTERM \u5f7b\u5e95\u505c\u6b62\u4ee3\u7406\u3002\u5728\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u4e4b\u524d\uff0c\u7b49\u5f85\u91cd\u65b0\u542f\u52a8\u7684\u526f\u672c\u8fd4\u56de\u5230 ISR \u5217\u8868\u4e5f\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u505a\u6cd5\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u4f7f\u7528 SSL \u52a0\u5bc6\u4ee3\u7406-\u5ba2\u6237\u7aef\u548c\u4ee3\u7406-\u4ee3\u7406\u901a\u4fe1\u3002\u5728\u7b2c\u4e00\u6b21\u589e\u91cf\u53cd\u5f39\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u90fd\u4f1a\u6253\u5f00\u4e00\u4e2a SSL \u7aef\u53e3\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092 \u7136\u540e\u6211\u4eec\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\uff0c\u66f4\u6539\u5176\u914d\u7f6e\u4ee5\u6307\u5411\u65b0\u6253\u5f00\u7684\u5b89\u5168\u7aef\u53e3\uff1a bootstrap.servers = [broker1:9092,...] security.protocol = SSL ...etc \u5728\u7b2c\u4e8c\u6b21\u589e\u91cf\u670d\u52a1\u5668\u53cd\u5f39\u4e2d\uff0c\u6211\u4eec\u6307\u793a Kafka \u4f7f\u7528 SSL \u4f5c\u4e3a\u4ee3\u7406-\u4ee3\u7406\u534f\u8bae\uff08\u5c06\u4f7f\u7528\u76f8\u540c\u7684 SSL \u7aef\u53e3\uff09\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092 security.inter.broker.protocol=SSL \u5728\u6700\u540e\u7684\u53cd\u5f39\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u5173\u95ed PLAINTEXT \u7aef\u53e3\u6765\u4fdd\u62a4\u96c6\u7fa4\uff1a listeners=SSL://broker1:9092 security.inter.broker.protocol=SSL \u6216\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u6253\u5f00\u591a\u4e2a\u7aef\u53e3\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u534f\u8bae\u8fdb\u884cbroker-broker\u548cbroker-\u5ba2\u6237\u7aef\u901a\u4fe1\u3002\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u5728\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u4f7f\u7528 SSL \u52a0\u5bc6\uff08\u5373\u7528\u4e8e\u4ee3\u7406-\u4ee3\u7406\u548c\u4ee3\u7406-\u5ba2\u6237\u7aef\u901a\u4fe1\uff09\uff0c\u4f46\u6211\u4eec\u8fd8\u5e0c\u671b\u5c06 SASL \u8eab\u4efd\u9a8c\u8bc1\u6dfb\u52a0\u5230\u4ee3\u7406-\u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u6211\u4eec\u5c06\u901a\u8fc7\u5728\u7b2c\u4e00\u6b21\u53cd\u5f39\u671f\u95f4\u6253\u5f00\u4e24\u4e2a\u989d\u5916\u7684\u7aef\u53e3\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092,SASL_SSL://broker1:9093 \u7136\u540e\uff0c\u6211\u4eec\u5c06\u91cd\u65b0\u542f\u52a8\u5ba2\u6237\u7aef\uff0c\u66f4\u6539\u5176\u914d\u7f6e\u4ee5\u6307\u5411\u65b0\u6253\u5f00\u7684 SASL \u548c SSL \u5b89\u5168\u7aef\u53e3\uff1a bootstrap.servers = [broker1:9093,...] security.protocol = SASL_SSL ...etc \u7b2c\u4e8c\u6b21\u670d\u52a1\u5668\u53cd\u5f39\u4f1a\u5c06\u96c6\u7fa4\u5207\u6362\u4e3a\u901a\u8fc7\u6211\u4eec\u4e4b\u524d\u5728\u7aef\u53e3 9092 \u4e0a\u6253\u5f00\u7684 SSL \u7aef\u53e3\u4f7f\u7528\u52a0\u5bc6\u7684\u4ee3\u7406\u95f4\u901a\u4fe1\uff1a listeners=PLAINTEXT://broker1:9091,SSL://broker1:9092,SASL_SSL://broker1:9093 security.inter.broker.protocol=SSL \u6700\u540e\u7684\u53cd\u5f39\u901a\u8fc7\u5173\u95ed PLAINTEXT \u7aef\u53e3\u6765\u4fdd\u62a4\u96c6\u7fa4\u3002 listeners=SSL://broker1:9092,SASL_SSL://broker1:9093 security.inter.broker.protocol=SSL ZooKeeper \u7684\u5b89\u5168\u53ef\u4ee5\u72ec\u7acb\u4e8e Kafka \u96c6\u7fa4\u3002 \u7b2c7.7.2 \u8282\u4ecb\u7ecd\u4e86\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u6b65\u9aa4\u3002","title":"7.6 \u5c06\u5b89\u5168\u529f\u80fd\u7eb3\u5165\u6b63\u5728\u8fd0\u884c\u7684\u96c6\u7fa4\u4e2d"},{"location":"7/#77-zookeeper","text":"ZooKeeper \u4ece 3.5.x \u7248\u672c\u5f00\u59cb\u652f\u6301\u53cc\u5411 TLS (mTLS) \u8eab\u4efd\u9a8c\u8bc1\u3002\u4ece 2.5 \u7248\u672c\u5f00\u59cb\uff0cKafka \u652f\u6301\u4f7f\u7528 SASL \u548c mTLS \u5355\u72ec\u6216\u540c\u65f6\u5411 ZooKeeper \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c \u8bf7\u53c2\u9605 KIP-515\uff1a\u542f\u7528 ZK \u5ba2\u6237\u7aef\u4f7f\u7528\u65b0\u7684 TLS \u652f\u6301\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5355\u72ec\u4f7f\u7528 mTLS \u65f6\uff0c\u6bcf\u4e2a\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\uff08\u4f8b\u5982 ZooKeeper \u5b89\u5168\u8fc1\u79fb\u5de5\u5177 \uff09\u90fd\u5e94\u4f7f\u7528\u76f8\u540c\u7684\u53ef\u5206\u8fa8\u540d\u79f0 (DN) \u6765\u6807\u8bc6\u81ea\u5df1\uff0c\u56e0\u4e3a\u5b83\u662f\u7ecf\u8fc7 ACL \u5904\u7406\u7684 DN\u3002\u8fd9\u53ef\u4ee5\u6309\u5982\u4e0b\u6240\u8ff0\u8fdb\u884c\u66f4\u6539\uff0c\u4f46\u5b83\u6d89\u53ca\u7f16\u5199\u548c\u90e8\u7f72\u81ea\u5b9a\u4e49 ZooKeeper \u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u3002\u901a\u5e38\uff0c\u6bcf\u4e2a\u8bc1\u4e66\u5e94\u5177\u6709\u76f8\u540c\u7684 DN\uff0c\u4f46\u5177\u6709\u4e0d\u540c\u7684\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN)\uff0c\u4ee5\u4fbf ZooKeeper \u5bf9\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u80fd\u591f\u6210\u529f\u3002 \u5f53\u5c06 SASL \u8eab\u4efd\u9a8c\u8bc1\u4e0e mTLS \u4e00\u8d77\u4f7f\u7528\u5230 ZooKeeper \u65f6\uff0cSASL \u8eab\u4efd\u548c\u521b\u5efa znode \u7684 DN\uff08\u5373\u521b\u5efa\u4ee3\u7406\u7684\u8bc1\u4e66\uff09\u6216\u5b89\u5168\u8fc1\u79fb\u5de5\u5177\u7684 DN\uff08\u5982\u679c\u5728\u521b\u5efa znode \u540e\u6267\u884c\u8fc1\u79fb\uff09\u90fd\u5c06\u88abACL'ed\uff0c\u5e76\u4e14\u6240\u6709\u4ee3\u7406\u548c CLI \u5de5\u5177\u90fd\u5c06\u83b7\u5f97\u6388\u6743\uff0c\u5373\u4f7f\u5b83\u4eec\u90fd\u4f7f\u7528\u4e0d\u540c\u7684 DN\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u5c06\u4f7f\u7528\u76f8\u540c\u7684 ACL'ed SASL \u8eab\u4efd\u3002\u4ec5\u5f53\u5355\u72ec\u4f7f\u7528 mTLS \u8eab\u4efd\u9a8c\u8bc1\u65f6\uff0c\u6240\u6709 DN \u90fd\u5fc5\u987b\u5339\u914d\uff08\u5e76\u4e14 SAN \u53d8\u5f97\u81f3\u5173\u91cd\u8981\u2014\u2014\u540c\u6837\uff0c\u5728\u6ca1\u6709\u7f16\u5199\u548c\u90e8\u7f72\u81ea\u5b9a\u4e49 ZooKeeper \u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u4e0b\u6240\u8ff0\uff09\u3002 \u4f7f\u7528\u4ee3\u7406\u5c5e\u6027\u6587\u4ef6\u4e3a\u4ee3\u7406\u8bbe\u7f6e TLS \u914d\u7f6e\uff0c\u5982\u4e0b\u6240\u8ff0\u3002 \u4f7f\u7528--zk-tls-config-file \u9009\u9879\u5728 Zookeeper \u5b89\u5168\u8fc1\u79fb\u5de5\u5177\u4e2d\u8bbe\u7f6e TLS \u914d\u7f6e\u3002kafka-acls.sh\u548ckafka-configs.sh CLI \u5de5\u5177\u8fd8\u652f\u6301--zk - tls-config-file \u9009\u9879\u3002 \u4f7f\u7528-zk-tls-config-file \u9009\u9879\uff08\u6ce8\u610f\u5355\u7834\u6298\u53f7\u800c\u4e0d\u662f\u53cc\u7834\u6298\u53f7\uff09\u4e3aZookeeper-shell.sh CLI \u5de5\u5177\u8bbe\u7f6e TLS \u914d\u7f6e\u3002","title":"7.7 ZooKeeper \u8ba4\u8bc1"},{"location":"7/#771","text":"","title":"7.7.1 \u65b0\u96c6\u7fa4"},{"location":"7/#7711-zookeeper-sasl","text":"\u8981\u5728\u4ee3\u7406\u4e0a\u542f\u7528 ZooKeeper SASL \u8eab\u4efd\u9a8c\u8bc1\uff0c\u6709\u4e24\u4e2a\u5fc5\u8981\u6b65\u9aa4\uff1a \u521b\u5efa JAAS \u767b\u5f55\u6587\u4ef6\u5e76\u8bbe\u7f6e\u76f8\u5e94\u7684\u7cfb\u7edf\u5c5e\u6027\u4ee5\u6307\u5411\u5b83\uff0c\u5982\u4e0a\u6240\u8ff0 \u5c06\u6bcf\u4e2a\u4ee3\u7406\u4e2d\u7684\u914d\u7f6e\u5c5e\u6027zookeeper.set.acl\u8bbe\u7f6e\u4e3atrue Kafka \u96c6\u7fa4\u7684 ZooKeeper \u4e2d\u5b58\u50a8\u7684\u5143\u6570\u636e\u662f\u4e16\u754c\u53ef\u8bfb\u7684\uff0c\u4f46\u53ea\u80fd\u7531\u4ee3\u7406\u4fee\u6539\u3002\u8fd9\u4e00\u51b3\u5b9a\u80cc\u540e\u7684\u7406\u7531\u662f\uff0cZooKeeper \u4e2d\u5b58\u50a8\u7684\u6570\u636e\u5e76\u4e0d\u654f\u611f\uff0c\u4f46\u5bf9\u8be5\u6570\u636e\u7684\u4e0d\u5f53\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u96c6\u7fa4\u4e2d\u65ad\u3002\u6211\u4eec\u8fd8\u5efa\u8bae\u901a\u8fc7\u7f51\u7edc\u5206\u6bb5\u9650\u5236\u5bf9 ZooKeeper \u7684\u8bbf\u95ee\uff08\u53ea\u6709\u4ee3\u7406\u548c\u67d0\u4e9b\u7ba1\u7406\u5de5\u5177\u9700\u8981\u8bbf\u95ee ZooKeeper\uff09\u3002","title":"7.7.1.1 ZooKeeper SASL \u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#7712-zookeeper-tls","text":"ZooKeeper mTLS \u8eab\u4efd\u9a8c\u8bc1\u53ef\u4ee5\u5728\u6709\u6216\u6ca1\u6709 SASL \u8eab\u4efd\u9a8c\u8bc1\u7684\u60c5\u51b5\u4e0b\u542f\u7528\u3002\u5982\u4e0a\u6240\u8ff0\uff0c\u5355\u72ec\u4f7f\u7528 mTLS \u65f6\uff0c\u6bcf\u4e2a\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\uff08\u4f8b\u5982 ZooKeeper \u5b89\u5168\u8fc1\u79fb\u5de5\u5177 \uff09\u901a\u5e38\u5fc5\u987b\u4f7f\u7528\u76f8\u540c\u7684\u53ef\u5206\u8fa8\u540d\u79f0 (DN) \u6765\u6807\u8bc6\u81ea\u5df1\uff0c\u56e0\u4e3a\u5b83\u662f\u7ecf\u8fc7 ACL \u5904\u7406\u7684 DN\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u8bc1\u4e66\u5e94\u5177\u6709\u9002\u5f53\u7684\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN)\uff0c\u4ee5\u4fbf ZooKeeper \u5bf9\u4ee3\u7406\u548c\u4efb\u4f55 CLI \u5de5\u5177\u7684\u4e3b\u673a\u540d\u9a8c\u8bc1\u80fd\u591f\u6210\u529f\u3002 \u901a\u8fc7\u7f16\u5199\u4e00\u4e2a\u6269\u5c55org.apache.zookeeper.server.auth.X509AuthenticationProvider\u7684\u7c7b\u5e76\u8986\u76d6\u65b9\u6cd5 protected String getClientId(X509Certificate clientCert) \uff0c \u53ef\u4ee5\u4f7f\u7528 DN \u4ee5\u5916\u7684\u5176\u4ed6\u5185\u5bb9\u6765\u6807\u8bc6 mTLS \u5ba2\u6237\u7aef\u3002\u9009\u62e9\u4e00\u4e2a\u65b9\u6848\u540d\u79f0\uff0c\u5e76\u5c06ZooKeeper \u4e2d\u7684authProvider.[scheme]\u8bbe\u7f6e\u4e3a\u81ea\u5b9a\u4e49\u5b9e\u73b0\u7684\u5b8c\u5168\u9650\u5b9a\u7c7b\u540d\u79f0\uff1b\u7136\u540e\u8bbe\u7f6essl.authProvider=[scheme]\u6765\u4f7f\u7528\u5b83\u3002 \u4ee5\u4e0b\u662f\u7528\u4e8e\u542f\u7528 TLS \u8eab\u4efd\u9a8c\u8bc1\u7684 ZooKeeper \u914d\u7f6e\u793a\u4f8b\uff08\u90e8\u5206\uff09\u3002 \u8fd9\u4e9b\u914d\u7f6e\u5728ZooKeeper \u7ba1\u7406\u6307\u5357 \u4e2d\u6709\u63cf\u8ff0 \u3002 secureClientPort=2182 serverCnxnFactory=org.apache.zookeeper.server.NettyServerCnxnFactory authProvider.x509=org.apache.zookeeper.server.auth.X509AuthenticationProvider ssl.keyStore.location=/path/to/zk/keystore.jks ssl.keyStore.password=zk-ks-passwd ssl.trustStore.location=/path/to/zk/truststore.jks ssl.trustStore.password=zk-ts-passwd \u91cd\u8981\u63d0\u793a \uff1aZooKeeper \u4e0d\u652f\u6301\u5c06 ZooKeeper \u670d\u52a1\u5668\u5bc6\u94a5\u5e93\u4e2d\u7684\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u672c\u8eab\u4e0d\u540c\u7684\u503c\u3002\u8bf7\u52a1\u5fc5\u5c06\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u76f8\u540c\u3002 \u4ee5\u4e0b\u662f\u4f7f\u7528 mTLS \u8eab\u4efd\u9a8c\u8bc1\u8fde\u63a5\u5230 ZooKeeper \u7684 Kafka Broker \u914d\u7f6e\u793a\u4f8b\uff08\u90e8\u5206\uff09\u3002 \u8fd9\u4e9b\u914d\u7f6e\u5728\u4e0a\u9762\u7684Broker Configs \u4e2d\u6709\u63cf\u8ff0\u3002 # connect to the ZooKeeper port configured for TLS zookeeper.connect=zk1:2182,zk2:2182,zk3:2182 # required to use TLS to ZooKeeper (default is false) zookeeper.ssl.client.enable=true # required to use TLS to ZooKeeper zookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty # define key/trust stores to use TLS to ZooKeeper; ignored unless zookeeper.ssl.client.enable=true zookeeper.ssl.keystore.location=/path/to/kafka/keystore.jks zookeeper.ssl.keystore.password=kafka-ks-passwd zookeeper.ssl.truststore.location=/path/to/kafka/truststore.jks zookeeper.ssl.truststore.password=kafka-ts-passwd # tell broker to create ACLs on znodes zookeeper.set.acl=true \u91cd\u8981\u63d0\u793a \uff1aZooKeeper \u4e0d\u652f\u6301\u5c06 ZooKeeper \u5ba2\u6237\u7aef\uff08\u5373\u4ee3\u7406\uff09\u5bc6\u94a5\u5e93\u4e2d\u7684\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u672c\u8eab\u4e0d\u540c\u7684\u503c\u3002\u8bf7\u52a1\u5fc5\u5c06\u5bc6\u94a5\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u4e0e\u5bc6\u94a5\u5e93\u5bc6\u7801\u76f8\u540c\u3002","title":"7.7.1.2 ZooKeeper \u76f8\u4e92 TLS \u8eab\u4efd\u9a8c\u8bc1"},{"location":"7/#772","text":"\u5982\u679c\u60a8\u8fd0\u884c\u7684 Kafka \u7248\u672c\u4e0d\u652f\u6301\u5b89\u5168\u6027\u6216\u53ea\u662f\u7981\u7528\u4e86\u5b89\u5168\u6027\uff0c\u5e76\u4e14\u5e0c\u671b\u786e\u4fdd\u96c6\u7fa4\u5b89\u5168\uff0c\u90a3\u4e48\u60a8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\u6765\u542f\u7528 ZooKeeper \u8eab\u4efd\u9a8c\u8bc1\uff0c\u540c\u65f6\u5c06\u5bf9\u60a8\u7684\u64cd\u4f5c\u9020\u6210\u7684\u5e72\u6270\u964d\u81f3\u6700\u4f4e\uff1a \u5728 ZooKeeper \u4e0a\u542f\u7528 SASL \u548c/\u6216 mTLS \u8eab\u4efd\u9a8c\u8bc1\u3002\u5982\u679c\u542f\u7528 mTLS\uff0c\u60a8\u73b0\u5728\u5c06\u540c\u65f6\u62e5\u6709\u975e TLS \u7aef\u53e3\u548c TLS \u7aef\u53e3\uff0c\u5982\u4e0b\u6240\u793a\uff1a clientPort=2181 secureClientPort=2182 serverCnxnFactory=org.apache.zookeeper.server.NettyServerCnxnFactory authProvider.x509=org.apache.zookeeper.server.auth.X509AuthenticationProvider ssl.keyStore.location=/path/to/zk/keystore.jks ssl.keyStore.password=zk-ks-passwd ssl.trustStore.location=/path/to/zk/truststore.jks ssl.trustStore.password=zk-ts-passwd \u6839\u636e\u9700\u8981\u6267\u884c\u4ee3\u7406\u7684\u6eda\u52a8\u91cd\u542f\uff0c\u8bbe\u7f6e JAAS \u767b\u5f55\u6587\u4ef6\u548c/\u6216\u5b9a\u4e49 ZooKeeper \u53cc\u5411 TLS \u914d\u7f6e\uff08\u5305\u62ec\u8fde\u63a5\u5230\u542f\u7528 TLS \u7684 ZooKeeper \u7aef\u53e3\uff09\uff0c\u8fd9\u4f7f\u4ee3\u7406\u80fd\u591f\u5411 ZooKeeper \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5728\u6eda\u52a8\u91cd\u542f\u7ed3\u675f\u65f6\uff0c\u4ee3\u7406\u80fd\u591f\u4f7f\u7528\u4e25\u683c\u7684 ACL \u64cd\u4f5c znode\uff0c\u4f46\u5b83\u4eec\u4e0d\u4f1a\u4f7f\u7528\u8fd9\u4e9b ACL \u521b\u5efa znode \u5982\u679c\u542f\u7528\u4e86 mTLS\uff0c\u8bf7\u5728 ZooKeeper \u4e2d\u7981\u7528\u975e TLS \u7aef\u53e3 \u5bf9\u4ee3\u7406\u6267\u884c\u7b2c\u4e8c\u6b21\u6eda\u52a8\u91cd\u542f\uff0c\u8fd9\u6b21\u5c06\u914d\u7f6e\u53c2\u6570zookeeper.set.acl\u8bbe\u7f6e\u4e3atrue\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728\u521b\u5efaznode\u65f6\u4f7f\u7528\u5b89\u5168ACL \u6267\u884c ZkSecurityMigrator \u5de5\u5177\u3002\u8981\u6267\u884c\u8be5\u5de5\u5177\uff0c\u6709\u4ee5\u4e0b\u811a\u672c\uff1abin/zookeeper-security-migration.sh\uff0c\u5176\u4e2dzookeeper.acl\u8bbe\u7f6e\u4e3asecure\u3002\u8be5\u5de5\u5177\u904d\u5386\u76f8\u5e94\u7684\u5b50\u6811\uff0c\u66f4\u6539 znode \u7684 ACL\u3002 --zk-tls-config-file <file> \u5982\u679c\u542f\u7528 mTLS\uff0c\u8bf7\u4f7f\u7528\u8be5\u9009\u9879\u3002 \u8fd8\u53ef\u4ee5\u5173\u95ed\u5b89\u5168\u96c6\u7fa4\u4e2d\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002\u4e3a\u6b64\uff0c\u8bf7\u6309\u7167\u4e0b\u5217\u6b65\u9aa4\u64cd\u4f5c\uff1a \u5bf9\u4ee3\u7406\u6267\u884c\u6eda\u52a8\u91cd\u542f\uff0c\u8bbe\u7f6e JAAS \u767b\u5f55\u6587\u4ef6\u548c/\u6216\u5b9a\u4e49 ZooKeeper \u53cc\u5411 TLS \u914d\u7f6e\uff0c\u8fd9\u4f7f\u4ee3\u7406\u80fd\u591f\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f46\u5c06Zookeeper.set.acl\u8bbe\u7f6e\u4e3a false\u3002\u5728\u6eda\u52a8\u91cd\u542f\u7ed3\u675f\u65f6\uff0c\u4ee3\u7406\u505c\u6b62\u4f7f\u7528\u5b89\u5168 ACL \u521b\u5efa znode\uff0c\u4f46\u4ecd\u7136\u80fd\u591f\u9a8c\u8bc1\u548c\u64cd\u4f5c\u6240\u6709 znode \u6267\u884c ZkSecurityMigrator \u5de5\u5177\u3002\u8981\u6267\u884c\u8be5\u5de5\u5177\uff0c\u8bf7\u8fd0\u884c\u6b64\u811a\u672cbin/zookeeper-security-migration.sh\uff0c\u5e76\u5c06Zookeeper.acl\u8bbe\u7f6e\u4e3a\u4e0d\u5b89\u5168\u3002\u8be5\u5de5\u5177\u904d\u5386\u76f8\u5e94\u7684\u5b50\u6811\uff0c\u66f4\u6539 znode \u7684 ACL\u3002 --zk-tls-config-file <file> \u5982\u679c\u9700\u8981\u8bbe\u7f6e TLS \u914d\u7f6e\uff0c\u8bf7\u4f7f\u7528\u8be5\u9009\u9879\u3002 \u5982\u679c\u8981\u7981\u7528 mTLS\uff0c\u8bf7\u5728 ZooKeeper \u4e2d\u542f\u7528\u975e TLS \u7aef\u53e3 \u5bf9\u4ee3\u7406\u6267\u884c\u7b2c\u4e8c\u6b21\u6eda\u52a8\u91cd\u542f\uff0c\u8fd9\u6b21\u7701\u7565\u8bbe\u7f6e JAAS \u767b\u5f55\u6587\u4ef6\u7684\u7cfb\u7edf\u5c5e\u6027\u548c/\u6216\u6839\u636e\u9700\u8981\u5220\u9664 ZooKeeper \u53cc\u5411 TLS \u914d\u7f6e\uff08\u5305\u62ec\u8fde\u63a5\u5230\u672a\u542f\u7528 TLS \u7684 ZooKeeper \u7aef\u53e3\uff09 \u5982\u679c\u8981\u7981\u7528 mTLS\uff0c\u8bf7\u5728 ZooKeeper \u4e2d\u7981\u7528 TLS \u7aef\u53e3 \u4ee5\u4e0b\u662f\u5982\u4f55\u8fd0\u884c\u8fc1\u79fb\u5de5\u5177\u7684\u793a\u4f8b\uff1a > bin/zookeeper-security-migration.sh --zookeeper.acl=secure --zookeeper.connect=localhost:2181 \u8fd0\u884c\u6b64\u547d\u4ee4\u4ee5\u67e5\u770b\u5b8c\u6574\u7684\u53c2\u6570\u5217\u8868\uff1a > bin/zookeeper-security-migration.sh --help","title":"7.7.2 \u8fc1\u79fb\u96c6\u7fa4"},{"location":"7/#773-zookeeper","text":"\u8fd8\u9700\u8981\u5728 ZooKeeper \u6574\u4f53\u4e0a\u542f\u7528 SASL \u548c/\u6216 mTLS \u8eab\u4efd\u9a8c\u8bc1\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u9700\u8981\u6267\u884c\u670d\u52a1\u5668\u7684\u6eda\u52a8\u91cd\u65b0\u542f\u52a8\u5e76\u8bbe\u7f6e\u4e00\u4e9b\u5c5e\u6027\u3002\u6709\u5173 mTLS \u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0a\u6587\u3002\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u8003 ZooKeeper \u6587\u6863\uff1a Apache ZooKeeper \u6587\u6863 Apache ZooKeeper \u7ef4\u57fa","title":"7.7.3 \u8fc1\u79fb ZooKeeper \u6574\u4f53"},{"location":"7/#774-zookeeper-tls","text":"\u53ef\u4ee5\u5728 ZooKeeper \u670d\u52a1\u5668\u672c\u8eab\u4e4b\u95f4\u542f\u7528 mTLS \u8eab\u4efd\u9a8c\u8bc1\u3002\u8bf7\u53c2\u9605 ZooKeeper \u6587\u6863 \u4ee5\u83b7\u53d6\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002","title":"7.7.4 ZooKeeper \u4ef2\u88c1\u76f8\u4e92 TLS \u8ba4\u8bc1"},{"location":"7/#78-zookeeper","text":"\u4f7f\u7528\u53cc\u5411 TLS \u7684 ZooKeeper \u8fde\u63a5\u662f\u52a0\u5bc6\u7684\u3002\u4ece ZooKeeper 3.5.7 \u7248\uff08Kafka 2.5 \u7248\u9644\u5e26\u7684\u7248\u672c\uff09\u5f00\u59cb\uff0cZooKeeper \u652f\u6301\u670d\u52a1\u5668\u7aef\u914d\u7f6e ssl.clientAuth\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff1awant / need / none\u662f\u6709\u6548\u9009\u9879\uff0c\u9ed8\u8ba4\u4e3aneed\uff09\uff0c\u5e76\u8bbe\u7f6e\u6b64ZooKeeper \u4e2d\u7684\u503c\u4e3anone\u5141\u8bb8\u5ba2\u6237\u7aef\u901a\u8fc7 TLS \u52a0\u5bc6\u8fde\u63a5\u8fdb\u884c\u8fde\u63a5\uff0c\u800c\u65e0\u9700\u63d0\u4f9b\u81ea\u5df1\u7684\u8bc1\u4e66\u3002\u4ee5\u4e0b\u662f\u4ec5\u4f7f\u7528 TLS \u52a0\u5bc6\u8fde\u63a5\u5230 ZooKeeper \u7684 Kafka Broker \u914d\u7f6e\u793a\u4f8b\uff08\u90e8\u5206\uff09\u3002 \u8fd9\u4e9b\u914d\u7f6e\u5728\u4e0a\u9762\u7684Broker Configs \u4e2d\u6709\u63cf\u8ff0\u3002 # connect to the ZooKeeper port configured for TLS zookeeper.connect=zk1:2182,zk2:2182,zk3:2182 # required to use TLS to ZooKeeper (default is false) zookeeper.ssl.client.enable=true # required to use TLS to ZooKeeper zookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty # define trust stores to use TLS to ZooKeeper; ignored unless zookeeper.ssl.client.enable=true # no need to set keystore information assuming ssl.clientAuth=none on ZooKeeper zookeeper.ssl.truststore.location=/path/to/kafka/truststore.jks zookeeper.ssl.truststore.password=kafka-ts-passwd # tell broker to create ACLs on znodes (if using SASL authentication, otherwise do not set this) zookeeper.set.acl=true","title":"7.8 ZooKeeper\u52a0\u5bc6"},{"location":"8/","text":"8.Kafka\u8fde\u63a5 8.1 \u6982\u8ff0 Kafka Connect \u662f\u4e00\u79cd\u5728 Apache Kafka \u548c\u5176\u4ed6\u7cfb\u7edf\u4e4b\u95f4\u53ef\u6269\u5c55\u4e14\u53ef\u9760\u5730\u4f20\u8f93\u6570\u636e\u7684\u5de5\u5177\u3002\u5b83\u4f7f\u5f97\u5feb\u901f\u5b9a\u4e49\u5c06\u5927\u91cf\u6570\u636e\u79fb\u5165\u548c\u79fb\u51fa Kafka \u7684 \u8fde\u63a5\u5668\u53d8\u5f97\u7b80\u5355\u3002 Kafka Connect \u53ef\u4ee5\u6444\u53d6\u6574\u4e2a\u6570\u636e\u5e93\u6216\u5c06\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u7684\u6307\u6807\u6536\u96c6\u5230 Kafka \u4e3b\u9898\u4e2d\uff0c\u4ece\u800c\u4f7f\u6570\u636e\u53ef\u7528\u4e8e\u4f4e\u5ef6\u8fdf\u7684\u6d41\u5904\u7406\u3002\u5bfc\u51fa\u4f5c\u4e1a\u53ef\u4ee5\u5c06 Kafka \u4e3b\u9898\u4e2d\u7684\u6570\u636e\u4f20\u8f93\u5230\u8f85\u52a9\u5b58\u50a8\u548c\u67e5\u8be2\u7cfb\u7edf\u6216\u6279\u5904\u7406\u7cfb\u7edf\u4e2d\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5206\u6790\u3002 Kafka\u8fde\u63a5\u529f\u80fd\u5305\u62ec\uff1a Kafka \u8fde\u63a5\u5668\u7684\u901a\u7528\u6846\u67b6 - Kafka Connect \u6807\u51c6\u5316\u4e86\u5176\u4ed6\u6570\u636e\u7cfb\u7edf\u4e0e Kafka \u7684\u96c6\u6210\uff0c\u7b80\u5316\u4e86\u8fde\u63a5\u5668\u7684\u5f00\u53d1\u3001\u90e8\u7f72\u548c\u7ba1\u7406 \u5206\u5e03\u5f0f\u548c\u72ec\u7acb\u6a21\u5f0f - \u6269\u5c55\u5230\u652f\u6301\u6574\u4e2a\u7ec4\u7ec7\u7684\u5927\u578b\u96c6\u4e2d\u7ba1\u7406\u670d\u52a1\uff0c\u6216\u7f29\u5c0f\u5230\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u5c0f\u578b\u751f\u4ea7\u90e8\u7f72 REST \u63a5\u53e3 - \u901a\u8fc7\u6613\u4e8e\u4f7f\u7528\u7684 REST API \u63d0\u4ea4\u548c\u7ba1\u7406\u5230 Kafka Connect \u96c6\u7fa4\u7684\u8fde\u63a5\u5668 \u81ea\u52a8\u504f\u79fb\u7ba1\u7406 - \u53ea\u9700\u6765\u81ea\u8fde\u63a5\u5668\u7684\u5c11\u91cf\u4fe1\u606f\uff0cKafka Connect \u5c31\u53ef\u4ee5\u81ea\u52a8\u7ba1\u7406\u504f\u79fb\u63d0\u4ea4\u8fc7\u7a0b\uff0c\u56e0\u6b64\u8fde\u63a5\u5668\u5f00\u53d1\u4eba\u5458\u65e0\u9700\u62c5\u5fc3\u8fde\u63a5\u5668\u5f00\u53d1\u4e2d\u8fd9\u4e2a\u5bb9\u6613\u51fa\u9519\u7684\u90e8\u5206 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u5206\u5e03\u5f0f\u4e14\u53ef\u6269\u5c55\u7684 - Kafka Connect \u6784\u5efa\u5728\u73b0\u6709\u7684\u7ec4\u7ba1\u7406\u534f\u8bae\u4e4b\u4e0a\u3002\u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u5de5\u4f5c\u4eba\u5458\u6765\u6269\u5c55 Kafka Connect \u96c6\u7fa4\u3002 Streaming/batch \u96c6\u6210 - \u5229\u7528 Kafka \u7684\u73b0\u6709\u529f\u80fd\uff0cKafka Connect \u662f\u6865\u63a5\u6d41\u548c\u6279\u6570\u636e\u7cfb\u7edf\u7684\u7406\u60f3\u89e3\u51b3\u65b9\u6848 8.2 \u7528\u6237\u6307\u5357 \u8be5 \u5feb\u901f\u5165\u95e8 \u63d0\u4f9b\u4e86\u5982\u4f55\u8fd0\u884c\u72ec\u7acb\u7248\u672c\u7684 Kafka Connect \u7684\u7b80\u77ed\u793a\u4f8b\u3002\u672c\u8282\u66f4\u8be6\u7ec6\u5730\u4ecb\u7ecd\u5982\u4f55\u914d\u7f6e\u3001\u8fd0\u884c\u548c\u7ba1\u7406 Kafka Connect\u3002 \u8fd0\u884c Kafka \u8fde\u63a5 Kafka Connect\u76ee\u524d\u652f\u6301\u4e24\u79cd\u6267\u884c\u6a21\u5f0f\uff1a\u72ec\u7acb\uff08\u5355\u8fdb\u7a0b\uff09\u548c\u5206\u5e03\u5f0f\u3002 \u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\uff0c\u6240\u6709\u5de5\u4f5c\u90fd\u5728\u5355\u4e2a\u8fdb\u7a0b\u4e2d\u6267\u884c\u3002\u6b64\u914d\u7f6e\u66f4\u6613\u4e8e\u8bbe\u7f6e\u548c\u4e0a\u624b\uff0c\u5e76\u4e14\u5728\u53ea\u6709\u4e00\u4e2a\u5de5\u4f5c\u4eba\u5458\u6709\u610f\u4e49\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u5f88\u6709\u7528\uff08\u4f8b\u5982\u6536\u96c6\u65e5\u5fd7\u6587\u4ef6\uff09\uff0c\u4f46\u5b83\u65e0\u6cd5\u4ece Kafka Connect \u7684\u67d0\u4e9b\u529f\u80fd\uff08\u4f8b\u5982\u5bb9\u9519\uff09\u4e2d\u53d7\u76ca\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8\u72ec\u7acb\u8fdb\u7a0b\uff1a > bin/connect-standalone.sh config/connect-standalone.properties [connector1.propertiesconnector2.properties ...] \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5de5\u4f5c\u7ebf\u7a0b\u7684\u914d\u7f6e\u3002\u8fd9\u5305\u62ec Kafka \u8fde\u63a5\u53c2\u6570\u3001\u5e8f\u5217\u5316\u683c\u5f0f\u4ee5\u53ca\u63d0\u4ea4\u504f\u79fb\u91cf\u7684\u9891\u7387\u7b49\u8bbe\u7f6e\u3002\u63d0\u4f9b\u7684\u793a\u4f8b\u5e94\u8be5\u9002\u7528\u4e8e\u4f7f\u7528 \u63d0\u4f9b\u7684\u9ed8\u8ba4\u914d\u7f6e\u8fd0\u884c\u7684\u672c\u5730\u96c6\u7fa4 config/server.properties \u3002\u9700\u8981\u8fdb\u884c\u8c03\u6574\u624d\u80fd\u4e0e\u4e0d\u540c\u7684\u914d\u7f6e\u6216\u751f\u4ea7\u90e8\u7f72\u4e00\u8d77\u4f7f\u7528\u3002\u6240\u6709\u5de5\u4f5c\u4eba\u5458\uff08\u72ec\u7acb\u7684\u548c\u5206\u5e03\u5f0f\u7684\uff09\u90fd\u9700\u8981\u4e00\u4e9b\u914d\u7f6e\uff1a bootstrap.servers - \u7528\u4e8e\u5f15\u5bfc\u4e0e Kafka \u7684\u8fde\u63a5\u7684 Kafka \u670d\u52a1\u5668\u5217\u8868 key.converter - \u8f6c\u6362\u5668\u7c7b\uff0c\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 value.converter - \u8f6c\u6362\u5668\u7c7b\uff0c\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 plugin.path \uff08\u9ed8\u8ba4 empty \uff09 - \u5305\u542b Connect \u63d2\u4ef6\uff08\u8fde\u63a5\u5668\u3001\u8f6c\u6362\u5668\u3001\u8f6c\u6362\uff09\u7684\u8def\u5f84\u5217\u8868\u3002\u5728\u8fd0\u884c\u5feb\u901f\u542f\u52a8\u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u6dfb\u52a0\u5305\u542b\u6253\u5305\u5728 \u4e2d\u7684\u793a\u4f8b FileStreamSourceConnector \u548c FileStreamSinkConnector \u7684\u7edd\u5bf9\u8def\u5f84 connect-file-\"version\".jar \uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u8fde\u63a5\u5668\u4e0d\u5305\u542b\u5728Connect Worker \u4e2d\uff08\u8bf7\u53c2\u9605 CLASSPATH \u3001 plugin.path \u5c5e\u6027\u4ee5\u83b7\u53d6\u793a\u4f8b\uff09\u3002 \u72ec\u7acb\u6a21\u5f0f\u7279\u6709\u7684\u91cd\u8981\u914d\u7f6e\u9009\u9879\u662f\uff1a offset.storage.file.filename - \u5b58\u50a8\u6e90\u8fde\u63a5\u5668\u504f\u79fb\u7684\u6587\u4ef6 \u6b64\u5904\u914d\u7f6e\u7684\u53c2\u6570\u9002\u7528\u4e8e Kafka Connect \u4f7f\u7528\u7684\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6765\u8bbf\u95ee\u914d\u7f6e\u3001\u504f\u79fb\u91cf\u548c\u72b6\u6001\u4e3b\u9898\u3002\u914d\u7f6eKafka Source\u4efb\u52a1\u4f7f\u7528\u7684\u751f\u4ea7\u8005\u548cKafka Sink\u4efb\u52a1\u4f7f\u7528\u7684\u6d88\u8d39\u8005\uff0c\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u53c2\u6570\uff0c\u4f46\u9700\u8981\u5206\u522b\u52a0\u4e0a producer. \u548c\u524d\u7f00 consumer. \u3002\u4ece\u5de5\u4f5c\u914d\u7f6e\u4e2d\u7ee7\u627f\u7684\u552f\u4e00\u4e0d\u5e26\u524d\u7f00\u7684 Kafka \u5ba2\u6237\u7aef\u53c2\u6570\u662f bootstrap.servers \uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u8fd9\u5c31\u8db3\u591f\u4e86\uff0c\u56e0\u4e3a\u540c\u4e00\u4e2a\u96c6\u7fa4\u901a\u5e38\u7528\u4e8e\u6240\u6709\u76ee\u7684\u3002\u4e00\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u662f\u5b89\u5168\u96c6\u7fa4\uff0c\u5b83\u9700\u8981\u989d\u5916\u7684\u53c2\u6570\u6765\u5141\u8bb8\u8fde\u63a5\u3002\u8fd9\u4e9b\u53c2\u6570\u9700\u8981\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u8bbe\u7f6e\u6700\u591a\u4e09\u6b21\uff0c\u4e00\u6b21\u7528\u4e8e\u7ba1\u7406\u8bbf\u95ee\uff0c\u4e00\u6b21\u7528\u4e8e Kafka \u6e90\uff0c\u4e00\u6b21\u7528\u4e8e Kafka \u63a5\u6536\u5668\u3002 \u4ece 2.3.0 \u5f00\u59cb\uff0c\u53ef\u4ee5\u5206\u522b\u4f7f\u7528 Kafka \u6e90\u6216 Kafka \u63a5\u6536\u5668\u7684\u524d\u7f00 producer.override. \u548c consumer.override. \u4e3a\u6bcf\u4e2a\u8fde\u63a5\u5668\u5355\u72ec\u914d\u7f6e\u5ba2\u6237\u7aef\u914d\u7f6e\u8986\u76d6\u3002\u8fd9\u4e9b\u8986\u76d6\u5305\u542b\u5728\u8fde\u63a5\u5668\u7684\u5176\u4f59\u914d\u7f6e\u5c5e\u6027\u4e2d\u3002 \u5176\u4f59\u53c2\u6570\u662f\u8fde\u63a5\u5668\u914d\u7f6e\u6587\u4ef6\u3002\u60a8\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u6570\u91cf\u7684\u5185\u5bb9\uff0c\u4f46\u6240\u6709\u5185\u5bb9\u90fd\u5c06\u5728\u540c\u4e00\u8fdb\u7a0b\u4e2d\uff08\u5728\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e0a\uff09\u6267\u884c\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0d\u5728\u547d\u4ee4\u884c\u4e0a\u6307\u5b9a\u4efb\u4f55\u8fde\u63a5\u5668\u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u662f\u4f7f\u7528 REST API \u5728\u72ec\u7acb\u5de5\u4f5c\u7ebf\u7a0b\u542f\u52a8\u540e\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u8fde\u63a5\u5668\u3002 \u5206\u5e03\u5f0f\u6a21\u5f0f\u5904\u7406\u5de5\u4f5c\u7684\u81ea\u52a8\u5e73\u8861\uff0c\u5141\u8bb8\u60a8\u52a8\u6001\u6269\u5c55\uff08\u6216\u7f29\u5c0f\uff09\uff0c\u5e76\u5728\u6d3b\u52a8\u4efb\u52a1\u4ee5\u53ca\u914d\u7f6e\u548c\u504f\u79fb\u63d0\u4ea4\u6570\u636e\u4e2d\u63d0\u4f9b\u5bb9\u9519\u80fd\u529b\u3002\u6267\u884c\u4e0e\u72ec\u7acb\u6a21\u5f0f\u975e\u5e38\u76f8\u4f3c\uff1a > bin/connect-distributed.sh config/connect-distributed.properties \u533a\u522b\u5728\u4e8e\u542f\u52a8\u7684\u7c7b\u548c\u914d\u7f6e\u53c2\u6570\uff0c\u5b83\u4eec\u6539\u53d8\u4e86 Kafka Connect \u8fdb\u7a0b\u51b3\u5b9a\u5728\u54ea\u91cc\u5b58\u50a8\u914d\u7f6e\u3001\u5982\u4f55\u5206\u914d\u5de5\u4f5c\u4ee5\u53ca\u5728\u54ea\u91cc\u5b58\u50a8\u504f\u79fb\u91cf\u548c\u4efb\u52a1\u72b6\u6001\u7684\u65b9\u5f0f\u3002\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0cKafka Connect \u5c06\u504f\u79fb\u91cf\u3001\u914d\u7f6e\u548c\u4efb\u52a1\u72b6\u6001\u5b58\u50a8\u5728 Kafka \u4e3b\u9898\u4e2d\u3002\u5efa\u8bae\u624b\u52a8\u521b\u5efa\u504f\u79fb\u91cf\u3001\u914d\u7f6e\u548c\u72b6\u6001\u7684\u4e3b\u9898\uff0c\u4ee5\u83b7\u5f97\u6240\u9700\u7684\u5206\u533a\u6570\u91cf\u548c\u590d\u5236\u56e0\u5b50\u3002\u5982\u679c\u542f\u52a8 Kafka Connect \u65f6\u5c1a\u672a\u521b\u5efa\u4e3b\u9898\uff0c\u5219\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684\u5206\u533a\u6570\u548c\u590d\u5236\u56e0\u5b50\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\uff0c\u8fd9\u53ef\u80fd\u4e0d\u592a\u9002\u5408\u5176\u4f7f\u7528\u3002 \u7279\u522b\u662f\uff0c\u9664\u4e86\u4e0a\u9762\u63d0\u5230\u7684\u5e38\u89c1\u8bbe\u7f6e\u4e4b\u5916\uff0c\u5728\u542f\u52a8\u96c6\u7fa4\u4e4b\u524d\u8bbe\u7f6e\u4ee5\u4e0b\u914d\u7f6e\u53c2\u6570\u4e5f\u5f88\u91cd\u8981\uff1a group.id \uff08\u9ed8\u8ba4 connect-cluster \uff09- \u96c6\u7fa4\u7684\u552f\u4e00\u540d\u79f0\uff0c\u7528\u4e8e\u5f62\u6210 Connect \u96c6\u7fa4\u7ec4\uff1b\u8bf7\u6ce8\u610f\uff0c\u8fd9 \u4e0d\u80fd \u4e0e\u6d88\u8d39\u8005\u7ec4 ID\u51b2\u7a81 config.storage.topic \uff08\u9ed8\u8ba4 connect-configs \uff09- \u7528\u4e8e\u5b58\u50a8\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u914d\u7f6e\u7684\u4e3b\u9898\uff1b\u8bf7\u6ce8\u610f\uff0c\u8fd9\u5e94\u8be5\u662f\u5355\u4e2a\u5206\u533a\u3001\u9ad8\u5ea6\u590d\u5236\u3001\u538b\u7f29\u7684\u4e3b\u9898\u3002\u60a8\u53ef\u80fd\u9700\u8981\u624b\u52a8\u521b\u5efa\u4e3b\u9898\u4ee5\u786e\u4fdd\u6b63\u786e\u914d\u7f6e\uff0c\u56e0\u4e3a\u81ea\u52a8\u521b\u5efa\u7684\u4e3b\u9898\u53ef\u80fd\u6709\u591a\u4e2a\u5206\u533a\u6216\u81ea\u52a8\u914d\u7f6e\u4e3a\u5220\u9664\u800c\u4e0d\u662f\u538b\u7f29 offset.storage.topic \uff08\u9ed8\u8ba4 connect-offsets \uff09- \u7528\u4e8e\u5b58\u50a8\u504f\u79fb\u91cf\u7684\u4e3b\u9898\uff1b\u8be5\u4e3b\u9898\u5e94\u8be5\u6709\u8bb8\u591a\u5206\u533a\uff0c\u53ef\u4ee5\u590d\u5236\uff0c\u5e76\u914d\u7f6e\u4e3a\u538b\u7f29 status.storage.topic \uff08\u9ed8\u8ba4 connect-status \uff09- \u7528\u4e8e\u5b58\u50a8\u72b6\u6001\u7684\u4e3b\u9898\uff1b\u8be5\u4e3b\u9898\u53ef\u4ee5\u6709\u591a\u4e2a\u5206\u533a\uff0c\u5e76\u4e14\u5e94\u8be5\u590d\u5236\u5e76\u914d\u7f6e\u4e3a\u538b\u7f29 \u8bf7\u6ce8\u610f\uff0c\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0c\u8fde\u63a5\u5668\u914d\u7f6e\u4e0d\u4f1a\u5728\u547d\u4ee4\u884c\u4e0a\u4f20\u9012\u3002\u76f8\u53cd\uff0c\u8bf7\u4f7f\u7528\u4e0b\u9762\u63cf\u8ff0\u7684 REST API \u6765\u521b\u5efa\u3001\u4fee\u6539\u548c\u9500\u6bc1\u8fde\u63a5\u5668\u3002 \u914d\u7f6e\u8fde\u63a5\u5668 \u8fde\u63a5\u5668\u914d\u7f6e\u662f\u7b80\u5355\u7684\u952e\u503c\u6620\u5c04\u3002\u5728\u72ec\u7acb\u6a21\u5f0f\u548c\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0c\u5b83\u4eec\u90fd\u5305\u542b\u5728\u521b\u5efa\uff08\u6216\u4fee\u6539\uff09\u8fde\u63a5\u5668\u7684 REST \u8bf7\u6c42\u7684 JSON \u6709\u6548\u8d1f\u8f7d\u4e2d\u3002\u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u4e9b\u4e5f\u53ef\u4ee5\u5728\u5c5e\u6027\u6587\u4ef6\u4e2d\u5b9a\u4e49\u5e76\u4f20\u9012\u5230\u547d\u4ee4\u884c\u4e0a\u7684 Connect \u8fdb\u7a0b\u3002 \u5927\u591a\u6570\u914d\u7f6e\u90fd\u4f9d\u8d56\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u6b64\u5904\u65e0\u6cd5\u6982\u8ff0\u3002\u4f46\u662f\uff0c\u6709\u4e00\u4e9b\u5e38\u89c1\u7684\u9009\u9879\uff1a name - \u8fde\u63a5\u5668\u7684\u552f\u4e00\u540d\u79f0\u3002\u5c1d\u8bd5\u4f7f\u7528\u76f8\u540c\u540d\u79f0\u518d\u6b21\u6ce8\u518c\u5c06\u4f1a\u5931\u8d25\u3002 connector.class - \u8fde\u63a5\u5668\u7684 Java \u7c7b tasks.max - \u5e94\u4e3a\u6b64\u8fde\u63a5\u5668\u521b\u5efa\u7684\u6700\u5927\u4efb\u52a1\u6570\u3002\u5982\u679c\u8fde\u63a5\u5668\u65e0\u6cd5\u5b9e\u73b0\u8fd9\u79cd\u5e76\u884c\u7ea7\u522b\uff0c\u5b83\u53ef\u80fd\u4f1a\u521b\u5efa\u66f4\u5c11\u7684\u4efb\u52a1\u3002 key.converter -\uff08\u53ef\u9009\uff09\u8986\u76d6\u5de5\u4f5c\u4eba\u5458\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u5bc6\u94a5\u8f6c\u6362\u5668\u3002 value.converter -\uff08\u53ef\u9009\uff09\u8986\u76d6\u5de5\u4f5c\u4eba\u5458\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\u8f6c\u6362\u5668\u3002 \u8be5 connector.class \u914d\u7f6e\u652f\u6301\u591a\u79cd\u683c\u5f0f\uff1a\u8be5\u8fde\u63a5\u5668\u7684\u7c7b\u7684\u5168\u540d\u6216\u522b\u540d\u3002\u5982\u679c\u8fde\u63a5\u5668\u662f org.apache.kafka.connect.file.FileStreamSinkConnector\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u6b64\u5168\u540d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 FileStreamSink \u6216 FileStreamSinkConnector \u4f7f\u914d\u7f6e\u66f4\u77ed\u4e00\u4e9b\u3002 \u63a5\u6536\u5668\u8fde\u63a5\u5668\u8fd8\u6709\u4e00\u4e9b\u9644\u52a0\u9009\u9879\u6765\u63a7\u5236\u5176\u8f93\u5165\u3002\u6bcf\u4e2a\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5fc5\u987b\u8bbe\u7f6e\u4ee5\u4e0b\u5176\u4e2d\u4e00\u9879\uff1a topics - \u7528\u4f5c\u6b64\u8fde\u63a5\u5668\u8f93\u5165\u7684\u4ee5\u9017\u53f7\u5206\u9694\u7684\u4e3b\u9898\u5217\u8868 topics.regex - \u7528\u4f5c\u6b64\u8fde\u63a5\u5668\u8f93\u5165\u7684\u4e3b\u9898\u7684 Java \u6b63\u5219\u8868\u8fbe\u5f0f \u5bf9\u4e8e\u4efb\u4f55\u5176\u4ed6\u9009\u9879\uff0c\u60a8\u5e94\u8be5\u67e5\u9605\u8fde\u63a5\u5668\u7684\u6587\u6863\u3002 \u8f6c\u6362 \u8fde\u63a5\u5668\u53ef\u4ee5\u914d\u7f6e\u8f6c\u6362\u4ee5\u8fdb\u884c\u8f7b\u91cf\u7ea7\u7684\u4e00\u6b21\u6d88\u606f\u4fee\u6539\u3002\u5b83\u4eec\u53ef\u4ee5\u65b9\u4fbf\u5730\u8fdb\u884c\u6570\u636e\u5904\u7406\u548c\u4e8b\u4ef6\u8def\u7531\u3002 \u53ef\u4ee5\u5728\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u6307\u5b9a\u8f6c\u6362\u94fe\u3002 transforms - \u8f6c\u6362\u7684\u522b\u540d\u5217\u8868\uff0c\u6307\u5b9a\u8f6c\u6362\u7684\u5e94\u7528\u987a\u5e8f\u3002 transforms.$alias.type - \u8f6c\u6362\u7684\u5b8c\u5168\u9650\u5b9a\u7c7b\u540d\u79f0\u3002 transforms.$alias.$transformationSpecificConfig \u8f6c\u6362\u7684\u914d\u7f6e\u5c5e\u6027 \u4f8b\u5982\uff0c\u8ba9\u6211\u4eec\u91c7\u7528\u5185\u7f6e\u6587\u4ef6\u6e90\u8fde\u63a5\u5668\u5e76\u4f7f\u7528\u8f6c\u6362\u6765\u6dfb\u52a0\u9759\u6001\u5b57\u6bb5\u3002 \u5728\u6574\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u65e0\u6a21\u5f0f JSON \u6570\u636e\u683c\u5f0f\u3002\u4e3a\u4e86\u4f7f\u7528\u65e0\u6a21\u5f0f\u683c\u5f0f\uff0c\u6211\u4eec\u5c06\u4ee5\u4e0b\u4e24\u884c connect-standalone.properties \u4ece true \u66f4\u6539\u4e3a false\uff1a key.converter.schemas.enable value.converter.schemas.enable \u6587\u4ef6\u6e90\u8fde\u63a5\u5668\u5c06\u6bcf\u4e00\u884c\u8bfb\u53d6\u4e3a\u5b57\u7b26\u4e32\u3002\u6211\u4eec\u5c06\u628a\u6bcf\u4e00\u884c\u5305\u88c5\u5728\u4e00\u4e2a Map \u4e2d\uff0c\u7136\u540e\u6dfb\u52a0\u7b2c\u4e8c\u4e2a\u5b57\u6bb5\u6765\u6807\u8bc6\u4e8b\u4ef6\u7684\u8d77\u6e90\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u4e24\u79cd\u8f6c\u6362\uff1a HoistField \u5c06\u8f93\u5165\u7ebf\u653e\u7f6e\u5728\u5730\u56fe\u5185 InsertField \u6dfb\u52a0\u9759\u6001\u5b57\u6bb5\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u6307\u793a\u8bb0\u5f55\u6765\u81ea\u6587\u4ef6\u8fde\u63a5\u5668 \u6dfb\u52a0\u8f6c\u6362\u540e\uff0c connect-file-source.properties \u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff1a name=local-file-source connector.class=FileStreamSource tasks.max=1 file=test.txt topic=connect-test transforms=MakeMap, InsertSource transforms.MakeMap.type=org.apache.kafka.connect.transforms.HoistField$Value transforms.MakeMap.field=line transforms.InsertSource.type=org.apache.kafka.connect.transforms.InsertField$Value transforms.InsertSource.static.field=data_source transforms.InsertSource.static.value=test-file-source \u6240\u6709\u4ee5 \u5f00\u5934\u7684\u884c transforms \u90fd\u662f\u4e3a\u4e86\u8f6c\u6362\u800c\u6dfb\u52a0\u7684\u3002\u60a8\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u521b\u5efa\u7684\u4e24\u4e2a\u8f6c\u6362\uff1a\u201cInsertSource\u201d\u548c\u201cMakeMap\u201d\u662f\u6211\u4eec\u9009\u62e9\u63d0\u4f9b\u8f6c\u6362\u7684\u522b\u540d\u3002\u8f6c\u6362\u7c7b\u578b\u57fa\u4e8e\u60a8\u53ef\u4ee5\u5728\u4e0b\u9762\u770b\u5230\u7684\u5185\u7f6e\u8f6c\u6362\u5217\u8868\u3002\u6bcf\u4e2a\u8f6c\u6362\u7c7b\u578b\u90fd\u6709\u9644\u52a0\u914d\u7f6e\uff1aHoistField \u9700\u8981\u4e00\u4e2a\u540d\u4e3a\u201cfield\u201d\u7684\u914d\u7f6e\uff0c\u5b83\u662f\u6620\u5c04\u4e2d\u5305\u542b\u6587\u4ef6\u4e2d\u539f\u59cb\u5b57\u7b26\u4e32\u7684\u5b57\u6bb5\u7684\u540d\u79f0\u3002InsertField \u8f6c\u6362\u8ba9\u6211\u4eec\u6307\u5b9a\u5b57\u6bb5\u540d\u79f0\u548c\u8981\u6dfb\u52a0\u7684\u503c\u3002 \u5f53\u6211\u4eec\u5728\u4e0d\u8fdb\u884c\u8f6c\u6362\u7684\u60c5\u51b5\u4e0b\u5728\u793a\u4f8b\u6587\u4ef6\u4e0a\u8fd0\u884c\u6587\u4ef6\u6e90\u8fde\u63a5\u5668\uff0c\u7136\u540e\u4f7f\u7528 \u8bfb\u53d6\u5b83\u4eec\u65f6 kafka-console-consumer.sh \uff0c\u7ed3\u679c\u662f\uff1a \"foo\" \"bar\" \"hello world\" \u7136\u540e\uff0c\u6211\u4eec\u5728\u5c06\u8f6c\u6362\u6dfb\u52a0\u5230\u914d\u7f6e\u6587\u4ef6\u4e4b\u540e\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u8fde\u63a5\u5668\u3002\u8fd9\u6b21\uff0c\u7ed3\u679c\u5c06\u662f\uff1a {\"line\":\"foo\",\"data_source\":\"test-file-source\"} {\"line\":\"bar\",\"data_source\":\"test-file-source\"} {\"line\":\"hello world\",\"data_source\":\"test-file-source\"} \u60a8\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u8bfb\u53d6\u7684\u884c\u73b0\u5728\u662f JSON \u6620\u5c04\u7684\u4e00\u90e8\u5206\uff0c\u5e76\u4e14\u6709\u4e00\u4e2a\u5e26\u6709\u6211\u4eec\u6307\u5b9a\u7684\u9759\u6001\u503c\u7684\u989d\u5916\u5b57\u6bb5\u3002\u8fd9\u53ea\u662f\u60a8\u53ef\u4ee5\u4f7f\u7528\u8f6c\u6362\u6267\u884c\u7684\u64cd\u4f5c\u7684\u793a\u4f8b\u4e4b\u4e00\u3002 \u5305\u542b\u7684\u8f6c\u6362 Kafka Connect \u5305\u542b\u591a\u79cd\u5e7f\u6cdb\u9002\u7528\u7684\u6570\u636e\u548c\u8def\u7531\u8f6c\u6362\uff1a InsertField - \u4f7f\u7528\u9759\u6001\u6570\u636e\u6216\u8bb0\u5f55\u5143\u6570\u636e\u6dfb\u52a0\u5b57\u6bb5 ReplaceField - \u8fc7\u6ee4\u6216\u91cd\u547d\u540d\u5b57\u6bb5 MaskField - \u5c06\u5b57\u6bb5\u66ff\u6362\u4e3a\u7c7b\u578b\u7684\u6709\u6548\u7a7a\u503c\uff080\u3001\u7a7a\u5b57\u7b26\u4e32\u7b49\uff09\u6216\u81ea\u5b9a\u4e49\u66ff\u6362\uff08\u4ec5\u9650\u975e\u7a7a\u5b57\u7b26\u4e32\u6216\u6570\u503c\uff09 ValueToKey - \u5c06\u8bb0\u5f55\u952e\u66ff\u6362\u4e3a\u7531\u8bb0\u5f55\u503c\u4e2d\u7684\u5b57\u6bb5\u5b50\u96c6\u5f62\u6210\u7684\u65b0\u952e HoistField - \u5c06\u6574\u4e2a\u4e8b\u4ef6\u5305\u88c5\u4e3a\u7ed3\u6784\u6216\u6620\u5c04\u4e2d\u7684\u5355\u4e2a\u5b57\u6bb5 ExtractField - \u4ece Struct \u548c Map \u4e2d\u63d0\u53d6\u7279\u5b9a\u5b57\u6bb5\u5e76\u5728\u7ed3\u679c\u4e2d\u4ec5\u5305\u542b\u8be5\u5b57\u6bb5 SetSchemaMetadata - \u4fee\u6539\u6a21\u5f0f\u540d\u79f0\u6216\u7248\u672c TimestampRouter - \u6839\u636e\u539f\u59cb\u4e3b\u9898\u548c\u65f6\u95f4\u6233\u4fee\u6539\u8bb0\u5f55\u7684\u4e3b\u9898\u3002\u5f53\u4f7f\u7528\u9700\u8981\u6839\u636e\u65f6\u95f4\u6233\u5199\u5165\u4e0d\u540c\u8868\u6216\u7d22\u5f15\u7684\u63a5\u6536\u5668\u65f6\u5f88\u6709\u7528 RegexRouter - \u6839\u636e\u539f\u59cb\u4e3b\u9898\u3001\u66ff\u6362\u5b57\u7b26\u4e32\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u4fee\u6539\u8bb0\u5f55\u7684\u4e3b\u9898 Filter - \u4ece\u6240\u6709\u8fdb\u4e00\u6b65\u5904\u7406\u4e2d\u5220\u9664\u6d88\u606f\u3002\u8fd9\u4e0e \u8c13\u8bcd \u4e00\u8d77\u4f7f\u7528\u6765\u9009\u62e9\u6027\u5730\u8fc7\u6ee4\u67d0\u4e9b\u6d88\u606f\u3002 InsertHeader - \u4f7f\u7528\u9759\u6001\u6570\u636e\u6dfb\u52a0\u6807\u9898 HeadersFrom - \u5c06\u952e\u6216\u503c\u4e2d\u7684\u5b57\u6bb5\u590d\u5236\u6216\u79fb\u52a8\u5230\u8bb0\u5f55\u6807\u9898 DropHeaders - \u6309\u540d\u79f0\u5220\u9664\u6807\u5934 \u4e0b\u9762\u5217\u51fa\u4e86\u5982\u4f55\u914d\u7f6e\u6bcf\u4e2a\u8f6c\u6362\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a org.apache.kafka.connect.transforms.InsertField \u4f7f\u7528\u8bb0\u5f55\u5143\u6570\u636e\u4e2d\u7684\u5c5e\u6027\u6216\u914d\u7f6e\u7684\u9759\u6001\u503c\u63d2\u5165\u5b57\u6bb5\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.InsertField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.InsertField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 offset.field Kafka \u504f\u79fb\u91cf\u7684\u5b57\u6bb5\u540d\u79f0 - \u4ec5\u9002\u7528\u4e8e\u63a5\u6536\u5668\u8fde\u63a5\u5668\u3002 \u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium partition.field Kafka \u5206\u533a\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium static.field \u9759\u6001\u6570\u636e\u5b57\u6bb5\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium static.value \u9759\u6001\u5b57\u6bb5\u503c\uff08\u5982\u679c\u914d\u7f6e\u4e86\u5b57\u6bb5\u540d\u79f0\uff09\u3002 Type: string Default: null Valid Values: Importance: medium timestamp.field \u8bb0\u5f55\u65f6\u95f4\u6233\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium topic.field Kafka \u4e3b\u9898\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium org.apache.kafka.connect.transforms.ReplaceField \u8fc7\u6ee4\u6216\u91cd\u547d\u540d\u5b57\u6bb5\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.ReplaceField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.ReplaceField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 exclude \u8981\u6392\u9664\u7684\u5b57\u6bb5\u3002\u8fd9\u4f18\u5148\u4e8e\u8981\u5305\u542b\u7684\u5b57\u6bb5\u3002 Type: list Default: \"\" Valid Values: Importance: medium include \u8981\u5305\u542b\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6307\u5b9a\uff0c\u5219\u4ec5\u4f7f\u7528\u8fd9\u4e9b\u5b57\u6bb5\u3002 Type: list Default: \"\" Valid Values: Importance: medium renames \u5b57\u6bb5\u91cd\u547d\u540d\u6620\u5c04\u3002 Type: list Default: \"\" Valid Values: \u4ee5\u5192\u53f7\u5206\u9694\u7684\u5bf9\u7684\u5217\u8868\uff0c\u4f8b\u5982 foo:bar,abc:xyz Importance: medium blacklist \u5df2\u5f03\u7528\u3002\u8bf7\u6539\u7528\u6392\u9664\u3002 Type: list Default: null Valid Values: Importance: low whitelist \u5df2\u5f03\u7528\u3002\u4f7f\u7528\u5305\u542b\u4ee3\u66ff\u3002 Type: list Default: null Valid Values: Importance: low org.apache.kafka.connect.transforms.MaskField \u4f7f\u7528\u5b57\u6bb5\u7c7b\u578b\u7684\u6709\u6548\u7a7a\u503c\uff08\u5373 0, false, empty string \u7b49\uff09\u5c4f\u853d\u6307\u5b9a\u5b57\u6bb5\u3002 \u5bf9\u4e8e\u6570\u5b57\u548c\u5b57\u7b26\u4e32\u5b57\u6bb5\uff0c\u53ef\u4ee5\u6307\u5b9a\u8f6c\u6362\u4e3a\u6b63\u786e\u7c7b\u578b\u7684\u53ef\u9009\u66ff\u6362\u503c\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.MaskField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.MaskField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 fields \u8981\u5c4f\u853d\u7684\u5b57\u6bb5\u7684\u540d\u79f0\u3002 Type: list Default: Valid Values: non-empty list Importance: high replacement \u81ea\u5b9a\u4e49\u503c\u66ff\u6362\uff0c\u5c06\u5e94\u7528\u4e8e\u6240\u6709\u201c\u5b57\u6bb5\u201d\u503c\uff08\u4ec5\u9650\u6570\u5b57\u6216\u975e\u7a7a\u5b57\u7b26\u4e32\u503c\uff09\u3002 Type: string Default: null Valid Values: non-empty string Importance: low org.apache.kafka.connect.transforms.ValueToKey \u5c06\u8bb0\u5f55\u952e\u66ff\u6362\u4e3a\u7531\u8bb0\u5f55\u503c\u4e2d\u7684\u5b57\u6bb5\u5b50\u96c6\u5f62\u6210\u7684\u65b0\u952e\u3002 fields \u8981\u63d0\u53d6\u4f5c\u4e3a\u8bb0\u5f55\u952e\u7684\u8bb0\u5f55\u503c\u4e0a\u7684\u5b57\u6bb5\u540d\u79f0\u3002 Type: list Default: Valid Values: non-empty list Importance: high org.apache.kafka.connect.transforms.HoistField \u5982\u679c\u5b58\u5728\u67b6\u6784\uff0c\u5219\u4f7f\u7528\u7ed3\u6784\u4e2d\u6307\u5b9a\u7684\u5b57\u6bb5\u540d\u79f0\u5305\u88c5\u6570\u636e\uff1b\u5982\u679c\u5b58\u5728\u65e0\u67b6\u6784\u6570\u636e\uff0c\u5219\u4f7f\u7528\u6620\u5c04\u5305\u88c5\u6570\u636e\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.HoistField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.HoistField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 fields \u5c06\u5728\u751f\u6210\u7684\u7ed3\u6784\u6216\u6620\u5c04\u4e2d\u521b\u5efa\u7684\u5355\u4e2a\u5b57\u6bb5\u7684\u5b57\u6bb5\u540d\u79f0\u3002 Type: string Default: Valid Values: Importance: medium org.apache.kafka.connect.transforms.ExtractField \u5982\u679c\u5b58\u5728\u6a21\u5f0f\uff0c\u5219\u4ece\u7ed3\u6784\u4e2d\u63d0\u53d6\u6307\u5b9a\u5b57\u6bb5\uff1b\u5982\u679c\u5b58\u5728\u65e0\u6a21\u5f0f\u6570\u636e\uff0c\u5219\u4ece\u6620\u5c04\u4e2d\u63d0\u53d6\u6307\u5b9a\u5b57\u6bb5\u3002\u4efb\u4f55\u7a7a\u503c\u90fd\u4f1a\u4e0d\u52a0\u4fee\u6539\u5730\u4f20\u9012\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.ExtractField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.ExtractField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 fields \u8981\u63d0\u53d6\u7684\u5b57\u6bb5\u540d\u79f0\u3002 Type: string Default: Valid Values: Importance: medium org.apache.kafka.connect.transforms.SetSchemaMetadata org.apache.kafka.connect.transforms.SetSchemaMetadata$Key \u5728\u8bb0\u5f55\u7684\u952e ( ) \u6216\u503c ( org.apache.kafka.connect.transforms.SetSchemaMetadata$Value ) \u67b6\u6784 \u4e0a\u8bbe\u7f6e\u67b6\u6784\u540d\u79f0\u3001\u7248\u672c\u6216\u4e24\u8005\u3002 schema.name \u8981\u8bbe\u7f6e\u7684\u67b6\u6784\u540d\u79f0\u3002 Type: string Default: null Valid Values: Importance: high schema.version \u8981\u8bbe\u7f6e\u7684\u67b6\u6784\u7248\u672c\u3002 Type: int Default: null Valid Values: Importance: high org.apache.kafka.connect.transforms.TimestampRouter \u6839\u636e\u539f\u59cb\u4e3b\u9898\u503c\u548c\u8bb0\u5f55\u65f6\u95f4\u6233\u66f4\u65b0\u8bb0\u5f55\u7684\u4e3b\u9898\u5b57\u6bb5\u3002 \u8fd9\u4e3b\u8981\u5bf9\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6709\u7528\uff0c\u56e0\u4e3a\u4e3b\u9898\u5b57\u6bb5\u901a\u5e38\u7528\u4e8e\u786e\u5b9a\u76ee\u6807\u7cfb\u7edf\u4e2d\u7684\u7b49\u6548\u5b9e\u4f53\u540d\u79f0\uff08\u4f8b\u5982\u6570\u636e\u5e93\u8868\u6216\u641c\u7d22\u7d22\u5f15\u540d\u79f0\uff09\u3002 timestamp.format \u4e0e \u517c\u5bb9\u7684\u65f6\u95f4\u6233\u7684\u683c\u5f0f\u5b57\u7b26\u4e32 java.text.SimpleDateFormat \u3002 Type: string Default: yyyyMMdd Valid Values: Importance: high topic.format \u683c\u5f0f\u5b57\u7b26\u4e32\u53ef\u4ee5\u5305\u542b ${topic} \u548c ${timestamp} \u4f5c\u4e3a\u4e3b\u9898\u548c\u65f6\u95f4\u6233\u7684\u5360\u4f4d\u7b26\u3002 Type: string Default: ${topic}-${timestamp} Valid Values: Importance: high org.apache.kafka.connect.transforms.RegexRouter \u4f7f\u7528\u914d\u7f6e\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\u66ff\u6362\u5b57\u7b26\u4e32\u66f4\u65b0\u8bb0\u5f55\u4e3b\u9898\u3002 \u5728\u5e95\u5c42\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u88ab\u7f16\u8bd1\u4e3a java.util.regex.Pattern . \u5982\u679c\u6a21\u5f0f\u4e0e\u8f93\u5165\u4e3b\u9898\u5339\u914d\uff0c java.util.regex.Matcher#replaceFirst() \u5219\u4e0e\u66ff\u6362\u5b57\u7b26\u4e32\u4e00\u8d77\u4f7f\u7528\u6765\u83b7\u53d6\u65b0\u4e3b\u9898\u3002 regex \u7528\u4e8e\u5339\u914d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 Type: string Default: Valid Values: \u6709\u6548\u7684\u6b63\u5219\u8868\u8fbe\u5f0f Importance: high replacement \u66ff\u6362\u5b57\u7b26\u4e32\u3002 Type: string Default: Valid Values: Importance: high org.apache.kafka.connect.transforms.Flatten \u5c55\u5e73\u5d4c\u5957\u6570\u636e\u7ed3\u6784\uff0c\u901a\u8fc7\u5c06\u6bcf\u4e2a\u7ea7\u522b\u7684\u5b57\u6bb5\u540d\u79f0\u4e0e\u53ef\u914d\u7f6e\u7684\u5206\u9694\u7b26\u8fde\u63a5\u6765\u751f\u6210\u6bcf\u4e2a\u5b57\u6bb5\u7684\u540d\u79f0\u3002\u5f53\u6a21\u5f0f\u5b58\u5728\u65f6\u9002\u7528\u4e8e\u7ed3\u6784\uff0c\u6216\u8005\u5728\u65e0\u6a21\u5f0f\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u9002\u7528\u4e8e\u6620\u5c04\u3002\u6570\u7ec4\u5b57\u6bb5\u53ca\u5176\u5185\u5bb9\u4e0d\u4f1a\u88ab\u4fee\u6539\u3002\u9ed8\u8ba4\u5206\u9694\u7b26\u662f\u201c.\u201d\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.Flatten$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.Flatten$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 delimiter \u4e3a\u8f93\u51fa\u8bb0\u5f55\u751f\u6210\u5b57\u6bb5\u540d\u79f0\u65f6\u5728\u8f93\u5165\u8bb0\u5f55\u7684\u5b57\u6bb5\u540d\u79f0\u4e4b\u95f4\u63d2\u5165\u7684\u5206\u9694\u7b26 Type: string Default: . Valid Values: Importance: medium org.apache.kafka.connect.transforms.Cast \u5c06\u5b57\u6bb5\u6216\u6574\u4e2a\u952e\u6216\u503c\u8f6c\u6362\u4e3a\u7279\u5b9a\u7c7b\u578b\uff0c\u4f8b\u5982\u5f3a\u5236\u6574\u6570\u5b57\u6bb5\u5177\u6709\u8f83\u5c0f\u7684\u5bbd\u5ea6\u3002\u4ece\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5e03\u5c14\u503c\u548c\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u4efb\u4f55\u5176\u4ed6\u7c7b\u578b\uff0c\u5e76\u5c06\u4e8c\u8fdb\u5236\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff08base64 \u7f16\u7801\uff09\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.Cast$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.Cast$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 spec \u5b57\u6bb5\u5217\u8868\u4ee5\u53ca\u5c06\u5176\u8f6c\u6362\u4e3a form field1:type,field2:type \u7684\u7c7b\u578b\u4ee5\u8f6c\u6362\u6620\u5c04\u6216\u7ed3\u6784\u7684\u5b57\u6bb5\u3002\u7528\u4e8e\u8f6c\u6362\u6574\u4e2a\u503c\u7684\u5355\u4e00\u7c7b\u578b\u3002\u6709\u6548\u7c7b\u578b\u5305\u62ec int8\u3001int16\u3001int32\u3001int64\u3001float32\u3001float64\u3001boolean \u548c string\u3002\u8bf7\u6ce8\u610f\uff0c\u4e8c\u8fdb\u5236\u5b57\u6bb5\u53ea\u80fd\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u3002 Type: list Default: Valid Values: \u4ee5\u5192\u53f7\u5206\u9694\u7684\u5bf9\u7684\u5217\u8868\uff0c\u4f8b\u5982 foo:bar,abc:xyz Importance: high org.apache.kafka.connect.transforms.TimestampConverter \u5728\u4e0d\u540c\u683c\u5f0f\uff08\u4f8b\u5982 Unix \u7eaa\u5143\u3001\u5b57\u7b26\u4e32\u548c\u8fde\u63a5\u65e5\u671f/\u65f6\u95f4\u6233\u7c7b\u578b\uff09\u4e4b\u95f4\u8f6c\u6362\u65f6\u95f4\u6233\u3002\u9002\u7528\u4e8e\u5355\u4e2a\u5b57\u6bb5\u6216\u6574\u4e2a\u503c\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.TimestampConverter$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.TimestampConverter$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 target.type \u6240\u9700\u7684\u65f6\u95f4\u6233\u8868\u793a\u5f62\u5f0f\uff1a\u5b57\u7b26\u4e32\u3001unix\u3001\u65e5\u671f\u3001\u65f6\u95f4\u6216\u65f6\u95f4\u6233 Type: string Default: Valid Values: [string, unix, Date, Time, Timestamp] Importance: high fields \u5305\u542b\u65f6\u95f4\u6233\u7684\u5b57\u6bb5\uff0c\u5982\u679c\u6574\u4e2a\u503c\u662f\u65f6\u95f4\u6233\uff0c\u5219\u4e3a\u7a7a Type: string Default: \"\" Valid Values: Importance: high format \u4e0e SimpleDateFormat \u517c\u5bb9\u7684\u65f6\u95f4\u6233\u683c\u5f0f\u3002\u5f53 type=string \u65f6\u7528\u4e8e\u751f\u6210\u8f93\u51fa\uff0c\u6216\u8005\u5982\u679c\u8f93\u5165\u662f\u5b57\u7b26\u4e32\u5219\u7528\u4e8e\u89e3\u6790\u8f93\u5165\u3002 Type: string Default: \"\" Valid Values: Importance: medium unix.precision \u65f6\u95f4\u6233\u6240\u9700\u7684 Unix \u7cbe\u5ea6\uff1a\u79d2\u3001\u6beb\u79d2\u3001\u5fae\u79d2\u6216\u7eb3\u79d2\u3002\u7528\u4e8e\u5728 type=unix \u65f6\u751f\u6210\u8f93\u51fa\uff0c\u6216\u7528\u4e8e\u5728\u8f93\u5165\u4e3a Long \u65f6\u89e3\u6790\u8f93\u5165\u3002\u6ce8\u610f\uff1a\u6b64 SMT \u5c06\u5728\u4e0e\u5177\u6709\u4e9a\u6beb\u79d2\u5206\u91cf\u7684\u503c\u8fdb\u884c\u8f6c\u6362\u671f\u95f4\u5bfc\u81f4\u7cbe\u5ea6\u635f\u5931\u3002 Type: string Default: milliseconds Valid Values: [nanoseconds, microseconds, milliseconds, seconds] Importance: low org.apache.kafka.connect.transforms.Filter \u5220\u9664\u6240\u6709\u8bb0\u5f55\uff0c\u4ece\u94fe\u4e2d\u7684\u540e\u7eed\u8f6c\u6362\u4e2d\u8fc7\u6ee4\u5b83\u4eec\u3002\u8fd9\u65e8\u5728\u6709\u6761\u4ef6\u5730\u7528\u4e8e\u8fc7\u6ee4\u6389\u4e0e\u7279\u5b9a\u8c13\u8bcd\u5339\u914d\uff08\u6216\u4e0d\u5339\u914d\uff09\u7684\u8bb0\u5f55\u3002 org.apache.kafka.connect.transforms.InsertHeader \u4e3a\u6bcf\u6761\u8bb0\u5f55\u6dfb\u52a0\u6807\u9898\u3002 header \u6807\u5934\u7684\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string Importance: high value.literal \u8981\u8bbe\u7f6e\u4e3a\u6240\u6709\u8bb0\u5f55\u4e0a\u7684\u6807\u9898\u503c\u7684\u6587\u5b57\u503c\u3002 Type: string Default: Valid Values: non-empty string Importance: high org.apache.kafka.connect.transforms.DropHeaders \u4ece\u6bcf\u6761\u8bb0\u5f55\u4e2d\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u6807\u5934\u3002 header \u8981\u5220\u9664\u7684\u6807\u5934\u7684\u540d\u79f0\u3002 Type: list Default: Valid Values: non-empty list Importance: high org.apache.kafka.connect.transforms.HeaderFrom \u5c06\u8bb0\u5f55\u7684\u952e/\u503c\u4e2d\u7684\u5b57\u6bb5\u79fb\u52a8\u6216\u590d\u5236\u5230\u8be5\u8bb0\u5f55\u7684\u6807\u9898\u4e2d\u3002 fields \u548c \u7684\u76f8\u5e94\u5143\u7d20 headers \u4e00\u8d77\u6807\u8bc6\u5b57\u6bb5\u4ee5\u53ca\u5e94\u5c06\u5176\u79fb\u52a8\u6216\u590d\u5236\u5230\u7684\u6807\u9898\u3002\u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.HeaderFrom$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.HeaderFrom$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002 fields \u8bb0\u5f55\u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u5176\u503c\u5c06\u88ab\u590d\u5236\u6216\u79fb\u52a8\u5230\u6807\u9898\u3002 Type: list Default: Valid Values: non-empty list Importance: high header \u6807\u5934\u540d\u79f0\u7684\u987a\u5e8f\u4e0e\u5b57\u6bb5\u914d\u7f6e\u5c5e\u6027\u4e2d\u5217\u51fa\u7684\u5b57\u6bb5\u540d\u79f0\u7684\u987a\u5e8f\u76f8\u540c\u3002 Type: list Default: Valid Values: non-empty list Importance: high operation \u5982\u679c move \u8981\u5c06\u5b57\u6bb5\u79fb\u52a8\u5230\u6807\u9898\uff08\u4ece\u952e/\u503c\u4e2d\u5220\u9664\uff09\uff0c\u6216\u8005 copy \u5c06\u5b57\u6bb5\u590d\u5236\u5230\u6807\u9898\uff08\u4fdd\u7559\u5728\u952e/\u503c\u4e2d\uff09\u3002 Type: string Default: Valid Values: [move, copy] Importance: high \u8c13\u8bcd \u8f6c\u6362\u53ef\u4ee5\u7528\u8c13\u8bcd\u914d\u7f6e\uff0c\u4ee5\u4fbf\u8f6c\u6362\u4ec5\u9002\u7528\u4e8e\u6ee1\u8db3\u67d0\u4e9b\u6761\u4ef6\u7684\u6d88\u606f\u3002\u7279\u522b\u662f\uff0c\u5f53\u4e0e \u8fc7\u6ee4\u5668 \u8f6c\u6362\u8c13\u8bcd\u76f8\u7ed3\u5408\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u62e9\u6027\u5730\u8fc7\u6ee4\u67d0\u4e9b\u6d88\u606f\u3002 \u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86\u8c13\u8bcd\u3002 predicates -\u5e94\u7528\u4e8e\u67d0\u4e9b\u8f6c\u6362\u7684\u8c13\u8bcd\u7684\u522b\u540d\u96c6\u3002 predicates.$alias.type -\u8c13\u8bcd\u7684\u5b8c\u5168\u5408\u683c\u7684\u7c7b\u540d\u3002 predicates.$alias.$predicateSpecificConfig -\u8c13\u8bcd\u7684\u914d\u7f6e\u5c5e\u6027\u3002 \u6240\u6709\u8f6c\u6362\u90fd\u5177\u6709\u9690\u5f0f\u914d\u7f6e\u5c5e\u6027 predicate \u548c negate \u3002\u901a\u8fc7\u5c06\u8f6c\u6362\u7684 predicate \u914d\u7f6e\u8bbe\u7f6e\u4e3a\u8c13\u8bcd\u7684\u522b\u540d\uff0c\u8c13\u8bcd\u4e0e\u8f6c\u6362\u76f8\u5173\u8054\u3002\u53ef\u4ee5\u4f7f\u7528 negate \u914d\u7f6e\u5c5e\u6027\u53cd\u8f6c\u8c13\u8bcd\u7684\u503c\u3002 \u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u6709\u4e00\u4e2a\u6e90\u8fde\u63a5\u5668\uff0c\u53ef\u4ee5\u751f\u6210\u8bb8\u591a\u4e0d\u540c\u4e3b\u9898\u7684\u6d88\u606f\uff0c\u5e76\u4e14\u60a8\u60f3\u8981\uff1a \u5b8c\u5168\u8fc7\u6ee4\u6389\u201cfoo\u201d\u4e3b\u9898\u4e2d\u7684\u6d88\u606f \u5c06\u5b57\u6bb5\u540d\u79f0\u4e3a\u201cother_field\u201d\u7684ExtractField\u8f6c\u6362\u5e94\u7528\u4e8e \u9664 \u4e3b\u9898\u201cbar\u201d\u4ee5\u5916\u7684\u6240\u6709\u4e3b\u9898\u4e2d\u7684\u8bb0\u5f55 \u8981\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u8fc7\u6ee4\u6389\u201cfoo\u201d\u4e3b\u9898\u7684\u8bb0\u5f55\u3002\u8fc7\u6ee4\u5668\u8f6c\u6362\u5c06\u8bb0\u5f55\u4ece\u8fdb\u4e00\u6b65\u5904\u7406\u4e2d\u5220\u9664\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528TopicNameMatches\u8c13\u8bcd\u4ec5\u5c06\u8f6c\u6362\u5e94\u7528\u4e8e\u4e0e\u7279\u5b9a\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u4e3b\u9898\u4e2d\u7684\u8bb0\u5f55\u3002TopicNameMatches\u7684\u552f\u4e00\u914d\u7f6e\u5c5e\u6027\u662f pattern \uff0c\u5b83\u662f\u4e0e\u4e3b\u9898\u540d\u79f0\u5339\u914d\u7684Java\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u914d\u7f6e\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a transforms=Filter transforms.Filter.type=org.apache.kafka.connect.transforms.Filter transforms.Filter.predicate=IsFoo predicates=IsFoo predicates.IsFoo.type=org.apache.kafka.connect.transforms.predicates.TopicNameMatches predicates.IsFoo.pattern=foo \u63a5\u4e0b\u6765\uff0c\u4ec5\u5f53\u8bb0\u5f55\u7684\u4e3b\u9898\u540d\u79f0\u4e0d\u662f\u201cbar\u201d\u65f6\uff0c\u6211\u4eec\u624d\u9700\u8981\u5e94\u7528ExtractField\u3002\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528 TopicNameMatches\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5c06\u8f6c\u6362\u5e94\u7528\u4e8e\u5339\u914d\u7684\u4e3b\u9898\u540d\u79f0\uff0c\u800c\u4e0d\u662f\u4e0d \u5339\u914d \u7684\u4e3b\u9898\u540d\u79f0\u3002\u8f6c\u6362\u7684\u9690\u5f0f negate \u914d\u7f6e\u5c5e\u6027\u5141\u8bb8\u6211\u4eec\u53cd\u8f6c\u8c13\u8bcd\u5339\u914d\u7684\u8bb0\u5f55\u96c6\u3002\u5c06\u5176\u914d\u7f6e\u6dfb\u52a0\u5230\u524d\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5f97\u5230\uff1a transforms=Filter,Extract transforms.Filter.type=org.apache.kafka.connect.transforms.Filter transforms.Filter.predicate=IsFoo transforms.Extract.type=org.apache.kafka.connect.transforms.ExtractField$Key transforms.Extract.field=other_field transforms.Extract.predicate=IsBar transforms.Extract.negate=true predicates=IsFoo,IsBar predicates.IsFoo.type=org.apache.kafka.connect.transforms.predicates.TopicNameMatches predicates.IsFoo.pattern=foo predicates.IsBar.type=org.apache.kafka.connect.transforms.predicates.TopicNameMatches predicates.IsBar.pattern=bar Kafka Connect \u5305\u62ec\u4ee5\u4e0b\u8c13\u8bcd\uff1a TopicNameMatches - \u5339\u914d\u4e3b\u9898\u4e2d\u540d\u79f0\u4e0e\u7279\u5b9a Java \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u8bb0\u5f55\u3002 HasHeaderKey - \u5339\u914d\u5177\u6709\u7ed9\u5b9a\u952e\u7684\u6807\u5934\u7684\u8bb0\u5f55\u3002 RecordIsTombstone - \u5339\u914d\u5893\u7891\u8bb0\u5f55\uff0c\u5373\u5177\u6709\u7a7a\u503c\u7684\u8bb0\u5f55\u3002 \u4e0b\u9762\u5217\u51fa\u4e86\u5982\u4f55\u914d\u7f6e\u6bcf\u4e2a\u8c13\u8bcd\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a org.apache.kafka.connect.transforms.predicates.HasHeaderKey \u4e00\u4e2a\u8c13\u8bcd\uff0c\u5bf9\u4e8e\u81f3\u5c11\u5177\u6709\u4e00\u4e2a\u5177\u6709\u914d\u7f6e\u540d\u79f0\u7684\u6807\u5934\u7684\u8bb0\u5f55\u4e3a\u771f\u3002 name \u6807\u5934\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string Importance: medium org.apache.kafka.connect.transforms.predicates.RecordIsTombstone \u5bf9\u4e8e\u903b\u8f91\u5220\u9664\uff08\u5373\u5177\u6709\u7a7a\u503c\uff09\u7684\u8bb0\u5f55\u4e3a\u771f\u7684\u8c13\u8bcd\u3002 org.apache.kafka.connect.transforms.predicates.TopicNameMatches \u5bf9\u4e8e\u4e3b\u9898\u540d\u79f0\u4e0e\u914d\u7f6e\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u8bb0\u5f55\u4e3a true \u7684\u8c13\u8bcd\u3002 pattern \u7528\u4e8e\u5339\u914d\u8bb0\u5f55\u4e3b\u9898\u540d\u79f0\u7684 Java \u6b63\u5219\u8868\u8fbe\u5f0f\u3002 Type: string Default: Valid Values: \u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u6709\u6548\u7684\u6b63\u5219\u8868\u8fbe\u5f0f Importance: medium REST API \u7531\u4e8e Kafka Connect \u65e8\u5728\u4f5c\u4e3a\u670d\u52a1\u8fd0\u884c\uff0c\u56e0\u6b64\u5b83\u8fd8\u63d0\u4f9b\u4e86\u7528\u4e8e\u7ba1\u7406\u8fde\u63a5\u5668\u7684 REST API\u3002\u6b64 REST API \u53ef\u5728\u72ec\u7acb\u6a21\u5f0f\u548c\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\u4f7f\u7528\u3002\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u9009\u9879\u914d\u7f6e REST API \u670d\u52a1\u5668 listeners \u3002\u8be5\u5b57\u6bb5\u5e94\u5305\u542b\u4ee5\u4e0b\u683c\u5f0f\u7684\u4fa6\u542c\u5668\u5217\u8868\uff1a protocol://host:port,protocol2://host2:port2 \u3002\u76ee\u524d\u652f\u6301\u7684\u534f\u8bae\u6709 http \u548c https \u3002\u4f8b\u5982\uff1a listeners=http://localhost:8080,https://localhost:8443 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a listeners \uff0cREST\u670d\u52a1\u5668\u4f7f\u7528HTTP\u534f\u8bae\u5728\u7aef\u53e38083\u4e0a\u8fd0\u884c\u3002\u4f7f\u7528HTTPS\u65f6\uff0c\u914d\u7f6e\u5fc5\u987b\u5305\u62ecSSL\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u5c06\u4f7f\u7528 ssl.* \u8bbe\u7f6e\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528REST API\u4e0e\u8fde\u63a5\u5230Kafka\u7ecf\u7eaa\u4eba\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u53ef\u4ee5\u524d\u7f00\u4e3a listeners.https \u3002\u4f7f\u7528\u524d\u7f00\u65f6\uff0c\u5c06\u4ec5\u4f7f\u7528\u524d\u7f00\u9009\u9879\uff0c\u4e0d\u5e26\u524d\u7f00\u7684 ssl.* \u9009\u9879\u5c06\u88ab\u5ffd\u7565\u3002\u4ee5\u4e0b\u5b57\u6bb5\u53ef\u7528\u4e8e\u4e3aREST API\u914d\u7f6eHTTPS\uff1a ssl.keystore.location ssl.keystore.password ssl.keystore.type ssl.key.password ssl.truststore.location ssl.truststore.password ssl.truststore.type ssl.enabled.protocols ssl.provider ssl.protocol ssl.cipher.suites ssl.keymanager.algorithm ssl.secure.random.implementation ssl.trustmanager.algorithm ssl.endpoint.identification.algorithm ssl.client.auth REST API\u4e0d\u4ec5\u88ab\u7528\u6237\u7528\u4e8e\u76d1\u63a7/\u7ba1\u7406Kafka Connect\u3002\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0c\u5b83\u8fd8\u7528\u4e8eKafka Connect\u8de8\u96c6\u7fa4\u901a\u4fe1\u3002\u5728\u5173\u6ce8\u8282\u70b9REST API\u4e0a\u6536\u5230\u7684\u4e00\u4e9b\u8bf7\u6c42\u5c06\u8f6c\u53d1\u5230\u9886\u5bfc\u8282\u70b9REST API\u3002\u5982\u679c\u7ed9\u5b9a\u4e3b\u673a\u53ef\u8bbf\u95ee\u7684URI\u4e0e\u5b83\u76d1\u542c\u7684URI\u4e0d\u540c\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u9009\u9879 rest.advertised.host.name \u3001 rest.advertised.port \u548c rest.advertised.listener \u6765\u66f4\u6539\u8ffd\u968f\u8005\u8282\u70b9\u5c06\u7528\u4e8e\u4e0e\u9886\u5bfc\u8005\u8fde\u63a5\u7684URI\u3002\u5f53\u540c\u65f6\u4f7f\u7528HTTP\u548cHTTPS\u4fa6\u542c\u5668\u65f6\uff0c rest.advertised.listener \u9009\u9879\u8fd8\u53ef\u7528\u4e8e\u5b9a\u4e49\u54ea\u4e2a\u4fa6\u542c\u5668\u5c06\u7528\u4e8e\u8de8\u96c6\u7fa4\u901a\u4fe1\u3002\u5f53\u4f7f\u7528HTTPS\u8fdb\u884c\u8282\u70b9\u4e4b\u95f4\u7684\u901a\u4fe1\u65f6\uff0c\u5c06\u4f7f\u7528\u76f8\u540c\u7684 ssl.* \u6216 listeners.https \u9009\u9879\u6765\u914d\u7f6eHTTPS\u5ba2\u6237\u7aef\u3002 \u4ee5\u4e0b\u662f\u5f53\u524d\u652f\u6301\u7684 REST API \u7aef\u70b9\uff1a GET /connectors - \u8fd4\u56de\u6d3b\u52a8\u8fde\u63a5\u5668\u7684\u5217\u8868 POST /connectors - \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u5668\uff1b\u8bf7\u6c42\u6b63\u6587\u5e94\u8be5\u662f\u4e00\u4e2a JSON \u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u5b57\u7b26\u4e32 name \u5b57\u6bb5\u548c config \u5e26\u6709\u8fde\u63a5\u5668\u914d\u7f6e\u53c2\u6570\u7684\u5bf9\u8c61\u5b57\u6bb5 GET /connectors/{name} - \u83b7\u53d6\u6709\u5173\u7279\u5b9a\u8fde\u63a5\u5668\u7684\u4fe1\u606f GET /connectors/{name}/config - \u83b7\u53d6\u7279\u5b9a\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u53c2\u6570 PUT /connectors/{name}/config - \u66f4\u65b0\u7279\u5b9a\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u53c2\u6570 GET /connectors/{name}/status - \u83b7\u53d6\u8fde\u63a5\u5668\u7684\u5f53\u524d\u72b6\u6001\uff0c\u5305\u62ec\u5b83\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3001\u5931\u8d25\u3001\u6682\u505c\u7b49\uff0c\u5b83\u88ab\u5206\u914d\u7ed9\u54ea\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u5931\u8d25\u65f6\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u4ee5\u53ca\u5b83\u7684\u6240\u6709\u4efb\u52a1\u7684\u72b6\u6001 GET /connectors/{name}/tasks - \u83b7\u53d6\u8fde\u63a5\u5668\u5f53\u524d\u8fd0\u884c\u7684\u4efb\u52a1\u5217\u8868 GET /connectors/{name}/tasks/{taskid}/status - \u83b7\u53d6\u4efb\u52a1\u7684\u5f53\u524d\u72b6\u6001\uff0c\u5305\u62ec\u5b83\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3001\u5931\u8d25\u3001\u6682\u505c\u7b49\uff0c\u5b83\u88ab\u5206\u914d\u7ed9\u54ea\u4e2aworker\uff0c\u4ee5\u53ca\u5931\u8d25\u65f6\u7684\u9519\u8bef\u4fe1\u606f PUT /connectors/{name}/pause - \u6682\u505c\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\uff0c\u8fd9\u4f1a\u505c\u6b62\u6d88\u606f\u5904\u7406\uff0c\u76f4\u5230\u8fde\u63a5\u5668\u6062\u590d\u4e3a\u6b62\u3002\u5176\u4efb\u52a1\u5360\u7528\u7684\u4efb\u4f55\u8d44\u6e90\u90fd\u4f1a\u4fdd\u7559\u5206\u914d\u72b6\u6001\uff0c\u8fd9\u4f7f\u5f97\u8fde\u63a5\u5668\u53ef\u4ee5\u5728\u6062\u590d\u540e\u5feb\u901f\u5f00\u59cb\u5904\u7406\u6570\u636e\u3002 PUT /connectors/{name}/stop - \u505c\u6b62\u8fde\u63a5\u5668\u5e76\u5173\u95ed\u5176\u4efb\u52a1\uff0c\u53d6\u6d88\u5206\u914d\u5176\u4efb\u52a1\u5360\u7528\u7684\u4efb\u4f55\u8d44\u6e90\u3002\u4ece\u8d44\u6e90\u4f7f\u7528\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u6bd4\u6682\u505c\u8fde\u63a5\u5668\u66f4\u6709\u6548\uff0c\u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8fde\u63a5\u5668\u6062\u590d\u540e\u9700\u8981\u66f4\u957f\u65f6\u95f4\u624d\u80fd\u5f00\u59cb\u5904\u7406\u6570\u636e\u3002 PUT /connectors/{name}/resume - \u6062\u590d\u6682\u505c\u6216\u505c\u6b62\u7684\u8fde\u63a5\u5668\uff08\u6216\u8005\u5982\u679c\u8fde\u63a5\u5668\u672a\u6682\u505c\u6216\u505c\u6b62\u5219\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\uff09 POST /connectors/{name}/restart?includeTasks=<true|false>&onlyFailed=<true|false> - \u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\u5b9e\u4f8b\u3002 \u201cincludeTasks\u201d\u53c2\u6570\u6307\u5b9a\u662f\u5426\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u5b9e\u4f8b\u548c\u4efb\u52a1\u5b9e\u4f8b\uff08\u201cincludeTasks=true\u201d\uff09\u6216\u4ec5\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u5b9e\u4f8b\uff08\u201cincludeTasks=false\u201d\uff09\uff0c\u9ed8\u8ba4\u503c\uff08\u201cfalse\u201d\uff09\u4fdd\u7559\u4e0e\u65e9\u671f\u7248\u672c\u76f8\u540c\u7684\u884c\u4e3a\u3002 \u201conlyFailed\u201d\u53c2\u6570\u6307\u5b9a\u662f\u4ec5\u91cd\u65b0\u542f\u52a8\u5177\u6709 FAILED \u72b6\u6001\u7684\u5b9e\u4f8b\uff08\u201conlyFailed=true\u201d\uff09\u8fd8\u662f\u91cd\u65b0\u542f\u52a8\u6240\u6709\u5b9e\u4f8b\uff08\u201conlyFailed=false\u201d\uff09\uff0c\u9ed8\u8ba4\u503c\uff08\u201cfalse\u201d\uff09\u4fdd\u7559\u4e0e\u65e9\u671f\u7248\u672c\u76f8\u540c\u7684\u884c\u4e3a\u3002 POST /connectors/{name}/tasks/{taskId}/restart - \u91cd\u65b0\u542f\u52a8\u5355\u4e2a\u4efb\u52a1\uff08\u901a\u5e38\u662f\u56e0\u4e3a\u5b83\u5931\u8d25\u4e86\uff09 DELETE /connectors/{name} - \u5220\u9664\u8fde\u63a5\u5668\uff0c\u505c\u6b62\u6240\u6709\u4efb\u52a1\u5e76\u5220\u9664\u5176\u914d\u7f6e GET /connectors/{name}/topics - \u83b7\u53d6\u81ea\u521b\u5efa\u8fde\u63a5\u5668\u6216\u53d1\u51fa\u91cd\u7f6e\u5176\u6d3b\u52a8\u4e3b\u9898\u96c6\u7684\u8bf7\u6c42\u4ee5\u6765\u7279\u5b9a\u8fde\u63a5\u5668\u6b63\u5728\u4f7f\u7528\u7684\u4e3b\u9898\u96c6 PUT /connectors/{name}/topics/reset - \u53d1\u9001\u8bf7\u6c42\u4ee5\u6e05\u7a7a\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6 GET /connectors/{name}/offsets - \u83b7\u53d6\u8fde\u63a5\u5668\u7684\u5f53\u524d\u504f\u79fb\uff08\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-875 \uff09 FileStreamSourceConnector\u7684\u793a\u4f8b\u8bf7\u6c42\u4e3b\u4f53\uff1a { \"offsets\": [ { \"partition\": { \"filename\": \"test.txt\" }, \"offset\": { \"position\": 30 } } ] } FileStreamSinkConnector\u7684\u8bf7\u6c42\u4e3b\u4f53\u793a\u4f8b\uff1a { \"offsets\": [ { \"partition\": { \"kafka_topic\": \"test\", \"kafka_partition\": 0 }, \"offset\": { \"kafka_offset\": 5 } }, { \"partition\": { \"kafka_topic\": \"test\", \"kafka_partition\": 1 }, \"offset\": null } ] } \u201c\u504f\u79fb\u201d\u5b57\u6bb5\u53ef\u80fd\u4e3a\u7a7a\uff0c\u4ee5\u91cd\u7f6e\u7279\u5b9a\u5206\u533a\u7684\u504f\u79fb\u91cf\uff08\u9002\u7528\u4e8e\u6e90\u8fde\u63a5\u5668\u548c\u63a5\u6536\u5668\u8fde\u63a5\u5668\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u6e90\u8fde\u63a5\u5668\u7684\u60c5\u51b5\u4e0b\uff0c\u8bf7\u6c42\u4e3b\u4f53\u683c\u5f0f\u53d6\u51b3\u4e8e\u8fde\u63a5\u5668\u7684\u5b9e\u73b0\uff0c\u800c\u6240\u6709\u63a5\u6536\u5668\u8fde\u63a5\u5668\u90fd\u6709\u901a\u7528\u683c\u5f0f\u3002 Kafka Connect \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a REST API\uff0c\u7528\u4e8e\u83b7\u53d6\u6709\u5173\u8fde\u63a5\u5668\u63d2\u4ef6\u7684\u4fe1\u606f\uff1a GET /connector-plugins - \u8fd4\u56de Kafka Connect \u96c6\u7fa4\u4e2d\u5b89\u88c5\u7684\u8fde\u63a5\u5668\u63d2\u4ef6\u5217\u8868\u3002\u8bf7\u6ce8\u610f\uff0cAPI \u4ec5\u68c0\u67e5\u5904\u7406\u8bf7\u6c42\u7684\u5de5\u4f5c\u7ebf\u7a0b\u4e0a\u7684\u8fde\u63a5\u5668\uff0c\u8fd9\u610f\u5473\u7740\u60a8\u53ef\u80fd\u4f1a\u770b\u5230\u4e0d\u4e00\u81f4\u7684\u7ed3\u679c\uff0c\u5c24\u5176\u662f\u5728\u6eda\u52a8\u5347\u7ea7\u671f\u95f4\uff0c\u5982\u679c\u60a8\u6dfb\u52a0\u65b0\u7684\u8fde\u63a5\u5668 jar PUT /connector-plugins/{connector-type}/config/validate - \u6839\u636e\u914d\u7f6e\u5b9a\u4e49\u9a8c\u8bc1\u63d0\u4f9b\u7684\u914d\u7f6e\u503c\u3002\u6b64 API \u6267\u884c\u6bcf\u4e2a\u914d\u7f6e\u9a8c\u8bc1\uff0c\u5728\u9a8c\u8bc1\u671f\u95f4\u8fd4\u56de\u5efa\u8bae\u503c\u548c\u9519\u8bef\u6d88\u606f\u3002 \u4ee5\u4e0b\u662f\u9876\u7ea7\uff08\u6839\uff09\u7aef\u70b9\u652f\u6301\u7684 REST \u8bf7\u6c42\uff1a GET / - \u8fd4\u56de\u6709\u5173 Kafka Connect \u96c6\u7fa4\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u4f8b\u5982\u670d\u52a1 REST \u8bf7\u6c42\u7684 Connect Worker \u7684\u7248\u672c\uff08\u5305\u62ec\u6e90\u4ee3\u7801\u7684 git commit ID\uff09\u4ee5\u53ca\u8fde\u63a5\u5230\u7684 Kafka \u96c6\u7fa4 ID\u3002 \u6709\u5173 REST API \u7684\u5b8c\u6574\u89c4\u8303\uff0c\u8bf7\u53c2\u9605 OpenAPI \u6587\u6863 Connect \u4e2d\u7684\u9519\u8bef\u62a5\u544a Kafka Connect \u63d0\u4f9b\u9519\u8bef\u62a5\u544a\u6765\u5904\u7406\u5404\u4e2a\u5904\u7406\u9636\u6bb5\u9047\u5230\u7684\u9519\u8bef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6c\u6362\u671f\u95f4\u6216\u8f6c\u6362\u4e2d\u9047\u5230\u7684\u4efb\u4f55\u9519\u8bef\u90fd\u4f1a\u5bfc\u81f4\u8fde\u63a5\u5668\u5931\u8d25\u3002\u6bcf\u4e2a\u8fde\u63a5\u5668\u914d\u7f6e\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8df3\u8fc7\u6b64\u7c7b\u9519\u8bef\u3001\u9009\u62e9\u6027\u5730\u5c06\u6bcf\u4e2a\u9519\u8bef\u4ee5\u53ca\u5931\u8d25\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u6709\u95ee\u9898\u7684\u8bb0\u5f55\uff08\u5177\u6709\u5404\u79cd\u8be6\u7ec6\u7ea7\u522b\uff09\u5199\u5165 Connect \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6765\u5bb9\u5fcd\u6b64\u7c7b\u9519\u8bef\u3002\u5f53\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5904\u7406\u4ece\u5176 Kafka \u4e3b\u9898\u6d88\u8017\u7684\u6d88\u606f\u65f6\uff0c\u8fd9\u4e9b\u673a\u5236\u8fd8\u4f1a\u6355\u83b7\u9519\u8bef\uff0c\u5e76\u4e14\u6240\u6709\u9519\u8bef\u90fd\u53ef\u4ee5\u5199\u5165\u53ef\u914d\u7f6e\u7684\u201c\u6b7b\u4fe1\u961f\u5217\u201d(DLQ) Kafka \u4e3b\u9898\u3002 \u8981\u5c06\u8fde\u63a5\u5668\u7684\u8f6c\u6362\u5668\u3001\u8f6c\u6362\u6216\u63a5\u6536\u5668\u8fde\u63a5\u5668\u672c\u8eab\u5185\u7684\u9519\u8bef\u62a5\u544a\u5230\u65e5\u5fd7\uff0c\u8bf7 errors.log.enable=true \u5728\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u8bbe\u7f6e\u4ee5\u8bb0\u5f55\u6bcf\u4e2a\u9519\u8bef\u548c\u95ee\u9898\u8bb0\u5f55\u7684\u4e3b\u9898\u3001\u5206\u533a\u548c\u504f\u79fb\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u51fa\u4e8e\u5176\u4ed6\u8c03\u8bd5\u76ee\u7684\uff0c\u8bbe\u7f6e errors.log.include.messages=true \u4e3a\u8fd8\u5c06\u95ee\u9898\u8bb0\u5f55\u952e\u3001\u503c\u548c\u6807\u5934\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\uff08\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ef\u80fd\u4f1a\u8bb0\u5f55\u654f\u611f\u4fe1\u606f\uff09\u3002 \u8981\u5c06\u8fde\u63a5\u5668\u7684\u8f6c\u6362\u5668\u3001\u8f6c\u6362\u6216\u63a5\u6536\u5668\u8fde\u63a5\u5668\u672c\u8eab\u5185\u7684\u9519\u8bef\u62a5\u544a\u7ed9\u6b7b\u4fe1\u961f\u5217\u4e3b\u9898\uff0c\u8bf7\u8bbe\u7f6e errors.deadletterqueue.topic.name \u548c\uff08\u53ef\u9009\uff09 errors.deadletterqueue.context.headers.enable=true \u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fde\u63a5\u5668\u5728\u51fa\u73b0\u9519\u8bef\u6216\u5f02\u5e38\u65f6\u7acb\u5373\u8868\u73b0\u51fa\u201c\u5feb\u901f\u5931\u8d25\u201d\u884c\u4e3a\u3002\u8fd9\u76f8\u5f53\u4e8e\u5c06\u4ee5\u4e0b\u914d\u7f6e\u5c5e\u6027\u53ca\u5176\u9ed8\u8ba4\u503c\u6dfb\u52a0\u5230\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\uff1a # disable retries on failure errors.retry.timeout=0 # do not log the error and their contexts errors.log.enable=false # do not record errors in a dead letter queue topic errors.deadletterqueue.topic.name= # Fail on first error errors.tolerance=none \u53ef\u4ee5\u66f4\u6539\u8fd9\u4e9b\u548c\u5176\u4ed6\u76f8\u5173\u7684\u8fde\u63a5\u5668\u914d\u7f6e\u5c5e\u6027\u4ee5\u63d0\u4f9b\u4e0d\u540c\u7684\u884c\u4e3a\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u4ee5\u4e0b\u914d\u7f6e\u5c5e\u6027\u6dfb\u52a0\u5230\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\uff0c\u4ee5\u901a\u8fc7\u591a\u6b21\u91cd\u8bd5\u8bbe\u7f6e\u9519\u8bef\u5904\u7406\u3001\u8bb0\u5f55\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u548c Kafka \u4e3b\u9898 my-connector-errors \uff0c\u5e76\u901a\u8fc7\u62a5\u544a\u9519\u8bef\u800c\u4e0d\u662f\u4f7f\u8fde\u63a5\u5668\u4efb\u52a1\u5931\u8d25\u6765\u5bb9\u5fcd\u6240\u6709\u9519\u8bef\uff1a # retry for at most 10 minutes times waiting up to 30 seconds between consecutive failures errors.retry.timeout=600000 errors.retry.delay.max.ms=30000 # log error context along with application logs, but do not include configs and messages errors.log.enable=true errors.log.include.messages=false # produce error context into the Kafka topic errors.deadletterqueue.topic.name=my-connector-errors # Tolerate all errors. errors.tolerance=all exactly.once.support Kafka Connect \u80fd\u591f\u4e3a\u63a5\u6536\u5668\u8fde\u63a5\u5668\uff08\u4ece\u7248\u672c 0.11.0 \u5f00\u59cb\uff09\u548c\u6e90\u8fde\u63a5\u5668\uff08\u4ece\u7248\u672c 3.3.0 \u5f00\u59cb\uff09\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002\u8bf7\u6ce8\u610f\uff0c \u5bf9\u4e00\u6b21\u8bed\u4e49\u7684\u652f\u6301\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u60a8\u8fd0\u884c\u7684\u8fde\u63a5\u5668\u7c7b\u578b\u3002 \u5373\u4f7f\u60a8\u5728\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u7684\u914d\u7f6e\u4e2d\u8bbe\u7f6e\u4e86\u6240\u6709\u6b63\u786e\u7684\u5de5\u4f5c\u7ebf\u7a0b\u5c5e\u6027\uff0c\u5982\u679c\u8fde\u63a5\u5668\u672a\u8bbe\u8ba1\u4e3a\u6216\u65e0\u6cd5\u5229\u7528 Kafka Connect \u6846\u67b6\u7684\u529f\u80fd\uff0c\u5219\u53ef\u80fd\u65e0\u6cd5\u5b9e\u73b0\u7cbe\u786e\u4e00\u6b21\u3002 \u6c34\u69fd\u8fde\u63a5\u5668 \u5982\u679c\u63a5\u6536\u5668\u8fde\u63a5\u5668\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\uff0c\u8981\u5728 Connect \u5de5\u4f5c\u7ebf\u7a0b\u7ea7\u522b\u542f\u7528\u7cbe\u786e\u4e00\u6b21\uff0c\u60a8\u5fc5\u987b\u786e\u4fdd\u5176\u4f7f\u7528\u8005\u7ec4\u914d\u7f6e\u4e3a\u5ffd\u7565\u4e2d\u6b62\u4e8b\u52a1\u4e2d\u7684\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u5de5\u4f5c\u7a0b\u5e8f\u5c5e\u6027\u8bbe\u7f6e consumer.isolation.level \u4e3a\u6765\u5b9e\u73b0\u6b64 read_committed \u76ee\u7684\uff0c\u6216\u8005\uff0c\u5982\u679c\u8fd0\u884c\u652f\u6301\u5b83\u7684 Kafka Connect \u7248\u672c\uff0c\u5219\u4f7f\u7528 \u8fde\u63a5\u5668\u5ba2\u6237\u7aef\u914d\u7f6e\u8986\u76d6\u7b56\u7565 \uff0c\u5141\u8bb8\u5728\u5404\u4e2a\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d consumer.override.isolation.level \u5c06\u8be5\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u3002 read_committed \u6ca1\u6709\u989d\u5916\u7684 ACL \u8981\u6c42\u3002 \u6e90\u8fde\u63a5\u5668 \u5982\u679c\u6e90\u8fde\u63a5\u5668\u652f\u6301\u4e00\u6b21\u6027\u8bed\u4e49\uff0c\u5219\u5fc5\u987b\u914d\u7f6e Connect \u96c6\u7fa4\u4ee5\u542f\u7528\u5bf9\u4e00\u6b21\u6027\u6e90\u8fde\u63a5\u5668\u7684\u6846\u67b6\u7ea7\u652f\u6301\u3002\u5982\u679c\u9488\u5bf9\u5b89\u5168\u7684 Kafka \u96c6\u7fa4\u8fd0\u884c\uff0c\u53ef\u80fd\u9700\u8981\u989d\u5916\u7684 ACL\u3002\u8bf7\u6ce8\u610f\uff0c\u5bf9\u6e90\u8fde\u63a5\u5668\u7684\u4e00\u6b21\u6027\u652f\u6301\u76ee\u524d\u4ec5\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\u53ef\u7528\uff1b\u72ec\u7acb\u7684 Connect \u5de5\u4f5c\u7ebf\u7a0b\u65e0\u6cd5\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002 \u5de5\u4f5c\u4eba\u5458\u914d\u7f6e \u5bf9\u4e8e\u65b0\u7684 Connect \u96c6\u7fa4\uff0c\u8bf7\u5728\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u7684\u5de5\u4f5c\u7a0b\u5e8f\u914d\u7f6e\u4e2d\u5c06\u8be5 exactly.once.source.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u3002 enabled \u5bf9\u4e8e\u73b0\u6709\u96c6\u7fa4\uff0c\u9700\u8981\u8fdb\u884c\u4e24\u6b21\u6eda\u52a8\u5347\u7ea7\u3002\u5728\u7b2c\u4e00\u6b21\u5347\u7ea7\u671f\u95f4\uff0c\u8be5 exactly.once.source.support \u5c5e\u6027\u5e94\u8bbe\u7f6e\u4e3a preparing \uff0c\u5728\u7b2c\u4e8c\u6b21\u5347\u7ea7\u671f\u95f4\uff0c\u5e94\u8bbe\u7f6e\u4e3a enabled \u3002 ACL\u8981\u6c42 \u542f\u7528\u4e00\u6b21\u6027\u6e90\u652f\u6301\u540e\uff0c\u6bcf\u4e2a Connect \u5de5\u4f5c\u7ebf\u7a0b\u7684\u4e3b\u4f53\u5c06\u9700\u8981\u4ee5\u4e0b ACL\uff1a OPERATION RESOURCE TYPE RESOURCE NAME NOTE Write TransactionalId connect-cluster-${groupId} , where ${groupId} is the group.id of the cluster Describe TransactionalId connect-cluster-${groupId} , where ${groupId} is the group.id of the cluster IdempotentWrite Cluster ID of the Kafka cluster that hosts the worker's config topic The IdempotentWrite ACL has been deprecated as of 2.8 and will only be necessary for Connect clusters running on pre-2.8 Kafka clusters \u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u4e3b\u4f53\u5c06\u9700\u8981\u4ee5\u4e0b ACL\uff1a OPERATION RESOURCE TYPE RESOURCE NAME NOTE Write TransactionalId ${groupId}-${connector}-${taskId} , for each task that the connector will create, where ${groupId} is the group.id of the Connect cluster, ${connector} is the name of the connector, and ${taskId} is the ID of the task (starting from zero) A wildcard prefix of ${groupId}-${connector}* can be used for convenience if there is no risk of conflict with other transactional IDs or if conflicts are acceptable to the user. Describe TransactionalId ${groupId}-${connector}-${taskId} , for each task that the connector will create, where ${groupId} is the group.id of the Connect cluster, ${connector} is the name of the connector, and ${taskId} is the ID of the task (starting from zero) A wildcard prefix of ${groupId}-${connector}* can be used for convenience if there is no risk of conflict with other transactional IDs or if conflicts are acceptable to the user. Write Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Read Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Describe Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Create Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Only necessary if the offsets topic for the connector does not exist yet IdempotentWrite Cluster ID of the Kafka cluster that the source connector writes to The IdempotentWrite ACL has been deprecated as of 2.8 and will only be necessary for Connect clusters running on pre-2.8 Kafka clusters \u63d2\u4ef6\u53d1\u73b0 \u63d2\u4ef6\u53d1\u73b0\u662fConnect\u5de5\u4f5c\u8005\u7528\u4e8e\u67e5\u627e\u63d2\u4ef6\u7c7b\u5e76\u4f7f\u5176\u5728\u8fde\u63a5\u5668\u4e2d\u914d\u7f6e\u548c\u8fd0\u884c\u7684\u7b56\u7565\u7684\u540d\u79f0\u3002\u8fd9\u7531 plugin.discovery worker\u914d\u7f6e\u63a7\u5236\uff0c\u5e76\u5bf9\u5de5\u4eba\u542f\u52a8\u65f6\u95f4\u6709\u91cd\u5927\u5f71\u54cd\u3002 service_load \u662f\u6700\u5feb\u7684\u7b56\u7565\uff0c\u4f46\u5728\u5c06\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a service_load \u4e4b\u524d\uff0c\u5e94\u6ce8\u610f\u9a8c\u8bc1\u63d2\u4ef6\u662f\u5426\u517c\u5bb9\u3002 \u57283.6\u7248\u672c\u4e4b\u524d\uff0c\u6b64\u7b56\u7565\u662f\u4e0d\u53ef\u914d\u7f6e\u7684\uff0c\u5176\u884c\u4e3a\u7c7b\u4f3c\u4e8e\u4e0e\u6240\u6709\u63d2\u4ef6\u517c\u5bb9 only_scan \u6a21\u5f0f\u3002\u5bf9\u4e8e3.6\u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6b64\u6a21\u5f0f\u9ed8\u8ba4\u4e3a hybrid_warn \uff0c\u5b83\u4e5f\u4e0e\u6240\u6709\u63d2\u4ef6\u517c\u5bb9\uff0c\u4f46\u4f1a\u8bb0\u5f55\u4e0e service_load \u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u7684\u8b66\u544a\u3002\u5982\u679c\u68c0\u6d4b\u5230\u4e0e service_load \u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\uff0c hybrid_fail \u7b56\u7565\u4f1a\u9519\u8bef\u5730\u963b\u6b62\u5de5\u4eba\uff0c\u5e76\u65ad\u8a00\u6240\u6709\u63d2\u4ef6\u90fd\u662f\u517c\u5bb9\u7684\u3002\u6700\u540e\uff0c service_load \u7b56\u7565\u7981\u7528\u6240\u6709\u5176\u4ed6\u6a21\u5f0f\u4e2d\u4f7f\u7528\u7684\u7f13\u6162\u9057\u7559\u626b\u63cf\u673a\u5236\uff0c\u800c\u662f\u4f7f\u7528\u66f4\u5feb\u7684 ServiceLoader \u673a\u5236\u3002\u4e0e\u8be5\u673a\u5236\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u3002 \u9a8c\u8bc1\u63d2\u4ef6\u517c\u5bb9\u6027 \u8981\u9a8c\u8bc1\u60a8\u7684\u6240\u6709\u63d2\u4ef6\u662f\u5426\u4e0e service_load \u517c\u5bb9\uff0c\u9996\u5148\u786e\u4fdd\u60a8\u4f7f\u7528\u7684\u662fKafka Connect 3.6\u6216\u66f4\u9ad8\u7248\u672c\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u68c0\u67e5\u4e4b\u4e00\uff1a \u4f7f\u7528\u9ed8\u8ba4\u7684 hybrid_warn \u548c\u4e3atheorg org.apache.kafka.connect \u5305\u542f\u7528\u7684WARN\u65e5\u5fd7\u542f\u52a8\u60a8\u7684\u5458\u5de5\u3002\u81f3\u5c11\u5e94\u6253\u5370\u4e00\u6761\u63d0\u53ca plugin.discovery \u914d\u7f6e\u7684\u8b66\u544a\u65e5\u5fd7\u6d88\u606f\u3002\u6b64\u65e5\u5fd7\u6d88\u606f\u5c06\u660e\u786e\u8868\u793a\u6240\u6709\u63d2\u4ef6\u90fd\u517c\u5bb9\uff0c\u6216\u5217\u51fa\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u3002 \u4f7f\u7528 hybrid_fail \u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u542f\u52a8\u60a8\u7684\u5458\u5de5\u3002\u5982\u679c\u6240\u6709\u63d2\u4ef6\u90fd\u517c\u5bb9\uff0c\u542f\u52a8\u5c06\u6210\u529f\u3002\u5982\u679c\u81f3\u5c11\u6709\u4e00\u4e2a\u63d2\u4ef6\u4e0d\u517c\u5bb9\uff0c\u5de5\u4eba\u5c06\u65e0\u6cd5\u542f\u52a8\uff0c\u6240\u6709\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u90fd\u5c06\u5217\u5728\u4f8b\u5916\u4e2d\u3002 \u5982\u679c\u9a8c\u8bc1\u6b65\u9aa4\u6210\u529f\uff0c\u90a3\u4e48\u60a8\u5f53\u524d\u5b89\u88c5\u7684\u63d2\u4ef6\u96c6\u662f\u517c\u5bb9\u7684\uff0c\u5c06 plugin.discovery \u914d\u7f6e\u66f4\u6539\u4e3a service_load \u5e94\u8be5\u662f\u5b89\u5168\u7684\u3002\u5982\u679c\u9a8c\u8bc1\u5931\u8d25\uff0c\u60a8\u65e0\u6cd5\u4f7f\u7528 service_load \u7b56\u7565\uff0c\u5e76\u5e94\u6ce8\u610f\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u5217\u8868\u3002\u5728\u4f7f\u7528 service_load \u7b56\u7565\u4e4b\u524d\uff0c\u5fc5\u987b\u89e3\u51b3\u6240\u6709\u63d2\u4ef6\u3002\u5efa\u8bae\u5728\u5b89\u88c5\u6216\u66f4\u6539\u63d2\u4ef6\u7248\u672c\u540e\u6267\u884c\u6b64\u9a8c\u8bc1\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6301\u7eed\u96c6\u6210\u73af\u5883\u4e2d\u81ea\u52a8\u5b8c\u6210\u9a8c\u8bc1\u3002 \u8fd0\u8425\u5546\uff1a\u6587\u7269\u8fc1\u79fb \u4f5c\u4e3aConnect\u7684\u8fd0\u8425\u5546\uff0c\u5982\u679c\u60a8\u53d1\u73b0\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\uff0c\u6709\u591a\u79cd\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3\u4e0d\u517c\u5bb9\u7684\u95ee\u9898\u3002\u5b83\u4eec\u4ece\u5927\u591a\u6570\u5230\u6700\u4e0d\u53d7\u6b22\u8fce\u90fd\u5728\u4e0b\u9762\u5217\u51fa\u3002 \u68c0\u67e5\u63d2\u4ef6\u63d0\u4f9b\u5546\u7684\u6700\u65b0\u7248\u672c\uff0c\u5982\u679c\u517c\u5bb9\uff0c\u8bf7\u5347\u7ea7\u3002 \u8054\u7cfb\u60a8\u7684\u63d2\u4ef6\u63d0\u4f9b\u5546\uff0c\u8981\u6c42\u4ed6\u4eec\u6309\u7167 \u6e90\u8fc1\u79fb\u8bf4\u660e \u8fc1\u79fb\u63d2\u4ef6\u4f7f\u5176\u517c\u5bb9\uff0c\u7136\u540e\u5347\u7ea7\u5230\u517c\u5bb9\u7248\u672c\u3002 \u4f7f\u7528\u968f\u9644\u7684\u8fc1\u79fb\u811a\u672c\u81ea\u884c\u8fc1\u79fb\u63d2\u4ef6\u5de5\u4ef6\u3002 \u8fc1\u79fb\u811a\u672c\u4f4d\u4e8eKafka\u5b89\u88c5\u7684 bin/connect-plugin-path.sh \u548c bin\\windows\\connect-plugin-path.bat \u4e2d\u3002\u8be5\u811a\u672c\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u6216\u4fee\u6539JAR\u6216\u8d44\u6e90\u6587\u4ef6\u6765\u8fc1\u79fb\u5df2\u5b89\u88c5\u5728Connect worker'splugin plugin.path \u4e0a\u7684\u4e0d\u517c\u5bb9\u63d2\u4ef6\u5de5\u4ef6\u3002\u8fd9\u4e0d\u9002\u5408\u4f7f\u7528\u4ee3\u7801\u7b7e\u540d\u7684\u73af\u5883\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u6539\u53d8\u5de5\u4ef6\uff0c\u4f7f\u5176\u65e0\u6cd5\u901a\u8fc7\u7b7e\u540d\u9a8c\u8bc1\u3002\u67e5\u770b --help \u7684\u5185\u7f6e\u5e2e\u52a9\u3002 \u8981\u6267\u884c\u8fc1\u79fb\uff0c\u9996\u5148\u4f7f\u7528 list \u5b50\u547d\u4ee4\u6765\u83b7\u53d6\u811a\u672c\u53ef\u7528\u7684\u63d2\u4ef6\u7684\u6982\u8ff0\u3002\u60a8\u5fc5\u987b\u544a\u8bc9\u811a\u672c\u5728\u54ea\u91cc\u53ef\u4ee5\u627e\u5230\u63d2\u4ef6\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u53ef\u91cd\u590d\u7684 --worker-config \u3001 --plugin-path \u548c --plugin-location \u53c2\u6570\u6765\u5b8c\u6210\u3002\u8be5\u811a\u672c\u5c06\u5ffd\u7565\u7c7b\u8def\u5f84\u4e0a\u7684\u63d2\u4ef6\uff0c\u56e0\u6b64\u60a8\u7684\u7c7b\u8def\u5f84\u4e0a\u7684\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d2\u4ef6\u90fd\u5e94\u79fb\u52a8\u5230\u63d2\u4ef6\u8def\u5f84\uff0c\u4ee5\u4fbf\u4e0e\u6b64\u8fc1\u79fb\u811a\u672c\u4e00\u8d77\u4f7f\u7528\uff0c\u6216\u624b\u52a8\u8fc1\u79fb\u3002\u8bf7\u52a1\u5fc5\u5c06 list \u8f93\u51fa\u4e0e\u5de5\u4eba\u542f\u52a8\u8b66\u544a\u6216\u9519\u8bef\u6d88\u606f\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ee5\u786e\u4fdd\u811a\u672c\u627e\u5230\u6240\u6709\u53d7\u5f71\u54cd\u7684\u63d2\u4ef6\u3002 \u4e00\u65e6\u60a8\u770b\u5230\u6240\u6709\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u90fd\u5305\u542b\u5728\u5217\u8868\u4e2d\uff0c\u60a8\u5c31\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528 sync-manifests --dry-run \u8fdb\u884c\u5e72\u8fd0\u884c\u8fc1\u79fb\u3002\u9664\u4e86\u5c06\u8fc1\u79fb\u7ed3\u679c\u5199\u5165\u78c1\u76d8\u5916\uff0c\u8fd9\u5c06\u6267\u884c\u8fc1\u79fb\u7684\u6240\u6709\u90e8\u5206\u3002\u8bf7\u6ce8\u610f\uff0c sync-manifests \u547d\u4ee4\u8981\u6c42\u6240\u6709\u6307\u5b9a\u7684\u8def\u5f84\u90fd\u662f\u53ef\u5199\u5165\u7684\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u66f4\u6539\u76ee\u5f55\u7684\u5185\u5bb9\u3002\u5728\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u5907\u4efd\u60a8\u7684\u63d2\u4ef6\uff0c\u6216\u5c06\u5b83\u4eec\u590d\u5236\u5230\u53ef\u5199\u76ee\u5f55\u3002 \u5728\u5220\u9664 --dry-run \u6807\u5fd7\u5e76\u5b9e\u9645\u8fd0\u884c\u8fc1\u79fb\u4e4b\u524d\uff0c\u786e\u4fdd\u60a8\u6709\u63d2\u4ef6\u7684\u5907\u4efd\uff0c\u5e76\u4e14\u5e72\u8fd0\u884c\u6210\u529f\u3002\u5982\u679c\u5728\u6ca1\u6709 --dry-run \u6807\u5fd7\u7684\u60c5\u51b5\u4e0b\u8fc1\u79fb\u5931\u8d25\uff0c\u90a3\u4e48\u90e8\u5206\u8fc1\u79fb\u7684\u5de5\u4ef6\u5e94\u8be5\u88ab\u4e22\u5f03\u3002\u8fc1\u79fb\u662f\u5e42\u7b49\u7684\uff0c\u56e0\u6b64\u591a\u6b21\u8fd0\u884c\u5e76\u5728\u5df2\u8fc1\u79fb\u7684\u63d2\u4ef6\u4e0a\u8fd0\u884c\u5b83\u662f\u5b89\u5168\u7684\u3002\u811a\u672c\u5b8c\u6210\u540e\uff0c\u60a8\u5e94\u8be5 \u9a8c\u8bc1\u8fc1\u79fb\u662f\u5426\u5b8c\u6210 \u3002\u8fc1\u79fb\u811a\u672c\u9002\u5408\u5728\u6301\u7eed\u96c6\u6210\u73af\u5883\u4e2d\u7528\u4e8e\u81ea\u52a8\u8fc1\u79fb\u3002 \u5f00\u53d1\u4eba\u5458\uff1a\u6e90\u8fc1\u79fb \u4e3a\u4e86\u4f7f\u63d2\u4ef6\u4e0e service_load \u517c\u5bb9\uff0c\u6709\u5fc5\u8981\u5c06 ServiceLoader \u6e05\u5355\u6dfb\u52a0\u5230\u6e90\u4ee3\u7801\u4e2d\uff0c\u7136\u540e\u5c06\u5176\u6253\u5305\u5728\u53d1\u5e03\u5de5\u4ef6\u4e2d\u3002\u6e05\u5355\u662f META-INF/services/ \u4e2d\u4ee5\u5176\u8d85\u7c7b\u7c7b\u578b\u547d\u540d\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u5e76\u5305\u542b\u4e00\u4e2a\u5b8c\u5168\u5408\u683c\u7684\u5b50\u7c7b\u540d\u79f0\u5217\u8868\uff0c\u6bcf\u884c\u4e00\u4e2a\u3002 \u4e3a\u4e86\u4f7f\u63d2\u4ef6\u517c\u5bb9\uff0c\u5b83\u5fc5\u987b\u5728\u4e0e\u5b83\u6269\u5c55\u7684\u63d2\u4ef6\u8d85\u7c7b\u76f8\u5bf9\u5e94\u7684\u6e05\u5355\u4e2d\u663e\u793a\u4e3a\u4e00\u884c\u3002\u5982\u679c\u5355\u4e2a\u63d2\u4ef6\u5b9e\u73b0\u4e86\u591a\u4e2a\u63d2\u4ef6\u63a5\u53e3\uff0c\u90a3\u4e48\u5b83\u5e94\u8be5\u51fa\u73b0\u5728\u5b83\u5b9e\u73b0\u7684\u6bcf\u4e2a\u63a5\u53e3\u7684\u6e05\u5355\u4e2d\u3002\u5982\u679c\u60a8\u6ca1\u6709\u7279\u5b9a\u7c7b\u578b\u63d2\u4ef6\u7684\u7c7b\uff0c\u5219\u65e0\u9700\u5305\u542b\u8be5\u7c7b\u578b\u7684\u6e05\u5355\u6587\u4ef6\u3002\u5982\u679c\u60a8\u7684\u7c7b\u4e0d\u5e94\u8be5\u663e\u793a\u4e3a\u63d2\u4ef6\uff0c\u5b83\u4eec\u5e94\u8be5\u88ab\u6807\u8bb0\u4e3a\u62bd\u8c61\u3002\u4ee5\u4e0b\u7c7b\u578b\u9884\u8ba1\u5c06\u6709\u6e05\u5355\uff1a org.apache.kafka.connect.sink.SinkConnector org.apache.kafka.connect.source.SourceConnector org.apache.kafka.connect.storage.Converter org.apache.kafka.connect.storage.HeaderConverter org.apache.kafka.connect.transforms.Transformation org.apache.kafka.connect.transforms.predicates.Predicate org.apache.kafka.common.config.provider.ConfigProvider org.apache.kafka.connect.rest.ConnectRestExtension org.apache.kafka.connect.connector.policy.ConnectorClientConfigOverridePolicy \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u53ea\u6709\u4e00\u4e2a\u5177\u6709\u5b8c\u5168\u5408\u683c\u540d\u79f0 com.example.MySinkConnector \u7684\u8fde\u63a5\u5668\uff0c\u90a3\u4e48\u5fc5\u987b\u5c06\u4e00\u4e2a\u6e05\u5355\u6587\u4ef6\u6dfb\u52a0\u5230 META-INF/services/org.apache.kafka.connect.sink.SinkConnector \u4e2d\u7684\u8d44\u6e90\u4e2d\uff0c\u5e76\u4e14\u5185\u5bb9\u5e94\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\uff1a # license header or comment com.example.MySinkConnector \u7136\u540e\uff0c\u60a8\u5e94\u8be5\u4f7f\u7528\u9884\u53d1\u5e03\u5de5\u4ef6\u7684 \u9a8c\u8bc1\u6b65\u9aa4 \u6765\u9a8c\u8bc1\u60a8\u7684\u6e05\u5355\u662f\u5426\u6b63\u786e\u3002\u5982\u679c\u9a8c\u8bc1\u6210\u529f\uff0c\u60a8\u53ef\u4ee5\u6b63\u5e38\u91ca\u653e\u63d2\u4ef6\uff0c\u8fd0\u8425\u5546\u53ef\u4ee5\u5347\u7ea7\u5230\u517c\u5bb9\u7248\u672c\u3002 8.3 \u8fde\u63a5\u5668\u5f00\u53d1\u6307\u5357 \u672c\u6307\u5357\u4ecb\u7ecd\u4e86\u5f00\u53d1\u4eba\u5458\u5982\u4f55\u4e3a Kafka Connect \u7f16\u5199\u65b0\u7684\u8fde\u63a5\u5668\u4ee5\u5728 Kafka \u548c\u5176\u4ed6\u7cfb\u7edf\u4e4b\u95f4\u79fb\u52a8\u6570\u636e\u3002\u5b83\u7b80\u8981\u56de\u987e\u4e86\u4e00\u4e9b\u5173\u952e\u6982\u5ff5\uff0c\u7136\u540e\u63cf\u8ff0\u4e86\u5982\u4f55\u521b\u5efa\u7b80\u5355\u7684\u8fde\u63a5\u5668\u3002 \u6838\u5fc3\u6982\u5ff5\u548c API \u8fde\u63a5\u5668\u548c\u4efb\u52a1 \u8981\u5728 Kafka \u548c\u53e6\u4e00\u4e2a\u7cfb\u7edf\u4e4b\u95f4\u590d\u5236\u6570\u636e\uff0c\u7528\u6237\u9700\u8981 Connector \u4e3a\u4ed6\u4eec\u60f3\u8981\u4ece\u4e2d\u63d0\u53d6\u6570\u636e\u6216\u5411\u5176\u4e2d\u63a8\u9001\u6570\u636e\u7684\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a Kafka \u7cfb\u7edf\u3002\u8fde\u63a5\u5668\u6709\u4e24\u79cd\u7c7b\u578b\uff1a SourceConnectors \u4ece\u53e6\u4e00\u4e2a\u7cfb\u7edf\u5bfc\u5165\u6570\u636e\uff08\u4f8b\u5982 JDBCSourceConnector \u5c06\u5173\u7cfb\u6570\u636e\u5e93\u5bfc\u5165\u5230 Kafka\uff09\u548c SinkConnectors \u5bfc\u51fa\u6570\u636e\uff08\u4f8b\u5982 HDFSSinkConnector \u5c06 Kafka \u4e3b\u9898\u7684\u5185\u5bb9\u5bfc\u51fa\u5230 HDFS \u6587\u4ef6\uff09\u3002 Connectors \u81ea\u5df1\u4e0d\u6267\u884c\u4efb\u4f55\u6570\u636e\u590d\u5236\uff1a\u5b83\u4eec\u7684\u914d\u7f6e\u63cf\u8ff0\u4e86\u8981\u590d\u5236\u7684\u6570\u636e\uff0c\u5e76\u4e14 Connector \u8d1f\u8d23\u5c06\u8be5\u4f5c\u4e1a\u5206\u89e3\u4e3a\u4e00\u7ec4 Tasks \u53ef\u4ee5\u5206\u53d1\u7ed9\u5de5\u4f5c\u4eba\u5458\u7684\u6570\u636e\u3002\u5b83\u4eec Tasks \u4e5f\u6709\u4e24\u79cd\u76f8\u5e94\u7684\u98ce\u683c\uff1a SourceTask \u548c SinkTask \u3002 \u5b8c\u6210\u4efb\u52a1\u540e\uff0c\u6bcf\u4e2a\u4eba\u90fd Task \u5fc5\u987b\u5c06\u5176\u6570\u636e\u5b50\u96c6\u590d\u5236\u5230 Kafka \u6216\u4ece Kafka \u590d\u5236\u6570\u636e\u3002\u5728 Kafka Connect \u4e2d\uff0c\u5e94\u8be5\u59cb\u7ec8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5206\u914d\u6784\u5efa\u4e3a\u4e00\u7ec4\u8f93\u5165\u548c\u8f93\u51fa\u6d41\uff0c\u5176\u4e2d\u5305\u542b\u5177\u6709\u4e00\u81f4\u6a21\u5f0f\u7684\u8bb0\u5f55\u3002\u6709\u65f6\u8fd9\u79cd\u6620\u5c04\u662f\u663e\u800c\u6613\u89c1\u7684\uff1a\u4e00\u7ec4\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a\u6587\u4ef6\u90fd\u53ef\u4ee5\u88ab\u89c6\u4e3a\u4e00\u4e2a\u6d41\uff0c\u5176\u4e2d\u6bcf\u4e2a\u89e3\u6790\u7684\u884c\u4f7f\u7528\u76f8\u540c\u7684\u6a21\u5f0f\u5f62\u6210\u4e00\u6761\u8bb0\u5f55\uff0c\u5e76\u5c06\u504f\u79fb\u91cf\u5b58\u50a8\u4e3a\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u504f\u79fb\u91cf\u3002\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u6620\u5c04\u5230\u6b64\u6a21\u578b\u53ef\u80fd\u9700\u8981\u66f4\u591a\u5de5\u4f5c\uff1aJDBC \u8fde\u63a5\u5668\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u8868\u6620\u5c04\u5230\u6d41\uff0c\u4f46\u504f\u79fb\u91cf\u4e0d\u592a\u6e05\u695a\u3002\u4e00\u79cd\u53ef\u80fd\u7684\u6620\u5c04\u4f7f\u7528\u65f6\u95f4\u6233\u5217\u6765\u751f\u6210\u589e\u91cf\u8fd4\u56de\u65b0\u6570\u636e\u7684\u67e5\u8be2\uff0c\u5e76\u4e14\u6700\u540e\u67e5\u8be2\u7684\u65f6\u95f4\u6233\u53ef\u4ee5\u7528\u4f5c\u504f\u79fb\u91cf\u3002 \u6d41\u548c\u8bb0\u5f55 \u6bcf\u4e2a\u6d41\u5e94\u8be5\u662f\u4e00\u7cfb\u5217\u952e\u503c\u8bb0\u5f55\u3002\u952e\u548c\u503c\u90fd\u53ef\u4ee5\u5177\u6709\u590d\u6742\u7684\u7ed3\u6784\u2014\u2014\u63d0\u4f9b\u4e86\u8bb8\u591a\u57fa\u672c\u7c7b\u578b\uff0c\u4f46\u4e5f\u53ef\u4ee5\u8868\u793a\u6570\u7ec4\u3001\u5bf9\u8c61\u548c\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u3002\u8fd0\u884c\u65f6\u6570\u636e\u683c\u5f0f\u4e0d\u91c7\u7528\u4efb\u4f55\u7279\u5b9a\u7684\u5e8f\u5217\u5316\u683c\u5f0f\uff1b\u8fd9\u79cd\u8f6c\u6362\u7531\u6846\u67b6\u5185\u90e8\u5904\u7406\u3002 \u9664\u4e86\u952e\u548c\u503c\u4e4b\u5916\uff0c\u8bb0\u5f55\uff08\u7531\u6e90\u751f\u6210\u7684\u8bb0\u5f55\u548c\u4f20\u9001\u5230\u63a5\u6536\u5668\u7684\u8bb0\u5f55\uff09\u8fd8\u5177\u6709\u5173\u8054\u7684\u6d41 ID \u548c\u504f\u79fb\u91cf\u3002\u6846\u67b6\u4f7f\u7528\u5b83\u4eec\u5b9a\u671f\u63d0\u4ea4\u5df2\u5904\u7406\u7684\u6570\u636e\u7684\u504f\u79fb\u91cf\uff0c\u4ee5\u4fbf\u5728\u53d1\u751f\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u4ece\u4e0a\u6b21\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u6062\u590d\u5904\u7406\uff0c\u4ece\u800c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u91cd\u65b0\u5904\u7406\u548c\u91cd\u590d\u4e8b\u4ef6\u3002 \u52a8\u6001\u8fde\u63a5\u5668 \u5e76\u975e\u6240\u6709\u4f5c\u4e1a\u90fd\u662f\u9759\u6001\u7684\uff0c\u56e0\u6b64 Connector \u5b9e\u73b0\u8fd8\u8d1f\u8d23\u76d1\u89c6\u5916\u90e8\u7cfb\u7edf\u662f\u5426\u6709\u4efb\u4f55\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u7684\u66f4\u6539\u3002\u4f8b\u5982\uff0c\u5728\u8be5 JDBCSourceConnector \u793a\u4f8b\u4e2d\uff0c Connector \u53ef\u80fd\u4f1a\u4e3a\u6bcf\u4e2a Task . \u521b\u5efa\u65b0\u8868\u65f6\uff0c\u5b83\u5fc5\u987b\u53d1\u73b0\u8fd9\u4e00\u70b9\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u901a\u8fc7\u66f4\u65b0\u5176\u914d\u7f6e\u5c06\u65b0\u8868\u5206\u914d\u7ed9\u5176\u4e2d\u4e4b\u4e00 Tasks \u3002\u5f53\u5b83\u6ce8\u610f\u5230\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u7684\u66f4\u6539\uff08\u6216 \u6570\u91cf\u7684\u66f4\u6539 Tasks \uff09\u65f6\uff0c\u5b83\u4f1a\u901a\u77e5\u6846\u67b6\uff0c\u6846\u67b6\u4f1a\u66f4\u65b0\u4efb\u4f55\u76f8\u5e94\u7684 Tasks . \u5f00\u53d1\u4e00\u4e2a\u7b80\u5355\u7684\u8fde\u63a5\u5668 \u5f00\u53d1\u8fde\u63a5\u5668\u53ea\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u63a5\u53e3\uff0c Connector \u548c Task \u3002 file \u5305\u4e2dKafka\u7684\u6e90\u4ee3\u7801\u5305\u542b\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u3002\u6b64\u8fde\u63a5\u5668\u65e8\u5728\u7528\u4e8e\u72ec\u7acb\u6a21\u5f0f\uff0c\u5e76\u5b9e\u73b0\u4e86 SourceConnector / SourceTask \u6765\u8bfb\u53d6\u6587\u4ef6\u7684\u6bcf\u4e00\u884c\u5e76\u5c06\u5176\u4f5c\u4e3a\u8bb0\u5f55\u548c\u5c06\u6bcf\u6761\u8bb0\u5f55\u5199\u5165\u6587\u4ef6\u7684 SinkConnector / SinkTask \u3002 \u672c\u8282\u7684\u5176\u4f59\u90e8\u5206\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u4ee3\u7801\uff0c\u4ee5\u6f14\u793a\u521b\u5efa\u8fde\u63a5\u5668\u7684\u5173\u952e\u6b65\u9aa4\uff0c\u4f46\u5f00\u53d1\u4eba\u5458\u8fd8\u5e94\u53c2\u8003\u5b8c\u6574\u7684\u793a\u4f8b\u6e90\u4ee3\u7801\uff0c\u56e0\u4e3a\u4e3a\u7b80\u6d01\u8d77\u89c1\u7701\u7565\u4e86\u8bb8\u591a\u7ec6\u8282\u3002 \u8fde\u63a5\u5668\u793a\u4f8b \u6211\u4eec\u5c06\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u4ecb\u7ecd SourceConnector \u3002 SinkConnector \u7684\u5b9e\u73b0\u975e\u5e38\u76f8\u4f3c\u3002\u9009\u62e9\u8f6f\u4ef6\u5305\u548c\u7c7b\u540d\uff0c\u8fd9\u4e9b\u793a\u4f8b\u5c06\u4f7f\u7528 FileStreamSourceConnector \uff0c\u4f46\u914c\u60c5\u66ff\u6362\u60a8\u81ea\u5df1\u7684\u7c7b\u540d\u3002\u4e3a\u4e86 \u4f7f\u63d2\u4ef6\u5728\u8fd0\u884c\u65f6\u53ef\u88ab\u53d1\u73b0 \uff0c\u8bf7\u5728 META-INF/services/org.apache.kafka.connect.source.SourceConnector \u4e2d\u7684\u8d44\u6e90\u4e2d\u6dfb\u52a0\u4e00\u4e2aServiceLoader\u6e05\u5355\uff0c\u5e76\u5728\u4e00\u884c\u4e2d\u6dfb\u52a0\u60a8\u5b8c\u5168\u5408\u683c\u7684\u7c7b\u540d\uff1a com.example.FileStreamSourceConnector \u521b\u5efa\u4e00\u4e2a\u7ee7\u627f SourceConnector \u7684\u7c7b\uff0c\u5e76\u6dfb\u52a0\u4e00\u4e2a\u5b57\u6bb5\uff0c\u8be5\u5b57\u6bb5\u5c06\u5b58\u50a8\u8981\u4f20\u64ad\u5230\u4efb\u52a1\u7684\u914d\u7f6e\u4fe1\u606f\uff08\u8981\u5411\u7684\u4efb\u52a1\u53d1\u9001\u6570\u636e\u7684\u4e3b\u9898\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9-\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u540d\u548c\u6700\u5927\u6279\u5904\u7406\u5927\u5c0f\uff09\uff1a package com.example; public class FileStreamSourceConnector extends SourceConnector { private Map<String, String> props; \u6700\u7b80\u5355\u7684\u586b\u5145\u65b9\u6cd5\u662f taskClass() \u5b83\u5b9a\u4e49\u4e86\u5e94\u8be5\u5728\u5de5\u4f5c\u8fdb\u7a0b\u4e2d\u5b9e\u4f8b\u5316\u4ee5\u5b9e\u9645\u8bfb\u53d6\u6570\u636e\u7684\u7c7b\uff1a @Override public Class<? extends Task> taskClass() { return FileStreamSourceTask.class; } \u6211\u4eec\u5c06\u5728\u4e0b\u9762\u5b9a\u4e49 FileStreamSourceTask \u7c7b\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6dfb\u52a0\u4e00\u4e9b\u6807\u51c6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c start() \u548c stop() @Override public void start(Map<String, String> props) { // Initialization logic and setting up of resources can take place in this method. // This connector doesn't need to do any of that, but we do log a helpful message to the user. this.props = props; AbstractConfig config = new AbstractConfig(CONFIG_DEF, props); String filename = config.getString(FILE_CONFIG); filename = (filename == null || filename.isEmpty()) ? \"standard input\" : config.getString(FILE_CONFIG); log.info(\"Starting file source connector reading from {}\", filename); } @Override public void stop() { // Nothing to do since no background monitoring is required. } \u6700\u540e\uff0c\u5b9e\u73b0\u7684\u771f\u6b63\u6838\u5fc3\u5728\u4e8e taskConfigs() \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u5904\u7406\u5355\u4e2a\u6587\u4ef6\uff0c\u56e0\u6b64\u5373\u4f7f\u6211\u4eec\u53ef\u80fd\u88ab\u5141\u8bb8\u6839\u636e maxTasks \u53c2\u6570\u751f\u6210\u66f4\u591a\u4efb\u52a1\uff0c\u6211\u4eec\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u53ea\u6709\u4e00\u4e2a\u6761\u76ee\u7684\u5217\u8868\uff1a @Override public List<Map<String, String>> taskConfigs(int maxTasks) { // Note that the task configs could contain configs additional to or different from the connector configs if needed. For instance, // if different tasks have different responsibilities, or if different tasks are meant to process different subsets of the source data stream). ArrayList<Map<String, String>> configs = new ArrayList<>(); // Only one input stream makes sense. configs.add(props); return configs; } \u5373\u4f7f\u6709\u591a\u4e2a\u4efb\u52a1\uff0c\u8fd9\u79cd\u65b9\u6cd5\u7684\u5b9e\u73b0\u901a\u5e38\u4e5f\u975e\u5e38\u7b80\u5355\u3002\u5b83\u53ea\u9700\u8981\u786e\u5b9a\u8f93\u5165\u4efb\u52a1\u7684\u6570\u91cf\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u8054\u7cfb\u5b83\u6b63\u5728\u63d0\u53d6\u6570\u636e\u7684\u8fdc\u7a0b\u670d\u52a1\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5206\u914d\u8d77\u6765\u3002\u7531\u4e8e\u4e00\u4e9b\u5728\u4efb\u52a1\u4e4b\u95f4\u62c6\u5206\u5de5\u4f5c\u7684\u6a21\u5f0f\u975e\u5e38\u5e38\u89c1\uff0c\u56e0\u6b64 ConnectorUtils \u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5b9e\u7528\u7a0b\u5e8f\u6765\u7b80\u5316\u8fd9\u4e9b\u60c5\u51b5\u3002 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u4e0d\u5305\u62ec\u52a8\u6001\u8f93\u5165\u3002\u6709\u5173\u5982\u4f55\u89e6\u53d1\u4efb\u52a1\u914d\u7f6e\u66f4\u65b0\uff0c\u8bf7\u53c2\u9605\u4e0b\u4e00\u8282\u4e2d\u7684\u8ba8\u8bba\u3002 \u4efb\u52a1\u793a\u4f8b-\u6e90\u4efb\u52a1 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u63cf\u8ff0\u76f8\u5e94 SourceTask \u7684\u5b9e\u73b0\u3002\u5b9e\u65bd\u65f6\u95f4\u5f88\u77ed\uff0c\u4f46\u592a\u957f\uff0c\u65e0\u6cd5\u5728\u672c\u6307\u5357\u4e2d\u5b8c\u5168\u6db5\u76d6\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u4f2a\u4ee3\u7801\u6765\u63cf\u8ff0\u5927\u591a\u6570\u5b9e\u73b0\uff0c\u4f46\u60a8\u53ef\u4ee5\u53c2\u8003\u6e90\u4ee3\u7801\u4ee5\u83b7\u53d6\u5b8c\u6574\u793a\u4f8b\u3002 \u4e0e\u8fde\u63a5\u5668\u4e00\u6837\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u7ee7\u627f\u9002\u5f53\u57fa\u7840 Task \u7c7b\u7684\u7c7b\u3002\u5b83\u8fd8\u6709\u4e00\u4e9b\u6807\u51c6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff1a public class FileStreamSourceTask extends SourceTask { private String filename; private InputStream stream; private String topic; private int batchSize; @Override public void start(Map<String, String> props) { filename = props.get(FileStreamSourceConnector.FILE_CONFIG); stream = openOrThrowError(filename); topic = props.get(FileStreamSourceConnector.TOPIC_CONFIG); batchSize = props.get(FileStreamSourceConnector.TASK_BATCH_SIZE_CONFIG); } @Override public synchronized void stop() { stream.close(); } \u8fd9\u4e9b\u662f\u7565\u5fae\u7b80\u5316\u7684\u7248\u672c\uff0c\u4f46\u8868\u660e\u8fd9\u4e9b\u65b9\u6cd5\u5e94\u8be5\u76f8\u5bf9\u7b80\u5355\uff0c\u5b83\u4eec\u5e94\u8be5\u6267\u884c\u7684\u552f\u4e00\u5de5\u4f5c\u662f\u5206\u914d\u6216\u91ca\u653e\u8d44\u6e90\u3002\u5173\u4e8e\u8fd9\u4e00\u5b9e\u65bd\uff0c\u6709\u4e24\u70b9\u9700\u8981\u6ce8\u610f\u3002\u9996\u5148\uff0c start() \u65b9\u6cd5\u5c1a\u672a\u5904\u7406\u4ece\u4e4b\u524d\u7684\u504f\u79fb\u91cf\u6062\u590d\uff0c\u8fd9\u5c06\u5728\u540e\u9762\u7684\u7ae0\u8282\u4e2d\u89e3\u51b3\u3002\u5176\u6b21\uff0c stop() \u65b9\u6cd5\u540c\u6b65\u3002\u8fd9\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a SourceTasks \u83b7\u5f97\u4e86\u4e00\u4e2a\u53ef\u4ee5\u65e0\u9650\u671f\u963b\u6b62\u7684\u4e13\u7528\u7ebf\u7a0b\uff0c\u56e0\u6b64\u9700\u8981\u901a\u8fc7\u6765\u81eaWorker\u4e2d\u4e0d\u540c\u7ebf\u7a0b\u7684\u8c03\u7528\u6765\u963b\u6b62\u5b83\u4eec\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4efb\u52a1\u7684\u4e3b\u8981\u529f\u80fd\uff0c\u5373 poll() \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4ece\u8f93\u5165\u7cfb\u7edf\u83b7\u53d6\u4e8b\u4ef6\u5e76\u8fd4\u56de List<SourceRecord> \uff1a @Override public List<SourceRecord> poll() throws InterruptedException { try { ArrayList<SourceRecord> records = new ArrayList<>(); while (streamValid(stream) && records.isEmpty()) { LineAndOffset line = readToNextLine(stream); if (line != null) { Map<String, Object> sourcePartition = Collections.singletonMap(\"filename\", filename); Map<String, Object> sourceOffset = Collections.singletonMap(\"position\", streamOffset); records.add(new SourceRecord(sourcePartition, sourceOffset, topic, Schema.STRING_SCHEMA, line)); if (records.size() >= batchSize) { return records; } } else { Thread.sleep(1); } } return records; } catch (IOException e) { // Underlying stream was killed, probably as a result of calling stop. Allow to return // null, and driving thread will handle any shutdown if necessary. } return null; } \u540c\u6837\uff0c\u6211\u4eec\u7701\u7565\u4e86\u4e00\u4e9b\u7ec6\u8282\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u91cd\u8981\u7684\u6b65\u9aa4\uff1a poll() \u65b9\u6cd5\u5c06\u88ab\u53cd\u590d\u8c03\u7528\uff0c\u5bf9\u4e8e\u6bcf\u6b21\u8c03\u7528\uff0c\u5b83\u5c06\u5faa\u73af\u5c1d\u8bd5\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u8bb0\u5f55\u3002\u5bf9\u4e8e\u5b83\u8bfb\u53d6\u7684\u6bcf\u4e00\u884c\uff0c\u5b83\u8fd8\u4f1a\u8ddf\u8e2a\u6587\u4ef6\u504f\u79fb\u91cf\u3002\u5b83\u4f7f\u7528\u6b64\u4fe1\u606f\u521b\u5efa\u5305\u542b\u56db\u6761\u4fe1\u606f\u7684\u8f93\u51fa SourceRecord \uff1a\u6e90\u5206\u533a\uff08\u53ea\u6709\u4e00\u4e2a\uff0c\u6b63\u5728\u8bfb\u53d6\u7684\u5355\u4e2a\u6587\u4ef6\uff09\u3001\u6e90\u504f\u79fb\u91cf\uff08\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u504f\u79fb\u91cf\uff09\u3001\u8f93\u51fa\u4e3b\u9898\u540d\u79f0\u548c\u8f93\u51fa\u503c\uff08\u8be5\u884c\uff0c\u6211\u4eec\u5305\u62ec\u4e00\u4e2a\u8868\u793a\u6b64\u503c\u59cb\u7ec8\u662f\u5b57\u7b26\u4e32\u7684\u6a21\u5f0f\uff09\u3002 SourceRecord \u6784\u9020\u51fd\u6570\u7684\u5176\u4ed6\u53d8\u4f53\u8fd8\u53ef\u4ee5\u5305\u62ec\u7279\u5b9a\u7684\u8f93\u51fa\u5206\u533a\u3001\u5bc6\u94a5\u548c\u6807\u5934\u3002 \u8bf7\u6ce8\u610f\uff0c\u6b64\u5b9e\u73b0\u4f7f\u7528\u6b63\u5e38\u7684Java InputStream \u63a5\u53e3\uff0c\u5982\u679c\u6570\u636e\u4e0d\u53ef\u7528\uff0c\u53ef\u80fd\u4f1a\u4f11\u7720\u3002\u8fd9\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\uff0c\u56e0\u4e3aKafka Connect\u4e3a\u6bcf\u4e2a\u4efb\u52a1\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e13\u7528\u7ebf\u7a0b\u3002\u867d\u7136\u4efb\u52a1\u5b9e\u73b0\u5fc5\u987b\u7b26\u5408\u57fa\u672c\u7684 poll() \u63a5\u53e3\uff0c\u4f46\u5b83\u4eec\u5728\u5b9e\u73b0\u65b9\u5f0f\u4e0a\u6709\u5f88\u5927\u7684\u7075\u6d3b\u6027\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u57fa\u4e8eNIO\u7684\u5b9e\u73b0\u4f1a\u66f4\u6709\u6548\u7387\uff0c\u4f46\u8fd9\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u6709\u6548\uff0c\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\uff0c\u5e76\u4e14\u4e0e\u65e7\u7248\u672c\u7684Java\u517c\u5bb9\u3002 \u5c3d\u7ba1\u5728\u793a\u4f8b\u4e2d\u6ca1\u6709\u4f7f\u7528\uff0c SourceTask \u4e5f\u63d0\u4f9b\u4e86\u4e24\u4e2aAPI\u6765\u63d0\u4ea4\u6e90\u7cfb\u7edf\u4e2d\u7684\u504f\u79fb\u91cf\uff1a commit \u548c commitRecord \u3002 API \u662f\u4e3a\u5177\u6709\u6d88\u606f\u786e\u8ba4\u673a\u5236\u7684\u6e90\u7cfb\u7edf\u63d0\u4f9b\u7684\u3002 \u91cd\u5199\u8fd9\u4e9b\u65b9\u6cd5\u5141\u8bb8\u6e90\u8fde\u63a5\u5668\u5728\u5c06\u6d88\u606f\u5199\u5165 Kafka \u540e\uff0c\u6279\u91cf\u6216\u5355\u72ec\u5730\u786e\u8ba4\u6e90\u7cfb\u7edf\u4e2d\u7684\u6d88\u606f\u3002 commit API \u5c06\u504f\u79fb\u91cf\u5b58\u50a8\u5728\u6e90\u7cfb\u7edf\u4e2d\uff0c\u76f4\u5230\u201cpoll\u201d\u8fd4\u56de\u7684\u504f\u79fb\u91cf\u4e3a\u6b62\u3002 \u6b64 API \u7684\u5b9e\u73b0\u5e94\u963b\u585e\uff0c\u76f4\u5230\u63d0\u4ea4\u5b8c\u6210\u3002 \u5728\u5c06\u6bcf\u4e2a SourceRecord \u5199\u5165 Kafka \u540e\uff0c commitRecord API \u4f1a\u4fdd\u5b58\u6e90\u7cfb\u7edf\u4e2d\u7684\u504f\u79fb\u91cf\u3002 \u7531\u4e8e Kafka Connect \u4f1a\u81ea\u52a8\u8bb0\u5f55\u504f\u79fb\u91cf\uff0c\u56e0\u6b64\u4e0d\u9700\u8981 SourceTask \u6765\u5b9e\u73b0\u5b83\u4eec\u3002 \u5982\u679c\u8fde\u63a5\u5668\u786e\u5b9e\u9700\u8981\u786e\u8ba4\u6e90\u7cfb\u7edf\u4e2d\u7684\u6d88\u606f\uff0c\u901a\u5e38\u53ea\u9700\u8981\u5176\u4e2d\u4e00\u4e2a API\u3002 Sink Tasks \u4e0a\u4e00\u8282\u63cf\u8ff0\u4e86\u5982\u4f55\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684 SourceTask \u3002\u4e0e SourceConnector \u548c SinkConnector \uff0c SourceTask \u548c SinkTask \u5177\u6709\u975e\u5e38\u4e0d\u540c\u7684\u63a5\u53e3\uff0c\u56e0\u4e3a SourceTask \u4f7f\u7528\u62c9\u53d6\u63a5\u53e3\uff0c\u800c SinkTask \u4f7f\u7528\u63a8\u9001\u63a5\u53e3\u3002\u4e24\u8005\u90fd\u6709\u5171\u540c\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u4f46 SinkTask \u754c\u9762\u622a\u7136\u4e0d\u540c\uff1a public abstract class SinkTask implements Task { public void initialize(SinkTaskContext context) { this.context = context; } public abstract void put(Collection<SinkRecord> records); public void flush(Map<TopicPartition, OffsetAndMetadata> currentOffsets) { } SinkTask \u6587\u6863\u5305\u542b\u5b8c\u6574\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f46\u8fd9\u4e2a\u754c\u9762\u51e0\u4e4e\u548c SourceTask \u4e00\u6837\u7b80\u5355\u3002Theput put() \u65b9\u6cd5\u5e94\u5305\u542b\u5927\u90e8\u5206\u5b9e\u73b0\uff0c\u63a5\u53d7 SinkRecords \u96c6\uff0c\u6267\u884c\u4efb\u4f55\u6240\u9700\u7684\u7ffb\u8bd1\uff0c\u5e76\u5c06\u5176\u5b58\u50a8\u5728\u76ee\u6807\u7cfb\u7edf\u4e2d\u3002\u6b64\u65b9\u6cd5\u4e0d\u9700\u8981\u786e\u4fdd\u6570\u636e\u5728\u8fd4\u56de\u4e4b\u524d\u5df2\u5b8c\u5168\u5199\u5165\u76ee\u6807\u7cfb\u7edf\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5185\u90e8\u7f13\u51b2\u5c06\u662f\u6709\u7528\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u4e00\u6b21\u53d1\u9001\u6574\u6279\u8bb0\u5f55\uff0c\u4ece\u800c\u51cf\u5c11\u5c06\u4e8b\u4ef6\u63d2\u5165\u4e0b\u6e38\u6570\u636e\u5b58\u50a8\u7684\u5f00\u9500\u3002 SinkRecords \u5305\u542b\u4e0e SourceRecords \u57fa\u672c\u76f8\u540c\u7684\u4fe1\u606f\uff1aKafka\u4e3b\u9898\u3001\u5206\u533a\u3001\u504f\u79fb\u91cf\u3001\u4e8b\u4ef6\u952e\u548c\u503c\u4ee5\u53ca\u53ef\u9009\u6807\u5934\u3002 flush() \u65b9\u6cd5\u5728\u504f\u79fb\u63d0\u4ea4\u8fc7\u7a0b\u4e2d\u4f7f\u7528\uff0c\u5b83\u5141\u8bb8\u4efb\u52a1\u4ece\u6545\u969c\u4e2d\u6062\u590d\u5e76\u4ece\u5b89\u5168\u70b9\u6062\u590d\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u9519\u8fc7\u4efb\u4f55\u4e8b\u4ef6\u3002\u8be5\u65b9\u6cd5\u5e94\u5c06\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u6570\u636e\u63a8\u9001\u5230\u76ee\u6807\u7cfb\u7edf\uff0c\u7136\u540e\u963b\u6b62\uff0c\u76f4\u5230\u5199\u5165\u5f97\u5230\u786e\u8ba4\u3002 offsets \u53c2\u6570\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5f53\u5b9e\u73b0\u5e0c\u671b\u5c06\u504f\u79fb\u4fe1\u606f\u5b58\u50a8\u5728\u76ee\u6807\u5b58\u50a8\u4e2d\u4ee5\u63d0\u4f9b\u7cbe\u786e\u4e00\u6b21\u4ea4\u4ed8\u65f6\u975e\u5e38\u6709\u7528\u3002\u4f8b\u5982\uff0cHDFS\u8fde\u63a5\u5668\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u5e76\u4f7f\u7528\u539f\u5b50\u79fb\u52a8\u64cd\u4f5c\u6765\u786e\u4fddflush flush() \u64cd\u4f5c\u539f\u5b50\u5730\u63d0\u4ea4\u6570\u636e\u5e76\u504f\u79fb\u5230HDFS\u4e2d\u7684\u6700\u7ec8\u4f4d\u7f6e\u3002 Errant Record Reporter \u5f53\u4e3a\u8fde\u63a5\u5668\u542f\u7528 \u9519\u8bef\u62a5\u544a \u65f6\uff0c\u8fde\u63a5\u5668\u53ef\u4ee5\u4f7f\u7528 ErrantRecordReporter \u62a5\u544a\u53d1\u9001\u5230\u6c34\u69fd\u8fde\u63a5\u5668\u7684\u5355\u4e2a\u8bb0\u5f55\u7684\u95ee\u9898\u3002\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u8fde\u63a5\u5668\u7684 SinkTask \u5b50\u7c7b\u5982\u4f55\u83b7\u53d6\u548c\u4f7f\u7528 ErrantRecordReporter \uff0c\u5728DLQ\u672a\u542f\u7528\u6216\u8fde\u63a5\u5668\u5b89\u88c5\u5728\u6ca1\u6709\u6b64\u62a5\u544a\u5668\u529f\u80fd\u7684\u65e7Connect\u8fd0\u884c\u65f6\u5b89\u5168\u5730\u5904\u7406\u7a7a\u62a5\u544a\u5668\uff1a private ErrantRecordReporter reporter; @Override public void start(Map<String, String> props) { ... try { reporter = context.errantRecordReporter(); // may be null if DLQ not enabled } catch (NoSuchMethodException | NoClassDefFoundError e) { // Will occur in Connect runtimes earlier than 2.6 reporter = null; } } @Override public void put(Collection<SinkRecord> records) { for (SinkRecord record: records) { try { // attempt to process and send record to data sink process(record); } catch(Exception e) { if (reporter != null) { // Send errant record to error reporter reporter.report(record, e); } else { // There's no error reporter, so fail throw new ConnectException(\"Failed on record\", e); } } } } Resuming from Previous Offsets SourceTask \u5b9e\u73b0\u5305\u62ec\u6bcf\u6761\u8bb0\u5f55\u7684\u6d41ID\uff08\u8f93\u5165\u6587\u4ef6\u540d\uff09\u548c\u504f\u79fb\u91cf\uff08\u6587\u4ef6\u4e2d\u7684\u4f4d\u7f6e\uff09\u3002\u8be5\u6846\u67b6\u4f7f\u7528\u5b83\u5b9a\u671f\u63d0\u4ea4\u504f\u79fb\uff0c\u4ee5\u4fbf\u5728\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\uff0c\u4efb\u52a1\u53ef\u4ee5\u6062\u590d\u548c\u6700\u5c0f\u5316\u91cd\u65b0\u5904\u7406\u548c\u53ef\u80fd\u91cd\u590d\u7684\u4e8b\u4ef6\u6570\u91cf\uff08\u6216\u8005\u5982\u679cKafka Connect\u88ab\u4f18\u96c5\u5730\u505c\u6b62\uff0c\u4f8b\u5982\u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\u6216\u7531\u4e8e\u4f5c\u4e1a\u91cd\u65b0\u914d\u7f6e\uff0c\u5219\u4ece\u6700\u8fd1\u7684\u504f\u79fb\u91cf\u6062\u590d\uff09\u3002\u8fd9\u4e2a\u63d0\u4ea4\u8fc7\u7a0b\u5b8c\u5168\u7531\u6846\u67b6\u81ea\u52a8\u5316\uff0c\u4f46\u53ea\u6709\u8fde\u63a5\u5668\u77e5\u9053\u5982\u4f55\u5bfb\u6c42\u56de\u5230\u8f93\u5165\u6d41\u4e2d\u7684\u6b63\u786e\u4f4d\u7f6e\uff0c\u4ece\u8be5\u4f4d\u7f6e\u6062\u590d\u3002 \u8981\u5728\u542f\u52a8\u65f6\u6b63\u786e\u6062\u590d\uff0c\u4efb\u52a1\u53ef\u4ee5\u4f7f\u7528\u4f20\u9012\u5230\u5176 initialize() \u65b9\u6cd5\u4e2d\u7684 SourceContext \u6765\u8bbf\u95ee\u504f\u79fb\u6570\u636e\u3002\u5728 initialize() \u6211\u4eec\u5c06\u6dfb\u52a0\u66f4\u591a\u4ee3\u7801\u6765\u8bfb\u53d6\u504f\u79fb\u91cf\uff08\u5982\u679c\u5b58\u5728\uff09\uff0c\u5e76\u5bfb\u6c42\u8be5\u4f4d\u7f6e\uff1a stream = new FileInputStream(filename); Map<String, Object> offset = context.offsetStorageReader().offset(Collections.singletonMap(FILENAME_FIELD, filename)); if (offset != null) { Long lastRecordedOffset = (Long) offset.get(\"position\"); if (lastRecordedOffset != null) seekToOffset(stream, lastRecordedOffset); } \u5f53\u7136\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u8bfb\u53d6\u6bcf\u4e2a\u8f93\u5165\u6d41\u7684\u8bb8\u591a\u952e\u3002 OffsetStorageReader \u63a5\u53e3\u8fd8\u5141\u8bb8\u60a8\u53d1\u5e03\u6279\u91cf\u8bfb\u53d6\u4ee5\u9ad8\u6548\u52a0\u8f7d\u6240\u6709\u504f\u79fb\u91cf\uff0c\u7136\u540e\u901a\u8fc7\u67e5\u627e\u6bcf\u4e2a\u8f93\u5165\u6d41\u5230\u9002\u5f53\u7684\u4f4d\u7f6e\u6765\u5e94\u7528\u5b83\u4eec\u3002 Exactly-once source connectors Supporting exactly-once \u968f\u7740 KIP-618 \u7684\u901a\u8fc7\uff0cKafka Connect\u4ece3.3.0\u7248\u672c\u5f00\u59cb\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u7684\u6e90\u8fde\u63a5\u5668\u3002\u4e3a\u4e86\u4f7f\u6e90\u8fde\u63a5\u5668\u5229\u7528\u8fd9\u79cd\u652f\u6301\uff0c\u5b83\u5fc5\u987b\u80fd\u591f\u4e3a\u5176\u53d1\u51fa\u7684\u6bcf\u6761\u8bb0\u5f55\u63d0\u4f9b\u6709\u610f\u4e49\u7684\u6e90\u504f\u79fb\u91cf\uff0c\u5e76\u5728\u4e0e\u4efb\u4f55\u8fd9\u4e9b\u504f\u79fb\u91cf\u76f8\u5bf9\u5e94\u7684\u786e\u5207\u4f4d\u7f6e\u6062\u590d\u5916\u90e8\u7cfb\u7edf\u7684\u6d88\u8017\uff0c\u800c\u4e0d\u4f1a\u4e22\u5f03\u6216\u590d\u5236\u6d88\u606f\u3002 Defining transaction boundaries \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka Connect\u6846\u67b6\u5c06\u4e3a\u6e90\u4efb\u52a1\u4ece\u5176 poll \u65b9\u6cd5\u8fd4\u56de\u7684\u6bcf\u6279\u8bb0\u5f55\u521b\u5efa\u5e76\u63d0\u4ea4\u65b0\u7684Kafka\u4e8b\u52a1\u3002\u7136\u800c\uff0c\u8fde\u63a5\u5668\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5728\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u4e2d\u5c06 transaction.boundary \u5c5e\u6027\u8bbe\u7f6e\u4e3a connector \u6765\u542f\u7528\u8be5\u8fb9\u754c\u3002 \u5982\u679c\u542f\u7528\uff0c\u8fde\u63a5\u5668\u7684\u4efb\u52a1\u5c06\u4ece\u5176 SourceTaskContext \u8bbf\u95ee TransactionContext \uff0c\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5Context\u6765\u63a7\u5236\u4e8b\u52a1\u4f55\u65f6\u4e2d\u6b62\u548c\u63d0\u4ea4\u3002 \u4f8b\u5982\uff0c\u81f3\u5c11\u6bcf\u5341\u6761\u8bb0\u5f55\u63d0\u4ea4\u4e00\u7b14\u4ea4\u6613\uff1a private int recordsSent; @Override public void start(Map<String, String> props) { this.recordsSent = 0; } @Override public List<SourceRecord> poll() { List<SourceRecord> records = fetchRecords(); boolean shouldCommit = false; for (SourceRecord record : records) { if (++this.recordsSent >= 10) { shouldCommit = true; } } if (shouldCommit) { this.recordsSent = 0; this.context.transactionContext().commitTransaction(); } return records; } \u6216\u8005\u6bcf\u5341\u6761\u8bb0\u5f55\u63d0\u4ea4\u4e00\u7b14\u4ea4\u6613\uff1a private int recordsSent; @Override public void start(Map<String, String> props) { this.recordsSent = 0; } @Override public List<SourceRecord> poll() { List<SourceRecord> records = fetchRecords(); for (SourceRecord record : records) { if (++this.recordsSent % 10 == 0) { this.context.transactionContext().commitTransaction(record); } } return records; } \u5927\u591a\u6570\u8fde\u63a5\u5668\u4e0d\u9700\u8981\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\u3002\u7136\u800c\uff0c\u5982\u679c\u6e90\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u6216\u5bf9\u8c61\u88ab\u5206\u89e3\u4e3a\u591a\u4e2a\u6e90\u8bb0\u5f55\uff0c\u4f46\u5e94\u8be5\u4ee5\u539f\u5b50\u65b9\u5f0f\u4ea4\u4ed8\uff0c\u8fd9\u53ef\u80fd\u662f\u6709\u7528\u7684\u3002\u6b64\u5916\uff0c\u5982\u679c\u6bcf\u4e2a\u5177\u6709\u7ed9\u5b9a\u504f\u79fb\u91cf\u7684\u6bcf\u4e2a\u8bb0\u5f55\u90fd\u5728\u5355\u4e2a\u4e8b\u52a1\u4e2d\u4ea4\u4ed8\uff0c\u5982\u679c\u4e0d\u53ef\u80fd\u7ed9\u6bcf\u4e2a\u6e90\u8bb0\u5f55\u4e00\u4e2a\u552f\u4e00\u7684\u6e90\u504f\u79fb\u91cf\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f88\u6709\u7528\u3002 \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u7528\u6237\u6ca1\u6709\u5728\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u542f\u7528\u8fde\u63a5\u5668\u5b9a\u4e49\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u5219\u7531 context.transactionContext() \u8fd4\u56de\u7684 TransactionContext \u5c06\u4e3a null \u3002 \u9a8c\u8bc1API \u6e90\u8fde\u63a5\u5668\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e9b\u989d\u5916\u7684\u98de\u884c\u524d\u9a8c\u8bc1API\u3002 \u67d0\u4e9b\u7528\u6237\u53ef\u80fd\u9700\u8981\u6765\u81ea\u8fde\u63a5\u5668\u7684\u4e00\u6b21\u6027\u8bed\u4e49\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5728\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u4e2d\u5c06 exactly.once.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a required \u3002 \u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u65f6\uff0cKafka Connect \u6846\u67b6\u5c06\u8be2\u95ee\u8fde\u63a5\u5668\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002 \u8fd9\u662f\u901a\u8fc7\u8c03\u7528\u8fde\u63a5\u5668\u4e0a\u7684 exactlyOnceSupport \u65b9\u6cd5\u6765\u5b8c\u6210\u7684\u3002 \u5982\u679c\u8fde\u63a5\u5668\u4e0d\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u7684\u8bed\u4e49\uff0c\u5b83\u4ecd\u7136\u5e94\u8be5\u5b9e\u73b0\u6b64\u65b9\u6cd5\uff0c\u8ba9\u7528\u6237\u786e\u4fe1\u5b83\u65e0\u6cd5\u63d0\u4f9b\u7cbe\u786e\u4e00\u6b21\u7684\u8bed\u4e49\uff1a @Override public ExactlyOnceSupport exactlyOnceSupport(Map<String, String> props) { // This connector cannot provide exactly-once semantics under any conditions return ExactlyOnceSupport.UNSUPPORTED; } \u5426\u5219\uff0c\u8fde\u63a5\u5668\u5e94\u68c0\u67e5\u914d\u7f6e\uff0c\u5e76\u8fd4\u56de ExactlyOnceSupport.SUPPORTED \uff0c\u5982\u679c\u5b83\u53ef\u4ee5\u63d0\u4f9b\u7cbe\u786e\u4e00\u6b21\u7684\u8bed\u4e49\uff1a @Override public ExactlyOnceSupport exactlyOnceSupport(Map<String, String> props) { // This connector can always provide exactly-once semantics return ExactlyOnceSupport.SUPPORTED; } \u6b64\u5916\uff0c\u5982\u679c\u7528\u6237\u5df2\u5c06\u8fde\u63a5\u5668\u914d\u7f6e\u4e3a\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0cKafka Connect\u6846\u67b6\u5c06\u8be2\u95ee\u8fde\u63a5\u5668\u662f\u5426\u53ef\u4ee5\u4f7f\u7528 canDefineTransactionBoundaries \u65b9\u6cd5\u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff1a @Override public ConnectorTransactionBoundaries canDefineTransactionBoundaries(Map<String, String> props) { // This connector can always define its own transaction boundaries return ConnectorTransactionBoundaries.SUPPORTED; } \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ea\u80fd\u9488\u5bf9\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\u7684\u8fde\u63a5\u5668\u5b9e\u65bd\u3002\u5982\u679c\u8fde\u63a5\u5668\u6c38\u8fdc\u65e0\u6cd5\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u5b83\u5c31\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u79cd\u65b9\u6cd5\u3002 \u52a8\u6001 Input/Output Streams Kafka Connect\u65e8\u5728\u5b9a\u4e49\u6279\u91cf\u6570\u636e\u590d\u5236\u4f5c\u4e1a\uff0c\u4f8b\u5982\u590d\u5236\u6574\u4e2a\u6570\u636e\u5e93\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u8bb8\u591a\u4f5c\u4e1a\u6765\u5355\u72ec\u590d\u5236\u6bcf\u4e2a\u8868\u3002\u8fd9\u79cd\u8bbe\u8ba1\u7684\u4e00\u4e2a\u540e\u679c\u662f\uff0c\u8fde\u63a5\u5668\u7684\u8f93\u5165\u6216\u8f93\u51fa\u6d41\u96c6\u53ef\u80fd\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u53d8\u5316\u3002 \u6e90\u8fde\u63a5\u5668\u9700\u8981\u76d1\u63a7\u6e90\u7cfb\u7edf\u7684\u53d8\u5316\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u4e2d\u7684\u8868\u6dfb\u52a0/\u5220\u9664\u3002\u5f53\u4ed6\u4eec\u63a5\u6536\u66f4\u6539\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u901a\u8fc7ConnectorContext\u5bf9\u8c61\u901a\u77e5\u6846\u67b6\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u5728 SourceConnector \uff1a if (inputsChanged()) this.context.requestTaskReconfiguration(); \u8be5\u6846\u67b6\u5c06\u53ca\u65f6\u8bf7\u6c42\u65b0\u7684\u914d\u7f6e\u4fe1\u606f\u5e76\u66f4\u65b0\u4efb\u52a1\uff0c\u5141\u8bb8\u4ed6\u4eec\u5728\u91cd\u65b0\u914d\u7f6e\u4e4b\u524d\u4f18\u96c5\u5730\u63d0\u4ea4\u8fdb\u5ea6\u3002\u8bf7\u6ce8\u610f\uff0c\u5728 SourceConnector \uff0c\u6b64\u76d1\u63a7\u76ee\u524d\u7531\u8fde\u63a5\u5668\u5b9e\u73b0\u3002\u5982\u679c\u9700\u8981\u989d\u5916\u7684\u7ebf\u7a0b\u6765\u6267\u884c\u6b64\u76d1\u63a7\uff0c\u8fde\u63a5\u5668\u5fc5\u987b\u81ea\u884c\u5206\u914d\u5b83\u3002 \u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u7528\u4e8e\u76d1\u63a7\u66f4\u6539\u7684\u4ee3\u7801\u5c06\u9694\u79bb\u5728 Connector \u4e0a\uff0c\u4efb\u52a1\u65e0\u9700\u62c5\u5fc3\u5b83\u4eec\u3002\u7136\u800c\uff0c\u66f4\u6539\u4e5f\u4f1a\u5f71\u54cd\u4efb\u52a1\uff0c\u6700\u5e38\u89c1\u7684\u662f\u5f53\u5176\u4e2d\u4e00\u4e2a\u8f93\u5165\u6d41\u5728\u8f93\u5165\u7cfb\u7edf\u4e2d\u88ab\u9500\u6bc1\u65f6\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u8868\u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u3002\u5982\u679c Task \u5728 Connector \u4e4b\u524d\u9047\u5230\u95ee\u9898\uff0c\u5982\u679c Connector \u9700\u8981\u8f6e\u8be2\u66f4\u6539\uff0c\u8fd9\u5c06\u5f88\u5e38\u89c1\uff0c\u5219 Task \u5c06\u9700\u8981\u5904\u7406\u540e\u7eed\u9519\u8bef\u3002\u8c22\u5929\u8c22\u5730\uff0c\u8fd9\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u6355\u83b7\u548c\u5904\u7406\u9002\u5f53\u7684\u5f02\u5e38\u6765\u5904\u7406\u3002 SinkConnectors \u901a\u5e38\u53ea\u9700\u8981\u5904\u7406\u6d41\u7684\u6dfb\u52a0\uff0c\u8fd9\u4e9b\u6d41\u53ef\u80fd\u4f1a\u8f6c\u6362\u4e3a\u8f93\u51fa\u4e2d\u7684\u65b0\u6761\u76ee\uff08\u4f8b\u5982\uff0c\u65b0\u7684\u6570\u636e\u5e93\u8868\uff09\u3002\u8be5\u6846\u67b6\u7ba1\u7406\u5bf9Kafka\u8f93\u5165\u7684\u4efb\u4f55\u66f4\u6539\uff0c\u4f8b\u5982\u5f53\u8f93\u5165\u4e3b\u9898\u96c6\u56e0\u6b63\u5219\u8868\u8fbe\u5f0f\u8ba2\u9605\u800c\u53d1\u751f\u53d8\u5316\u65f6\u3002 SinkTasks \u5e94\u8be5\u671f\u5f85\u65b0\u7684\u8f93\u5165\u6d41\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u5728\u4e0b\u6e38\u7cfb\u7edf\u4e2d\u521b\u5efa\u65b0\u8d44\u6e90\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u4e2d\u7684\u65b0\u8868\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6700\u68d8\u624b\u7684\u60c5\u51b5\u53ef\u80fd\u662f\u591a\u4e2a SinkTasks \u9996\u6b21\u770b\u5230\u65b0\u7684\u8f93\u5165\u6d41\uff0c\u540c\u65f6\u5c1d\u8bd5\u521b\u5efa\u65b0\u8d44\u6e90\u4e4b\u95f4\u7684\u51b2\u7a81\u3002\u53e6\u4e00\u65b9\u9762\uff0c SinkConnectors \u901a\u5e38\u4e0d\u9700\u8981\u7279\u6b8a\u4ee3\u7801\u6765\u5904\u7406\u4e00\u7ec4\u52a8\u6001\u6d41\u3002 \u914d\u7f6e\u9a8c\u8bc1 Kafka Connect\u5141\u8bb8\u60a8\u5728\u63d0\u4ea4\u8981\u6267\u884c\u7684\u8fde\u63a5\u5668\u4e4b\u524d\u9a8c\u8bc1\u8fde\u63a5\u5668\u914d\u7f6e\uff0c\u5e76\u53ef\u4ee5\u63d0\u4f9b\u6709\u5173\u9519\u8bef\u548c\u63a8\u8350\u503c\u7684\u53cd\u9988\u3002\u4e3a\u4e86\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u8fde\u63a5\u5668\u5f00\u53d1\u4eba\u5458\u9700\u8981\u63d0\u4f9b config() \u7684\u5b9e\u73b0\uff0c\u4ee5\u5c06\u914d\u7f6e\u5b9a\u4e49\u516c\u5f00\u7ed9\u6846\u67b6\u3002 FileStreamSourceConnector \u4e2d\u7684\u4ee5\u4e0b\u4ee3\u7801\u5b9a\u4e49\u4e86\u914d\u7f6e\u5e76\u5c06\u5176\u516c\u5f00\u7ed9\u6846\u67b6\u3002 static final ConfigDef CONFIG_DEF = new ConfigDef() .define(FILE_CONFIG, Type.STRING, null, Importance.HIGH, \"Source filename. If not specified, the standard input will be used\") .define(TOPIC_CONFIG, Type.STRING, ConfigDef.NO_DEFAULT_VALUE, new ConfigDef.NonEmptyString(), Importance.HIGH, \"The topic to publish data to\") .define(TASK_BATCH_SIZE_CONFIG, Type.INT, DEFAULT_TASK_BATCH_SIZE, Importance.LOW, \"The maximum number of records the source task can read from the file each time it is polled\"); public ConfigDef config() { return CONFIG_DEF; } ConfigDef \u7c7b\u7528\u4e8e\u6307\u5b9a\u9884\u671f\u914d\u7f6e\u96c6\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u540d\u79f0\u3001\u7c7b\u578b\u3001\u9ed8\u8ba4\u503c\u3001\u6587\u6863\u3001\u7ec4\u4fe1\u606f\u3001\u7ec4\u4e2d\u7684\u987a\u5e8f\u3001\u914d\u7f6e\u503c\u7684\u5bbd\u5ea6\u4ee5\u53ca\u9002\u5408\u5728UI\u4e2d\u663e\u793a\u7684\u540d\u79f0\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8986\u76d6 Validator \u7c7b\u6765\u63d0\u4f9b\u7528\u4e8e\u5355\u4e2a\u914d\u7f6e\u9a8c\u8bc1\u7684\u7279\u6b8a\u9a8c\u8bc1\u903b\u8f91\u3002\u6b64\u5916\uff0c\u7531\u4e8e\u914d\u7f6e\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u4f9d\u8d56\u6027\uff0c\u4f8b\u5982\uff0c\u914d\u7f6e\u7684\u6709\u6548\u503c\u548c\u53ef\u89c1\u6027\u53ef\u80fd\u4f1a\u6839\u636e\u5176\u4ed6\u914d\u7f6e\u7684\u503c\u800c\u53d8\u5316\u3002\u4e3a\u4e86\u5904\u7406\u8fd9\u4e00\u70b9\uff0c ConfigDef \u5141\u8bb8\u60a8\u6307\u5b9a\u914d\u7f6e\u7684\u4f9d\u8d56\u9879\uff0c\u5e76\u63d0\u4f9b Recommender \u5b9e\u73b0\uff0c\u4ee5\u83b7\u5f97\u6709\u6548\u503c\u5e76\u8bbe\u7f6e\u7ed9\u5b9a\u5f53\u524d\u914d\u7f6e\u503c\u7684\u53ef\u89c1\u6027\u3002 \u6b64\u5916\uff0c Connector \u4e2d\u7684 validate() \u65b9\u6cd5\u63d0\u4f9b\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u9a8c\u8bc1\u5b9e\u73b0\uff0c\u8be5\u5b9e\u73b0\u8fd4\u56de\u5141\u8bb8\u7684\u914d\u7f6e\u5217\u8868\u4ee5\u53ca\u6bcf\u4e2a\u914d\u7f6e\u7684\u914d\u7f6e\u9519\u8bef\u548c\u63a8\u8350\u503c\u3002\u7136\u800c\uff0c\u5b83\u4e0d\u4f7f\u7528\u63a8\u8350\u7684\u503c\u8fdb\u884c\u914d\u7f6e\u9a8c\u8bc1\u3002\u60a8\u53ef\u4ee5\u4e3a\u81ea\u5b9a\u4e49\u914d\u7f6e\u9a8c\u8bc1\u63d0\u4f9b\u9ed8\u8ba4\u5b9e\u73b0\u7684\u8986\u76d6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u4f7f\u7528\u63a8\u8350\u7684\u503c\u3002 \u4f7f\u7528Schemas FileStream\u8fde\u63a5\u5668\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\uff0c\u56e0\u4e3a\u5b83\u4eec\u5f88\u7b80\u5355\uff0c\u4f46\u5b83\u4eec\u4e5f\u6709\u7410\u788e\u7684\u7ed3\u6784\u5316\u6570\u636e\u2014\u2014\u6bcf\u884c\u90fd\u53ea\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002\u51e0\u4e4e\u6240\u6709\u5b9e\u7528\u8fde\u63a5\u5668\u90fd\u9700\u8981\u5177\u6709\u66f4\u590d\u6742\u6570\u636e\u683c\u5f0f\u7684\u6a21\u5f0f\u3002 \u8981\u521b\u5efa\u66f4\u590d\u6742\u7684\u6570\u636e\uff0c\u60a8\u9700\u8981\u4f7f\u7528Kafka Connect data API\u3002\u9664\u4e86\u539f\u59cb\u7c7b\u578b\u5916\uff0c\u5927\u591a\u6570\u7ed3\u6784\u5316\u8bb0\u5f55\u8fd8\u9700\u8981\u4e0e\u4e24\u4e2a\u7c7b\u4ea4\u4e92\uff1a Schema \u548c Struct \u3002 API\u6587\u6863\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u53c2\u8003\uff0c\u4f46\u4ee5\u4e0b\u662f\u521b\u5efa Schema \u548c Struct \u7684\u7b80\u5355\u793a\u4f8b\uff1a Schema schema = SchemaBuilder.struct().name(NAME) .field(\"name\", Schema.STRING_SCHEMA) .field(\"age\", Schema.INT_SCHEMA) .field(\"admin\", SchemaBuilder.bool().defaultValue(false).build()) .build(); Struct struct = new Struct(schema) .put(\"name\", \"Barbara Liskov\") .put(\"age\", 75); \u5982\u679c\u60a8\u6b63\u5728\u5b9e\u73b0\u6e90\u8fde\u63a5\u5668\uff0c\u60a8\u9700\u8981\u51b3\u5b9a\u4f55\u65f6\u4ee5\u53ca\u5982\u4f55\u521b\u5efa\u6a21\u5f0f\u3002\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e94\u8be5\u5c3d\u53ef\u80fd\u907f\u514d\u91cd\u65b0\u8ba1\u7b97\u5b83\u4eec\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u7684\u8fde\u63a5\u5668\u4fdd\u8bc1\u5177\u6709\u56fa\u5b9a\u7684\u6a21\u5f0f\uff0c\u8bf7\u9759\u6001\u521b\u5efa\u5b83\u5e76\u91cd\u7528\u5355\u4e2a\u5b9e\u4f8b\u3002 \u7136\u800c\uff0c\u8bb8\u591a\u8fde\u63a5\u5668\u5c06\u5177\u6709\u52a8\u6001\u6a21\u5f0f\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u662f\u6570\u636e\u5e93\u8fde\u63a5\u5668\u3002\u5373\u4f7f\u53ea\u8003\u8651\u5355\u4e2a\u8868\uff0c\u4e5f\u4e0d\u4f1a\u4e3a\u6574\u4e2a\u8fde\u63a5\u5668\u9884\u5b9a\u4e49\u6a21\u5f0f\uff08\u56e0\u4e3a\u5b83\u56e0\u8868\u800c\u5f02\uff09\u3002\u4f46\u5728\u8fde\u63a5\u5668\u7684\u751f\u547d\u5468\u671f\u5185\uff0c\u5b83\u4e5f\u53ef\u80fd\u4e0d\u4f1a\u4e3a\u5355\u4e2a\u8868\u56fa\u5b9a\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u4ee5\u6267\u884c ALTER TABLE \u547d\u4ee4\u3002\u8fde\u63a5\u5668\u5fc5\u987b\u80fd\u591f\u68c0\u6d4b\u8fd9\u4e9b\u53d8\u5316\u5e76\u505a\u51fa\u9002\u5f53\u7684\u53cd\u5e94\u3002 \u6c34\u69fd\u8fde\u63a5\u5668\u901a\u5e38\u66f4\u7b80\u5355\uff0c\u56e0\u4e3a\u5b83\u4eec\u6b63\u5728\u6d88\u8017\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u521b\u5efa\u6a21\u5f0f\u3002\u7136\u800c\uff0c\u4ed6\u4eec\u5e94\u8be5\u540c\u6837\u5c0f\u5fc3\u5730\u9a8c\u8bc1\u4ed6\u4eec\u6536\u5230\u7684\u6a21\u5f0f\u662f\u5426\u5177\u6709\u9884\u671f\u7684\u683c\u5f0f\u3002\u5f53\u6a21\u5f0f\u4e0d\u5339\u914d\u65f6\u2014\u2014\u901a\u5e38\u8868\u793a\u4e0a\u6e38\u751f\u4ea7\u8005\u6b63\u5728\u751f\u6210\u65e0\u6cd5\u6b63\u786e\u8f6c\u6362\u4e3a\u76ee\u6807\u7cfb\u7edf\u7684\u65e0\u6548\u6570\u636e\u2014\u2014\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5e94\u629b\u51fa\u5f02\u5e38\u4ee5\u5411\u7cfb\u7edf\u6307\u793a\u6b64\u9519\u8bef\u3002 8.4 \u7ba1\u7406 Kafka Connect\u7684 REST\u5c42 \u63d0\u4f9b\u4e86\u4e00\u7ec4API\u6765\u7ba1\u7406\u96c6\u7fa4\u3002\u8fd9\u5305\u62ec\u67e5\u770b\u8fde\u63a5\u5668\u914d\u7f6e\u53ca\u5176\u4efb\u52a1\u72b6\u6001\u4ee5\u53ca\u66f4\u6539\u5176\u5f53\u524d\u884c\u4e3a\uff08\u4f8b\u5982\u66f4\u6539\u914d\u7f6e\u548c\u91cd\u65b0\u542f\u52a8\u4efb\u52a1\uff09\u7684API\u3002 \u5f53\u8fde\u63a5\u5668\u9996\u6b21\u63d0\u4ea4\u7ed9\u96c6\u7fa4\u65f6\uff0cConnect\u5de5\u4eba\u4e4b\u95f4\u4f1a\u89e6\u53d1\u91cd\u65b0\u5e73\u8861\uff0c\u4ee5\u5206\u914d\u7531\u65b0\u8fde\u63a5\u5668\u4efb\u52a1\u7ec4\u6210\u7684\u8d1f\u8f7d\u3002\u5f53\u8fde\u63a5\u5668\u589e\u52a0\u6216\u51cf\u5c11\u6240\u9700\u7684\u4efb\u52a1\u6570\u91cf\uff0c\u5f53\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u6216\u8005\u5f53\u4f5c\u4e3aConnect\u96c6\u7fa4\u7684\u6545\u610f\u5347\u7ea7\u7684\u4e00\u90e8\u5206\u6216\u7531\u4e8e\u6545\u969c\u800c\u6dfb\u52a0\u6216\u5220\u9664\u5de5\u4eba\u65f6\uff0c\u4e5f\u4f1a\u4f7f\u7528\u540c\u6837\u7684\u91cd\u65b0\u5e73\u8861\u8fc7\u7a0b\u3002 \u57282.3.0\u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0cConnect\u5de5\u4eba\u5c06\u91cd\u65b0\u5e73\u8861\u96c6\u7fa4\u4e2d\u7684\u5168\u5957\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\uff0c\u4f5c\u4e3a\u786e\u4fdd\u6bcf\u4e2a\u5de5\u4eba\u62e5\u6709\u5927\u81f4\u76f8\u540c\u7684\u5de5\u4f5c\u91cf\u7684\u7b80\u5355\u65b9\u6cd5\u3002\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e connect.protocol=eager \u6765\u542f\u7528\u6b64\u884c\u4e3a\u3002 \u4ece2.3.0\u5f00\u59cb\uff0cKafka Connect\u9ed8\u8ba4\u4f7f\u7528\u4e00\u79cd\u6267\u884c \u589e\u91cf\u5408\u4f5c\u518d\u5e73\u8861\u7684 \u534f\u8bae\uff0c\u8be5\u534f\u8bae\u9010\u6b65\u5e73\u8861Connect\u5de5\u4eba\u4e4b\u95f4\u7684\u8fde\u63a5\u5668\u548c\u4efb\u52a1\uff0c\u53ea\u5f71\u54cd\u65b0\u4efb\u52a1\u3001\u8981\u5220\u9664\u6216\u9700\u8981\u4ece\u4e00\u4e2a\u5de5\u4eba\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u5de5\u4eba\u7684\u4efb\u52a1\u3002\u5176\u4ed6\u4efb\u52a1\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u4e0d\u4f1a\u50cf\u65e7\u534f\u8bae\u90a3\u6837\u505c\u6b62\u548c\u91cd\u65b0\u542f\u52a8\u3002 \u5982\u679c Connect \u5de5\u4f5c\u7ebf\u7a0b\u6709\u610f\u6216\u7531\u4e8e\u6545\u969c\u800c\u79bb\u5f00\u7ec4\uff0cConnect \u4f1a\u5728\u89e6\u53d1\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u7b49\u5f85 scheduled.rebalance.max.delay.ms \u3002 \u6b64\u5ef6\u8fdf\u9ed8\u8ba4\u4e3a\u4e94\u5206\u949f\uff08 300000ms \uff09\uff0c\u4ee5\u5bb9\u5fcd\u5de5\u4f5c\u4eba\u5458\u7684\u6545\u969c\u6216\u5347\u7ea7\uff0c\u800c\u65e0\u9700\u7acb\u5373\u91cd\u65b0\u5206\u914d\u5373\u5c06\u79bb\u5f00\u7684\u5de5\u4f5c\u4eba\u5458\u7684\u8d1f\u8f7d\u3002 \u5982\u679c\u8be5\u5de5\u4f5c\u4eba\u5458\u5728\u914d\u7f6e\u7684\u5ef6\u8fdf\u5185\u8fd4\u56de\uff0c\u5b83\u5c06\u83b7\u5f97\u4e4b\u524d\u5206\u914d\u7684\u5b8c\u6574\u4efb\u52a1\u3002 \u4f46\u662f\uff0c\u8fd9\u610f\u5473\u7740\u4efb\u52a1\u5c06\u4fdd\u6301\u672a\u5206\u914d\u72b6\u6001\uff0c\u76f4\u5230 scheduled.rebalance.max.delay.ms \u6307\u5b9a\u7684\u65f6\u95f4\u8fc7\u53bb\u3002 \u5982\u679c\u5de5\u4f5c\u4eba\u5458\u672a\u5728\u8be5\u65f6\u95f4\u9650\u5236\u5185\u8fd4\u56de\uff0cConnect \u5c06\u5728 Connect \u96c6\u7fa4\u4e2d\u7684\u5269\u4f59\u5de5\u4f5c\u4eba\u5458\u4e4b\u95f4\u91cd\u65b0\u5206\u914d\u8fd9\u4e9b\u4efb\u52a1\u3002 \u5f53\u6784\u6210 Connect \u96c6\u7fa4\u7684\u6240\u6709\u5de5\u4f5c\u7ebf\u7a0b\u90fd\u914d\u7f6e\u4e86 connect.protocol=\u517c\u5bb9 \u65f6\uff0c\u65b0\u7684 Connect \u534f\u8bae\u5c31\u4f1a\u542f\u7528\uff0c\u8fd9\u4e5f\u662f\u7f3a\u5c11\u6b64\u5c5e\u6027\u65f6\u7684\u9ed8\u8ba4\u503c\u3002 \u56e0\u6b64\uff0c\u5f53\u6240\u6709\u5de5\u4f5c\u4eba\u5458\u5347\u7ea7\u5230 2.3.0 \u65f6\uff0c\u4f1a\u81ea\u52a8\u5347\u7ea7\u5230\u65b0\u7684 Connect \u534f\u8bae\u3002 \u5f53\u6700\u540e\u4e00\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u52a0\u5165\u7248\u672c 2.3.0 \u65f6\uff0cConnect \u96c6\u7fa4\u7684\u6eda\u52a8\u5347\u7ea7\u5c06\u6fc0\u6d3b\u589e\u91cf\u534f\u4f5c\u91cd\u65b0\u5e73\u8861\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528REST API\u67e5\u770b\u8fde\u63a5\u5668\u7684\u5f53\u524d\u72b6\u6001\u53ca\u5176\u4efb\u52a1\uff0c\u5305\u62ec\u5206\u914d\u7ed9\u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u5de5\u4f5c\u4eba\u5458\u7684ID\u3002\u4f8b\u5982\uff0c GET /connectors/file-source/status \u8bf7\u6c42\u663e\u793a\u540d\u4e3a file-source \u7684\u8fde\u63a5\u5668\u7684\u72b6\u6001\uff1a { \"name\": \"file-source\", \"connector\": { \"state\": \"RUNNING\", \"worker_id\": \"192.168.1.208:8083\" }, \"tasks\": [ { \"id\": 0, \"state\": \"RUNNING\", \"worker_id\": \"192.168.1.209:8083\" } ] } \u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\u53d1\u5e03\u5171\u4eab\u4e3b\u9898\u7684\u72b6\u6001\u66f4\u65b0\uff08\u914d\u7f6e\u4e3a status.storage.topic \uff09\uff0c\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u5de5\u4f5c\u4eba\u5458\u90fd\u4f1a\u76d1\u63a7\u8be5\u4e3b\u9898\u3002\u7531\u4e8e\u5de5\u4eba\u5f02\u6b65\u4f7f\u7528\u6b64\u4e3b\u9898\uff0c\u5728\u72b6\u6001\u66f4\u6539\u901a\u8fc7\u72b6\u6001API\u53ef\u89c1\u4e4b\u524d\uff0c\u901a\u5e38\u4f1a\u6709\uff08\u77ed\u6682\u7684\uff09\u5ef6\u8fdf\u3002\u4ee5\u4e0b\u72b6\u6001\u5bf9\u4e8e\u8fde\u63a5\u5668\u6216\u5176\u4efb\u52a1\u4e4b\u4e00\u662f\u53ef\u80fd\u7684\uff1a UNASSIGNED : \u8fde\u63a5\u5668/\u4efb\u52a1\u5c1a\u672a\u5206\u914d\u7ed9\u5de5\u4eba\u3002 RUNNING : \u8fde\u63a5\u5668/\u4efb\u52a1\u6b63\u5728\u8fd0\u884c\u3002 PAUSED : \u8fde\u63a5\u5668/\u4efb\u52a1\u5df2\u5728\u7ba1\u7406\u4e0a\u6682\u505c\u3002 STOPPED : \u8fde\u63a5\u5668\u5df2\u505c\u6b62\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u72b6\u6001\u4e0d\u9002\u7528\u4e8e\u4efb\u52a1\uff0c\u56e0\u4e3a\u505c\u6b62\u8fde\u63a5\u5668\u7684\u4efb\u52a1\u5df2\u5173\u95ed\uff0c\u4e0d\u4f1a\u5728\u72b6\u6001API\u4e2d\u53ef\u89c1\u3002 FAILED : \u8fde\u63a5\u5668/\u4efb\u52a1\u5931\u8d25\uff08\u901a\u5e38\u901a\u8fc7\u5f15\u53d1\u5f02\u5e38\uff0c\u8be5\u5f02\u5e38\u5728\u72b6\u6001\u8f93\u51fa\u4e2d\u62a5\u544a\uff09\u3002 RESTARTING : \u8fde\u63a5\u5668/\u4efb\u52a1\u8981\u4e48\u6b63\u5728\u4e3b\u52a8\u91cd\u65b0\u542f\u52a8\uff0c\u8981\u4e48\u9884\u8ba1\u5f88\u5feb\u5c31\u4f1a\u91cd\u65b0\u542f\u52a8 \u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u72b6\u6001\u5c06\u5339\u914d\uff0c\u5c3d\u7ba1\u5f53\u53d1\u751f\u53d8\u5316\u6216\u4efb\u52a1\u5931\u8d25\u65f6\uff0c\u5b83\u4eec\u5728\u77ed\u65f6\u95f4\u5185\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5f53\u8fde\u63a5\u5668\u9996\u6b21\u542f\u52a8\u65f6\uff0c\u5728\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\u5168\u90e8\u8fc7\u6e21\u5230\u8fd0\u884c\u72b6\u6001\u4e4b\u524d\u53ef\u80fd\u4f1a\u51fa\u73b0\u660e\u663e\u7684\u5ef6\u8fdf\u3002\u5f53\u4efb\u52a1\u5931\u8d25\u65f6\uff0c\u72b6\u6001\u4e5f\u4f1a\u6709\u6240\u4e0d\u540c\uff0c\u56e0\u4e3aConnect\u4e0d\u4f1a\u81ea\u52a8\u91cd\u65b0\u542f\u52a8\u5931\u8d25\u7684\u4efb\u52a1\u3002\u8981\u624b\u52a8\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668/\u4efb\u52a1\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u5217\u51fa\u7684\u91cd\u65b0\u542f\u52a8API\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u5728\u91cd\u65b0\u5e73\u8861\u65f6\u5c1d\u8bd5\u91cd\u65b0\u542f\u52a8\u4efb\u52a1\uff0cConnect\u5c06\u8fd4\u56de409\uff08\u51b2\u7a81\uff09\u72b6\u6001\u4ee3\u7801\u3002\u60a8\u53ef\u4ee5\u5728\u91cd\u65b0\u5e73\u8861\u5b8c\u6210\u540e\u91cd\u8bd5\uff0c\u4f46\u53ef\u80fd\u6ca1\u6709\u5fc5\u8981\uff0c\u56e0\u4e3a\u91cd\u65b0\u5e73\u8861\u4f1a\u6709\u6548\u5730\u91cd\u65b0\u542f\u52a8\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u3002 \u4ece2.5.0\u5f00\u59cb\uff0cKafka Connect\u4f7f\u7528 status.storage.topic \u6765\u5b58\u50a8\u4e0e\u6bcf\u4e2a\u8fde\u63a5\u5668\u6b63\u5728\u4f7f\u7528\u7684\u4e3b\u9898\u76f8\u5173\u7684\u4fe1\u606f\u3002Connect Workers\u4f7f\u7528\u8fd9\u4e9b\u6bcf\u4e2a\u8fde\u63a5\u5668\u4e3b\u9898\u72b6\u6001\u66f4\u65b0\uff0c\u901a\u8fc7\u8fd4\u56de\u8fde\u63a5\u5668\u6b63\u5728\u4f7f\u7528\u7684\u4e3b\u9898\u540d\u79f0\u96c6\u6765\u54cd\u5e94\u5bf9REST\u7aef\u70b9 GET /connectors/{name}/topics \u8bf7\u6c42\u3002\u5bf9REST\u7aef\u70b9 PUT /connectors/{name}/topics/reset \u7684\u8bf7\u6c42\u4f1a\u91cd\u7f6e\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\uff0c\u5e76\u5141\u8bb8\u6839\u636e\u8fde\u63a5\u5668\u7684\u6700\u65b0\u4e3b\u9898\u4f7f\u7528\u6a21\u5f0f\u586b\u5145\u4e00\u7ec4\u65b0\u4e3b\u9898\u3002\u8fde\u63a5\u5668\u5220\u9664\u540e\uff0c\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\u4e5f\u4f1a\u88ab\u5220\u9664\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u542f\u7528\u4e3b\u9898\u8ddf\u8e2a\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e topic.tracking.enable=false \u6765\u7981\u7528\u3002\u5982\u679c\u60a8\u60f3\u7981\u6b62\u5728\u8fd0\u884c\u65f6\u91cd\u7f6e\u8fde\u63a5\u5668\u6d3b\u52a8\u4e3b\u9898\u7684\u8bf7\u6c42\uff0c\u8bf7\u8bbe\u7f6eWorker\u5c5e\u6027 topic.tracking.allow.reset=false \u3002 \u6709\u65f6\u6682\u65f6\u505c\u6b62\u8fde\u63a5\u5668\u7684\u6d88\u606f\u5904\u7406\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8fdc\u7a0b\u7cfb\u7edf\u6b63\u5728\u8fdb\u884c\u7ef4\u62a4\uff0c\u6e90\u8fde\u63a5\u5668\u6700\u597d\u505c\u6b62\u8f6e\u8be2\u65b0\u6570\u636e\uff0c\u800c\u4e0d\u662f\u7528\u5f02\u5e38\u5783\u573e\u90ae\u4ef6\u586b\u5145\u65e5\u5fd7\u3002\u5bf9\u4e8e\u6b64\u7528\u4f8b\uff0cConnect\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6682\u505c/\u6062\u590dAPI\u3002\u5f53\u6e90\u8fde\u63a5\u5668\u6682\u505c\u65f6\uff0cConnect\u5c06\u505c\u6b62\u8f6e\u8be2\u5b83\u4ee5\u83b7\u53d6\u5176\u4ed6\u8bb0\u5f55\u3002\u5f53\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6682\u505c\u65f6\uff0cConnect\u5c06\u505c\u6b62\u5411\u5176\u63a8\u9001\u65b0\u6d88\u606f\u3002\u6682\u505c\u72b6\u6001\u662f\u6301\u4e45\u7684\uff0c\u56e0\u6b64\u5373\u4f7f\u60a8\u91cd\u65b0\u542f\u52a8\u96c6\u7fa4\uff0c\u5728\u4efb\u52a1\u6062\u590d\u4e4b\u524d\uff0c\u8fde\u63a5\u5668\u4e5f\u4e0d\u4f1a\u518d\u6b21\u5f00\u59cb\u6d88\u606f\u5904\u7406\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u8fde\u63a5\u5668\u7684\u6240\u6709\u4efb\u52a1\u8fc7\u6e21\u5230\u6682\u505c\u72b6\u6001\u4e4b\u524d\u53ef\u80fd\u4f1a\u51fa\u73b0\u5ef6\u8fdf\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u9700\u8981\u65f6\u95f4\u6765\u5b8c\u6210\u6682\u505c\u65f6\u7684\u4efb\u4f55\u5904\u7406\u3002\u6b64\u5916\uff0c\u5931\u8d25\u7684\u4efb\u52a1\u5728\u91cd\u65b0\u542f\u52a8\u4e4b\u524d\u4e0d\u4f1a\u8fc7\u6e21\u5230\u6682\u505c\u72b6\u6001\u3002 \u572835.0\u4e2d\uff0cConnect\u5f15\u5165\u4e86\u4e00\u4e2a\u505c\u6b62API\uff0c\u53ef\u4ee5\u5b8c\u5168\u5173\u95ed\u8fde\u63a5\u5668\u7684\u4efb\u52a1\uff0c\u5e76\u53d6\u6d88\u5206\u914d\u4ed6\u4eec\u58f0\u79f0\u7684\u4efb\u4f55\u8d44\u6e90\u3002\u8fd9\u4e0e\u6682\u505c\u8fde\u63a5\u5668\u4e0d\u540c\uff0c\u8fde\u63a5\u5668\u7684\u4efb\u52a1\u5904\u4e8e\u7a7a\u8f6c\uff0c\u5e76\u5206\u914d\u4e86\u5b83\u4eec\u58f0\u79f0\u7684\u4efb\u4f55\u8d44\u6e90\uff08\u8fd9\u5141\u8bb8\u8fde\u63a5\u5668\u5728\u6062\u590d\u540e\u5feb\u901f\u5f00\u59cb\u5904\u7406\u6570\u636e\uff09\u3002\u4ece\u8d44\u6e90\u4f7f\u7528\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u505c\u6b62\u8fde\u63a5\u5668\u6bd4\u6682\u505c\u5b83\u66f4\u6709\u6548\uff0c\u4f46\u4e00\u65e6\u6062\u590d\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u957f\u7684\u65f6\u95f4\u624d\u80fd\u5f00\u59cb\u5904\u7406\u6570\u636e\u3002\u8bf7\u6ce8\u610f\uff0c\u8fde\u63a5\u5668\u7684\u504f\u79fb\u91cf\u53ea\u6709\u5728\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u65f6\u624d\u80fd\u901a\u8fc7\u504f\u79fb\u7ba1\u7406\u7aef\u70b9\u8fdb\u884c\u4fee\u6539\u3002","title":"8. Kafka \u8fde\u63a5"},{"location":"8/#8kafka","text":"","title":"8.Kafka\u8fde\u63a5"},{"location":"8/#81","text":"Kafka Connect \u662f\u4e00\u79cd\u5728 Apache Kafka \u548c\u5176\u4ed6\u7cfb\u7edf\u4e4b\u95f4\u53ef\u6269\u5c55\u4e14\u53ef\u9760\u5730\u4f20\u8f93\u6570\u636e\u7684\u5de5\u5177\u3002\u5b83\u4f7f\u5f97\u5feb\u901f\u5b9a\u4e49\u5c06\u5927\u91cf\u6570\u636e\u79fb\u5165\u548c\u79fb\u51fa Kafka \u7684 \u8fde\u63a5\u5668\u53d8\u5f97\u7b80\u5355\u3002 Kafka Connect \u53ef\u4ee5\u6444\u53d6\u6574\u4e2a\u6570\u636e\u5e93\u6216\u5c06\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u7684\u6307\u6807\u6536\u96c6\u5230 Kafka \u4e3b\u9898\u4e2d\uff0c\u4ece\u800c\u4f7f\u6570\u636e\u53ef\u7528\u4e8e\u4f4e\u5ef6\u8fdf\u7684\u6d41\u5904\u7406\u3002\u5bfc\u51fa\u4f5c\u4e1a\u53ef\u4ee5\u5c06 Kafka \u4e3b\u9898\u4e2d\u7684\u6570\u636e\u4f20\u8f93\u5230\u8f85\u52a9\u5b58\u50a8\u548c\u67e5\u8be2\u7cfb\u7edf\u6216\u6279\u5904\u7406\u7cfb\u7edf\u4e2d\u4ee5\u8fdb\u884c\u79bb\u7ebf\u5206\u6790\u3002 Kafka\u8fde\u63a5\u529f\u80fd\u5305\u62ec\uff1a Kafka \u8fde\u63a5\u5668\u7684\u901a\u7528\u6846\u67b6 - Kafka Connect \u6807\u51c6\u5316\u4e86\u5176\u4ed6\u6570\u636e\u7cfb\u7edf\u4e0e Kafka \u7684\u96c6\u6210\uff0c\u7b80\u5316\u4e86\u8fde\u63a5\u5668\u7684\u5f00\u53d1\u3001\u90e8\u7f72\u548c\u7ba1\u7406 \u5206\u5e03\u5f0f\u548c\u72ec\u7acb\u6a21\u5f0f - \u6269\u5c55\u5230\u652f\u6301\u6574\u4e2a\u7ec4\u7ec7\u7684\u5927\u578b\u96c6\u4e2d\u7ba1\u7406\u670d\u52a1\uff0c\u6216\u7f29\u5c0f\u5230\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u5c0f\u578b\u751f\u4ea7\u90e8\u7f72 REST \u63a5\u53e3 - \u901a\u8fc7\u6613\u4e8e\u4f7f\u7528\u7684 REST API \u63d0\u4ea4\u548c\u7ba1\u7406\u5230 Kafka Connect \u96c6\u7fa4\u7684\u8fde\u63a5\u5668 \u81ea\u52a8\u504f\u79fb\u7ba1\u7406 - \u53ea\u9700\u6765\u81ea\u8fde\u63a5\u5668\u7684\u5c11\u91cf\u4fe1\u606f\uff0cKafka Connect \u5c31\u53ef\u4ee5\u81ea\u52a8\u7ba1\u7406\u504f\u79fb\u63d0\u4ea4\u8fc7\u7a0b\uff0c\u56e0\u6b64\u8fde\u63a5\u5668\u5f00\u53d1\u4eba\u5458\u65e0\u9700\u62c5\u5fc3\u8fde\u63a5\u5668\u5f00\u53d1\u4e2d\u8fd9\u4e2a\u5bb9\u6613\u51fa\u9519\u7684\u90e8\u5206 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u5206\u5e03\u5f0f\u4e14\u53ef\u6269\u5c55\u7684 - Kafka Connect \u6784\u5efa\u5728\u73b0\u6709\u7684\u7ec4\u7ba1\u7406\u534f\u8bae\u4e4b\u4e0a\u3002\u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u5de5\u4f5c\u4eba\u5458\u6765\u6269\u5c55 Kafka Connect \u96c6\u7fa4\u3002 Streaming/batch \u96c6\u6210 - \u5229\u7528 Kafka \u7684\u73b0\u6709\u529f\u80fd\uff0cKafka Connect \u662f\u6865\u63a5\u6d41\u548c\u6279\u6570\u636e\u7cfb\u7edf\u7684\u7406\u60f3\u89e3\u51b3\u65b9\u6848","title":"8.1 \u6982\u8ff0"},{"location":"8/#82","text":"\u8be5 \u5feb\u901f\u5165\u95e8 \u63d0\u4f9b\u4e86\u5982\u4f55\u8fd0\u884c\u72ec\u7acb\u7248\u672c\u7684 Kafka Connect \u7684\u7b80\u77ed\u793a\u4f8b\u3002\u672c\u8282\u66f4\u8be6\u7ec6\u5730\u4ecb\u7ecd\u5982\u4f55\u914d\u7f6e\u3001\u8fd0\u884c\u548c\u7ba1\u7406 Kafka Connect\u3002","title":"8.2 \u7528\u6237\u6307\u5357"},{"location":"8/#kafka","text":"Kafka Connect\u76ee\u524d\u652f\u6301\u4e24\u79cd\u6267\u884c\u6a21\u5f0f\uff1a\u72ec\u7acb\uff08\u5355\u8fdb\u7a0b\uff09\u548c\u5206\u5e03\u5f0f\u3002 \u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\uff0c\u6240\u6709\u5de5\u4f5c\u90fd\u5728\u5355\u4e2a\u8fdb\u7a0b\u4e2d\u6267\u884c\u3002\u6b64\u914d\u7f6e\u66f4\u6613\u4e8e\u8bbe\u7f6e\u548c\u4e0a\u624b\uff0c\u5e76\u4e14\u5728\u53ea\u6709\u4e00\u4e2a\u5de5\u4f5c\u4eba\u5458\u6709\u610f\u4e49\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u5f88\u6709\u7528\uff08\u4f8b\u5982\u6536\u96c6\u65e5\u5fd7\u6587\u4ef6\uff09\uff0c\u4f46\u5b83\u65e0\u6cd5\u4ece Kafka Connect \u7684\u67d0\u4e9b\u529f\u80fd\uff08\u4f8b\u5982\u5bb9\u9519\uff09\u4e2d\u53d7\u76ca\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8\u72ec\u7acb\u8fdb\u7a0b\uff1a > bin/connect-standalone.sh config/connect-standalone.properties [connector1.propertiesconnector2.properties ...] \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5de5\u4f5c\u7ebf\u7a0b\u7684\u914d\u7f6e\u3002\u8fd9\u5305\u62ec Kafka \u8fde\u63a5\u53c2\u6570\u3001\u5e8f\u5217\u5316\u683c\u5f0f\u4ee5\u53ca\u63d0\u4ea4\u504f\u79fb\u91cf\u7684\u9891\u7387\u7b49\u8bbe\u7f6e\u3002\u63d0\u4f9b\u7684\u793a\u4f8b\u5e94\u8be5\u9002\u7528\u4e8e\u4f7f\u7528 \u63d0\u4f9b\u7684\u9ed8\u8ba4\u914d\u7f6e\u8fd0\u884c\u7684\u672c\u5730\u96c6\u7fa4 config/server.properties \u3002\u9700\u8981\u8fdb\u884c\u8c03\u6574\u624d\u80fd\u4e0e\u4e0d\u540c\u7684\u914d\u7f6e\u6216\u751f\u4ea7\u90e8\u7f72\u4e00\u8d77\u4f7f\u7528\u3002\u6240\u6709\u5de5\u4f5c\u4eba\u5458\uff08\u72ec\u7acb\u7684\u548c\u5206\u5e03\u5f0f\u7684\uff09\u90fd\u9700\u8981\u4e00\u4e9b\u914d\u7f6e\uff1a bootstrap.servers - \u7528\u4e8e\u5f15\u5bfc\u4e0e Kafka \u7684\u8fde\u63a5\u7684 Kafka \u670d\u52a1\u5668\u5217\u8868 key.converter - \u8f6c\u6362\u5668\u7c7b\uff0c\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u952e\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 value.converter - \u8f6c\u6362\u5668\u7c7b\uff0c\u7528\u4e8e\u5728 Kafka Connect \u683c\u5f0f\u548c\u5199\u5165 Kafka \u7684\u5e8f\u5217\u5316\u5f62\u5f0f\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u63a7\u5236\u5199\u5165 Kafka \u6216\u4ece Kafka \u8bfb\u53d6\u7684\u6d88\u606f\u4e2d\u7684\u503c\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e\u5b83\u72ec\u7acb\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u4efb\u4f55\u8fde\u63a5\u5668\u4f7f\u7528\u4efb\u4f55\u5e8f\u5217\u5316\u683c\u5f0f\u3002\u5e38\u89c1\u683c\u5f0f\u7684\u793a\u4f8b\u5305\u62ec JSON \u548c Avro\u3002 plugin.path \uff08\u9ed8\u8ba4 empty \uff09 - \u5305\u542b Connect \u63d2\u4ef6\uff08\u8fde\u63a5\u5668\u3001\u8f6c\u6362\u5668\u3001\u8f6c\u6362\uff09\u7684\u8def\u5f84\u5217\u8868\u3002\u5728\u8fd0\u884c\u5feb\u901f\u542f\u52a8\u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u6dfb\u52a0\u5305\u542b\u6253\u5305\u5728 \u4e2d\u7684\u793a\u4f8b FileStreamSourceConnector \u548c FileStreamSinkConnector \u7684\u7edd\u5bf9\u8def\u5f84 connect-file-\"version\".jar \uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u8fde\u63a5\u5668\u4e0d\u5305\u542b\u5728Connect Worker \u4e2d\uff08\u8bf7\u53c2\u9605 CLASSPATH \u3001 plugin.path \u5c5e\u6027\u4ee5\u83b7\u53d6\u793a\u4f8b\uff09\u3002 \u72ec\u7acb\u6a21\u5f0f\u7279\u6709\u7684\u91cd\u8981\u914d\u7f6e\u9009\u9879\u662f\uff1a offset.storage.file.filename - \u5b58\u50a8\u6e90\u8fde\u63a5\u5668\u504f\u79fb\u7684\u6587\u4ef6 \u6b64\u5904\u914d\u7f6e\u7684\u53c2\u6570\u9002\u7528\u4e8e Kafka Connect \u4f7f\u7528\u7684\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6765\u8bbf\u95ee\u914d\u7f6e\u3001\u504f\u79fb\u91cf\u548c\u72b6\u6001\u4e3b\u9898\u3002\u914d\u7f6eKafka Source\u4efb\u52a1\u4f7f\u7528\u7684\u751f\u4ea7\u8005\u548cKafka Sink\u4efb\u52a1\u4f7f\u7528\u7684\u6d88\u8d39\u8005\uff0c\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u53c2\u6570\uff0c\u4f46\u9700\u8981\u5206\u522b\u52a0\u4e0a producer. \u548c\u524d\u7f00 consumer. \u3002\u4ece\u5de5\u4f5c\u914d\u7f6e\u4e2d\u7ee7\u627f\u7684\u552f\u4e00\u4e0d\u5e26\u524d\u7f00\u7684 Kafka \u5ba2\u6237\u7aef\u53c2\u6570\u662f bootstrap.servers \uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u8fd9\u5c31\u8db3\u591f\u4e86\uff0c\u56e0\u4e3a\u540c\u4e00\u4e2a\u96c6\u7fa4\u901a\u5e38\u7528\u4e8e\u6240\u6709\u76ee\u7684\u3002\u4e00\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u662f\u5b89\u5168\u96c6\u7fa4\uff0c\u5b83\u9700\u8981\u989d\u5916\u7684\u53c2\u6570\u6765\u5141\u8bb8\u8fde\u63a5\u3002\u8fd9\u4e9b\u53c2\u6570\u9700\u8981\u5728\u5de5\u4f5c\u914d\u7f6e\u4e2d\u8bbe\u7f6e\u6700\u591a\u4e09\u6b21\uff0c\u4e00\u6b21\u7528\u4e8e\u7ba1\u7406\u8bbf\u95ee\uff0c\u4e00\u6b21\u7528\u4e8e Kafka \u6e90\uff0c\u4e00\u6b21\u7528\u4e8e Kafka \u63a5\u6536\u5668\u3002 \u4ece 2.3.0 \u5f00\u59cb\uff0c\u53ef\u4ee5\u5206\u522b\u4f7f\u7528 Kafka \u6e90\u6216 Kafka \u63a5\u6536\u5668\u7684\u524d\u7f00 producer.override. \u548c consumer.override. \u4e3a\u6bcf\u4e2a\u8fde\u63a5\u5668\u5355\u72ec\u914d\u7f6e\u5ba2\u6237\u7aef\u914d\u7f6e\u8986\u76d6\u3002\u8fd9\u4e9b\u8986\u76d6\u5305\u542b\u5728\u8fde\u63a5\u5668\u7684\u5176\u4f59\u914d\u7f6e\u5c5e\u6027\u4e2d\u3002 \u5176\u4f59\u53c2\u6570\u662f\u8fde\u63a5\u5668\u914d\u7f6e\u6587\u4ef6\u3002\u60a8\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u6570\u91cf\u7684\u5185\u5bb9\uff0c\u4f46\u6240\u6709\u5185\u5bb9\u90fd\u5c06\u5728\u540c\u4e00\u8fdb\u7a0b\u4e2d\uff08\u5728\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e0a\uff09\u6267\u884c\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0d\u5728\u547d\u4ee4\u884c\u4e0a\u6307\u5b9a\u4efb\u4f55\u8fde\u63a5\u5668\u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u662f\u4f7f\u7528 REST API \u5728\u72ec\u7acb\u5de5\u4f5c\u7ebf\u7a0b\u542f\u52a8\u540e\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u8fde\u63a5\u5668\u3002 \u5206\u5e03\u5f0f\u6a21\u5f0f\u5904\u7406\u5de5\u4f5c\u7684\u81ea\u52a8\u5e73\u8861\uff0c\u5141\u8bb8\u60a8\u52a8\u6001\u6269\u5c55\uff08\u6216\u7f29\u5c0f\uff09\uff0c\u5e76\u5728\u6d3b\u52a8\u4efb\u52a1\u4ee5\u53ca\u914d\u7f6e\u548c\u504f\u79fb\u63d0\u4ea4\u6570\u636e\u4e2d\u63d0\u4f9b\u5bb9\u9519\u80fd\u529b\u3002\u6267\u884c\u4e0e\u72ec\u7acb\u6a21\u5f0f\u975e\u5e38\u76f8\u4f3c\uff1a > bin/connect-distributed.sh config/connect-distributed.properties \u533a\u522b\u5728\u4e8e\u542f\u52a8\u7684\u7c7b\u548c\u914d\u7f6e\u53c2\u6570\uff0c\u5b83\u4eec\u6539\u53d8\u4e86 Kafka Connect \u8fdb\u7a0b\u51b3\u5b9a\u5728\u54ea\u91cc\u5b58\u50a8\u914d\u7f6e\u3001\u5982\u4f55\u5206\u914d\u5de5\u4f5c\u4ee5\u53ca\u5728\u54ea\u91cc\u5b58\u50a8\u504f\u79fb\u91cf\u548c\u4efb\u52a1\u72b6\u6001\u7684\u65b9\u5f0f\u3002\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0cKafka Connect \u5c06\u504f\u79fb\u91cf\u3001\u914d\u7f6e\u548c\u4efb\u52a1\u72b6\u6001\u5b58\u50a8\u5728 Kafka \u4e3b\u9898\u4e2d\u3002\u5efa\u8bae\u624b\u52a8\u521b\u5efa\u504f\u79fb\u91cf\u3001\u914d\u7f6e\u548c\u72b6\u6001\u7684\u4e3b\u9898\uff0c\u4ee5\u83b7\u5f97\u6240\u9700\u7684\u5206\u533a\u6570\u91cf\u548c\u590d\u5236\u56e0\u5b50\u3002\u5982\u679c\u542f\u52a8 Kafka Connect \u65f6\u5c1a\u672a\u521b\u5efa\u4e3b\u9898\uff0c\u5219\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684\u5206\u533a\u6570\u548c\u590d\u5236\u56e0\u5b50\u81ea\u52a8\u521b\u5efa\u4e3b\u9898\uff0c\u8fd9\u53ef\u80fd\u4e0d\u592a\u9002\u5408\u5176\u4f7f\u7528\u3002 \u7279\u522b\u662f\uff0c\u9664\u4e86\u4e0a\u9762\u63d0\u5230\u7684\u5e38\u89c1\u8bbe\u7f6e\u4e4b\u5916\uff0c\u5728\u542f\u52a8\u96c6\u7fa4\u4e4b\u524d\u8bbe\u7f6e\u4ee5\u4e0b\u914d\u7f6e\u53c2\u6570\u4e5f\u5f88\u91cd\u8981\uff1a group.id \uff08\u9ed8\u8ba4 connect-cluster \uff09- \u96c6\u7fa4\u7684\u552f\u4e00\u540d\u79f0\uff0c\u7528\u4e8e\u5f62\u6210 Connect \u96c6\u7fa4\u7ec4\uff1b\u8bf7\u6ce8\u610f\uff0c\u8fd9 \u4e0d\u80fd \u4e0e\u6d88\u8d39\u8005\u7ec4 ID\u51b2\u7a81 config.storage.topic \uff08\u9ed8\u8ba4 connect-configs \uff09- \u7528\u4e8e\u5b58\u50a8\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u914d\u7f6e\u7684\u4e3b\u9898\uff1b\u8bf7\u6ce8\u610f\uff0c\u8fd9\u5e94\u8be5\u662f\u5355\u4e2a\u5206\u533a\u3001\u9ad8\u5ea6\u590d\u5236\u3001\u538b\u7f29\u7684\u4e3b\u9898\u3002\u60a8\u53ef\u80fd\u9700\u8981\u624b\u52a8\u521b\u5efa\u4e3b\u9898\u4ee5\u786e\u4fdd\u6b63\u786e\u914d\u7f6e\uff0c\u56e0\u4e3a\u81ea\u52a8\u521b\u5efa\u7684\u4e3b\u9898\u53ef\u80fd\u6709\u591a\u4e2a\u5206\u533a\u6216\u81ea\u52a8\u914d\u7f6e\u4e3a\u5220\u9664\u800c\u4e0d\u662f\u538b\u7f29 offset.storage.topic \uff08\u9ed8\u8ba4 connect-offsets \uff09- \u7528\u4e8e\u5b58\u50a8\u504f\u79fb\u91cf\u7684\u4e3b\u9898\uff1b\u8be5\u4e3b\u9898\u5e94\u8be5\u6709\u8bb8\u591a\u5206\u533a\uff0c\u53ef\u4ee5\u590d\u5236\uff0c\u5e76\u914d\u7f6e\u4e3a\u538b\u7f29 status.storage.topic \uff08\u9ed8\u8ba4 connect-status \uff09- \u7528\u4e8e\u5b58\u50a8\u72b6\u6001\u7684\u4e3b\u9898\uff1b\u8be5\u4e3b\u9898\u53ef\u4ee5\u6709\u591a\u4e2a\u5206\u533a\uff0c\u5e76\u4e14\u5e94\u8be5\u590d\u5236\u5e76\u914d\u7f6e\u4e3a\u538b\u7f29 \u8bf7\u6ce8\u610f\uff0c\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0c\u8fde\u63a5\u5668\u914d\u7f6e\u4e0d\u4f1a\u5728\u547d\u4ee4\u884c\u4e0a\u4f20\u9012\u3002\u76f8\u53cd\uff0c\u8bf7\u4f7f\u7528\u4e0b\u9762\u63cf\u8ff0\u7684 REST API \u6765\u521b\u5efa\u3001\u4fee\u6539\u548c\u9500\u6bc1\u8fde\u63a5\u5668\u3002","title":"\u8fd0\u884c Kafka \u8fde\u63a5"},{"location":"8/#_1","text":"\u8fde\u63a5\u5668\u914d\u7f6e\u662f\u7b80\u5355\u7684\u952e\u503c\u6620\u5c04\u3002\u5728\u72ec\u7acb\u6a21\u5f0f\u548c\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0c\u5b83\u4eec\u90fd\u5305\u542b\u5728\u521b\u5efa\uff08\u6216\u4fee\u6539\uff09\u8fde\u63a5\u5668\u7684 REST \u8bf7\u6c42\u7684 JSON \u6709\u6548\u8d1f\u8f7d\u4e2d\u3002\u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u4e9b\u4e5f\u53ef\u4ee5\u5728\u5c5e\u6027\u6587\u4ef6\u4e2d\u5b9a\u4e49\u5e76\u4f20\u9012\u5230\u547d\u4ee4\u884c\u4e0a\u7684 Connect \u8fdb\u7a0b\u3002 \u5927\u591a\u6570\u914d\u7f6e\u90fd\u4f9d\u8d56\u4e8e\u8fde\u63a5\u5668\uff0c\u56e0\u6b64\u6b64\u5904\u65e0\u6cd5\u6982\u8ff0\u3002\u4f46\u662f\uff0c\u6709\u4e00\u4e9b\u5e38\u89c1\u7684\u9009\u9879\uff1a name - \u8fde\u63a5\u5668\u7684\u552f\u4e00\u540d\u79f0\u3002\u5c1d\u8bd5\u4f7f\u7528\u76f8\u540c\u540d\u79f0\u518d\u6b21\u6ce8\u518c\u5c06\u4f1a\u5931\u8d25\u3002 connector.class - \u8fde\u63a5\u5668\u7684 Java \u7c7b tasks.max - \u5e94\u4e3a\u6b64\u8fde\u63a5\u5668\u521b\u5efa\u7684\u6700\u5927\u4efb\u52a1\u6570\u3002\u5982\u679c\u8fde\u63a5\u5668\u65e0\u6cd5\u5b9e\u73b0\u8fd9\u79cd\u5e76\u884c\u7ea7\u522b\uff0c\u5b83\u53ef\u80fd\u4f1a\u521b\u5efa\u66f4\u5c11\u7684\u4efb\u52a1\u3002 key.converter -\uff08\u53ef\u9009\uff09\u8986\u76d6\u5de5\u4f5c\u4eba\u5458\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u5bc6\u94a5\u8f6c\u6362\u5668\u3002 value.converter -\uff08\u53ef\u9009\uff09\u8986\u76d6\u5de5\u4f5c\u4eba\u5458\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\u8f6c\u6362\u5668\u3002 \u8be5 connector.class \u914d\u7f6e\u652f\u6301\u591a\u79cd\u683c\u5f0f\uff1a\u8be5\u8fde\u63a5\u5668\u7684\u7c7b\u7684\u5168\u540d\u6216\u522b\u540d\u3002\u5982\u679c\u8fde\u63a5\u5668\u662f org.apache.kafka.connect.file.FileStreamSinkConnector\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u6b64\u5168\u540d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 FileStreamSink \u6216 FileStreamSinkConnector \u4f7f\u914d\u7f6e\u66f4\u77ed\u4e00\u4e9b\u3002 \u63a5\u6536\u5668\u8fde\u63a5\u5668\u8fd8\u6709\u4e00\u4e9b\u9644\u52a0\u9009\u9879\u6765\u63a7\u5236\u5176\u8f93\u5165\u3002\u6bcf\u4e2a\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5fc5\u987b\u8bbe\u7f6e\u4ee5\u4e0b\u5176\u4e2d\u4e00\u9879\uff1a topics - \u7528\u4f5c\u6b64\u8fde\u63a5\u5668\u8f93\u5165\u7684\u4ee5\u9017\u53f7\u5206\u9694\u7684\u4e3b\u9898\u5217\u8868 topics.regex - \u7528\u4f5c\u6b64\u8fde\u63a5\u5668\u8f93\u5165\u7684\u4e3b\u9898\u7684 Java \u6b63\u5219\u8868\u8fbe\u5f0f \u5bf9\u4e8e\u4efb\u4f55\u5176\u4ed6\u9009\u9879\uff0c\u60a8\u5e94\u8be5\u67e5\u9605\u8fde\u63a5\u5668\u7684\u6587\u6863\u3002","title":"\u914d\u7f6e\u8fde\u63a5\u5668"},{"location":"8/#_2","text":"\u8fde\u63a5\u5668\u53ef\u4ee5\u914d\u7f6e\u8f6c\u6362\u4ee5\u8fdb\u884c\u8f7b\u91cf\u7ea7\u7684\u4e00\u6b21\u6d88\u606f\u4fee\u6539\u3002\u5b83\u4eec\u53ef\u4ee5\u65b9\u4fbf\u5730\u8fdb\u884c\u6570\u636e\u5904\u7406\u548c\u4e8b\u4ef6\u8def\u7531\u3002 \u53ef\u4ee5\u5728\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u6307\u5b9a\u8f6c\u6362\u94fe\u3002 transforms - \u8f6c\u6362\u7684\u522b\u540d\u5217\u8868\uff0c\u6307\u5b9a\u8f6c\u6362\u7684\u5e94\u7528\u987a\u5e8f\u3002 transforms.$alias.type - \u8f6c\u6362\u7684\u5b8c\u5168\u9650\u5b9a\u7c7b\u540d\u79f0\u3002 transforms.$alias.$transformationSpecificConfig \u8f6c\u6362\u7684\u914d\u7f6e\u5c5e\u6027 \u4f8b\u5982\uff0c\u8ba9\u6211\u4eec\u91c7\u7528\u5185\u7f6e\u6587\u4ef6\u6e90\u8fde\u63a5\u5668\u5e76\u4f7f\u7528\u8f6c\u6362\u6765\u6dfb\u52a0\u9759\u6001\u5b57\u6bb5\u3002 \u5728\u6574\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u65e0\u6a21\u5f0f JSON \u6570\u636e\u683c\u5f0f\u3002\u4e3a\u4e86\u4f7f\u7528\u65e0\u6a21\u5f0f\u683c\u5f0f\uff0c\u6211\u4eec\u5c06\u4ee5\u4e0b\u4e24\u884c connect-standalone.properties \u4ece true \u66f4\u6539\u4e3a false\uff1a key.converter.schemas.enable value.converter.schemas.enable \u6587\u4ef6\u6e90\u8fde\u63a5\u5668\u5c06\u6bcf\u4e00\u884c\u8bfb\u53d6\u4e3a\u5b57\u7b26\u4e32\u3002\u6211\u4eec\u5c06\u628a\u6bcf\u4e00\u884c\u5305\u88c5\u5728\u4e00\u4e2a Map \u4e2d\uff0c\u7136\u540e\u6dfb\u52a0\u7b2c\u4e8c\u4e2a\u5b57\u6bb5\u6765\u6807\u8bc6\u4e8b\u4ef6\u7684\u8d77\u6e90\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u4e24\u79cd\u8f6c\u6362\uff1a HoistField \u5c06\u8f93\u5165\u7ebf\u653e\u7f6e\u5728\u5730\u56fe\u5185 InsertField \u6dfb\u52a0\u9759\u6001\u5b57\u6bb5\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u6307\u793a\u8bb0\u5f55\u6765\u81ea\u6587\u4ef6\u8fde\u63a5\u5668 \u6dfb\u52a0\u8f6c\u6362\u540e\uff0c connect-file-source.properties \u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff1a name=local-file-source connector.class=FileStreamSource tasks.max=1 file=test.txt topic=connect-test transforms=MakeMap, InsertSource transforms.MakeMap.type=org.apache.kafka.connect.transforms.HoistField$Value transforms.MakeMap.field=line transforms.InsertSource.type=org.apache.kafka.connect.transforms.InsertField$Value transforms.InsertSource.static.field=data_source transforms.InsertSource.static.value=test-file-source \u6240\u6709\u4ee5 \u5f00\u5934\u7684\u884c transforms \u90fd\u662f\u4e3a\u4e86\u8f6c\u6362\u800c\u6dfb\u52a0\u7684\u3002\u60a8\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u521b\u5efa\u7684\u4e24\u4e2a\u8f6c\u6362\uff1a\u201cInsertSource\u201d\u548c\u201cMakeMap\u201d\u662f\u6211\u4eec\u9009\u62e9\u63d0\u4f9b\u8f6c\u6362\u7684\u522b\u540d\u3002\u8f6c\u6362\u7c7b\u578b\u57fa\u4e8e\u60a8\u53ef\u4ee5\u5728\u4e0b\u9762\u770b\u5230\u7684\u5185\u7f6e\u8f6c\u6362\u5217\u8868\u3002\u6bcf\u4e2a\u8f6c\u6362\u7c7b\u578b\u90fd\u6709\u9644\u52a0\u914d\u7f6e\uff1aHoistField \u9700\u8981\u4e00\u4e2a\u540d\u4e3a\u201cfield\u201d\u7684\u914d\u7f6e\uff0c\u5b83\u662f\u6620\u5c04\u4e2d\u5305\u542b\u6587\u4ef6\u4e2d\u539f\u59cb\u5b57\u7b26\u4e32\u7684\u5b57\u6bb5\u7684\u540d\u79f0\u3002InsertField \u8f6c\u6362\u8ba9\u6211\u4eec\u6307\u5b9a\u5b57\u6bb5\u540d\u79f0\u548c\u8981\u6dfb\u52a0\u7684\u503c\u3002 \u5f53\u6211\u4eec\u5728\u4e0d\u8fdb\u884c\u8f6c\u6362\u7684\u60c5\u51b5\u4e0b\u5728\u793a\u4f8b\u6587\u4ef6\u4e0a\u8fd0\u884c\u6587\u4ef6\u6e90\u8fde\u63a5\u5668\uff0c\u7136\u540e\u4f7f\u7528 \u8bfb\u53d6\u5b83\u4eec\u65f6 kafka-console-consumer.sh \uff0c\u7ed3\u679c\u662f\uff1a \"foo\" \"bar\" \"hello world\" \u7136\u540e\uff0c\u6211\u4eec\u5728\u5c06\u8f6c\u6362\u6dfb\u52a0\u5230\u914d\u7f6e\u6587\u4ef6\u4e4b\u540e\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u8fde\u63a5\u5668\u3002\u8fd9\u6b21\uff0c\u7ed3\u679c\u5c06\u662f\uff1a {\"line\":\"foo\",\"data_source\":\"test-file-source\"} {\"line\":\"bar\",\"data_source\":\"test-file-source\"} {\"line\":\"hello world\",\"data_source\":\"test-file-source\"} \u60a8\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u8bfb\u53d6\u7684\u884c\u73b0\u5728\u662f JSON \u6620\u5c04\u7684\u4e00\u90e8\u5206\uff0c\u5e76\u4e14\u6709\u4e00\u4e2a\u5e26\u6709\u6211\u4eec\u6307\u5b9a\u7684\u9759\u6001\u503c\u7684\u989d\u5916\u5b57\u6bb5\u3002\u8fd9\u53ea\u662f\u60a8\u53ef\u4ee5\u4f7f\u7528\u8f6c\u6362\u6267\u884c\u7684\u64cd\u4f5c\u7684\u793a\u4f8b\u4e4b\u4e00\u3002","title":"\u8f6c\u6362"},{"location":"8/#_3","text":"Kafka Connect \u5305\u542b\u591a\u79cd\u5e7f\u6cdb\u9002\u7528\u7684\u6570\u636e\u548c\u8def\u7531\u8f6c\u6362\uff1a InsertField - \u4f7f\u7528\u9759\u6001\u6570\u636e\u6216\u8bb0\u5f55\u5143\u6570\u636e\u6dfb\u52a0\u5b57\u6bb5 ReplaceField - \u8fc7\u6ee4\u6216\u91cd\u547d\u540d\u5b57\u6bb5 MaskField - \u5c06\u5b57\u6bb5\u66ff\u6362\u4e3a\u7c7b\u578b\u7684\u6709\u6548\u7a7a\u503c\uff080\u3001\u7a7a\u5b57\u7b26\u4e32\u7b49\uff09\u6216\u81ea\u5b9a\u4e49\u66ff\u6362\uff08\u4ec5\u9650\u975e\u7a7a\u5b57\u7b26\u4e32\u6216\u6570\u503c\uff09 ValueToKey - \u5c06\u8bb0\u5f55\u952e\u66ff\u6362\u4e3a\u7531\u8bb0\u5f55\u503c\u4e2d\u7684\u5b57\u6bb5\u5b50\u96c6\u5f62\u6210\u7684\u65b0\u952e HoistField - \u5c06\u6574\u4e2a\u4e8b\u4ef6\u5305\u88c5\u4e3a\u7ed3\u6784\u6216\u6620\u5c04\u4e2d\u7684\u5355\u4e2a\u5b57\u6bb5 ExtractField - \u4ece Struct \u548c Map \u4e2d\u63d0\u53d6\u7279\u5b9a\u5b57\u6bb5\u5e76\u5728\u7ed3\u679c\u4e2d\u4ec5\u5305\u542b\u8be5\u5b57\u6bb5 SetSchemaMetadata - \u4fee\u6539\u6a21\u5f0f\u540d\u79f0\u6216\u7248\u672c TimestampRouter - \u6839\u636e\u539f\u59cb\u4e3b\u9898\u548c\u65f6\u95f4\u6233\u4fee\u6539\u8bb0\u5f55\u7684\u4e3b\u9898\u3002\u5f53\u4f7f\u7528\u9700\u8981\u6839\u636e\u65f6\u95f4\u6233\u5199\u5165\u4e0d\u540c\u8868\u6216\u7d22\u5f15\u7684\u63a5\u6536\u5668\u65f6\u5f88\u6709\u7528 RegexRouter - \u6839\u636e\u539f\u59cb\u4e3b\u9898\u3001\u66ff\u6362\u5b57\u7b26\u4e32\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u4fee\u6539\u8bb0\u5f55\u7684\u4e3b\u9898 Filter - \u4ece\u6240\u6709\u8fdb\u4e00\u6b65\u5904\u7406\u4e2d\u5220\u9664\u6d88\u606f\u3002\u8fd9\u4e0e \u8c13\u8bcd \u4e00\u8d77\u4f7f\u7528\u6765\u9009\u62e9\u6027\u5730\u8fc7\u6ee4\u67d0\u4e9b\u6d88\u606f\u3002 InsertHeader - \u4f7f\u7528\u9759\u6001\u6570\u636e\u6dfb\u52a0\u6807\u9898 HeadersFrom - \u5c06\u952e\u6216\u503c\u4e2d\u7684\u5b57\u6bb5\u590d\u5236\u6216\u79fb\u52a8\u5230\u8bb0\u5f55\u6807\u9898 DropHeaders - \u6309\u540d\u79f0\u5220\u9664\u6807\u5934 \u4e0b\u9762\u5217\u51fa\u4e86\u5982\u4f55\u914d\u7f6e\u6bcf\u4e2a\u8f6c\u6362\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a","title":"\u5305\u542b\u7684\u8f6c\u6362"},{"location":"8/#orgapachekafkaconnecttransformsinsertfield","text":"\u4f7f\u7528\u8bb0\u5f55\u5143\u6570\u636e\u4e2d\u7684\u5c5e\u6027\u6216\u914d\u7f6e\u7684\u9759\u6001\u503c\u63d2\u5165\u5b57\u6bb5\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.InsertField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.InsertField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.InsertField"},{"location":"8/#offsetfield","text":"Kafka \u504f\u79fb\u91cf\u7684\u5b57\u6bb5\u540d\u79f0 - \u4ec5\u9002\u7528\u4e8e\u63a5\u6536\u5668\u8fde\u63a5\u5668\u3002 \u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium","title":"offset.field"},{"location":"8/#partitionfield","text":"Kafka \u5206\u533a\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium","title":"partition.field"},{"location":"8/#staticfield","text":"\u9759\u6001\u6570\u636e\u5b57\u6bb5\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium","title":"static.field"},{"location":"8/#staticvalue","text":"\u9759\u6001\u5b57\u6bb5\u503c\uff08\u5982\u679c\u914d\u7f6e\u4e86\u5b57\u6bb5\u540d\u79f0\uff09\u3002 Type: string Default: null Valid Values: Importance: medium","title":"static.value"},{"location":"8/#timestampfield","text":"\u8bb0\u5f55\u65f6\u95f4\u6233\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium","title":"timestamp.field"},{"location":"8/#topicfield","text":"Kafka \u4e3b\u9898\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u540e\u7f00 with ! \u4f7f\u5176\u6210\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff0c\u6216 ? \u4f7f\u5176\u4fdd\u6301\u53ef\u9009\uff08\u9ed8\u8ba4\uff09\u3002 Type: string Default: null Valid Values: Importance: medium","title":"topic.field"},{"location":"8/#orgapachekafkaconnecttransformsreplacefield","text":"\u8fc7\u6ee4\u6216\u91cd\u547d\u540d\u5b57\u6bb5\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.ReplaceField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.ReplaceField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.ReplaceField"},{"location":"8/#exclude","text":"\u8981\u6392\u9664\u7684\u5b57\u6bb5\u3002\u8fd9\u4f18\u5148\u4e8e\u8981\u5305\u542b\u7684\u5b57\u6bb5\u3002 Type: list Default: \"\" Valid Values: Importance: medium","title":"exclude"},{"location":"8/#include","text":"\u8981\u5305\u542b\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6307\u5b9a\uff0c\u5219\u4ec5\u4f7f\u7528\u8fd9\u4e9b\u5b57\u6bb5\u3002 Type: list Default: \"\" Valid Values: Importance: medium","title":"include"},{"location":"8/#renames","text":"\u5b57\u6bb5\u91cd\u547d\u540d\u6620\u5c04\u3002 Type: list Default: \"\" Valid Values: \u4ee5\u5192\u53f7\u5206\u9694\u7684\u5bf9\u7684\u5217\u8868\uff0c\u4f8b\u5982 foo:bar,abc:xyz Importance: medium","title":"renames"},{"location":"8/#blacklist","text":"\u5df2\u5f03\u7528\u3002\u8bf7\u6539\u7528\u6392\u9664\u3002 Type: list Default: null Valid Values: Importance: low","title":"blacklist"},{"location":"8/#whitelist","text":"\u5df2\u5f03\u7528\u3002\u4f7f\u7528\u5305\u542b\u4ee3\u66ff\u3002 Type: list Default: null Valid Values: Importance: low","title":"whitelist"},{"location":"8/#orgapachekafkaconnecttransformsmaskfield","text":"\u4f7f\u7528\u5b57\u6bb5\u7c7b\u578b\u7684\u6709\u6548\u7a7a\u503c\uff08\u5373 0, false, empty string \u7b49\uff09\u5c4f\u853d\u6307\u5b9a\u5b57\u6bb5\u3002 \u5bf9\u4e8e\u6570\u5b57\u548c\u5b57\u7b26\u4e32\u5b57\u6bb5\uff0c\u53ef\u4ee5\u6307\u5b9a\u8f6c\u6362\u4e3a\u6b63\u786e\u7c7b\u578b\u7684\u53ef\u9009\u66ff\u6362\u503c\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.MaskField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.MaskField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.MaskField"},{"location":"8/#fields","text":"\u8981\u5c4f\u853d\u7684\u5b57\u6bb5\u7684\u540d\u79f0\u3002 Type: list Default: Valid Values: non-empty list Importance: high","title":"fields"},{"location":"8/#replacement","text":"\u81ea\u5b9a\u4e49\u503c\u66ff\u6362\uff0c\u5c06\u5e94\u7528\u4e8e\u6240\u6709\u201c\u5b57\u6bb5\u201d\u503c\uff08\u4ec5\u9650\u6570\u5b57\u6216\u975e\u7a7a\u5b57\u7b26\u4e32\u503c\uff09\u3002 Type: string Default: null Valid Values: non-empty string Importance: low","title":"replacement"},{"location":"8/#orgapachekafkaconnecttransformsvaluetokey","text":"\u5c06\u8bb0\u5f55\u952e\u66ff\u6362\u4e3a\u7531\u8bb0\u5f55\u503c\u4e2d\u7684\u5b57\u6bb5\u5b50\u96c6\u5f62\u6210\u7684\u65b0\u952e\u3002","title":"org.apache.kafka.connect.transforms.ValueToKey"},{"location":"8/#fields_1","text":"\u8981\u63d0\u53d6\u4f5c\u4e3a\u8bb0\u5f55\u952e\u7684\u8bb0\u5f55\u503c\u4e0a\u7684\u5b57\u6bb5\u540d\u79f0\u3002 Type: list Default: Valid Values: non-empty list Importance: high","title":"fields"},{"location":"8/#orgapachekafkaconnecttransformshoistfield","text":"\u5982\u679c\u5b58\u5728\u67b6\u6784\uff0c\u5219\u4f7f\u7528\u7ed3\u6784\u4e2d\u6307\u5b9a\u7684\u5b57\u6bb5\u540d\u79f0\u5305\u88c5\u6570\u636e\uff1b\u5982\u679c\u5b58\u5728\u65e0\u67b6\u6784\u6570\u636e\uff0c\u5219\u4f7f\u7528\u6620\u5c04\u5305\u88c5\u6570\u636e\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.HoistField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.HoistField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.HoistField"},{"location":"8/#fields_2","text":"\u5c06\u5728\u751f\u6210\u7684\u7ed3\u6784\u6216\u6620\u5c04\u4e2d\u521b\u5efa\u7684\u5355\u4e2a\u5b57\u6bb5\u7684\u5b57\u6bb5\u540d\u79f0\u3002 Type: string Default: Valid Values: Importance: medium","title":"fields"},{"location":"8/#orgapachekafkaconnecttransformsextractfield","text":"\u5982\u679c\u5b58\u5728\u6a21\u5f0f\uff0c\u5219\u4ece\u7ed3\u6784\u4e2d\u63d0\u53d6\u6307\u5b9a\u5b57\u6bb5\uff1b\u5982\u679c\u5b58\u5728\u65e0\u6a21\u5f0f\u6570\u636e\uff0c\u5219\u4ece\u6620\u5c04\u4e2d\u63d0\u53d6\u6307\u5b9a\u5b57\u6bb5\u3002\u4efb\u4f55\u7a7a\u503c\u90fd\u4f1a\u4e0d\u52a0\u4fee\u6539\u5730\u4f20\u9012\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.ExtractField$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.ExtractField$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.ExtractField"},{"location":"8/#fields_3","text":"\u8981\u63d0\u53d6\u7684\u5b57\u6bb5\u540d\u79f0\u3002 Type: string Default: Valid Values: Importance: medium","title":"fields"},{"location":"8/#orgapachekafkaconnecttransformssetschemametadata","text":"org.apache.kafka.connect.transforms.SetSchemaMetadata$Key \u5728\u8bb0\u5f55\u7684\u952e ( ) \u6216\u503c ( org.apache.kafka.connect.transforms.SetSchemaMetadata$Value ) \u67b6\u6784 \u4e0a\u8bbe\u7f6e\u67b6\u6784\u540d\u79f0\u3001\u7248\u672c\u6216\u4e24\u8005\u3002","title":"org.apache.kafka.connect.transforms.SetSchemaMetadata"},{"location":"8/#schemaname","text":"\u8981\u8bbe\u7f6e\u7684\u67b6\u6784\u540d\u79f0\u3002 Type: string Default: null Valid Values: Importance: high","title":"schema.name"},{"location":"8/#schemaversion","text":"\u8981\u8bbe\u7f6e\u7684\u67b6\u6784\u7248\u672c\u3002 Type: int Default: null Valid Values: Importance: high","title":"schema.version"},{"location":"8/#orgapachekafkaconnecttransformstimestamprouter","text":"\u6839\u636e\u539f\u59cb\u4e3b\u9898\u503c\u548c\u8bb0\u5f55\u65f6\u95f4\u6233\u66f4\u65b0\u8bb0\u5f55\u7684\u4e3b\u9898\u5b57\u6bb5\u3002 \u8fd9\u4e3b\u8981\u5bf9\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6709\u7528\uff0c\u56e0\u4e3a\u4e3b\u9898\u5b57\u6bb5\u901a\u5e38\u7528\u4e8e\u786e\u5b9a\u76ee\u6807\u7cfb\u7edf\u4e2d\u7684\u7b49\u6548\u5b9e\u4f53\u540d\u79f0\uff08\u4f8b\u5982\u6570\u636e\u5e93\u8868\u6216\u641c\u7d22\u7d22\u5f15\u540d\u79f0\uff09\u3002","title":"org.apache.kafka.connect.transforms.TimestampRouter"},{"location":"8/#timestampformat","text":"\u4e0e \u517c\u5bb9\u7684\u65f6\u95f4\u6233\u7684\u683c\u5f0f\u5b57\u7b26\u4e32 java.text.SimpleDateFormat \u3002 Type: string Default: yyyyMMdd Valid Values: Importance: high","title":"timestamp.format"},{"location":"8/#topicformat","text":"\u683c\u5f0f\u5b57\u7b26\u4e32\u53ef\u4ee5\u5305\u542b ${topic} \u548c ${timestamp} \u4f5c\u4e3a\u4e3b\u9898\u548c\u65f6\u95f4\u6233\u7684\u5360\u4f4d\u7b26\u3002 Type: string Default: ${topic}-${timestamp} Valid Values: Importance: high","title":"topic.format"},{"location":"8/#orgapachekafkaconnecttransformsregexrouter","text":"\u4f7f\u7528\u914d\u7f6e\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\u66ff\u6362\u5b57\u7b26\u4e32\u66f4\u65b0\u8bb0\u5f55\u4e3b\u9898\u3002 \u5728\u5e95\u5c42\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u88ab\u7f16\u8bd1\u4e3a java.util.regex.Pattern . \u5982\u679c\u6a21\u5f0f\u4e0e\u8f93\u5165\u4e3b\u9898\u5339\u914d\uff0c java.util.regex.Matcher#replaceFirst() \u5219\u4e0e\u66ff\u6362\u5b57\u7b26\u4e32\u4e00\u8d77\u4f7f\u7528\u6765\u83b7\u53d6\u65b0\u4e3b\u9898\u3002","title":"org.apache.kafka.connect.transforms.RegexRouter"},{"location":"8/#regex","text":"\u7528\u4e8e\u5339\u914d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 Type: string Default: Valid Values: \u6709\u6548\u7684\u6b63\u5219\u8868\u8fbe\u5f0f Importance: high","title":"regex"},{"location":"8/#replacement_1","text":"\u66ff\u6362\u5b57\u7b26\u4e32\u3002 Type: string Default: Valid Values: Importance: high","title":"replacement"},{"location":"8/#orgapachekafkaconnecttransformsflatten","text":"\u5c55\u5e73\u5d4c\u5957\u6570\u636e\u7ed3\u6784\uff0c\u901a\u8fc7\u5c06\u6bcf\u4e2a\u7ea7\u522b\u7684\u5b57\u6bb5\u540d\u79f0\u4e0e\u53ef\u914d\u7f6e\u7684\u5206\u9694\u7b26\u8fde\u63a5\u6765\u751f\u6210\u6bcf\u4e2a\u5b57\u6bb5\u7684\u540d\u79f0\u3002\u5f53\u6a21\u5f0f\u5b58\u5728\u65f6\u9002\u7528\u4e8e\u7ed3\u6784\uff0c\u6216\u8005\u5728\u65e0\u6a21\u5f0f\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u9002\u7528\u4e8e\u6620\u5c04\u3002\u6570\u7ec4\u5b57\u6bb5\u53ca\u5176\u5185\u5bb9\u4e0d\u4f1a\u88ab\u4fee\u6539\u3002\u9ed8\u8ba4\u5206\u9694\u7b26\u662f\u201c.\u201d\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.Flatten$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.Flatten$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.Flatten"},{"location":"8/#delimiter","text":"\u4e3a\u8f93\u51fa\u8bb0\u5f55\u751f\u6210\u5b57\u6bb5\u540d\u79f0\u65f6\u5728\u8f93\u5165\u8bb0\u5f55\u7684\u5b57\u6bb5\u540d\u79f0\u4e4b\u95f4\u63d2\u5165\u7684\u5206\u9694\u7b26 Type: string Default: . Valid Values: Importance: medium","title":"delimiter"},{"location":"8/#orgapachekafkaconnecttransformscast","text":"\u5c06\u5b57\u6bb5\u6216\u6574\u4e2a\u952e\u6216\u503c\u8f6c\u6362\u4e3a\u7279\u5b9a\u7c7b\u578b\uff0c\u4f8b\u5982\u5f3a\u5236\u6574\u6570\u5b57\u6bb5\u5177\u6709\u8f83\u5c0f\u7684\u5bbd\u5ea6\u3002\u4ece\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5e03\u5c14\u503c\u548c\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u4efb\u4f55\u5176\u4ed6\u7c7b\u578b\uff0c\u5e76\u5c06\u4e8c\u8fdb\u5236\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff08base64 \u7f16\u7801\uff09\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.Cast$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.Cast$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.Cast"},{"location":"8/#spec","text":"\u5b57\u6bb5\u5217\u8868\u4ee5\u53ca\u5c06\u5176\u8f6c\u6362\u4e3a form field1:type,field2:type \u7684\u7c7b\u578b\u4ee5\u8f6c\u6362\u6620\u5c04\u6216\u7ed3\u6784\u7684\u5b57\u6bb5\u3002\u7528\u4e8e\u8f6c\u6362\u6574\u4e2a\u503c\u7684\u5355\u4e00\u7c7b\u578b\u3002\u6709\u6548\u7c7b\u578b\u5305\u62ec int8\u3001int16\u3001int32\u3001int64\u3001float32\u3001float64\u3001boolean \u548c string\u3002\u8bf7\u6ce8\u610f\uff0c\u4e8c\u8fdb\u5236\u5b57\u6bb5\u53ea\u80fd\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u3002 Type: list Default: Valid Values: \u4ee5\u5192\u53f7\u5206\u9694\u7684\u5bf9\u7684\u5217\u8868\uff0c\u4f8b\u5982 foo:bar,abc:xyz Importance: high","title":"spec"},{"location":"8/#orgapachekafkaconnecttransformstimestampconverter","text":"\u5728\u4e0d\u540c\u683c\u5f0f\uff08\u4f8b\u5982 Unix \u7eaa\u5143\u3001\u5b57\u7b26\u4e32\u548c\u8fde\u63a5\u65e5\u671f/\u65f6\u95f4\u6233\u7c7b\u578b\uff09\u4e4b\u95f4\u8f6c\u6362\u65f6\u95f4\u6233\u3002\u9002\u7528\u4e8e\u5355\u4e2a\u5b57\u6bb5\u6216\u6574\u4e2a\u503c\u3002 \u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.TimestampConverter$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.TimestampConverter$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.TimestampConverter"},{"location":"8/#targettype","text":"\u6240\u9700\u7684\u65f6\u95f4\u6233\u8868\u793a\u5f62\u5f0f\uff1a\u5b57\u7b26\u4e32\u3001unix\u3001\u65e5\u671f\u3001\u65f6\u95f4\u6216\u65f6\u95f4\u6233 Type: string Default: Valid Values: [string, unix, Date, Time, Timestamp] Importance: high","title":"target.type"},{"location":"8/#fields_4","text":"\u5305\u542b\u65f6\u95f4\u6233\u7684\u5b57\u6bb5\uff0c\u5982\u679c\u6574\u4e2a\u503c\u662f\u65f6\u95f4\u6233\uff0c\u5219\u4e3a\u7a7a Type: string Default: \"\" Valid Values: Importance: high","title":"fields"},{"location":"8/#format","text":"\u4e0e SimpleDateFormat \u517c\u5bb9\u7684\u65f6\u95f4\u6233\u683c\u5f0f\u3002\u5f53 type=string \u65f6\u7528\u4e8e\u751f\u6210\u8f93\u51fa\uff0c\u6216\u8005\u5982\u679c\u8f93\u5165\u662f\u5b57\u7b26\u4e32\u5219\u7528\u4e8e\u89e3\u6790\u8f93\u5165\u3002 Type: string Default: \"\" Valid Values: Importance: medium","title":"format"},{"location":"8/#unixprecision","text":"\u65f6\u95f4\u6233\u6240\u9700\u7684 Unix \u7cbe\u5ea6\uff1a\u79d2\u3001\u6beb\u79d2\u3001\u5fae\u79d2\u6216\u7eb3\u79d2\u3002\u7528\u4e8e\u5728 type=unix \u65f6\u751f\u6210\u8f93\u51fa\uff0c\u6216\u7528\u4e8e\u5728\u8f93\u5165\u4e3a Long \u65f6\u89e3\u6790\u8f93\u5165\u3002\u6ce8\u610f\uff1a\u6b64 SMT \u5c06\u5728\u4e0e\u5177\u6709\u4e9a\u6beb\u79d2\u5206\u91cf\u7684\u503c\u8fdb\u884c\u8f6c\u6362\u671f\u95f4\u5bfc\u81f4\u7cbe\u5ea6\u635f\u5931\u3002 Type: string Default: milliseconds Valid Values: [nanoseconds, microseconds, milliseconds, seconds] Importance: low","title":"unix.precision"},{"location":"8/#orgapachekafkaconnecttransformsfilter","text":"\u5220\u9664\u6240\u6709\u8bb0\u5f55\uff0c\u4ece\u94fe\u4e2d\u7684\u540e\u7eed\u8f6c\u6362\u4e2d\u8fc7\u6ee4\u5b83\u4eec\u3002\u8fd9\u65e8\u5728\u6709\u6761\u4ef6\u5730\u7528\u4e8e\u8fc7\u6ee4\u6389\u4e0e\u7279\u5b9a\u8c13\u8bcd\u5339\u914d\uff08\u6216\u4e0d\u5339\u914d\uff09\u7684\u8bb0\u5f55\u3002","title":"org.apache.kafka.connect.transforms.Filter"},{"location":"8/#orgapachekafkaconnecttransformsinsertheader","text":"\u4e3a\u6bcf\u6761\u8bb0\u5f55\u6dfb\u52a0\u6807\u9898\u3002","title":"org.apache.kafka.connect.transforms.InsertHeader"},{"location":"8/#header","text":"\u6807\u5934\u7684\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string Importance: high","title":"header"},{"location":"8/#valueliteral","text":"\u8981\u8bbe\u7f6e\u4e3a\u6240\u6709\u8bb0\u5f55\u4e0a\u7684\u6807\u9898\u503c\u7684\u6587\u5b57\u503c\u3002 Type: string Default: Valid Values: non-empty string Importance: high","title":"value.literal"},{"location":"8/#orgapachekafkaconnecttransformsdropheaders","text":"\u4ece\u6bcf\u6761\u8bb0\u5f55\u4e2d\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u6807\u5934\u3002","title":"org.apache.kafka.connect.transforms.DropHeaders"},{"location":"8/#header_1","text":"\u8981\u5220\u9664\u7684\u6807\u5934\u7684\u540d\u79f0\u3002 Type: list Default: Valid Values: non-empty list Importance: high","title":"header"},{"location":"8/#orgapachekafkaconnecttransformsheaderfrom","text":"\u5c06\u8bb0\u5f55\u7684\u952e/\u503c\u4e2d\u7684\u5b57\u6bb5\u79fb\u52a8\u6216\u590d\u5236\u5230\u8be5\u8bb0\u5f55\u7684\u6807\u9898\u4e2d\u3002 fields \u548c \u7684\u76f8\u5e94\u5143\u7d20 headers \u4e00\u8d77\u6807\u8bc6\u5b57\u6bb5\u4ee5\u53ca\u5e94\u5c06\u5176\u79fb\u52a8\u6216\u590d\u5236\u5230\u7684\u6807\u9898\u3002\u4f7f\u7528\u4e3a\u8bb0\u5f55\u952e ( org.apache.kafka.connect.transforms.HeaderFrom$Key ) \u6216\u503c ( org.apache.kafka.connect.transforms.HeaderFrom$Value ) \u8bbe\u8ba1\u7684\u5177\u4f53\u8f6c\u6362\u7c7b\u578b\u3002","title":"org.apache.kafka.connect.transforms.HeaderFrom"},{"location":"8/#fields_5","text":"\u8bb0\u5f55\u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u5176\u503c\u5c06\u88ab\u590d\u5236\u6216\u79fb\u52a8\u5230\u6807\u9898\u3002 Type: list Default: Valid Values: non-empty list Importance: high","title":"fields"},{"location":"8/#header_2","text":"\u6807\u5934\u540d\u79f0\u7684\u987a\u5e8f\u4e0e\u5b57\u6bb5\u914d\u7f6e\u5c5e\u6027\u4e2d\u5217\u51fa\u7684\u5b57\u6bb5\u540d\u79f0\u7684\u987a\u5e8f\u76f8\u540c\u3002 Type: list Default: Valid Values: non-empty list Importance: high","title":"header"},{"location":"8/#operation","text":"\u5982\u679c move \u8981\u5c06\u5b57\u6bb5\u79fb\u52a8\u5230\u6807\u9898\uff08\u4ece\u952e/\u503c\u4e2d\u5220\u9664\uff09\uff0c\u6216\u8005 copy \u5c06\u5b57\u6bb5\u590d\u5236\u5230\u6807\u9898\uff08\u4fdd\u7559\u5728\u952e/\u503c\u4e2d\uff09\u3002 Type: string Default: Valid Values: [move, copy] Importance: high","title":"operation"},{"location":"8/#_4","text":"\u8f6c\u6362\u53ef\u4ee5\u7528\u8c13\u8bcd\u914d\u7f6e\uff0c\u4ee5\u4fbf\u8f6c\u6362\u4ec5\u9002\u7528\u4e8e\u6ee1\u8db3\u67d0\u4e9b\u6761\u4ef6\u7684\u6d88\u606f\u3002\u7279\u522b\u662f\uff0c\u5f53\u4e0e \u8fc7\u6ee4\u5668 \u8f6c\u6362\u8c13\u8bcd\u76f8\u7ed3\u5408\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u62e9\u6027\u5730\u8fc7\u6ee4\u67d0\u4e9b\u6d88\u606f\u3002 \u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e86\u8c13\u8bcd\u3002 predicates -\u5e94\u7528\u4e8e\u67d0\u4e9b\u8f6c\u6362\u7684\u8c13\u8bcd\u7684\u522b\u540d\u96c6\u3002 predicates.$alias.type -\u8c13\u8bcd\u7684\u5b8c\u5168\u5408\u683c\u7684\u7c7b\u540d\u3002 predicates.$alias.$predicateSpecificConfig -\u8c13\u8bcd\u7684\u914d\u7f6e\u5c5e\u6027\u3002 \u6240\u6709\u8f6c\u6362\u90fd\u5177\u6709\u9690\u5f0f\u914d\u7f6e\u5c5e\u6027 predicate \u548c negate \u3002\u901a\u8fc7\u5c06\u8f6c\u6362\u7684 predicate \u914d\u7f6e\u8bbe\u7f6e\u4e3a\u8c13\u8bcd\u7684\u522b\u540d\uff0c\u8c13\u8bcd\u4e0e\u8f6c\u6362\u76f8\u5173\u8054\u3002\u53ef\u4ee5\u4f7f\u7528 negate \u914d\u7f6e\u5c5e\u6027\u53cd\u8f6c\u8c13\u8bcd\u7684\u503c\u3002 \u4f8b\u5982\uff0c\u5047\u8bbe\u60a8\u6709\u4e00\u4e2a\u6e90\u8fde\u63a5\u5668\uff0c\u53ef\u4ee5\u751f\u6210\u8bb8\u591a\u4e0d\u540c\u4e3b\u9898\u7684\u6d88\u606f\uff0c\u5e76\u4e14\u60a8\u60f3\u8981\uff1a \u5b8c\u5168\u8fc7\u6ee4\u6389\u201cfoo\u201d\u4e3b\u9898\u4e2d\u7684\u6d88\u606f \u5c06\u5b57\u6bb5\u540d\u79f0\u4e3a\u201cother_field\u201d\u7684ExtractField\u8f6c\u6362\u5e94\u7528\u4e8e \u9664 \u4e3b\u9898\u201cbar\u201d\u4ee5\u5916\u7684\u6240\u6709\u4e3b\u9898\u4e2d\u7684\u8bb0\u5f55 \u8981\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u8fc7\u6ee4\u6389\u201cfoo\u201d\u4e3b\u9898\u7684\u8bb0\u5f55\u3002\u8fc7\u6ee4\u5668\u8f6c\u6362\u5c06\u8bb0\u5f55\u4ece\u8fdb\u4e00\u6b65\u5904\u7406\u4e2d\u5220\u9664\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528TopicNameMatches\u8c13\u8bcd\u4ec5\u5c06\u8f6c\u6362\u5e94\u7528\u4e8e\u4e0e\u7279\u5b9a\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u4e3b\u9898\u4e2d\u7684\u8bb0\u5f55\u3002TopicNameMatches\u7684\u552f\u4e00\u914d\u7f6e\u5c5e\u6027\u662f pattern \uff0c\u5b83\u662f\u4e0e\u4e3b\u9898\u540d\u79f0\u5339\u914d\u7684Java\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u914d\u7f6e\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a transforms=Filter transforms.Filter.type=org.apache.kafka.connect.transforms.Filter transforms.Filter.predicate=IsFoo predicates=IsFoo predicates.IsFoo.type=org.apache.kafka.connect.transforms.predicates.TopicNameMatches predicates.IsFoo.pattern=foo \u63a5\u4e0b\u6765\uff0c\u4ec5\u5f53\u8bb0\u5f55\u7684\u4e3b\u9898\u540d\u79f0\u4e0d\u662f\u201cbar\u201d\u65f6\uff0c\u6211\u4eec\u624d\u9700\u8981\u5e94\u7528ExtractField\u3002\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528 TopicNameMatches\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5c06\u8f6c\u6362\u5e94\u7528\u4e8e\u5339\u914d\u7684\u4e3b\u9898\u540d\u79f0\uff0c\u800c\u4e0d\u662f\u4e0d \u5339\u914d \u7684\u4e3b\u9898\u540d\u79f0\u3002\u8f6c\u6362\u7684\u9690\u5f0f negate \u914d\u7f6e\u5c5e\u6027\u5141\u8bb8\u6211\u4eec\u53cd\u8f6c\u8c13\u8bcd\u5339\u914d\u7684\u8bb0\u5f55\u96c6\u3002\u5c06\u5176\u914d\u7f6e\u6dfb\u52a0\u5230\u524d\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5f97\u5230\uff1a transforms=Filter,Extract transforms.Filter.type=org.apache.kafka.connect.transforms.Filter transforms.Filter.predicate=IsFoo transforms.Extract.type=org.apache.kafka.connect.transforms.ExtractField$Key transforms.Extract.field=other_field transforms.Extract.predicate=IsBar transforms.Extract.negate=true predicates=IsFoo,IsBar predicates.IsFoo.type=org.apache.kafka.connect.transforms.predicates.TopicNameMatches predicates.IsFoo.pattern=foo predicates.IsBar.type=org.apache.kafka.connect.transforms.predicates.TopicNameMatches predicates.IsBar.pattern=bar Kafka Connect \u5305\u62ec\u4ee5\u4e0b\u8c13\u8bcd\uff1a TopicNameMatches - \u5339\u914d\u4e3b\u9898\u4e2d\u540d\u79f0\u4e0e\u7279\u5b9a Java \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u8bb0\u5f55\u3002 HasHeaderKey - \u5339\u914d\u5177\u6709\u7ed9\u5b9a\u952e\u7684\u6807\u5934\u7684\u8bb0\u5f55\u3002 RecordIsTombstone - \u5339\u914d\u5893\u7891\u8bb0\u5f55\uff0c\u5373\u5177\u6709\u7a7a\u503c\u7684\u8bb0\u5f55\u3002 \u4e0b\u9762\u5217\u51fa\u4e86\u5982\u4f55\u914d\u7f6e\u6bcf\u4e2a\u8c13\u8bcd\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a","title":"\u8c13\u8bcd"},{"location":"8/#orgapachekafkaconnecttransformspredicateshasheaderkey","text":"\u4e00\u4e2a\u8c13\u8bcd\uff0c\u5bf9\u4e8e\u81f3\u5c11\u5177\u6709\u4e00\u4e2a\u5177\u6709\u914d\u7f6e\u540d\u79f0\u7684\u6807\u5934\u7684\u8bb0\u5f55\u4e3a\u771f\u3002","title":"org.apache.kafka.connect.transforms.predicates.HasHeaderKey"},{"location":"8/#name","text":"\u6807\u5934\u540d\u79f0\u3002 Type: string Default: Valid Values: non-empty string Importance: medium","title":"name"},{"location":"8/#orgapachekafkaconnecttransformspredicatesrecordistombstone","text":"\u5bf9\u4e8e\u903b\u8f91\u5220\u9664\uff08\u5373\u5177\u6709\u7a7a\u503c\uff09\u7684\u8bb0\u5f55\u4e3a\u771f\u7684\u8c13\u8bcd\u3002","title":"org.apache.kafka.connect.transforms.predicates.RecordIsTombstone"},{"location":"8/#orgapachekafkaconnecttransformspredicatestopicnamematches","text":"\u5bf9\u4e8e\u4e3b\u9898\u540d\u79f0\u4e0e\u914d\u7f6e\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u8bb0\u5f55\u4e3a true \u7684\u8c13\u8bcd\u3002","title":"org.apache.kafka.connect.transforms.predicates.TopicNameMatches"},{"location":"8/#pattern","text":"\u7528\u4e8e\u5339\u914d\u8bb0\u5f55\u4e3b\u9898\u540d\u79f0\u7684 Java \u6b63\u5219\u8868\u8fbe\u5f0f\u3002 Type: string Default: Valid Values: \u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u6709\u6548\u7684\u6b63\u5219\u8868\u8fbe\u5f0f Importance: medium","title":"pattern"},{"location":"8/#rest-api","text":"\u7531\u4e8e Kafka Connect \u65e8\u5728\u4f5c\u4e3a\u670d\u52a1\u8fd0\u884c\uff0c\u56e0\u6b64\u5b83\u8fd8\u63d0\u4f9b\u4e86\u7528\u4e8e\u7ba1\u7406\u8fde\u63a5\u5668\u7684 REST API\u3002\u6b64 REST API \u53ef\u5728\u72ec\u7acb\u6a21\u5f0f\u548c\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\u4f7f\u7528\u3002\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u9009\u9879\u914d\u7f6e REST API \u670d\u52a1\u5668 listeners \u3002\u8be5\u5b57\u6bb5\u5e94\u5305\u542b\u4ee5\u4e0b\u683c\u5f0f\u7684\u4fa6\u542c\u5668\u5217\u8868\uff1a protocol://host:port,protocol2://host2:port2 \u3002\u76ee\u524d\u652f\u6301\u7684\u534f\u8bae\u6709 http \u548c https \u3002\u4f8b\u5982\uff1a listeners=http://localhost:8080,https://localhost:8443 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a listeners \uff0cREST\u670d\u52a1\u5668\u4f7f\u7528HTTP\u534f\u8bae\u5728\u7aef\u53e38083\u4e0a\u8fd0\u884c\u3002\u4f7f\u7528HTTPS\u65f6\uff0c\u914d\u7f6e\u5fc5\u987b\u5305\u62ecSSL\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u5c06\u4f7f\u7528 ssl.* \u8bbe\u7f6e\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528REST API\u4e0e\u8fde\u63a5\u5230Kafka\u7ecf\u7eaa\u4eba\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u53ef\u4ee5\u524d\u7f00\u4e3a listeners.https \u3002\u4f7f\u7528\u524d\u7f00\u65f6\uff0c\u5c06\u4ec5\u4f7f\u7528\u524d\u7f00\u9009\u9879\uff0c\u4e0d\u5e26\u524d\u7f00\u7684 ssl.* \u9009\u9879\u5c06\u88ab\u5ffd\u7565\u3002\u4ee5\u4e0b\u5b57\u6bb5\u53ef\u7528\u4e8e\u4e3aREST API\u914d\u7f6eHTTPS\uff1a ssl.keystore.location ssl.keystore.password ssl.keystore.type ssl.key.password ssl.truststore.location ssl.truststore.password ssl.truststore.type ssl.enabled.protocols ssl.provider ssl.protocol ssl.cipher.suites ssl.keymanager.algorithm ssl.secure.random.implementation ssl.trustmanager.algorithm ssl.endpoint.identification.algorithm ssl.client.auth REST API\u4e0d\u4ec5\u88ab\u7528\u6237\u7528\u4e8e\u76d1\u63a7/\u7ba1\u7406Kafka Connect\u3002\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\uff0c\u5b83\u8fd8\u7528\u4e8eKafka Connect\u8de8\u96c6\u7fa4\u901a\u4fe1\u3002\u5728\u5173\u6ce8\u8282\u70b9REST API\u4e0a\u6536\u5230\u7684\u4e00\u4e9b\u8bf7\u6c42\u5c06\u8f6c\u53d1\u5230\u9886\u5bfc\u8282\u70b9REST API\u3002\u5982\u679c\u7ed9\u5b9a\u4e3b\u673a\u53ef\u8bbf\u95ee\u7684URI\u4e0e\u5b83\u76d1\u542c\u7684URI\u4e0d\u540c\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u9009\u9879 rest.advertised.host.name \u3001 rest.advertised.port \u548c rest.advertised.listener \u6765\u66f4\u6539\u8ffd\u968f\u8005\u8282\u70b9\u5c06\u7528\u4e8e\u4e0e\u9886\u5bfc\u8005\u8fde\u63a5\u7684URI\u3002\u5f53\u540c\u65f6\u4f7f\u7528HTTP\u548cHTTPS\u4fa6\u542c\u5668\u65f6\uff0c rest.advertised.listener \u9009\u9879\u8fd8\u53ef\u7528\u4e8e\u5b9a\u4e49\u54ea\u4e2a\u4fa6\u542c\u5668\u5c06\u7528\u4e8e\u8de8\u96c6\u7fa4\u901a\u4fe1\u3002\u5f53\u4f7f\u7528HTTPS\u8fdb\u884c\u8282\u70b9\u4e4b\u95f4\u7684\u901a\u4fe1\u65f6\uff0c\u5c06\u4f7f\u7528\u76f8\u540c\u7684 ssl.* \u6216 listeners.https \u9009\u9879\u6765\u914d\u7f6eHTTPS\u5ba2\u6237\u7aef\u3002 \u4ee5\u4e0b\u662f\u5f53\u524d\u652f\u6301\u7684 REST API \u7aef\u70b9\uff1a GET /connectors - \u8fd4\u56de\u6d3b\u52a8\u8fde\u63a5\u5668\u7684\u5217\u8868 POST /connectors - \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u5668\uff1b\u8bf7\u6c42\u6b63\u6587\u5e94\u8be5\u662f\u4e00\u4e2a JSON \u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u5b57\u7b26\u4e32 name \u5b57\u6bb5\u548c config \u5e26\u6709\u8fde\u63a5\u5668\u914d\u7f6e\u53c2\u6570\u7684\u5bf9\u8c61\u5b57\u6bb5 GET /connectors/{name} - \u83b7\u53d6\u6709\u5173\u7279\u5b9a\u8fde\u63a5\u5668\u7684\u4fe1\u606f GET /connectors/{name}/config - \u83b7\u53d6\u7279\u5b9a\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u53c2\u6570 PUT /connectors/{name}/config - \u66f4\u65b0\u7279\u5b9a\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u53c2\u6570 GET /connectors/{name}/status - \u83b7\u53d6\u8fde\u63a5\u5668\u7684\u5f53\u524d\u72b6\u6001\uff0c\u5305\u62ec\u5b83\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3001\u5931\u8d25\u3001\u6682\u505c\u7b49\uff0c\u5b83\u88ab\u5206\u914d\u7ed9\u54ea\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u5931\u8d25\u65f6\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u4ee5\u53ca\u5b83\u7684\u6240\u6709\u4efb\u52a1\u7684\u72b6\u6001 GET /connectors/{name}/tasks - \u83b7\u53d6\u8fde\u63a5\u5668\u5f53\u524d\u8fd0\u884c\u7684\u4efb\u52a1\u5217\u8868 GET /connectors/{name}/tasks/{taskid}/status - \u83b7\u53d6\u4efb\u52a1\u7684\u5f53\u524d\u72b6\u6001\uff0c\u5305\u62ec\u5b83\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3001\u5931\u8d25\u3001\u6682\u505c\u7b49\uff0c\u5b83\u88ab\u5206\u914d\u7ed9\u54ea\u4e2aworker\uff0c\u4ee5\u53ca\u5931\u8d25\u65f6\u7684\u9519\u8bef\u4fe1\u606f PUT /connectors/{name}/pause - \u6682\u505c\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\uff0c\u8fd9\u4f1a\u505c\u6b62\u6d88\u606f\u5904\u7406\uff0c\u76f4\u5230\u8fde\u63a5\u5668\u6062\u590d\u4e3a\u6b62\u3002\u5176\u4efb\u52a1\u5360\u7528\u7684\u4efb\u4f55\u8d44\u6e90\u90fd\u4f1a\u4fdd\u7559\u5206\u914d\u72b6\u6001\uff0c\u8fd9\u4f7f\u5f97\u8fde\u63a5\u5668\u53ef\u4ee5\u5728\u6062\u590d\u540e\u5feb\u901f\u5f00\u59cb\u5904\u7406\u6570\u636e\u3002 PUT /connectors/{name}/stop - \u505c\u6b62\u8fde\u63a5\u5668\u5e76\u5173\u95ed\u5176\u4efb\u52a1\uff0c\u53d6\u6d88\u5206\u914d\u5176\u4efb\u52a1\u5360\u7528\u7684\u4efb\u4f55\u8d44\u6e90\u3002\u4ece\u8d44\u6e90\u4f7f\u7528\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u6bd4\u6682\u505c\u8fde\u63a5\u5668\u66f4\u6709\u6548\uff0c\u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8fde\u63a5\u5668\u6062\u590d\u540e\u9700\u8981\u66f4\u957f\u65f6\u95f4\u624d\u80fd\u5f00\u59cb\u5904\u7406\u6570\u636e\u3002 PUT /connectors/{name}/resume - \u6062\u590d\u6682\u505c\u6216\u505c\u6b62\u7684\u8fde\u63a5\u5668\uff08\u6216\u8005\u5982\u679c\u8fde\u63a5\u5668\u672a\u6682\u505c\u6216\u505c\u6b62\u5219\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\uff09 POST /connectors/{name}/restart?includeTasks=<true|false>&onlyFailed=<true|false> - \u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\u5b9e\u4f8b\u3002 \u201cincludeTasks\u201d\u53c2\u6570\u6307\u5b9a\u662f\u5426\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u5b9e\u4f8b\u548c\u4efb\u52a1\u5b9e\u4f8b\uff08\u201cincludeTasks=true\u201d\uff09\u6216\u4ec5\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u5b9e\u4f8b\uff08\u201cincludeTasks=false\u201d\uff09\uff0c\u9ed8\u8ba4\u503c\uff08\u201cfalse\u201d\uff09\u4fdd\u7559\u4e0e\u65e9\u671f\u7248\u672c\u76f8\u540c\u7684\u884c\u4e3a\u3002 \u201conlyFailed\u201d\u53c2\u6570\u6307\u5b9a\u662f\u4ec5\u91cd\u65b0\u542f\u52a8\u5177\u6709 FAILED \u72b6\u6001\u7684\u5b9e\u4f8b\uff08\u201conlyFailed=true\u201d\uff09\u8fd8\u662f\u91cd\u65b0\u542f\u52a8\u6240\u6709\u5b9e\u4f8b\uff08\u201conlyFailed=false\u201d\uff09\uff0c\u9ed8\u8ba4\u503c\uff08\u201cfalse\u201d\uff09\u4fdd\u7559\u4e0e\u65e9\u671f\u7248\u672c\u76f8\u540c\u7684\u884c\u4e3a\u3002 POST /connectors/{name}/tasks/{taskId}/restart - \u91cd\u65b0\u542f\u52a8\u5355\u4e2a\u4efb\u52a1\uff08\u901a\u5e38\u662f\u56e0\u4e3a\u5b83\u5931\u8d25\u4e86\uff09 DELETE /connectors/{name} - \u5220\u9664\u8fde\u63a5\u5668\uff0c\u505c\u6b62\u6240\u6709\u4efb\u52a1\u5e76\u5220\u9664\u5176\u914d\u7f6e GET /connectors/{name}/topics - \u83b7\u53d6\u81ea\u521b\u5efa\u8fde\u63a5\u5668\u6216\u53d1\u51fa\u91cd\u7f6e\u5176\u6d3b\u52a8\u4e3b\u9898\u96c6\u7684\u8bf7\u6c42\u4ee5\u6765\u7279\u5b9a\u8fde\u63a5\u5668\u6b63\u5728\u4f7f\u7528\u7684\u4e3b\u9898\u96c6 PUT /connectors/{name}/topics/reset - \u53d1\u9001\u8bf7\u6c42\u4ee5\u6e05\u7a7a\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6 GET /connectors/{name}/offsets - \u83b7\u53d6\u8fde\u63a5\u5668\u7684\u5f53\u524d\u504f\u79fb\uff08\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 KIP-875 \uff09 FileStreamSourceConnector\u7684\u793a\u4f8b\u8bf7\u6c42\u4e3b\u4f53\uff1a { \"offsets\": [ { \"partition\": { \"filename\": \"test.txt\" }, \"offset\": { \"position\": 30 } } ] } FileStreamSinkConnector\u7684\u8bf7\u6c42\u4e3b\u4f53\u793a\u4f8b\uff1a { \"offsets\": [ { \"partition\": { \"kafka_topic\": \"test\", \"kafka_partition\": 0 }, \"offset\": { \"kafka_offset\": 5 } }, { \"partition\": { \"kafka_topic\": \"test\", \"kafka_partition\": 1 }, \"offset\": null } ] } \u201c\u504f\u79fb\u201d\u5b57\u6bb5\u53ef\u80fd\u4e3a\u7a7a\uff0c\u4ee5\u91cd\u7f6e\u7279\u5b9a\u5206\u533a\u7684\u504f\u79fb\u91cf\uff08\u9002\u7528\u4e8e\u6e90\u8fde\u63a5\u5668\u548c\u63a5\u6536\u5668\u8fde\u63a5\u5668\uff09\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u6e90\u8fde\u63a5\u5668\u7684\u60c5\u51b5\u4e0b\uff0c\u8bf7\u6c42\u4e3b\u4f53\u683c\u5f0f\u53d6\u51b3\u4e8e\u8fde\u63a5\u5668\u7684\u5b9e\u73b0\uff0c\u800c\u6240\u6709\u63a5\u6536\u5668\u8fde\u63a5\u5668\u90fd\u6709\u901a\u7528\u683c\u5f0f\u3002 Kafka Connect \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a REST API\uff0c\u7528\u4e8e\u83b7\u53d6\u6709\u5173\u8fde\u63a5\u5668\u63d2\u4ef6\u7684\u4fe1\u606f\uff1a GET /connector-plugins - \u8fd4\u56de Kafka Connect \u96c6\u7fa4\u4e2d\u5b89\u88c5\u7684\u8fde\u63a5\u5668\u63d2\u4ef6\u5217\u8868\u3002\u8bf7\u6ce8\u610f\uff0cAPI \u4ec5\u68c0\u67e5\u5904\u7406\u8bf7\u6c42\u7684\u5de5\u4f5c\u7ebf\u7a0b\u4e0a\u7684\u8fde\u63a5\u5668\uff0c\u8fd9\u610f\u5473\u7740\u60a8\u53ef\u80fd\u4f1a\u770b\u5230\u4e0d\u4e00\u81f4\u7684\u7ed3\u679c\uff0c\u5c24\u5176\u662f\u5728\u6eda\u52a8\u5347\u7ea7\u671f\u95f4\uff0c\u5982\u679c\u60a8\u6dfb\u52a0\u65b0\u7684\u8fde\u63a5\u5668 jar PUT /connector-plugins/{connector-type}/config/validate - \u6839\u636e\u914d\u7f6e\u5b9a\u4e49\u9a8c\u8bc1\u63d0\u4f9b\u7684\u914d\u7f6e\u503c\u3002\u6b64 API \u6267\u884c\u6bcf\u4e2a\u914d\u7f6e\u9a8c\u8bc1\uff0c\u5728\u9a8c\u8bc1\u671f\u95f4\u8fd4\u56de\u5efa\u8bae\u503c\u548c\u9519\u8bef\u6d88\u606f\u3002 \u4ee5\u4e0b\u662f\u9876\u7ea7\uff08\u6839\uff09\u7aef\u70b9\u652f\u6301\u7684 REST \u8bf7\u6c42\uff1a GET / - \u8fd4\u56de\u6709\u5173 Kafka Connect \u96c6\u7fa4\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u4f8b\u5982\u670d\u52a1 REST \u8bf7\u6c42\u7684 Connect Worker \u7684\u7248\u672c\uff08\u5305\u62ec\u6e90\u4ee3\u7801\u7684 git commit ID\uff09\u4ee5\u53ca\u8fde\u63a5\u5230\u7684 Kafka \u96c6\u7fa4 ID\u3002 \u6709\u5173 REST API \u7684\u5b8c\u6574\u89c4\u8303\uff0c\u8bf7\u53c2\u9605 OpenAPI \u6587\u6863","title":"REST API"},{"location":"8/#connect","text":"Kafka Connect \u63d0\u4f9b\u9519\u8bef\u62a5\u544a\u6765\u5904\u7406\u5404\u4e2a\u5904\u7406\u9636\u6bb5\u9047\u5230\u7684\u9519\u8bef\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6c\u6362\u671f\u95f4\u6216\u8f6c\u6362\u4e2d\u9047\u5230\u7684\u4efb\u4f55\u9519\u8bef\u90fd\u4f1a\u5bfc\u81f4\u8fde\u63a5\u5668\u5931\u8d25\u3002\u6bcf\u4e2a\u8fde\u63a5\u5668\u914d\u7f6e\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8df3\u8fc7\u6b64\u7c7b\u9519\u8bef\u3001\u9009\u62e9\u6027\u5730\u5c06\u6bcf\u4e2a\u9519\u8bef\u4ee5\u53ca\u5931\u8d25\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u6709\u95ee\u9898\u7684\u8bb0\u5f55\uff08\u5177\u6709\u5404\u79cd\u8be6\u7ec6\u7ea7\u522b\uff09\u5199\u5165 Connect \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6765\u5bb9\u5fcd\u6b64\u7c7b\u9519\u8bef\u3002\u5f53\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5904\u7406\u4ece\u5176 Kafka \u4e3b\u9898\u6d88\u8017\u7684\u6d88\u606f\u65f6\uff0c\u8fd9\u4e9b\u673a\u5236\u8fd8\u4f1a\u6355\u83b7\u9519\u8bef\uff0c\u5e76\u4e14\u6240\u6709\u9519\u8bef\u90fd\u53ef\u4ee5\u5199\u5165\u53ef\u914d\u7f6e\u7684\u201c\u6b7b\u4fe1\u961f\u5217\u201d(DLQ) Kafka \u4e3b\u9898\u3002 \u8981\u5c06\u8fde\u63a5\u5668\u7684\u8f6c\u6362\u5668\u3001\u8f6c\u6362\u6216\u63a5\u6536\u5668\u8fde\u63a5\u5668\u672c\u8eab\u5185\u7684\u9519\u8bef\u62a5\u544a\u5230\u65e5\u5fd7\uff0c\u8bf7 errors.log.enable=true \u5728\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u8bbe\u7f6e\u4ee5\u8bb0\u5f55\u6bcf\u4e2a\u9519\u8bef\u548c\u95ee\u9898\u8bb0\u5f55\u7684\u4e3b\u9898\u3001\u5206\u533a\u548c\u504f\u79fb\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u51fa\u4e8e\u5176\u4ed6\u8c03\u8bd5\u76ee\u7684\uff0c\u8bbe\u7f6e errors.log.include.messages=true \u4e3a\u8fd8\u5c06\u95ee\u9898\u8bb0\u5f55\u952e\u3001\u503c\u548c\u6807\u5934\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\uff08\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ef\u80fd\u4f1a\u8bb0\u5f55\u654f\u611f\u4fe1\u606f\uff09\u3002 \u8981\u5c06\u8fde\u63a5\u5668\u7684\u8f6c\u6362\u5668\u3001\u8f6c\u6362\u6216\u63a5\u6536\u5668\u8fde\u63a5\u5668\u672c\u8eab\u5185\u7684\u9519\u8bef\u62a5\u544a\u7ed9\u6b7b\u4fe1\u961f\u5217\u4e3b\u9898\uff0c\u8bf7\u8bbe\u7f6e errors.deadletterqueue.topic.name \u548c\uff08\u53ef\u9009\uff09 errors.deadletterqueue.context.headers.enable=true \u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fde\u63a5\u5668\u5728\u51fa\u73b0\u9519\u8bef\u6216\u5f02\u5e38\u65f6\u7acb\u5373\u8868\u73b0\u51fa\u201c\u5feb\u901f\u5931\u8d25\u201d\u884c\u4e3a\u3002\u8fd9\u76f8\u5f53\u4e8e\u5c06\u4ee5\u4e0b\u914d\u7f6e\u5c5e\u6027\u53ca\u5176\u9ed8\u8ba4\u503c\u6dfb\u52a0\u5230\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\uff1a # disable retries on failure errors.retry.timeout=0 # do not log the error and their contexts errors.log.enable=false # do not record errors in a dead letter queue topic errors.deadletterqueue.topic.name= # Fail on first error errors.tolerance=none \u53ef\u4ee5\u66f4\u6539\u8fd9\u4e9b\u548c\u5176\u4ed6\u76f8\u5173\u7684\u8fde\u63a5\u5668\u914d\u7f6e\u5c5e\u6027\u4ee5\u63d0\u4f9b\u4e0d\u540c\u7684\u884c\u4e3a\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u4ee5\u4e0b\u914d\u7f6e\u5c5e\u6027\u6dfb\u52a0\u5230\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\uff0c\u4ee5\u901a\u8fc7\u591a\u6b21\u91cd\u8bd5\u8bbe\u7f6e\u9519\u8bef\u5904\u7406\u3001\u8bb0\u5f55\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u548c Kafka \u4e3b\u9898 my-connector-errors \uff0c\u5e76\u901a\u8fc7\u62a5\u544a\u9519\u8bef\u800c\u4e0d\u662f\u4f7f\u8fde\u63a5\u5668\u4efb\u52a1\u5931\u8d25\u6765\u5bb9\u5fcd\u6240\u6709\u9519\u8bef\uff1a # retry for at most 10 minutes times waiting up to 30 seconds between consecutive failures errors.retry.timeout=600000 errors.retry.delay.max.ms=30000 # log error context along with application logs, but do not include configs and messages errors.log.enable=true errors.log.include.messages=false # produce error context into the Kafka topic errors.deadletterqueue.topic.name=my-connector-errors # Tolerate all errors. errors.tolerance=all","title":"Connect \u4e2d\u7684\u9519\u8bef\u62a5\u544a"},{"location":"8/#exactlyoncesupport","text":"Kafka Connect \u80fd\u591f\u4e3a\u63a5\u6536\u5668\u8fde\u63a5\u5668\uff08\u4ece\u7248\u672c 0.11.0 \u5f00\u59cb\uff09\u548c\u6e90\u8fde\u63a5\u5668\uff08\u4ece\u7248\u672c 3.3.0 \u5f00\u59cb\uff09\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002\u8bf7\u6ce8\u610f\uff0c \u5bf9\u4e00\u6b21\u8bed\u4e49\u7684\u652f\u6301\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u60a8\u8fd0\u884c\u7684\u8fde\u63a5\u5668\u7c7b\u578b\u3002 \u5373\u4f7f\u60a8\u5728\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u7684\u914d\u7f6e\u4e2d\u8bbe\u7f6e\u4e86\u6240\u6709\u6b63\u786e\u7684\u5de5\u4f5c\u7ebf\u7a0b\u5c5e\u6027\uff0c\u5982\u679c\u8fde\u63a5\u5668\u672a\u8bbe\u8ba1\u4e3a\u6216\u65e0\u6cd5\u5229\u7528 Kafka Connect \u6846\u67b6\u7684\u529f\u80fd\uff0c\u5219\u53ef\u80fd\u65e0\u6cd5\u5b9e\u73b0\u7cbe\u786e\u4e00\u6b21\u3002","title":"exactly.once.support"},{"location":"8/#_5","text":"\u5982\u679c\u63a5\u6536\u5668\u8fde\u63a5\u5668\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u8bed\u4e49\uff0c\u8981\u5728 Connect \u5de5\u4f5c\u7ebf\u7a0b\u7ea7\u522b\u542f\u7528\u7cbe\u786e\u4e00\u6b21\uff0c\u60a8\u5fc5\u987b\u786e\u4fdd\u5176\u4f7f\u7528\u8005\u7ec4\u914d\u7f6e\u4e3a\u5ffd\u7565\u4e2d\u6b62\u4e8b\u52a1\u4e2d\u7684\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u5de5\u4f5c\u7a0b\u5e8f\u5c5e\u6027\u8bbe\u7f6e consumer.isolation.level \u4e3a\u6765\u5b9e\u73b0\u6b64 read_committed \u76ee\u7684\uff0c\u6216\u8005\uff0c\u5982\u679c\u8fd0\u884c\u652f\u6301\u5b83\u7684 Kafka Connect \u7248\u672c\uff0c\u5219\u4f7f\u7528 \u8fde\u63a5\u5668\u5ba2\u6237\u7aef\u914d\u7f6e\u8986\u76d6\u7b56\u7565 \uff0c\u5141\u8bb8\u5728\u5404\u4e2a\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d consumer.override.isolation.level \u5c06\u8be5\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u3002 read_committed \u6ca1\u6709\u989d\u5916\u7684 ACL \u8981\u6c42\u3002","title":"\u6c34\u69fd\u8fde\u63a5\u5668"},{"location":"8/#_6","text":"\u5982\u679c\u6e90\u8fde\u63a5\u5668\u652f\u6301\u4e00\u6b21\u6027\u8bed\u4e49\uff0c\u5219\u5fc5\u987b\u914d\u7f6e Connect \u96c6\u7fa4\u4ee5\u542f\u7528\u5bf9\u4e00\u6b21\u6027\u6e90\u8fde\u63a5\u5668\u7684\u6846\u67b6\u7ea7\u652f\u6301\u3002\u5982\u679c\u9488\u5bf9\u5b89\u5168\u7684 Kafka \u96c6\u7fa4\u8fd0\u884c\uff0c\u53ef\u80fd\u9700\u8981\u989d\u5916\u7684 ACL\u3002\u8bf7\u6ce8\u610f\uff0c\u5bf9\u6e90\u8fde\u63a5\u5668\u7684\u4e00\u6b21\u6027\u652f\u6301\u76ee\u524d\u4ec5\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\u53ef\u7528\uff1b\u72ec\u7acb\u7684 Connect \u5de5\u4f5c\u7ebf\u7a0b\u65e0\u6cd5\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002","title":"\u6e90\u8fde\u63a5\u5668"},{"location":"8/#_7","text":"\u5bf9\u4e8e\u65b0\u7684 Connect \u96c6\u7fa4\uff0c\u8bf7\u5728\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u7684\u5de5\u4f5c\u7a0b\u5e8f\u914d\u7f6e\u4e2d\u5c06\u8be5 exactly.once.source.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u3002 enabled \u5bf9\u4e8e\u73b0\u6709\u96c6\u7fa4\uff0c\u9700\u8981\u8fdb\u884c\u4e24\u6b21\u6eda\u52a8\u5347\u7ea7\u3002\u5728\u7b2c\u4e00\u6b21\u5347\u7ea7\u671f\u95f4\uff0c\u8be5 exactly.once.source.support \u5c5e\u6027\u5e94\u8bbe\u7f6e\u4e3a preparing \uff0c\u5728\u7b2c\u4e8c\u6b21\u5347\u7ea7\u671f\u95f4\uff0c\u5e94\u8bbe\u7f6e\u4e3a enabled \u3002","title":"\u5de5\u4f5c\u4eba\u5458\u914d\u7f6e"},{"location":"8/#acl","text":"\u542f\u7528\u4e00\u6b21\u6027\u6e90\u652f\u6301\u540e\uff0c\u6bcf\u4e2a Connect \u5de5\u4f5c\u7ebf\u7a0b\u7684\u4e3b\u4f53\u5c06\u9700\u8981\u4ee5\u4e0b ACL\uff1a OPERATION RESOURCE TYPE RESOURCE NAME NOTE Write TransactionalId connect-cluster-${groupId} , where ${groupId} is the group.id of the cluster Describe TransactionalId connect-cluster-${groupId} , where ${groupId} is the group.id of the cluster IdempotentWrite Cluster ID of the Kafka cluster that hosts the worker's config topic The IdempotentWrite ACL has been deprecated as of 2.8 and will only be necessary for Connect clusters running on pre-2.8 Kafka clusters \u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u4e3b\u4f53\u5c06\u9700\u8981\u4ee5\u4e0b ACL\uff1a OPERATION RESOURCE TYPE RESOURCE NAME NOTE Write TransactionalId ${groupId}-${connector}-${taskId} , for each task that the connector will create, where ${groupId} is the group.id of the Connect cluster, ${connector} is the name of the connector, and ${taskId} is the ID of the task (starting from zero) A wildcard prefix of ${groupId}-${connector}* can be used for convenience if there is no risk of conflict with other transactional IDs or if conflicts are acceptable to the user. Describe TransactionalId ${groupId}-${connector}-${taskId} , for each task that the connector will create, where ${groupId} is the group.id of the Connect cluster, ${connector} is the name of the connector, and ${taskId} is the ID of the task (starting from zero) A wildcard prefix of ${groupId}-${connector}* can be used for convenience if there is no risk of conflict with other transactional IDs or if conflicts are acceptable to the user. Write Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Read Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Describe Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Create Topic Offsets topic used by the connector, which is either the value of the offsets.storage.topic property in the connector\u2019s configuration if provided, or the value of the offsets.storage.topic property in the worker\u2019s configuration if not. Only necessary if the offsets topic for the connector does not exist yet IdempotentWrite Cluster ID of the Kafka cluster that the source connector writes to The IdempotentWrite ACL has been deprecated as of 2.8 and will only be necessary for Connect clusters running on pre-2.8 Kafka clusters","title":"ACL\u8981\u6c42"},{"location":"8/#_8","text":"\u63d2\u4ef6\u53d1\u73b0\u662fConnect\u5de5\u4f5c\u8005\u7528\u4e8e\u67e5\u627e\u63d2\u4ef6\u7c7b\u5e76\u4f7f\u5176\u5728\u8fde\u63a5\u5668\u4e2d\u914d\u7f6e\u548c\u8fd0\u884c\u7684\u7b56\u7565\u7684\u540d\u79f0\u3002\u8fd9\u7531 plugin.discovery worker\u914d\u7f6e\u63a7\u5236\uff0c\u5e76\u5bf9\u5de5\u4eba\u542f\u52a8\u65f6\u95f4\u6709\u91cd\u5927\u5f71\u54cd\u3002 service_load \u662f\u6700\u5feb\u7684\u7b56\u7565\uff0c\u4f46\u5728\u5c06\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e3a service_load \u4e4b\u524d\uff0c\u5e94\u6ce8\u610f\u9a8c\u8bc1\u63d2\u4ef6\u662f\u5426\u517c\u5bb9\u3002 \u57283.6\u7248\u672c\u4e4b\u524d\uff0c\u6b64\u7b56\u7565\u662f\u4e0d\u53ef\u914d\u7f6e\u7684\uff0c\u5176\u884c\u4e3a\u7c7b\u4f3c\u4e8e\u4e0e\u6240\u6709\u63d2\u4ef6\u517c\u5bb9 only_scan \u6a21\u5f0f\u3002\u5bf9\u4e8e3.6\u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6b64\u6a21\u5f0f\u9ed8\u8ba4\u4e3a hybrid_warn \uff0c\u5b83\u4e5f\u4e0e\u6240\u6709\u63d2\u4ef6\u517c\u5bb9\uff0c\u4f46\u4f1a\u8bb0\u5f55\u4e0e service_load \u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u7684\u8b66\u544a\u3002\u5982\u679c\u68c0\u6d4b\u5230\u4e0e service_load \u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\uff0c hybrid_fail \u7b56\u7565\u4f1a\u9519\u8bef\u5730\u963b\u6b62\u5de5\u4eba\uff0c\u5e76\u65ad\u8a00\u6240\u6709\u63d2\u4ef6\u90fd\u662f\u517c\u5bb9\u7684\u3002\u6700\u540e\uff0c service_load \u7b56\u7565\u7981\u7528\u6240\u6709\u5176\u4ed6\u6a21\u5f0f\u4e2d\u4f7f\u7528\u7684\u7f13\u6162\u9057\u7559\u626b\u63cf\u673a\u5236\uff0c\u800c\u662f\u4f7f\u7528\u66f4\u5feb\u7684 ServiceLoader \u673a\u5236\u3002\u4e0e\u8be5\u673a\u5236\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u3002","title":"\u63d2\u4ef6\u53d1\u73b0"},{"location":"8/#_9","text":"\u8981\u9a8c\u8bc1\u60a8\u7684\u6240\u6709\u63d2\u4ef6\u662f\u5426\u4e0e service_load \u517c\u5bb9\uff0c\u9996\u5148\u786e\u4fdd\u60a8\u4f7f\u7528\u7684\u662fKafka Connect 3.6\u6216\u66f4\u9ad8\u7248\u672c\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u68c0\u67e5\u4e4b\u4e00\uff1a \u4f7f\u7528\u9ed8\u8ba4\u7684 hybrid_warn \u548c\u4e3atheorg org.apache.kafka.connect \u5305\u542f\u7528\u7684WARN\u65e5\u5fd7\u542f\u52a8\u60a8\u7684\u5458\u5de5\u3002\u81f3\u5c11\u5e94\u6253\u5370\u4e00\u6761\u63d0\u53ca plugin.discovery \u914d\u7f6e\u7684\u8b66\u544a\u65e5\u5fd7\u6d88\u606f\u3002\u6b64\u65e5\u5fd7\u6d88\u606f\u5c06\u660e\u786e\u8868\u793a\u6240\u6709\u63d2\u4ef6\u90fd\u517c\u5bb9\uff0c\u6216\u5217\u51fa\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u3002 \u4f7f\u7528 hybrid_fail \u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u542f\u52a8\u60a8\u7684\u5458\u5de5\u3002\u5982\u679c\u6240\u6709\u63d2\u4ef6\u90fd\u517c\u5bb9\uff0c\u542f\u52a8\u5c06\u6210\u529f\u3002\u5982\u679c\u81f3\u5c11\u6709\u4e00\u4e2a\u63d2\u4ef6\u4e0d\u517c\u5bb9\uff0c\u5de5\u4eba\u5c06\u65e0\u6cd5\u542f\u52a8\uff0c\u6240\u6709\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u90fd\u5c06\u5217\u5728\u4f8b\u5916\u4e2d\u3002 \u5982\u679c\u9a8c\u8bc1\u6b65\u9aa4\u6210\u529f\uff0c\u90a3\u4e48\u60a8\u5f53\u524d\u5b89\u88c5\u7684\u63d2\u4ef6\u96c6\u662f\u517c\u5bb9\u7684\uff0c\u5c06 plugin.discovery \u914d\u7f6e\u66f4\u6539\u4e3a service_load \u5e94\u8be5\u662f\u5b89\u5168\u7684\u3002\u5982\u679c\u9a8c\u8bc1\u5931\u8d25\uff0c\u60a8\u65e0\u6cd5\u4f7f\u7528 service_load \u7b56\u7565\uff0c\u5e76\u5e94\u6ce8\u610f\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u5217\u8868\u3002\u5728\u4f7f\u7528 service_load \u7b56\u7565\u4e4b\u524d\uff0c\u5fc5\u987b\u89e3\u51b3\u6240\u6709\u63d2\u4ef6\u3002\u5efa\u8bae\u5728\u5b89\u88c5\u6216\u66f4\u6539\u63d2\u4ef6\u7248\u672c\u540e\u6267\u884c\u6b64\u9a8c\u8bc1\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6301\u7eed\u96c6\u6210\u73af\u5883\u4e2d\u81ea\u52a8\u5b8c\u6210\u9a8c\u8bc1\u3002","title":"\u9a8c\u8bc1\u63d2\u4ef6\u517c\u5bb9\u6027"},{"location":"8/#_10","text":"\u4f5c\u4e3aConnect\u7684\u8fd0\u8425\u5546\uff0c\u5982\u679c\u60a8\u53d1\u73b0\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\uff0c\u6709\u591a\u79cd\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3\u4e0d\u517c\u5bb9\u7684\u95ee\u9898\u3002\u5b83\u4eec\u4ece\u5927\u591a\u6570\u5230\u6700\u4e0d\u53d7\u6b22\u8fce\u90fd\u5728\u4e0b\u9762\u5217\u51fa\u3002 \u68c0\u67e5\u63d2\u4ef6\u63d0\u4f9b\u5546\u7684\u6700\u65b0\u7248\u672c\uff0c\u5982\u679c\u517c\u5bb9\uff0c\u8bf7\u5347\u7ea7\u3002 \u8054\u7cfb\u60a8\u7684\u63d2\u4ef6\u63d0\u4f9b\u5546\uff0c\u8981\u6c42\u4ed6\u4eec\u6309\u7167 \u6e90\u8fc1\u79fb\u8bf4\u660e \u8fc1\u79fb\u63d2\u4ef6\u4f7f\u5176\u517c\u5bb9\uff0c\u7136\u540e\u5347\u7ea7\u5230\u517c\u5bb9\u7248\u672c\u3002 \u4f7f\u7528\u968f\u9644\u7684\u8fc1\u79fb\u811a\u672c\u81ea\u884c\u8fc1\u79fb\u63d2\u4ef6\u5de5\u4ef6\u3002 \u8fc1\u79fb\u811a\u672c\u4f4d\u4e8eKafka\u5b89\u88c5\u7684 bin/connect-plugin-path.sh \u548c bin\\windows\\connect-plugin-path.bat \u4e2d\u3002\u8be5\u811a\u672c\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u6216\u4fee\u6539JAR\u6216\u8d44\u6e90\u6587\u4ef6\u6765\u8fc1\u79fb\u5df2\u5b89\u88c5\u5728Connect worker'splugin plugin.path \u4e0a\u7684\u4e0d\u517c\u5bb9\u63d2\u4ef6\u5de5\u4ef6\u3002\u8fd9\u4e0d\u9002\u5408\u4f7f\u7528\u4ee3\u7801\u7b7e\u540d\u7684\u73af\u5883\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u6539\u53d8\u5de5\u4ef6\uff0c\u4f7f\u5176\u65e0\u6cd5\u901a\u8fc7\u7b7e\u540d\u9a8c\u8bc1\u3002\u67e5\u770b --help \u7684\u5185\u7f6e\u5e2e\u52a9\u3002 \u8981\u6267\u884c\u8fc1\u79fb\uff0c\u9996\u5148\u4f7f\u7528 list \u5b50\u547d\u4ee4\u6765\u83b7\u53d6\u811a\u672c\u53ef\u7528\u7684\u63d2\u4ef6\u7684\u6982\u8ff0\u3002\u60a8\u5fc5\u987b\u544a\u8bc9\u811a\u672c\u5728\u54ea\u91cc\u53ef\u4ee5\u627e\u5230\u63d2\u4ef6\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u53ef\u91cd\u590d\u7684 --worker-config \u3001 --plugin-path \u548c --plugin-location \u53c2\u6570\u6765\u5b8c\u6210\u3002\u8be5\u811a\u672c\u5c06\u5ffd\u7565\u7c7b\u8def\u5f84\u4e0a\u7684\u63d2\u4ef6\uff0c\u56e0\u6b64\u60a8\u7684\u7c7b\u8def\u5f84\u4e0a\u7684\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d2\u4ef6\u90fd\u5e94\u79fb\u52a8\u5230\u63d2\u4ef6\u8def\u5f84\uff0c\u4ee5\u4fbf\u4e0e\u6b64\u8fc1\u79fb\u811a\u672c\u4e00\u8d77\u4f7f\u7528\uff0c\u6216\u624b\u52a8\u8fc1\u79fb\u3002\u8bf7\u52a1\u5fc5\u5c06 list \u8f93\u51fa\u4e0e\u5de5\u4eba\u542f\u52a8\u8b66\u544a\u6216\u9519\u8bef\u6d88\u606f\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ee5\u786e\u4fdd\u811a\u672c\u627e\u5230\u6240\u6709\u53d7\u5f71\u54cd\u7684\u63d2\u4ef6\u3002 \u4e00\u65e6\u60a8\u770b\u5230\u6240\u6709\u4e0d\u517c\u5bb9\u7684\u63d2\u4ef6\u90fd\u5305\u542b\u5728\u5217\u8868\u4e2d\uff0c\u60a8\u5c31\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528 sync-manifests --dry-run \u8fdb\u884c\u5e72\u8fd0\u884c\u8fc1\u79fb\u3002\u9664\u4e86\u5c06\u8fc1\u79fb\u7ed3\u679c\u5199\u5165\u78c1\u76d8\u5916\uff0c\u8fd9\u5c06\u6267\u884c\u8fc1\u79fb\u7684\u6240\u6709\u90e8\u5206\u3002\u8bf7\u6ce8\u610f\uff0c sync-manifests \u547d\u4ee4\u8981\u6c42\u6240\u6709\u6307\u5b9a\u7684\u8def\u5f84\u90fd\u662f\u53ef\u5199\u5165\u7684\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u66f4\u6539\u76ee\u5f55\u7684\u5185\u5bb9\u3002\u5728\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u5907\u4efd\u60a8\u7684\u63d2\u4ef6\uff0c\u6216\u5c06\u5b83\u4eec\u590d\u5236\u5230\u53ef\u5199\u76ee\u5f55\u3002 \u5728\u5220\u9664 --dry-run \u6807\u5fd7\u5e76\u5b9e\u9645\u8fd0\u884c\u8fc1\u79fb\u4e4b\u524d\uff0c\u786e\u4fdd\u60a8\u6709\u63d2\u4ef6\u7684\u5907\u4efd\uff0c\u5e76\u4e14\u5e72\u8fd0\u884c\u6210\u529f\u3002\u5982\u679c\u5728\u6ca1\u6709 --dry-run \u6807\u5fd7\u7684\u60c5\u51b5\u4e0b\u8fc1\u79fb\u5931\u8d25\uff0c\u90a3\u4e48\u90e8\u5206\u8fc1\u79fb\u7684\u5de5\u4ef6\u5e94\u8be5\u88ab\u4e22\u5f03\u3002\u8fc1\u79fb\u662f\u5e42\u7b49\u7684\uff0c\u56e0\u6b64\u591a\u6b21\u8fd0\u884c\u5e76\u5728\u5df2\u8fc1\u79fb\u7684\u63d2\u4ef6\u4e0a\u8fd0\u884c\u5b83\u662f\u5b89\u5168\u7684\u3002\u811a\u672c\u5b8c\u6210\u540e\uff0c\u60a8\u5e94\u8be5 \u9a8c\u8bc1\u8fc1\u79fb\u662f\u5426\u5b8c\u6210 \u3002\u8fc1\u79fb\u811a\u672c\u9002\u5408\u5728\u6301\u7eed\u96c6\u6210\u73af\u5883\u4e2d\u7528\u4e8e\u81ea\u52a8\u8fc1\u79fb\u3002","title":"\u8fd0\u8425\u5546\uff1a\u6587\u7269\u8fc1\u79fb"},{"location":"8/#_11","text":"\u4e3a\u4e86\u4f7f\u63d2\u4ef6\u4e0e service_load \u517c\u5bb9\uff0c\u6709\u5fc5\u8981\u5c06 ServiceLoader \u6e05\u5355\u6dfb\u52a0\u5230\u6e90\u4ee3\u7801\u4e2d\uff0c\u7136\u540e\u5c06\u5176\u6253\u5305\u5728\u53d1\u5e03\u5de5\u4ef6\u4e2d\u3002\u6e05\u5355\u662f META-INF/services/ \u4e2d\u4ee5\u5176\u8d85\u7c7b\u7c7b\u578b\u547d\u540d\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u5e76\u5305\u542b\u4e00\u4e2a\u5b8c\u5168\u5408\u683c\u7684\u5b50\u7c7b\u540d\u79f0\u5217\u8868\uff0c\u6bcf\u884c\u4e00\u4e2a\u3002 \u4e3a\u4e86\u4f7f\u63d2\u4ef6\u517c\u5bb9\uff0c\u5b83\u5fc5\u987b\u5728\u4e0e\u5b83\u6269\u5c55\u7684\u63d2\u4ef6\u8d85\u7c7b\u76f8\u5bf9\u5e94\u7684\u6e05\u5355\u4e2d\u663e\u793a\u4e3a\u4e00\u884c\u3002\u5982\u679c\u5355\u4e2a\u63d2\u4ef6\u5b9e\u73b0\u4e86\u591a\u4e2a\u63d2\u4ef6\u63a5\u53e3\uff0c\u90a3\u4e48\u5b83\u5e94\u8be5\u51fa\u73b0\u5728\u5b83\u5b9e\u73b0\u7684\u6bcf\u4e2a\u63a5\u53e3\u7684\u6e05\u5355\u4e2d\u3002\u5982\u679c\u60a8\u6ca1\u6709\u7279\u5b9a\u7c7b\u578b\u63d2\u4ef6\u7684\u7c7b\uff0c\u5219\u65e0\u9700\u5305\u542b\u8be5\u7c7b\u578b\u7684\u6e05\u5355\u6587\u4ef6\u3002\u5982\u679c\u60a8\u7684\u7c7b\u4e0d\u5e94\u8be5\u663e\u793a\u4e3a\u63d2\u4ef6\uff0c\u5b83\u4eec\u5e94\u8be5\u88ab\u6807\u8bb0\u4e3a\u62bd\u8c61\u3002\u4ee5\u4e0b\u7c7b\u578b\u9884\u8ba1\u5c06\u6709\u6e05\u5355\uff1a org.apache.kafka.connect.sink.SinkConnector org.apache.kafka.connect.source.SourceConnector org.apache.kafka.connect.storage.Converter org.apache.kafka.connect.storage.HeaderConverter org.apache.kafka.connect.transforms.Transformation org.apache.kafka.connect.transforms.predicates.Predicate org.apache.kafka.common.config.provider.ConfigProvider org.apache.kafka.connect.rest.ConnectRestExtension org.apache.kafka.connect.connector.policy.ConnectorClientConfigOverridePolicy \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u53ea\u6709\u4e00\u4e2a\u5177\u6709\u5b8c\u5168\u5408\u683c\u540d\u79f0 com.example.MySinkConnector \u7684\u8fde\u63a5\u5668\uff0c\u90a3\u4e48\u5fc5\u987b\u5c06\u4e00\u4e2a\u6e05\u5355\u6587\u4ef6\u6dfb\u52a0\u5230 META-INF/services/org.apache.kafka.connect.sink.SinkConnector \u4e2d\u7684\u8d44\u6e90\u4e2d\uff0c\u5e76\u4e14\u5185\u5bb9\u5e94\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\uff1a # license header or comment com.example.MySinkConnector \u7136\u540e\uff0c\u60a8\u5e94\u8be5\u4f7f\u7528\u9884\u53d1\u5e03\u5de5\u4ef6\u7684 \u9a8c\u8bc1\u6b65\u9aa4 \u6765\u9a8c\u8bc1\u60a8\u7684\u6e05\u5355\u662f\u5426\u6b63\u786e\u3002\u5982\u679c\u9a8c\u8bc1\u6210\u529f\uff0c\u60a8\u53ef\u4ee5\u6b63\u5e38\u91ca\u653e\u63d2\u4ef6\uff0c\u8fd0\u8425\u5546\u53ef\u4ee5\u5347\u7ea7\u5230\u517c\u5bb9\u7248\u672c\u3002","title":"\u5f00\u53d1\u4eba\u5458\uff1a\u6e90\u8fc1\u79fb"},{"location":"8/#83","text":"\u672c\u6307\u5357\u4ecb\u7ecd\u4e86\u5f00\u53d1\u4eba\u5458\u5982\u4f55\u4e3a Kafka Connect \u7f16\u5199\u65b0\u7684\u8fde\u63a5\u5668\u4ee5\u5728 Kafka \u548c\u5176\u4ed6\u7cfb\u7edf\u4e4b\u95f4\u79fb\u52a8\u6570\u636e\u3002\u5b83\u7b80\u8981\u56de\u987e\u4e86\u4e00\u4e9b\u5173\u952e\u6982\u5ff5\uff0c\u7136\u540e\u63cf\u8ff0\u4e86\u5982\u4f55\u521b\u5efa\u7b80\u5355\u7684\u8fde\u63a5\u5668\u3002","title":"8.3 \u8fde\u63a5\u5668\u5f00\u53d1\u6307\u5357"},{"location":"8/#api","text":"","title":"\u6838\u5fc3\u6982\u5ff5\u548c API"},{"location":"8/#_12","text":"\u8981\u5728 Kafka \u548c\u53e6\u4e00\u4e2a\u7cfb\u7edf\u4e4b\u95f4\u590d\u5236\u6570\u636e\uff0c\u7528\u6237\u9700\u8981 Connector \u4e3a\u4ed6\u4eec\u60f3\u8981\u4ece\u4e2d\u63d0\u53d6\u6570\u636e\u6216\u5411\u5176\u4e2d\u63a8\u9001\u6570\u636e\u7684\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a Kafka \u7cfb\u7edf\u3002\u8fde\u63a5\u5668\u6709\u4e24\u79cd\u7c7b\u578b\uff1a SourceConnectors \u4ece\u53e6\u4e00\u4e2a\u7cfb\u7edf\u5bfc\u5165\u6570\u636e\uff08\u4f8b\u5982 JDBCSourceConnector \u5c06\u5173\u7cfb\u6570\u636e\u5e93\u5bfc\u5165\u5230 Kafka\uff09\u548c SinkConnectors \u5bfc\u51fa\u6570\u636e\uff08\u4f8b\u5982 HDFSSinkConnector \u5c06 Kafka \u4e3b\u9898\u7684\u5185\u5bb9\u5bfc\u51fa\u5230 HDFS \u6587\u4ef6\uff09\u3002 Connectors \u81ea\u5df1\u4e0d\u6267\u884c\u4efb\u4f55\u6570\u636e\u590d\u5236\uff1a\u5b83\u4eec\u7684\u914d\u7f6e\u63cf\u8ff0\u4e86\u8981\u590d\u5236\u7684\u6570\u636e\uff0c\u5e76\u4e14 Connector \u8d1f\u8d23\u5c06\u8be5\u4f5c\u4e1a\u5206\u89e3\u4e3a\u4e00\u7ec4 Tasks \u53ef\u4ee5\u5206\u53d1\u7ed9\u5de5\u4f5c\u4eba\u5458\u7684\u6570\u636e\u3002\u5b83\u4eec Tasks \u4e5f\u6709\u4e24\u79cd\u76f8\u5e94\u7684\u98ce\u683c\uff1a SourceTask \u548c SinkTask \u3002 \u5b8c\u6210\u4efb\u52a1\u540e\uff0c\u6bcf\u4e2a\u4eba\u90fd Task \u5fc5\u987b\u5c06\u5176\u6570\u636e\u5b50\u96c6\u590d\u5236\u5230 Kafka \u6216\u4ece Kafka \u590d\u5236\u6570\u636e\u3002\u5728 Kafka Connect \u4e2d\uff0c\u5e94\u8be5\u59cb\u7ec8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5206\u914d\u6784\u5efa\u4e3a\u4e00\u7ec4\u8f93\u5165\u548c\u8f93\u51fa\u6d41\uff0c\u5176\u4e2d\u5305\u542b\u5177\u6709\u4e00\u81f4\u6a21\u5f0f\u7684\u8bb0\u5f55\u3002\u6709\u65f6\u8fd9\u79cd\u6620\u5c04\u662f\u663e\u800c\u6613\u89c1\u7684\uff1a\u4e00\u7ec4\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a\u6587\u4ef6\u90fd\u53ef\u4ee5\u88ab\u89c6\u4e3a\u4e00\u4e2a\u6d41\uff0c\u5176\u4e2d\u6bcf\u4e2a\u89e3\u6790\u7684\u884c\u4f7f\u7528\u76f8\u540c\u7684\u6a21\u5f0f\u5f62\u6210\u4e00\u6761\u8bb0\u5f55\uff0c\u5e76\u5c06\u504f\u79fb\u91cf\u5b58\u50a8\u4e3a\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u504f\u79fb\u91cf\u3002\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u6620\u5c04\u5230\u6b64\u6a21\u578b\u53ef\u80fd\u9700\u8981\u66f4\u591a\u5de5\u4f5c\uff1aJDBC \u8fde\u63a5\u5668\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u8868\u6620\u5c04\u5230\u6d41\uff0c\u4f46\u504f\u79fb\u91cf\u4e0d\u592a\u6e05\u695a\u3002\u4e00\u79cd\u53ef\u80fd\u7684\u6620\u5c04\u4f7f\u7528\u65f6\u95f4\u6233\u5217\u6765\u751f\u6210\u589e\u91cf\u8fd4\u56de\u65b0\u6570\u636e\u7684\u67e5\u8be2\uff0c\u5e76\u4e14\u6700\u540e\u67e5\u8be2\u7684\u65f6\u95f4\u6233\u53ef\u4ee5\u7528\u4f5c\u504f\u79fb\u91cf\u3002","title":"\u8fde\u63a5\u5668\u548c\u4efb\u52a1"},{"location":"8/#_13","text":"\u6bcf\u4e2a\u6d41\u5e94\u8be5\u662f\u4e00\u7cfb\u5217\u952e\u503c\u8bb0\u5f55\u3002\u952e\u548c\u503c\u90fd\u53ef\u4ee5\u5177\u6709\u590d\u6742\u7684\u7ed3\u6784\u2014\u2014\u63d0\u4f9b\u4e86\u8bb8\u591a\u57fa\u672c\u7c7b\u578b\uff0c\u4f46\u4e5f\u53ef\u4ee5\u8868\u793a\u6570\u7ec4\u3001\u5bf9\u8c61\u548c\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u3002\u8fd0\u884c\u65f6\u6570\u636e\u683c\u5f0f\u4e0d\u91c7\u7528\u4efb\u4f55\u7279\u5b9a\u7684\u5e8f\u5217\u5316\u683c\u5f0f\uff1b\u8fd9\u79cd\u8f6c\u6362\u7531\u6846\u67b6\u5185\u90e8\u5904\u7406\u3002 \u9664\u4e86\u952e\u548c\u503c\u4e4b\u5916\uff0c\u8bb0\u5f55\uff08\u7531\u6e90\u751f\u6210\u7684\u8bb0\u5f55\u548c\u4f20\u9001\u5230\u63a5\u6536\u5668\u7684\u8bb0\u5f55\uff09\u8fd8\u5177\u6709\u5173\u8054\u7684\u6d41 ID \u548c\u504f\u79fb\u91cf\u3002\u6846\u67b6\u4f7f\u7528\u5b83\u4eec\u5b9a\u671f\u63d0\u4ea4\u5df2\u5904\u7406\u7684\u6570\u636e\u7684\u504f\u79fb\u91cf\uff0c\u4ee5\u4fbf\u5728\u53d1\u751f\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u4ece\u4e0a\u6b21\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u6062\u590d\u5904\u7406\uff0c\u4ece\u800c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u91cd\u65b0\u5904\u7406\u548c\u91cd\u590d\u4e8b\u4ef6\u3002","title":"\u6d41\u548c\u8bb0\u5f55"},{"location":"8/#_14","text":"\u5e76\u975e\u6240\u6709\u4f5c\u4e1a\u90fd\u662f\u9759\u6001\u7684\uff0c\u56e0\u6b64 Connector \u5b9e\u73b0\u8fd8\u8d1f\u8d23\u76d1\u89c6\u5916\u90e8\u7cfb\u7edf\u662f\u5426\u6709\u4efb\u4f55\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u7684\u66f4\u6539\u3002\u4f8b\u5982\uff0c\u5728\u8be5 JDBCSourceConnector \u793a\u4f8b\u4e2d\uff0c Connector \u53ef\u80fd\u4f1a\u4e3a\u6bcf\u4e2a Task . \u521b\u5efa\u65b0\u8868\u65f6\uff0c\u5b83\u5fc5\u987b\u53d1\u73b0\u8fd9\u4e00\u70b9\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u901a\u8fc7\u66f4\u65b0\u5176\u914d\u7f6e\u5c06\u65b0\u8868\u5206\u914d\u7ed9\u5176\u4e2d\u4e4b\u4e00 Tasks \u3002\u5f53\u5b83\u6ce8\u610f\u5230\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u7684\u66f4\u6539\uff08\u6216 \u6570\u91cf\u7684\u66f4\u6539 Tasks \uff09\u65f6\uff0c\u5b83\u4f1a\u901a\u77e5\u6846\u67b6\uff0c\u6846\u67b6\u4f1a\u66f4\u65b0\u4efb\u4f55\u76f8\u5e94\u7684 Tasks .","title":"\u52a8\u6001\u8fde\u63a5\u5668"},{"location":"8/#_15","text":"\u5f00\u53d1\u8fde\u63a5\u5668\u53ea\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u63a5\u53e3\uff0c Connector \u548c Task \u3002 file \u5305\u4e2dKafka\u7684\u6e90\u4ee3\u7801\u5305\u542b\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u3002\u6b64\u8fde\u63a5\u5668\u65e8\u5728\u7528\u4e8e\u72ec\u7acb\u6a21\u5f0f\uff0c\u5e76\u5b9e\u73b0\u4e86 SourceConnector / SourceTask \u6765\u8bfb\u53d6\u6587\u4ef6\u7684\u6bcf\u4e00\u884c\u5e76\u5c06\u5176\u4f5c\u4e3a\u8bb0\u5f55\u548c\u5c06\u6bcf\u6761\u8bb0\u5f55\u5199\u5165\u6587\u4ef6\u7684 SinkConnector / SinkTask \u3002 \u672c\u8282\u7684\u5176\u4f59\u90e8\u5206\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u4ee3\u7801\uff0c\u4ee5\u6f14\u793a\u521b\u5efa\u8fde\u63a5\u5668\u7684\u5173\u952e\u6b65\u9aa4\uff0c\u4f46\u5f00\u53d1\u4eba\u5458\u8fd8\u5e94\u53c2\u8003\u5b8c\u6574\u7684\u793a\u4f8b\u6e90\u4ee3\u7801\uff0c\u56e0\u4e3a\u4e3a\u7b80\u6d01\u8d77\u89c1\u7701\u7565\u4e86\u8bb8\u591a\u7ec6\u8282\u3002","title":"\u5f00\u53d1\u4e00\u4e2a\u7b80\u5355\u7684\u8fde\u63a5\u5668"},{"location":"8/#_16","text":"\u6211\u4eec\u5c06\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u4ecb\u7ecd SourceConnector \u3002 SinkConnector \u7684\u5b9e\u73b0\u975e\u5e38\u76f8\u4f3c\u3002\u9009\u62e9\u8f6f\u4ef6\u5305\u548c\u7c7b\u540d\uff0c\u8fd9\u4e9b\u793a\u4f8b\u5c06\u4f7f\u7528 FileStreamSourceConnector \uff0c\u4f46\u914c\u60c5\u66ff\u6362\u60a8\u81ea\u5df1\u7684\u7c7b\u540d\u3002\u4e3a\u4e86 \u4f7f\u63d2\u4ef6\u5728\u8fd0\u884c\u65f6\u53ef\u88ab\u53d1\u73b0 \uff0c\u8bf7\u5728 META-INF/services/org.apache.kafka.connect.source.SourceConnector \u4e2d\u7684\u8d44\u6e90\u4e2d\u6dfb\u52a0\u4e00\u4e2aServiceLoader\u6e05\u5355\uff0c\u5e76\u5728\u4e00\u884c\u4e2d\u6dfb\u52a0\u60a8\u5b8c\u5168\u5408\u683c\u7684\u7c7b\u540d\uff1a com.example.FileStreamSourceConnector \u521b\u5efa\u4e00\u4e2a\u7ee7\u627f SourceConnector \u7684\u7c7b\uff0c\u5e76\u6dfb\u52a0\u4e00\u4e2a\u5b57\u6bb5\uff0c\u8be5\u5b57\u6bb5\u5c06\u5b58\u50a8\u8981\u4f20\u64ad\u5230\u4efb\u52a1\u7684\u914d\u7f6e\u4fe1\u606f\uff08\u8981\u5411\u7684\u4efb\u52a1\u53d1\u9001\u6570\u636e\u7684\u4e3b\u9898\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9-\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u540d\u548c\u6700\u5927\u6279\u5904\u7406\u5927\u5c0f\uff09\uff1a package com.example; public class FileStreamSourceConnector extends SourceConnector { private Map<String, String> props; \u6700\u7b80\u5355\u7684\u586b\u5145\u65b9\u6cd5\u662f taskClass() \u5b83\u5b9a\u4e49\u4e86\u5e94\u8be5\u5728\u5de5\u4f5c\u8fdb\u7a0b\u4e2d\u5b9e\u4f8b\u5316\u4ee5\u5b9e\u9645\u8bfb\u53d6\u6570\u636e\u7684\u7c7b\uff1a @Override public Class<? extends Task> taskClass() { return FileStreamSourceTask.class; } \u6211\u4eec\u5c06\u5728\u4e0b\u9762\u5b9a\u4e49 FileStreamSourceTask \u7c7b\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6dfb\u52a0\u4e00\u4e9b\u6807\u51c6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c start() \u548c stop() @Override public void start(Map<String, String> props) { // Initialization logic and setting up of resources can take place in this method. // This connector doesn't need to do any of that, but we do log a helpful message to the user. this.props = props; AbstractConfig config = new AbstractConfig(CONFIG_DEF, props); String filename = config.getString(FILE_CONFIG); filename = (filename == null || filename.isEmpty()) ? \"standard input\" : config.getString(FILE_CONFIG); log.info(\"Starting file source connector reading from {}\", filename); } @Override public void stop() { // Nothing to do since no background monitoring is required. } \u6700\u540e\uff0c\u5b9e\u73b0\u7684\u771f\u6b63\u6838\u5fc3\u5728\u4e8e taskConfigs() \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u5904\u7406\u5355\u4e2a\u6587\u4ef6\uff0c\u56e0\u6b64\u5373\u4f7f\u6211\u4eec\u53ef\u80fd\u88ab\u5141\u8bb8\u6839\u636e maxTasks \u53c2\u6570\u751f\u6210\u66f4\u591a\u4efb\u52a1\uff0c\u6211\u4eec\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u53ea\u6709\u4e00\u4e2a\u6761\u76ee\u7684\u5217\u8868\uff1a @Override public List<Map<String, String>> taskConfigs(int maxTasks) { // Note that the task configs could contain configs additional to or different from the connector configs if needed. For instance, // if different tasks have different responsibilities, or if different tasks are meant to process different subsets of the source data stream). ArrayList<Map<String, String>> configs = new ArrayList<>(); // Only one input stream makes sense. configs.add(props); return configs; } \u5373\u4f7f\u6709\u591a\u4e2a\u4efb\u52a1\uff0c\u8fd9\u79cd\u65b9\u6cd5\u7684\u5b9e\u73b0\u901a\u5e38\u4e5f\u975e\u5e38\u7b80\u5355\u3002\u5b83\u53ea\u9700\u8981\u786e\u5b9a\u8f93\u5165\u4efb\u52a1\u7684\u6570\u91cf\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u8054\u7cfb\u5b83\u6b63\u5728\u63d0\u53d6\u6570\u636e\u7684\u8fdc\u7a0b\u670d\u52a1\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5206\u914d\u8d77\u6765\u3002\u7531\u4e8e\u4e00\u4e9b\u5728\u4efb\u52a1\u4e4b\u95f4\u62c6\u5206\u5de5\u4f5c\u7684\u6a21\u5f0f\u975e\u5e38\u5e38\u89c1\uff0c\u56e0\u6b64 ConnectorUtils \u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5b9e\u7528\u7a0b\u5e8f\u6765\u7b80\u5316\u8fd9\u4e9b\u60c5\u51b5\u3002 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u4e0d\u5305\u62ec\u52a8\u6001\u8f93\u5165\u3002\u6709\u5173\u5982\u4f55\u89e6\u53d1\u4efb\u52a1\u914d\u7f6e\u66f4\u65b0\uff0c\u8bf7\u53c2\u9605\u4e0b\u4e00\u8282\u4e2d\u7684\u8ba8\u8bba\u3002","title":"\u8fde\u63a5\u5668\u793a\u4f8b"},{"location":"8/#-","text":"\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u63cf\u8ff0\u76f8\u5e94 SourceTask \u7684\u5b9e\u73b0\u3002\u5b9e\u65bd\u65f6\u95f4\u5f88\u77ed\uff0c\u4f46\u592a\u957f\uff0c\u65e0\u6cd5\u5728\u672c\u6307\u5357\u4e2d\u5b8c\u5168\u6db5\u76d6\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u4f2a\u4ee3\u7801\u6765\u63cf\u8ff0\u5927\u591a\u6570\u5b9e\u73b0\uff0c\u4f46\u60a8\u53ef\u4ee5\u53c2\u8003\u6e90\u4ee3\u7801\u4ee5\u83b7\u53d6\u5b8c\u6574\u793a\u4f8b\u3002 \u4e0e\u8fde\u63a5\u5668\u4e00\u6837\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u7ee7\u627f\u9002\u5f53\u57fa\u7840 Task \u7c7b\u7684\u7c7b\u3002\u5b83\u8fd8\u6709\u4e00\u4e9b\u6807\u51c6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff1a public class FileStreamSourceTask extends SourceTask { private String filename; private InputStream stream; private String topic; private int batchSize; @Override public void start(Map<String, String> props) { filename = props.get(FileStreamSourceConnector.FILE_CONFIG); stream = openOrThrowError(filename); topic = props.get(FileStreamSourceConnector.TOPIC_CONFIG); batchSize = props.get(FileStreamSourceConnector.TASK_BATCH_SIZE_CONFIG); } @Override public synchronized void stop() { stream.close(); } \u8fd9\u4e9b\u662f\u7565\u5fae\u7b80\u5316\u7684\u7248\u672c\uff0c\u4f46\u8868\u660e\u8fd9\u4e9b\u65b9\u6cd5\u5e94\u8be5\u76f8\u5bf9\u7b80\u5355\uff0c\u5b83\u4eec\u5e94\u8be5\u6267\u884c\u7684\u552f\u4e00\u5de5\u4f5c\u662f\u5206\u914d\u6216\u91ca\u653e\u8d44\u6e90\u3002\u5173\u4e8e\u8fd9\u4e00\u5b9e\u65bd\uff0c\u6709\u4e24\u70b9\u9700\u8981\u6ce8\u610f\u3002\u9996\u5148\uff0c start() \u65b9\u6cd5\u5c1a\u672a\u5904\u7406\u4ece\u4e4b\u524d\u7684\u504f\u79fb\u91cf\u6062\u590d\uff0c\u8fd9\u5c06\u5728\u540e\u9762\u7684\u7ae0\u8282\u4e2d\u89e3\u51b3\u3002\u5176\u6b21\uff0c stop() \u65b9\u6cd5\u540c\u6b65\u3002\u8fd9\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a SourceTasks \u83b7\u5f97\u4e86\u4e00\u4e2a\u53ef\u4ee5\u65e0\u9650\u671f\u963b\u6b62\u7684\u4e13\u7528\u7ebf\u7a0b\uff0c\u56e0\u6b64\u9700\u8981\u901a\u8fc7\u6765\u81eaWorker\u4e2d\u4e0d\u540c\u7ebf\u7a0b\u7684\u8c03\u7528\u6765\u963b\u6b62\u5b83\u4eec\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4efb\u52a1\u7684\u4e3b\u8981\u529f\u80fd\uff0c\u5373 poll() \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4ece\u8f93\u5165\u7cfb\u7edf\u83b7\u53d6\u4e8b\u4ef6\u5e76\u8fd4\u56de List<SourceRecord> \uff1a @Override public List<SourceRecord> poll() throws InterruptedException { try { ArrayList<SourceRecord> records = new ArrayList<>(); while (streamValid(stream) && records.isEmpty()) { LineAndOffset line = readToNextLine(stream); if (line != null) { Map<String, Object> sourcePartition = Collections.singletonMap(\"filename\", filename); Map<String, Object> sourceOffset = Collections.singletonMap(\"position\", streamOffset); records.add(new SourceRecord(sourcePartition, sourceOffset, topic, Schema.STRING_SCHEMA, line)); if (records.size() >= batchSize) { return records; } } else { Thread.sleep(1); } } return records; } catch (IOException e) { // Underlying stream was killed, probably as a result of calling stop. Allow to return // null, and driving thread will handle any shutdown if necessary. } return null; } \u540c\u6837\uff0c\u6211\u4eec\u7701\u7565\u4e86\u4e00\u4e9b\u7ec6\u8282\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u91cd\u8981\u7684\u6b65\u9aa4\uff1a poll() \u65b9\u6cd5\u5c06\u88ab\u53cd\u590d\u8c03\u7528\uff0c\u5bf9\u4e8e\u6bcf\u6b21\u8c03\u7528\uff0c\u5b83\u5c06\u5faa\u73af\u5c1d\u8bd5\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u8bb0\u5f55\u3002\u5bf9\u4e8e\u5b83\u8bfb\u53d6\u7684\u6bcf\u4e00\u884c\uff0c\u5b83\u8fd8\u4f1a\u8ddf\u8e2a\u6587\u4ef6\u504f\u79fb\u91cf\u3002\u5b83\u4f7f\u7528\u6b64\u4fe1\u606f\u521b\u5efa\u5305\u542b\u56db\u6761\u4fe1\u606f\u7684\u8f93\u51fa SourceRecord \uff1a\u6e90\u5206\u533a\uff08\u53ea\u6709\u4e00\u4e2a\uff0c\u6b63\u5728\u8bfb\u53d6\u7684\u5355\u4e2a\u6587\u4ef6\uff09\u3001\u6e90\u504f\u79fb\u91cf\uff08\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u504f\u79fb\u91cf\uff09\u3001\u8f93\u51fa\u4e3b\u9898\u540d\u79f0\u548c\u8f93\u51fa\u503c\uff08\u8be5\u884c\uff0c\u6211\u4eec\u5305\u62ec\u4e00\u4e2a\u8868\u793a\u6b64\u503c\u59cb\u7ec8\u662f\u5b57\u7b26\u4e32\u7684\u6a21\u5f0f\uff09\u3002 SourceRecord \u6784\u9020\u51fd\u6570\u7684\u5176\u4ed6\u53d8\u4f53\u8fd8\u53ef\u4ee5\u5305\u62ec\u7279\u5b9a\u7684\u8f93\u51fa\u5206\u533a\u3001\u5bc6\u94a5\u548c\u6807\u5934\u3002 \u8bf7\u6ce8\u610f\uff0c\u6b64\u5b9e\u73b0\u4f7f\u7528\u6b63\u5e38\u7684Java InputStream \u63a5\u53e3\uff0c\u5982\u679c\u6570\u636e\u4e0d\u53ef\u7528\uff0c\u53ef\u80fd\u4f1a\u4f11\u7720\u3002\u8fd9\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\uff0c\u56e0\u4e3aKafka Connect\u4e3a\u6bcf\u4e2a\u4efb\u52a1\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e13\u7528\u7ebf\u7a0b\u3002\u867d\u7136\u4efb\u52a1\u5b9e\u73b0\u5fc5\u987b\u7b26\u5408\u57fa\u672c\u7684 poll() \u63a5\u53e3\uff0c\u4f46\u5b83\u4eec\u5728\u5b9e\u73b0\u65b9\u5f0f\u4e0a\u6709\u5f88\u5927\u7684\u7075\u6d3b\u6027\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u57fa\u4e8eNIO\u7684\u5b9e\u73b0\u4f1a\u66f4\u6709\u6548\u7387\uff0c\u4f46\u8fd9\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u6709\u6548\uff0c\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\uff0c\u5e76\u4e14\u4e0e\u65e7\u7248\u672c\u7684Java\u517c\u5bb9\u3002 \u5c3d\u7ba1\u5728\u793a\u4f8b\u4e2d\u6ca1\u6709\u4f7f\u7528\uff0c SourceTask \u4e5f\u63d0\u4f9b\u4e86\u4e24\u4e2aAPI\u6765\u63d0\u4ea4\u6e90\u7cfb\u7edf\u4e2d\u7684\u504f\u79fb\u91cf\uff1a commit \u548c commitRecord \u3002 API \u662f\u4e3a\u5177\u6709\u6d88\u606f\u786e\u8ba4\u673a\u5236\u7684\u6e90\u7cfb\u7edf\u63d0\u4f9b\u7684\u3002 \u91cd\u5199\u8fd9\u4e9b\u65b9\u6cd5\u5141\u8bb8\u6e90\u8fde\u63a5\u5668\u5728\u5c06\u6d88\u606f\u5199\u5165 Kafka \u540e\uff0c\u6279\u91cf\u6216\u5355\u72ec\u5730\u786e\u8ba4\u6e90\u7cfb\u7edf\u4e2d\u7684\u6d88\u606f\u3002 commit API \u5c06\u504f\u79fb\u91cf\u5b58\u50a8\u5728\u6e90\u7cfb\u7edf\u4e2d\uff0c\u76f4\u5230\u201cpoll\u201d\u8fd4\u56de\u7684\u504f\u79fb\u91cf\u4e3a\u6b62\u3002 \u6b64 API \u7684\u5b9e\u73b0\u5e94\u963b\u585e\uff0c\u76f4\u5230\u63d0\u4ea4\u5b8c\u6210\u3002 \u5728\u5c06\u6bcf\u4e2a SourceRecord \u5199\u5165 Kafka \u540e\uff0c commitRecord API \u4f1a\u4fdd\u5b58\u6e90\u7cfb\u7edf\u4e2d\u7684\u504f\u79fb\u91cf\u3002 \u7531\u4e8e Kafka Connect \u4f1a\u81ea\u52a8\u8bb0\u5f55\u504f\u79fb\u91cf\uff0c\u56e0\u6b64\u4e0d\u9700\u8981 SourceTask \u6765\u5b9e\u73b0\u5b83\u4eec\u3002 \u5982\u679c\u8fde\u63a5\u5668\u786e\u5b9e\u9700\u8981\u786e\u8ba4\u6e90\u7cfb\u7edf\u4e2d\u7684\u6d88\u606f\uff0c\u901a\u5e38\u53ea\u9700\u8981\u5176\u4e2d\u4e00\u4e2a API\u3002","title":"\u4efb\u52a1\u793a\u4f8b-\u6e90\u4efb\u52a1"},{"location":"8/#sink-tasks","text":"\u4e0a\u4e00\u8282\u63cf\u8ff0\u4e86\u5982\u4f55\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684 SourceTask \u3002\u4e0e SourceConnector \u548c SinkConnector \uff0c SourceTask \u548c SinkTask \u5177\u6709\u975e\u5e38\u4e0d\u540c\u7684\u63a5\u53e3\uff0c\u56e0\u4e3a SourceTask \u4f7f\u7528\u62c9\u53d6\u63a5\u53e3\uff0c\u800c SinkTask \u4f7f\u7528\u63a8\u9001\u63a5\u53e3\u3002\u4e24\u8005\u90fd\u6709\u5171\u540c\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u4f46 SinkTask \u754c\u9762\u622a\u7136\u4e0d\u540c\uff1a public abstract class SinkTask implements Task { public void initialize(SinkTaskContext context) { this.context = context; } public abstract void put(Collection<SinkRecord> records); public void flush(Map<TopicPartition, OffsetAndMetadata> currentOffsets) { } SinkTask \u6587\u6863\u5305\u542b\u5b8c\u6574\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f46\u8fd9\u4e2a\u754c\u9762\u51e0\u4e4e\u548c SourceTask \u4e00\u6837\u7b80\u5355\u3002Theput put() \u65b9\u6cd5\u5e94\u5305\u542b\u5927\u90e8\u5206\u5b9e\u73b0\uff0c\u63a5\u53d7 SinkRecords \u96c6\uff0c\u6267\u884c\u4efb\u4f55\u6240\u9700\u7684\u7ffb\u8bd1\uff0c\u5e76\u5c06\u5176\u5b58\u50a8\u5728\u76ee\u6807\u7cfb\u7edf\u4e2d\u3002\u6b64\u65b9\u6cd5\u4e0d\u9700\u8981\u786e\u4fdd\u6570\u636e\u5728\u8fd4\u56de\u4e4b\u524d\u5df2\u5b8c\u5168\u5199\u5165\u76ee\u6807\u7cfb\u7edf\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5185\u90e8\u7f13\u51b2\u5c06\u662f\u6709\u7528\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u4e00\u6b21\u53d1\u9001\u6574\u6279\u8bb0\u5f55\uff0c\u4ece\u800c\u51cf\u5c11\u5c06\u4e8b\u4ef6\u63d2\u5165\u4e0b\u6e38\u6570\u636e\u5b58\u50a8\u7684\u5f00\u9500\u3002 SinkRecords \u5305\u542b\u4e0e SourceRecords \u57fa\u672c\u76f8\u540c\u7684\u4fe1\u606f\uff1aKafka\u4e3b\u9898\u3001\u5206\u533a\u3001\u504f\u79fb\u91cf\u3001\u4e8b\u4ef6\u952e\u548c\u503c\u4ee5\u53ca\u53ef\u9009\u6807\u5934\u3002 flush() \u65b9\u6cd5\u5728\u504f\u79fb\u63d0\u4ea4\u8fc7\u7a0b\u4e2d\u4f7f\u7528\uff0c\u5b83\u5141\u8bb8\u4efb\u52a1\u4ece\u6545\u969c\u4e2d\u6062\u590d\u5e76\u4ece\u5b89\u5168\u70b9\u6062\u590d\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u9519\u8fc7\u4efb\u4f55\u4e8b\u4ef6\u3002\u8be5\u65b9\u6cd5\u5e94\u5c06\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u6570\u636e\u63a8\u9001\u5230\u76ee\u6807\u7cfb\u7edf\uff0c\u7136\u540e\u963b\u6b62\uff0c\u76f4\u5230\u5199\u5165\u5f97\u5230\u786e\u8ba4\u3002 offsets \u53c2\u6570\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5f53\u5b9e\u73b0\u5e0c\u671b\u5c06\u504f\u79fb\u4fe1\u606f\u5b58\u50a8\u5728\u76ee\u6807\u5b58\u50a8\u4e2d\u4ee5\u63d0\u4f9b\u7cbe\u786e\u4e00\u6b21\u4ea4\u4ed8\u65f6\u975e\u5e38\u6709\u7528\u3002\u4f8b\u5982\uff0cHDFS\u8fde\u63a5\u5668\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u5e76\u4f7f\u7528\u539f\u5b50\u79fb\u52a8\u64cd\u4f5c\u6765\u786e\u4fddflush flush() \u64cd\u4f5c\u539f\u5b50\u5730\u63d0\u4ea4\u6570\u636e\u5e76\u504f\u79fb\u5230HDFS\u4e2d\u7684\u6700\u7ec8\u4f4d\u7f6e\u3002","title":"Sink Tasks"},{"location":"8/#errant-record-reporter","text":"\u5f53\u4e3a\u8fde\u63a5\u5668\u542f\u7528 \u9519\u8bef\u62a5\u544a \u65f6\uff0c\u8fde\u63a5\u5668\u53ef\u4ee5\u4f7f\u7528 ErrantRecordReporter \u62a5\u544a\u53d1\u9001\u5230\u6c34\u69fd\u8fde\u63a5\u5668\u7684\u5355\u4e2a\u8bb0\u5f55\u7684\u95ee\u9898\u3002\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u8fde\u63a5\u5668\u7684 SinkTask \u5b50\u7c7b\u5982\u4f55\u83b7\u53d6\u548c\u4f7f\u7528 ErrantRecordReporter \uff0c\u5728DLQ\u672a\u542f\u7528\u6216\u8fde\u63a5\u5668\u5b89\u88c5\u5728\u6ca1\u6709\u6b64\u62a5\u544a\u5668\u529f\u80fd\u7684\u65e7Connect\u8fd0\u884c\u65f6\u5b89\u5168\u5730\u5904\u7406\u7a7a\u62a5\u544a\u5668\uff1a private ErrantRecordReporter reporter; @Override public void start(Map<String, String> props) { ... try { reporter = context.errantRecordReporter(); // may be null if DLQ not enabled } catch (NoSuchMethodException | NoClassDefFoundError e) { // Will occur in Connect runtimes earlier than 2.6 reporter = null; } } @Override public void put(Collection<SinkRecord> records) { for (SinkRecord record: records) { try { // attempt to process and send record to data sink process(record); } catch(Exception e) { if (reporter != null) { // Send errant record to error reporter reporter.report(record, e); } else { // There's no error reporter, so fail throw new ConnectException(\"Failed on record\", e); } } } }","title":"Errant Record Reporter"},{"location":"8/#resuming-from-previous-offsets","text":"SourceTask \u5b9e\u73b0\u5305\u62ec\u6bcf\u6761\u8bb0\u5f55\u7684\u6d41ID\uff08\u8f93\u5165\u6587\u4ef6\u540d\uff09\u548c\u504f\u79fb\u91cf\uff08\u6587\u4ef6\u4e2d\u7684\u4f4d\u7f6e\uff09\u3002\u8be5\u6846\u67b6\u4f7f\u7528\u5b83\u5b9a\u671f\u63d0\u4ea4\u504f\u79fb\uff0c\u4ee5\u4fbf\u5728\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\uff0c\u4efb\u52a1\u53ef\u4ee5\u6062\u590d\u548c\u6700\u5c0f\u5316\u91cd\u65b0\u5904\u7406\u548c\u53ef\u80fd\u91cd\u590d\u7684\u4e8b\u4ef6\u6570\u91cf\uff08\u6216\u8005\u5982\u679cKafka Connect\u88ab\u4f18\u96c5\u5730\u505c\u6b62\uff0c\u4f8b\u5982\u5728\u72ec\u7acb\u6a21\u5f0f\u4e0b\u6216\u7531\u4e8e\u4f5c\u4e1a\u91cd\u65b0\u914d\u7f6e\uff0c\u5219\u4ece\u6700\u8fd1\u7684\u504f\u79fb\u91cf\u6062\u590d\uff09\u3002\u8fd9\u4e2a\u63d0\u4ea4\u8fc7\u7a0b\u5b8c\u5168\u7531\u6846\u67b6\u81ea\u52a8\u5316\uff0c\u4f46\u53ea\u6709\u8fde\u63a5\u5668\u77e5\u9053\u5982\u4f55\u5bfb\u6c42\u56de\u5230\u8f93\u5165\u6d41\u4e2d\u7684\u6b63\u786e\u4f4d\u7f6e\uff0c\u4ece\u8be5\u4f4d\u7f6e\u6062\u590d\u3002 \u8981\u5728\u542f\u52a8\u65f6\u6b63\u786e\u6062\u590d\uff0c\u4efb\u52a1\u53ef\u4ee5\u4f7f\u7528\u4f20\u9012\u5230\u5176 initialize() \u65b9\u6cd5\u4e2d\u7684 SourceContext \u6765\u8bbf\u95ee\u504f\u79fb\u6570\u636e\u3002\u5728 initialize() \u6211\u4eec\u5c06\u6dfb\u52a0\u66f4\u591a\u4ee3\u7801\u6765\u8bfb\u53d6\u504f\u79fb\u91cf\uff08\u5982\u679c\u5b58\u5728\uff09\uff0c\u5e76\u5bfb\u6c42\u8be5\u4f4d\u7f6e\uff1a stream = new FileInputStream(filename); Map<String, Object> offset = context.offsetStorageReader().offset(Collections.singletonMap(FILENAME_FIELD, filename)); if (offset != null) { Long lastRecordedOffset = (Long) offset.get(\"position\"); if (lastRecordedOffset != null) seekToOffset(stream, lastRecordedOffset); } \u5f53\u7136\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u8bfb\u53d6\u6bcf\u4e2a\u8f93\u5165\u6d41\u7684\u8bb8\u591a\u952e\u3002 OffsetStorageReader \u63a5\u53e3\u8fd8\u5141\u8bb8\u60a8\u53d1\u5e03\u6279\u91cf\u8bfb\u53d6\u4ee5\u9ad8\u6548\u52a0\u8f7d\u6240\u6709\u504f\u79fb\u91cf\uff0c\u7136\u540e\u901a\u8fc7\u67e5\u627e\u6bcf\u4e2a\u8f93\u5165\u6d41\u5230\u9002\u5f53\u7684\u4f4d\u7f6e\u6765\u5e94\u7528\u5b83\u4eec\u3002","title":"Resuming from Previous Offsets"},{"location":"8/#exactly-once-source-connectors","text":"","title":"Exactly-once source connectors"},{"location":"8/#supporting-exactly-once","text":"\u968f\u7740 KIP-618 \u7684\u901a\u8fc7\uff0cKafka Connect\u4ece3.3.0\u7248\u672c\u5f00\u59cb\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u7684\u6e90\u8fde\u63a5\u5668\u3002\u4e3a\u4e86\u4f7f\u6e90\u8fde\u63a5\u5668\u5229\u7528\u8fd9\u79cd\u652f\u6301\uff0c\u5b83\u5fc5\u987b\u80fd\u591f\u4e3a\u5176\u53d1\u51fa\u7684\u6bcf\u6761\u8bb0\u5f55\u63d0\u4f9b\u6709\u610f\u4e49\u7684\u6e90\u504f\u79fb\u91cf\uff0c\u5e76\u5728\u4e0e\u4efb\u4f55\u8fd9\u4e9b\u504f\u79fb\u91cf\u76f8\u5bf9\u5e94\u7684\u786e\u5207\u4f4d\u7f6e\u6062\u590d\u5916\u90e8\u7cfb\u7edf\u7684\u6d88\u8017\uff0c\u800c\u4e0d\u4f1a\u4e22\u5f03\u6216\u590d\u5236\u6d88\u606f\u3002","title":"Supporting exactly-once"},{"location":"8/#defining-transaction-boundaries","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cKafka Connect\u6846\u67b6\u5c06\u4e3a\u6e90\u4efb\u52a1\u4ece\u5176 poll \u65b9\u6cd5\u8fd4\u56de\u7684\u6bcf\u6279\u8bb0\u5f55\u521b\u5efa\u5e76\u63d0\u4ea4\u65b0\u7684Kafka\u4e8b\u52a1\u3002\u7136\u800c\uff0c\u8fde\u63a5\u5668\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5728\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u4e2d\u5c06 transaction.boundary \u5c5e\u6027\u8bbe\u7f6e\u4e3a connector \u6765\u542f\u7528\u8be5\u8fb9\u754c\u3002 \u5982\u679c\u542f\u7528\uff0c\u8fde\u63a5\u5668\u7684\u4efb\u52a1\u5c06\u4ece\u5176 SourceTaskContext \u8bbf\u95ee TransactionContext \uff0c\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5Context\u6765\u63a7\u5236\u4e8b\u52a1\u4f55\u65f6\u4e2d\u6b62\u548c\u63d0\u4ea4\u3002 \u4f8b\u5982\uff0c\u81f3\u5c11\u6bcf\u5341\u6761\u8bb0\u5f55\u63d0\u4ea4\u4e00\u7b14\u4ea4\u6613\uff1a private int recordsSent; @Override public void start(Map<String, String> props) { this.recordsSent = 0; } @Override public List<SourceRecord> poll() { List<SourceRecord> records = fetchRecords(); boolean shouldCommit = false; for (SourceRecord record : records) { if (++this.recordsSent >= 10) { shouldCommit = true; } } if (shouldCommit) { this.recordsSent = 0; this.context.transactionContext().commitTransaction(); } return records; } \u6216\u8005\u6bcf\u5341\u6761\u8bb0\u5f55\u63d0\u4ea4\u4e00\u7b14\u4ea4\u6613\uff1a private int recordsSent; @Override public void start(Map<String, String> props) { this.recordsSent = 0; } @Override public List<SourceRecord> poll() { List<SourceRecord> records = fetchRecords(); for (SourceRecord record : records) { if (++this.recordsSent % 10 == 0) { this.context.transactionContext().commitTransaction(record); } } return records; } \u5927\u591a\u6570\u8fde\u63a5\u5668\u4e0d\u9700\u8981\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\u3002\u7136\u800c\uff0c\u5982\u679c\u6e90\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u6216\u5bf9\u8c61\u88ab\u5206\u89e3\u4e3a\u591a\u4e2a\u6e90\u8bb0\u5f55\uff0c\u4f46\u5e94\u8be5\u4ee5\u539f\u5b50\u65b9\u5f0f\u4ea4\u4ed8\uff0c\u8fd9\u53ef\u80fd\u662f\u6709\u7528\u7684\u3002\u6b64\u5916\uff0c\u5982\u679c\u6bcf\u4e2a\u5177\u6709\u7ed9\u5b9a\u504f\u79fb\u91cf\u7684\u6bcf\u4e2a\u8bb0\u5f55\u90fd\u5728\u5355\u4e2a\u4e8b\u52a1\u4e2d\u4ea4\u4ed8\uff0c\u5982\u679c\u4e0d\u53ef\u80fd\u7ed9\u6bcf\u4e2a\u6e90\u8bb0\u5f55\u4e00\u4e2a\u552f\u4e00\u7684\u6e90\u504f\u79fb\u91cf\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f88\u6709\u7528\u3002 \u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u7528\u6237\u6ca1\u6709\u5728\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u542f\u7528\u8fde\u63a5\u5668\u5b9a\u4e49\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u5219\u7531 context.transactionContext() \u8fd4\u56de\u7684 TransactionContext \u5c06\u4e3a null \u3002","title":"Defining transaction boundaries"},{"location":"8/#api_1","text":"\u6e90\u8fde\u63a5\u5668\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e9b\u989d\u5916\u7684\u98de\u884c\u524d\u9a8c\u8bc1API\u3002 \u67d0\u4e9b\u7528\u6237\u53ef\u80fd\u9700\u8981\u6765\u81ea\u8fde\u63a5\u5668\u7684\u4e00\u6b21\u6027\u8bed\u4e49\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5728\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u4e2d\u5c06 exactly.once.support \u5c5e\u6027\u8bbe\u7f6e\u4e3a required \u3002 \u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u65f6\uff0cKafka Connect \u6846\u67b6\u5c06\u8be2\u95ee\u8fde\u63a5\u5668\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u63d0\u4f9b\u4e00\u6b21\u6027\u8bed\u4e49\u3002 \u8fd9\u662f\u901a\u8fc7\u8c03\u7528\u8fde\u63a5\u5668\u4e0a\u7684 exactlyOnceSupport \u65b9\u6cd5\u6765\u5b8c\u6210\u7684\u3002 \u5982\u679c\u8fde\u63a5\u5668\u4e0d\u652f\u6301\u7cbe\u786e\u4e00\u6b21\u7684\u8bed\u4e49\uff0c\u5b83\u4ecd\u7136\u5e94\u8be5\u5b9e\u73b0\u6b64\u65b9\u6cd5\uff0c\u8ba9\u7528\u6237\u786e\u4fe1\u5b83\u65e0\u6cd5\u63d0\u4f9b\u7cbe\u786e\u4e00\u6b21\u7684\u8bed\u4e49\uff1a @Override public ExactlyOnceSupport exactlyOnceSupport(Map<String, String> props) { // This connector cannot provide exactly-once semantics under any conditions return ExactlyOnceSupport.UNSUPPORTED; } \u5426\u5219\uff0c\u8fde\u63a5\u5668\u5e94\u68c0\u67e5\u914d\u7f6e\uff0c\u5e76\u8fd4\u56de ExactlyOnceSupport.SUPPORTED \uff0c\u5982\u679c\u5b83\u53ef\u4ee5\u63d0\u4f9b\u7cbe\u786e\u4e00\u6b21\u7684\u8bed\u4e49\uff1a @Override public ExactlyOnceSupport exactlyOnceSupport(Map<String, String> props) { // This connector can always provide exactly-once semantics return ExactlyOnceSupport.SUPPORTED; } \u6b64\u5916\uff0c\u5982\u679c\u7528\u6237\u5df2\u5c06\u8fde\u63a5\u5668\u914d\u7f6e\u4e3a\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0cKafka Connect\u6846\u67b6\u5c06\u8be2\u95ee\u8fde\u63a5\u5668\u662f\u5426\u53ef\u4ee5\u4f7f\u7528 canDefineTransactionBoundaries \u65b9\u6cd5\u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff1a @Override public ConnectorTransactionBoundaries canDefineTransactionBoundaries(Map<String, String> props) { // This connector can always define its own transaction boundaries return ConnectorTransactionBoundaries.SUPPORTED; } \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ea\u80fd\u9488\u5bf9\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\u7684\u8fde\u63a5\u5668\u5b9e\u65bd\u3002\u5982\u679c\u8fde\u63a5\u5668\u6c38\u8fdc\u65e0\u6cd5\u5b9a\u4e49\u81ea\u5df1\u7684\u4e8b\u52a1\u8fb9\u754c\uff0c\u5b83\u5c31\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u79cd\u65b9\u6cd5\u3002","title":"\u9a8c\u8bc1API"},{"location":"8/#inputoutput-streams","text":"Kafka Connect\u65e8\u5728\u5b9a\u4e49\u6279\u91cf\u6570\u636e\u590d\u5236\u4f5c\u4e1a\uff0c\u4f8b\u5982\u590d\u5236\u6574\u4e2a\u6570\u636e\u5e93\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u8bb8\u591a\u4f5c\u4e1a\u6765\u5355\u72ec\u590d\u5236\u6bcf\u4e2a\u8868\u3002\u8fd9\u79cd\u8bbe\u8ba1\u7684\u4e00\u4e2a\u540e\u679c\u662f\uff0c\u8fde\u63a5\u5668\u7684\u8f93\u5165\u6216\u8f93\u51fa\u6d41\u96c6\u53ef\u80fd\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u53d8\u5316\u3002 \u6e90\u8fde\u63a5\u5668\u9700\u8981\u76d1\u63a7\u6e90\u7cfb\u7edf\u7684\u53d8\u5316\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u4e2d\u7684\u8868\u6dfb\u52a0/\u5220\u9664\u3002\u5f53\u4ed6\u4eec\u63a5\u6536\u66f4\u6539\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u901a\u8fc7ConnectorContext\u5bf9\u8c61\u901a\u77e5\u6846\u67b6\u9700\u8981\u91cd\u65b0\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u5728 SourceConnector \uff1a if (inputsChanged()) this.context.requestTaskReconfiguration(); \u8be5\u6846\u67b6\u5c06\u53ca\u65f6\u8bf7\u6c42\u65b0\u7684\u914d\u7f6e\u4fe1\u606f\u5e76\u66f4\u65b0\u4efb\u52a1\uff0c\u5141\u8bb8\u4ed6\u4eec\u5728\u91cd\u65b0\u914d\u7f6e\u4e4b\u524d\u4f18\u96c5\u5730\u63d0\u4ea4\u8fdb\u5ea6\u3002\u8bf7\u6ce8\u610f\uff0c\u5728 SourceConnector \uff0c\u6b64\u76d1\u63a7\u76ee\u524d\u7531\u8fde\u63a5\u5668\u5b9e\u73b0\u3002\u5982\u679c\u9700\u8981\u989d\u5916\u7684\u7ebf\u7a0b\u6765\u6267\u884c\u6b64\u76d1\u63a7\uff0c\u8fde\u63a5\u5668\u5fc5\u987b\u81ea\u884c\u5206\u914d\u5b83\u3002 \u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u7528\u4e8e\u76d1\u63a7\u66f4\u6539\u7684\u4ee3\u7801\u5c06\u9694\u79bb\u5728 Connector \u4e0a\uff0c\u4efb\u52a1\u65e0\u9700\u62c5\u5fc3\u5b83\u4eec\u3002\u7136\u800c\uff0c\u66f4\u6539\u4e5f\u4f1a\u5f71\u54cd\u4efb\u52a1\uff0c\u6700\u5e38\u89c1\u7684\u662f\u5f53\u5176\u4e2d\u4e00\u4e2a\u8f93\u5165\u6d41\u5728\u8f93\u5165\u7cfb\u7edf\u4e2d\u88ab\u9500\u6bc1\u65f6\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u8868\u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u3002\u5982\u679c Task \u5728 Connector \u4e4b\u524d\u9047\u5230\u95ee\u9898\uff0c\u5982\u679c Connector \u9700\u8981\u8f6e\u8be2\u66f4\u6539\uff0c\u8fd9\u5c06\u5f88\u5e38\u89c1\uff0c\u5219 Task \u5c06\u9700\u8981\u5904\u7406\u540e\u7eed\u9519\u8bef\u3002\u8c22\u5929\u8c22\u5730\uff0c\u8fd9\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u6355\u83b7\u548c\u5904\u7406\u9002\u5f53\u7684\u5f02\u5e38\u6765\u5904\u7406\u3002 SinkConnectors \u901a\u5e38\u53ea\u9700\u8981\u5904\u7406\u6d41\u7684\u6dfb\u52a0\uff0c\u8fd9\u4e9b\u6d41\u53ef\u80fd\u4f1a\u8f6c\u6362\u4e3a\u8f93\u51fa\u4e2d\u7684\u65b0\u6761\u76ee\uff08\u4f8b\u5982\uff0c\u65b0\u7684\u6570\u636e\u5e93\u8868\uff09\u3002\u8be5\u6846\u67b6\u7ba1\u7406\u5bf9Kafka\u8f93\u5165\u7684\u4efb\u4f55\u66f4\u6539\uff0c\u4f8b\u5982\u5f53\u8f93\u5165\u4e3b\u9898\u96c6\u56e0\u6b63\u5219\u8868\u8fbe\u5f0f\u8ba2\u9605\u800c\u53d1\u751f\u53d8\u5316\u65f6\u3002 SinkTasks \u5e94\u8be5\u671f\u5f85\u65b0\u7684\u8f93\u5165\u6d41\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u5728\u4e0b\u6e38\u7cfb\u7edf\u4e2d\u521b\u5efa\u65b0\u8d44\u6e90\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u4e2d\u7684\u65b0\u8868\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6700\u68d8\u624b\u7684\u60c5\u51b5\u53ef\u80fd\u662f\u591a\u4e2a SinkTasks \u9996\u6b21\u770b\u5230\u65b0\u7684\u8f93\u5165\u6d41\uff0c\u540c\u65f6\u5c1d\u8bd5\u521b\u5efa\u65b0\u8d44\u6e90\u4e4b\u95f4\u7684\u51b2\u7a81\u3002\u53e6\u4e00\u65b9\u9762\uff0c SinkConnectors \u901a\u5e38\u4e0d\u9700\u8981\u7279\u6b8a\u4ee3\u7801\u6765\u5904\u7406\u4e00\u7ec4\u52a8\u6001\u6d41\u3002","title":"\u52a8\u6001 Input/Output Streams"},{"location":"8/#_17","text":"Kafka Connect\u5141\u8bb8\u60a8\u5728\u63d0\u4ea4\u8981\u6267\u884c\u7684\u8fde\u63a5\u5668\u4e4b\u524d\u9a8c\u8bc1\u8fde\u63a5\u5668\u914d\u7f6e\uff0c\u5e76\u53ef\u4ee5\u63d0\u4f9b\u6709\u5173\u9519\u8bef\u548c\u63a8\u8350\u503c\u7684\u53cd\u9988\u3002\u4e3a\u4e86\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u8fde\u63a5\u5668\u5f00\u53d1\u4eba\u5458\u9700\u8981\u63d0\u4f9b config() \u7684\u5b9e\u73b0\uff0c\u4ee5\u5c06\u914d\u7f6e\u5b9a\u4e49\u516c\u5f00\u7ed9\u6846\u67b6\u3002 FileStreamSourceConnector \u4e2d\u7684\u4ee5\u4e0b\u4ee3\u7801\u5b9a\u4e49\u4e86\u914d\u7f6e\u5e76\u5c06\u5176\u516c\u5f00\u7ed9\u6846\u67b6\u3002 static final ConfigDef CONFIG_DEF = new ConfigDef() .define(FILE_CONFIG, Type.STRING, null, Importance.HIGH, \"Source filename. If not specified, the standard input will be used\") .define(TOPIC_CONFIG, Type.STRING, ConfigDef.NO_DEFAULT_VALUE, new ConfigDef.NonEmptyString(), Importance.HIGH, \"The topic to publish data to\") .define(TASK_BATCH_SIZE_CONFIG, Type.INT, DEFAULT_TASK_BATCH_SIZE, Importance.LOW, \"The maximum number of records the source task can read from the file each time it is polled\"); public ConfigDef config() { return CONFIG_DEF; } ConfigDef \u7c7b\u7528\u4e8e\u6307\u5b9a\u9884\u671f\u914d\u7f6e\u96c6\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u540d\u79f0\u3001\u7c7b\u578b\u3001\u9ed8\u8ba4\u503c\u3001\u6587\u6863\u3001\u7ec4\u4fe1\u606f\u3001\u7ec4\u4e2d\u7684\u987a\u5e8f\u3001\u914d\u7f6e\u503c\u7684\u5bbd\u5ea6\u4ee5\u53ca\u9002\u5408\u5728UI\u4e2d\u663e\u793a\u7684\u540d\u79f0\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8986\u76d6 Validator \u7c7b\u6765\u63d0\u4f9b\u7528\u4e8e\u5355\u4e2a\u914d\u7f6e\u9a8c\u8bc1\u7684\u7279\u6b8a\u9a8c\u8bc1\u903b\u8f91\u3002\u6b64\u5916\uff0c\u7531\u4e8e\u914d\u7f6e\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u4f9d\u8d56\u6027\uff0c\u4f8b\u5982\uff0c\u914d\u7f6e\u7684\u6709\u6548\u503c\u548c\u53ef\u89c1\u6027\u53ef\u80fd\u4f1a\u6839\u636e\u5176\u4ed6\u914d\u7f6e\u7684\u503c\u800c\u53d8\u5316\u3002\u4e3a\u4e86\u5904\u7406\u8fd9\u4e00\u70b9\uff0c ConfigDef \u5141\u8bb8\u60a8\u6307\u5b9a\u914d\u7f6e\u7684\u4f9d\u8d56\u9879\uff0c\u5e76\u63d0\u4f9b Recommender \u5b9e\u73b0\uff0c\u4ee5\u83b7\u5f97\u6709\u6548\u503c\u5e76\u8bbe\u7f6e\u7ed9\u5b9a\u5f53\u524d\u914d\u7f6e\u503c\u7684\u53ef\u89c1\u6027\u3002 \u6b64\u5916\uff0c Connector \u4e2d\u7684 validate() \u65b9\u6cd5\u63d0\u4f9b\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u9a8c\u8bc1\u5b9e\u73b0\uff0c\u8be5\u5b9e\u73b0\u8fd4\u56de\u5141\u8bb8\u7684\u914d\u7f6e\u5217\u8868\u4ee5\u53ca\u6bcf\u4e2a\u914d\u7f6e\u7684\u914d\u7f6e\u9519\u8bef\u548c\u63a8\u8350\u503c\u3002\u7136\u800c\uff0c\u5b83\u4e0d\u4f7f\u7528\u63a8\u8350\u7684\u503c\u8fdb\u884c\u914d\u7f6e\u9a8c\u8bc1\u3002\u60a8\u53ef\u4ee5\u4e3a\u81ea\u5b9a\u4e49\u914d\u7f6e\u9a8c\u8bc1\u63d0\u4f9b\u9ed8\u8ba4\u5b9e\u73b0\u7684\u8986\u76d6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u4f7f\u7528\u63a8\u8350\u7684\u503c\u3002","title":"\u914d\u7f6e\u9a8c\u8bc1"},{"location":"8/#schemas","text":"FileStream\u8fde\u63a5\u5668\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\uff0c\u56e0\u4e3a\u5b83\u4eec\u5f88\u7b80\u5355\uff0c\u4f46\u5b83\u4eec\u4e5f\u6709\u7410\u788e\u7684\u7ed3\u6784\u5316\u6570\u636e\u2014\u2014\u6bcf\u884c\u90fd\u53ea\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002\u51e0\u4e4e\u6240\u6709\u5b9e\u7528\u8fde\u63a5\u5668\u90fd\u9700\u8981\u5177\u6709\u66f4\u590d\u6742\u6570\u636e\u683c\u5f0f\u7684\u6a21\u5f0f\u3002 \u8981\u521b\u5efa\u66f4\u590d\u6742\u7684\u6570\u636e\uff0c\u60a8\u9700\u8981\u4f7f\u7528Kafka Connect data API\u3002\u9664\u4e86\u539f\u59cb\u7c7b\u578b\u5916\uff0c\u5927\u591a\u6570\u7ed3\u6784\u5316\u8bb0\u5f55\u8fd8\u9700\u8981\u4e0e\u4e24\u4e2a\u7c7b\u4ea4\u4e92\uff1a Schema \u548c Struct \u3002 API\u6587\u6863\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u53c2\u8003\uff0c\u4f46\u4ee5\u4e0b\u662f\u521b\u5efa Schema \u548c Struct \u7684\u7b80\u5355\u793a\u4f8b\uff1a Schema schema = SchemaBuilder.struct().name(NAME) .field(\"name\", Schema.STRING_SCHEMA) .field(\"age\", Schema.INT_SCHEMA) .field(\"admin\", SchemaBuilder.bool().defaultValue(false).build()) .build(); Struct struct = new Struct(schema) .put(\"name\", \"Barbara Liskov\") .put(\"age\", 75); \u5982\u679c\u60a8\u6b63\u5728\u5b9e\u73b0\u6e90\u8fde\u63a5\u5668\uff0c\u60a8\u9700\u8981\u51b3\u5b9a\u4f55\u65f6\u4ee5\u53ca\u5982\u4f55\u521b\u5efa\u6a21\u5f0f\u3002\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e94\u8be5\u5c3d\u53ef\u80fd\u907f\u514d\u91cd\u65b0\u8ba1\u7b97\u5b83\u4eec\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u7684\u8fde\u63a5\u5668\u4fdd\u8bc1\u5177\u6709\u56fa\u5b9a\u7684\u6a21\u5f0f\uff0c\u8bf7\u9759\u6001\u521b\u5efa\u5b83\u5e76\u91cd\u7528\u5355\u4e2a\u5b9e\u4f8b\u3002 \u7136\u800c\uff0c\u8bb8\u591a\u8fde\u63a5\u5668\u5c06\u5177\u6709\u52a8\u6001\u6a21\u5f0f\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u662f\u6570\u636e\u5e93\u8fde\u63a5\u5668\u3002\u5373\u4f7f\u53ea\u8003\u8651\u5355\u4e2a\u8868\uff0c\u4e5f\u4e0d\u4f1a\u4e3a\u6574\u4e2a\u8fde\u63a5\u5668\u9884\u5b9a\u4e49\u6a21\u5f0f\uff08\u56e0\u4e3a\u5b83\u56e0\u8868\u800c\u5f02\uff09\u3002\u4f46\u5728\u8fde\u63a5\u5668\u7684\u751f\u547d\u5468\u671f\u5185\uff0c\u5b83\u4e5f\u53ef\u80fd\u4e0d\u4f1a\u4e3a\u5355\u4e2a\u8868\u56fa\u5b9a\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u4ee5\u6267\u884c ALTER TABLE \u547d\u4ee4\u3002\u8fde\u63a5\u5668\u5fc5\u987b\u80fd\u591f\u68c0\u6d4b\u8fd9\u4e9b\u53d8\u5316\u5e76\u505a\u51fa\u9002\u5f53\u7684\u53cd\u5e94\u3002 \u6c34\u69fd\u8fde\u63a5\u5668\u901a\u5e38\u66f4\u7b80\u5355\uff0c\u56e0\u4e3a\u5b83\u4eec\u6b63\u5728\u6d88\u8017\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u521b\u5efa\u6a21\u5f0f\u3002\u7136\u800c\uff0c\u4ed6\u4eec\u5e94\u8be5\u540c\u6837\u5c0f\u5fc3\u5730\u9a8c\u8bc1\u4ed6\u4eec\u6536\u5230\u7684\u6a21\u5f0f\u662f\u5426\u5177\u6709\u9884\u671f\u7684\u683c\u5f0f\u3002\u5f53\u6a21\u5f0f\u4e0d\u5339\u914d\u65f6\u2014\u2014\u901a\u5e38\u8868\u793a\u4e0a\u6e38\u751f\u4ea7\u8005\u6b63\u5728\u751f\u6210\u65e0\u6cd5\u6b63\u786e\u8f6c\u6362\u4e3a\u76ee\u6807\u7cfb\u7edf\u7684\u65e0\u6548\u6570\u636e\u2014\u2014\u63a5\u6536\u5668\u8fde\u63a5\u5668\u5e94\u629b\u51fa\u5f02\u5e38\u4ee5\u5411\u7cfb\u7edf\u6307\u793a\u6b64\u9519\u8bef\u3002","title":"\u4f7f\u7528Schemas"},{"location":"8/#84","text":"Kafka Connect\u7684 REST\u5c42 \u63d0\u4f9b\u4e86\u4e00\u7ec4API\u6765\u7ba1\u7406\u96c6\u7fa4\u3002\u8fd9\u5305\u62ec\u67e5\u770b\u8fde\u63a5\u5668\u914d\u7f6e\u53ca\u5176\u4efb\u52a1\u72b6\u6001\u4ee5\u53ca\u66f4\u6539\u5176\u5f53\u524d\u884c\u4e3a\uff08\u4f8b\u5982\u66f4\u6539\u914d\u7f6e\u548c\u91cd\u65b0\u542f\u52a8\u4efb\u52a1\uff09\u7684API\u3002 \u5f53\u8fde\u63a5\u5668\u9996\u6b21\u63d0\u4ea4\u7ed9\u96c6\u7fa4\u65f6\uff0cConnect\u5de5\u4eba\u4e4b\u95f4\u4f1a\u89e6\u53d1\u91cd\u65b0\u5e73\u8861\uff0c\u4ee5\u5206\u914d\u7531\u65b0\u8fde\u63a5\u5668\u4efb\u52a1\u7ec4\u6210\u7684\u8d1f\u8f7d\u3002\u5f53\u8fde\u63a5\u5668\u589e\u52a0\u6216\u51cf\u5c11\u6240\u9700\u7684\u4efb\u52a1\u6570\u91cf\uff0c\u5f53\u8fde\u63a5\u5668\u7684\u914d\u7f6e\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u6216\u8005\u5f53\u4f5c\u4e3aConnect\u96c6\u7fa4\u7684\u6545\u610f\u5347\u7ea7\u7684\u4e00\u90e8\u5206\u6216\u7531\u4e8e\u6545\u969c\u800c\u6dfb\u52a0\u6216\u5220\u9664\u5de5\u4eba\u65f6\uff0c\u4e5f\u4f1a\u4f7f\u7528\u540c\u6837\u7684\u91cd\u65b0\u5e73\u8861\u8fc7\u7a0b\u3002 \u57282.3.0\u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0cConnect\u5de5\u4eba\u5c06\u91cd\u65b0\u5e73\u8861\u96c6\u7fa4\u4e2d\u7684\u5168\u5957\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\uff0c\u4f5c\u4e3a\u786e\u4fdd\u6bcf\u4e2a\u5de5\u4eba\u62e5\u6709\u5927\u81f4\u76f8\u540c\u7684\u5de5\u4f5c\u91cf\u7684\u7b80\u5355\u65b9\u6cd5\u3002\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e connect.protocol=eager \u6765\u542f\u7528\u6b64\u884c\u4e3a\u3002 \u4ece2.3.0\u5f00\u59cb\uff0cKafka Connect\u9ed8\u8ba4\u4f7f\u7528\u4e00\u79cd\u6267\u884c \u589e\u91cf\u5408\u4f5c\u518d\u5e73\u8861\u7684 \u534f\u8bae\uff0c\u8be5\u534f\u8bae\u9010\u6b65\u5e73\u8861Connect\u5de5\u4eba\u4e4b\u95f4\u7684\u8fde\u63a5\u5668\u548c\u4efb\u52a1\uff0c\u53ea\u5f71\u54cd\u65b0\u4efb\u52a1\u3001\u8981\u5220\u9664\u6216\u9700\u8981\u4ece\u4e00\u4e2a\u5de5\u4eba\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u5de5\u4eba\u7684\u4efb\u52a1\u3002\u5176\u4ed6\u4efb\u52a1\u5728\u91cd\u65b0\u5e73\u8861\u671f\u95f4\u4e0d\u4f1a\u50cf\u65e7\u534f\u8bae\u90a3\u6837\u505c\u6b62\u548c\u91cd\u65b0\u542f\u52a8\u3002 \u5982\u679c Connect \u5de5\u4f5c\u7ebf\u7a0b\u6709\u610f\u6216\u7531\u4e8e\u6545\u969c\u800c\u79bb\u5f00\u7ec4\uff0cConnect \u4f1a\u5728\u89e6\u53d1\u91cd\u65b0\u5e73\u8861\u4e4b\u524d\u7b49\u5f85 scheduled.rebalance.max.delay.ms \u3002 \u6b64\u5ef6\u8fdf\u9ed8\u8ba4\u4e3a\u4e94\u5206\u949f\uff08 300000ms \uff09\uff0c\u4ee5\u5bb9\u5fcd\u5de5\u4f5c\u4eba\u5458\u7684\u6545\u969c\u6216\u5347\u7ea7\uff0c\u800c\u65e0\u9700\u7acb\u5373\u91cd\u65b0\u5206\u914d\u5373\u5c06\u79bb\u5f00\u7684\u5de5\u4f5c\u4eba\u5458\u7684\u8d1f\u8f7d\u3002 \u5982\u679c\u8be5\u5de5\u4f5c\u4eba\u5458\u5728\u914d\u7f6e\u7684\u5ef6\u8fdf\u5185\u8fd4\u56de\uff0c\u5b83\u5c06\u83b7\u5f97\u4e4b\u524d\u5206\u914d\u7684\u5b8c\u6574\u4efb\u52a1\u3002 \u4f46\u662f\uff0c\u8fd9\u610f\u5473\u7740\u4efb\u52a1\u5c06\u4fdd\u6301\u672a\u5206\u914d\u72b6\u6001\uff0c\u76f4\u5230 scheduled.rebalance.max.delay.ms \u6307\u5b9a\u7684\u65f6\u95f4\u8fc7\u53bb\u3002 \u5982\u679c\u5de5\u4f5c\u4eba\u5458\u672a\u5728\u8be5\u65f6\u95f4\u9650\u5236\u5185\u8fd4\u56de\uff0cConnect \u5c06\u5728 Connect \u96c6\u7fa4\u4e2d\u7684\u5269\u4f59\u5de5\u4f5c\u4eba\u5458\u4e4b\u95f4\u91cd\u65b0\u5206\u914d\u8fd9\u4e9b\u4efb\u52a1\u3002 \u5f53\u6784\u6210 Connect \u96c6\u7fa4\u7684\u6240\u6709\u5de5\u4f5c\u7ebf\u7a0b\u90fd\u914d\u7f6e\u4e86 connect.protocol=\u517c\u5bb9 \u65f6\uff0c\u65b0\u7684 Connect \u534f\u8bae\u5c31\u4f1a\u542f\u7528\uff0c\u8fd9\u4e5f\u662f\u7f3a\u5c11\u6b64\u5c5e\u6027\u65f6\u7684\u9ed8\u8ba4\u503c\u3002 \u56e0\u6b64\uff0c\u5f53\u6240\u6709\u5de5\u4f5c\u4eba\u5458\u5347\u7ea7\u5230 2.3.0 \u65f6\uff0c\u4f1a\u81ea\u52a8\u5347\u7ea7\u5230\u65b0\u7684 Connect \u534f\u8bae\u3002 \u5f53\u6700\u540e\u4e00\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u52a0\u5165\u7248\u672c 2.3.0 \u65f6\uff0cConnect \u96c6\u7fa4\u7684\u6eda\u52a8\u5347\u7ea7\u5c06\u6fc0\u6d3b\u589e\u91cf\u534f\u4f5c\u91cd\u65b0\u5e73\u8861\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528REST API\u67e5\u770b\u8fde\u63a5\u5668\u7684\u5f53\u524d\u72b6\u6001\u53ca\u5176\u4efb\u52a1\uff0c\u5305\u62ec\u5206\u914d\u7ed9\u6bcf\u4e2a\u8fde\u63a5\u5668\u7684\u5de5\u4f5c\u4eba\u5458\u7684ID\u3002\u4f8b\u5982\uff0c GET /connectors/file-source/status \u8bf7\u6c42\u663e\u793a\u540d\u4e3a file-source \u7684\u8fde\u63a5\u5668\u7684\u72b6\u6001\uff1a { \"name\": \"file-source\", \"connector\": { \"state\": \"RUNNING\", \"worker_id\": \"192.168.1.208:8083\" }, \"tasks\": [ { \"id\": 0, \"state\": \"RUNNING\", \"worker_id\": \"192.168.1.209:8083\" } ] } \u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\u53d1\u5e03\u5171\u4eab\u4e3b\u9898\u7684\u72b6\u6001\u66f4\u65b0\uff08\u914d\u7f6e\u4e3a status.storage.topic \uff09\uff0c\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u5de5\u4f5c\u4eba\u5458\u90fd\u4f1a\u76d1\u63a7\u8be5\u4e3b\u9898\u3002\u7531\u4e8e\u5de5\u4eba\u5f02\u6b65\u4f7f\u7528\u6b64\u4e3b\u9898\uff0c\u5728\u72b6\u6001\u66f4\u6539\u901a\u8fc7\u72b6\u6001API\u53ef\u89c1\u4e4b\u524d\uff0c\u901a\u5e38\u4f1a\u6709\uff08\u77ed\u6682\u7684\uff09\u5ef6\u8fdf\u3002\u4ee5\u4e0b\u72b6\u6001\u5bf9\u4e8e\u8fde\u63a5\u5668\u6216\u5176\u4efb\u52a1\u4e4b\u4e00\u662f\u53ef\u80fd\u7684\uff1a UNASSIGNED : \u8fde\u63a5\u5668/\u4efb\u52a1\u5c1a\u672a\u5206\u914d\u7ed9\u5de5\u4eba\u3002 RUNNING : \u8fde\u63a5\u5668/\u4efb\u52a1\u6b63\u5728\u8fd0\u884c\u3002 PAUSED : \u8fde\u63a5\u5668/\u4efb\u52a1\u5df2\u5728\u7ba1\u7406\u4e0a\u6682\u505c\u3002 STOPPED : \u8fde\u63a5\u5668\u5df2\u505c\u6b62\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u72b6\u6001\u4e0d\u9002\u7528\u4e8e\u4efb\u52a1\uff0c\u56e0\u4e3a\u505c\u6b62\u8fde\u63a5\u5668\u7684\u4efb\u52a1\u5df2\u5173\u95ed\uff0c\u4e0d\u4f1a\u5728\u72b6\u6001API\u4e2d\u53ef\u89c1\u3002 FAILED : \u8fde\u63a5\u5668/\u4efb\u52a1\u5931\u8d25\uff08\u901a\u5e38\u901a\u8fc7\u5f15\u53d1\u5f02\u5e38\uff0c\u8be5\u5f02\u5e38\u5728\u72b6\u6001\u8f93\u51fa\u4e2d\u62a5\u544a\uff09\u3002 RESTARTING : \u8fde\u63a5\u5668/\u4efb\u52a1\u8981\u4e48\u6b63\u5728\u4e3b\u52a8\u91cd\u65b0\u542f\u52a8\uff0c\u8981\u4e48\u9884\u8ba1\u5f88\u5feb\u5c31\u4f1a\u91cd\u65b0\u542f\u52a8 \u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u72b6\u6001\u5c06\u5339\u914d\uff0c\u5c3d\u7ba1\u5f53\u53d1\u751f\u53d8\u5316\u6216\u4efb\u52a1\u5931\u8d25\u65f6\uff0c\u5b83\u4eec\u5728\u77ed\u65f6\u95f4\u5185\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5f53\u8fde\u63a5\u5668\u9996\u6b21\u542f\u52a8\u65f6\uff0c\u5728\u8fde\u63a5\u5668\u53ca\u5176\u4efb\u52a1\u5168\u90e8\u8fc7\u6e21\u5230\u8fd0\u884c\u72b6\u6001\u4e4b\u524d\u53ef\u80fd\u4f1a\u51fa\u73b0\u660e\u663e\u7684\u5ef6\u8fdf\u3002\u5f53\u4efb\u52a1\u5931\u8d25\u65f6\uff0c\u72b6\u6001\u4e5f\u4f1a\u6709\u6240\u4e0d\u540c\uff0c\u56e0\u4e3aConnect\u4e0d\u4f1a\u81ea\u52a8\u91cd\u65b0\u542f\u52a8\u5931\u8d25\u7684\u4efb\u52a1\u3002\u8981\u624b\u52a8\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668/\u4efb\u52a1\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u5217\u51fa\u7684\u91cd\u65b0\u542f\u52a8API\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u5728\u91cd\u65b0\u5e73\u8861\u65f6\u5c1d\u8bd5\u91cd\u65b0\u542f\u52a8\u4efb\u52a1\uff0cConnect\u5c06\u8fd4\u56de409\uff08\u51b2\u7a81\uff09\u72b6\u6001\u4ee3\u7801\u3002\u60a8\u53ef\u4ee5\u5728\u91cd\u65b0\u5e73\u8861\u5b8c\u6210\u540e\u91cd\u8bd5\uff0c\u4f46\u53ef\u80fd\u6ca1\u6709\u5fc5\u8981\uff0c\u56e0\u4e3a\u91cd\u65b0\u5e73\u8861\u4f1a\u6709\u6548\u5730\u91cd\u65b0\u542f\u52a8\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8fde\u63a5\u5668\u548c\u4efb\u52a1\u3002 \u4ece2.5.0\u5f00\u59cb\uff0cKafka Connect\u4f7f\u7528 status.storage.topic \u6765\u5b58\u50a8\u4e0e\u6bcf\u4e2a\u8fde\u63a5\u5668\u6b63\u5728\u4f7f\u7528\u7684\u4e3b\u9898\u76f8\u5173\u7684\u4fe1\u606f\u3002Connect Workers\u4f7f\u7528\u8fd9\u4e9b\u6bcf\u4e2a\u8fde\u63a5\u5668\u4e3b\u9898\u72b6\u6001\u66f4\u65b0\uff0c\u901a\u8fc7\u8fd4\u56de\u8fde\u63a5\u5668\u6b63\u5728\u4f7f\u7528\u7684\u4e3b\u9898\u540d\u79f0\u96c6\u6765\u54cd\u5e94\u5bf9REST\u7aef\u70b9 GET /connectors/{name}/topics \u8bf7\u6c42\u3002\u5bf9REST\u7aef\u70b9 PUT /connectors/{name}/topics/reset \u7684\u8bf7\u6c42\u4f1a\u91cd\u7f6e\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\uff0c\u5e76\u5141\u8bb8\u6839\u636e\u8fde\u63a5\u5668\u7684\u6700\u65b0\u4e3b\u9898\u4f7f\u7528\u6a21\u5f0f\u586b\u5145\u4e00\u7ec4\u65b0\u4e3b\u9898\u3002\u8fde\u63a5\u5668\u5220\u9664\u540e\uff0c\u8fde\u63a5\u5668\u7684\u6d3b\u52a8\u4e3b\u9898\u96c6\u4e5f\u4f1a\u88ab\u5220\u9664\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u542f\u7528\u4e3b\u9898\u8ddf\u8e2a\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e topic.tracking.enable=false \u6765\u7981\u7528\u3002\u5982\u679c\u60a8\u60f3\u7981\u6b62\u5728\u8fd0\u884c\u65f6\u91cd\u7f6e\u8fde\u63a5\u5668\u6d3b\u52a8\u4e3b\u9898\u7684\u8bf7\u6c42\uff0c\u8bf7\u8bbe\u7f6eWorker\u5c5e\u6027 topic.tracking.allow.reset=false \u3002 \u6709\u65f6\u6682\u65f6\u505c\u6b62\u8fde\u63a5\u5668\u7684\u6d88\u606f\u5904\u7406\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8fdc\u7a0b\u7cfb\u7edf\u6b63\u5728\u8fdb\u884c\u7ef4\u62a4\uff0c\u6e90\u8fde\u63a5\u5668\u6700\u597d\u505c\u6b62\u8f6e\u8be2\u65b0\u6570\u636e\uff0c\u800c\u4e0d\u662f\u7528\u5f02\u5e38\u5783\u573e\u90ae\u4ef6\u586b\u5145\u65e5\u5fd7\u3002\u5bf9\u4e8e\u6b64\u7528\u4f8b\uff0cConnect\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6682\u505c/\u6062\u590dAPI\u3002\u5f53\u6e90\u8fde\u63a5\u5668\u6682\u505c\u65f6\uff0cConnect\u5c06\u505c\u6b62\u8f6e\u8be2\u5b83\u4ee5\u83b7\u53d6\u5176\u4ed6\u8bb0\u5f55\u3002\u5f53\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6682\u505c\u65f6\uff0cConnect\u5c06\u505c\u6b62\u5411\u5176\u63a8\u9001\u65b0\u6d88\u606f\u3002\u6682\u505c\u72b6\u6001\u662f\u6301\u4e45\u7684\uff0c\u56e0\u6b64\u5373\u4f7f\u60a8\u91cd\u65b0\u542f\u52a8\u96c6\u7fa4\uff0c\u5728\u4efb\u52a1\u6062\u590d\u4e4b\u524d\uff0c\u8fde\u63a5\u5668\u4e5f\u4e0d\u4f1a\u518d\u6b21\u5f00\u59cb\u6d88\u606f\u5904\u7406\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u8fde\u63a5\u5668\u7684\u6240\u6709\u4efb\u52a1\u8fc7\u6e21\u5230\u6682\u505c\u72b6\u6001\u4e4b\u524d\u53ef\u80fd\u4f1a\u51fa\u73b0\u5ef6\u8fdf\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u9700\u8981\u65f6\u95f4\u6765\u5b8c\u6210\u6682\u505c\u65f6\u7684\u4efb\u4f55\u5904\u7406\u3002\u6b64\u5916\uff0c\u5931\u8d25\u7684\u4efb\u52a1\u5728\u91cd\u65b0\u542f\u52a8\u4e4b\u524d\u4e0d\u4f1a\u8fc7\u6e21\u5230\u6682\u505c\u72b6\u6001\u3002 \u572835.0\u4e2d\uff0cConnect\u5f15\u5165\u4e86\u4e00\u4e2a\u505c\u6b62API\uff0c\u53ef\u4ee5\u5b8c\u5168\u5173\u95ed\u8fde\u63a5\u5668\u7684\u4efb\u52a1\uff0c\u5e76\u53d6\u6d88\u5206\u914d\u4ed6\u4eec\u58f0\u79f0\u7684\u4efb\u4f55\u8d44\u6e90\u3002\u8fd9\u4e0e\u6682\u505c\u8fde\u63a5\u5668\u4e0d\u540c\uff0c\u8fde\u63a5\u5668\u7684\u4efb\u52a1\u5904\u4e8e\u7a7a\u8f6c\uff0c\u5e76\u5206\u914d\u4e86\u5b83\u4eec\u58f0\u79f0\u7684\u4efb\u4f55\u8d44\u6e90\uff08\u8fd9\u5141\u8bb8\u8fde\u63a5\u5668\u5728\u6062\u590d\u540e\u5feb\u901f\u5f00\u59cb\u5904\u7406\u6570\u636e\uff09\u3002\u4ece\u8d44\u6e90\u4f7f\u7528\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u505c\u6b62\u8fde\u63a5\u5668\u6bd4\u6682\u505c\u5b83\u66f4\u6709\u6548\uff0c\u4f46\u4e00\u65e6\u6062\u590d\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u957f\u7684\u65f6\u95f4\u624d\u80fd\u5f00\u59cb\u5904\u7406\u6570\u636e\u3002\u8bf7\u6ce8\u610f\uff0c\u8fde\u63a5\u5668\u7684\u504f\u79fb\u91cf\u53ea\u6709\u5728\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u65f6\u624d\u80fd\u901a\u8fc7\u504f\u79fb\u7ba1\u7406\u7aef\u70b9\u8fdb\u884c\u4fee\u6539\u3002","title":"8.4 \u7ba1\u7406"},{"location":"9/","text":"KAFKA STREAMS Kafka Streams \u662f\u4e00\u4e2a\u7528\u4e8e\u5904\u7406\u548c\u5206\u6790 Kafka \u4e2d\u5b58\u50a8\u7684\u6570\u636e\u7684\u5ba2\u6237\u7aef\u5e93\u3002\u5b83\u5efa\u7acb\u5728\u91cd\u8981\u7684\u6d41\u5904\u7406\u6982\u5ff5\u4e4b\u4e0a\uff0c\u4f8b\u5982\u6b63\u786e\u533a\u5206\u4e8b\u4ef6\u65f6\u95f4\u548c\u5904\u7406\u65f6\u95f4\u3001\u7a97\u53e3\u652f\u6301\u3001\u4e00\u6b21\u6027\u5904\u7406\u8bed\u4e49\u4ee5\u53ca\u7b80\u5355\u800c\u9ad8\u6548\u7684\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u7ba1\u7406\u3002 Kafka Streams \u7684 \u8fdb\u5165\u95e8\u69db\u8f83\u4f4e \uff1a\u60a8\u53ef\u4ee5\u5728\u5355\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u7f16\u5199\u5e76\u8fd0\u884c\u5c0f\u89c4\u6a21\u7684\u6982\u5ff5\u9a8c\u8bc1\uff1b\u60a8\u53ea\u9700\u5728\u591a\u53f0\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684\u5176\u4ed6\u5b9e\u4f8b\u5373\u53ef\u6269\u5c55\u5230\u5927\u6279\u91cf\u751f\u4ea7\u5de5\u4f5c\u8d1f\u8f7d\u3002Kafka Streams \u5229\u7528 Kafka \u7684\u5e76\u884c\u6a21\u578b\u900f\u660e\u5730\u5904\u7406\u540c\u4e00\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u5b9e\u4f8b\u7684\u8d1f\u8f7d\u5e73\u8861\u3002 \u4e86\u89e3\u6709\u5173 Kafka Streams \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb \u672c\u8282 \u3002","title":"9. Kafka Streams"},{"location":"9/#kafka-streams","text":"Kafka Streams \u662f\u4e00\u4e2a\u7528\u4e8e\u5904\u7406\u548c\u5206\u6790 Kafka \u4e2d\u5b58\u50a8\u7684\u6570\u636e\u7684\u5ba2\u6237\u7aef\u5e93\u3002\u5b83\u5efa\u7acb\u5728\u91cd\u8981\u7684\u6d41\u5904\u7406\u6982\u5ff5\u4e4b\u4e0a\uff0c\u4f8b\u5982\u6b63\u786e\u533a\u5206\u4e8b\u4ef6\u65f6\u95f4\u548c\u5904\u7406\u65f6\u95f4\u3001\u7a97\u53e3\u652f\u6301\u3001\u4e00\u6b21\u6027\u5904\u7406\u8bed\u4e49\u4ee5\u53ca\u7b80\u5355\u800c\u9ad8\u6548\u7684\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u7ba1\u7406\u3002 Kafka Streams \u7684 \u8fdb\u5165\u95e8\u69db\u8f83\u4f4e \uff1a\u60a8\u53ef\u4ee5\u5728\u5355\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u7f16\u5199\u5e76\u8fd0\u884c\u5c0f\u89c4\u6a21\u7684\u6982\u5ff5\u9a8c\u8bc1\uff1b\u60a8\u53ea\u9700\u5728\u591a\u53f0\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684\u5176\u4ed6\u5b9e\u4f8b\u5373\u53ef\u6269\u5c55\u5230\u5927\u6279\u91cf\u751f\u4ea7\u5de5\u4f5c\u8d1f\u8f7d\u3002Kafka Streams \u5229\u7528 Kafka \u7684\u5e76\u884c\u6a21\u578b\u900f\u660e\u5730\u5904\u7406\u540c\u4e00\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u5b9e\u4f8b\u7684\u8d1f\u8f7d\u5e73\u8861\u3002 \u4e86\u89e3\u6709\u5173 Kafka Streams \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb \u672c\u8282 \u3002","title":"KAFKA STREAMS"},{"location":"contrib/","text":"\u8d21\u732e\u6307\u5357 \u8bf7\u60a8\u52c7\u6562\u5730\u53bb\u7ffb\u8bd1\u548c\u6539\u8fdb\u7ffb\u8bd1\u3002\u867d\u7136\u6211\u4eec\u8ffd\u6c42\u5353\u8d8a\uff0c\u4f46\u6211\u4eec\u5e76\u4e0d\u8981\u6c42\u60a8\u505a\u5230\u5341\u5168\u5341\u7f8e\uff0c\u56e0\u6b64\u8bf7\u4e0d\u8981\u62c5\u5fc3\u56e0\u4e3a\u7ffb\u8bd1\u4e0a\u72af\u9519\u2014\u2014\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u670d\u52a1\u5668\u5df2\u7ecf\u8bb0\u5f55\u6240\u6709\u7684\u7ffb\u8bd1\uff0c\u56e0\u6b64\u60a8\u4e0d\u5fc5\u62c5\u5fc3\u4f1a\u56e0\u4e3a\u60a8\u7684\u5931\u8bef\u906d\u5230\u65e0\u6cd5\u633d\u56de\u7684\u7834\u574f\u3002\uff08\u6539\u7f16\u81ea\u7ef4\u57fa\u767e\u79d1\uff09 \u6d41\u7a0b \u4e00\u3001\u8ba4\u9886 \u9996\u5148\u67e5\u770b \u6574\u4f53\u8fdb\u5ea6 \uff0c\u786e\u8ba4\u6ca1\u6709\u4eba\u8ba4\u9886\u4e86\u4f60\u60f3\u8ba4\u9886\u7684\u7ae0\u8282\u3002 \u7136\u540e\u56de\u590d ISSUE \u6765\u8ba4\u9886\u7ae0\u8282\uff0c\u6ce8\u660e\u201c\u7ae0\u8282 + QQ \u53f7\u201d\u3002 \u4e8c\u3001\u6821\u5bf9 \u6821\u5bf9\uff1a \u8bed\u6cd5 \u672f\u8bed\u4f7f\u7528 \u4ee3\u7801\u683c\u5f0f \u4e09\u3001\u63d0\u4ea4 fork Github \u9879\u76ee \u4fee\u6539 zh \u4e0b\u9762\u7684\u6587\u6863 push pull request \u8bf7\u89c1 Github \u5165\u95e8\u6307\u5357 \u3002","title":"\u8d21\u732e\u6307\u5357"},{"location":"contrib/#_1","text":"\u8bf7\u60a8\u52c7\u6562\u5730\u53bb\u7ffb\u8bd1\u548c\u6539\u8fdb\u7ffb\u8bd1\u3002\u867d\u7136\u6211\u4eec\u8ffd\u6c42\u5353\u8d8a\uff0c\u4f46\u6211\u4eec\u5e76\u4e0d\u8981\u6c42\u60a8\u505a\u5230\u5341\u5168\u5341\u7f8e\uff0c\u56e0\u6b64\u8bf7\u4e0d\u8981\u62c5\u5fc3\u56e0\u4e3a\u7ffb\u8bd1\u4e0a\u72af\u9519\u2014\u2014\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u670d\u52a1\u5668\u5df2\u7ecf\u8bb0\u5f55\u6240\u6709\u7684\u7ffb\u8bd1\uff0c\u56e0\u6b64\u60a8\u4e0d\u5fc5\u62c5\u5fc3\u4f1a\u56e0\u4e3a\u60a8\u7684\u5931\u8bef\u906d\u5230\u65e0\u6cd5\u633d\u56de\u7684\u7834\u574f\u3002\uff08\u6539\u7f16\u81ea\u7ef4\u57fa\u767e\u79d1\uff09","title":"\u8d21\u732e\u6307\u5357"},{"location":"contrib/#_2","text":"","title":"\u6d41\u7a0b"},{"location":"contrib/#_3","text":"\u9996\u5148\u67e5\u770b \u6574\u4f53\u8fdb\u5ea6 \uff0c\u786e\u8ba4\u6ca1\u6709\u4eba\u8ba4\u9886\u4e86\u4f60\u60f3\u8ba4\u9886\u7684\u7ae0\u8282\u3002 \u7136\u540e\u56de\u590d ISSUE \u6765\u8ba4\u9886\u7ae0\u8282\uff0c\u6ce8\u660e\u201c\u7ae0\u8282 + QQ \u53f7\u201d\u3002","title":"\u4e00\u3001\u8ba4\u9886"},{"location":"contrib/#_4","text":"\u6821\u5bf9\uff1a \u8bed\u6cd5 \u672f\u8bed\u4f7f\u7528 \u4ee3\u7801\u683c\u5f0f","title":"\u4e8c\u3001\u6821\u5bf9"},{"location":"contrib/#_5","text":"fork Github \u9879\u76ee \u4fee\u6539 zh \u4e0b\u9762\u7684\u6587\u6863 push pull request \u8bf7\u89c1 Github \u5165\u95e8\u6307\u5357 \u3002","title":"\u4e09\u3001\u63d0\u4ea4"},{"location":"downloads/","text":"\u4e0b\u8f7d 3.5.1 \u662f\u6700\u65b0\u7248\u672c\u3002\u5f53\u524d\u7a33\u5b9a\u7248\u672c\u662f3.5.1 \u60a8\u53ef\u4ee5\u6309\u7167\u8fd9\u4e9b \u8fc7\u7a0b \u5e76\u4f7f\u7528\u8fd9\u4e9b \u5bc6\u94a5 \u6765\u9a8c\u8bc1\u60a8\u7684\u4e0b\u8f7d\u3002 3.5.1 \u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 7 \u6708 21 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.5.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.5.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.5.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.5.1\u662f\u4e00\u4e2a\u5b89\u5168\u8865\u4e01\u7248\u672c\u3002\u5b83\u5305\u542b\u5b89\u5168\u4fee\u590d\u548c\u56de\u5f52\u4fee\u590d\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u6211\u4eec\u7684 \u535a\u5ba2\u6587\u7ae0 \u548c\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.5.0 \u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 6 \u6708 15 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.5.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.5.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.5.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.5.0 \u5305\u542b\u5927\u91cf\u65b0\u529f\u80fd\u548c\u4fee\u590d\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u6211\u4eec\u7684 \u535a\u5ba2\u6587\u7ae0 \u548c\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.4.1 \u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 6 \u6708 6 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.4.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.4.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.4.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.4.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.4.1 \u4fee\u590d\u4e86 58 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e 3.4.0 2023 \u5e74 2 \u6708 7 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.4.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.4.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.4.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.4.0 \u5305\u542b\u5927\u91cf\u65b0\u529f\u80fd\u548c\u4fee\u590d\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u6211\u4eec\u7684 \u535a\u5ba2\u6587\u7ae0 \u548c\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.3.2 \u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 1 \u6708 23 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.3.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.3.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.3.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.3.1 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.3.2 \u4fee\u590d\u4e86 20 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e 3.3.1 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 10 \u6708 3 \u65e5 3.3.1 \u548c 3.3.0 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.3.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.3.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.3.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.3.1 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a KIP-833\uff1a\u5c06 KRaft \u6807\u8bb0\u4e3a\u751f\u4ea7\u5c31\u7eea KIP-778\uff1aKRaft \u5230 KRaft \u7684\u5347\u7ea7 KIP-835\uff1a\u76d1\u63a7 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u5065\u5eb7\u72b6\u51b5 KIP-794\uff1a\u4e25\u683c\u7edf\u4e00\u7684\u7c98\u6027\u5206\u533a\u5668 KIP-834\uff1a\u6682\u505c/\u6062\u590d KafkaStreams \u62d3\u6251 KIP-618\uff1a\u5bf9\u6e90\u8fde\u63a5\u5668\u7684 Exactly-Once \u652f\u6301 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 3.3.1 \u548c 3.3.0 \u53d1\u884c\u8bf4\u660e\u3002 3.3.0 \u5728\u5c06\u5de5\u4ef6\u63a8\u9001\u5230 Apache \u548c Maven \u4e2d\u5fc3\u4e4b\u540e\u4f46\u5728\u53d1\u5e03\u516c\u544a\u4e4b\u524d\uff0c\u5728 3.3.0 \u7248\u672c\u4e2d\u53d1\u73b0\u4e86\u4e00\u4e2a\u91cd\u5927\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u51b3\u5b9a\u4e0d\u53d1\u5e03 3.3.0\uff0c\u800c\u662f\u53d1\u5e03\u5305\u542b\u4fee\u590d\u7a0b\u5e8f\u7684 3.3.1\u3002\u5efa\u8bae\u4e0d\u8981\u4f7f\u75283.3.0\u3002 3.2.3 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.2.3-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.2.3.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.2.3.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.2.3 \u4fee\u590d\u4e86 CVE-2022-34917 \u4ee5\u53ca\u81ea 3.2.1 \u7248\u672c\u4ee5\u6765\u7684\u5176\u4ed6 7 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.2.2 \u5728\u5c06\u5de5\u4ef6\u63a8\u9001\u5230 Maven \u4e2d\u5fc3\u4e4b\u540e\u4f46\u5728\u53d1\u5e03\u516c\u544a\u4e4b\u524d\uff0c\u5728 3.2.2 \u7248\u672c\u4e2d\u53d1\u73b0\u4e86\u4e00\u4e2a\u91cd\u5927\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u51b3\u5b9a\u4e0d\u53d1\u5e03 3.2.2\uff0c\u5e76\u53d1\u5e03\u5305\u542b\u4fee\u590d\u7a0b\u5e8f\u7684 3.2.3\u3002\u5efa\u8bae\u4e0d\u8981\u4f7f\u75283.2.2\u3002 3.2.1 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 7 \u6708 29 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.2.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.2.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.2.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.2.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.2.1 \u4fee\u590d\u4e86 13 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.2.0 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 5 \u6708 17 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.2.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.2.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.2.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.2.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a log4j 1.x \u66ff\u6362\u4e3a reload4j KRaft \u6807\u51c6\u6388\u6743\u5668 (KIP-801) \u5411\u5206\u533a\u9886\u5bfc\u8005\u53d1\u9001\u63d0\u793a\u4ee5\u6062\u590d\u5206\u533a\uff08KIP-704\uff09 DescribeLogDirsResponse \u4e2d\u7684\u9876\u7ea7\u9519\u8bef\u4ee3\u7801\u5b57\u6bb5 (KIP-784) kafka-console- Producer\u5199\u5165\u6807\u5934\u548c\u7a7a\u503c\uff08KIP-798\u548cKIP-810\uff09 JoinGroupRequest \u548c LeaveGroupRequest \u9644\u52a0\u4e86\u539f\u56e0 (KIP-800) \u9759\u6001\u6210\u5458\u534f\u8bae\u8ba9\u9886\u5bfc\u8005\u8df3\u8fc7\u5206\u914d\uff08KIP-814\uff09 Kafka Streams \u4e2d\u7684\u673a\u67b6\u611f\u77e5\u5907\u7528\u4efb\u52a1\u5206\u914d (KIP-708) \u4ea4\u4e92\u5f0f\u67e5\u8be2 v2\uff08KIP-796\u3001KIP-805 \u548c KIP-806\uff09 Connect API \u5217\u51fa\u6240\u6709\u8fde\u63a5\u5668\u63d2\u4ef6\u5e76\u68c0\u7d22\u5176\u914d\u7f6e (KIP-769) TimestampConverter SMT \u652f\u6301\u4e0d\u540c\u7684 Unix \u65f6\u95f4\u7cbe\u5ea6 (KIP-808) \u8fde\u63a5\u6e90\u4efb\u52a1\u5904\u7406\u751f\u4ea7\u8005\u5f02\u5e38 (KIP-779) \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.1.2 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.1.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.1.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.1.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.1.2 \u4fee\u590d\u4e86\u81ea 3.1.1 \u7248\u672c\u4ee5\u6765\u7684 CVE-2022-34917\u548c\u5176\u4ed6 4 \u4e2a\u95ee\u9898\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.1.1 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 5 \u6708 13 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.1.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.1.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.1.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.1.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.1.1 \u4fee\u590d\u4e86 29 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.1.0 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 1 \u6708 24 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.1.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.1.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.1.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.1.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Apache Kafka \u652f\u6301 Java 17 FetchRequest \u652f\u6301\u4e3b\u9898 ID (KIP-516) \u901a\u8fc7\u652f\u6301 OIDC (KIP-768) \u6269\u5c55 SASL/OAUTHBEARER \u6dfb\u52a0\u4ee3\u7406\u8ba1\u6570\u6307\u6807 (KIP-748) \u533a\u5206\u4ee5\u6beb\u79d2\u548c\u7eb3\u79d2\u4e3a\u5355\u4f4d\u6d4b\u91cf\u7684\u4e00\u81f4\u516c\u5236\u5ef6\u8fdf (KIP-773) \u4e0d\u63a8\u8350\u4f7f\u7528\u6025\u5207\u7684\u91cd\u65b0\u5e73\u8861\u534f\u8bae (KAFKA-13439) \u5c06 TaskId \u5b57\u6bb5\u6dfb\u52a0\u5230 StreamsException (KIP-783) \u5916\u952e\u8fde\u63a5\u4e2d\u7684\u81ea\u5b9a\u4e49\u5206\u533a\u5668 (KIP-775) \u4f7f\u7528 SessionStore/WindowStore \u7684\u5f00\u653e\u7aef\u70b9\u83b7\u53d6/findSessions \u67e5\u8be2 (KIP-766) \u5177\u6709\u5f00\u653e\u7aef\u70b9\u7684\u8303\u56f4\u67e5\u8be2\uff08KIP-763\uff09 \u5c06\u603b\u963b\u585e\u65f6\u95f4\u6307\u6807\u6dfb\u52a0\u5230 Streams (KIP-761) \u6dfb\u52a0\u989d\u5916\u7684\u914d\u7f6e\u6765\u63a7\u5236 MirrorMaker2 \u5185\u90e8\u4e3b\u9898\u547d\u540d\u7ea6\u5b9a (KIP-690) \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.0.2 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.0.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.0.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.0.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.0.2 \u4fee\u590d\u4e86 CVE-2022-34917 \u4ee5\u53ca\u81ea 3.0.1 \u7248\u672c\u4ee5\u6765\u7684\u5176\u4ed6 10 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.0.1 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 3 \u6708 11 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.0.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.0.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.0.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.0.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.0.1 \u4fee\u590d\u4e86 29 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 3.0.0 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 9 \u6708 21 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.0.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.0.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.0.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.0.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u4e0d\u518d\u652f\u6301 Java 8 \u548c Scala 2.12 Kafka Raft \u5bf9\u5143\u6570\u636e\u4e3b\u9898\u5feb\u7167\u7684\u652f\u6301\u4ee5\u53ca\u81ea\u6211\u7ba1\u7406\u4ef2\u88c1\u7684\u5176\u4ed6\u6539\u8fdb \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a Kafka \u751f\u4ea7\u8005\u63d0\u4f9b\u66f4\u5f3a\u7684\u4ea4\u4ed8\u4fdd\u8bc1 \u5f03\u7528\u6d88\u606f\u683c\u5f0f v0 \u548c v1 OffsetFetch \u548c FindCoordinator \u8bf7\u6c42\u7684\u4f18\u5316 \u66f4\u7075\u6d3b\u7684 Mirror Maker 2 \u914d\u7f6e\u548c\u5f03\u7528 Mirror Maker 1 \u80fd\u591f\u5728 Kafka Connect \u4e2d\u7684\u5355\u4e2a\u8c03\u7528\u4e2d\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u7684\u4efb\u52a1 \u73b0\u5728\u9ed8\u8ba4\u542f\u7528\u8fde\u63a5\u5668\u65e5\u5fd7\u4e0a\u4e0b\u6587\u548c\u8fde\u63a5\u5668\u5ba2\u6237\u7aef\u8986\u76d6 Kafka Streams \u4e2d\u65f6\u95f4\u6233\u540c\u6b65\u7684\u589e\u5f3a\u8bed\u4e49 \u6539\u8fdb\u4e86 Stream \u7684 TaskId \u7684\u516c\u5171 API Kafka \u4e2d\u9ed8\u8ba4 serde \u53d8\u4e3a null \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.8.2 \u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.8.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.8.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.8.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.8.2 \u4fee\u590d\u4e86 CVE-2022-34917 \u4ee5\u53ca\u81ea 2.8.1 \u7248\u672c\u4ee5\u6765\u7684\u5176\u4ed6 11 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.8.1 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 9 \u6708 17 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.8.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.8.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.8.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.8.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.8.1 \u4fee\u590d\u4e86 49 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.8.0 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 4 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.8.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.8.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.8.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.8.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u4f7f\u7528\u81ea\u6211\u7ba1\u7406\u7684\u6cd5\u5b9a\u4eba\u6570\u66ff\u6362 ZooKeeper \u7684\u65e9\u671f\u8bbf\u95ee \u6dfb\u52a0\u63cf\u8ff0\u96c6\u7fa4API \u652f\u6301 SASL_SSL \u4fa6\u542c\u5668\u4e0a\u7684\u76f8\u4e92 TLS \u8eab\u4efd\u9a8c\u8bc1 JSON \u8bf7\u6c42/\u54cd\u5e94\u8c03\u8bd5\u65e5\u5fd7 \u9650\u5236\u4ee3\u7406\u8fde\u63a5\u521b\u5efa\u901f\u7387 \u4e3b\u9898\u6807\u8bc6\u7b26 \u5728 Connect REST API \u4e2d\u516c\u5f00\u4efb\u52a1\u914d\u7f6e \u66f4\u65b0 Streams FSM \u4ee5\u9610\u660e ERROR \u72b6\u6001\u542b\u4e49 \u6269\u5c55 StreamJoined \u4ee5\u5141\u8bb8\u66f4\u591a\u5b58\u50a8\u914d\u7f6e \u66f4\u65b9\u4fbf\u7684 TopologyTestDriver \u6784\u9020\u5668 \u5f15\u5165 Kafka-Streams \u7279\u5b9a\u7684\u672a\u6355\u83b7\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f \u7528\u4e8e\u542f\u52a8\u548c\u5173\u95ed Streams \u7ebf\u7a0b\u7684 API \u6539\u8fdb TimeWindowedDeserializer \u548c TimeWindowedSerde \u4ee5\u5904\u7406\u7a97\u53e3\u5927\u5c0f \u6539\u8fdb Kafka Streams \u4e2d\u7684\u8d85\u65f6\u548c\u91cd\u8bd5 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.7.2 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 11 \u6708 15 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.7.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.7.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.7.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.7.1 \u7248\u672c\u4ee5\u6765\uff0cKafka 2.7.2 \u4fee\u590d\u4e86 26 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.7.1 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 5 \u6708 10 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.7.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.7.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.7.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.7.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.7.1 \u4fee\u590d\u4e86 45 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.7.0 2020 \u5e74 12 \u6708 21 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.7.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.7.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.7.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.7.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u53ef\u914d\u7f6e\u7684 TCP \u8fde\u63a5\u8d85\u65f6\u5e76\u6539\u8fdb\u521d\u59cb\u5143\u6570\u636e\u83b7\u53d6 \u5f3a\u5236\u4ee3\u7406\u8303\u56f4\u5185\u548c\u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u8fde\u63a5\u521b\u5efa\u7387\uff08KIP-612\uff0c\u7b2c 1 \u90e8\u5206\uff09 \u9650\u5236\u521b\u5efa\u4e3b\u9898\u3001\u521b\u5efa\u5206\u533a\u548c\u5220\u9664\u4e3b\u9898\u64cd\u4f5c \u5c06 TRACE \u7ea7\u7aef\u5230\u7aef\u5ef6\u8fdf\u6307\u6807\u6dfb\u52a0\u5230 Streams \u6dfb\u52a0\u4ee3\u7406\u7aefSCRAM\u914d\u7f6eAPI \u652f\u6301PEM\u683c\u5f0f\u7684SSL\u8bc1\u4e66\u548c\u79c1\u94a5 \u5c06 RocksDB \u5185\u5b58\u6d88\u8017\u6dfb\u52a0\u5230 RocksDB \u6307\u6807\u4e2d \u6dfb\u52a0\u5bf9\u805a\u5408\u7684\u6ed1\u52a8\u7a97\u53e3\u652f\u6301 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.6.3 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 11 \u6708 15 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.3-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.3.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.3.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.6.2 \u7248\u672c\u4ee5\u6765\uff0cKafka 2.6.3 \u4fee\u590d\u4e86 11 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.6.2 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 4 \u6708 20 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.6.1 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.6.2 \u4fee\u590d\u4e86 35 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.6.1 \u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 1 \u6708 7 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.6.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.6.1 \u4fee\u590d\u4e86 41 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.6.0 2020 \u5e74 8 \u6708 3 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.6.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u9ed8\u8ba4\u542f\u7528 TLSv1.3 \u663e\u7740\u7684\u6027\u80fd\u6539\u8fdb\uff0c\u5c24\u5176\u662f\u5f53\u4ee3\u7406\u6709\u5927\u91cf\u5206\u533a\u65f6 \u5e73\u6ed1\u6269\u5c55 Kafka Streams \u5e94\u7528\u7a0b\u5e8f Kafka Streams \u652f\u6301\u66f4\u6539\u65f6\u53d1\u51fa \u65b0\u6307\u6807\u53ef\u63d0\u4f9b\u66f4\u597d\u7684\u8fd0\u8425\u6d1e\u5bdf\u529b Kafka Connect \u53ef\u4ee5\u5728\u914d\u7f6e\u65f6\u81ea\u52a8\u4e3a\u6e90\u8fde\u63a5\u5668\u521b\u5efa\u4e3b\u9898 \u6539\u8fdb\u4e86 Kafka Connect \u4e2d\u63a5\u6536\u5668\u8fde\u63a5\u5668\u7684\u9519\u8bef\u62a5\u544a\u9009\u9879 Kafka Connect \u4e2d\u7684\u65b0\u8fc7\u6ee4\u5668\u548c\u6761\u4ef6 SMT `client.dns.lookup` \u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\u73b0\u5728\u662f `use_all_dns_ips` \u5c06Zookeeper\u5347\u7ea7\u52303.5.8 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.5.1 \u53d1\u5e03\u65e5\u671f\uff1a2020 \u5e74 8 \u6708 10 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.5.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.5.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.5.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 \u81ea 2.5.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.5.1 \u4fee\u590d\u4e86 72 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.5.0 2020 \u5e74 4 \u6708 15 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.5.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.5.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.5.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.5.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a TLS 1.3 \u652f\u6301\uff081.2 \u73b0\u5728\u662f\u9ed8\u8ba4\u503c\uff09 Kafka Streams \u7684\u8054\u5408\u7ec4 Kafka Consumer \u7684\u589e\u91cf\u518d\u5e73\u8861 \u65b0\u6307\u6807\u53ef\u63d0\u4f9b\u66f4\u597d\u7684\u8fd0\u8425\u6d1e\u5bdf\u529b \u5c06Zookeeper\u5347\u7ea7\u52303.5.7 \u5f03\u7528\u5bf9 Scala 2.11 \u7684\u652f\u6301 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.4.1 2020 \u5e74 3 \u6708 12 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.4.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.4.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.4.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.4.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.4.0 2019 \u5e74 12 \u6708 16 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.4.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.4.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.4.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.4.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.4.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u5141\u8bb8\u6d88\u8d39\u8005\u4ece\u6700\u8fd1\u7684\u526f\u672c\u83b7\u53d6\u6570\u636e\u3002 \u652f\u6301\u6d88\u8d39\u8005\u518d\u5e73\u8861\u534f\u8bae\u7684\u589e\u91cf\u5408\u4f5c\u518d\u5e73\u8861\u3002 MirrorMaker 2.0 (MM2)\uff0c\u4e00\u79cd\u65b0\u7684\u591a\u96c6\u7fa4\u3001\u8de8\u6570\u636e\u4e2d\u5fc3\u590d\u5236\u5f15\u64ce\u3002 \u65b0\u7684 Java \u6388\u6743\u8005\u63a5\u53e3\u3002 \u652f\u6301 KTable \u4e2d\u7684\u975e\u952e\u8fde\u63a5\u3002 \u7528\u4e8e\u526f\u672c\u91cd\u65b0\u5206\u914d\u7684\u7ba1\u7406 API\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.3.1 2019 \u5e74 10 \u6708 24 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.3.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.3.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.3.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.3.0 2019 \u5e74 6 \u6708 25 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.3.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.3.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.3.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.3.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Kafka Connect REST API \u8fdb\u884c\u4e86\u591a\u9879\u6539\u8fdb\u3002 Kafka Connect \u73b0\u5728\u652f\u6301\u589e\u91cf\u534f\u4f5c\u518d\u5e73\u8861\u3002 Kafka Streams \u73b0\u5728\u652f\u6301\u5185\u5b58\u4e2d\u4f1a\u8bdd\u5b58\u50a8\u548c\u7a97\u53e3\u5b58\u50a8\u3002 AdminClient \u73b0\u5728\u5141\u8bb8\u7528\u6237\u786e\u5b9a\u4ed6\u4eec\u6709\u6743\u5bf9\u4e3b\u9898\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u3002 \u6709\u4e00\u4e2a\u65b0\u7684\u4ee3\u7406\u542f\u52a8\u65f6\u95f4\u6307\u6807\u3002 JMXTool \u73b0\u5728\u53ef\u4ee5\u8fde\u63a5\u5230\u5b89\u5168\u7684 RMI \u7aef\u53e3\u3002 \u6dfb\u52a0\u4e86\u589e\u91cf AlterConfigs API\u3002\u65e7\u7684 AlterConfigs API \u5df2\u88ab\u5f03\u7528\u3002 \u6211\u4eec\u73b0\u5728\u8ddf\u8e2a\u4f4e\u4e8e\u5176\u6700\u5c0f ISR \u8ba1\u6570\u7684\u5206\u533a\u3002 \u5373\u4f7f\u5728\u4ee3\u7406\u4e0a\u542f\u7528\u4e86\u81ea\u52a8\u4e3b\u9898\u521b\u5efa\uff0c\u6d88\u8d39\u8005\u73b0\u5728\u4e5f\u53ef\u4ee5\u9009\u62e9\u9000\u51fa\u3002 Kafka \u7ec4\u4ef6\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u914d\u7f6e\u5b58\u50a8\uff08KIP-421\uff09\u3002 \u6211\u4eec\u6539\u8fdb\u4e86\u9047\u5230\u9519\u8bef\u65f6\u7684\u526f\u672c\u83b7\u53d6\u5668\u884c\u4e3a\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.2.2 2019 \u5e74 12 \u6708 1 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.2.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.2.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.2.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 2.2.1 2019 \u5e74 6 \u6708 1 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.2.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.2.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.2.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 2.2.0 2019 \u5e74 3 \u6708 22 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.2.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.2.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.2.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.2.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u6dfb\u52a0\u4e86\u5bf9\u81ea\u5b9a\u4e49\u4e3b\u4f53\u540d\u79f0\u7684 SSL \u652f\u6301 \u5141\u8bb8 SASL \u8fde\u63a5\u5b9a\u671f\u91cd\u65b0\u9a8c\u8bc1 \u547d\u4ee4\u884c\u5de5\u5177 bin/kafka-topics.sh \u6dfb\u52a0\u4e86 AdminClient \u652f\u6301 \u6539\u8fdb\u7684\u6d88\u8d39\u8005\u7ec4\u7ba1\u7406\uff1a\u9ed8\u8ba4\u503c group.id \u800c null \u4e0d\u662f\u7a7a\u5b57\u7b26\u4e32 API\u6539\u8fdb\uff1a \u5236\u4f5c\u4eba\uff1a\u4ecb\u7ecd close(Duration) \u7ba1\u7406\u5ba2\u6237\u7aef\uff1a\u4ecb\u7ecd close(Duration) Kafka Streams\uff1a flatTransform() Streams DSL \u4e2d\u7684\u65b0\u8fd0\u7b97\u7b26 KafkaStreams\uff08\u548c\u5176\u4ed6\u7c7b\u522b\uff09\u73b0\u5728\u5b9e\u73b0 AutoClosable \u652f\u6301 try-with-resource \u65b0\u7684 Serdes \u548c\u9ed8\u8ba4\u65b9\u6cd5\u5b9e\u73b0 Kafka Streams \u66b4\u9732\u5185\u90e8 client.id \u901a\u8fc7 ThreadMetadata \u6307\u6807\u6539\u8fdb\uff1a\u6240\u6709 -min , -avg \u548c -max \u6307\u6807\u73b0\u5728\u5c06\u8f93\u51fa NaN \u4e3a\u9ed8\u8ba4\u503c \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.1.1 2019 \u5e74 2 \u6708 15 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.1.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.1.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.1.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 2.1.0 2018 \u5e74 11 \u6708 20 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.1.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.1.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.1.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.1.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Java 11 \u652f\u6301 \u652f\u6301 Zstandard\uff0c\u53ef\u5b9e\u73b0\u4e0e gzip \u76f8\u5f53\u7684\u538b\u7f29\uff0c\u5e76\u5177\u6709\u66f4\u9ad8\u7684\u538b\u7f29\u901f\u5ea6\uff0c\u5c24\u5176\u662f\u89e3\u538b\u7f29\u901f\u5ea6 (KIP-110) \u907f\u514d\u6d3b\u8dc3\u6d88\u8d39\u8005\u7ec4\u7684\u627f\u8bfa\u62b5\u6d88\u8fc7\u671f (KIP-211) \u5728 Producer \u4e2d\u63d0\u4f9b\u76f4\u89c2\u7684\u7528\u6237\u8d85\u65f6 (KIP-91) Kafka \u7684\u590d\u5236\u534f\u8bae\u73b0\u5728\u652f\u6301\u6539\u8fdb\u7684\u50f5\u5c38\u9632\u62a4\u3002\u4ee5\u524d\uff0c\u5728\u67d0\u4e9b\u7f55\u89c1\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4ee3\u7406\u4ece Zookeeper \u5206\u533a\uff0c\u4f46\u4e0d\u4ece\u96c6\u7fa4\u7684\u5176\u4f59\u90e8\u5206\u5206\u533a\uff0c\u90a3\u4e48\u590d\u5236\u5206\u533a\u7684\u65e5\u5fd7\u53ef\u80fd\u4f1a\u51fa\u73b0\u5206\u6b67\uff0c\u5e76\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\u5bfc\u81f4\u6570\u636e\u4e22\u5931 (KIP-320)\u3002 Streams API \u6539\u8fdb\uff08KIP-319\u3001KIP-321\u3001KIP-330\u3001KIP-353\u3001KIP-356\uff09 \u7ba1\u7406\u811a\u672c\u548c\u7ba1\u7406\u5ba2\u6237\u7aef API \u6539\u8fdb\uff0c\u4ee5\u7b80\u5316\u7ba1\u7406\u64cd\u4f5c\uff08KIP-231\u3001KIP-308\u3001KIP-322\u3001KIP-324\u3001KIP-338\u3001KIP-340\uff09 DNS \u5904\u7406\u6539\u8fdb\uff08KIP-235\u3001KIP-302\uff09 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 2.0.1 2018 \u5e74 11 \u6708 9 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.0.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.0.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.0.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 2.0.0 2018 \u5e74 7 \u6708 30 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.0.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.0.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.0.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 Kafka 2.0.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a KIP-290 \u589e\u52a0\u4e86\u5bf9\u524d\u7f00 ACL \u7684\u652f\u6301\uff0c\u7b80\u5316\u4e86\u5927\u578b\u5b89\u5168\u90e8\u7f72\u4e2d\u7684\u8bbf\u95ee\u63a7\u5236\u7ba1\u7406\u3002\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u5355\u4e2a\u89c4\u5219\u6388\u4e88\u5bf9\u5e26\u6709\u524d\u7f00\u7684\u4e3b\u9898\u3001\u6d88\u8d39\u8005\u7ec4\u6216\u4e8b\u52a1 ID \u7684\u6279\u91cf\u8bbf\u95ee\u6743\u9650\u3002\u4e3b\u9898\u521b\u5efa\u7684\u8bbf\u95ee\u63a7\u5236\u4e5f\u5f97\u5230\u4e86\u6539\u8fdb\uff0c\u53ef\u4ee5\u6388\u4e88\u521b\u5efa\u7279\u5b9a\u4e3b\u9898\u6216\u5e26\u6709\u524d\u7f00\u7684\u4e3b\u9898\u7684\u8bbf\u95ee\u6743\u9650\u3002 KIP-255 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u4f7f\u7528 OAuth2 \u4e0d\u8bb0\u540d\u4ee4\u724c\u5bf9 Kafka \u4ee3\u7406\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u7684\u6846\u67b6\u3002SASL/OAUTHBEARER \u5b9e\u73b0\u53ef\u4f7f\u7528\u7528\u4e8e\u4ee4\u724c\u68c0\u7d22\u548c\u9a8c\u8bc1\u7684\u56de\u8c03\u8fdb\u884c\u81ea\u5b9a\u4e49\u3002 \u73b0\u5728\u9ed8\u8ba4\u4e3a SSL \u8fde\u63a5\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u4ee5\u786e\u4fdd\u9ed8\u8ba4 SSL \u914d\u7f6e\u4e0d\u6613\u53d7\u5230\u4e2d\u95f4\u4eba\u653b\u51fb\u3002\u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u7981\u7528\u6b64\u9a8c\u8bc1\u3002 \u60a8\u73b0\u5728\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0 SSL \u4fe1\u4efb\u5e93\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u60a8\u8fd8\u53ef\u4ee5\u5728\u542f\u52a8\u4ee3\u7406\u4e4b\u524d\u5728 ZooKeeper \u4e2d\u914d\u7f6e\u4ee3\u7406\u4fa6\u542c\u5668\u7684\u5b89\u5168\u6027\uff0c\u5305\u62ec SSL \u5bc6\u94a5\u5e93\u548c\u4fe1\u4efb\u5e93\u5bc6\u7801\u4ee5\u53ca SASL \u7684 JAAS \u914d\u7f6e\u3002\u501f\u52a9\u6b64\u65b0\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u5c06\u654f\u611f\u5bc6\u7801\u914d\u7f6e\u4ee5\u52a0\u5bc6\u5f62\u5f0f\u5b58\u50a8\u5728 ZooKeeper \u4e2d\uff0c\u800c\u4e0d\u662f\u4ee5\u660e\u6587\u5f62\u5f0f\u5b58\u50a8\u5728\u4ee3\u7406\u5c5e\u6027\u6587\u4ef6\u4e2d\u3002 \u590d\u5236\u534f\u8bae\u5df2\u5f97\u5230\u6539\u8fdb\uff0c\u4ee5\u907f\u514d\u5728\u5feb\u901f\u9886\u5bfc\u8005\u6545\u969c\u8f6c\u79fb\u671f\u95f4\u9886\u5bfc\u8005\u548c\u8ffd\u968f\u8005\u4e4b\u95f4\u7684\u65e5\u5fd7\u5206\u6b67\u3002\u6211\u4eec\u8fd8\u901a\u8fc7\u51cf\u5c11\u6d88\u606f\u4e0b\u8f6c\u6362\u7684\u5185\u5b58\u5360\u7528\u6765\u63d0\u9ad8\u4ee3\u7406\u7684\u5f39\u6027\u3002\u901a\u8fc7\u4f7f\u7528\u6d88\u606f\u5206\u5757\uff0c\u5185\u5b58\u4f7f\u7528\u91cf\u548c\u5185\u5b58\u5f15\u7528\u65f6\u95f4\u5747\u5df2\u51cf\u5c11\uff0c\u4ee5\u907f\u514d\u4ee3\u7406\u4e2d\u51fa\u73b0 OutOfMemory \u9519\u8bef\u3002 \u73b0\u5728\uff0c\u542f\u7528\u914d\u989d\u540e\uff0c\u5728\u5e94\u7528\u4efb\u4f55\u9650\u5236\u4e4b\u524d\uff0cKafka \u5ba2\u6237\u7aef\u90fd\u4f1a\u6536\u5230\u6709\u5173\u9650\u5236\u7684\u901a\u77e5\u3002\u8fd9\u4f7f\u5ba2\u6237\u7aef\u80fd\u591f\u5728\u8d85\u51fa\u914d\u989d\u65f6\u533a\u5206\u7f51\u7edc\u9519\u8bef\u548c\u5927\u8282\u6d41\u65f6\u95f4\u3002 \u6211\u4eec\u4e3a Kafka \u6d88\u8d39\u8005\u6dfb\u52a0\u4e86\u4e00\u4e2a\u914d\u7f6e\u9009\u9879\uff0c\u4ee5\u907f\u514d\u6d88\u8d39\u8005\u65e0\u9650\u671f\u963b\u585e\u3002 \u6211\u4eec\u653e\u5f03\u4e86\u5bf9 Java 7 \u7684\u652f\u6301\uff0c\u5e76\u5220\u9664\u4e86\u4e4b\u524d\u5f03\u7528\u7684 Scala \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u3002 Kafka Connect \u5305\u542b\u8bb8\u591a\u6539\u8fdb\u548c\u529f\u80fd\u3002KIP-298 \u4f7f\u60a8\u80fd\u591f\u901a\u8fc7\u542f\u7528\u81ea\u52a8\u91cd\u8bd5\u5e76\u63a7\u5236\u8fde\u63a5\u5668\u505c\u6b62\u4e4b\u524d\u5141\u8bb8\u7684\u9519\u8bef\u6570\u91cf\u6765\u63a7\u5236\u5982\u4f55\u5904\u7406\u8fde\u63a5\u5668\u3001\u8f6c\u6362\u548c\u8f6c\u6362\u5668\u4e2d\u7684\u9519\u8bef\u3002\u65e5\u5fd7\u4e2d\u53ef\u4ee5\u5305\u542b\u66f4\u591a\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u5e2e\u52a9\u8bca\u65ad\u95ee\u9898\uff0c\u5e76\u4e14\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6d88\u8017\u7684\u6709\u95ee\u9898\u7684\u6d88\u606f\u53ef\u4ee5\u53d1\u9001\u5230\u6b7b\u4fe1\u961f\u5217\uff0c\u800c\u4e0d\u662f\u5f3a\u5236\u8fde\u63a5\u5668\u505c\u6b62\u3002 KIP-297 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u6269\u5c55\u70b9\uff0c\u53ef\u5c06\u673a\u5bc6\u79fb\u51fa\u8fde\u63a5\u5668\u914d\u7f6e\u5e76\u4e0e\u4efb\u4f55\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406\u7cfb\u7edf\u96c6\u6210\u3002\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u7684\u5360\u4f4d\u7b26\u4ec5\u5728\u5c06\u914d\u7f6e\u53d1\u9001\u5230\u8fde\u63a5\u5668\u4e4b\u524d\u89e3\u6790\uff0c\u786e\u4fdd\u673a\u5bc6\u5728\u60a8\u7684\u9996\u9009\u5bc6\u94a5\u7ba1\u7406\u7cfb\u7edf\u4e2d\u5b89\u5168\u5730\u5b58\u50a8\u548c\u7ba1\u7406\uff0c\u5e76\u4e14\u4e0d\u4f1a\u901a\u8fc7 REST API \u6216\u65e5\u5fd7\u6587\u4ef6\u516c\u5f00\u3002 \u6211\u4eec\u4e3a Kafka Streams DSL \u6dfb\u52a0\u4e86\u4e00\u4e2a\u7cbe\u7b80\u7684 Scala \u5305\u88c5\u5668 API\uff0c\u5b83\u5728\u7f16\u8bd1\u65f6\u63d0\u4f9b\u66f4\u597d\u7684\u7c7b\u578b\u63a8\u65ad\u548c\u66f4\u597d\u7684\u7c7b\u578b\u5b89\u5168\u6027\u3002Scala \u7528\u6237\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u66f4\u5c11\u7684\u6837\u677f\u6587\u4ef6\uff0c\u5c24\u5176\u662f\u4f7f\u7528\u65b0\u7684\u9690\u5f0f Serdes \u7684 Serdes\u3002 Kafka Streams Processor API \u73b0\u5728\u652f\u6301\u6d88\u606f\u6807\u5934\uff0c\u5141\u8bb8\u7528\u6237\u6dfb\u52a0\u548c\u64cd\u4f5c\u4ece\u6e90\u4e3b\u9898\u8bfb\u53d6\u7684\u6807\u5934\u5e76\u5c06\u5176\u4f20\u64ad\u5230\u63a5\u6536\u5668\u4e3b\u9898\u3002 \u7531\u4e8e\u65b0\u7684\u5355\u952e\u83b7\u53d6 API\uff0cKafka Streams \u4e2d\u7684\u7a97\u53e3\u805a\u5408\u6027\u80fd\u5f97\u5230\u4e86\u5f88\u5927\u7684\u6539\u5584\uff08\u6709\u65f6\u662f\u4e00\u4e2a\u6570\u91cf\u7ea7\uff09\u3002 \u6211\u4eec\u4f7f\u7528 kafka-streams-testutil \u5de5\u4ef6\u8fdb\u4e00\u6b65\u6539\u8fdb\u4e86 Kafka Streams \u7684\u5355\u5143\u53ef\u6d4b\u8bd5\u6027\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 1.1.1 2018 \u5e74 7 \u6708 19 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.1.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.1.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.1.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 1.1.0 2018 \u5e74 3 \u6708 28 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.1.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.1.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.1.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 Kafka 1.1.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Kafka 1.1.0 \u5bf9 Kafka \u63a7\u5236\u5668\u8fdb\u884c\u4e86\u91cd\u5927\u6539\u8fdb\uff0c\u53ef\u52a0\u5feb\u53d7\u63a7\u5173\u95ed\u901f\u5ea6\u3002\u4f5c\u4e3a\u8fd9\u9879\u5de5\u4f5c\u7684\u4e00\u90e8\u5206\uff0cZooKeeper \u4f1a\u8bdd\u8fc7\u671f\u8fb9\u7f18\u60c5\u51b5\u4e5f\u5df2\u5f97\u5230\u4fee\u590d\u3002 \u63a7\u5236\u5668\u7684\u6539\u8fdb\u8fd8\u4f7f\u5f97\u5355\u4e2a\u96c6\u7fa4\u80fd\u591f\u652f\u6301\u66f4\u591a\u5206\u533a\u3002KIP-227 \u5f15\u5165\u4e86\u589e\u91cf\u83b7\u53d6\u8bf7\u6c42\uff0c\u5728\u5206\u533a\u6570\u91cf\u8f83\u5927\u65f6\u63d0\u4f9b\u66f4\u9ad8\u6548\u7684\u590d\u5236\u3002 KIP-113 \u6dfb\u52a0\u4e86\u5bf9\u65e5\u5fd7\u76ee\u5f55\u4e4b\u95f4\u526f\u672c\u79fb\u52a8\u7684\u652f\u6301\uff0c\u4ee5\u5b9e\u73b0\u4e0e JBOD \u7684\u6570\u636e\u5e73\u8861\u3002 \u73b0\u5728\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0\u67d0\u4e9b\u4ee3\u7406\u914d\u7f6e\u9009\u9879\uff08\u4f8b\u5982 SSL \u5bc6\u94a5\u5e93\uff09\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\u548c\u52a8\u6001\u914d\u7f6e\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 KIP-226\u3002 Kafka \u4ee3\u7406\u4e2d\u6dfb\u52a0\u4e86\u57fa\u4e8e\u59d4\u6258\u4ee4\u724c\u7684\u8eab\u4efd\u9a8c\u8bc1 (KIP-48)\uff0c\u4ee5\u652f\u6301\u5927\u91cf\u5ba2\u6237\u7aef\uff0c\u800c\u4e0d\u4f1a\u5bfc\u81f4 Kerberos KDC \u6216\u5176\u4ed6\u8eab\u4efd\u9a8c\u8bc1\u670d\u52a1\u5668\u8fc7\u8f7d\u3002 Kafka Connect \u6dfb\u52a0\u4e86\u591a\u9879\u65b0\u529f\u80fd\uff0c\u5305\u62ec\u6807\u5934\u652f\u6301 (KIP-145)\u3001Connect REST \u63a5\u53e3\u4e2d\u7684 SSL \u548c Kafka \u96c6\u7fa4\u6807\u8bc6\u7b26\uff08KIP-208 \u548c KIP-238\uff09\u3001\u8fde\u63a5\u5668\u540d\u79f0\u9a8c\u8bc1 (KIP-212) \u548c\u652f\u6301\u9002\u7528\u4e8e\u63a5\u6536\u5668\u8fde\u63a5\u5668\u4e2d\u7684\u4e3b\u9898\u6b63\u5219\u8868\u8fbe\u5f0f (KIP-215)\u3002\u6b64\u5916\uff0cConnect \u5de5\u4f5c\u7ebf\u7a0b\u7684\u9ed8\u8ba4\u6700\u5927\u5806\u5927\u5c0f\u5df2\u589e\u52a0\u81f3 2GB\u3002 Kafka Streams API \u4e2d\u6dfb\u52a0\u4e86\u591a\u9879\u6539\u8fdb\uff0c\u5305\u62ec\u51cf\u5c11\u91cd\u65b0\u5206\u533a\u4e3b\u9898\u5206\u533a\u5360\u7528\u7a7a\u95f4\u3001\u9488\u5bf9\u751f\u4ea7\u6545\u969c\u7684\u53ef\u5b9a\u5236\u9519\u8bef\u5904\u7406\u4ee5\u53ca\u589e\u5f3a\u5bf9\u4ee3\u7406\u4e0d\u53ef\u7528\u7684\u6062\u590d\u80fd\u529b\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 KIP 205\u3001210\u3001220\u3001224 \u548c 239\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 1.0.2 2018 \u5e74 7 \u6708 8 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.0.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.0.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.0.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 1.0.1 2018 \u5e74 3 \u6708 5 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.0.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.0.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.0.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 1.0.0 2017 \u5e74 11 \u6708 1 \u65e5\u53d1\u5e03 \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.0.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.0.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.0.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 Kafka 1.0.0 \u4e0d\u4ec5\u4ec5\u662f\u7248\u672c\u53f7\u7684\u63d0\u5347\u3002Apache Kafka \u9879\u76ee\u7ba1\u7406\u59d4\u5458\u4f1a\u5728\u8be5\u7248\u672c\u4e2d\u5305\u542b\u4e86\u8bb8\u591a\u6709\u4ef7\u503c\u7684\u589e\u5f3a\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u5176\u4e2d\u4e00\u4e9b\u7684\u6458\u8981\uff1a \u81ea 0.10 \u7248\u672c\u63a8\u51fa\u4ee5\u6765\uff0cStreams API \u5df2\u5728 Kafka \u7528\u6237\u4e2d\u5e7f\u53d7\u6b22\u8fce\uff0c\u5305\u62ec Pinterest\u3001Rabobank\u3001Zalando \u548c The New York Times \u7b49\u3002\u5728 1.0 \u4e2d\uff0cAPI \u7ee7\u7eed\u4ee5\u5065\u5eb7\u7684\u901f\u5ea6\u53d1\u5c55\u3002\u9996\u5148\uff0c\u6784\u5efa\u5668 API \u5df2\u5f97\u5230\u6539\u8fdb (KIP-120)\u3002\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684 API \u4ee5\u516c\u5f00\u8fd0\u884c\u65f6\u6d3b\u52a8\u4efb\u52a1\u7684\u72b6\u6001 (KIP-130)\u3002\u65b0\u7684 cogroup API \u4f7f\u5904\u7406\u5206\u533a\u805a\u5408\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\uff0c\u4ee3\u7801\u4e2d\u7684 StateStore \u548c\u79fb\u52a8\u90e8\u4ef6\u66f4\u5c11 (KIP-150)\u3002\u901a\u8fc7\u589e\u5f3a print() \u548c writeAsText() \u65b9\u6cd5 (KIP-160)\uff0c\u53ef\u8c03\u8bd5\u6027\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\u5982\u679c\u8fd9\u8fd8\u4e0d\u591f\uff0c\u8fd8\u53ef\u4ee5\u67e5\u770b KIP-138 \u548c KIP-161\u3002\u6709\u5173\u6d41\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b Apache Kafka Streams \u6587\u6863\uff0c\u5305\u62ec\u4e00\u4e9b\u6709\u7528\u7684\u65b0\u6559\u7a0b\u89c6\u9891\u3002 \u5927\u89c4\u6a21\u64cd\u4f5c Kafka \u8981\u6c42\u7cfb\u7edf\u4fdd\u6301\u53ef\u89c2\u5bdf\u6027\uff0c\u4e3a\u4e86\u4f7f\u8fd9\u4e00\u70b9\u53d8\u5f97\u66f4\u5bb9\u6613\uff0c\u6211\u4eec\u5bf9\u6307\u6807\u8fdb\u884c\u4e86\u8bb8\u591a\u6539\u8fdb\u3002\u8fd9\u4e9b\u5185\u5bb9\u592a\u591a\uff0c\u65e0\u6cd5\u5728\u4e0d\u53d8\u5f97\u4e4f\u5473\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u603b\u7ed3\uff0c\u4f46 Connect \u6307\u6807\u5df2\u5f97\u5230\u663e\u7740\u6539\u8fdb (KIP-196)\uff0c\u73b0\u5728\u516c\u5f00\u4e86\u4e00\u7cfb\u5217\u65b0\u7684\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\u6307\u6807 (KIP-188)\uff0c\u800c\u4e14\u6211\u4eec\u73b0\u5728\u6709\u4e86\u5168\u5c40\u4e3b\u9898\u548c\u5206\u533a\u8ba1\u6570 ( KIP-168\uff09\u3002\u67e5\u770b KIP-164 \u548c KIP-187 \u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002 \u6211\u4eec\u73b0\u5728\u652f\u6301 Java 9\uff0c\u9664\u5176\u4ed6\u5916\uff0c\u8fd8\u53ef\u4ee5\u663e\u7740\u52a0\u5feb TLS \u548c CRC32C \u7684\u5b9e\u73b0\u901f\u5ea6\u3002\u73b0\u5728\uff0c\u5728\u7ebf\u52a0\u5bc6\u901f\u5ea6\u5c06\u4f1a\u66f4\u5feb\uff0c\u8fd9\u5c06\u4f7f Kafka \u4fdd\u6301\u5feb\u901f\uff0c\u5e76\u5728\u542f\u7528\u52a0\u5bc6\u65f6\u964d\u4f4e\u8ba1\u7b97\u6210\u672c\u3002 \u4e3a\u4e86\u4e0e\u5b89\u5168\u4e3b\u9898\u4fdd\u6301\u4e00\u81f4\uff0cKIP-152 \u6e05\u7406\u4e86\u7b80\u5355\u8eab\u4efd\u9a8c\u8bc1\u5b89\u5168\u5c42 (SASL) \u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\u7684\u9519\u8bef\u5904\u7406\u3002\u4ee5\u524d\uff0c\u4e00\u4e9b\u8eab\u4efd\u9a8c\u8bc1\u9519\u8bef\u6761\u4ef6\u4e0e\u4ee3\u7406\u6545\u969c\u65e0\u6cd5\u533a\u5206\uff0c\u5e76\u4e14\u6ca1\u6709\u4ee5\u660e\u786e\u7684\u65b9\u5f0f\u8bb0\u5f55\u3002\u73b0\u5728\u66f4\u5e72\u51c0\u4e86\u3002 Kafka \u73b0\u5728\u53ef\u4ee5\u66f4\u597d\u5730\u5bb9\u5fcd\u78c1\u76d8\u6545\u969c\u3002\u4ece\u5386\u53f2\u4e0a\u770b\uff0cJBOD \u5b58\u50a8\u914d\u7f6e\u5e76\u672a\u88ab\u63a8\u8350\uff0c\u4f46\u8be5\u67b6\u6784\u4ecd\u7136\u5f88\u8bf1\u4eba\uff1a\u6bd5\u7adf\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u4f9d\u9760 Kafka \u81ea\u5df1\u7684\u590d\u5236\u673a\u5236\u6765\u9632\u6b62\u5b58\u50a8\u6545\u969c\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 RAID\uff1f\u501f\u52a9 KIP-112\uff0cKafka \u73b0\u5728\u53ef\u4ee5\u66f4\u4f18\u96c5\u5730\u5904\u7406\u78c1\u76d8\u6545\u969c\u3002JBOD \u4ee3\u7406\u4e2d\u7684\u5355\u4e2a\u78c1\u76d8\u6545\u969c\u4e0d\u4f1a\u5bfc\u81f4\u6574\u4e2a\u4ee3\u7406\u762b\u75ea\uff1b\u76f8\u53cd\uff0c\u4ee3\u7406\u5c06\u7ee7\u7eed\u63d0\u4f9b\u529f\u80fd\u78c1\u76d8\u4e0a\u4fdd\u7559\u7684\u4efb\u4f55\u65e5\u5fd7\u6587\u4ef6\u3002 \u4ece\u7248\u672c 0.11.0 \u5f00\u59cb\uff0c\u5e42\u7b49\u751f\u4ea7\u8005\uff08\u5373\u5b58\u5728\u4e8b\u52a1\u65f6\u4f7f\u7528\u7684\u751f\u4ea7\u8005\uff0c\u5f53\u7136\u4e5f\u662f\u6211\u4eec\u7528\u4e8e\u4e00\u6b21\u6027\u5904\u7406\u7684\u751f\u4ea7\u8005\uff09\u8981\u6c42 max.in.flight.requests.per.connection \u4e3a\u7b49\u4e8e\u4e00\u3002\u4efb\u4f55\u7f16\u5199\u6216\u6d4b\u8bd5\u8fc7\u6709\u7ebf\u534f\u8bae\u7684\u4eba\u90fd\u53ef\u4ee5\u8bc1\u660e\uff0c\u8fd9\u5bf9\u541e\u5410\u91cf\u8bbe\u7f6e\u4e86\u4e0a\u9650\u3002\u611f\u8c22 KAFKA-5949\uff0c\u73b0\u5728\u53ef\u4ee5\u8fbe\u5230 5 \u4e2a\u5927\u5c0f\uff0c\u4ece\u800c\u5927\u5927\u653e\u677e\u4e86\u541e\u5410\u91cf\u9650\u5236\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002 0.11.0.3 2018 \u5e74 7 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.3-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.3.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-0.11.0.3.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.11.0.2 2017 \u5e74 11 \u6708 17 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-0.11.0.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.11.0.1 2017 \u5e74 9 \u6708 13 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.11.0.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.11.0.0 2017 \u5e74 6 \u6708 28 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.11.0.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.10.2.2 2018 \u5e74 7 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.2.2-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.10.2.2.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u5c06 2.12 \u6dfb\u52a0\u5230\u652f\u6301\u7684 Scala \u7248\u672c\u4e2d\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u4e9b\u4e0d\u540c\u7684\u7248\u672c\u624d\u6709\u610f\u4e49\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.10.2.1 2017 \u5e74 4 \u6708 26 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.2.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.10.2.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u5c06 2.12 \u6dfb\u52a0\u5230\u652f\u6301\u7684 Scala \u7248\u672c\u4e2d\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u4e9b\u4e0d\u540c\u7684\u7248\u672c\u624d\u6709\u610f\u4e49\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.10.2.0 \u53d1\u5e03\u65e5\u671f\uff1a2017 \u5e74 2 \u6708 21 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.2.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.10.2.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u5c06 2.12 \u6dfb\u52a0\u5230\u652f\u6301\u7684 Scala \u7248\u672c\u4e2d\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u4e9b\u4e0d\u540c\u7684\u7248\u672c\u624d\u6709\u610f\u4e49\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.10.1.1 2016 \u5e74 12 \u6708 20 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.1.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12\uff08alpha \u7248\u4e4b\u524d\uff09- kafka_2.12-0.10.1.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\uff0c\u5e76\u5728\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\u4e4b\u524d\u5c06 2.12 \u4f5c\u4e3a pre-alpha \u7248\u672c\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.10.1.0 2016 \u5e74 10 \u6708 20 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.1.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.1.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.1.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.10.0.1 2016 \u5e74 8 \u6708 10 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.0.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.0.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.0.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.10.0.0 2016 \u5e74 5 \u6708 22 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.0.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.0.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.0.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.9.0.1 \u53d1\u5e03\u65e5\u671f\uff1a2016 \u5e74 2 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.9.0.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.9.0.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.9.0.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.9.0.0 2015 \u5e74 11 \u6708 23 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.9.0.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.9.0.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.9.0.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 0.8.2.2 2015 \u5e74 10 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2.2-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002 0.8.2.1 2015 \u5e74 3 \u6708 11 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002 0.8.2.0 2015 \u5e74 2 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002 0.8.2-\u6d4b\u8bd5\u7248 \u53d1\u5e03\u65e5\u671f\uff1a2014 \u5e74 10 \u6708 28 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2-beta-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002 0.8.1.1 \u53d1\u5e03 2014 \u5e74 4 \u6708 29 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.1.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.8.0 - kafka_2.8.0-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.1 - kafka_2.9.1-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.9.2\uff09\u3002 0.8.1 \u53d1\u5e03 2014 \u5e74 3 \u6708 12 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.8.0 - kafka_2.8.0-0.8.1.tgz \uff08 asc \u3001 md5 \uff09 Scala 2.8.2 - kafka_2.8.2-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.1 - kafka_2.9.1-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.9.2\uff09\u3002 0.8.0 \u53d1\u5e03 2013 \u5e74 12 \u6708 3 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a kafka_2.8.0-0.8.0.tar.gz \uff08 asc \u3001 md5 \uff09 0.8.0 Beta1 \u7248\u672c 2013 \u5e74 6 \u6708 28 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.0-beta1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a kafka_2.8.0-0.8.0-beta1.tgz \uff08 asc \u3001 md5 \uff09 0.7.2 \u53d1\u5e03 \u53d1\u5e03\u65e5\u671f\uff1a2012 \u5e74 10 \u6708 10 \u65e5 \u53d1\u884c\u8bf4\u660e \u4e0b\u8f7d\uff1a kafka-0.7.2-incubating-src.tgz \uff08 asc \u3001 md5 \uff09 0.7.1 \u53d1\u5e03 \u53d1\u5e03\u65e5\u671f\uff1a2012 \u5e74 6 \u6708 27 \u65e5 \u53d1\u884c\u8bf4\u660e \u4e0b\u8f7d\uff1a kafka-0.7.1-incubating-src.tgz \uff08 asc \u3001 md5 \uff09 0.7.0 \u53d1\u5e03 2012 \u5e74 1 \u6708 4 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u4e0b\u8f7d\uff1a kafka-0.7.0-incubating-src.tar.gz \uff08 asc \u3001 md5 \uff09 \u60a8\u53ef\u4ee5\u5728\u6b64\u5904 \u4e0b\u8f7d 0.7.0-incubating \u4e4b\u524d\u7684\u7248\u672c\u3002","title":"\u4e0b\u8f7d Kafka"},{"location":"downloads/#_1","text":"3.5.1 \u662f\u6700\u65b0\u7248\u672c\u3002\u5f53\u524d\u7a33\u5b9a\u7248\u672c\u662f3.5.1 \u60a8\u53ef\u4ee5\u6309\u7167\u8fd9\u4e9b \u8fc7\u7a0b \u5e76\u4f7f\u7528\u8fd9\u4e9b \u5bc6\u94a5 \u6765\u9a8c\u8bc1\u60a8\u7684\u4e0b\u8f7d\u3002","title":"\u4e0b\u8f7d"},{"location":"downloads/#351","text":"\u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 7 \u6708 21 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.5.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.5.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.5.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.5.1\u662f\u4e00\u4e2a\u5b89\u5168\u8865\u4e01\u7248\u672c\u3002\u5b83\u5305\u542b\u5b89\u5168\u4fee\u590d\u548c\u56de\u5f52\u4fee\u590d\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u6211\u4eec\u7684 \u535a\u5ba2\u6587\u7ae0 \u548c\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.5.1"},{"location":"downloads/#350","text":"\u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 6 \u6708 15 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.5.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.5.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.5.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.5.0 \u5305\u542b\u5927\u91cf\u65b0\u529f\u80fd\u548c\u4fee\u590d\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u6211\u4eec\u7684 \u535a\u5ba2\u6587\u7ae0 \u548c\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.5.0"},{"location":"downloads/#341","text":"\u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 6 \u6708 6 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.4.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.4.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.4.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.4.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.4.1 \u4fee\u590d\u4e86 58 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e","title":"3.4.1"},{"location":"downloads/#340","text":"2023 \u5e74 2 \u6708 7 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.4.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.4.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.4.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.4.0 \u5305\u542b\u5927\u91cf\u65b0\u529f\u80fd\u548c\u4fee\u590d\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u6211\u4eec\u7684 \u535a\u5ba2\u6587\u7ae0 \u548c\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.4.0"},{"location":"downloads/#332","text":"\u53d1\u5e03\u65e5\u671f\uff1a2023 \u5e74 1 \u6708 23 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.3.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.3.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.3.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.3.1 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.3.2 \u4fee\u590d\u4e86 20 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e","title":"3.3.2"},{"location":"downloads/#331","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 10 \u6708 3 \u65e5 3.3.1 \u548c 3.3.0 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.3.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.3.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.3.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.3.1 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a KIP-833\uff1a\u5c06 KRaft \u6807\u8bb0\u4e3a\u751f\u4ea7\u5c31\u7eea KIP-778\uff1aKRaft \u5230 KRaft \u7684\u5347\u7ea7 KIP-835\uff1a\u76d1\u63a7 KRaft \u63a7\u5236\u5668\u4ef2\u88c1\u5065\u5eb7\u72b6\u51b5 KIP-794\uff1a\u4e25\u683c\u7edf\u4e00\u7684\u7c98\u6027\u5206\u533a\u5668 KIP-834\uff1a\u6682\u505c/\u6062\u590d KafkaStreams \u62d3\u6251 KIP-618\uff1a\u5bf9\u6e90\u8fde\u63a5\u5668\u7684 Exactly-Once \u652f\u6301 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 3.3.1 \u548c 3.3.0 \u53d1\u884c\u8bf4\u660e\u3002","title":"3.3.1"},{"location":"downloads/#330","text":"\u5728\u5c06\u5de5\u4ef6\u63a8\u9001\u5230 Apache \u548c Maven \u4e2d\u5fc3\u4e4b\u540e\u4f46\u5728\u53d1\u5e03\u516c\u544a\u4e4b\u524d\uff0c\u5728 3.3.0 \u7248\u672c\u4e2d\u53d1\u73b0\u4e86\u4e00\u4e2a\u91cd\u5927\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u51b3\u5b9a\u4e0d\u53d1\u5e03 3.3.0\uff0c\u800c\u662f\u53d1\u5e03\u5305\u542b\u4fee\u590d\u7a0b\u5e8f\u7684 3.3.1\u3002\u5efa\u8bae\u4e0d\u8981\u4f7f\u75283.3.0\u3002","title":"3.3.0"},{"location":"downloads/#323","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.2.3-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.2.3.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.2.3.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.2.3 \u4fee\u590d\u4e86 CVE-2022-34917 \u4ee5\u53ca\u81ea 3.2.1 \u7248\u672c\u4ee5\u6765\u7684\u5176\u4ed6 7 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.2.3"},{"location":"downloads/#322","text":"\u5728\u5c06\u5de5\u4ef6\u63a8\u9001\u5230 Maven \u4e2d\u5fc3\u4e4b\u540e\u4f46\u5728\u53d1\u5e03\u516c\u544a\u4e4b\u524d\uff0c\u5728 3.2.2 \u7248\u672c\u4e2d\u53d1\u73b0\u4e86\u4e00\u4e2a\u91cd\u5927\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u51b3\u5b9a\u4e0d\u53d1\u5e03 3.2.2\uff0c\u5e76\u53d1\u5e03\u5305\u542b\u4fee\u590d\u7a0b\u5e8f\u7684 3.2.3\u3002\u5efa\u8bae\u4e0d\u8981\u4f7f\u75283.2.2\u3002","title":"3.2.2"},{"location":"downloads/#321","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 7 \u6708 29 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.2.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.2.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.2.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.2.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.2.1 \u4fee\u590d\u4e86 13 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.2.1"},{"location":"downloads/#320","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 5 \u6708 17 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.2.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.2.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.2.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.2.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a log4j 1.x \u66ff\u6362\u4e3a reload4j KRaft \u6807\u51c6\u6388\u6743\u5668 (KIP-801) \u5411\u5206\u533a\u9886\u5bfc\u8005\u53d1\u9001\u63d0\u793a\u4ee5\u6062\u590d\u5206\u533a\uff08KIP-704\uff09 DescribeLogDirsResponse \u4e2d\u7684\u9876\u7ea7\u9519\u8bef\u4ee3\u7801\u5b57\u6bb5 (KIP-784) kafka-console- Producer\u5199\u5165\u6807\u5934\u548c\u7a7a\u503c\uff08KIP-798\u548cKIP-810\uff09 JoinGroupRequest \u548c LeaveGroupRequest \u9644\u52a0\u4e86\u539f\u56e0 (KIP-800) \u9759\u6001\u6210\u5458\u534f\u8bae\u8ba9\u9886\u5bfc\u8005\u8df3\u8fc7\u5206\u914d\uff08KIP-814\uff09 Kafka Streams \u4e2d\u7684\u673a\u67b6\u611f\u77e5\u5907\u7528\u4efb\u52a1\u5206\u914d (KIP-708) \u4ea4\u4e92\u5f0f\u67e5\u8be2 v2\uff08KIP-796\u3001KIP-805 \u548c KIP-806\uff09 Connect API \u5217\u51fa\u6240\u6709\u8fde\u63a5\u5668\u63d2\u4ef6\u5e76\u68c0\u7d22\u5176\u914d\u7f6e (KIP-769) TimestampConverter SMT \u652f\u6301\u4e0d\u540c\u7684 Unix \u65f6\u95f4\u7cbe\u5ea6 (KIP-808) \u8fde\u63a5\u6e90\u4efb\u52a1\u5904\u7406\u751f\u4ea7\u8005\u5f02\u5e38 (KIP-779) \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.2.0"},{"location":"downloads/#312","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.1.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.1.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.1.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.1.2 \u4fee\u590d\u4e86\u81ea 3.1.1 \u7248\u672c\u4ee5\u6765\u7684 CVE-2022-34917\u548c\u5176\u4ed6 4 \u4e2a\u95ee\u9898\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.1.2"},{"location":"downloads/#311","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 5 \u6708 13 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.1.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.1.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.1.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.1.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.1.1 \u4fee\u590d\u4e86 29 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.1.1"},{"location":"downloads/#310","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 1 \u6708 24 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.1.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.1.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.1.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.1.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Apache Kafka \u652f\u6301 Java 17 FetchRequest \u652f\u6301\u4e3b\u9898 ID (KIP-516) \u901a\u8fc7\u652f\u6301 OIDC (KIP-768) \u6269\u5c55 SASL/OAUTHBEARER \u6dfb\u52a0\u4ee3\u7406\u8ba1\u6570\u6307\u6807 (KIP-748) \u533a\u5206\u4ee5\u6beb\u79d2\u548c\u7eb3\u79d2\u4e3a\u5355\u4f4d\u6d4b\u91cf\u7684\u4e00\u81f4\u516c\u5236\u5ef6\u8fdf (KIP-773) \u4e0d\u63a8\u8350\u4f7f\u7528\u6025\u5207\u7684\u91cd\u65b0\u5e73\u8861\u534f\u8bae (KAFKA-13439) \u5c06 TaskId \u5b57\u6bb5\u6dfb\u52a0\u5230 StreamsException (KIP-783) \u5916\u952e\u8fde\u63a5\u4e2d\u7684\u81ea\u5b9a\u4e49\u5206\u533a\u5668 (KIP-775) \u4f7f\u7528 SessionStore/WindowStore \u7684\u5f00\u653e\u7aef\u70b9\u83b7\u53d6/findSessions \u67e5\u8be2 (KIP-766) \u5177\u6709\u5f00\u653e\u7aef\u70b9\u7684\u8303\u56f4\u67e5\u8be2\uff08KIP-763\uff09 \u5c06\u603b\u963b\u585e\u65f6\u95f4\u6307\u6807\u6dfb\u52a0\u5230 Streams (KIP-761) \u6dfb\u52a0\u989d\u5916\u7684\u914d\u7f6e\u6765\u63a7\u5236 MirrorMaker2 \u5185\u90e8\u4e3b\u9898\u547d\u540d\u7ea6\u5b9a (KIP-690) \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.1.0"},{"location":"downloads/#302","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.0.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.0.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.0.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.0.2 \u4fee\u590d\u4e86 CVE-2022-34917 \u4ee5\u53ca\u81ea 3.0.1 \u7248\u672c\u4ee5\u6765\u7684\u5176\u4ed6 10 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.0.2"},{"location":"downloads/#301","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 3 \u6708 11 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.0.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.0.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.0.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 3.0.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 3.0.1 \u4fee\u590d\u4e86 29 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.0.1"},{"location":"downloads/#300","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 9 \u6708 21 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-3.0.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-3.0.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-3.0.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 3.0.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u4e0d\u518d\u652f\u6301 Java 8 \u548c Scala 2.12 Kafka Raft \u5bf9\u5143\u6570\u636e\u4e3b\u9898\u5feb\u7167\u7684\u652f\u6301\u4ee5\u53ca\u81ea\u6211\u7ba1\u7406\u4ef2\u88c1\u7684\u5176\u4ed6\u6539\u8fdb \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a Kafka \u751f\u4ea7\u8005\u63d0\u4f9b\u66f4\u5f3a\u7684\u4ea4\u4ed8\u4fdd\u8bc1 \u5f03\u7528\u6d88\u606f\u683c\u5f0f v0 \u548c v1 OffsetFetch \u548c FindCoordinator \u8bf7\u6c42\u7684\u4f18\u5316 \u66f4\u7075\u6d3b\u7684 Mirror Maker 2 \u914d\u7f6e\u548c\u5f03\u7528 Mirror Maker 1 \u80fd\u591f\u5728 Kafka Connect \u4e2d\u7684\u5355\u4e2a\u8c03\u7528\u4e2d\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\u5668\u7684\u4efb\u52a1 \u73b0\u5728\u9ed8\u8ba4\u542f\u7528\u8fde\u63a5\u5668\u65e5\u5fd7\u4e0a\u4e0b\u6587\u548c\u8fde\u63a5\u5668\u5ba2\u6237\u7aef\u8986\u76d6 Kafka Streams \u4e2d\u65f6\u95f4\u6233\u540c\u6b65\u7684\u589e\u5f3a\u8bed\u4e49 \u6539\u8fdb\u4e86 Stream \u7684 TaskId \u7684\u516c\u5171 API Kafka \u4e2d\u9ed8\u8ba4 serde \u53d8\u4e3a null \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"3.0.0"},{"location":"downloads/#282","text":"\u53d1\u5e03\u65e5\u671f\uff1a2022 \u5e74 9 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.8.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.8.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.8.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.8.2 \u4fee\u590d\u4e86 CVE-2022-34917 \u4ee5\u53ca\u81ea 2.8.1 \u7248\u672c\u4ee5\u6765\u7684\u5176\u4ed6 11 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.8.2"},{"location":"downloads/#281","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 9 \u6708 17 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.8.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.8.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.8.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.8.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.8.1 \u4fee\u590d\u4e86 49 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.8.1"},{"location":"downloads/#280","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 4 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.8.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.8.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.8.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.8.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u4f7f\u7528\u81ea\u6211\u7ba1\u7406\u7684\u6cd5\u5b9a\u4eba\u6570\u66ff\u6362 ZooKeeper \u7684\u65e9\u671f\u8bbf\u95ee \u6dfb\u52a0\u63cf\u8ff0\u96c6\u7fa4API \u652f\u6301 SASL_SSL \u4fa6\u542c\u5668\u4e0a\u7684\u76f8\u4e92 TLS \u8eab\u4efd\u9a8c\u8bc1 JSON \u8bf7\u6c42/\u54cd\u5e94\u8c03\u8bd5\u65e5\u5fd7 \u9650\u5236\u4ee3\u7406\u8fde\u63a5\u521b\u5efa\u901f\u7387 \u4e3b\u9898\u6807\u8bc6\u7b26 \u5728 Connect REST API \u4e2d\u516c\u5f00\u4efb\u52a1\u914d\u7f6e \u66f4\u65b0 Streams FSM \u4ee5\u9610\u660e ERROR \u72b6\u6001\u542b\u4e49 \u6269\u5c55 StreamJoined \u4ee5\u5141\u8bb8\u66f4\u591a\u5b58\u50a8\u914d\u7f6e \u66f4\u65b9\u4fbf\u7684 TopologyTestDriver \u6784\u9020\u5668 \u5f15\u5165 Kafka-Streams \u7279\u5b9a\u7684\u672a\u6355\u83b7\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f \u7528\u4e8e\u542f\u52a8\u548c\u5173\u95ed Streams \u7ebf\u7a0b\u7684 API \u6539\u8fdb TimeWindowedDeserializer \u548c TimeWindowedSerde \u4ee5\u5904\u7406\u7a97\u53e3\u5927\u5c0f \u6539\u8fdb Kafka Streams \u4e2d\u7684\u8d85\u65f6\u548c\u91cd\u8bd5 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.8.0"},{"location":"downloads/#272","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 11 \u6708 15 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.7.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.7.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.7.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.7.1 \u7248\u672c\u4ee5\u6765\uff0cKafka 2.7.2 \u4fee\u590d\u4e86 26 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.7.2"},{"location":"downloads/#271","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 5 \u6708 10 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.7.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.7.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.7.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.7.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.7.1 \u4fee\u590d\u4e86 45 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.7.1"},{"location":"downloads/#270","text":"2020 \u5e74 12 \u6708 21 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.7.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.7.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.7.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.7.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u53ef\u914d\u7f6e\u7684 TCP \u8fde\u63a5\u8d85\u65f6\u5e76\u6539\u8fdb\u521d\u59cb\u5143\u6570\u636e\u83b7\u53d6 \u5f3a\u5236\u4ee3\u7406\u8303\u56f4\u5185\u548c\u6bcf\u4e2a\u4fa6\u542c\u5668\u7684\u8fde\u63a5\u521b\u5efa\u7387\uff08KIP-612\uff0c\u7b2c 1 \u90e8\u5206\uff09 \u9650\u5236\u521b\u5efa\u4e3b\u9898\u3001\u521b\u5efa\u5206\u533a\u548c\u5220\u9664\u4e3b\u9898\u64cd\u4f5c \u5c06 TRACE \u7ea7\u7aef\u5230\u7aef\u5ef6\u8fdf\u6307\u6807\u6dfb\u52a0\u5230 Streams \u6dfb\u52a0\u4ee3\u7406\u7aefSCRAM\u914d\u7f6eAPI \u652f\u6301PEM\u683c\u5f0f\u7684SSL\u8bc1\u4e66\u548c\u79c1\u94a5 \u5c06 RocksDB \u5185\u5b58\u6d88\u8017\u6dfb\u52a0\u5230 RocksDB \u6307\u6807\u4e2d \u6dfb\u52a0\u5bf9\u805a\u5408\u7684\u6ed1\u52a8\u7a97\u53e3\u652f\u6301 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.7.0"},{"location":"downloads/#263","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 11 \u6708 15 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.3-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.3.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.3.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.6.2 \u7248\u672c\u4ee5\u6765\uff0cKafka 2.6.3 \u4fee\u590d\u4e86 11 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.6.3"},{"location":"downloads/#262","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 4 \u6708 20 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.6.1 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.6.2 \u4fee\u590d\u4e86 35 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.6.2"},{"location":"downloads/#261","text":"\u53d1\u5e03\u65e5\u671f\uff1a2021 \u5e74 1 \u6708 7 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 \u81ea 2.6.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.6.1 \u4fee\u590d\u4e86 41 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.6.1"},{"location":"downloads/#260","text":"2020 \u5e74 8 \u6708 3 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.6.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.6.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.6.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.13\uff09\u3002 Kafka 2.6.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Java 11 \u6216\u66f4\u9ad8\u7248\u672c\u9ed8\u8ba4\u542f\u7528 TLSv1.3 \u663e\u7740\u7684\u6027\u80fd\u6539\u8fdb\uff0c\u5c24\u5176\u662f\u5f53\u4ee3\u7406\u6709\u5927\u91cf\u5206\u533a\u65f6 \u5e73\u6ed1\u6269\u5c55 Kafka Streams \u5e94\u7528\u7a0b\u5e8f Kafka Streams \u652f\u6301\u66f4\u6539\u65f6\u53d1\u51fa \u65b0\u6307\u6807\u53ef\u63d0\u4f9b\u66f4\u597d\u7684\u8fd0\u8425\u6d1e\u5bdf\u529b Kafka Connect \u53ef\u4ee5\u5728\u914d\u7f6e\u65f6\u81ea\u52a8\u4e3a\u6e90\u8fde\u63a5\u5668\u521b\u5efa\u4e3b\u9898 \u6539\u8fdb\u4e86 Kafka Connect \u4e2d\u63a5\u6536\u5668\u8fde\u63a5\u5668\u7684\u9519\u8bef\u62a5\u544a\u9009\u9879 Kafka Connect \u4e2d\u7684\u65b0\u8fc7\u6ee4\u5668\u548c\u6761\u4ef6 SMT `client.dns.lookup` \u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\u73b0\u5728\u662f `use_all_dns_ips` \u5c06Zookeeper\u5347\u7ea7\u52303.5.8 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.6.0"},{"location":"downloads/#251","text":"\u53d1\u5e03\u65e5\u671f\uff1a2020 \u5e74 8 \u6708 10 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.5.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.5.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.5.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 \u81ea 2.5.0 \u53d1\u5e03\u4ee5\u6765\uff0cKafka 2.5.1 \u4fee\u590d\u4e86 72 \u4e2a\u95ee\u9898\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.5.1"},{"location":"downloads/#250","text":"2020 \u5e74 4 \u6708 15 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.5.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.12 - kafka_2.12-2.5.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.5.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.5.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a TLS 1.3 \u652f\u6301\uff081.2 \u73b0\u5728\u662f\u9ed8\u8ba4\u503c\uff09 Kafka Streams \u7684\u8054\u5408\u7ec4 Kafka Consumer \u7684\u589e\u91cf\u518d\u5e73\u8861 \u65b0\u6307\u6807\u53ef\u63d0\u4f9b\u66f4\u597d\u7684\u8fd0\u8425\u6d1e\u5bdf\u529b \u5c06Zookeeper\u5347\u7ea7\u52303.5.7 \u5f03\u7528\u5bf9 Scala 2.11 \u7684\u652f\u6301 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.5.0"},{"location":"downloads/#241","text":"2020 \u5e74 3 \u6708 12 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.4.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.4.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.4.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.4.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.4.1"},{"location":"downloads/#240","text":"2019 \u5e74 12 \u6708 16 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.4.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.4.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.4.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.13 - kafka_2.13-2.4.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.4.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u5141\u8bb8\u6d88\u8d39\u8005\u4ece\u6700\u8fd1\u7684\u526f\u672c\u83b7\u53d6\u6570\u636e\u3002 \u652f\u6301\u6d88\u8d39\u8005\u518d\u5e73\u8861\u534f\u8bae\u7684\u589e\u91cf\u5408\u4f5c\u518d\u5e73\u8861\u3002 MirrorMaker 2.0 (MM2)\uff0c\u4e00\u79cd\u65b0\u7684\u591a\u96c6\u7fa4\u3001\u8de8\u6570\u636e\u4e2d\u5fc3\u590d\u5236\u5f15\u64ce\u3002 \u65b0\u7684 Java \u6388\u6743\u8005\u63a5\u53e3\u3002 \u652f\u6301 KTable \u4e2d\u7684\u975e\u952e\u8fde\u63a5\u3002 \u7528\u4e8e\u526f\u672c\u91cd\u65b0\u5206\u914d\u7684\u7ba1\u7406 API\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.4.0"},{"location":"downloads/#231","text":"2019 \u5e74 10 \u6708 24 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.3.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.3.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.3.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.3.1"},{"location":"downloads/#230","text":"2019 \u5e74 6 \u6708 25 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.3.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.3.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.3.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.3.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Kafka Connect REST API \u8fdb\u884c\u4e86\u591a\u9879\u6539\u8fdb\u3002 Kafka Connect \u73b0\u5728\u652f\u6301\u589e\u91cf\u534f\u4f5c\u518d\u5e73\u8861\u3002 Kafka Streams \u73b0\u5728\u652f\u6301\u5185\u5b58\u4e2d\u4f1a\u8bdd\u5b58\u50a8\u548c\u7a97\u53e3\u5b58\u50a8\u3002 AdminClient \u73b0\u5728\u5141\u8bb8\u7528\u6237\u786e\u5b9a\u4ed6\u4eec\u6709\u6743\u5bf9\u4e3b\u9898\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u3002 \u6709\u4e00\u4e2a\u65b0\u7684\u4ee3\u7406\u542f\u52a8\u65f6\u95f4\u6307\u6807\u3002 JMXTool \u73b0\u5728\u53ef\u4ee5\u8fde\u63a5\u5230\u5b89\u5168\u7684 RMI \u7aef\u53e3\u3002 \u6dfb\u52a0\u4e86\u589e\u91cf AlterConfigs API\u3002\u65e7\u7684 AlterConfigs API \u5df2\u88ab\u5f03\u7528\u3002 \u6211\u4eec\u73b0\u5728\u8ddf\u8e2a\u4f4e\u4e8e\u5176\u6700\u5c0f ISR \u8ba1\u6570\u7684\u5206\u533a\u3002 \u5373\u4f7f\u5728\u4ee3\u7406\u4e0a\u542f\u7528\u4e86\u81ea\u52a8\u4e3b\u9898\u521b\u5efa\uff0c\u6d88\u8d39\u8005\u73b0\u5728\u4e5f\u53ef\u4ee5\u9009\u62e9\u9000\u51fa\u3002 Kafka \u7ec4\u4ef6\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u914d\u7f6e\u5b58\u50a8\uff08KIP-421\uff09\u3002 \u6211\u4eec\u6539\u8fdb\u4e86\u9047\u5230\u9519\u8bef\u65f6\u7684\u526f\u672c\u83b7\u53d6\u5668\u884c\u4e3a\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.3.0"},{"location":"downloads/#222","text":"2019 \u5e74 12 \u6708 1 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.2.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.2.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.2.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002","title":"2.2.2"},{"location":"downloads/#221","text":"2019 \u5e74 6 \u6708 1 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.2.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.2.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.2.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002","title":"2.2.1"},{"location":"downloads/#220","text":"2019 \u5e74 3 \u6708 22 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.2.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.2.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.2.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.2.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a \u6dfb\u52a0\u4e86\u5bf9\u81ea\u5b9a\u4e49\u4e3b\u4f53\u540d\u79f0\u7684 SSL \u652f\u6301 \u5141\u8bb8 SASL \u8fde\u63a5\u5b9a\u671f\u91cd\u65b0\u9a8c\u8bc1 \u547d\u4ee4\u884c\u5de5\u5177 bin/kafka-topics.sh \u6dfb\u52a0\u4e86 AdminClient \u652f\u6301 \u6539\u8fdb\u7684\u6d88\u8d39\u8005\u7ec4\u7ba1\u7406\uff1a\u9ed8\u8ba4\u503c group.id \u800c null \u4e0d\u662f\u7a7a\u5b57\u7b26\u4e32 API\u6539\u8fdb\uff1a \u5236\u4f5c\u4eba\uff1a\u4ecb\u7ecd close(Duration) \u7ba1\u7406\u5ba2\u6237\u7aef\uff1a\u4ecb\u7ecd close(Duration) Kafka Streams\uff1a flatTransform() Streams DSL \u4e2d\u7684\u65b0\u8fd0\u7b97\u7b26 KafkaStreams\uff08\u548c\u5176\u4ed6\u7c7b\u522b\uff09\u73b0\u5728\u5b9e\u73b0 AutoClosable \u652f\u6301 try-with-resource \u65b0\u7684 Serdes \u548c\u9ed8\u8ba4\u65b9\u6cd5\u5b9e\u73b0 Kafka Streams \u66b4\u9732\u5185\u90e8 client.id \u901a\u8fc7 ThreadMetadata \u6307\u6807\u6539\u8fdb\uff1a\u6240\u6709 -min , -avg \u548c -max \u6307\u6807\u73b0\u5728\u5c06\u8f93\u51fa NaN \u4e3a\u9ed8\u8ba4\u503c \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.2.0"},{"location":"downloads/#211","text":"2019 \u5e74 2 \u6708 15 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.1.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.1.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.1.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002","title":"2.1.1"},{"location":"downloads/#210","text":"2018 \u5e74 11 \u6708 20 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.1.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.1.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.1.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002 Kafka 2.1.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Java 11 \u652f\u6301 \u652f\u6301 Zstandard\uff0c\u53ef\u5b9e\u73b0\u4e0e gzip \u76f8\u5f53\u7684\u538b\u7f29\uff0c\u5e76\u5177\u6709\u66f4\u9ad8\u7684\u538b\u7f29\u901f\u5ea6\uff0c\u5c24\u5176\u662f\u89e3\u538b\u7f29\u901f\u5ea6 (KIP-110) \u907f\u514d\u6d3b\u8dc3\u6d88\u8d39\u8005\u7ec4\u7684\u627f\u8bfa\u62b5\u6d88\u8fc7\u671f (KIP-211) \u5728 Producer \u4e2d\u63d0\u4f9b\u76f4\u89c2\u7684\u7528\u6237\u8d85\u65f6 (KIP-91) Kafka \u7684\u590d\u5236\u534f\u8bae\u73b0\u5728\u652f\u6301\u6539\u8fdb\u7684\u50f5\u5c38\u9632\u62a4\u3002\u4ee5\u524d\uff0c\u5728\u67d0\u4e9b\u7f55\u89c1\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4ee3\u7406\u4ece Zookeeper \u5206\u533a\uff0c\u4f46\u4e0d\u4ece\u96c6\u7fa4\u7684\u5176\u4f59\u90e8\u5206\u5206\u533a\uff0c\u90a3\u4e48\u590d\u5236\u5206\u533a\u7684\u65e5\u5fd7\u53ef\u80fd\u4f1a\u51fa\u73b0\u5206\u6b67\uff0c\u5e76\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\u5bfc\u81f4\u6570\u636e\u4e22\u5931 (KIP-320)\u3002 Streams API \u6539\u8fdb\uff08KIP-319\u3001KIP-321\u3001KIP-330\u3001KIP-353\u3001KIP-356\uff09 \u7ba1\u7406\u811a\u672c\u548c\u7ba1\u7406\u5ba2\u6237\u7aef API \u6539\u8fdb\uff0c\u4ee5\u7b80\u5316\u7ba1\u7406\u64cd\u4f5c\uff08KIP-231\u3001KIP-308\u3001KIP-322\u3001KIP-324\u3001KIP-338\u3001KIP-340\uff09 DNS \u5904\u7406\u6539\u8fdb\uff08KIP-235\u3001KIP-302\uff09 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.1.0"},{"location":"downloads/#201","text":"2018 \u5e74 11 \u6708 9 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.0.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.0.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.0.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.12\uff09\u3002","title":"2.0.1"},{"location":"downloads/#200","text":"2018 \u5e74 7 \u6708 30 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-2.0.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-2.0.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-2.0.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 Kafka 2.0.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a KIP-290 \u589e\u52a0\u4e86\u5bf9\u524d\u7f00 ACL \u7684\u652f\u6301\uff0c\u7b80\u5316\u4e86\u5927\u578b\u5b89\u5168\u90e8\u7f72\u4e2d\u7684\u8bbf\u95ee\u63a7\u5236\u7ba1\u7406\u3002\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u5355\u4e2a\u89c4\u5219\u6388\u4e88\u5bf9\u5e26\u6709\u524d\u7f00\u7684\u4e3b\u9898\u3001\u6d88\u8d39\u8005\u7ec4\u6216\u4e8b\u52a1 ID \u7684\u6279\u91cf\u8bbf\u95ee\u6743\u9650\u3002\u4e3b\u9898\u521b\u5efa\u7684\u8bbf\u95ee\u63a7\u5236\u4e5f\u5f97\u5230\u4e86\u6539\u8fdb\uff0c\u53ef\u4ee5\u6388\u4e88\u521b\u5efa\u7279\u5b9a\u4e3b\u9898\u6216\u5e26\u6709\u524d\u7f00\u7684\u4e3b\u9898\u7684\u8bbf\u95ee\u6743\u9650\u3002 KIP-255 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u4f7f\u7528 OAuth2 \u4e0d\u8bb0\u540d\u4ee4\u724c\u5bf9 Kafka \u4ee3\u7406\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u7684\u6846\u67b6\u3002SASL/OAUTHBEARER \u5b9e\u73b0\u53ef\u4f7f\u7528\u7528\u4e8e\u4ee4\u724c\u68c0\u7d22\u548c\u9a8c\u8bc1\u7684\u56de\u8c03\u8fdb\u884c\u81ea\u5b9a\u4e49\u3002 \u73b0\u5728\u9ed8\u8ba4\u4e3a SSL \u8fde\u63a5\u542f\u7528\u4e3b\u673a\u540d\u9a8c\u8bc1\uff0c\u4ee5\u786e\u4fdd\u9ed8\u8ba4 SSL \u914d\u7f6e\u4e0d\u6613\u53d7\u5230\u4e2d\u95f4\u4eba\u653b\u51fb\u3002\u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u7981\u7528\u6b64\u9a8c\u8bc1\u3002 \u60a8\u73b0\u5728\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0 SSL \u4fe1\u4efb\u5e93\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u60a8\u8fd8\u53ef\u4ee5\u5728\u542f\u52a8\u4ee3\u7406\u4e4b\u524d\u5728 ZooKeeper \u4e2d\u914d\u7f6e\u4ee3\u7406\u4fa6\u542c\u5668\u7684\u5b89\u5168\u6027\uff0c\u5305\u62ec SSL \u5bc6\u94a5\u5e93\u548c\u4fe1\u4efb\u5e93\u5bc6\u7801\u4ee5\u53ca SASL \u7684 JAAS \u914d\u7f6e\u3002\u501f\u52a9\u6b64\u65b0\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u5c06\u654f\u611f\u5bc6\u7801\u914d\u7f6e\u4ee5\u52a0\u5bc6\u5f62\u5f0f\u5b58\u50a8\u5728 ZooKeeper \u4e2d\uff0c\u800c\u4e0d\u662f\u4ee5\u660e\u6587\u5f62\u5f0f\u5b58\u50a8\u5728\u4ee3\u7406\u5c5e\u6027\u6587\u4ef6\u4e2d\u3002 \u590d\u5236\u534f\u8bae\u5df2\u5f97\u5230\u6539\u8fdb\uff0c\u4ee5\u907f\u514d\u5728\u5feb\u901f\u9886\u5bfc\u8005\u6545\u969c\u8f6c\u79fb\u671f\u95f4\u9886\u5bfc\u8005\u548c\u8ffd\u968f\u8005\u4e4b\u95f4\u7684\u65e5\u5fd7\u5206\u6b67\u3002\u6211\u4eec\u8fd8\u901a\u8fc7\u51cf\u5c11\u6d88\u606f\u4e0b\u8f6c\u6362\u7684\u5185\u5b58\u5360\u7528\u6765\u63d0\u9ad8\u4ee3\u7406\u7684\u5f39\u6027\u3002\u901a\u8fc7\u4f7f\u7528\u6d88\u606f\u5206\u5757\uff0c\u5185\u5b58\u4f7f\u7528\u91cf\u548c\u5185\u5b58\u5f15\u7528\u65f6\u95f4\u5747\u5df2\u51cf\u5c11\uff0c\u4ee5\u907f\u514d\u4ee3\u7406\u4e2d\u51fa\u73b0 OutOfMemory \u9519\u8bef\u3002 \u73b0\u5728\uff0c\u542f\u7528\u914d\u989d\u540e\uff0c\u5728\u5e94\u7528\u4efb\u4f55\u9650\u5236\u4e4b\u524d\uff0cKafka \u5ba2\u6237\u7aef\u90fd\u4f1a\u6536\u5230\u6709\u5173\u9650\u5236\u7684\u901a\u77e5\u3002\u8fd9\u4f7f\u5ba2\u6237\u7aef\u80fd\u591f\u5728\u8d85\u51fa\u914d\u989d\u65f6\u533a\u5206\u7f51\u7edc\u9519\u8bef\u548c\u5927\u8282\u6d41\u65f6\u95f4\u3002 \u6211\u4eec\u4e3a Kafka \u6d88\u8d39\u8005\u6dfb\u52a0\u4e86\u4e00\u4e2a\u914d\u7f6e\u9009\u9879\uff0c\u4ee5\u907f\u514d\u6d88\u8d39\u8005\u65e0\u9650\u671f\u963b\u585e\u3002 \u6211\u4eec\u653e\u5f03\u4e86\u5bf9 Java 7 \u7684\u652f\u6301\uff0c\u5e76\u5220\u9664\u4e86\u4e4b\u524d\u5f03\u7528\u7684 Scala \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u3002 Kafka Connect \u5305\u542b\u8bb8\u591a\u6539\u8fdb\u548c\u529f\u80fd\u3002KIP-298 \u4f7f\u60a8\u80fd\u591f\u901a\u8fc7\u542f\u7528\u81ea\u52a8\u91cd\u8bd5\u5e76\u63a7\u5236\u8fde\u63a5\u5668\u505c\u6b62\u4e4b\u524d\u5141\u8bb8\u7684\u9519\u8bef\u6570\u91cf\u6765\u63a7\u5236\u5982\u4f55\u5904\u7406\u8fde\u63a5\u5668\u3001\u8f6c\u6362\u548c\u8f6c\u6362\u5668\u4e2d\u7684\u9519\u8bef\u3002\u65e5\u5fd7\u4e2d\u53ef\u4ee5\u5305\u542b\u66f4\u591a\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u5e2e\u52a9\u8bca\u65ad\u95ee\u9898\uff0c\u5e76\u4e14\u63a5\u6536\u5668\u8fde\u63a5\u5668\u6d88\u8017\u7684\u6709\u95ee\u9898\u7684\u6d88\u606f\u53ef\u4ee5\u53d1\u9001\u5230\u6b7b\u4fe1\u961f\u5217\uff0c\u800c\u4e0d\u662f\u5f3a\u5236\u8fde\u63a5\u5668\u505c\u6b62\u3002 KIP-297 \u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u6269\u5c55\u70b9\uff0c\u53ef\u5c06\u673a\u5bc6\u79fb\u51fa\u8fde\u63a5\u5668\u914d\u7f6e\u5e76\u4e0e\u4efb\u4f55\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406\u7cfb\u7edf\u96c6\u6210\u3002\u8fde\u63a5\u5668\u914d\u7f6e\u4e2d\u7684\u5360\u4f4d\u7b26\u4ec5\u5728\u5c06\u914d\u7f6e\u53d1\u9001\u5230\u8fde\u63a5\u5668\u4e4b\u524d\u89e3\u6790\uff0c\u786e\u4fdd\u673a\u5bc6\u5728\u60a8\u7684\u9996\u9009\u5bc6\u94a5\u7ba1\u7406\u7cfb\u7edf\u4e2d\u5b89\u5168\u5730\u5b58\u50a8\u548c\u7ba1\u7406\uff0c\u5e76\u4e14\u4e0d\u4f1a\u901a\u8fc7 REST API \u6216\u65e5\u5fd7\u6587\u4ef6\u516c\u5f00\u3002 \u6211\u4eec\u4e3a Kafka Streams DSL \u6dfb\u52a0\u4e86\u4e00\u4e2a\u7cbe\u7b80\u7684 Scala \u5305\u88c5\u5668 API\uff0c\u5b83\u5728\u7f16\u8bd1\u65f6\u63d0\u4f9b\u66f4\u597d\u7684\u7c7b\u578b\u63a8\u65ad\u548c\u66f4\u597d\u7684\u7c7b\u578b\u5b89\u5168\u6027\u3002Scala \u7528\u6237\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u66f4\u5c11\u7684\u6837\u677f\u6587\u4ef6\uff0c\u5c24\u5176\u662f\u4f7f\u7528\u65b0\u7684\u9690\u5f0f Serdes \u7684 Serdes\u3002 Kafka Streams Processor API \u73b0\u5728\u652f\u6301\u6d88\u606f\u6807\u5934\uff0c\u5141\u8bb8\u7528\u6237\u6dfb\u52a0\u548c\u64cd\u4f5c\u4ece\u6e90\u4e3b\u9898\u8bfb\u53d6\u7684\u6807\u5934\u5e76\u5c06\u5176\u4f20\u64ad\u5230\u63a5\u6536\u5668\u4e3b\u9898\u3002 \u7531\u4e8e\u65b0\u7684\u5355\u952e\u83b7\u53d6 API\uff0cKafka Streams \u4e2d\u7684\u7a97\u53e3\u805a\u5408\u6027\u80fd\u5f97\u5230\u4e86\u5f88\u5927\u7684\u6539\u5584\uff08\u6709\u65f6\u662f\u4e00\u4e2a\u6570\u91cf\u7ea7\uff09\u3002 \u6211\u4eec\u4f7f\u7528 kafka-streams-testutil \u5de5\u4ef6\u8fdb\u4e00\u6b65\u6539\u8fdb\u4e86 Kafka Streams \u7684\u5355\u5143\u53ef\u6d4b\u8bd5\u6027\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"2.0.0"},{"location":"downloads/#111","text":"2018 \u5e74 7 \u6708 19 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.1.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.1.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.1.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"1.1.1"},{"location":"downloads/#110","text":"2018 \u5e74 3 \u6708 28 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.1.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.1.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.1.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 Kafka 1.1.0 \u5305\u542b\u8bb8\u591a\u91cd\u8981\u7684\u65b0\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u663e\u7740\u53d8\u5316\u7684\u6458\u8981\uff1a Kafka 1.1.0 \u5bf9 Kafka \u63a7\u5236\u5668\u8fdb\u884c\u4e86\u91cd\u5927\u6539\u8fdb\uff0c\u53ef\u52a0\u5feb\u53d7\u63a7\u5173\u95ed\u901f\u5ea6\u3002\u4f5c\u4e3a\u8fd9\u9879\u5de5\u4f5c\u7684\u4e00\u90e8\u5206\uff0cZooKeeper \u4f1a\u8bdd\u8fc7\u671f\u8fb9\u7f18\u60c5\u51b5\u4e5f\u5df2\u5f97\u5230\u4fee\u590d\u3002 \u63a7\u5236\u5668\u7684\u6539\u8fdb\u8fd8\u4f7f\u5f97\u5355\u4e2a\u96c6\u7fa4\u80fd\u591f\u652f\u6301\u66f4\u591a\u5206\u533a\u3002KIP-227 \u5f15\u5165\u4e86\u589e\u91cf\u83b7\u53d6\u8bf7\u6c42\uff0c\u5728\u5206\u533a\u6570\u91cf\u8f83\u5927\u65f6\u63d0\u4f9b\u66f4\u9ad8\u6548\u7684\u590d\u5236\u3002 KIP-113 \u6dfb\u52a0\u4e86\u5bf9\u65e5\u5fd7\u76ee\u5f55\u4e4b\u95f4\u526f\u672c\u79fb\u52a8\u7684\u652f\u6301\uff0c\u4ee5\u5b9e\u73b0\u4e0e JBOD \u7684\u6570\u636e\u5e73\u8861\u3002 \u73b0\u5728\u53ef\u4ee5\u52a8\u6001\u66f4\u65b0\u67d0\u4e9b\u4ee3\u7406\u914d\u7f6e\u9009\u9879\uff08\u4f8b\u5982 SSL \u5bc6\u94a5\u5e93\uff09\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u4ee3\u7406\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\u548c\u52a8\u6001\u914d\u7f6e\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 KIP-226\u3002 Kafka \u4ee3\u7406\u4e2d\u6dfb\u52a0\u4e86\u57fa\u4e8e\u59d4\u6258\u4ee4\u724c\u7684\u8eab\u4efd\u9a8c\u8bc1 (KIP-48)\uff0c\u4ee5\u652f\u6301\u5927\u91cf\u5ba2\u6237\u7aef\uff0c\u800c\u4e0d\u4f1a\u5bfc\u81f4 Kerberos KDC \u6216\u5176\u4ed6\u8eab\u4efd\u9a8c\u8bc1\u670d\u52a1\u5668\u8fc7\u8f7d\u3002 Kafka Connect \u6dfb\u52a0\u4e86\u591a\u9879\u65b0\u529f\u80fd\uff0c\u5305\u62ec\u6807\u5934\u652f\u6301 (KIP-145)\u3001Connect REST \u63a5\u53e3\u4e2d\u7684 SSL \u548c Kafka \u96c6\u7fa4\u6807\u8bc6\u7b26\uff08KIP-208 \u548c KIP-238\uff09\u3001\u8fde\u63a5\u5668\u540d\u79f0\u9a8c\u8bc1 (KIP-212) \u548c\u652f\u6301\u9002\u7528\u4e8e\u63a5\u6536\u5668\u8fde\u63a5\u5668\u4e2d\u7684\u4e3b\u9898\u6b63\u5219\u8868\u8fbe\u5f0f (KIP-215)\u3002\u6b64\u5916\uff0cConnect \u5de5\u4f5c\u7ebf\u7a0b\u7684\u9ed8\u8ba4\u6700\u5927\u5806\u5927\u5c0f\u5df2\u589e\u52a0\u81f3 2GB\u3002 Kafka Streams API \u4e2d\u6dfb\u52a0\u4e86\u591a\u9879\u6539\u8fdb\uff0c\u5305\u62ec\u51cf\u5c11\u91cd\u65b0\u5206\u533a\u4e3b\u9898\u5206\u533a\u5360\u7528\u7a7a\u95f4\u3001\u9488\u5bf9\u751f\u4ea7\u6545\u969c\u7684\u53ef\u5b9a\u5236\u9519\u8bef\u5904\u7406\u4ee5\u53ca\u589e\u5f3a\u5bf9\u4ee3\u7406\u4e0d\u53ef\u7528\u7684\u6062\u590d\u80fd\u529b\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 KIP 205\u3001210\u3001220\u3001224 \u548c 239\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"1.1.0"},{"location":"downloads/#102","text":"2018 \u5e74 7 \u6708 8 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.0.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.0.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.0.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"1.0.2"},{"location":"downloads/#101","text":"2018 \u5e74 3 \u6708 5 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.0.1-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.0.1.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.0.1.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"1.0.1"},{"location":"downloads/#100","text":"2017 \u5e74 11 \u6708 1 \u65e5\u53d1\u5e03 \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-1.0.0-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-1.0.0.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-1.0.0.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002 Kafka 1.0.0 \u4e0d\u4ec5\u4ec5\u662f\u7248\u672c\u53f7\u7684\u63d0\u5347\u3002Apache Kafka \u9879\u76ee\u7ba1\u7406\u59d4\u5458\u4f1a\u5728\u8be5\u7248\u672c\u4e2d\u5305\u542b\u4e86\u8bb8\u591a\u6709\u4ef7\u503c\u7684\u589e\u5f3a\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u5176\u4e2d\u4e00\u4e9b\u7684\u6458\u8981\uff1a \u81ea 0.10 \u7248\u672c\u63a8\u51fa\u4ee5\u6765\uff0cStreams API \u5df2\u5728 Kafka \u7528\u6237\u4e2d\u5e7f\u53d7\u6b22\u8fce\uff0c\u5305\u62ec Pinterest\u3001Rabobank\u3001Zalando \u548c The New York Times \u7b49\u3002\u5728 1.0 \u4e2d\uff0cAPI \u7ee7\u7eed\u4ee5\u5065\u5eb7\u7684\u901f\u5ea6\u53d1\u5c55\u3002\u9996\u5148\uff0c\u6784\u5efa\u5668 API \u5df2\u5f97\u5230\u6539\u8fdb (KIP-120)\u3002\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684 API \u4ee5\u516c\u5f00\u8fd0\u884c\u65f6\u6d3b\u52a8\u4efb\u52a1\u7684\u72b6\u6001 (KIP-130)\u3002\u65b0\u7684 cogroup API \u4f7f\u5904\u7406\u5206\u533a\u805a\u5408\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\uff0c\u4ee3\u7801\u4e2d\u7684 StateStore \u548c\u79fb\u52a8\u90e8\u4ef6\u66f4\u5c11 (KIP-150)\u3002\u901a\u8fc7\u589e\u5f3a print() \u548c writeAsText() \u65b9\u6cd5 (KIP-160)\uff0c\u53ef\u8c03\u8bd5\u6027\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\u5982\u679c\u8fd9\u8fd8\u4e0d\u591f\uff0c\u8fd8\u53ef\u4ee5\u67e5\u770b KIP-138 \u548c KIP-161\u3002\u6709\u5173\u6d41\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b Apache Kafka Streams \u6587\u6863\uff0c\u5305\u62ec\u4e00\u4e9b\u6709\u7528\u7684\u65b0\u6559\u7a0b\u89c6\u9891\u3002 \u5927\u89c4\u6a21\u64cd\u4f5c Kafka \u8981\u6c42\u7cfb\u7edf\u4fdd\u6301\u53ef\u89c2\u5bdf\u6027\uff0c\u4e3a\u4e86\u4f7f\u8fd9\u4e00\u70b9\u53d8\u5f97\u66f4\u5bb9\u6613\uff0c\u6211\u4eec\u5bf9\u6307\u6807\u8fdb\u884c\u4e86\u8bb8\u591a\u6539\u8fdb\u3002\u8fd9\u4e9b\u5185\u5bb9\u592a\u591a\uff0c\u65e0\u6cd5\u5728\u4e0d\u53d8\u5f97\u4e4f\u5473\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u603b\u7ed3\uff0c\u4f46 Connect \u6307\u6807\u5df2\u5f97\u5230\u663e\u7740\u6539\u8fdb (KIP-196)\uff0c\u73b0\u5728\u516c\u5f00\u4e86\u4e00\u7cfb\u5217\u65b0\u7684\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\u6307\u6807 (KIP-188)\uff0c\u800c\u4e14\u6211\u4eec\u73b0\u5728\u6709\u4e86\u5168\u5c40\u4e3b\u9898\u548c\u5206\u533a\u8ba1\u6570 ( KIP-168\uff09\u3002\u67e5\u770b KIP-164 \u548c KIP-187 \u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002 \u6211\u4eec\u73b0\u5728\u652f\u6301 Java 9\uff0c\u9664\u5176\u4ed6\u5916\uff0c\u8fd8\u53ef\u4ee5\u663e\u7740\u52a0\u5feb TLS \u548c CRC32C \u7684\u5b9e\u73b0\u901f\u5ea6\u3002\u73b0\u5728\uff0c\u5728\u7ebf\u52a0\u5bc6\u901f\u5ea6\u5c06\u4f1a\u66f4\u5feb\uff0c\u8fd9\u5c06\u4f7f Kafka \u4fdd\u6301\u5feb\u901f\uff0c\u5e76\u5728\u542f\u7528\u52a0\u5bc6\u65f6\u964d\u4f4e\u8ba1\u7b97\u6210\u672c\u3002 \u4e3a\u4e86\u4e0e\u5b89\u5168\u4e3b\u9898\u4fdd\u6301\u4e00\u81f4\uff0cKIP-152 \u6e05\u7406\u4e86\u7b80\u5355\u8eab\u4efd\u9a8c\u8bc1\u5b89\u5168\u5c42 (SASL) \u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\u7684\u9519\u8bef\u5904\u7406\u3002\u4ee5\u524d\uff0c\u4e00\u4e9b\u8eab\u4efd\u9a8c\u8bc1\u9519\u8bef\u6761\u4ef6\u4e0e\u4ee3\u7406\u6545\u969c\u65e0\u6cd5\u533a\u5206\uff0c\u5e76\u4e14\u6ca1\u6709\u4ee5\u660e\u786e\u7684\u65b9\u5f0f\u8bb0\u5f55\u3002\u73b0\u5728\u66f4\u5e72\u51c0\u4e86\u3002 Kafka \u73b0\u5728\u53ef\u4ee5\u66f4\u597d\u5730\u5bb9\u5fcd\u78c1\u76d8\u6545\u969c\u3002\u4ece\u5386\u53f2\u4e0a\u770b\uff0cJBOD \u5b58\u50a8\u914d\u7f6e\u5e76\u672a\u88ab\u63a8\u8350\uff0c\u4f46\u8be5\u67b6\u6784\u4ecd\u7136\u5f88\u8bf1\u4eba\uff1a\u6bd5\u7adf\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u4f9d\u9760 Kafka \u81ea\u5df1\u7684\u590d\u5236\u673a\u5236\u6765\u9632\u6b62\u5b58\u50a8\u6545\u969c\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 RAID\uff1f\u501f\u52a9 KIP-112\uff0cKafka \u73b0\u5728\u53ef\u4ee5\u66f4\u4f18\u96c5\u5730\u5904\u7406\u78c1\u76d8\u6545\u969c\u3002JBOD \u4ee3\u7406\u4e2d\u7684\u5355\u4e2a\u78c1\u76d8\u6545\u969c\u4e0d\u4f1a\u5bfc\u81f4\u6574\u4e2a\u4ee3\u7406\u762b\u75ea\uff1b\u76f8\u53cd\uff0c\u4ee3\u7406\u5c06\u7ee7\u7eed\u63d0\u4f9b\u529f\u80fd\u78c1\u76d8\u4e0a\u4fdd\u7559\u7684\u4efb\u4f55\u65e5\u5fd7\u6587\u4ef6\u3002 \u4ece\u7248\u672c 0.11.0 \u5f00\u59cb\uff0c\u5e42\u7b49\u751f\u4ea7\u8005\uff08\u5373\u5b58\u5728\u4e8b\u52a1\u65f6\u4f7f\u7528\u7684\u751f\u4ea7\u8005\uff0c\u5f53\u7136\u4e5f\u662f\u6211\u4eec\u7528\u4e8e\u4e00\u6b21\u6027\u5904\u7406\u7684\u751f\u4ea7\u8005\uff09\u8981\u6c42 max.in.flight.requests.per.connection \u4e3a\u7b49\u4e8e\u4e00\u3002\u4efb\u4f55\u7f16\u5199\u6216\u6d4b\u8bd5\u8fc7\u6709\u7ebf\u534f\u8bae\u7684\u4eba\u90fd\u53ef\u4ee5\u8bc1\u660e\uff0c\u8fd9\u5bf9\u541e\u5410\u91cf\u8bbe\u7f6e\u4e86\u4e0a\u9650\u3002\u611f\u8c22 KAFKA-5949\uff0c\u73b0\u5728\u53ef\u4ee5\u8fbe\u5230 5 \u4e2a\u5927\u5c0f\uff0c\u4ece\u800c\u5927\u5927\u653e\u677e\u4e86\u541e\u5410\u91cf\u9650\u5236\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u8be6\u7ec6\u7684 \u53d1\u884c\u8bf4\u660e \u3002","title":"1.0.0"},{"location":"downloads/#01103","text":"2018 \u5e74 7 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.3-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.3.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-0.11.0.3.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.11.0.3"},{"location":"downloads/#01102","text":"2017 \u5e74 11 \u6708 17 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.2-src.tgz \uff08 asc \u3001 sha512 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.2.tgz \uff08 asc \uff0c sha512 \uff09 Scala 2.12 - kafka_2.12-0.11.0.2.tgz \uff08 asc \uff0c sha512 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.11.0.2"},{"location":"downloads/#01101","text":"2017 \u5e74 9 \u6708 13 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.11.0.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.11.0.1"},{"location":"downloads/#01100","text":"2017 \u5e74 6 \u6708 28 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.11.0.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.11 - kafka_2.11-0.11.0.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.11.0.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.11.0.0"},{"location":"downloads/#01022","text":"2018 \u5e74 7 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.2.2-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.10.2.2.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u5c06 2.12 \u6dfb\u52a0\u5230\u652f\u6301\u7684 Scala \u7248\u672c\u4e2d\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u4e9b\u4e0d\u540c\u7684\u7248\u672c\u624d\u6709\u610f\u4e49\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.10.2.2"},{"location":"downloads/#01021","text":"2017 \u5e74 4 \u6708 26 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.2.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.10.2.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u5c06 2.12 \u6dfb\u52a0\u5230\u652f\u6301\u7684 Scala \u7248\u672c\u4e2d\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u4e9b\u4e0d\u540c\u7684\u7248\u672c\u624d\u6709\u610f\u4e49\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.10.2.1"},{"location":"downloads/#01020","text":"\u53d1\u5e03\u65e5\u671f\uff1a2017 \u5e74 2 \u6708 21 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.2.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12 - kafka_2.12-0.10.2.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u5c06 2.12 \u6dfb\u52a0\u5230\u652f\u6301\u7684 Scala \u7248\u672c\u4e2d\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u4e9b\u4e0d\u540c\u7684\u7248\u672c\u624d\u6709\u610f\u4e49\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.10.2.0"},{"location":"downloads/#01011","text":"2016 \u5e74 12 \u6708 20 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.1.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.12\uff08alpha \u7248\u4e4b\u524d\uff09- kafka_2.12-0.10.1.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\uff0c\u5e76\u5728\u4e0b\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\u4e4b\u524d\u5c06 2.12 \u4f5c\u4e3a pre-alpha \u7248\u672c\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.10.1.1"},{"location":"downloads/#01010","text":"2016 \u5e74 10 \u6708 20 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.1.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.1.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.1.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.10.1.0"},{"location":"downloads/#01001","text":"2016 \u5e74 8 \u6708 10 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.0.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.0.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.0.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.10.0.1"},{"location":"downloads/#01000","text":"2016 \u5e74 5 \u6708 22 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.10.0.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.10.0.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.10.0.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.10.0.0"},{"location":"downloads/#0901","text":"\u53d1\u5e03\u65e5\u671f\uff1a2016 \u5e74 2 \u6708 19 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.9.0.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.9.0.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.9.0.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.9.0.1"},{"location":"downloads/#0900","text":"2015 \u5e74 11 \u6708 23 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.9.0.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.10 - kafka_2.10-0.9.0.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.9.0.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.11\uff09\u3002","title":"0.9.0.0"},{"location":"downloads/#0822","text":"2015 \u5e74 10 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2.2-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2.2.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002","title":"0.8.2.2"},{"location":"downloads/#0821","text":"2015 \u5e74 3 \u6708 11 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002","title":"0.8.2.1"},{"location":"downloads/#0820","text":"2015 \u5e74 2 \u6708 2 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2.0.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002","title":"0.8.2.0"},{"location":"downloads/#082-","text":"\u53d1\u5e03\u65e5\u671f\uff1a2014 \u5e74 10 \u6708 28 \u65e5 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.2-beta-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.9.1 - kafka_2.9.1-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.11 - kafka_2.11-0.8.2-beta.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.10\uff09\u3002","title":"0.8.2-\u6d4b\u8bd5\u7248"},{"location":"downloads/#0811","text":"2014 \u5e74 4 \u6708 29 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.1.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.8.0 - kafka_2.8.0-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.1 - kafka_2.9.1-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.1.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.9.2\uff09\u3002","title":"0.8.1.1 \u53d1\u5e03"},{"location":"downloads/#081","text":"2014 \u5e74 3 \u6708 12 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a Scala 2.8.0 - kafka_2.8.0-0.8.1.tgz \uff08 asc \u3001 md5 \uff09 Scala 2.8.2 - kafka_2.8.2-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.1 - kafka_2.9.1-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.9.2 - kafka_2.9.2-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 Scala 2.10 - kafka_2.10-0.8.1.tgz \uff08 asc \uff0c md5 \uff09 \u6211\u4eec\u9488\u5bf9\u591a\u4e2a\u7248\u672c\u7684 Scala \u8fdb\u884c\u6784\u5efa\u3002\u4ec5\u5f53\u60a8\u4f7f\u7528 Scala \u5e76\u4e14\u60a8\u60f3\u8981\u4e3a\u60a8\u4f7f\u7528\u7684\u540c\u4e00 Scala \u7248\u672c\u6784\u5efa\u7248\u672c\u65f6\uff0c\u8fd9\u624d\u91cd\u8981\u3002\u5426\u5219\u4efb\u4f55\u7248\u672c\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\uff08\u63a8\u83502.9.2\uff09\u3002","title":"0.8.1 \u53d1\u5e03"},{"location":"downloads/#080","text":"2013 \u5e74 12 \u6708 3 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.0-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a kafka_2.8.0-0.8.0.tar.gz \uff08 asc \u3001 md5 \uff09","title":"0.8.0 \u53d1\u5e03"},{"location":"downloads/#080-beta1","text":"2013 \u5e74 6 \u6708 28 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u6e90\u7801\u4e0b\u8f7d\uff1a kafka-0.8.0-beta1-src.tgz \uff08 asc \u3001 md5 \uff09 \u4e8c\u8fdb\u5236\u4e0b\u8f7d\uff1a kafka_2.8.0-0.8.0-beta1.tgz \uff08 asc \u3001 md5 \uff09","title":"0.8.0 Beta1 \u7248\u672c"},{"location":"downloads/#072","text":"\u53d1\u5e03\u65e5\u671f\uff1a2012 \u5e74 10 \u6708 10 \u65e5 \u53d1\u884c\u8bf4\u660e \u4e0b\u8f7d\uff1a kafka-0.7.2-incubating-src.tgz \uff08 asc \u3001 md5 \uff09","title":"0.7.2 \u53d1\u5e03"},{"location":"downloads/#071","text":"\u53d1\u5e03\u65e5\u671f\uff1a2012 \u5e74 6 \u6708 27 \u65e5 \u53d1\u884c\u8bf4\u660e \u4e0b\u8f7d\uff1a kafka-0.7.1-incubating-src.tgz \uff08 asc \u3001 md5 \uff09","title":"0.7.1 \u53d1\u5e03"},{"location":"downloads/#070","text":"2012 \u5e74 1 \u6708 4 \u65e5\u53d1\u5e03 \u53d1\u884c\u8bf4\u660e \u4e0b\u8f7d\uff1a kafka-0.7.0-incubating-src.tar.gz \uff08 asc \u3001 md5 \uff09 \u60a8\u53ef\u4ee5\u5728\u6b64\u5904 \u4e0b\u8f7d 0.7.0-incubating \u4e4b\u524d\u7684\u7248\u672c\u3002","title":"0.7.0 \u53d1\u5e03"}]}